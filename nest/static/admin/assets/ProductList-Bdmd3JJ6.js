import{d as X,v as Y,r as k,e as r,f as m,g as n,h as e,K as d,y as l,i as o,l as a,k as p,a2 as Z,j as b,t as g,J as N,_ as tt}from"./index-BEWhCL1q.js";/* empty css             */import{R as et}from"./RadioType-C4-J2Zv8.js";import"./index-DVG44k_-.js";import{D as w}from"./DeleteRecord-C4_57oHW.js";/* empty css                                                                    */import{P as ot}from"./Pagination-4FaohhlG.js";import{i as st}from"./format-C8RAoEAk.js";import{v as lt,e as at}from"./product-Cakm3Kom.js";import{S as nt}from"./SelectBrand-DFj6FPJO.js";import{_ as it}from"./SelectCategory.vue_vue_type_script_setup_true_lang-D5TL5eLW.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-B2T-ARqM.js";import{u as T,b as dt,k as rt}from"./product-IfnnwfpZ.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as pt}from"./SelectVendor.vue_vue_type_script_setup_true_lang-BuLnQbyc.js";import{u as mt}from"./useListRequest-Bpxbydyo.js";import{_ as U}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";/* empty css                                                                  */import"./index-BNk7xZkD.js";import"./brand-NPYEvOSK.js";import"./category-Bu2fUBIU.js";import"./category-JkcBf76e.js";import"./time-BMcbgg5F.js";import"./suppliers-B-M3H6eN.js";const ut={class:"container"},ct={class:"content_wrapper"},_t={class:"mb20"},ft={class:"lyecs-table-list-warp"},vt={class:"list-table-tool lyecs-search-warp"},bt={class:"advanced-search-warp list-table-tool-row"},gt={class:"simple-form-warp"},yt={class:"simple-form-field"},kt={class:"form-group"},Ct={class:"control-container"},It={key:0,class:"simple-form-field"},ht={class:"form-group"},St={class:"control-container"},wt={class:"simple-form-field"},Pt={class:"form-group"},Vt={class:"control-container"},xt={class:"simple-form-field"},Bt={class:"form-group"},At={class:"control-container"},Dt={class:"simple-form-field"},Nt={class:"form-group"},Tt={class:"control-container"},Ut={class:"simple-form-warp"},qt={class:"simple-form-field"},zt={class:"control-container"},Ot={key:0,class:"list-table-tool-row"},Kt={class:"list-table-tool-col"},Ft={key:1},Rt={class:"list-table-tool-row"},$t={class:"list-table-tool-col"},Lt={key:0},jt={class:"table-container"},Et={class:"flex"},Jt={key:0,class:"span-pic"},Gt=["src"],Ht={class:"span-product-con"},Mt={class:"span-product-name",style:{"word-break":"break-all"}},Qt={key:0,class:"green"},Wt={key:1,class:"red"},Xt={class:"empty-warp"},Yt={key:0,class:"empty-bg"},Zt={key:0,class:"pagination-con"},te=X({__name:"ProductList",emits:["callback"],setup(ee,{emit:q}){const z=Y(),P=q;k(0);const V=k(localStorage.getItem("adminType")),O=k(1),x=k(1),K=[{key:1,title:"普通商品",desc:"物流配送"}],{listData:F,loading:B,total:C,selectedIds:u,filterParams:i,loadData:I,onSearchSubmit:_,onSortChange:R,onSelectChange:$,onBatchAction:L,resetParams:j}=mt({apiFunction:at,idKey:"id",defaultParams:{page:1,size:z.get("pageSize"),sortField:"",sortOrder:"",keyword:"",vendorId:"",productCategoryId:"",productBrandId:"",isCanImport:""}});I();const A=async y=>{await L(y,dt),P("callback")},f=()=>{I(),P("callback")},E=async()=>{try{await rt({vendorProductIds:[...u.value]}),N.success("操作成功"),u.value=[],f()}catch(y){N.error(y.message||"操作失败")}};return(y,t)=>{const v=r("el-button"),J=r("TigInput"),D=r("el-option"),G=r("el-select"),h=r("el-popconfirm"),S=r("el-space"),H=r("el-form"),c=r("el-table-column"),M=r("el-divider"),Q=r("el-table"),W=r("a-spin");return n(),m("div",ut,[e("div",ct,[e("div",_t,[t[10]||(t[10]=e("div",{class:"title"},[e("p",{class:"xian"}),d(" 商品来源 ")],-1)),e("div",null,[l(o(et),{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=s=>x.value=s),radioList:K},null,8,["modelValue"])])]),e("div",ft,[e("div",vt,[l(H,{model:o(i),name:"form"},{default:a(()=>[e("div",bt,[e("div",gt,[e("div",yt,[e("div",kt,[t[12]||(t[12]=e("label",{class:"control-label"},[e("span",null,"商品名称：")],-1)),e("div",Ct,[l(J,{modelValue:o(i).keyword,"onUpdate:modelValue":t[1]||(t[1]=s=>o(i).keyword=s),name:"keyword",placeholder:"输入商品名称/货号",onKeyup:Z(o(_),["enter"]),clearable:"",onClear:o(_)},{append:a(()=>[l(v,{onClick:o(_)},{default:a(()=>t[11]||(t[11]=[e("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[11]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),V.value=="admin"?(n(),m("div",It,[e("div",ht,[t[13]||(t[13]=e("label",{class:"control-label"},[e("span",null,"供应商：")],-1)),e("div",St,[l(o(pt),{vendorId:o(i).vendorId,"onUpdate:vendorId":t[2]||(t[2]=s=>o(i).vendorId=s),onOnChange:o(_)},null,8,["vendorId","onOnChange"])])])])):p("",!0),e("div",wt,[e("div",Pt,[t[14]||(t[14]=e("label",{class:"control-label"},[e("span",null,"分类：")],-1)),e("div",Vt,[l(o(it),{ref:"selectCategoryRef",categoryId:o(i).productCategoryId,"onUpdate:categoryId":t[3]||(t[3]=s=>o(i).productCategoryId=s)},null,8,["categoryId"])])])]),e("div",xt,[e("div",Bt,[t[15]||(t[15]=e("label",{class:"control-label"},[e("span",null,"品牌：")],-1)),e("div",At,[l(o(nt),{brandId:o(i).productBrandId,"onUpdate:brandId":t[4]||(t[4]=s=>o(i).productBrandId=s),onOnChange:o(_)},null,8,["brandId","onOnChange"])])])]),e("div",Dt,[e("div",Nt,[t[16]||(t[16]=e("label",{class:"control-label"},[e("span",null,"商品导入：")],-1)),e("div",Tt,[l(G,{modelValue:o(i).isCanImport,"onUpdate:modelValue":t[5]||(t[5]=s=>o(i).isCanImport=s),placeholder:"是否可导入"},{default:a(()=>[l(D,{label:"可导入",value:1}),l(D,{label:"不可导入",value:0})]),_:1},8,["modelValue"])])])])]),e("div",Ut,[e("div",qt,[t[19]||(t[19]=e("label",{class:"control-label"},null,-1)),e("div",zt,[l(v,{type:"primary",plain:"",onClick:o(_)},{default:a(()=>t[17]||(t[17]=[d("搜索",-1)])),_:1,__:[17]},8,["onClick"]),l(v,{plain:"",onClick:o(j)},{default:a(()=>t[18]||(t[18]=[d("重置",-1)])),_:1,__:[18]},8,["onClick"])])])])]),V.value=="vendor"?(n(),m("div",Ot,[e("div",Kt,[l(S,null,{default:a(()=>[O.value==1?(n(),b(h,{key:0,title:"您确认要批量断供吗？",onConfirm:t[6]||(t[6]=s=>A("outage"))},{reference:a(()=>[l(v,{disabled:o(u).length===0},{default:a(()=>t[20]||(t[20]=[d("批量断供",-1)])),_:1,__:[20]},8,["disabled"])]),_:1})):p("",!0),o(u).length>0?(n(),m("span",Ft,[t[21]||(t[21]=d(" 已选择：",-1)),e("b",null,g(o(u).length),1),t[22]||(t[22]=d(" 项 ",-1))])):p("",!0)]),_:1})])])):p("",!0),e("div",Rt,[e("div",$t,[l(S,null,{default:a(()=>[l(h,{title:"您确认要批量导入吗？",onConfirm:E},{reference:a(()=>[l(v,{disabled:o(u).length===0},{default:a(()=>t[23]||(t[23]=[d("批量导入",-1)])),_:1,__:[23]},8,["disabled"])]),_:1}),l(h,{title:"您确认要批量上架吗？",onConfirm:t[7]||(t[7]=s=>A("up"))},{reference:a(()=>[l(v,{disabled:o(u).length===0},{default:a(()=>t[24]||(t[24]=[d("批量上架",-1)])),_:1,__:[24]},8,["disabled"])]),_:1}),o(u).length>0?(n(),m("span",Lt,[t[25]||(t[25]=d(" 已选择：",-1)),e("b",null,g(o(u).length),1),t[26]||(t[26]=d(" 项 ",-1))])):p("",!0)]),_:1})])])]),_:1},8,["model"])]),e("div",jt,[l(W,{spinning:o(B)},{default:a(()=>[l(Q,{data:o(F),total:o(C),"row-key":"id",onSelectionChange:o($),onSortChange:o(R)},{empty:a(()=>[e("div",Xt,[o(B)?p("",!0):(n(),m("div",Yt,"暂无数据"))])]),default:a(()=>[l(c,{type:"selection",width:"32"}),l(c,{label:"商品名称",prop:"id",sortable:"custom","min-width":320},{default:a(({row:s})=>[e("div",Et,[s.picThumb?(n(),m("div",Jt,[e("img",{src:o(st)(s.picThumb),height:"68",width:"68",alt:""},null,8,Gt)])):p("",!0),e("div",Ht,[e("div",Mt,[e("div",null,g(s.productName),1)])])])]),_:1}),l(c,{width:100,label:"商品分类",prop:"productCategoryName",align:"center"},{default:a(({row:s})=>[e("div",null,g(s.productCategoryName||"--"),1)]),_:1}),l(c,{width:120,label:"供应商",prop:"vendorName",sortable:"custom",align:"center"},{default:a(({row:s})=>[e("div",null,g(s.vendorName),1)]),_:1}),l(c,{width:100,label:"供货价",prop:"supplyPrice",sortable:"custom",align:"center"},{default:a(({row:s})=>[e("div",null,g(s.supplyPrice),1)]),_:1}),l(c,{width:120,label:"商品状态",prop:"productStatus"},{default:a(({row:s})=>[s.productStatus===1?(n(),m("div",Qt,"上架")):(n(),m("div",Wt,"下架"))]),_:1}),l(c,{width:120,fixed:"right",label:"操作"},{default:a(({row:s})=>[l(S,null,{default:a(()=>[s.isImported===1?(n(),b(o(U),{key:0,maskClose:!1,params:{act:"detail",id:s.productId,type:"vendor",examine:1},isDrawer:"",path:"product/product/Info",title:"编辑商品",width:"950px",onOkCallback:f},{default:a(()=>t[27]||(t[27]=[e("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[27]},1032,["params"])):(n(),b(o(U),{key:1,maskClose:!1,params:{act:"detail",id:s.id,examine:1,type:"vendor"},isDrawer:"",path:"vendor/supplier/product/Info",title:"查看商品",width:"1000px",onOkCallback:f},{default:a(()=>t[28]||(t[28]=[e("a",{class:"btn-link"},"查看",-1)])),_:2,__:[28]},1032,["params"])),l(M,{direction:"vertical"}),s.isImported===0?(n(),b(o(w),{key:2,params:{vendorProductIds:[s.id]},requestApi:o(lt),title:"确定导入该商品吗？",message:"操作成功",onAfterDelete:f},{default:a(()=>t[29]||(t[29]=[d(" 导入 ",-1)])),_:2,__:[29]},1032,["params","requestApi"])):p("",!0),s.isImported===1&&s.productStatus===0?(n(),b(o(w),{key:3,params:{id:s.productId,field:"productStatus",val:1},requestApi:o(T),title:"确定上架该商品吗？",message:"操作成功",onAfterDelete:f},{default:a(()=>t[30]||(t[30]=[d(" 上架 ",-1)])),_:2,__:[30]},1032,["params","requestApi"])):p("",!0),s.isImported===1&&s.productStatus===1?(n(),b(o(w),{key:4,params:{id:s.productId,field:"productStatus",val:0},requestApi:o(T),title:"确定下架该商品吗？",message:"操作成功",onAfterDelete:f},{default:a(()=>t[31]||(t[31]=[d(" 下架 ",-1)])),_:2,__:[31]},1032,["params","requestApi"])):p("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),o(C)>0?(n(),m("div",Zt,[l(o(ot),{page:o(i).page,"onUpdate:page":t[8]||(t[8]=s=>o(i).page=s),size:o(i).size,"onUpdate:size":t[9]||(t[9]=s=>o(i).size=s),total:o(C),onCallback:o(I)},null,8,["page","size","total","onCallback"])])):p("",!0)])])])])}}}),Ve=tt(te,[["__scopeId","data-v-c216b900"]]);export{Ve as default};
