import"./index-DVG44k_-.js";import{_ as j}from"./Editor.vue_vue_type_style_index_0_lang-DND4PNav.js";import{d as H}from"./vuedraggable.umd-_qUe1n4L.js";import{i as g}from"./format-C8RAoEAk.js";import{_}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import{M as I}from"./index-BNk7xZkD.js";import{d as P,r as y,o as U,c as D,e as E,j as L,g as o,l as c,h as t,f as d,k as m,y as u,i as a,K as k,_ as S}from"./index-BEWhCL1q.js";import"./index.esm-yJQQDR41.js";const q={class:"goods-info-edit-row",style:{width:"100%"}},z={key:0,class:"goods-info-edit-warp"},F={class:"goods-info-edit-act flex"},K={class:"goods-info-edit-con"},G={class:"info-edit-list-item",draggable:"false",style:{}},J={key:0,class:"edit-list-item-img"},Q={class:"lyecs-dialogImage",draggable:"false"},R=["src"],W={key:1,class:"edit-list-item-img"},X={class:"lyecs-dialogImage",draggable:"false"},Y=["src"],Z={key:2,class:"edit-list-item-text"},ee=["onClick"],te=["onClick"],se=["innerHTML"],le={key:2,class:"goods-detail-preview-warp"},ie={key:0,class:"extra"},oe=P({__name:"ProductDesc",props:{descArr:{type:[Object,Array],default:[]},disabled:{type:Boolean,default:!1},productType:{type:Number,default:1},label:{type:String,default:"商品详情"}},emits:["update:descArr"],setup(p,{emit:h}){const l=y(p.descArr||[]),v=y(!1),n=y({html:""}),r=y(0),w=h;U(()=>{w("update:descArr",l)});const x=s=>{for(let e in s)l.value.push({pic:s[e].picUrl,type:"pic"})},C=(s,e)=>{l.value[r.value]={pic:s[0].picUrl,type:"pic"}},T=(s,e)=>{l.value[r.value]={cover:s[0].videoCover,type:"video"}},M=s=>{console.log(s)},b=D(()=>{let s=[];for(let e in l.value)l.value[e].type=="pic"?s.push('<div class="desc-pic-item"><img src="'+g(l.value[e].pic)+'"></div>'):l.value[e].type=="video"?s.push(`
                <div class="desc-video-item" @click="${M(l.value[e])}">
                    <div class="desc-video-item-wrap">
                        <i class="iconfont-admin icon-shipin"></i>
                    </div>
                    <img src="${g(l.value[e].cover)}">
                </div>
            `):s.push(l.value[e].html);return s.join("<div data-division=1></div>")}),A=()=>{v.value=!0,n.value.html=""},O=s=>{n.value.html=l.value[s].html,r.value=s+1,v.value=!0},V=s=>{l.value.splice(s,1)},$=()=>{r.value>0?l.value[r.value-1]={html:n.value.html,type:"text"}:l.value.push({html:n.value.html,type:"text"}),r.value=0,v.value=!1};return(s,e)=>{const B=E("el-form-item");return o(),L(B,{label:p.label,rules:[{required:p.productType==4}]},{default:c(()=>[t("div",q,[p.disabled?m("",!0):(o(),d("div",z,[t("div",F,[u(a(_),{type:"gallery",class:"item-bg",onOkCallback:x,params:{isMultiple:!0}},{default:c(()=>e[5]||(e[5]=[t("a",{class:"add-item info-pic-add"},[t("i",{class:"iconfont icon-tianjiatupian"}),k("添加图片")],-1)])),_:1,__:[5]}),t("a",{class:"add-item info-text-add",onClick:A},e[6]||(e[6]=[t("i",{class:"iconfont icon-wenben",style:{"font-size":"14px"}},null,-1),k("添加文本",-1)])),e[7]||(e[7]=t("span",null,"点击按钮添加图片或者文本，您还可以通过拖拽进行排序",-1))]),t("div",K,[u(a(H),{class:"info-edit-con-list","item-key":"",list:l.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:e[0]||(e[0]=()=>{}),onEnd:e[1]||(e[1]=()=>{})},{item:c(({element:i,index:f})=>[t("div",G,[i.type=="pic"?(o(),d("div",J,[t("a",Q,[t("img",{src:a(g)(i.pic),draggable:"false"},null,8,R)]),u(a(_),{type:"gallery",class:"item-bg",onOkCallback:C,params:{isMultiple:!1},data:{index:f}},{default:c(()=>e[8]||(e[8]=[t("div",{class:"btn-edit"},"修改",-1)])),_:2,__:[8]},1032,["data"])])):m("",!0),i.type=="video"?(o(),d("div",W,[t("a",X,[t("img",{src:a(g)(i.cover),draggable:"false"},null,8,Y)]),u(a(_),{type:"galleryVideo",class:"item-bg",onOkCallback:T,params:{isMultiple:!1},data:{index:f}},{default:c(()=>e[9]||(e[9]=[t("div",{class:"btn-edit"},"修改",-1)])),_:2,__:[9]},1032,["data"])])):m("",!0),i.type=="text"?(o(),d("div",Z,[e[10]||(e[10]=t("p",null,[t("i",{class:"iconfont icon-1fuwenben"})],-1)),e[11]||(e[11]=t("p",null,"文本",-1)),t("div",{class:"btn-edit",onClick:N=>O(f)},"修改",8,ee)])):m("",!0),t("i",{class:"btn-del iconfont icon-cha",onClick:N=>V(f)},null,8,te)])]),_:1},8,["list"])]),u(a(I),{open:v.value,"onUpdate:open":e[3]||(e[3]=i=>v.value=i),title:"添加文本",onOk:e[4]||(e[4]=i=>$()),destroyOnClose:!0,width:800},{default:c(()=>[u(a(j),{html:n.value.html,"onUpdate:html":e[2]||(e[2]=i=>n.value.html=i),height:"300px"},null,8,["html"])]),_:1},8,["open"])])),b.value?(o(),d("div",{key:1,class:"goods-detail-preview-warp",innerHTML:b.value},null,8,se)):(o(),d("div",le,e[12]||(e[12]=[t("div",{class:"preview-warp"},"商品描述预览区域",-1)])))]),p.productType==4?(o(),d("div",ie,"此处填写内容，将在商品付费后展示")):m("",!0)]),_:1},8,["label","rules"])}}}),fe=S(oe,[["__scopeId","data-v-15860743"]]);export{fe as default};
