import{d as K,r as m,a as M,a5 as O,ak as L,o as P,J as v,e as s,f as S,g,h as _,j as T,k as A,l as o,y as l,E as G,i as H,F as Q,m as W,K as p,I as X}from"./index-BEWhCL1q.js";import{a as Y,c as Z}from"./languagesList-D1Cjy3FP.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-B2T-ARqM.js";import"./index-DVG44k_-.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              *//* empty css             */import{_ as h}from"./SelectLocaleCode.vue_vue_type_script_setup_true_lang-CpowgcGJ.js";import{a as ee}from"./currencyManagement-BEhPZh48.js";import"./time-BMcbgg5F.js";import"./index-BNk7xZkD.js";import"./verbalAssociation-By8-alcJ.js";const le={class:"container"},ae={class:"content_wrapper"},te={class:"lyecs-form-table"},ye=K({__name:"Info",props:{id:{type:Number,default:0},promotionType:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:N,emit:q}){const f=q,n=x,i=m(!0),b=M().currentRoute.value.query,y=m(n.isDialog?n.act:String(b.act)),V=m(n.isDialog?n.id:Number(b.id)),E=y.value==="add"?"create":"update",C=O(),a=m({language:"",localeCode:"",isEnabled:0,isDefault:0,sort:50}),I=L({page:1,size:-1,sortField:"",sortOrder:"",name:""}),w=m(),B=async()=>{i.value=!0;try{const r=await ee({...I});w.value=r.records}catch(r){v.error(r.message)}finally{i.value=!1}};P(()=>{B(),y.value==="detail"?U():i.value=!1});const U=async()=>{try{const r=await Y(y.value,{id:V.value});a.value=r}catch(r){v.error(r.message),f("close")}finally{i.value=!1}},k=async()=>{await C.value.validate();try{f("update:confirmLoading",!0);const r=await Z(E,{id:V.value,...a.value});f("submitCallback",r),v.success("操作成功")}catch(r){v.error(r.message)}finally{f("update:confirmLoading",!1)}},R=()=>{k()},F=L({promotionName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],sendType:[{required:!0,validator:(r,e,d)=>{if(!a.value.language&&!a.value.language){d(new Error("请输入用券时间"));return}d()},trigger:"blur"}]});return N({onFormSubmit:R}),(r,e)=>{const d=s("TigInput"),u=s("el-form-item"),z=s("el-option"),$=s("el-select"),c=s("el-radio"),D=s("el-radio-group"),j=s("el-button"),J=s("el-form");return g(),S("div",le,[_("div",ae,[_("div",te,[i.value?A("",!0):(g(),T(J,{key:0,ref_key:"formRef",ref:C,rules:F,model:a.value,"label-width":"auto"},{default:o(()=>[l(u,{prop:"language",label:"语言名称：",rules:[{required:!0,message:"语言名称不能为空!"}]},{default:o(()=>[l(d,{classType:"tig-form-input",type:"text",modelValue:a.value.language,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.language=t)},null,8,["modelValue"])]),_:1}),l(u,{prop:"localeCode",label:"语言识别码：",rules:[{required:!0,message:"请选择语言识别码!"}]},{default:o(()=>[l(H(h),{modelValue:a.value.localeCode,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.localeCode=t)},null,8,["modelValue"]),e[7]||(e[7]=_("div",{class:"extra"},"请选择关联语言，语言类型是由您自行添加的",-1))]),_:1,__:[7]}),l(u,{prop:"currencyId",label:"关联货币：",rules:[{required:!0,message:"请选择关联货币!"}]},{default:o(()=>[l($,{modelValue:a.value.currencyId,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.currencyId=t),placeholder:"请选择关联货币",size:"default"},{default:o(()=>[(g(!0),S(Q,null,W(w.value,t=>(g(),T(z,{key:t.id,label:t.name+" - "+t.symbol,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[8]||(e[8]=_("div",{class:"extra"},"请选择关联语言，语言类型是由您自行添加的",-1))]),_:1,__:[8]}),l(u,{prop:"isEnabled",label:"是否启用："},{default:o(()=>[l(D,{modelValue:a.value.isEnabled,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.isEnabled=t)},{default:o(()=>[l(c,{value:1},{default:o(()=>e[9]||(e[9]=[p("是",-1)])),_:1,__:[9]}),l(c,{value:0},{default:o(()=>e[10]||(e[10]=[p("否",-1)])),_:1,__:[10]})]),_:1},8,["modelValue"])]),_:1}),l(u,{prop:"isDefault",label:"是否默认："},{default:o(()=>[l(D,{modelValue:a.value.isDefault,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.isDefault=t)},{default:o(()=>[l(c,{value:1},{default:o(()=>e[11]||(e[11]=[p("是",-1)])),_:1,__:[11]}),l(c,{value:0},{default:o(()=>e[12]||(e[12]=[p("否",-1)])),_:1,__:[12]})]),_:1},8,["modelValue"])]),_:1}),l(u,{prop:"sort",label:"排序："},{default:o(()=>[l(d,{classType:"tig-form-input",type:"integer",modelValue:a.value.sort,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.sort=t)},null,8,["modelValue"])]),_:1}),G(l(u,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[l(j,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[6]||(e[6]=t=>k())},{default:o(()=>e[13]||(e[13]=[p("提交",-1)])),_:1,__:[13]},512)]),_:1},512),[[X,!n.isDialog]])]),_:1},8,["rules","model"]))])])])}}});export{ye as default};
