/* empty css             */import{d as V,v as P,r as u,ak as N,a as T,o as x,e as l,f as _,g as m,h as s,y as o,l as n,k as f,i as B,J as F}from"./index-BEWhCL1q.js";/* empty css                                                                    */import{P as L}from"./Pagination-4FaohhlG.js";import{g as R}from"./adminLog-CbUEnDTx.js";const U={class:"container"},q={class:"content_wrapper"},A={class:"lyecs-table-list-warp"},O={class:"list-table-tool lyecs-search-warp"},E={class:"list-table-tool-row"},J={class:"list-table-tool-col"},M={class:"table-container"},j={class:"empty-warp"},D={key:0,class:"empty-bg"},G={key:0,class:"pagination-con"},Z=V({__name:"List",setup(H){const b=P(),g=u([]),r=u(!0),c=u(0);u([]);const e=N({page:1,size:b.get("pageSize"),sortField:"logTime",sortOrder:"desc",keyword:""}),d=async()=>{r.value=!0;try{const a=await R({...e});g.value=a.records,c.value=a.total}catch(a){F.error(a.message)}finally{r.value=!1}},v=T();x(()=>{v.currentRoute.value.query.userId&&(e.userId=Number(v.currentRoute.value.query.userId)),d()});const y=()=>{d()},k=({prop:a,order:t})=>{e.sortField=a,e.sortOrder=t=="ascending"?"asc":t=="descending"?"desc":"",d()};return(a,t)=>{const w=l("el-button"),h=l("TigInput"),I=l("el-space"),C=l("el-form"),p=l("el-table-column"),z=l("el-table"),S=l("a-spin");return m(),_("div",U,[s("div",q,[s("div",A,[s("div",O,[o(C,{model:e},{default:n(()=>[s("div",E,[s("div",J,[o(I,null,{default:n(()=>[o(h,{modelValue:e.keyword,"onUpdate:modelValue":t[0]||(t[0]=i=>e.keyword=i),class:"width240",name:"keyword",placeholder:"输入关键词或IP地址"},{append:n(()=>[o(w,{onClick:y},{default:n(()=>t[3]||(t[3]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[3]})]),_:1},8,["modelValue"])]),_:1})])])]),_:1},8,["model"])]),s("div",M,[o(S,{spinning:r.value},{default:n(()=>[o(z,{data:g.value,loading:r.value,total:c.value,"row-key":"logId",onSortChange:k},{empty:n(()=>[s("div",j,[r.value?f("",!0):(m(),_("div",D,"暂无数据"))])]),default:n(()=>[o(p,{label:"操作者",prop:"username"}),o(p,{label:"IP地址",prop:"ipAddress"}),o(p,{label:"操作日期",prop:"logTime",sortable:"custom"}),o(p,{label:"操作记录",prop:"logInfo"})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),c.value>0?(m(),_("div",G,[o(B(L),{page:e.page,"onUpdate:page":t[1]||(t[1]=i=>e.page=i),size:e.size,"onUpdate:size":t[2]||(t[2]=i=>e.size=i),total:c.value,onCallback:d},null,8,["page","size","total"])])):f("",!0)])])])])}}});export{Z as default};
