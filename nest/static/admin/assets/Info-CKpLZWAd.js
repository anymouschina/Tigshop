import{d as N,r,a as x,a5 as D,o as R,J as m,e as i,f as T,g as y,h as S,j as q,k as L,l as n,y as o,E as j,K as E,I as F}from"./index-BEWhCL1q.js";import{a as U,u as J}from"./signInSetting-CfjD7n5t.js";const K={class:"container"},M={class:"content_wrapper"},O={class:"lyecs-form-table"},H=N({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:V,emit:k}){const l=k,s=w,d=r(!0),p=x().currentRoute.value.query,f=r(s.isDialog?s.act:String(p.act)),g=r(s.isDialog?s.id:Number(p.id)),h=f.value==="add"?"create":"update",_=D(),t=r({});R(()=>{C()});const C=async()=>{try{const e=await U(f.value,{id:g.value});Object.assign(t.value,e)}catch(e){m.error(e.message),l("close")}finally{d.value=!1}},v=async()=>{await _.value.validate();try{l("update:confirmLoading",!0);const e=await J(h,{id:g.value,...t.value});l("submitCallback",e),m.success("操作成功")}catch(e){m.error(e.message)}finally{l("update:confirmLoading",!1)}};return V({onFormSubmit:()=>{v()}}),(e,a)=>{const b=i("TigInput"),u=i("el-form-item"),I=i("el-button"),B=i("el-form");return y(),T("div",K,[S("div",M,[S("div",O,[d.value?L("",!0):(y(),q(B,{key:0,ref_key:"formRef",ref:_,model:t.value,"label-width":"auto"},{default:n(()=>[o(u,{prop:"name",label:"名称",rules:[{required:!0,message:"名称不能为空!"}]},{default:n(()=>[o(b,{classType:"tig-form-input",modelValue:t.value.name,"onUpdate:modelValue":a[0]||(a[0]=c=>t.value.name=c)},null,8,["modelValue"])]),_:1}),o(u,{prop:"points",label:"赠送积分",rules:[{required:!0,message:"赠送积分不能为空!"}]},{default:n(()=>[o(b,{classType:"tig-form-input",type:"integer",modelValue:t.value.points,"onUpdate:modelValue":a[1]||(a[1]=c=>t.value.points=c)},null,8,["modelValue"])]),_:1}),j(o(u,{"wrapper-col":{offset:4,span:16}},{default:n(()=>[o(I,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:v},{default:n(()=>a[2]||(a[2]=[E("提交",-1)])),_:1,__:[2]},512)]),_:1},512),[[F,!s.isDialog]])]),_:1},8,["model"]))])])])}}});export{H as default};
