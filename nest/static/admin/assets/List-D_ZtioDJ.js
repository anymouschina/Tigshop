import{d as J,v as W,r as V,e as d,f as u,g as r,h as s,k as _,y as o,l as a,i as t,a2 as G,F as Q,m as X,j as v,K as n,t as g,A as Y,an as I,J as Z,_ as ee}from"./index-BEWhCL1q.js";/* empty css             */import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-B2T-ARqM.js";import"./index-DVG44k_-.js";import{D as H}from"./DeleteRecord-C4_57oHW.js";/* empty css                                                                    */import{P as te}from"./Pagination-4FaohhlG.js";/* empty css                                                                  *//* empty css                                                                              */import{S as se}from"./SelectTimeInterval-CHncG0ge.js";import{f as k}from"./time-BMcbgg5F.js";import{u as O,d as le,g as oe,a as ae}from"./notice-DQp64T_8.js";import{u as ie}from"./useListRequest-Bpxbydyo.js";import{_ as h}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";const ne={class:"container"},de={class:"content_wrapper"},re={class:"lyecs-table-list-warp"},me={class:"list-table-tool lyecs-search-warp"},pe={class:"advanced-search-warp list-table-tool-row"},ue={class:"simple-form-warp"},_e={class:"simple-form-field"},fe={class:"form-group"},ce={class:"control-container"},ve={key:0,class:"simple-form-field"},ge={class:"form-group"},be={class:"control-container"},ye={class:"simple-form-field"},De={class:"form-group"},Ye={class:"flex flex-align-center"},ke={style:{"margin-left":"10px"}},Ce={class:"simple-form-warp"},Te={class:"simple-form-field"},we={class:"control-container"},He={class:"list-table-tool-row"},Me={class:"simple-form-warp"},xe={class:"simple-form-field"},Ae={class:"table-container"},Se={class:"tit-row flex flex-align-center"},Ve={key:0,class:"label"},Ie={class:"txt"},Oe={class:"empty-warp"},he={key:0,class:"empty-bg"},ze={key:0,class:"pagination-con"},qe={key:0,class:"selected-action-warp selected-warp-left"},Ue={class:"selected-action"},Fe=J({__name:"List",setup(Ke){const z=W(),{listData:q,loading:b,total:C,selectedIds:M,filterParams:i,loadData:p,onSearchSubmit:y,onSortChange:U,onSelectChange:F,resetParams:K}=ie({apiFunction:ae,idKey:"productId",defaultParams:{page:1,size:z.get("pageSize"),sortField:"",sortOrder:"",title:"",status:"",endTime:"",startTime:""}});p();const T=V(-1),x=m=>{if(m===-1){T.value=m;return}i.startTime=Y().startOf("day").format("YYYY-MM-DD HH:mm:ss"),m===0&&(i.endTime=Y().endOf("day").format("YYYY-MM-DD HH:mm:ss")),m===1&&(i.startTime=Y().subtract(1,"day").startOf("day").format("YYYY-MM-DD HH:mm:ss"),i.endTime=Y().subtract(1,"day").endOf("day").format("YYYY-MM-DD HH:mm:ss")),m===2&&(i.startTime=k(I(7,"sub"),"YYYY-MM-DD HH:mm:ss"),i.endTime=k(new Date,"YYYY-MM-DD HH:mm:ss")),m===3&&(i.startTime=k(I(30,"sub"),"YYYY-MM-DD HH:mm:ss"),i.endTime=k(new Date,"YYYY-MM-DD HH:mm:ss")),p()},w=V();return(async()=>{b.value=!0;try{const m=await oe();w.value=m}catch(m){Z.error(m.message)}finally{b.value=!1}})(),(m,e)=>{const L=d("TigInput"),P=d("el-option"),B=d("el-select"),D=d("el-radio-button"),N=d("el-radio-group"),f=d("el-button"),j=d("el-form"),c=d("el-table-column"),A=d("el-divider"),S=d("el-space"),R=d("el-table"),$=d("a-spin");return r(),u("div",ne,[s("div",de,[s("div",re,[s("div",me,[o(j,{model:t(i),name:"form"},{default:a(()=>[s("div",pe,[s("div",ue,[s("div",_e,[s("div",fe,[e[8]||(e[8]=s("label",{class:"control-label"},[s("span",null,"标题：")],-1)),s("div",ce,[o(L,{modelValue:t(i).title,"onUpdate:modelValue":e[0]||(e[0]=l=>t(i).title=l),name:"keyword",placeholder:"请输入内容标题",onKeyup:G(t(y),["enter"]),clearable:"",onClear:t(y)},null,8,["modelValue","onKeyup","onClear"])])])]),w.value?(r(),u("div",ve,[s("div",ge,[e[9]||(e[9]=s("label",{class:"control-label"},[s("span",null,"状态：")],-1)),s("div",be,[o(B,{modelValue:t(i).status,"onUpdate:modelValue":e[1]||(e[1]=l=>t(i).status=l),placeholder:"请选择文章状态",onChange:t(y),clearable:""},{default:a(()=>[(r(!0),u(Q,null,X(w.value,(l,E)=>(r(),v(P,{label:l,value:E},null,8,["label","value"]))),256))]),_:1},8,["modelValue","onChange"])])])])):_("",!0),s("div",ye,[s("div",De,[e[14]||(e[14]=s("label",{class:"control-label"},[s("span",null,"推送时间：")],-1)),s("div",Ye,[o(t(se),{"start-date":t(i).startTime,"onUpdate:startDate":e[2]||(e[2]=l=>t(i).startTime=l),"end-date":t(i).endTime,"onUpdate:endDate":e[3]||(e[3]=l=>t(i).endTime=l),"value-format":"YYYY-MM-DD HH:mm:ss",onCallback:e[4]||(e[4]=l=>x(-1))},null,8,["start-date","end-date"]),s("div",ke,[o(N,{class:"itemWidth",modelValue:T.value,"onUpdate:modelValue":e[5]||(e[5]=l=>T.value=l),onChange:x},{default:a(()=>[o(D,{value:0},{default:a(()=>e[10]||(e[10]=[n("今天",-1)])),_:1,__:[10]}),o(D,{value:1},{default:a(()=>e[11]||(e[11]=[n("昨天",-1)])),_:1,__:[11]}),o(D,{value:2},{default:a(()=>e[12]||(e[12]=[n("近7天",-1)])),_:1,__:[12]}),o(D,{value:3},{default:a(()=>e[13]||(e[13]=[n("近30天",-1)])),_:1,__:[13]})]),_:1},8,["modelValue"])])])])]),s("div",Ce,[s("div",Te,[e[17]||(e[17]=s("label",{class:"control-label"},null,-1)),s("div",we,[o(f,{type:"primary",plain:"",onClick:t(y)},{default:a(()=>e[15]||(e[15]=[n("搜索",-1)])),_:1,__:[15]},8,["onClick"]),o(f,{plain:"",onClick:t(K)},{default:a(()=>e[16]||(e[16]=[n("重置",-1)])),_:1,__:[16]},8,["onClick"])])])])])]),s("div",He,[s("div",Me,[s("div",xe,[o(t(h),{isDrawer:"",onOkCallback:t(p),title:"添加活动通知",width:"700px",path:"salesman/notice/Info",params:{act:"add"}},{default:a(()=>[o(f,{type:"primary"},{default:a(()=>e[18]||(e[18]=[n("立即新建",-1)])),_:1,__:[18]})]),_:1},8,["onOkCallback"])])])])]),_:1},8,["model"])]),s("div",Ae,[o($,{spinning:t(b)},{default:a(()=>[o(R,{data:t(q),total:t(C),"row-key":"productId",onSelectionChange:t(F),onSortChange:t(U)},{empty:a(()=>[s("div",Oe,[t(b)?_("",!0):(r(),u("div",he,"暂无数据"))])]),default:a(()=>[o(c,{label:"标题",prop:"productId",width:250,fixed:"left","show-overflow-tooltip":""},{default:a(({row:l})=>[s("div",Se,[l.isTop!=0?(r(),u("div",Ve,"置顶")):_("",!0),s("div",Ie,g(l.title),1)])]),_:1}),o(c,{label:"推送时间",width:200,sortable:"custom"},{default:a(({row:l})=>[n(g(l.startTime),1)]),_:1}),o(c,{label:"失效时间",width:200,sortable:"custom"},{default:a(({row:l})=>[n(g(l.endTime||"--"),1)]),_:1}),o(c,{label:"状态"},{default:a(({row:l})=>[n(g(l.statusText),1)]),_:1}),o(c,{width:200,fixed:"right",label:"操作"},{default:a(({row:l})=>[o(S,{size:0},{default:a(()=>[l.isTop!=0?(r(),v(t(H),{key:0,onAfterDelete:t(p),requestApi:t(O),params:{id:l.id,field:"isTop",val:0},title:"确定取消置顶吗？"},{default:a(()=>e[19]||(e[19]=[n("取消置顶",-1)])),_:2,__:[19]},1032,["onAfterDelete","requestApi","params"])):_("",!0),l.isTop!=0?(r(),v(A,{key:1,direction:"vertical"})):_("",!0),o(t(h),{params:{act:"detail",id:l.id},isDrawer:"",path:"salesman/notice/Info",title:"编辑内容",width:"700px",onOkCallback:t(p)},{default:a(()=>e[20]||(e[20]=[s("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[20]},1032,["params","onOkCallback"]),o(A,{direction:"vertical"}),l.isAvailable==1?(r(),v(t(H),{key:2,onAfterDelete:t(p),requestApi:t(O),params:{id:l.id,field:"isAvailable",val:0},title:"失效后将不可恢复，确认失效？",message:"操作成功"},{default:a(()=>e[21]||(e[21]=[n("失效",-1)])),_:2,__:[21]},1032,["onAfterDelete","requestApi","params"])):(r(),v(t(H),{key:3,onAfterDelete:t(p),requestApi:t(le),params:{id:l.id}},{default:a(()=>e[22]||(e[22]=[n("删除",-1)])),_:2,__:[22]},1032,["onAfterDelete","requestApi","params"]))]),_:2},1024)]),_:1})]),_:1},8,["data","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),t(C)>0?(r(),u("div",ze,[o(t(te),{page:t(i).page,"onUpdate:page":e[6]||(e[6]=l=>t(i).page=l),size:t(i).size,"onUpdate:size":e[7]||(e[7]=l=>t(i).size=l),total:t(C),onCallback:t(p)},null,8,["page","size","total","onCallback"])])):_("",!0)]),t(M).length>0?(r(),u("div",qe,[s("div",Ue,[o(S,null,{default:a(()=>[s("span",null,[e[23]||(e[23]=n("已选择：",-1)),s("b",null,g(t(M).length),1),e[24]||(e[24]=n(" 项",-1))]),o(f,null,{default:a(()=>e[25]||(e[25]=[n("设置等级",-1)])),_:1,__:[25]}),o(f,null,{default:a(()=>e[26]||(e[26]=[n("分组",-1)])),_:1,__:[26]}),o(f,null,{default:a(()=>e[27]||(e[27]=[n("清退",-1)])),_:1,__:[27]})]),_:1})])])):_("",!0)])])])}}}),st=ee(Fe,[["__scopeId","data-v-6b6fc77c"]]);export{st as default};
