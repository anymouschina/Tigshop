/* empty css             */import{a0 as w,d as F,r,a5 as B,R,o as U,e as n,f as _,g as i,h as p,k as z,y as o,l as s,F as h,m as E,j as O,i as I,a9 as q,K as J,J as v,_ as K}from"./index-BEWhCL1q.js";import{_ as $}from"./Editor.vue_vue_type_style_index_0_lang-DND4PNav.js";import{d as A}from"./format-C8RAoEAk.js";import{u as D}from"./theme-YtIM2XHr.js";import"./index.esm-yJQQDR41.js";import"./index-DVG44k_-.js";import"./index-BNk7xZkD.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";const G=()=>w({url:"setting/mailTemplates/list",method:"get"}),H=g=>w({url:"setting/mailTemplates/update",method:"post",data:g}),P={class:"container"},Q={class:"content_wrapper"},W={class:"lyecs-form-table"},X={class:"selected-action"},Y=F({__name:"MailTemplate",emits:["submitCallback","update:confirmLoading","close"],setup(g,{expose:T,emit:S}){const{themeInfo:k}=D(),u=S,C=r(!1),c=r(!0),b=B(),t=r({templateName:"",templateId:""}),m=r([]),V=async()=>{var a;try{const e=await G();Object.assign(m.value,A(e)),m.value&&((a=m.value)==null?void 0:a.length)>0&&(t.value.templateId=m.value[0].templateId)}catch(e){v.error(e.message)}finally{c.value=!1}};R(()=>t.value.templateId,a=>{const e=m.value.find(d=>d.templateId==a);e&&Object.assign(t.value,e)}),U(()=>{V()});const y=async()=>{await b.value.validate();try{u("update:confirmLoading",!0);const a=await H({id:t.value.templateId,...t.value});u("submitCallback",a),v.success("修改成功")}catch(a){v.error(a.message)}finally{u("update:confirmLoading",!1)}};return T({onFormSubmit:()=>{y()}}),(a,e)=>{const d=n("el-option"),x=n("el-select"),f=n("el-form-item"),N=n("TigInput"),j=n("el-form"),L=n("a-spin"),M=n("el-button");return i(),_(h,null,[p("div",P,[p("div",Q,[p("div",W,[o(L,{spinning:c.value},{default:s(()=>[o(j,{ref_key:"formRef",ref:b,model:t.value,"label-width":"auto"},{default:s(()=>[o(f,{label:"邮件模板",prop:"selTemplate"},{default:s(()=>[o(x,{modelValue:t.value.templateId,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.templateId=l),style:{width:"100%"}},{default:s(()=>[(i(!0),_(h,null,E(m.value,l=>(i(),O(d,{key:l.templateId,label:l.templateName,value:l.templateId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(f,{label:"邮件主题",prop:"templateSubject"},{default:s(()=>[o(N,{width:"100%",modelValue:t.value.templateSubject,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.templateSubject=l),type:"text"},null,8,["modelValue"])]),_:1}),o(f,{label:"邮件内容",prop:"templateContent"},{default:s(()=>[o(I($),{html:t.value.templateContent,"onUpdate:html":e[2]||(e[2]=l=>t.value.templateContent=l)},null,8,["html"])]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])])])]),c.value?z("",!0):(i(),_("div",{key:0,class:"selected-action-warp selected-warp-left",style:q({left:I(k).layout!=="topMenu"?"369px":"270px"})},[p("div",X,[o(M,{loading:C.value,class:"form-submit-btn",size:"large",type:"primary",onClick:y},{default:s(()=>e[3]||(e[3]=[J("提 交",-1)])),_:1,__:[3]},8,["loading"])])],4))],64)}}}),ie=K(Y,[["__scopeId","data-v-463106a5"]]);export{ie as default};
