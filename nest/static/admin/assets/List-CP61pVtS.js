import{d as T,v as q,r as B,e as p,f as h,g as C,h as e,k,y as s,l,i as t,a2 as L,K as n,t as i,ao as _,J as $}from"./index-BEWhCL1q.js";/* empty css             */import"./index-DVG44k_-.js";/* empty css                                                                    */import{P as G}from"./Pagination-4FaohhlG.js";import{p as g}from"./format-C8RAoEAk.js";import{e as J,a as M}from"./promoter-CIm3q0L5.js";import{r as R}from"./export-CPfNg7CD.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-B2T-ARqM.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as X,a as j}from"./SelectPromoteMode.vue_vue_type_script_setup_true_lang-Ds9AIsHi.js";import{u as H}from"./useListRequest-Bpxbydyo.js";import{_ as Q}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";import"./time-BMcbgg5F.js";import"./subgroup-ByRZER72.js";import"./promoteMode-CpoA8XRR.js";const W={class:"container"},Y={class:"content_wrapper"},Z={class:"lyecs-table-list-warp"},tt={class:"list-table-tool lyecs-search-warp"},et={class:"advanced-search-warp list-table-tool-row"},ot={class:"simple-form-warp"},lt={class:"simple-form-field"},st={class:"form-group"},at={class:"control-container"},nt={class:"simple-form-field"},it={class:"form-group"},rt={class:"control-container"},dt={class:"simple-form-field"},pt={class:"form-group"},ct={class:"control-container"},mt={class:"simple-form-warp"},ft={class:"simple-form-field"},ut={class:"control-container"},_t={class:"list-table-tool-row"},gt={class:"simple-form-warp"},vt={class:"simple-form-field"},bt={class:"table-container"},ht={class:"flex flex-align-center"},Ct={class:"flex flex-align-center"},wt={class:"flex flex-align-center"},xt={class:"flex flex-align-center"},yt={class:"flex flex-align-center"},It={class:"btn-link"},kt={class:"empty-warp"},zt={key:0,class:"empty-bg"},Ut={key:0,class:"pagination-con"},St={key:0,class:"selected-action-warp selected-warp-left"},Dt={class:"selected-action"},Ht=T({__name:"List",setup(Et){const w=q(),{listData:D,loading:z,total:x,selectedIds:U,filterParams:r,loadData:y,onSearchSubmit:m,onSortChange:E,resetParams:O}=H({apiFunction:M,idKey:"articleId",defaultParams:{page:1,sortField:"",sortOrder:"",mobile:"",groupId:"",level:""}});y();const v=B(!1),V=async()=>{v.value=!0;try{const b=await J({...r,isExport:"1",size:-1});v.value=!1,R(b,"分销员明细导出")}catch(b){$.error(b.message)}finally{v.value=!1}};return(b,o)=>{const N=p("TigInput"),I=p("el-button"),A=p("el-form"),d=p("el-table-column"),f=p("el-icon"),u=p("el-tooltip"),F=p("el-table"),K=p("a-spin"),P=p("el-space");return C(),h("div",W,[e("div",Y,[e("div",Z,[e("div",tt,[s(A,{model:t(r),name:"form"},{default:l(()=>[e("div",et,[e("div",ot,[e("div",lt,[e("div",st,[o[5]||(o[5]=e("label",{class:"control-label"},[e("span",null,"分销员：")],-1)),e("div",at,[s(N,{modelValue:t(r).mobile,"onUpdate:modelValue":o[0]||(o[0]=a=>t(r).mobile=a),name:"mobile",placeholder:"请输入手机号",onKeyup:L(t(m),["enter"]),clearable:"",onClear:t(m)},null,8,["modelValue","onKeyup","onClear"])])])]),e("div",nt,[e("div",it,[o[6]||(o[6]=e("label",{class:"control-label"},[e("span",null,"分组：")],-1)),e("div",rt,[s(t(X),{groupId:t(r).groupId,"onUpdate:groupId":o[1]||(o[1]=a=>t(r).groupId=a),onOnChange:t(m)},null,8,["groupId","onOnChange"])])])]),e("div",dt,[e("div",pt,[o[7]||(o[7]=e("label",{class:"control-label"},[e("span",null,"等级：")],-1)),e("div",ct,[s(t(j),{level:t(r).level,"onUpdate:level":o[2]||(o[2]=a=>t(r).level=a),onOnChange:t(m)},null,8,["level","onOnChange"])])])]),e("div",mt,[e("div",ft,[o[10]||(o[10]=e("label",{class:"control-label"},null,-1)),e("div",ut,[s(I,{type:"primary",plain:"",onClick:t(m)},{default:l(()=>o[8]||(o[8]=[n("搜索",-1)])),_:1,__:[8]},8,["onClick"]),s(I,{plain:"",onClick:t(O)},{default:l(()=>o[9]||(o[9]=[n("重置",-1)])),_:1,__:[9]},8,["onClick"])])])])])]),e("div",_t,[e("div",gt,[e("div",vt,[s(I,{type:"primary",onClick:V,loading:v.value},{default:l(()=>o[11]||(o[11]=[n("导出EXCEL",-1)])),_:1,__:[11]},8,["loading"])])])])]),_:1},8,["model"])]),e("div",bt,[s(K,{spinning:t(z)},{default:l(()=>[s(F,{data:t(D),total:t(x),"row-key":"productId",onSortChange:t(E)},{empty:l(()=>[e("div",kt,[t(z)?k("",!0):(C(),h("div",zt,"暂无数据"))])]),default:l(()=>[s(d,{label:"手机号",prop:"productId",width:130,fixed:"left"},{default:l(({row:a})=>{var c;return[n(i(((c=a.baseUserInfo)==null?void 0:c.mobile)||"-"),1)]}),_:1}),s(d,{label:"昵称",prop:"productId",width:150,fixed:"left"},{default:l(({row:a})=>{var c,S;return[n(i(((c=a.baseUserInfo)==null?void 0:c.nickname)||((S=a.baseUserInfo)==null?void 0:S.username)||"-"),1)]}),_:1}),s(d,{label:"等级",prop:"levelText",width:100},{default:l(({row:a})=>[n(i(a.levelText),1)]),_:1}),s(d,{label:"分组",prop:"groupInfo.groupName",width:100},{default:l(({row:a})=>{var c;return[n(i(((c=a.groupInfo)==null?void 0:c.groupName)||"-"),1)]}),_:1}),s(d,{prop:"productId",align:"left",width:"160"},{header:l(()=>[e("div",ht,[e("p",null,"累计销售金额("+i(t(w).config.amountUnit)+")",1),s(u,{placement:"top",effect:"light"},{content:l(()=>o[12]||(o[12]=[n(" 累计业绩为实际有效业绩，剔除了退款金额。 ",-1)])),default:l(()=>[s(f,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:l(()=>[s(t(_))]),_:1})]),_:1})])]),default:l(({row:a})=>[n(i(t(g)(a.saleAmount)),1)]),_:1}),s(d,{prop:"productId",align:"left",width:"150"},{header:l(()=>[e("div",Ct,[e("p",null,"支付金额("+i(t(w).config.amountUnit)+")",1),s(u,{placement:"top",effect:"light"},{content:l(()=>o[13]||(o[13]=[n(" 所选时间内，分销员客户的支付成功金额（含退款）。目前仅支持展示2023.11后的数据。 ",-1)])),default:l(()=>[s(f,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:l(()=>[s(t(_))]),_:1})]),_:1})])]),default:l(({row:a})=>[n(i(t(g)(a.payMoney)),1)]),_:1}),s(d,{prop:"refundAmount",align:"left",width:"160"},{header:l(()=>[e("div",wt,[e("p",null,"退款金额("+i(t(w).config.amountUnit)+")",1),s(u,{placement:"top",effect:"light"},{content:l(()=>o[14]||(o[14]=[n(" 所选时间内，分销员客户的全额退款和部分退款的退款成功金额。目前仅支持展示2023.11后的数据。 ",-1)])),default:l(()=>[s(f,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:l(()=>[s(t(_))]),_:1})]),_:1})])]),default:l(({row:a})=>[n(i(t(g)(a.refundAmount)),1)]),_:1}),s(d,{prop:"orderCount",width:140,align:"left"},{header:l(()=>[e("div",xt,[o[16]||(o[16]=e("p",null,"支付订单数",-1)),s(u,{placement:"top",effect:"light"},{content:l(()=>o[15]||(o[15]=[n(" 所选时间内，分销员客户的所有已支付的订单。目前仅支持展示2023.11后的数据。 ",-1)])),default:l(()=>[s(f,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:l(()=>[s(t(_))]),_:1})]),_:1})])]),default:l(({row:a})=>[n(i(a.orderCount),1)]),_:1}),s(d,{prop:"refundCount",width:140,align:"left"},{header:l(()=>[e("div",yt,[o[18]||(o[18]=e("p",null,"退款订单数",-1)),s(u,{placement:"top",effect:"light"},{content:l(()=>o[17]||(o[17]=[n(" 所选时间内，分销员客户的全额退款和部分退款的订单总数。目前仅支持展示2023.11后的数据。 ",-1)])),default:l(()=>[s(f,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:l(()=>[s(t(_))]),_:1})]),_:1})])]),default:l(({row:a})=>[n(i(a.refundCount),1)]),_:1}),s(d,{label:"已结算收益",prop:"totalCommission",width:100},{default:l(({row:a})=>[n(i(t(g)(a.totalCommission)),1)]),_:1}),s(d,{label:"累计收益",prop:"totalAmountCommission",width:100},{default:l(({row:a})=>[s(t(Q),{params:{act:"detail",id:a.salesmanId},isDrawer:!1,showFooter:!1,path:"salesman/salesmanDetailed/src/cumulativeGain",title:"佣金详情",width:"600px",onOkCallback:t(y)},{default:l(()=>[e("a",It,i(t(g)(a.totalAmountCommission)),1)]),_:2},1032,["params","onOkCallback"])]),_:1}),s(d,{label:"累计客户数",prop:"totalCustomer",width:100},{default:l(({row:a})=>[n(i(a.totalCustomer),1)]),_:1})]),_:1},8,["data","total","onSortChange"])]),_:1},8,["spinning"]),t(x)>0?(C(),h("div",Ut,[s(t(G),{page:t(r).page,"onUpdate:page":o[3]||(o[3]=a=>t(r).page=a),size:t(r).size,"onUpdate:size":o[4]||(o[4]=a=>t(r).size=a),total:t(x),onCallback:t(y)},null,8,["page","size","total","onCallback"])])):k("",!0)]),t(U).length>0?(C(),h("div",St,[e("div",Dt,[s(P,null,{default:l(()=>[e("span",null,[o[19]||(o[19]=n("已选择：",-1)),e("b",null,i(t(U).length),1),o[20]||(o[20]=n(" 项",-1))])]),_:1})])])):k("",!0)])])])}}});export{Ht as default};
