import V from"./ReconnectionList-CPW4dhTD.js";import{t as w}from"./conversation-CU3jmqty.js";import{d as x,r,f as N,F as B,h as o,y as i,e as p,l as n,g as f,j as U,k as L,K as _,J as d,_ as F}from"./index-BEWhCL1q.js";import"./format-C8RAoEAk.js";import"./StatusDot-V36Ff0I6.js";const W={class:"dialog-footer"},j=x({__name:"Reconnection",props:{conversationId:{type:Number,default:0}},emits:["serversUpdated"],setup(c,{expose:I,emit:k}){const y=r(null),t=r(!1),C=c,u=()=>{t.value=!0},v=()=>{t.value=!1},g=k,s=r(0),b=async()=>{if(s.value==0){d.error("请选择转接客服");return}try{const l=await w({conversationId:C.conversationId,servantId:s.value});d.success("操作成功"),t.value=!1,g("serversUpdated")}catch(l){d.error(l.message)}finally{}};return I({showWin:u}),(l,e)=>{const m=p("el-button"),R=p("el-dialog");return f(),N(B,null,[o("div",{class:"reception-panel-toolbar-waiting",onClick:u}," 转接 "),i(R,{"destroy-on-close":!0,modelValue:t.value,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value=a),"show-close":!1,width:"560"},{header:n(({close:a,titleId:E,titleClass:J})=>[o("div",{class:"header-title"},[e[3]||(e[3]=o("div",{class:"title"}," 转接客服 ",-1)),o("div",{onClick:v,class:"right"},e[2]||(e[2]=[o("em",{class:"main_pel_m iconfont-admin icon-cha1"},null,-1)]))])]),footer:n(()=>[o("div",W,[i(m,{onClick:v},{default:n(()=>e[4]||(e[4]=[_("取消",-1)])),_:1,__:[4]}),i(m,{disabled:s.value==0,type:"primary",onClick:b},{default:n(()=>e[5]||(e[5]=[_(" 转接 ",-1)])),_:1,__:[5]},8,["disabled"])])]),default:n(()=>[t.value?(f(),U(V,{key:0,servantId:s.value,"onUpdate:servantId":e[0]||(e[0]=a=>s.value=a),conversationId:c.conversationId,ref_key:"ReconnectionListRef",ref:y},null,8,["servantId","conversationId"])):L("",!0)]),_:1},8,["modelValue"])],64)}}}),A=F(j,[["__scopeId","data-v-78e6c604"]]);export{A as default};
