import{d as L,a as R,v as Y,r as S,o as q,ag as O,e as p,f as l,g as i,h as s,k as m,y as n,l as a,i as o,a2 as E,K as c,t as d,_ as $}from"./index-BEWhCL1q.js";/* empty css             *//* empty css                                                                    */import{P as j}from"./Pagination-4FaohhlG.js";import{b as G,d as H}from"./shop-CWBoDOF9.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-B2T-ARqM.js";import"./index-DVG44k_-.js";/* empty css                                                                  *//* empty css                                                                              */import{S as J}from"./SelectTimeInterval-CHncG0ge.js";import{u as Q}from"./useListRequest-Bpxbydyo.js";import"./time-BMcbgg5F.js";import"./index-BNk7xZkD.js";const W={class:"container"},X={class:"content_wrapper"},Z={class:"container"},ee={class:"lyecs-table-list-warp"},te={class:"list-table-tool lyecs-search-warp"},oe={class:"list-table-tool-row"},se={class:"simple-form-warp"},ne={class:"simple-form-field"},ae={class:"form-group"},le={class:"control-container"},ie={class:"simple-form-field"},de={class:"form-group"},re={class:"simple-form-field"},pe={class:"simple-form-field"},ce={class:"table-container"},me={key:0,style:{color:"#0000ff"}},_e={key:1,style:{color:"#ff0000"}},ue={key:2},fe={key:3,style:{color:"#999","font-size":"12px"}},ye={key:0,style:{color:"#0000ff"}},ge={key:1,style:{color:"#ff0000"}},he={key:2},be={key:3,style:{color:"#999","font-size":"12px"}},ve={class:"empty-warp"},ke={key:0,class:"empty-bg"},Ce={key:0,class:"pagination-con"},Se={key:0,class:"selected-action-warp selected-warp-left"},we={class:"selected-action"},ze=L({__name:"List",props:{shopId:{type:Number,default:0}},setup(w){const g=R().currentRoute.value.query,z=w,T=Y(),{listData:M,loading:h,total:b,selectedIds:v,filterParams:r,loadData:k,onSearchSubmit:_,onSortChange:I,onBatchAction:x,resetParams:B}=Q({apiFunction:H,idKey:"shopId",defaultParams:{page:1,size:T.get("pageSize"),sortField:"",sortOrder:"",keyword:"",shopId:z.shopId||"",endTime:"",startTime:""}}),U=async u=>{await x(u,G)};k();const D=()=>{let u=window.location.href,t=new URL(u);t.search="",window.history.replaceState({},document.title,t.toString())},N=S(),C=S(0);return q(()=>{g.id&&O.confirm(`为[${g.companyName||"--"}]立即创建店铺?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{C.value=Number(g.id),N.value.show()}).catch(()=>{C.value=0,D()})}),(u,t)=>{const f=p("el-button"),V=p("TigInput"),y=p("el-table-column"),F=p("el-table"),P=p("a-spin"),A=p("el-popconfirm"),K=p("el-space");return i(),l("div",W,[s("div",X,[s("div",Z,[s("div",ee,[s("div",te,[s("div",oe,[s("div",se,[s("div",ne,[s("div",ae,[s("div",le,[n(V,{modelValue:o(r).keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>o(r).keyword=e),name:"keyword",placeholder:"输入店铺名称",onKeyup:E(o(_),["enter"]),clearable:"",onClear:o(_)},{append:a(()=>[n(f,{onClick:o(_)},{default:a(()=>t[6]||(t[6]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[6]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),s("div",ie,[s("div",de,[t[7]||(t[7]=s("label",{class:"control-label"},[s("span",null,"时间范围：")],-1)),n(o(J),{"end-date":o(r).endTime,"onUpdate:endDate":t[1]||(t[1]=e=>o(r).endTime=e),"start-date":o(r).startTime,"onUpdate:startDate":t[2]||(t[2]=e=>o(r).startTime=e),clearable:!1,type:"date","value-format":"YYYY-MM-DD"},null,8,["end-date","start-date"])])]),s("div",re,[n(f,{type:"primary",plain:"",onClick:o(_)},{default:a(()=>t[8]||(t[8]=[c("搜索",-1)])),_:1,__:[8]},8,["onClick"])]),s("div",pe,[n(f,{plain:"",onClick:o(B)},{default:a(()=>t[9]||(t[9]=[c("重置",-1)])),_:1,__:[9]},8,["onClick"])])])])]),s("div",ce,[n(P,{spinning:o(h)},{default:a(()=>[n(F,{data:o(M),loading:o(h),total:o(b),"row-key":"shopId",onSortChange:o(I)},{empty:a(()=>[s("div",ve,[o(h)?m("",!0):(i(),l("div",ke,"暂无数据"))])]),default:a(()=>[n(y,{label:"账户变动时间"},{default:a(({row:e})=>[c(d(e.addTime||"--"),1)]),_:1}),n(y,{label:"店铺名称"},{default:a(({row:e})=>[c(d(e.shopTitle||"--"),1)]),_:1}),n(y,{label:"变动资金账户"},{default:a(({row:e})=>[e.type==1?(i(),l("span",me,"+"+d(e.changeAmount),1)):e.type==2?(i(),l("span",_e,"-"+d(e.changeAmount),1)):(i(),l("span",ue,d(e.changeAmount),1)),e.newShopMoney?(i(),l("span",fe,"（变更后金额:"+d(e.newShopMoney)+"）",1)):m("",!0)]),_:1}),n(y,{label:"冻结资金账户",width:"250"},{default:a(({row:e})=>[e.type==1?(i(),l("span",ye,"+"+d(e.frozenMoney),1)):e.type==2?(i(),l("span",ge,"-"+d(e.frozenMoney),1)):(i(),l("span",he,d(e.frozenMoney),1)),e.newFrozenMoney?(i(),l("span",be,"（变更后金额:"+d(e.newFrozenMoney)+"）",1)):m("",!0)]),_:1})]),_:1},8,["data","loading","total","onSortChange"])]),_:1},8,["spinning"]),o(b)>0?(i(),l("div",Ce,[n(o(j),{page:o(r).page,"onUpdate:page":t[3]||(t[3]=e=>o(r).page=e),size:o(r).size,"onUpdate:size":t[4]||(t[4]=e=>o(r).size=e),total:o(b),onCallback:o(k)},null,8,["page","size","total","onCallback"])])):m("",!0)]),o(v).length>0?(i(),l("div",Se,[s("div",we,[n(K,null,{default:a(()=>[s("span",null,[t[10]||(t[10]=c("已选择：",-1)),s("b",null,d(o(v).length),1),t[11]||(t[11]=c(" 项",-1))]),n(A,{title:"您确认要批量删除所选数据吗？",onConfirm:t[5]||(t[5]=e=>U("del"))},{reference:a(()=>[n(f,null,{default:a(()=>t[12]||(t[12]=[c("批量删除",-1)])),_:1,__:[12]})]),_:1})]),_:1})])])):m("",!0)])])])])}}}),Le=$(ze,[["__scopeId","data-v-e83f06d9"]]);export{Le as default};
