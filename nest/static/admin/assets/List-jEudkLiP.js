import{d as U,v as q,e as s,f as _,g as u,h as e,y as l,l as a,i as t,a2 as F,K as d,k as C,t as y}from"./index-BEWhCL1q.js";/* empty css             */import"./index-DVG44k_-.js";import{D as R}from"./DeleteRecord-C4_57oHW.js";/* empty css                                                                    */import{P as $}from"./Pagination-4FaohhlG.js";import{d as E,b as j,g as G}from"./limitdiscount-CBHFkGbO.js";import{u as H}from"./useListRequest-Bpxbydyo.js";import{_ as w}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";const J={class:"container"},M={class:"content_wrapper"},Q={class:"lyecs-table-list-warp"},W={class:"list-table-tool lyecs-search-warp"},X={class:"advanced-search-warp list-table-tool-row"},Y={class:"simple-form-warp"},Z={class:"simple-form-field"},tt={class:"form-group"},ot={class:"control-container"},et={class:"simple-form-field"},lt={class:"form-group"},at={class:"control-container"},nt={class:"simple-form-warp"},st={class:"simple-form-field"},it={class:"control-container"},dt={class:"list-table-tool-row"},rt={class:"list-table-tool-col"},pt={key:0},ct={class:"table-container"},mt={style:{position:"relative"}},_t={class:"empty-warp"},ut={key:0,class:"empty-bg"},ft={key:0,class:"pagination-con"},It=U({__name:"List",setup(bt){const h=q(),{listData:S,loading:f,total:b,selectedIds:g,filterParams:i,loadData:c,onSearchSubmit:r,onSortChange:V,onSelectChange:D,onBatchAction:I,resetParams:x}=H({apiFunction:G,idKey:"discountId",defaultParams:{page:1,size:h.get("pageSize"),sortField:"",sortOrder:"",keyword:""}}),z=async k=>{await I(k,j)};return c(),(k,o)=>{const m=s("el-button"),A=s("TigInput"),v=s("el-option"),N=s("el-select"),B=s("el-popconfirm"),K=s("el-space"),L=s("el-form"),p=s("el-table-column"),O=s("el-divider"),P=s("el-table"),T=s("a-spin");return u(),_("div",J,[e("div",M,[e("div",Q,[e("div",W,[l(L,{model:t(i),name:"form"},{default:a(()=>[e("div",X,[e("div",Y,[e("div",Z,[e("div",tt,[o[6]||(o[6]=e("label",{class:"control-label"},[e("span",null,"活动名称：")],-1)),e("div",ot,[l(A,{modelValue:t(i).keyword,"onUpdate:modelValue":o[0]||(o[0]=n=>t(i).keyword=n),name:"keyword",placeholder:"输入活动名称",onKeyup:F(t(r),["enter"]),clearable:"",onClear:t(r)},{append:a(()=>[l(m,{onClick:t(r)},{default:a(()=>o[5]||(o[5]=[e("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[5]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),e("div",et,[e("div",lt,[o[7]||(o[7]=e("label",{class:"control-label"},[e("span",null,"活动状态：")],-1)),e("div",at,[l(N,{modelValue:t(i).activeState,"onUpdate:modelValue":o[1]||(o[1]=n=>t(i).activeState=n),placeholder:"请选择活动状态",clearable:"",onClear:t(r),onChange:t(r)},{default:a(()=>[l(v,{label:"活动进行中",value:1}),l(v,{label:"活动已结束",value:2}),l(v,{label:"活动未开始",value:3})]),_:1},8,["modelValue","onClear","onChange"])])])]),e("div",nt,[e("div",st,[o[10]||(o[10]=e("label",{class:"control-label"},null,-1)),e("div",it,[l(m,{type:"primary",plain:"",onClick:t(r)},{default:a(()=>o[8]||(o[8]=[d("搜索",-1)])),_:1,__:[8]},8,["onClick"]),l(m,{plain:"",onClick:t(x)},{default:a(()=>o[9]||(o[9]=[d("重置",-1)])),_:1,__:[9]},8,["onClick"])])])])])]),e("div",dt,[e("div",rt,[l(K,null,{default:a(()=>[l(t(w),{params:{act:"add"},isDrawer:"",path:"promotion/productActivity/limitdiscount/Info",title:"新增限时折扣活动",width:"900px",onOkCallback:t(c)},{default:a(()=>[l(m,{type:"primary"},{default:a(()=>o[11]||(o[11]=[d("新增限时折扣活动",-1)])),_:1,__:[11]})]),_:1},8,["onOkCallback"]),l(B,{title:"您确认要批量删除所选数据吗？",onConfirm:o[2]||(o[2]=n=>z("del"))},{reference:a(()=>[l(m,{disabled:t(g).length===0},{default:a(()=>o[12]||(o[12]=[d("批量删除",-1)])),_:1,__:[12]},8,["disabled"])]),_:1}),t(g).length>0?(u(),_("span",pt,[o[13]||(o[13]=d(" 已选择：",-1)),e("b",null,y(t(g).length),1),o[14]||(o[14]=d(" 项 ",-1))])):C("",!0)]),_:1})])])]),_:1},8,["model"])]),e("div",ct,[l(T,{spinning:t(f)},{default:a(()=>[l(P,{data:t(S),"row-key":"discountId",onSelectionChange:t(D),total:t(b),onSortChange:t(V),loading:t(f)},{empty:a(()=>[e("div",_t,[t(f)?C("",!0):(u(),_("div",ut,"暂无数据"))])]),default:a(()=>[l(p,{type:"selection",width:"32"}),l(p,{label:"活动名称",prop:"promotionName",width:150},{default:a(({row:n})=>[e("div",mt,[e("div",null,y(n.promotionName||"--"),1)])]),_:1}),l(p,{label:"起始日期",prop:"startTime",sortable:"custom"}),l(p,{label:"截止日期",prop:"endTime",sortable:"custom"}),l(p,{label:"状态",prop:"statusName"}),l(p,{label:"操作",fixed:"right"},{default:a(({row:n})=>[l(t(w),{isDrawer:"",onOkCallback:t(c),title:"编辑限时折扣",width:"900px",path:"promotion/productActivity/limitdiscount/Info",params:{act:"detail",id:n.discountId}},{default:a(()=>o[15]||(o[15]=[e("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[15]},1032,["onOkCallback","params"]),l(O,{direction:"vertical"}),l(t(R),{onAfterDelete:t(c),requestApi:t(E),params:{id:n.discountId}},{default:a(()=>o[16]||(o[16]=[d("删除",-1)])),_:2,__:[16]},1032,["onAfterDelete","requestApi","params"])]),_:1})]),_:1},8,["data","onSelectionChange","total","onSortChange","loading"])]),_:1},8,["spinning"]),t(b)>0?(u(),_("div",ft,[l(t($),{page:t(i).page,"onUpdate:page":o[3]||(o[3]=n=>t(i).page=n),size:t(i).size,"onUpdate:size":o[4]||(o[4]=n=>t(i).size=n),total:t(b),onCallback:t(c)},null,8,["page","size","total","onCallback"])])):C("",!0)])])])])}}});export{It as default};
