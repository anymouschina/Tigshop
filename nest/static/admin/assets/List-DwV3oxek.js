import{d as D,v as O,r as J,e as m,f as u,g as p,h as s,k as _,y as o,i as a,a2 as $,l,F as j,m as q,j as A,K as d,t as i,J as E,_ as R}from"./index-BEWhCL1q.js";/* empty css             */import"./index-DVG44k_-.js";/* empty css                                                                    */import{P as G}from"./Pagination-4FaohhlG.js";import{u as H,i as M,p as Q}from"./format-C8RAoEAk.js";import{b as W,g as X,a as Y}from"./product-CXfujjln.js";import{u as Z}from"./useListRequest-Bpxbydyo.js";import{_ as tt}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";const st={class:"container"},et={class:"content_wrapper"},at={class:"lyecs-table-list-warp"},ot={class:"list-table-tool lyecs-search-warp"},lt={class:"advanced-search-warp list-table-tool-row"},nt={class:"simple-form-warp"},it={class:"simple-form-field"},dt={class:"form-group"},rt={class:"control-container"},pt={class:"simple-form-field"},ct={class:"form-group"},ut={class:"control-container"},mt={class:"simple-form-field"},_t={class:"form-group"},ft={class:"control-container"},bt={class:"simple-form-field"},gt={class:"simple-form-field"},ht={class:"table-container"},vt={class:"flex"},Ct={key:0,class:"span-pic"},yt=["href"],kt=["src"],Pt={class:"span-product-con"},St={class:"span-product-name"},Tt={key:0,class:"span-product-brand"},Nt={class:"span-con"},Vt={key:1,class:"span-product-brand"},wt={class:"span-con green"},It={key:2,class:"span-product-brand"},xt={class:"span-con green"},zt={key:3},Ft={class:"empty-warp"},Bt={key:0,class:"empty-bg"},Lt={key:0,class:"pagination-con"},Kt={key:0,class:"selected-action-warp selected-warp-left"},Ut={class:"selected-action"},Dt=D({__name:"List",setup(Ot){const N=O(),{listData:V,loading:C,total:g,selectedIds:y,filterParams:c,loadData:h,onSearchSubmit:b,onSortChange:w,onSelectChange:I,onBatchAction:x,resetParams:z}=Z({apiFunction:Y,idKey:"productId",defaultParams:{page:1,size:N.get("pageSize"),sortField:"",sortOrder:"",productName:"",status:"",salesmanProductType:""}}),F=async f=>{await x(f,W)};h();const k=J();return(async()=>{try{const f=await X();k.value=f}catch(f){E.error(f.message)}})(),(f,e)=>{const B=m("TigInput"),v=m("el-option"),P=m("el-select"),S=m("el-button"),r=m("el-table-column"),T=m("el-space"),L=m("el-table"),K=m("a-spin"),U=m("el-popconfirm");return p(),u("div",st,[s("div",et,[s("div",at,[s("div",ot,[s("div",lt,[s("div",nt,[s("div",it,[s("div",dt,[e[6]||(e[6]=s("label",{class:"control-label"},[s("span",null,"商品名称：")],-1)),s("div",rt,[o(B,{modelValue:a(c).productName,"onUpdate:modelValue":e[0]||(e[0]=t=>a(c).productName=t),name:"productName",placeholder:"输入商品名称/货号",onKeyup:$(a(b),["enter"]),clearable:"",onClear:a(b)},null,8,["modelValue","onKeyup","onClear"])])])]),s("div",pt,[s("div",ct,[e[7]||(e[7]=s("label",{class:"control-label"},[s("span",null,"商品状态：")],-1)),s("div",ut,[o(P,{modelValue:a(c).status,"onUpdate:modelValue":e[1]||(e[1]=t=>a(c).status=t),clearable:"",onChange:a(b)},{default:l(()=>[o(v,{label:"上架",value:1}),o(v,{label:"下架",value:0})]),_:1},8,["modelValue","onChange"])])])]),s("div",mt,[s("div",_t,[e[8]||(e[8]=s("label",{class:"control-label"},[s("span",null,"推广类型：")],-1)),s("div",ft,[o(P,{modelValue:a(c).salesmanProductType,"onUpdate:modelValue":e[2]||(e[2]=t=>a(c).salesmanProductType=t),clearable:"",onChange:a(b)},{default:l(()=>[(p(!0),u(j,null,q(k.value,(t,n)=>(p(),A(v,{label:t,value:n},null,8,["label","value"]))),256))]),_:1},8,["modelValue","onChange"])])])]),s("div",bt,[o(S,{type:"primary",plain:"",onClick:a(b)},{default:l(()=>e[9]||(e[9]=[d("搜索",-1)])),_:1,__:[9]},8,["onClick"])]),s("div",gt,[o(S,{plain:"",onClick:a(z)},{default:l(()=>e[10]||(e[10]=[d("重置",-1)])),_:1,__:[10]},8,["onClick"])])])])]),s("div",ht,[o(K,{spinning:a(C)},{default:l(()=>[o(L,{data:a(V),total:a(g),"row-key":"productId",onSelectionChange:a(I),onSortChange:a(w)},{empty:l(()=>[s("div",Ft,[a(C)?_("",!0):(p(),u("div",Bt,"暂无数据"))])]),default:l(()=>[o(r,{type:"selection",width:"32"}),o(r,{label:"商品",prop:"productId","min-width":150},{default:l(({row:t})=>[s("div",vt,[t.picThumb?(p(),u("div",Ct,[s("a",{href:a(H)({path:"product",sn:t.productSn}),target:"_blank"},[s("img",{src:a(M)(t.picThumb),height:"50",width:"50"},null,8,kt)],8,yt)])):_("",!0),s("div",Pt,[s("div",St,[s("div",null,i(t.productName),1)]),t.brandName?(p(),u("p",Tt,[e[11]||(e[11]=s("span",{class:"span-tit"},"商品：",-1)),s("span",Nt,i(t.brandName),1)])):_("",!0),t.storeTitle?(p(),u("p",Vt,[e[12]||(e[12]=s("span",{class:"span-tit"},"店铺：",-1)),s("span",wt,i(t.storeTitle),1)])):_("",!0),t.suppliersName?(p(),u("p",It,[e[13]||(e[13]=s("span",{class:"span-tit"},"供应商：",-1)),s("span",xt,i(t.suppliersName),1)])):_("",!0),t.type===2?(p(),u("p",zt,e[14]||(e[14]=[s("span",{class:"span-con green"},"【虚拟商品】",-1)]))):_("",!0)])])]),_:1}),o(r,{label:"金额(元)"},{default:l(({row:t})=>[d(i(a(Q)(t.productPrice)),1)]),_:1}),o(r,{label:"库存"},{default:l(({row:t})=>[d(i(t.productStock),1)]),_:1}),o(r,{label:"是否参与推广",width:"130"},{default:l(({row:t})=>[d(i(t.salesmanProduct&&t.salesmanProduct.isJoin==1?"参与":"不参与"),1)]),_:1}),o(r,{label:"佣金",width:"130"},{default:l(({row:t})=>[d(i(t.commissionType==1?"默认佣金比例":t.commissionType==2?"自定义佣金比例":"自定义佣金金额"),1)]),_:1}),o(r,{label:"商品佣金",width:"250"},{default:l(({row:t})=>{var n;return[d(i(((n=t.salesmanProduct)==null?void 0:n.productCommission.productCommission)||"--"),1)]}),_:1}),o(r,{label:"下级分销员卖货提成",width:"250"},{default:l(({row:t})=>{var n;return[d(i(((n=t.salesmanProduct)==null?void 0:n.productCommission.subCommission)||"--"),1)]}),_:1}),o(r,{label:"商品状态"},{default:l(({row:t})=>[d(i(t.productStatus===1?"上架":"下架"),1)]),_:1}),o(r,{label:"操作时间"},{default:l(({row:t})=>{var n;return[d(i((n=t.salesmanProduct)==null?void 0:n.updateTime),1)]}),_:1}),o(r,{width:120,fixed:"right",label:"操作"},{default:l(({row:t})=>[o(T,{size:0},{default:l(()=>{var n;return[o(a(tt),{maskClose:!1,params:{act:(n=t.salesmanProduct)!=null&&n.salesmanProductId?"detail":"add",id:t.productId,salesmanProduct:t.salesmanProduct},isDrawer:"",path:"salesman/product/Info",title:"设置商品佣金",width:"800px",onOkCallback:a(h)},{default:l(()=>e[15]||(e[15]=[s("a",{class:"btn-link"},"设置佣金",-1)])),_:2,__:[15]},1032,["params","onOkCallback"])]}),_:2},1024)]),_:1})]),_:1},8,["data","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),a(g)>0?(p(),u("div",Lt,[o(a(G),{page:a(c).page,"onUpdate:page":e[3]||(e[3]=t=>a(c).page=t),size:a(c).size,"onUpdate:size":e[4]||(e[4]=t=>a(c).size=t),total:a(g),onCallback:a(h)},null,8,["page","size","total","onCallback"])])):_("",!0)]),a(y).length>0?(p(),u("div",Kt,[s("div",Ut,[o(T,null,{default:l(()=>[s("span",null,[e[16]||(e[16]=d("已选择：",-1)),s("b",null,i(a(y).length),1),e[17]||(e[17]=d(" 项",-1))]),o(U,{title:"您确认要批量删除所选数据吗？",onConfirm:e[5]||(e[5]=t=>F("del"))},{reference:l(()=>e[18]||(e[18]=[])),_:1})]),_:1})])])):_("",!0)])])])}}}),Wt=R(Dt,[["__scopeId","data-v-a93d69e0"]]);export{Wt as default};
