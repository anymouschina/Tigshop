import{a0 as I,d as H,v as Q,r as k,e as d,f as y,g as u,h as a,y as n,l as s,i as o,K as i,F as N,m as U,j as x,a2 as X,k as P,t as c,J as F,an as v}from"./index-BEWhCL1q.js";/* empty css             *//* empty css                                                                    */import{P as Z}from"./Pagination-4FaohhlG.js";import{a as ee}from"./statementDownload-D4SEX_ik.js";import{u as te}from"./useListRequest-Bpxbydyo.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-B2T-ARqM.js";import"./index-DVG44k_-.js";/* empty css                                                                  *//* empty css                                                                              */import{S as ae}from"./SelectTimeInterval-CHncG0ge.js";import{f as p}from"./time-BMcbgg5F.js";import{r as oe}from"./export-CPfNg7CD.js";const le=g=>I({url:"finance/statement/getStatementList",method:"get",params:g}),ne=g=>I({url:"finance/statement/exportStatement",method:"get",responseType:"arraybuffer",params:g}),se={class:"container"},re={class:"content_wrapper"},ie={class:"lyecs-table-list-warp"},de={class:"list-table-tool lyecs-search-warp"},pe={class:"advanced-search-warp list-table-tool-row"},me={class:"simple-form-warp"},ue={class:"simple-form-field"},ce={class:"form-group"},_e={class:"control-container"},fe={class:"simple-form-field"},ye={class:"form-group"},ge={class:"simple-form-field"},be={class:"form-group"},ve={class:"simple-form-field"},De={class:"form-group"},Te={class:"control-container"},Ye={class:"simple-form-field"},Ce={class:"form-group"},Se={class:"control-container"},we={class:"simple-form-field"},Ve={class:"form-group"},he={class:"control-container"},Me={class:"simple-form-field mr10"},ke={class:"form-group"},Ne={class:"control-container"},Ue={class:"simple-form-warp"},xe={class:"simple-form-field"},ze={class:"control-container"},Be={class:"list-table-tool-row"},Pe={class:"list-table-tool-col"},Fe={class:"table-container"},Ie={class:"empty-warp"},Ke={key:0,class:"empty-bg"},Le={key:0,class:"pagination-con"},Ze=H({__name:"List",props:{source:{type:String,default:"shop"},startDateTime:{type:String,default:""},endDateTime:{type:String,default:""}},setup(g){const S=g,K=Q(),w=k(-1),{listData:L,loading:D,total:V,filterParams:l,loadData:h,onSearchSubmit:_,onSortChange:E,onSelectChange:q,resetParams:R}=te({apiFunction:le,idKey:"invoiceId",defaultParams:{page:1,size:K.get("pageSize"),sortField:"",sortOrder:"",keyword:"",startDateTime:S.startDateTime,endDateTime:S.endDateTime,timeType:1,accountType:0,type:0,paymentType:"",recordSn:"",source:S.source}},["accountType"]),T=k({}),z=async()=>{try{const r=await ee();T.value=r,l.accountType=r.accountType[0].code,await h()}catch(r){F.error(r.message)}finally{D.value=!1}};z();const B=r=>{if(r===-1){w.value=r;return}l.startDateTime=p(new Date,"YYYY-MM-DD"),r===0&&(l.endDateTime=p(new Date,"YYYY-MM-DD")),r===1&&(l.startDateTime=p(v(1,"sub"),"YYYY-MM-DD"),l.endDateTime=p(v(1,"sub"),"YYYY-MM-DD")),r===2&&(l.startDateTime=p(v(7,"sub"),"YYYY-MM-DD"),l.endDateTime=p(new Date,"YYYY-MM-DD")),r===3&&(l.startDateTime=p(v(30,"sub"),"YYYY-MM-DD"),l.endDateTime=p(new Date,"YYYY-MM-DD")),r===4&&(l.startDateTime=p(v(180,"sub"),"YYYY-MM-DD"),l.endDateTime=p(new Date,"YYYY-MM-DD")),h()},Y=k(!1),j=async()=>{Y.value=!0;try{const r=await ne(l);Y.value=!1,oe(r,"导出报表")}catch(r){F.error(r.message)}finally{Y.value=!1}},J=async()=>{await z(),R()};return(r,e)=>{const f=d("el-option"),C=d("el-select"),b=d("el-radio-button"),O=d("el-radio-group"),W=d("TigInput"),M=d("el-button"),$=d("el-form"),m=d("el-table-column"),A=d("el-table"),G=d("a-spin");return u(),y("div",se,[a("div",re,[a("div",ie,[a("div",de,[n($,{model:o(l)},{default:s(()=>[a("div",pe,[a("div",me,[a("div",ue,[a("div",ce,[e[11]||(e[11]=a("label",{class:"control-label"},[a("span",null,"账单时间：")],-1)),a("div",_e,[n(C,{clearable:"",placeholder:"请选择状态",modelValue:o(l).timeType,"onUpdate:modelValue":e[0]||(e[0]=t=>o(l).timeType=t),onChange:o(_)},{default:s(()=>[n(f,{value:1,label:"入账时间"}),n(f,{value:2,label:"下单时间"})]),_:1},8,["modelValue","onChange"])])])]),a("div",fe,[a("div",ye,[e[12]||(e[12]=a("label",{class:"control-label"},[a("span",null,"筛选时间：")],-1)),n(o(ae),{type:"date","start-date":o(l).startDateTime,"onUpdate:startDate":e[1]||(e[1]=t=>o(l).startDateTime=t),"end-date":o(l).endDateTime,"onUpdate:endDate":e[2]||(e[2]=t=>o(l).endDateTime=t),onCallback:e[3]||(e[3]=t=>B(-1))},null,8,["start-date","end-date"])])]),a("div",ge,[a("div",be,[n(O,{class:"itemWidth",modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=t=>w.value=t),onChange:B},{default:s(()=>[n(b,{value:0},{default:s(()=>e[13]||(e[13]=[i("今天",-1)])),_:1,__:[13]}),n(b,{value:1},{default:s(()=>e[14]||(e[14]=[i("昨天",-1)])),_:1,__:[14]}),n(b,{value:2},{default:s(()=>e[15]||(e[15]=[i("近7天",-1)])),_:1,__:[15]}),n(b,{value:3},{default:s(()=>e[16]||(e[16]=[i("近30天",-1)])),_:1,__:[16]}),n(b,{value:4},{default:s(()=>e[17]||(e[17]=[i("近半年",-1)])),_:1,__:[17]})]),_:1},8,["modelValue"])])]),a("div",ve,[a("div",De,[e[18]||(e[18]=a("label",{class:"control-label"},[a("span",null,"账户：")],-1)),a("div",Te,[n(C,{clearable:"",placeholder:"请选择账户",modelValue:o(l).accountType,"onUpdate:modelValue":e[5]||(e[5]=t=>o(l).accountType=t),onChange:o(_)},{default:s(()=>[(u(!0),y(N,null,U(T.value.accountType,t=>(u(),x(f,{value:t.code,label:t.description},null,8,["value","label"]))),256))]),_:1},8,["modelValue","onChange"])])])]),a("div",Ye,[a("div",Ce,[e[19]||(e[19]=a("label",{class:"control-label"},[a("span",null,"类型：")],-1)),a("div",Se,[n(C,{clearable:"",placeholder:"请选择类型",modelValue:o(l).type,"onUpdate:modelValue":e[6]||(e[6]=t=>o(l).type=t),onChange:o(_)},{default:s(()=>[n(f,{value:0,label:"全部"}),(u(!0),y(N,null,U(T.value.statementType,t=>(u(),x(f,{value:t.code,label:t.description},null,8,["value","label"]))),256))]),_:1},8,["modelValue","onChange"])])])]),a("div",we,[a("div",Ve,[e[20]||(e[20]=a("label",{class:"control-label"},[a("span",null,"支付方式：")],-1)),a("div",he,[n(C,{clearable:"",placeholder:"请选择支付方式：",modelValue:o(l).paymentType,"onUpdate:modelValue":e[7]||(e[7]=t=>o(l).paymentType=t),onChange:o(_)},{default:s(()=>[(u(!0),y(N,null,U(T.value.payMethodType,t=>(u(),x(f,{value:t.code,label:t.description},null,8,["value","label"]))),256))]),_:1},8,["modelValue","onChange"])])])]),a("div",Me,[a("div",ke,[e[21]||(e[21]=a("label",{class:"control-label"},[a("span",null,"单号：")],-1)),a("div",Ne,[n(W,{modelValue:o(l).recordSn,"onUpdate:modelValue":e[8]||(e[8]=t=>o(l).recordSn=t),name:"orderSn",placeholder:"请输入单号",onKeyup:X(o(_),["enter"]),clearable:"",onClear:o(_)},null,8,["modelValue","onKeyup","onClear"])])])]),a("div",Ue,[a("div",xe,[e[24]||(e[24]=a("label",{class:"control-label"},null,-1)),a("div",ze,[n(M,{type:"primary",plain:"",onClick:o(_)},{default:s(()=>e[22]||(e[22]=[i("搜索",-1)])),_:1,__:[22]},8,["onClick"]),n(M,{plain:"",onClick:J},{default:s(()=>e[23]||(e[23]=[i("重置",-1)])),_:1,__:[23]})])])])])]),a("div",Be,[a("div",Pe,[n(M,{type:"primary",onClick:j,loading:Y.value},{default:s(()=>e[25]||(e[25]=[i("导出报表",-1)])),_:1,__:[25]},8,["loading"])])])]),_:1},8,["model"])]),a("div",Fe,[n(G,{spinning:o(D)},{default:s(()=>[n(A,{data:o(L),loading:o(D),total:o(V),"row-key":"invoiceId",onSelectionChange:o(q),onSortChange:o(E)},{empty:s(()=>[a("div",Ie,[o(D)?P("",!0):(u(),y("div",Ke,"暂无数据"))])]),default:s(()=>[n(m,{type:"selection",width:"32"}),n(m,{label:"类型",prop:"typeName"},{default:s(({row:t})=>[i(c(t.typeName||"--"),1)]),_:1}),n(m,{label:"入账时间",prop:"settlementTime"},{default:s(({row:t})=>[i(c(t.settlementTime||"--"),1)]),_:1}),n(m,{label:"名称",prop:"shopName"},{default:s(({row:t})=>[i(c(t.shopName||"--"),1)]),_:1}),n(m,{label:"业务单号",prop:"recordSn"},{default:s(({row:t})=>[i(c(t.recordSn||"--"),1)]),_:1}),n(m,{label:"入账类型",prop:"entryTypeName"},{default:s(({row:t})=>[i(c(t.entryTypeName||"--"),1)]),_:1}),n(m,{label:"金额（元）",prop:"amount"},{default:s(({row:t})=>[i(c(t.amount||"--"),1)]),_:1}),n(m,{label:"余额（元）",prop:"accountBalance"},{default:s(({row:t})=>[i(c(t.accountBalance||"--"),1)]),_:1}),n(m,{label:"支付方式",prop:"paymentType"},{default:s(({row:t})=>[i(c(t.paymentType||"--"),1)]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),o(V)>0?(u(),y("div",Le,[n(o(Z),{page:o(l).page,"onUpdate:page":e[9]||(e[9]=t=>o(l).page=t),size:o(l).size,"onUpdate:size":e[10]||(e[10]=t=>o(l).size=t),total:o(V),onCallback:o(h)},null,8,["page","size","total","onCallback"])])):P("",!0)])])])])}}});export{Ze as _};
