import{d as te,r as T,v as le,ak as F,a as oe,o as se,e as m,f as u,g as s,h as i,y as o,l,k as r,i as _,F as A,m as P,j as v,K as f,a2 as ne,t as C,J as D}from"./index-BEWhCL1q.js";/* empty css             */import"./index-DVG44k_-.js";import{D as ie}from"./DeleteRecord-C4_57oHW.js";/* empty css                                                                    */import{P as q}from"./Pagination-4FaohhlG.js";import{d as de,g as re,a as pe,b as ue}from"./translationContent-Cv-x1BTy.js";import{a as ce}from"./product-IfnnwfpZ.js";import{a as me}from"./brand-NPYEvOSK.js";import{g as _e}from"./category-Bu2fUBIU.js";import{g as ve}from"./article-vtwOCIi8.js";import{b as K}from"./version-C520_GUm.js";import{_ as x}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";const ye={class:"container"},fe={class:"content_wrapper"},ge={class:"lyecs-table-list-warp"},be={class:"list-table-tool lyecs-search-warp"},ke={class:"advanced-search-warp list-table-tool-row"},Te={class:"simple-form-warp"},he={key:0,class:"simple-form-field"},Ce={key:0,class:"form-group"},we={class:"control-container"},Ne={key:1,class:"simple-form-field"},xe={class:"form-group"},ze={class:"control-container"},Oe={key:2,class:"simple-form-field"},Ve={class:"form-group"},De={class:"control-container"},Ie={class:"simple-form-field"},Se={class:"simple-form-field"},Le={key:1},Be={class:"table-container"},Ue={class:"empty-warp"},Fe={key:0,class:"empty-bg"},Ae={key:0},Pe={key:0},qe={class:"empty-warp"},Ke={key:0,class:"empty-bg"},Me={key:0,class:"pagination-con"},oa=te({__name:"List",props:{promotionType:{type:Number,default:1}},setup(Re,{expose:M}){const R=T(localStorage.getItem("adminType")),L=le(),n=T(2),j=T([{label:"商品",value:2},{label:"分类",value:3},{label:"品牌",value:4},{label:"文章",value:6}]),z=T(),g=T(!0),b=T(0),y=T([]),t=F({page:1,size:L.get("pageSize"),sortField:"",sortOrder:"",translationName:"",localeCode:"",dataType:0}),h=F({page:1,size:L.get("pageSize"),sortField:"",sortOrder:""}),Q=(d,e)=>{const p=e.find(S=>S.localeId===d);return p?p.translationValue:""},$=(d,e)=>{t.page=1,z.value=[],t.dataType<2?c():(h.page=1,O())},O=async()=>{const e={2:ce,3:_e,4:me,6:ve}[n.value];n.value==3&&(h.parentId=-1),g.value=!0;try{if(typeof e=="function"){const p=await e({...h});z.value=p.records,b.value=p.total}else console.error("fn 不是一个有效的函数")}catch(p){D.error(p.message)}finally{g.value=!1}},I=T([]),c=async()=>{g.value=!0;try{const d=await re();I.value=d;const e=await pe({...t,localeIds:I.value.map(p=>p.id).join(",")});z.value=e.records,b.value=e.total}catch(d){D.error(d.message)}finally{g.value=!1}},w=oe().currentRoute.value.query;se(()=>{w.type&&w.type!==""?(t.dataType=2,w.type==="product"&&(n.value=2),w.type==="category"&&(n.value=3),w.type==="brand"&&(n.value=4),w.type==="article"&&(n.value=6),O()):c()});const V=()=>{t.dataType<2?c():O()},E=({prop:d,order:e})=>{t.sortField=d,t.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",c()},J=async d=>{try{const e=await ue(d,{ids:y.value});D.success("操作成功"),c()}catch(e){D.error(e.message)}},G=d=>{y.value=d.map(e=>e.id)};return M({loadFilter:c}),(d,e)=>{const p=m("el-tab-pane"),S=m("el-tabs"),H=m("el-option"),W=m("el-select"),N=m("el-button"),X=m("TigInput"),B=m("el-space"),Y=m("el-popconfirm"),k=m("el-table-column"),Z=m("el-divider"),U=m("el-table"),ee=m("a-spin");return s(),u("div",ye,[i("div",fe,[i("div",ge,[o(S,{modelValue:t.dataType,"onUpdate:modelValue":e[0]||(e[0]=a=>t.dataType=a),class:"demo-tabs",onTabClick:$},{default:l(()=>[o(p,{label:"页面文字",name:0}),o(p,{label:"接口文字",name:1}),o(p,{label:"数据维护",name:2})]),_:1},8,["modelValue"]),i("div",be,[i("div",ke,[i("div",Te,[t.dataType==2&&_(K)()?(s(),u("div",he,[R.value=="admin"?(s(),u("div",Ce,[i("div",we,[o(W,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a),placeholder:"请选择数据类型",style:{width:"100%"},onChange:V},{default:l(()=>[(s(!0),u(A,null,P(j.value,a=>(s(),v(H,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])):r("",!0)])):r("",!0),t.dataType==2&&_(K)()?(s(),u("div",Ne,[i("div",xe,[i("div",ze,[o(_(x),{params:{act:"add",dataType:n.value,total:b.value},isDrawer:"",showClose:!1,showOnOk:!1,path:"setting/multilingual/translationContent/Quick",title:"一键翻译",width:"700px",onOkCallback:O},{default:l(()=>[o(N,{type:"success"},{default:l(()=>e[8]||(e[8]=[f("一键翻译",-1)])),_:1,__:[8]})]),_:1},8,["params"])])])])):t.dataType!=2?(s(),u("div",Oe,[i("div",Ve,[i("div",De,[o(X,{modelValue:t.translationName,"onUpdate:modelValue":e[2]||(e[2]=a=>t.translationName=a),name:"translationName",placeholder:"请输入原句",onKeyup:ne(V,["enter"])},{append:l(()=>[o(N,{onClick:V},{default:l(()=>e[9]||(e[9]=[i("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[9]})]),_:1},8,["modelValue"])])])])):r("",!0),i("div",Ie,[o(B,null,{default:l(()=>[t.dataType<2?(s(),v(_(x),{key:0,params:{act:"add",dataType:t.dataType},isDrawer:"",path:"setting/multilingual/translationContent/Info",title:"添加"+(t.dataType==0?"页面文字":"接口文字"),width:"700px",onOkCallback:c},{default:l(()=>[o(N,{type:"primary"},{default:l(()=>e[10]||(e[10]=[f("添加语句",-1)])),_:1,__:[10]})]),_:1},8,["params","title"])):r("",!0),t.dataType<2?(s(),v(_(x),{key:1,params:{act:"add",dataType:t.dataType},isDrawer:"",path:"setting/multilingual/translationContent/Add",title:"添加"+(t.dataType==0?"页面文字":"接口文字"),width:"700px",onOkCallback:c},{default:l(()=>[o(N,{type:"primary"},{default:l(()=>e[11]||(e[11]=[f("批量添加语句",-1)])),_:1,__:[11]})]),_:1},8,["params","title"])):r("",!0)]),_:1})]),i("div",Se,[o(B,null,{default:l(()=>[t.dataType<2?(s(),v(_(x),{key:0,params:{act:"add",dataType:t.dataType,total:y.value.length>0?y.value.length:b.value,ids:y.value},isDrawer:"",showClose:!1,showOnOk:!1,path:"setting/multilingual/translationContent/Quick",title:y.value.length?"批量翻译":"一键翻译",width:"700px",onOkCallback:c},{default:l(()=>[o(N,{type:"success"},{default:l(()=>[f(C(y.value.length?"批量翻译":"一键翻译"),1)]),_:1})]),_:1},8,["params","title"])):r("",!0),o(Y,{title:"您确认要批量删除所选数据吗？",onConfirm:e[3]||(e[3]=a=>J("del"))},{reference:l(()=>[t.dataType<2?(s(),v(N,{key:0,disabled:y.value.length===0},{default:l(()=>e[12]||(e[12]=[f("批量删除",-1)])),_:1,__:[12]},8,["disabled"])):r("",!0)]),_:1}),y.value.length>0?(s(),u("span",Le,[e[13]||(e[13]=f(" 已选择：",-1)),i("b",null,C(y.value.length),1),e[14]||(e[14]=f(" 项 ",-1))])):r("",!0)]),_:1})])])])]),i("div",Be,[o(ee,{spinning:g.value},{default:l(()=>[t.dataType<2?(s(),v(U,{key:0,data:z.value,"row-key":"id",onSelectionChange:G,total:b.value,onSortChange:E,loading:g.value},{empty:l(()=>[i("div",Ue,[g.value?r("",!0):(s(),u("div",Fe,"暂无数据"))])]),default:l(()=>[o(k,{type:"selection",width:"32"}),o(k,{label:"原句",prop:"translationName",sortable:"custom","show-overflow-tooltip":"",fixed:"left"},{default:l(({row:a})=>[f(C(a.translationName||"--"),1)]),_:1}),(s(!0),u(A,null,P(I.value,(a,je)=>(s(),v(k,{label:a.language,prop:a.localeCode,"show-overflow-tooltip":""},{default:l(({row:ae})=>[f(C(Q(a.id,ae.tdata)),1)]),_:2},1032,["label","prop"]))),256)),o(k,{label:"翻译类型",prop:"dataType",width:150},{default:l(({row:a})=>[i("div",null,C(a.dataType==0?"页面文字":"接口文字"),1)]),_:1}),o(k,{label:"操作",fixed:"right",width:150},{default:l(({row:a})=>[o(_(x),{isDrawer:"",onOkCallback:c,title:"编辑"+(a.dataType==0?"页面文字":"接口文字"),width:"700px",path:"setting/multilingual/translationContent/Info",params:{act:"detail",id:a.id,dataType:t.dataType}},{default:l(()=>e[15]||(e[15]=[i("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[15]},1032,["title","params"]),o(Z,{direction:"vertical"}),o(_(ie),{onAfterDelete:c,requestApi:_(de),params:{id:a.id}},{default:l(()=>e[16]||(e[16]=[f("删除",-1)])),_:2,__:[16]},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])):(s(),v(U,{key:1,data:z.value,"row-key":"id",total:b.value,loading:g.value},{empty:l(()=>[i("div",qe,[g.value?r("",!0):(s(),u("div",Ke,"暂无数据"))])]),default:l(()=>[o(k,{label:"原句",prop:"name"},{default:l(({row:a})=>[t.dataType==2?(s(),u("div",Ae,C(n.value==2?a.productName:n.value==3?a.categoryName:n.value==4?a.brandName:a.articleTitle),1)):r("",!0)]),_:1}),o(k,{label:"翻译类型",prop:"dataType",width:150},{default:l(({row:a})=>[t.dataType==2?(s(),u("div",Pe,C(n.value==2?"商品名称":n.value==3?"分类名称":"品牌名称"),1)):r("",!0)]),_:1}),o(k,{label:"操作",fixed:"right",width:150},{default:l(({row:a})=>[t.dataType==2?(s(),v(_(x),{key:0,isDrawer:"",onOkCallback:V,title:"查看",width:"800px",path:"setting/multilingual/translationContent/BusinessDialog",params:{act:"detail",id:n.value==2?a.productId:n.value==3?a.categoryId:n.value==4?a.brandId:a.articleId,dataType:n.value,translationName:n.value==2?a.productName:n.value==3?a.categoryName:n.value==4?a.brandName:a.articleTitle}},{default:l(()=>e[17]||(e[17]=[i("a",{class:"btn-link"},"翻译",-1)])),_:2,__:[17]},1032,["params"])):r("",!0)]),_:1})]),_:1},8,["data","total","loading"]))]),_:1},8,["spinning"]),b.value>0?(s(),u("div",Me,[t.dataType<2?(s(),v(_(q),{key:0,page:t.page,"onUpdate:page":e[4]||(e[4]=a=>t.page=a),size:t.size,"onUpdate:size":e[5]||(e[5]=a=>t.size=a),total:b.value,onCallback:c},null,8,["page","size","total"])):(s(),v(_(q),{key:1,page:h.page,"onUpdate:page":e[6]||(e[6]=a=>h.page=a),size:h.size,"onUpdate:size":e[7]||(e[7]=a=>h.size=a),total:b.value,onCallback:O},null,8,["page","size","total"]))])):r("",!0)])])])])}}});export{oa as default};
