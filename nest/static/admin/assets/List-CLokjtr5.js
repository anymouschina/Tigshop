import{d as oe,P as se,v as ne,r as N,c as ie,e as u,f as g,g as n,h as l,k as i,i as e,y as o,l as s,K as c,a2 as P,j as p,t as C,J as B}from"./index-BEWhCL1q.js";/* empty css             */import{i as de}from"./format-C8RAoEAk.js";import{_ as re}from"./Image.vue_vue_type_script_setup_true_lang-DC1N644b.js";import"./index-DVG44k_-.js";import{P as D}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-B9ASxJaT.js";import{_ as K}from"./Switch.vue_vue_type_script_setup_true_lang-4ZoJqbbn.js";import{D as pe}from"./DeleteRecord-C4_57oHW.js";/* empty css                                                                    */import{P as ue}from"./Pagination-4FaohhlG.js";import{g as me,a as ce,u as I,d as _e,b as be,c as fe,e as ve}from"./brand-NPYEvOSK.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-B2T-ARqM.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as ge}from"./SelectShop.vue_vue_type_script_setup_true_lang-B2Py_DPQ.js";import{u as ke}from"./useListRequest-Bpxbydyo.js";import{i as T,b as he}from"./version-C520_GUm.js";import{_ as V}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";import"./time-BMcbgg5F.js";import"./shop-CWBoDOF9.js";import"./bindShop-CqwN6G6E.js";const ye={class:"container"},Ce={class:"content_wrapper"},Ie={class:"lyecs-table-list-warp"},Ve={key:0,class:"tabs-box"},Oe={class:"list-table-tool lyecs-search-warp"},Se={class:"advanced-search-warp list-table-tool-row"},xe={class:"simple-form-warp"},Ae={class:"simple-form-field"},Ue={class:"form-group"},we={class:"control-container"},qe={key:0,class:"simple-form-field"},Be={class:"form-group"},De={class:"control-container"},We={class:"simple-form-field"},Fe={class:"form-group"},Ne={class:"control-container"},Pe={key:1,class:"simple-form-field"},Ke={class:"form-group"},Te={class:"control-container"},ze={key:2,class:"simple-form-field"},He={class:"form-group"},Le={class:"control-container"},$e={class:"simple-form-field"},Re={class:"form-group"},je={class:"control-container"},Ee={class:"simple-form-warp"},Je={class:"simple-form-field"},Me={class:"control-container"},Ge={class:"list-table-tool-row"},Qe={class:"list-table-tool-col"},Xe={key:2},Ye={class:"table-container"},Ze={key:0,class:"span-product-brand"},et={class:"span-con green"},tt={key:1},at={class:"empty-warp"},lt={key:0,class:"empty-bg"},ot={key:0,class:"pagination-con"},At=oe({__name:"List",setup(st){const m=se(),z=ne(),d=N(1),x=N(0),H={1:ce,2:me},L=ie(()=>H[d.value]),{listData:$,loading:A,total:U,selectedIds:O,filterParams:r,loadData:b,onSearchSubmit:f,onSortChange:R,onSelectChange:j,onBatchAction:E,resetParams:J}=ke({apiFunction:L,idKey:"brandId",defaultParams:{page:1,isShow:"",brandIsHot:"",size:z.get("pageSize"),sortField:"",sortOrder:"",keyword:"",firstWord:"",shopId:"",status:m=="admin"?1:-1}}),M=async _=>{await E(_,be)};b();const G=_=>{d.value=_,r.page=1,_===2?r.status=0:r.status=m=="admin"?1:-1,b(),w()},w=async()=>{try{const _=await fe();x.value=_}catch(_){B.error(_.message)}b()};w();const Q=async()=>{try{const _=await ve();B.success("操作成功"),b()}catch(_){B.error(_.message)}};return(_,t)=>{const W=u("el-tab-pane"),X=u("el-badge"),Y=u("el-tabs"),y=u("el-button"),F=u("TigInput"),h=u("el-option"),q=u("el-select"),Z=u("router-link"),ee=u("el-popconfirm"),te=u("el-space"),v=u("el-table-column"),S=u("el-divider"),ae=u("el-table"),le=u("a-spin");return n(),g("div",ye,[l("div",Ce,[l("div",Ie,[e(m)==="admin"&&e(T)()?(n(),g("div",Ve,[o(Y,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=a=>d.value=a),"tab-position":"top",onTabChange:G},{default:s(()=>[o(W,{name:1,label:"品牌管理"}),o(W,{name:2},{label:s(()=>[o(X,{value:x.value,color:"#f33",offset:[5,-3],hidden:x.value===0},{default:s(()=>t[10]||(t[10]=[c(" 品牌审核 ",-1)])),_:1,__:[10]},8,["value","hidden"])]),_:1})]),_:1},8,["modelValue"])])):i("",!0),l("div",Oe,[l("div",Se,[l("div",xe,[l("div",Ae,[l("div",Ue,[t[12]||(t[12]=l("label",{class:"control-label"},[l("span",null,"商品品牌：")],-1)),l("div",we,[o(F,{modelValue:e(r).keyword,"onUpdate:modelValue":t[1]||(t[1]=a=>e(r).keyword=a),name:"keyword",placeholder:"输入品牌名称",onKeyup:P(e(f),["enter"]),clearable:"",onClear:e(f)},{append:s(()=>[o(y,{onClick:e(f)},{default:s(()=>t[11]||(t[11]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[11]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),e(m)!="shop"&&e(T)()?(n(),g("div",qe,[l("div",Be,[t[13]||(t[13]=l("label",{class:"control-label"},[l("span",null,"店铺：")],-1)),l("div",De,[o(e(ge),{shopId:e(r).shopId,"onUpdate:shopId":t[2]||(t[2]=a=>e(r).shopId=a),onOnChange:e(f)},null,8,["shopId","onOnChange"])])])])):i("",!0),l("div",We,[l("div",Fe,[t[14]||(t[14]=l("label",{class:"control-label"},[l("span",null,"是否显示：")],-1)),l("div",Ne,[o(q,{modelValue:e(r).isShow,"onUpdate:modelValue":t[3]||(t[3]=a=>e(r).isShow=a),clearable:"",onChange:e(f)},{default:s(()=>[o(h,{value:0,label:"不显示"}),o(h,{value:1,label:"显示"})]),_:1},8,["modelValue","onChange"])])])]),e(m)==="admin"?(n(),g("div",Pe,[l("div",Ke,[t[15]||(t[15]=l("label",{class:"control-label"},[l("span",null,"是否热门：")],-1)),l("div",Te,[o(q,{modelValue:e(r).brandIsHot,"onUpdate:modelValue":t[4]||(t[4]=a=>e(r).brandIsHot=a),clearable:"",onChange:e(f)},{default:s(()=>[o(h,{value:0,label:"否"}),o(h,{value:1,label:"是"})]),_:1},8,["modelValue","onChange"])])])])):i("",!0),e(m)==="shop"||d.value===2?(n(),g("div",ze,[l("div",He,[t[16]||(t[16]=l("label",{class:"control-label"},[l("span",null,"审核状态：")],-1)),l("div",Le,[o(q,{modelValue:e(r).status,"onUpdate:modelValue":t[5]||(t[5]=a=>e(r).status=a),clearable:"",onChange:e(f)},{default:s(()=>[o(h,{value:-1,label:"请选择..."}),o(h,{value:0,label:"待审核"}),o(h,{value:1,label:"审核通过"}),o(h,{value:2,label:"审核拒绝"})]),_:1},8,["modelValue","onChange"])])])])):i("",!0),l("div",$e,[l("div",Re,[t[17]||(t[17]=l("label",{class:"control-label"},[l("span",null,"首字母：")],-1)),l("div",je,[o(F,{modelValue:e(r).firstWord,"onUpdate:modelValue":t[6]||(t[6]=a=>e(r).firstWord=a),onKeyup:P(e(f),["enter"]),clearable:"",onClear:e(f)},null,8,["modelValue","onKeyup","onClear"])])])]),l("div",Ee,[l("div",Je,[t[20]||(t[20]=l("label",{class:"control-label"},null,-1)),l("div",Me,[o(y,{type:"primary",plain:"",onClick:e(f)},{default:s(()=>t[18]||(t[18]=[c("搜索",-1)])),_:1,__:[18]},8,["onClick"]),o(y,{plain:"",onClick:e(J)},{default:s(()=>t[19]||(t[19]=[c("重置",-1)])),_:1,__:[19]},8,["onClick"])])])])])])]),l("div",Ge,[l("div",Qe,[o(te,null,{default:s(()=>[d.value===1?(n(),p(e(V),{key:0,params:{act:"add"},isDrawer:"",path:"product/brand/Info",title:"添加品牌",width:"600px",onOkCallback:e(b)},{default:s(()=>[o(y,{type:"primary"},{default:s(()=>t[21]||(t[21]=[c("添加品牌",-1)])),_:1,__:[21]})]),_:1},8,["onOkCallback"])):i("",!0),d.value===1&&e(he)()&&e(m)==="admin"?(n(),p(Z,{key:1,to:{path:"/setting/translationContent/list",query:{type:"brand"}}},{default:s(()=>[o(y,null,{default:s(()=>t[22]||(t[22]=[c("批量翻译品牌名称",-1)])),_:1,__:[22]})]),_:1})):i("",!0),o(ee,{title:"您确认要批量删除所选数据吗？",onConfirm:t[7]||(t[7]=a=>M("del"))},{reference:s(()=>[o(y,{disabled:e(O).length===0},{default:s(()=>t[23]||(t[23]=[c("批量删除",-1)])),_:1,__:[23]},8,["disabled"])]),_:1}),o(y,{loading:!1,disabled:e(O).length===0,onClick:Q},{default:s(()=>t[24]||(t[24]=[c("批量更新品牌首字母 ",-1)])),_:1,__:[24]},8,["disabled"]),e(O).length>0?(n(),g("span",Xe,[t[25]||(t[25]=c(" 已选择：",-1)),l("b",null,C(e(O).length),1),t[26]||(t[26]=c(" 项 ",-1))])):i("",!0)]),_:1})])]),l("div",Ye,[o(le,{spinning:e(A)},{default:s(()=>[o(ae,{data:e($),loading:e(A),total:e(U),"row-key":"brandId","show-overflow-tooltip":"",onSelectionChange:e(j),onSortChange:e(R)},{empty:s(()=>[l("div",at,[e(A)?i("",!0):(n(),g("div",lt,"暂无数据"))])]),default:s(()=>[o(v,{type:"selection",width:"32"}),o(v,{width:200,label:"品牌名称",prop:"brandId",sortable:"custom"},{default:s(({row:a})=>[o(e(D),{"org-value":a.brandName,"onUpdate:orgValue":k=>a.brandName=k,max:30,params:{id:a.brandId,field:"brandName"},requestApi:e(I),label:"品牌名称",type:"textarea"},{default:s(()=>[c(C(a.brandName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"]),a.shop?(n(),g("p",Ze,[t[27]||(t[27]=l("span",{class:"span-tit"},"店铺：",-1)),l("span",et,C(a.shop.shopTitle),1)])):i("",!0)]),_:1}),o(v,{label:"品牌缩略图",width:"100"},{default:s(({row:a})=>[a.brandLogo?(n(),p(e(re),{key:0,src:e(de)(a.brandLogo),fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])):(n(),g("span",tt,"暂无图片"))]),_:1}),o(v,{label:"首字母"},{default:s(({row:a})=>[o(e(D),{"org-value":a.firstWord,"onUpdate:orgValue":k=>a.firstWord=k,len:1,params:{id:a.brandId,field:"firstWord"},requestApi:e(I),label:"首字母",type:"input"},{default:s(()=>[l("div",null,C(a.firstWord||"-"),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),e(m)==="admin"&&d.value===1?(n(),p(v,{key:0,label:"是否热销"},{default:s(({row:a})=>[o(e(K),{checked:a.brandIsHot,"onUpdate:checked":k=>a.brandIsHot=k,params:{id:a.brandId,field:"brandIsHot"},requestApi:e(I)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1})):i("",!0),o(v,{label:"是否显示",prop:"isShow",sortable:"custom"},{default:s(({row:a})=>[o(e(K),{checked:a.isShow,"onUpdate:checked":k=>a.isShow=k,params:{id:a.brandId,field:"isShow"},requestApi:e(I)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),e(m)==="shop"||d.value===2?(n(),p(v,{key:1,label:"审核状态",prop:"status"},{default:s(({row:a})=>[c(C(a.statusText),1)]),_:1})):i("",!0),e(m)==="shop"||d.value===2?(n(),p(v,{key:2,label:"审核备注",prop:"rejectRemark"},{default:s(({row:a})=>[c(C(a.rejectRemark||"-"),1)]),_:1})):i("",!0),e(m)==="admin"&&d.value===1?(n(),p(v,{key:3,label:"排序",prop:"sortOrder",sortable:"custom"},{default:s(({row:a})=>[o(e(D),{"org-value":a.sortOrder,"onUpdate:orgValue":k=>a.sortOrder=k,params:{id:a.brandId,field:"sortOrder"},requestApi:e(I),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"integer"},{default:s(()=>[l("div",null,C(a.sortOrder),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1})):i("",!0),o(v,{width:150,fixed:"right",label:"操作"},{default:s(({row:a})=>[d.value===1&&a.status!=0?(n(),p(e(V),{key:0,params:{act:"detail",id:a.brandId},isDrawer:"",path:"product/brand/Info",title:"编辑品牌",width:"600px",onOkCallback:e(b)},{default:s(()=>t[28]||(t[28]=[l("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[28]},1032,["params","onOkCallback"])):i("",!0),d.value===1&&a.status!=0?(n(),p(S,{key:1,direction:"vertical"})):i("",!0),e(m)==="shop"&&d.value===1&&a.status===0?(n(),p(e(V),{key:2,params:{act:"detail",id:a.brandId,examine:1},isDrawer:"",showClose:!1,showOnOk:!1,path:"product/brand/Info",title:"品牌详情",width:"600px",onOkCallback:e(b)},{default:s(()=>t[29]||(t[29]=[l("a",{class:"btn-link"},"详情",-1)])),_:2,__:[29]},1032,["params","onOkCallback"])):i("",!0),e(m)==="shop"&&d.value===1&&a.status===0?(n(),p(S,{key:3,direction:"vertical"})):i("",!0),d.value===2&&a.status!=0?(n(),p(e(V),{key:4,params:{act:"detail",id:a.brandId,examine:1},isDrawer:"",showClose:!1,showOnOk:!1,path:"product/brand/Info",title:"品牌详情",width:"600px",onOkCallback:e(b)},{default:s(()=>t[30]||(t[30]=[l("a",{class:"btn-link"},"详情",-1)])),_:2,__:[30]},1032,["params","onOkCallback"])):i("",!0),d.value===2&&a.status!=0?(n(),p(S,{key:5,direction:"vertical"})):i("",!0),d.value===2&&a.status===0?(n(),p(e(V),{key:6,dialogClass:"noPadding",params:{act:"detail",id:a.brandId},isDrawer:"",path:"product/brand/Examine",title:"品牌审核",width:"600px",onOkCallback:w},{default:s(()=>t[31]||(t[31]=[l("a",{class:"btn-link"},"去处理",-1)])),_:2,__:[31]},1032,["params"])):i("",!0),d.value===2&&a.status===0?(n(),p(S,{key:7,direction:"vertical"})):i("",!0),o(e(pe),{params:{id:a.brandId},requestApi:e(_e),onAfterDelete:e(b)},{default:s(()=>t[32]||(t[32]=[c("删除 ",-1)])),_:2,__:[32]},1032,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(U)>0?(n(),g("div",ot,[o(e(ue),{page:e(r).page,"onUpdate:page":t[8]||(t[8]=a=>e(r).page=a),size:e(r).size,"onUpdate:size":t[9]||(t[9]=a=>e(r).size=a),total:e(U),onCallback:e(b)},null,8,["page","size","total","onCallback"])])):i("",!0)])])])])}}});export{At as default};
