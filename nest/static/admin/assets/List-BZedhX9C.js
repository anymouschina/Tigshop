import{d as I,v as g,r as S,e as r,f as _,g as u,h as e,t as z,y as o,l as s,i as t,ds as V,K as D,p as P,k as h,J as N}from"./index-BEWhCL1q.js";/* empty css             */import{_ as R}from"./Image.vue_vue_type_script_setup_true_lang-DC1N644b.js";import"./index-DVG44k_-.js";/* empty css                                                                    */import{P as U}from"./Pagination-4FaohhlG.js";import{g as B,a as F}from"./live-DqBKtg3b.js";import{u as O}from"./useListRequest-Bpxbydyo.js";import{_ as A}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./format-C8RAoEAk.js";import"./index-BNk7xZkD.js";const K={class:"container"},$={class:"content_wrapper"},q={class:"notice-warp"},E={class:"lyecs-table-list-warp"},J={class:"list-table-tool lyecs-search-warp"},M={class:"list-table-tool-row"},j={class:"simple-form-warp"},G={class:"simple-form-field"},H={class:"form-group"},Q={class:"simple-form-field"},W={class:"form-group"},X={class:"control-container"},Y={class:"table-container"},Z={class:"empty-warp"},tt={key:0,class:"empty-bg"},et={key:0,class:"pagination-con"},ut=I({__name:"List",setup(ot){const b=g(),w=S(g().domain),{listData:k,loading:p,total:c,filterParams:n,loadData:d,onSearchSubmit:m}=O({apiFunction:F,idKey:"roomId",defaultParams:{sortField:"",sortOrder:"",wechatLiveTitle:"",page:1,size:b.get("pageSize")}});d();const y=async()=>{p.value=!0;try{await B(),d()}catch(f){N.error(f.message)}finally{p.value=!1}};return(f,a)=>{const v=r("el-button"),C=r("TigInput"),T=r("el-form"),l=r("el-table-column"),x=r("el-table"),L=r("a-spin");return u(),_("div",K,[e("div",$,[e("div",q,[e("p",null,"积分兑换列表前台地址为："+z(w.value)+"/exchange/list.html（支持手机版自动跳转）",1)]),e("div",E,[e("div",J,[o(T,{model:t(n),onSubmit:P(t(m),["prevent"])},{default:s(()=>[e("div",M,[e("div",j,[e("div",G,[e("div",H,[o(v,{type:"primary",icon:t(V),onClick:y},{default:s(()=>a[3]||(a[3]=[D("API更新直播间",-1)])),_:1,__:[3]},8,["icon"]),a[4]||(a[4]=e("span",null,"（一天上限三百次）",-1))])]),e("div",Q,[e("div",W,[e("div",X,[o(C,{modelValue:t(n).wechatLiveTitle,"onUpdate:modelValue":a[0]||(a[0]=i=>t(n).wechatLiveTitle=i),name:"wechatLiveTitle",placeholder:"输入直播名称",clearable:"",onClear:t(m)},{append:s(()=>[o(v,{onClick:t(m)},{default:s(()=>a[5]||(a[5]=[e("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[5]},8,["onClick"])]),_:1},8,["modelValue","onClear"])])])])])])]),_:1},8,["model","onSubmit"])]),e("div",Y,[o(L,{spinning:t(p)},{default:s(()=>[o(x,{data:t(k),"row-key":"roomId",total:t(c)},{empty:s(()=>[e("div",Z,[t(p)?h("",!0):(u(),_("div",tt,"暂无数据"))])]),default:s(()=>[o(l,{label:"房间ID",prop:"roomId",width:80}),o(l,{label:"直播名称",prop:"wechatLiveTitle",width:200}),o(l,{label:"开始日期",prop:"lastUpdateTime"}),o(l,{label:"结束日期",prop:"endTime"}),o(l,{label:"当前状态",prop:"liveStatusText"}),o(l,{label:"直播封面",prop:"pointsDeductedAmount"},{default:s(({row:i})=>[o(t(R),{src:i.coverImg,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),o(l,{label:"商品显示范围",prop:"actRangeText"}),o(l,{label:"操作",fixed:"right",width:100},{default:s(({row:i})=>[o(t(A),{isDrawer:"",onOkCallback:t(d),title:"编辑直播",width:"750px",path:"promotion/live/Info",params:{act:"detail",id:i.roomId}},{default:s(()=>a[6]||(a[6]=[e("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[6]},1032,["onOkCallback","params"])]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),t(c)>0?(u(),_("div",et,[o(t(U),{page:t(n).page,"onUpdate:page":a[1]||(a[1]=i=>t(n).page=i),size:t(n).size,"onUpdate:size":a[2]||(a[2]=i=>t(n).size=i),total:t(c),onCallback:t(d)},null,8,["page","size","total","onCallback"])])):h("",!0)])])])])}}});export{ut as default};
