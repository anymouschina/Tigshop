/* empty css             */import{d as G,v as H,r as p,ak as Q,o as W,e as d,f as I,g as u,h as n,y as o,l as s,k as h,n as X,j as y,K as k,i as x,t as m,J as Y,_ as Z}from"./index-BEWhCL1q.js";/* empty css                                                                    */import{P as $}from"./Pagination-4FaohhlG.js";import{g as ee}from"./merchant-Btir8EHA.js";import"./Verify.vue_vue_type_style_index_0_lang-B6mvUwPP.js";import"./zh-cn-Crj8NPt5.js";import{T as F}from"./Tag-Bhu-jNjT.js";import{S as V}from"./StatusDot-V36Ff0I6.js";const te={class:"container"},ae={class:"content_wrapper"},oe={class:"lyecs-table-list-warp"},se={class:"list-table-tool lyecs-search-warp"},le={class:"list-table-tool-row"},ne={class:"list-table-tool-col"},ce={class:"table-container"},re={class:"ssdw"},ie={class:"font-color"},de={class:"empty-warp"},ue={key:0,class:"empty-bg"},pe={key:0,class:"pagination-con"},me=G({__name:"SelectMerchant",props:{selectedIds:{type:Array,default:[]},merchant:{type:Object,default:{}},isMultiple:{type:Boolean,default:!0}},emits:["submitCallback","okType"],setup(w,{expose:N,emit:B}){const b=w,R=B,j=H(),T=p([]),_=p(!0),v=p(0),r=p([]),S=p(b.merchant),l=Q({page:1,size:j.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),g=async()=>{_.value=!0;try{const a=await ee({...l});T.value=a.records,v.value=a.total}catch(a){Y.error(a.message)}finally{_.value=!1}};W(()=>{g()});const D=()=>{g()},E=({prop:a,order:t})=>{l.sortField=a,l.sortOrder=t=="ascending"?"asc":t=="descending"?"desc":"",g()},C=p(),O=a=>{b.isMultiple&&(a.forEach(t=>{const i=new Set(r.value);i.add(t.merchantId),r.value=Array.from(i)}),console.log(r.value))},P=(a,t)=>{if(!b.isMultiple){if(C.value.clearSelection(),a.length==0){r.value=[],S.value={};return}C.value.toggleRowSelection(t,!0),r.value.length=0,r.value.push(t.merchantId),S.value=t}},U=(a,t)=>{var i;return!((i=b.selectedIds)!=null&&i.includes(a.merchantId))};return N({onFormSubmit:()=>{let a={merchantId:r.value[0],merchant:[S.value]};R("submitCallback",a)}}),(a,t)=>{const i=d("el-button"),A=d("TigInput"),J=d("el-space"),K=d("el-form"),c=d("el-table-column"),L=d("el-table"),q=d("a-spin");return u(),I("div",te,[n("div",ae,[n("div",oe,[n("div",se,[o(K,{model:l},{default:s(()=>[n("div",le,[n("div",ne,[o(J,null,{default:s(()=>[o(A,{modelValue:l.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>l.keyword=e),name:"keyword",placeholder:"输入商户名称"},{append:s(()=>[o(i,{onClick:D},{default:s(()=>t[3]||(t[3]=[n("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[3]})]),_:1},8,["modelValue"])]),_:1})])])]),_:1},8,["model"])]),n("div",ce,[o(q,{spinning:_.value},{default:s(()=>[o(L,{ref_key:"tableRef",ref:C,class:X(w.isMultiple?"":"hide-checkbox"),data:T.value,loading:_.value,total:v.value,"row-key":"merchantId",onSelect:P,onSelectionChange:O,onSortChange:E},{empty:s(()=>[n("div",de,[_.value?h("",!0):(u(),I("div",ue,"暂无数据"))])]),default:s(()=>[o(c,{selectable:U,type:"selection",width:"32"}),o(c,{label:"商户所属单位"},{default:s(({row:e})=>[n("div",re,[e.type==1?(u(),y(x(F),{key:0,transparent:!0,text:"个人"})):(u(),y(x(F),{key:1,color:"#409EFF",transparent:!1,text:"企业"})),k(" "+m(e.type==1?""+e.corporateName:""+e.companyName),1)])]),_:1}),o(c,{label:"商户所属会员(ID)"},{default:s(({row:e})=>{var f,z,M;return[k(m((f=e.user)==null?void 0:f.username)+m((z=e.user)!=null&&z.userId?"("+((M=e.user)==null?void 0:M.userId)+")":""),1)]}),_:1}),o(c,{label:"商户类型",prop:"typeText",sortable:"custom"}),o(c,{label:"管理员",sortable:"custom"},{default:s(({row:e})=>{var f;return[k(m((f=e.admin)==null?void 0:f.username),1)]}),_:1}),o(c,{label:"已绑定店铺",prop:"shopCount",sortable:"custom"},{default:s(({row:e})=>[n("div",ie,m(e.shopCount),1)]),_:1}),o(c,{label:"认证状态",prop:"statusText",sortable:"custom"},{default:s(({row:e})=>[e.status==1?(u(),y(V,{key:0,color:"#52c41a",flicker:!0})):h("",!0),e.status==2?(u(),y(V,{key:1,color:"#f5222d",flicker:!1})):h("",!0),k(" "+m(e.statusText),1)]),_:1}),o(c,{label:"认证日期",prop:"addTime",sortable:"custom"})]),_:1},8,["class","data","loading","total"])]),_:1},8,["spinning"]),v.value>0?(u(),I("div",pe,[o(x($),{page:l.page,"onUpdate:page":t[1]||(t[1]=e=>l.page=e),size:l.size,"onUpdate:size":t[2]||(t[2]=e=>l.size=e),total:v.value,onCallback:g},null,8,["page","size","total"])])):h("",!0)])])])])}}}),Ie=Z(me,[["__scopeId","data-v-66755c20"]]);export{Ie as default};
