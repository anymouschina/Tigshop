import{d as U,r as i,a as j,a5 as z,ak as E,o as O,J as p,e as r,f as k,g as f,h as d,j as w,k as J,l as s,y as l,E as K,F as M,m as P,K as $,I as h,_ as A}from"./index-BEWhCL1q.js";import{c as G,u as H}from"./verbalAssociation-By8-alcJ.js";import{g as Q}from"./languagesList-D1Cjy3FP.js";const W={class:"container"},X={class:"content_wrapper"},Y={class:"lyecs-form-table"},Z=U({__name:"Info",props:{id:{type:Number,default:0},promotionType:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(I,{expose:L,emit:S}){const c=S,n=I,_=i(),u=i(!0),g=j().currentRoute.value.query,v=i(n.isDialog?n.act:String(g.act)),y=i(n.isDialog?n.id:Number(g.id)),C=v.value==="add"?"create":"update",b=z(),o=i({code:"",name:"",localesId:0}),N=E({page:1,size:99999,sortField:"",sortOrder:"",keyword:""}),R=async()=>{u.value=!0;try{const t=await Q({...N});_.value=t.records}catch(t){p.error(t.message)}finally{u.value=!1}};O(()=>{v.value==="detail"?B():u.value=!1,R()});const B=async()=>{try{const t=await G(v.value,{id:y.value});Object.assign(o.value,t)}catch(t){p.error(t.message),c("close")}finally{u.value=!1}},x=async()=>{await b.value.validate();try{c("update:confirmLoading",!0);const t=await H(C,{id:y.value,...o.value});c("submitCallback",t),p.success("操作成功")}catch(t){p.error(t.message)}finally{c("update:confirmLoading",!1)}};return L({onFormSubmit:()=>{x()}}),(t,e)=>{const V=r("TigInput"),m=r("el-form-item"),F=r("el-option"),T=r("el-select"),q=r("el-button"),D=r("el-form");return f(),k("div",W,[d("div",X,[d("div",Y,[u.value?J("",!0):(f(),w(D,{key:0,ref_key:"formRef",ref:b,model:o.value,"label-width":"auto"},{default:s(()=>[l(m,{prop:"name",label:"所属地区：",rules:[{required:!0,message:"所属地区不能为空!"}]},{default:s(()=>[l(V,{classType:"tig-form-input",type:"text",maxlength:60,modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.name=a)},null,8,["modelValue"]),e[4]||(e[4]=d("div",{class:"extra"},"例如：中国、中国香港、中国台湾、英国、法国",-1))]),_:1,__:[4]}),l(m,{prop:"code",label:"语言识别码：",rules:[{required:!0,message:"语言识别码不能为空!"}]},{default:s(()=>[l(V,{classType:"tig-form-input",type:"text",maxlength:60,modelValue:o.value.code,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.code=a)},null,8,["modelValue"]),e[5]||(e[5]=d("div",{class:"extra"},"浏览器语言识别码",-1))]),_:1,__:[5]}),l(m,{prop:"localesId",label:"关联语言：",rules:[{required:!0,message:"请选择关联语言!"}]},{default:s(()=>[l(T,{modelValue:o.value.localesId,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.localesId=a),placeholder:"请选择关联语言",size:"default"},{default:s(()=>[(f(!0),k(M,null,P(_.value,a=>(f(),w(F,{key:a.id,label:a.language,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[6]||(e[6]=d("div",{class:"extra"},"请选择关联语言，语言类型是由您自行添加的",-1))]),_:1,__:[6]}),K(l(m,{"wrapper-col":{offset:4,span:16}},{default:s(()=>[l(q,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[3]||(e[3]=a=>x())},{default:s(()=>e[7]||(e[7]=[$("提交",-1)])),_:1,__:[7]},512)]),_:1},512),[[h,!n.isDialog]])]),_:1},8,["model"]))])])])}}}),le=A(Z,[["__scopeId","data-v-13a688e2"]]);export{le as default};
