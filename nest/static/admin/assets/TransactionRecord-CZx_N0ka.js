/* empty css             */import{d as F,v as I,ak as N,e as d,a1 as T,f as m,g as i,h as s,y as l,l as r,F as f,m as B,j as v,E as L,k as g,i as e,t as S,K as O,_ as P}from"./index-BEWhCL1q.js";/* empty css                                                                    */import{P as V}from"./Pagination-4FaohhlG.js";import{p as R}from"./format-C8RAoEAk.js";import"./index-DVG44k_-.js";import{b as E}from"./order-BQjFJOKB.js";import{u as K}from"./useListRequest-Bpxbydyo.js";import{_ as U}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";const j={class:"lyecs-table-list-warp"},q={class:"table-container"},A={class:"empty-warp"},$={key:0,class:"empty-bg"},G={key:0,class:"pagination-con"},H=F({__name:"TransactionRecord",setup(J){const y=I(),p=N([{value:"-1",label:"全部"},{value:"0,1,2",label:"进行中"},{value:"99",label:"待结算"},{value:"88",label:"退款"},{value:"5",label:"交易成功"},{value:"3,4,-2",label:"交易关闭"}]),{listData:k,loading:_,total:b,filterParams:a,loadData:c}=K({apiFunction:E,idKey:"articleId",defaultParams:{page:1,size:y.get("pageSize"),sortField:"",sortOrder:"",orderStatus:-1,vendorId:-2,isSettlement:0}});c();const w=u=>{a.payStatus="",p[u].value=="99"?(a.isSettlement=0,a.orderStatus=-1):p[u].value=="88"?(a.isSettlement=0,a.orderStatus=-1,a.payStatus=3):a.orderStatus=p[u].value,c()};return(u,o)=>{const h=d("el-tab-pane"),C=d("el-tabs"),n=d("el-table-column"),z=d("el-button"),x=d("el-table"),D=T("loading");return i(),m(f,null,[o[3]||(o[3]=s("div",{class:"tit-box"},[s("div",{class:"tit"},[s("span",null,"最近交易记录")])],-1)),s("div",j,[l(C,{type:"card",onTabChange:w},{default:r(()=>[(i(!0),m(f,null,B(p,t=>(i(),v(h,{label:t.label},null,8,["label"]))),256))]),_:1}),s("div",q,[L((i(),v(x,{data:e(k),loading:e(_),total:e(b),"row-key":"logId"},{empty:r(()=>[s("div",A,[e(_)?g("",!0):(i(),m("div",$,"暂无数据"))])]),default:r(()=>[l(n,{label:"时间",prop:"addTime",width:"160"}),l(n,{label:"购买用户",width:"160"},{default:r(({row:t})=>[s("span",null,S(t.user.username),1)]),_:1}),l(n,{label:"订单编号",prop:"orderSn",width:"160"}),l(n,{label:"金额(元)|明细"},{default:r(({row:t})=>[s("span",null,"总金额: "+S(e(R)(t.totalAmount)||0),1)]),_:1}),l(n,{label:"状态",prop:"orderStatusName",width:"120"}),l(n,{label:"操作",width:"80"},{default:r(({row:t})=>[l(e(U),{params:{act:"detail",id:t.orderId},showClose:!1,showOnOk:!1,title:"订单详情 "+t.orderSn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:e(c)},{default:r(()=>[l(z,{size:"small",link:"",type:"primary"},{default:r(()=>o[2]||(o[2]=[O(" 查看详情 ",-1)])),_:1,__:[2]})]),_:2},1032,["params","title","onCallback"])]),_:1})]),_:1},8,["data","loading","total"])),[[D,e(_)]]),e(b)>0?(i(),m("div",G,[l(e(V),{page:e(a).page,"onUpdate:page":o[0]||(o[0]=t=>e(a).page=t),size:e(a).size,"onUpdate:size":o[1]||(o[1]=t=>e(a).size=t),total:e(b),onCallback:e(c)},null,8,["page","size","total","onCallback"])])):g("",!0)])])],64)}}}),oe=P(H,[["__scopeId","data-v-8b4c5038"]]);export{oe as default};
