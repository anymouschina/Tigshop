import{d as e,k as t,B as l,E as a,c as o,o as s,w as u,g as c,i,f as n,t as r,I as d,O as p,b as f,F as m,G as v,J as _,S as y,_ as g,a7 as h,j as k,r as b,H as x,h as I,X as w,aJ as V,b4 as $,aN as S,a as C,Y as P,aL as N,ac as j,Z as T,e as L,aK as U,b5 as z,K as D,aW as F,b6 as O,Q as B,L as R,b7 as M,b8 as W,aZ as A,b9 as E,ba as J,N as H,ay as K,U as X,bb as G,n as Q,l as Y,ae as Z,V as q,ad as ee,aV as te,ak as le,bc as ae,bd as oe,a5 as se,a3 as ue,be as ce,aY as ie,m as ne,bf as re,s as de,y as pe,z as fe,bg as me,ah as ve,P as _e,a0 as ye,bh as ge,$ as he,T as ke,bi as be,v as xe,aM as Ie}from"./index-BcyAKDDV.js";import{_ as we}from"./tig-image.lWnA30Ud.js";import{_ as Ve}from"./uni-badge.Bs42Tbnm.js";import{c as $e,a as Se,u as Ce,_ as Pe}from"./tig-layout.DHsvU4xy.js";import{_ as Ne}from"./tig-back-top.vue_vue_type_script_setup_true_lang.Bi73mTCV.js";import{_ as je}from"./tig-loadingpage.vue_vue_type_script_setup_true_lang.2R__ugUU.js";import{_ as Te}from"./format-price.csRf0ax_.js";import{d as Le,u as Ue,g as ze,a as De,b as Fe,c as Oe,e as Be,f as Re,h as Me}from"./product.Dt_JmfR-.js";import{g as We}from"./guide.BVnNiJuA.js";import{a as Ae}from"./activityCard.DFNvABJe.js";import{_ as Ee}from"./tig-countdown.vue_vue_type_script_setup_true_lang.BLkMpcmg.js";import{_ as Je}from"./uni-icons.CtiPjGAO.js";import{_ as He}from"./uni-rate.BR_CvbfQ.js";import{s as Ke,b as Xe}from"./shop.C0LoUVHm.js";import{a as Ge,s as Qe}from"./specification.BVK5lHIl.js";import{_ as Ye}from"./tig-fixed-placeholder.BvTFztLB.js";import{a as Ze}from"./coupon.Do89ZxH6.js";import{_ as qe}from"./index.vue_vue_type_script_setup_true_lang.DrbG3ThL.js";import{r as et}from"./index._2d9EUEM.js";import{b as tt}from"./cart.i6kPS2Q-.js";import"./uni-transition.Dw2s8oU4.js";import"./uni-number-box.D3RxEDC7.js";import"./masonry.DMVeXjyb.js";import"./useList.DjEWWv0p.js";const lt=g(e({__name:"tig-menu",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:g}){const h=e,k=g,b=t({get:()=>h.modelValue,set(e){k("update:modelValue",e)}}),x=[{icon:"common/home.svg",text:"首页",link:"/pages/index/index"},{icon:"common/search.svg",text:"搜索",link:"/pages/search/index"},{icon:"common/user.svg",text:"个人中心",link:"/pages/user/index"},{icon:"common/collection.svg",text:"商品收藏",link:"/pages/user/collectProduct/index"},{icon:"common/history.svg",text:"查看足迹",link:"/pages/user/historyProduct/index"},{icon:"common/message.svg",text:"消息中心",link:"/pages/user/messageLog/index"}];return(e,t)=>{const g=i,h=f,I=l(a("tig-popup"),$e);return s(),o(I,{show:b.value,"onUpdate:show":t[0]||(t[0]=e=>b.value=e),position:"top","background-color":"#fff","show-close":!1},{default:u(()=>[c(g,{class:"menu-box"},{default:u(()=>[c(g,{class:"menu-title"},{default:u(()=>[n(r(e.$t("快捷入口")),1)]),_:1}),c(g,{class:"menu-list"},{default:u(()=>[(s(),d(_,null,p(x,(t,l)=>c(g,{key:l,class:"menu-item",onClick:e=>(e=>{k("update:modelValue",!1),y({url:e.link})})(t)},{default:u(()=>[c(g,{class:"menu-item-icon"},{default:u(()=>[c(h,{class:"menu-item-img",src:m(v)(t.icon)},null,8,["src"])]),_:2},1024),c(g,{class:"menu-item-text"},{default:u(()=>[n(r(e.$t(t.text)),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:1})]),_:1})]),_:1},8,["show"])}}}),[["__scopeId","data-v-7842f184"]]),at=g(e({__name:"productNav",props:{modelValue:{type:Number,default:0},activeModule:{type:String,default:""},event:{type:Function,default:()=>{}}},emits:["update:modelValue","update:activeModule"],setup(e,{emit:f}){h(e=>({"2c4f2e65":T.value}));const m=k(),v=e,y=f,g=b([{label:"商品",value:".product-area"},{label:"评价",value:".evaluate-area"},{label:"详情",value:".product-detail-area"}]),V=b(250),$=V.value-80,S=t(()=>{let e=1;return v.modelValue>$?e=0:v.modelValue<$&&v.modelValue>0&&(e=($-v.modelValue)/$),v.modelValue>V.value&&(e=1),e}),C=t(()=>{let e=0;return v.modelValue>V.value?e=1:v.modelValue<V.value&&v.modelValue>0&&(e=v.modelValue/V.value),e}),P=b(!1),N=()=>{P.value=!0},j=()=>{history.back()},T=t(()=>m.saveTop+10+"px");return t(()=>m.menuButtonInfo),(t,f)=>{const m=I,h=i,k=l(a("tig-menu"),lt);return s(),d(_,null,[c(h,{class:"product-nav"},{default:u(()=>[c(h,{class:"product-nav-container"},{default:u(()=>[c(h,{class:"product-nav-left product-nav-icon",style:x({opacity:S.value}),onClick:j},{default:u(()=>[c(m,{class:w(["iconfont icon-houtui",{change:e.modelValue>V.value}])},null,8,["class"])]),_:1},8,["style"]),c(h,{class:"product-nav-middle",style:x({opacity:C.value})},{default:u(()=>[(s(!0),d(_,null,p(g.value,l=>(s(),o(h,{key:l.label,class:w(["middle-text",{active:l.value===e.activeModule}]),onClick:e=>{return t=l.value,y("update:activeModule",t),void v.event(t);var t}},{default:u(()=>[n(r(t.$t(l.label)),1)]),_:2},1032,["class","onClick"]))),128))]),_:1},8,["style"]),c(h,{class:"product-nav-right product-nav-icon",style:x({opacity:S.value}),onClick:N},{default:u(()=>[c(m,{class:w(["iconfont-h5 icon-gengduo",{change:e.modelValue>V.value}])},null,8,["class"])]),_:1},8,["style"])]),_:1})]),_:1}),c(k,{modelValue:P.value,"onUpdate:modelValue":f[0]||(f[0]=e=>P.value=e)},null,8,["modelValue"])],64)}}}),[["__scopeId","data-v-b319343d"]]),ot=g(e({__name:"productImg",props:{picList:{default:()=>[]},productInfo:{default:()=>({})},videoList:{default:()=>[]},seckillValue:{}},setup(e){const l=e,a=t(()=>l.seckillValue.seckillStock),v=b(1),y=t(()=>l.videoList[0]?l.videoList[0]:{}),g=t(()=>{var e;return y.value.videoUrl?[{...y.value,picUrl:(null==(e=l.picList[0])?void 0:e.picUrl)||""},...l.picList]:l.picList}),h=e=>{v.value=e.detail.current+1,w.value=!1,null==x||x.pause()},k=S();let x;const w=b(!1),D=()=>{w.value=!0,null==x||x.play()},F=e=>{console.log("video error",e)},O=()=>{w.value=!1},B=()=>{};return V(()=>{x=$("productVideo",k)}),(e,t)=>{const l=i,y=f,k=L,b=N,x=U,V=I;return s(),o(l,{class:"product-pic-con"},{default:u(()=>[c(l,{class:"nav-bg"}),g.value.length>0?(s(),o(l,{key:0,class:"product-bg"},{default:u(()=>[c(x,{"indicator-dots":!1,circular:!0,interval:"3000",duration:"500",onChange:h},{default:u(()=>[(s(!0),d(_,null,p(g.value,(t,i)=>(s(),o(b,{key:i},{default:u(()=>{var p;return[t.videoUrl?(s(),o(l,{key:1,class:"video-box"},{default:u(()=>[P(c(l,{class:"cover-box",onClick:D},{default:u(()=>[c(y,{src:m(j)(t.videoCover?t.videoCover:t.picUrl||""),class:"slide-image"},null,8,["src"]),c(l,{class:"video-icon"})]),_:2},1536),[[T,!w.value]]),P(c(k,{id:"productVideo",class:"product-video",src:m(j)(t.videoUrl),autoplay:!1,"enable-progress-gesture":!1,controls:"",loop:!1,onPause:B,onError:F,onEnded:O},null,8,["src"]),[[T,w.value]])]),_:2},1024)):(s(),d(_,{key:0},[c(y,{src:m(j)(t.picUrl||""),class:"slide-image",onClick:e=>(e=>{const t=g.value.map(e=>j(e.picUrl||""));z({current:t[e],urls:t,indicator:"number",loop:!0})})(i)},null,8,["src","onClick"]),1==(null==(p=e.productInfo)?void 0:p.isSeckill)?(s(),d(_,{key:0},[0==a.value?(s(),o(l,{key:0,class:"outsale"},{default:u(()=>[n(r(e.$t("已售罄")),1)]),_:1})):C("",!0)],64)):(s(),d(_,{key:1},[0==e.productInfo.productStock?(s(),o(l,{key:0,class:"outsale"},{default:u(()=>[n(r(e.$t("已售罄")),1)]),_:1})):C("",!0)],64))],64))]}),_:2},1024))),128))]),_:1}),P(c(l,{class:"pages"},{default:u(()=>[c(V,null,{default:u(()=>[n(r(v.value),1)]),_:1}),n(" /"+r(g.value.length||1),1)]),_:1},512),[[T,g.value.length>1&&!w.value]])]),_:1})):C("",!0)]),_:1})}}}),[["__scopeId","data-v-f0a4bf6b"]]),st=g(e({__name:"poster",props:{modelValue:{type:Boolean},productId:{},productInfo:{},productPrice:{}},emits:["update:modelValue"],setup(e,{emit:t}){const{t:d}=D(),p=S(),m=e,_=b(""),y=b(!1),g=b(0);V(async()=>{const{windowWidth:e}=F();g.value=e/375,await h(),k()});const h=async()=>{try{const e=await O(location.href);_.value=e,B({title:d("正在生成海报，请稍后"),icon:"none",duration:1e3})}catch(e){console.error(e),B({title:e.message,icon:"none"})}},k=async()=>{const e=R("userInfo"),t=M();let l=W("myCanvas",p);l.draw(),l.save(),l.setFillStyle("#ffffff"),l.fillRect(0,0,500,900),l.draw(),l.setFontSize(14),l.setFillStyle("#000000"),l.fillText(e.username??d("普通会员"),100*g.value,48),l.setFontSize(12),l.setFillStyle("#999999"),l.fillText(d("的分享"),100*g.value,68),l.setFontSize(18),l.setFillStyle(t.themeStyle["--general"]),l.fillText(`${m.productPrice}`,20,366*g.value),x(m.productInfo.productName,20,379*g.value,l),l.save();try{const t=await A(e.avatar?j(e.avatar):v("user/default_avatar.jpg"));l.beginPath(),l.arc(50,50,28,0,2*Math.PI),l.clip(),l.drawImage(t.path,20,20,70*g.value,70*g.value),l.restore(),l.draw(!0,async()=>{l.save();const e=await A(j(m.productInfo.picOriginal));l.drawImage(e.path,15,92,245*g.value,245*g.value),l.draw(!0,()=>{l.drawImage(_.value,165,360*g.value,100*g.value,100*g.value),l.draw(!0,()=>{w()})})})}catch(a){console.error(a)}},x=(e,t,l,a)=>{let o=[];for(let s=0,u=e.length;s<u/11;s++){let t=e.slice(11*s,11*(s+1));o.push(t)}o.forEach((e,o)=>{o>3||(l+=20,a.setFontSize(12),a.setFillStyle("#333333"),a.fillText(e,t,l))})},I=b(""),w=()=>{E({fileType:"jpg",canvasId:"myCanvas",quality:1,success:function(e){I.value=e.tempFilePath,y.value=!0},fail:e=>{B({title:JSON.stringify(e),icon:"none",duration:3e3}),y.value=!1,console.log(e)}},p)},$=()=>{};return(e,t)=>{const d=J,p=f,m=i,v=l(a("tig-popup"),$e);return s(),o(m,null,{default:u(()=>[c(d,{id:"myCanvas",class:"canvas-content","canvas-id":"myCanvas"}),c(v,{show:y.value,"onUpdate:show":t[1]||(t[1]=e=>y.value=e),"background-color":"transparent",position:"center","show-close":!1,onClose:t[2]||(t[2]=t=>e.$emit("update:modelValue",!1))},{default:u(()=>[c(m,{class:"poster-box",onTouchmove:t[0]||(t[0]=H(()=>{},["stop","prevent"])),onLongpress:H($,["stop"])},{default:u(()=>[c(p,{src:I.value,style:{height:"100%",width:"100%"}},null,8,["src"])]),_:1}),c(m,{class:"canvas-tip"},{default:u(()=>[n(r(e.$t("长按可保存海报")),1)]),_:1})]),_:1},8,["show"])]),_:1})}}}),[["__scopeId","data-v-2434ed17"]]),ut=g(e({__name:"productShare",props:{modelValue:{type:Boolean},productId:{},productInfo:{},productPrice:{}},emits:["update:modelValue"],setup(e,{emit:d}){const{t:p}=D(),f=k();K();const m=e,v=d,_=b(m.productInfo);X(()=>m.productInfo,e=>{_.value=e});const y=t({get:()=>m.modelValue,set(e){v("update:modelValue",e)}}),g=b(!1),h=()=>{v("update:modelValue",!1),g.value=!0},x=()=>{v("update:modelValue",!1),w()},w=()=>{G(window.location.href,()=>{B({title:p("复制成功"),icon:"none"})})},V=t(()=>"miniProgram"===f.XClientType||"wechat"===f.XClientType),$=b(!1),S=()=>{v("update:modelValue",!1),$.value=!0};return(e,t)=>{const d=i,p=I,f=l(a("tig-popup"),$e);return s(),o(d,{class:"share"},{default:u(()=>[c(f,{show:y.value,"onUpdate:show":t[0]||(t[0]=e=>y.value=e),position:"bottom"},{default:u(()=>[c(d,{class:"share-title"},{default:u(()=>[n(r(e.$t("分享")),1)]),_:1}),c(d,{class:"share-content"},{default:u(()=>[V.value?(s(),o(d,{key:0,class:"share-item",onClick:S},{default:u(()=>[c(p,{class:"iconfont-h5 icon-haoyou"}),c(p,{class:"share-item-text"},{default:u(()=>[n(r(e.$t("分享给好友")),1)]),_:1})]),_:1})):C("",!0),c(d,{class:"share-item",onClick:x},{default:u(()=>[c(p,{class:"iconfont-h5 icon-link"}),c(p,{class:"share-item-text"},{default:u(()=>[n(r(e.$t("复制链接")),1)]),_:1})]),_:1}),c(d,{class:"share-item",onClick:h},{default:u(()=>[c(p,{class:"iconfont-h5 icon-tupian"}),c(p,{class:"share-item-text"},{default:u(()=>[n(r(e.$t("生成商品海报")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"]),g.value?(s(),o(st,{key:0,modelValue:g.value,"onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),"product-id":e.productId,"product-info":_.value,"product-price":e.productPrice},null,8,["modelValue","product-id","product-info","product-price"])):C("",!0),c(We,{modelValue:$.value,"onUpdate:modelValue":t[2]||(t[2]=e=>$.value=e)},null,8,["modelValue"])]),_:1})}}}),[["__scopeId","data-v-944cb880"]]),ct=g(e({__name:"productTitleInfo",props:{productInfo:{type:Object,default:()=>({})},productPrice:{type:[String,Number],default:"0"},isSeckill:{type:Number,default:0},isDiscount:{type:Number,default:0},promotionList:{type:Array,default:()=>[]},showCoupon:{type:Boolean,default:!1},type:{type:String,default:""},exchangeIntegral:{type:Number,default:0}},emits:["update:showCoupon"],setup(e,{emit:t}){const y=k(),g=K(),h=e,x=t,{t:V}=D(),$=b(!1),S=b(0),P=()=>{x("update:showCoupon",!0)},N=async e=>{try{const t=await ze({id:e});$.value=t}catch(t){if(401===t.code)return $.value=!1;B({title:t.message,icon:"none"})}},j=async()=>{try{$.value?await Le({id:S.value}):await Ue({productId:S.value}),B({title:$.value?V("取消收藏成功"):V("收藏成功"),icon:"none"}),await N(S.value)}catch(e){B({title:e.message,icon:"none"})}},T=b(!1),L=()=>{g.token?T.value=!0:Q({url:"/pages/login/index"})};return X(()=>h.productInfo,e=>{e&&(S.value=e.productId,N(e.productId))}),(t,g)=>{const h=i,k=l(a("format-price"),Te),b=I,x=f;return s(),o(h,{class:"product-title-info"},{default:u(()=>[c(h,{class:"title-info-top"},{default:u(()=>[e.isSeckill||e.isDiscount?(s(),o(h,{key:0,class:"title-info-bottom line2"},{default:u(()=>[n(r(e.productInfo.productName),1)]),_:1})):(s(),o(h,{key:1,class:"title-top-price"},{default:u(()=>[c(k,{"font-style":{fontSize:"36rpx"},"decimals-style":{fontSize:"25rpx"},"currency-style":{fontSize:"23rpx"},"price-data":e.productPrice},null,8,["price-data"]),"exchange"===e.type?(s(),o(h,{key:0,class:"exchange-box"},{default:u(()=>[c(b,{class:"exchange-icon"},{default:u(()=>[n("+")]),_:1}),c(x,{class:"exchange-img",src:m(v)("exchange/exchange.png")},null,8,["src"]),c(b,{class:"exchange-text"},{default:u(()=>[n(r(e.exchangeIntegral),1)]),_:1})]),_:1})):C("",!0),"exchange"!==e.type&&m(y).showMarketprice&&e.productInfo.marketPrice&&Number(e.productInfo.marketPrice)>0?(s(),o(h,{key:1,class:"title-top-market_price"},{default:u(()=>[c(k,{"is-bottom":!1,"price-data":e.productInfo.marketPrice},null,8,["price-data"])]),_:1})):C("",!0)]),_:1})),c(h,{class:"title-top-panle"},{default:u(()=>[c(h,{class:"title-top-panle-collect",onClick:j},{default:u(()=>[c(h,{class:w(["iconfont-h5 icon-shoucang1",{"icon-yishoucang":$.value}])},{default:u(()=>[c(b)]),_:1},8,["class"]),c(h,{class:"title-panle-collect-text"},{default:u(()=>[n(r(t.$t("收藏")),1)]),_:1})]),_:1}),c(h,{class:"title-top-panle-collect",onClick:H(L,["stop"])},{default:u(()=>[c(h,{class:"iconfont-h5 icon-fenxiang"}),c(h,{class:"title-panle-collect-text"},{default:u(()=>[n(r(t.$t("分享")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e.promotionList.length>0?(s(),o(h,{key:0,class:"activity-box",onClick:P},{default:u(()=>[c(h,{class:"flex"},{default:u(()=>[(s(!0),d(_,null,p(e.promotionList.length>2?e.promotionList.slice(0,2):e.promotionList,e=>(s(),o(Ae,{key:e.promotionId,"activity-info":e,"card-type":"detail"},null,8,["activity-info"]))),128))]),_:1}),c(h,{class:"activity-btn"},{default:u(()=>[n(r(t.$t("领券")),1),c(b,{class:"iconfont-h5 icon-youjiantou"})]),_:1})]),_:1})):C("",!0),e.isSeckill||e.isDiscount?C("",!0):(s(),d(_,{key:1},[c(h,{class:"title-info-bottom line2"},{default:u(()=>[n(r(e.productInfo.productName),1)]),_:1}),e.productInfo.productBrief?(s(),o(h,{key:0,class:"description line2"},{default:u(()=>[n(r(e.productInfo.productBrief),1)]),_:1})):C("",!0)],64)),c(ut,{modelValue:T.value,"onUpdate:modelValue":g[0]||(g[0]=e=>T.value=e),"product-id":Number(S.value),"product-info":e.productInfo,"product-price":e.productPrice},null,8,["modelValue","product-id","product-info","product-price"])]),_:1})}}}),[["__scopeId","data-v-4585651e"]]),it=g(e({__name:"productSeckillTitle",props:{productInfo:{},productPrice:{},productOriginPrice:{},seckillValue:{}},setup(e){const d=e;console.log("seckillValue",d.seckillValue);const p=t(()=>d.seckillValue.seckillStock),f=t(()=>{return e=d.seckillValue.seckillSales,t=d.seckillValue.seckillStock,Math.round(e/(t+e)*100)+"%";var e,t});return(e,t)=>{const d=l(a("format-price"),Te),m=i,v=l(a("tig-countdown"),Ee);return s(),o(m,{class:"product-seckill-title flex justify-between align-center"},{default:u(()=>[c(m,{class:"seckill-price-box"},{default:u(()=>[c(m,{class:"title-top-price"},{default:u(()=>[c(m,{class:"price-box"},{default:u(()=>[c(m,{class:"price"},{default:u(()=>[c(d,{"font-style":{fontWeight:"bold"},"decimals-style":{fontSize:"24rpx",fontWeight:"bold"},"currency-style":{fontSize:"23rpx",fontWeight:"bold"},"price-data":e.productPrice},null,8,["price-data"])]),_:1}),c(m,{class:"tag-text-box"},{default:u(()=>[c(m,{class:"tag-text"},{default:u(()=>[n(r(e.$t("秒杀价")),1)]),_:1})]),_:1})]),_:1}),c(m,{class:"title-top-market_price flex align-center"},{default:u(()=>[e.productOriginPrice&&Number(e.productOriginPrice)>Number(e.productPrice)?(s(),o(m,{key:0,class:"originalprice-box"},{default:u(()=>[n(r(e.$t("价格"))+" ",1),c(m,null,{default:u(()=>[c(d,{"is-bottom":!1,"price-data":e.productOriginPrice,"font-style":{"text-decoration":"line-through"}},null,8,["price-data"])]),_:1})]),_:1})):C("",!0)]),_:1})]),_:1})]),_:1}),c(m,{class:"seckill-time-box"},{default:u(()=>[c(m,{class:"countdown-box flex align-center"},{default:u(()=>[c(m,{class:"title-top-time"},{default:u(()=>[n(r(e.$t("距结束还剩")),1)]),_:1}),c(v,{"end-time":e.seckillValue.seckillEndTime,"font-size":11,color:"#fff"},null,8,["end-time"])]),_:1}),c(m,{class:"stock-progress"},{default:u(()=>[c(m,{class:"progress-line-box"},{default:u(()=>[c(m,{class:"progress-line",style:x({width:`${f.value}`})},null,8,["style"])]),_:1}),c(m,{class:"progress-text"},{default:u(()=>[n(r(e.$t("仅剩"))+" "+r(p.value)+" "+r(e.$t("件")),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-575520e7"]]),nt=g(e({__name:"productDiscountTitle",props:{productInfo:{},productPrice:{},productOriginPrice:{},discountValue:{},productStock:{}},setup:e=>(e,t)=>{const d=l(a("format-price"),Te),p=i,f=l(a("tig-countdown"),Ee);return s(),o(p,{class:"product-seckill-title flex justify-between align-center"},{default:u(()=>[c(p,{class:"seckill-price-box"},{default:u(()=>[c(p,{class:"title-top-price"},{default:u(()=>[c(p,{class:"price-box"},{default:u(()=>[c(p,{class:"price"},{default:u(()=>[c(d,{"font-style":{fontWeight:"bold"},"decimals-style":{fontSize:"24rpx",fontWeight:"bold"},"currency-style":{fontSize:"23rpx",fontWeight:"bold"},"price-data":e.productPrice},null,8,["price-data"])]),_:1}),c(p,{class:"tag-text-box"},{default:u(()=>[c(p,{class:"tag-text"},{default:u(()=>[n(r(e.$t("直降"))+" ",1),c(d,{"is-bottom":!1,"font-style":{fontWeight:"bold"},"price-data":e.discountValue.discountPrice},null,8,["price-data"])]),_:1})]),_:1})]),_:1}),c(p,{class:"title-top-market_price flex align-center"},{default:u(()=>[e.productOriginPrice&&Number(e.productOriginPrice)>Number(e.productPrice)?(s(),o(p,{key:0,class:"originalprice-box"},{default:u(()=>[n(r(e.$t("价格"))+" ",1),c(p,null,{default:u(()=>[c(d,{"is-bottom":!1,"price-data":e.productOriginPrice,"font-style":{"text-decoration":"line-through"}},null,8,["price-data"])]),_:1})]),_:1})):C("",!0),c(p,{class:"discountStock"},{default:u(()=>[c(p,null,{default:u(()=>[n(r(e.$t("剩余"))+" "+r(e.productStock),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),c(p,{class:"seckill-time-box"},{default:u(()=>[c(p,{class:"type-box"},{default:u(()=>[c(p,{class:"type-text"},{default:u(()=>[n(r(e.$t("限时折扣")),1)]),_:1})]),_:1}),c(p,{class:"countdown-box flex align-center"},{default:u(()=>[c(p,{class:"title-top-time"},{default:u(()=>[n(r(e.$t("距结束还剩")),1)]),_:1}),c(f,{"background-color":"rgba(0, 0, 0, .06)","end-time":e.discountValue.discountEndTime,"font-size":11,color:"#fff"},null,8,["end-time"])]),_:1})]),_:1})]),_:1})}}),[["__scopeId","data-v-f6f4456a"]]),rt=g(e({__name:"productComment",props:{productId:{}},emits:["change"],setup(e,{emit:t}){const v=b(!1),y=b({}),g=b([]),h=b(1),k=b(10),x=e=>{Q({url:e})},w=b([]),V=b(0);return Y(e=>{if(e){const{id:t}=e;t&&((async e=>{v.value=!0;try{const t=await De(e);y.value=t}catch(t){}finally{v.value=!1}})(t),(async e=>{v.value=!0;try{const t=await Fe(e,{type:1,page:h.value});g.value=t.records}catch(t){B({title:t.message,icon:"none"})}finally{v.value=!1}})(t),(async e=>{try{const t=await Oe({productId:e,page:h.value,size:k.value});w.value=t.records,V.value=t.total}catch(t){}finally{v.value=!1}})(t))}}),(e,t)=>{const v=I,h=i,k=l(a("uni-icons"),Je),b=f,w=l(a("uni-rate"),He);return s(),o(h,{class:"product-comment-card"},{default:u(()=>[c(h,{class:"comment-title flex justify-between align-center"},{default:u(()=>[c(h,{class:"txt"},{default:u(()=>[n(r(e.$t("评价")),1),c(v,null,{default:u(()=>[n("("+r(y.value.total??0)+")",1)]),_:1})]),_:1}),c(h,{class:"more",onClick:t[0]||(t[0]=t=>x(`/pages/product/comment?id=${e.productId}`))},{default:u(()=>[n(r(e.$t("好评")),1),c(v,null,{default:u(()=>[n(r(y.value.goodPercent??0)+"%",1)]),_:1}),c(k,{type:"right",size:"16",color:"#bfbfbf"})]),_:1})]),_:1}),g.value.length>0?(s(!0),d(_,{key:0},p(g.value.slice(0,2),(e,t)=>(s(),o(h,{key:t,class:"comment-item"},{default:u(()=>[c(h,{class:"user-info flex justify-between align-center"},{default:u(()=>[c(h,{class:"user-name flex align-center"},{default:u(()=>[c(h,{class:"head_logo"},{default:u(()=>[c(b,{src:m(j)((null==e?void 0:e.avatar)||"")},null,8,["src"])]),_:2},1024),c(h,null,{default:u(()=>[c(v,null,{default:u(()=>[n(r(e.username),1)]),_:2},1024),c(w,{readonly:!0,value:e.commentRank,size:"14",color:"#bfbfbf","active-color":"#ffa800"},null,8,["value"])]),_:2},1024)]),_:2},1024),c(h,{class:"time"},{default:u(()=>[n(r(e.addTime),1)]),_:2},1024)]),_:2},1024),c(h,{class:"user-content"},{default:u(()=>[n(r(e.content),1)]),_:2},1024),c(h,{class:"user-imgs flex-wrap align-center"},{default:u(()=>[(s(!0),d(_,null,p(e.showPics,(e,t)=>(s(),o(b,{key:t,src:m(j)(e.picThumb),onClick:t=>{return l=m(j)((null==e?void 0:e.picUrl)||""),void z({urls:[l]});var l}},null,8,["src","onClick"]))),128))]),_:2},1024)]),_:2},1024))),128)):(s(),o(h,{key:1,class:"no-data"},{default:u(()=>[n(r(e.$t("暂无评价"))+"~ ",1)]),_:1})),c(h,{class:"comment-btn-box flex align-center justify-around"},{default:u(()=>[c(h,{class:"btn flex align-center",onClick:t[1]||(t[1]=t=>x(`/pages/product/comment?id=${e.productId}`))},{default:u(()=>[c(k,{type:"chat",size:"20",color:"#333"}),c(v,null,{default:u(()=>[n(r(e.$t("全部评价"))+"("+r(y.value.total??0)+")",1)]),_:1})]),_:1}),c(h,{class:"btn flex align-center",onClick:t[2]||(t[2]=t=>x(`/pages/product/consult?id=${e.productId}`))},{default:u(()=>[c(k,{type:"chatboxes",size:"20",color:"#333"}),c(v,null,{default:u(()=>[n(r(e.$t("购买咨询"))+"("+r(V.value??0)+")",1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-2ca28625"]]),dt=g(e({__name:"productShopInfo",props:{shopInfo:{}},emits:["refreshShopDetail"],setup(e,{emit:d}){const{t:p}=D(),f=e,m=d,v=t(()=>f.shopInfo.collectShop?p("取消收藏"):p("收藏店铺")),_=()=>{f.shopInfo.collectShop?g():y()},y=async()=>{try{await Ke({shopId:f.shopInfo.shopId});B({title:p("收藏成功")}),m("refreshShopDetail",f.shopInfo.shopId)}catch(e){console.error(e)}},g=async()=>{Z({title:p("提示"),content:p("确认要取消收藏店铺吗？"),success:async e=>{if(e.confirm)try{await Ke({shopId:f.shopInfo.shopId});B({title:p("操作成功")}),m("refreshShopDetail",f.shopInfo.shopId)}catch(t){console.error(t)}}})},h=()=>{Q({url:`/pages/shop/index?shopId=${f.shopInfo.shopId}`})};return(e,t)=>{const d=l(a("tig-image"),we),p=i,f=I;return s(),o(p,{class:"shop-info-box"},{default:u(()=>[c(p,{class:"shop-info-title"},{default:u(()=>[c(p,{class:"shop-info-title-left"},{default:u(()=>[c(d,{src:e.shopInfo.shopLogo},null,8,["src"])]),_:1}),c(p,{class:"shop-info-title-right"},{default:u(()=>[n(r(e.shopInfo.shopTitle),1)]),_:1})]),_:1}),c(p,{class:"shop-info-btn"},{default:u(()=>[c(p,{class:"shop-info-btn-item",onClick:_},{default:u(()=>[n(r(v.value),1)]),_:1}),c(p,{class:"shop-info-btn-item",onClick:h},{default:u(()=>[c(f,{class:"iconfont icon-dianpu"}),n(" "+r(e.$t("进店逛逛")),1)]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-f3df869a"]]),pt=g(e({__name:"productCoupon",props:{modelValue:{type:Boolean,default:!1},promotionList:{type:Array,default:()=>[]},productId:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:f}){const{t:v}=D(),y=e;console.log(y.promotionList);const g=f,h=t({get:()=>y.modelValue,set(e){g("update:modelValue",e)}}),k={3:v("满减"),4:v("满折"),5:v("满赠")},x=t(()=>y.promotionList.filter(e=>3===e.type||4===e.type)),I=t(()=>y.promotionList.filter(e=>5===e.type)),V=(b(!1),(e,t,l)=>0===t?1===e?"已领取":l>0?"再次领取":"马上领":0===e?"马上领":l>=t?"已领取":"再次领取"),$=b([]),S=async()=>{try{const e=await Be(Number(y.productId));$.value=e}catch(e){console.error(e.message)}};return X(()=>y.productId,e=>{e&&e>0&&S()}),(e,t)=>{const f=i,y=l(a("format-price"),Te),g=l(a("tig-image"),we),b=q,P=l(a("tig-button"),Se),N=l(a("tig-fixed-placeholder"),Ye),j=l(a("tig-popup"),$e);return s(),o(j,{show:h.value,"onUpdate:show":t[1]||(t[1]=e=>h.value=e),"z-index":999,"show-close":!1,"background-color":"#fff"},{default:u(()=>[c(f,{class:"coupon-content"},{default:u(()=>[c(f,{class:"coupon-title"},{default:u(()=>[n(r(e.$t("优惠")),1)]),_:1}),c(b,{"scroll-y":"true",class:"promotion-box"},{default:u(()=>[c(f,{class:"promotion-content"},{default:u(()=>[C("",!0),x.value.length>0||I.value.length>0?(s(),o(f,{key:1,class:"activity-box"},{default:u(()=>[c(f,{class:"public-title"},{default:u(()=>[n(r(e.$t("促销")),1)]),_:1}),x.value.length>0?(s(!0),d(_,{key:0},p(x.value,e=>(s(),o(f,{key:e.promotionId,class:"activity-item"},{default:u(()=>[c(f,{class:"activity-item-label"},{default:u(()=>[n(r(k[e.type]),1)]),_:2},1024),c(f,{class:"activity-item-value"},{default:u(()=>[c(f,{class:"activity-item-name"},{default:u(()=>[n(r(e.data.promotionName),1)]),_:2},1024),c(f,{class:"activity-item-time"},{default:u(()=>{var t;return[n(r(null==(t=null==e?void 0:e.data)?void 0:t.startTime)+"~"+r(e.data.endTime),1)]}),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):C("",!0),I.value.length>0?(s(!0),d(_,{key:1},p(I.value,t=>(s(),d(_,{key:t.promotionId},[(s(!0),d(_,null,p(t.data.promotionDesc,t=>(s(),o(f,{key:t.giftId,class:"activity-item"},{default:u(()=>[c(f,{class:"activity-item-label"},{default:u(()=>[n(r(e.$t("满赠")),1)]),_:1}),c(f,{class:"activity-product"},{default:u(()=>[c(f,{class:"activity-name"},{default:u(()=>[n(r(t.desc),1)]),_:2},1024),c(b,{class:"scroll-x","scroll-x":"true"},{default:u(()=>[c(f,{class:"activity-product-item",onClick:e=>{return l=t.gift.productInfo.productId,void Q({url:`/pages/product/index?id=${l}`});var l}},{default:u(()=>[c(g,{src:t.gift.productInfo.picThumb,class:"gift-img"},null,8,["src"]),c(f,{class:"gift-price"},{default:u(()=>[c(y,{"show-text":!1,"font-style":{fontSize:"18rpx",fontWeight:"bold"},"is-bottom":!1,"price-data":t.gift.productInfo.productPrice},null,8,["price-data"])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))],64))),128)):C("",!0)]),_:1})):C("",!0),$.value.length>0?(s(),o(f,{key:2,class:"coupon-box"},{default:u(()=>[c(f,{class:"public-title"},{default:u(()=>[n(r(e.$t("可领优惠券")),1)]),_:1}),(s(!0),d(_,null,p($.value,t=>(s(),o(f,{key:t.couponId,class:"coupon-item"},{default:u(()=>[c(f,{class:"left"},{default:u(()=>[c(f,{class:"col-1"},{default:u(()=>[c(f,{class:"title"},{default:u(()=>[n(r(t.couponName),1)]),_:2},1024)]),_:2},1024),t.couponDesc?(s(),o(f,{key:0,class:"col-2"},{default:u(()=>[n(r(t.couponDesc),1)]),_:2},1024)):C("",!0),1===t.sendType?(s(),o(f,{key:1,class:w(["col-3",{"special-col":!t.couponDesc}])},{default:u(()=>[n(r(e.$t("有效期"))+"："+r(t.useEndDate),1)]),_:2},1032,["class"])):C("",!0),0===t.sendType&&t.delayDay>0?(s(),o(f,{key:2,class:w(["col-3",{"special-col":!t.couponDesc}])},{default:u(()=>[n(r(m(ee)()?e.$t("领券{0}天后生效，有效期{1}天",[t.delayDay,t.useDay]):`领券${t.delayDay}天后生效，有效期${t.useDay}天`),1)]),_:2},1032,["class"])):C("",!0),0===t.sendType&&0===t.delayDay?(s(),o(f,{key:3,class:w(["col-3",{"special-col":!t.couponDesc}])},{default:u(()=>[n(r(m(ee)()?e.$t("领券当日起{0}天内可用",[t.useDay]):`领券当日起${t.useDay}天内可用`),1)]),_:2},1032,["class"])):C("",!0)]),_:2},1024),c(f,{class:"right"},{default:u(()=>[c(f,{class:"right-1"},{default:u(()=>[2===t.couponType?(s(),d(_,{key:0},[c(f,{class:"zhekou"},{default:u(()=>[n(r(t.couponDiscount),1)]),_:2},1024),c(f,{class:"zhe"},{default:u(()=>[n(r(e.$t("折")),1)]),_:1})],64)):(s(),o(y,{key:1,"show-text":!1,"font-style":{fontSize:"48rpx",lineHeight:1,fontWeight:"400"},"currency-style":{selfAlign:"end",fontSize:"28rpx"},"price-data":t.couponMoney},null,8,["price-data"]))]),_:2},1024),"已领取"!==V(t.isReceive,t.limitNum,t.receiveNum)?(s(),o(f,{key:0,class:"right-2"},{default:u(()=>[c(f,null,{default:u(()=>[c(P,{"custom-style":{height:"55rpx"},onClick:e=>(async e=>{if(!(1===e.isReceive&&e.limitNum>0&&e.receiveNum>=e.limitNum))try{await Ze({couponId:e.couponId}),B({title:v("领取成功"),duration:1e3}),setTimeout(()=>{S()},500)}catch(t){console.log("error",t),B({title:t.message,icon:"none"})}})(t)},{default:u(()=>[n(r(V(t.isReceive,t.limitNum,t.receiveNum)),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)):(s(),o(f,{key:1,class:"already-received-box"},{default:u(()=>[c(f,{class:"already-received-content"},{default:u(()=>[c(f,{class:"already-received-text"},{default:u(()=>[n(r(V(t.isReceive,t.limitNum,t.receiveNum)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))]),_:2},1024),c(f,{class:"dotted-line"})]),_:2},1024))),128))]),_:1})):C("",!0),c(N,{"background-color":"#fff"},{default:u(()=>[c(f,{class:"btn-box"},{default:u(()=>[c(P,{onClick:t[0]||(t[0]=t=>e.$emit("update:modelValue",!1))},{default:u(()=>[n(r(e.$t("我知道了")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),[["__scopeId","data-v-c83663eb"]]),ft=g(e({__name:"afterSaleService",props:{id:{type:[String,Number],default:""}},setup(e){const t=e,l=b({});return te(()=>{t.id&&(async e=>{try{const t=await Re(e);Object.assign(l.value,t)}catch(t){B({title:t.message,icon:"none"})}})(t.id)}),(e,t)=>{const a=le,n=i;return s(),o(n,null,{default:u(()=>[c(n,{class:"tab_body"},{default:u(()=>[c(a,{nodes:l.value.templateContent},null,8,["nodes"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-1aab8d0a"]]),mt=g(e({__name:"productContent",props:{descArr:{type:Array,default:()=>[]},productId:{type:Number,default:0},productType:{type:Number,default:1},isBuy:{type:Number,default:0},paidContent:{type:Array,default:()=>[]}},setup(e){const t=b(0);return(l,a)=>{const y=i,g=f,h=le;return s(),o(y,{class:"product-card-row product-detail-area"},{default:u(()=>[c(y,{class:"tab-box flex align-center justify-around"},{default:u(()=>[c(y,{class:w(["tab",{active:0==t.value}]),onClick:a[0]||(a[0]=e=>t.value=0)},{default:u(()=>[n(r(l.$t("商品介绍")),1)]),_:1},8,["class"]),c(y,{class:w(["tab",{active:1==t.value}]),onClick:a[1]||(a[1]=e=>t.value=1)},{default:u(()=>[n(r(l.$t("售后服务")),1)]),_:1},8,["class"])]),_:1}),0==t.value?(s(),o(y,{key:0,class:"default"},{default:u(()=>[m(ae)()&&4===e.productType?(s(),d(_,{key:0},[1===e.isBuy&&e.paidContent?(s(!0),d(_,{key:0},p(e.paidContent,(e,t)=>(s(),d(_,{key:t},["pic"==e.type?(s(),o(y,{key:0,class:"desc-pic-item"},{default:u(()=>[c(g,{"lazy-load":"",src:m(j)((null==e?void 0:e.pic)||""),class:"slide-image",mode:"widthFix"},null,8,["src"])]),_:2},1024)):C("",!0),"text"==e.type?(s(),o(h,{key:1,class:"desc-text-item",nodes:m(oe)(e.html)},null,8,["nodes"])):C("",!0)],64))),128)):(s(),o(g,{key:1,class:"img",src:m(v)("product/paid_content_bg.png"),mode:"widthFix"},null,8,["src"]))],64)):C("",!0),(s(!0),d(_,null,p(e.descArr,(e,t)=>(s(),d(_,{key:t},["pic"==e.type?(s(),o(y,{key:0,class:"desc-pic-item"},{default:u(()=>[c(g,{"lazy-load":"",src:m(j)((null==e?void 0:e.pic)||""),class:"slide-image",mode:"widthFix"},null,8,["src"])]),_:2},1024)):C("",!0),"text"==e.type?(s(),o(h,{key:1,class:"desc-text-item",nodes:m(oe)(e.html)},null,8,["nodes"])):C("",!0)],64))),128))]),_:1})):C("",!0),P(c(y,{class:"default"},{default:u(()=>[c(ft,{id:e.productId},null,8,["id"])]),_:1},512),[[T,1==t.value]])]),_:1})}}}),[["__scopeId","data-v-bd2ad8d7"]]),vt=g(e({__name:"animation",props:se({animationPosition:{},styleVariable:{}},{modelValue:{default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(e){h(e=>({"308cbeac":t.animationPosition.top+"px","15ec9c58":t.animationPosition.left+"px"}));const t=e,l=ue(e,"modelValue"),a=()=>{l.value=!1};return(e,t)=>{const n=i;return s(),o(n,{class:w(["animation-box",{animation:l.value}]),style:x({...e.styleVariable})},{default:u(()=>[c(n,{class:"animation-content",onAnimationend:a})]),_:1},8,["class","style"])}}}),[["__scopeId","data-v-ff3fea6d"]]),_t=g(e({__name:"error",setup(e){const t=()=>{y({url:"/pages/index/index"}),console.log("Redirecting to home page")};return(e,l)=>{const a=i;return s(),o(a,{class:"error-page"},{default:u(()=>[c(a,{class:"error-content"},{default:u(()=>[c(a,{class:"error-image"}),c(a,{class:"error-text"},{default:u(()=>[n(r(e.$t("页面失效")),1)]),_:1}),c(a,{class:"error-btn-box"},{default:u(()=>[c(a,{theme:"",class:"error-btn",onClick:t},{default:u(()=>[n(r(e.$t("进店逛逛")),1)]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-4bf9452b"]]),yt=g(e({__name:"index",setup(e){const g=K(),{scrollTop:h}=Ce(),w=b(0),V=b(!1),$=k(),N=b(),L=b(0),U=b({top:0,left:0}),z=b(),D=b(""),O=b(0),B=()=>{V.value=!0},M=()=>{N.value&&N.value.handleShowPopup()},W=b({productId:0,productStock:0}),A=b({}),E=b([]),J=b([]),X=b([]),G=b({}),Z=b([]),ee=b([]),te=b([]),le=b(!1),ae=b(!0),oe=()=>{ae.value=!1},se=b({}),ue=async e=>{try{const t=await Xe(e);se.value=t}catch(t){console.error(t)}},Se=e=>{ue(e)},Te=()=>{se.value.shopId&&Q({url:`/pages/shop/index?shopId=${se.value.shopId}`})},Le=b(""),Ue=b("0"),ze=b("0"),De=b(0),Fe=b(0),Oe=b({}),Be=b(1),Re=b([]),We=b(0),Ae=b({}),Ee=b(""),Je=e=>{e.productSkuId&&e.skuStr&&(Le.value=e.skuStr),De.value=e.productStock,Re.value=e.promotionList,Ue.value=e.productPrice,ze.value=e.productOriginPrice,Be.value=e.productNumber,Fe.value=e.isSeckill,Oe.value=e.seckillValue,We.value=e.isDiscount,Ae.value=e.discountValue,Ee.value=e.discountEndTime},He=b(0),Ke=async()=>{try{const e=await tt();He.value=e}catch(e){}},Ye=b(!1),Ze=t(()=>{if(A.value.normal&&A.value.normal.length){return A.value.normal.map(e=>e.attrName).join("/")}return""}),lt=()=>{ke({url:"/pages/index/index"})},st=()=>{Q({url:"/pages/search/result"})},ut=S(),ft=b(F()),yt=e=>{const t=be().in(ut);t.select(e).boundingClientRect(),t.selectViewport().scrollOffset(()=>{}),t.exec(e=>{xe({scrollTop:e[0].top+e[1].scrollTop-50,duration:0})})},gt=b(".product-area");let ht,kt,bt;const xt=(e,t)=>{e.relativeToViewport({bottom:-(ft.value.windowHeight-200)}).observe(t,e=>{e.intersectionRatio>0&&(gt.value=t)})};ce(()=>{ht=ie(ut),kt=ie(ut),bt=ie(ut),xt(ht,".product-area"),xt(kt,".evaluate-area"),xt(bt,".product-detail-area")}),ne(()=>{ht&&ht.disconnect(),ht=null,kt&&kt.disconnect(),kt=null,bt&&bt.disconnect(),bt=null,re()});const It=b(0);Y(e=>{e&&(e.type&&(D.value=e.type),e.id&&(async e=>{try{let t={};"exchange"===D.value?(t=await Ge(e),O.value=t.exchangeInfo.exchangeIntegral,De.value=t.exchangeInfo.productStock,Ue.value=t.exchangeInfo.discountsPrice||"0",L.value=t.exchangeInfo.id):(t=await Me(e),De.value=t.item.productStock,Ue.value=t.item.productPrice||"0",L.value=t.item.productId),w.value=t.item.productId,W.value=t.item,A.value=t.attrList,J.value=t.picList,te.value=t.videoList,G.value=t.rankDetail,E.value=t.skuList,ee.value=t.checkedValue,Z.value=t.descArr,X.value=t.serviceList,me({title:t.item.productName}),t.item.shopId&&ue(t.item.shopId),ve(()=>{var e;null==(e=z.value)||e.handleLog()})}catch(t){console.error(t),le.value=!0,ae.value=!1}})(Number(e.id)),e.skuId&&(It.value=Number(e.skuId)),e.salesmanId&&((e,t)=>{let l=R("salesmanProducts")||[];if(l.length>0){const a=l.findIndex(e=>e.productId==t);-1!==a&&(l[a].salesmanId=e)}l=[...l,{salesmanId:e,productId:t}],_e("salesmanProducts",l)})(e.salesmanId,e.id))}),de(()=>{Ke()});const wt=b(!1),Vt=async e=>{await Ct(".cart-position"),await $t(".cart"),wt.value=e,Ke()},$t=async e=>{const t=await Ie(e);if(t){const{width:e,height:l,top:a,left:o}=t;U.value.top=a-l/2,U.value.left=o+e/2}},St=b({left:0,top:0}),Ct=async e=>{const t=await Ie(e);if(t){const{width:e,height:l,top:a,left:o}=t;St.value.top=a-l/2,St.value.left=o+e/2}},Pt=t(()=>({"--x":St.value.left-U.value.left+"px","--y":"8px"}));pe(()=>({title:W.value.productName,imageUrl:j(W.value.picUrl)})),fe(()=>({title:W.value.productName,imageUrl:j(W.value.picUrl)}));const Nt=t(()=>Object.keys(se.value).length>0?!!(se.value.kefuInlet&&se.value.kefuInlet.length>0&&se.value.kefuInlet.includes(1)):g.serviceConfig.show);return(e,t)=>{const g=i,k=I,b=f,S=l(a("tig-image"),we),j=l(a("uni-badge"),Ve),F=q,R=l(a("tig-popup"),$e),E=l(a("tig-back-top"),Ne),K=l(a("tig-layout"),Pe),G=l(a("tig-loadingpage"),je);return s(),o(g,null,{default:u(()=>[c(K,{ref_key:"layoutRef",ref:z,"immediate-log":!1,"product-id":w.value,"shop-id":W.value.shopId},{default:u(()=>[le.value?(s(),d(_,{key:1},[c(_t),c(et,{"title-bg":"#fff"})],64)):P((s(),o(g,{key:0},{default:u(()=>[c(at,{modelValue:m(h),"onUpdate:modelValue":t[0]||(t[0]=e=>ye(h)?h.value=e:null),"active-module":gt.value,"onUpdate:activeModule":t[1]||(t[1]=e=>gt.value=e),event:yt},null,8,["modelValue","active-module"]),c(ot,{class:"product-area","video-list":te.value,"pic-list":J.value,"product-info":W.value,"seckill-value":Oe.value},null,8,["video-list","pic-list","product-info","seckill-value"]),Fe.value?(s(),o(it,{key:0,"product-info":W.value,"product-origin-price":ze.value,"product-price":Ue.value,"seckill-value":Oe.value},null,8,["product-info","product-origin-price","product-price","seckill-value"])):C("",!0),We.value?(s(),o(nt,{key:1,"product-info":W.value,"product-origin-price":ze.value,"product-price":Ue.value,"discount-value":Ae.value,"product-stock":De.value},null,8,["product-info","product-origin-price","product-price","discount-value","product-stock"])):C("",!0),c(g,{class:"productDetail-content",style:x({"padding-bottom":(0===W.value.productStatus||0===De.value?160:100)+"rpx"})},{default:u(()=>[c(ct,{"show-coupon":Ye.value,"onUpdate:showCoupon":t[2]||(t[2]=e=>Ye.value=e),"is-seckill":Fe.value,"promotion-list":Re.value,"product-info":W.value,"product-price":Ue.value,"is-discount":We.value,type:D.value,"exchange-integral":O.value},null,8,["show-coupon","is-seckill","promotion-list","product-info","product-price","is-discount","type","exchange-integral"]),c(g,{class:"product-card-row"},{default:u(()=>{var t;return[c(g,{class:"cart-item flex align-center justify-between",onClick:M},{default:u(()=>[c(g,{class:"flex align-center"},{default:u(()=>[c(g,{class:"title"},{default:u(()=>[n(r(e.$t("规格")),1)]),_:1}),c(g,{class:"label"},{default:u(()=>{var t;return[m(ge)()&&(null==(t=A.value.spe)?void 0:t.length)>0?(s(!0),d(_,{key:0},p(A.value.spe,t=>(s(),o(k,{key:t},{default:u(()=>[n(r(t.attrList.length+e.$t("种")+e.$t(t.attrName)),1)]),_:2},1024))),128)):(s(),d(_,{key:1},[n(r(e.$t(Le.value))+" "+r(e.$t(Be.value))+" "+r(e.$t("件")),1)],64))]}),_:1})]),_:1}),c(g,null,{default:u(()=>[c(b,{class:"icon-image",src:m(v)("common/more.png")},null,8,["src"])]),_:1})]),_:1}),m($).showSelledCount||(null==(t=A.value.normal)?void 0:t.length)>0||1===W.value.fixedShippingType||X.value.length>0?(s(),o(g,{key:0,class:"card-row-flex"},{default:u(()=>{var t;return[m($).showSelledCount?(s(),o(g,{key:0,class:"cart-item flex align-center justify-between"},{default:u(()=>[c(g,{class:"flex align-center"},{default:u(()=>[c(g,{class:"title"},{default:u(()=>[n(r(e.$t("销量")),1)]),_:1}),c(g,{class:"label"},{default:u(()=>[n(r(W.value.virtualSales)+" "+r(e.$t("件")),1)]),_:1})]),_:1})]),_:1})):C("",!0),(null==(t=A.value.normal)?void 0:t.length)>0?(s(),o(g,{key:1,class:"cart-item flex align-center justify-between",onClick:B},{default:u(()=>[c(g,{class:"flex align-center"},{default:u(()=>[c(g,{class:"title"},{default:u(()=>[n(r(e.$t("参数")),1)]),_:1}),c(g,{class:"label attr_text line1"},{default:u(()=>[c(g,{class:"shuxin"},{default:u(()=>[n(r(e.$t(Ze.value)),1)]),_:1})]),_:1})]),_:1}),c(g,null,{default:u(()=>[c(b,{class:"icon-image",":src":m(v)("common/more.png")},null,8,[":src"])]),_:1})]),_:1})):C("",!0),1===W.value.fixedShippingType&&0==Number(W.value.fixedShippingFee)?(s(),o(g,{key:2,class:"cart-item flex align-center justify-between"},{default:u(()=>[c(g,{class:"flex align-center"},{default:u(()=>[c(g,{class:"title"},{default:u(()=>[n(r(e.$t("运费")),1)]),_:1}),c(g,{class:"label attr_text line1"},{default:u(()=>[c(g,{class:"shuxin"},{default:u(()=>[n(r(e.$t("包邮")),1)]),_:1})]),_:1})]),_:1}),c(g,null,{default:u(()=>[c(b,{class:"icon-image",":src":m(v)("common/more.png")},null,8,[":src"])]),_:1})]),_:1})):C("",!0),X.value.length>0?(s(),o(g,{key:3,class:"cart-item"},{default:u(()=>[c(g,{class:"flex"},{default:u(()=>[c(g,{class:"title"},{default:u(()=>[n(r(e.$t("服务")),1)]),_:1}),c(g,{class:"label flex-wrap align-center servicelist"},{default:u(()=>[(s(!0),d(_,null,p(X.value,(e,t)=>(s(),d("span",{key:t,class:"flex align-center service-item"},[e.icoImg?(s(),o(S,{key:0,style:{width:"15px",height:"15px"},src:e.icoImg},null,8,["src"])):C("",!0),n(r(e.productServiceName),1)]))),128))]),_:1})]),_:1})]),_:1})):C("",!0)]}),_:1})):C("",!0)]}),_:1}),Object.keys(se.value).length>0&&m(he)()?(s(),o(dt,{key:0,"shop-info":se.value,onRefreshShopDetail:Se},null,8,["shop-info"])):C("",!0),c(rt,{class:"evaluate-area","product-id":W.value.productId},null,8,["product-id"]),c(mt,{"is-buy":W.value.isBuy,"paid-content":W.value.paidContent,"product-type":W.value.productType,"desc-arr":Z.value,"product-id":W.value.productId,class:"product-detail-area"},null,8,["is-buy","paid-content","product-type","desc-arr","product-id"])]),_:1},8,["style"]),4!==W.value.productType||1!==W.value.isBuy?(s(),o(g,{key:2,style:x({"padding-bottom":m($).safeBottom+"rpx"}),class:"bottom-bar-box"},{default:u(()=>[c(g,{class:"bottom-bar flex align-center"},{default:u(()=>[c(g,{class:"icon-box"},{default:u(()=>[se.value.shopId?(s(),o(g,{key:0,class:"label",onClick:Te},{default:u(()=>[c(g,null,{default:u(()=>[c(b,{src:m(v)("product/shop.png"),class:"img"},null,8,["src"])]),_:1}),c(g,{class:"label-text"},{default:u(()=>[c(k,null,{default:u(()=>[n(r(e.$t("店铺")),1)]),_:1})]),_:1})]),_:1})):(s(),o(g,{key:1,class:"label",onClick:lt},{default:u(()=>[c(g,null,{default:u(()=>[c(b,{mode:"widthFix",src:m(v)("product/home.png"),class:"img"},null,8,["src"])]),_:1}),c(g,{class:"label-text"},{default:u(()=>[c(k,null,{default:u(()=>[n(r(e.$t("首页")),1)]),_:1})]),_:1})]),_:1})),Nt.value?(s(),o(g,{key:2,class:"label"},{default:u(()=>[c(qe,{phone:se.value.kefuPhone,"product-id":w.value,"shop-id":se.value.shopId},{default:u(()=>[c(g,null,{default:u(()=>[c(b,{mode:"widthFix",src:m(v)("product/service.png"),class:"img"},null,8,["src"])]),_:1}),c(g,{class:"label-text"},{default:u(()=>[c(k,null,{default:u(()=>[n(r(e.$t("客服")),1)]),_:1})]),_:1})]),_:1},8,["phone","product-id","shop-id"])]),_:1})):C("",!0),c(g,{class:"label cart-position",onClick:t[3]||(t[3]=H(e=>{y({url:"/pages/cart/cartJump"})},["stop"]))},{default:u(()=>[c(g,null,{default:u(()=>[c(j,{class:"uni-badge-left-margin badgecolor",text:He.value,absolute:"rightTop",size:"small"},{default:u(()=>[c(b,{mode:"widthFix",src:m(v)("product/cart.png"),class:"img"},null,8,["src"])]),_:1},8,["text"])]),_:1}),c(g,{class:"label-text"},{default:u(()=>[c(k,null,{default:u(()=>[n(r(e.$t("购物车")),1)]),_:1})]),_:1})]),_:1})]),_:1}),c(g,{class:"btn-box"},{default:u(()=>[0===W.value.productStatus||0===De.value?(s(),o(g,{key:0,class:"other-products-btn",onClick:st},{default:u(()=>[n(r(e.$t("查看其他商品")),1)]),_:1})):(s(),d(_,{key:1},["exchange"===D.value?(s(),o(g,{key:0,class:"other-products-btn",onClick:M},{default:u(()=>[n(r(e.$t("立即兑换")),1)]),_:1})):(s(),d(_,{key:1},[1===W.value.productType?(s(),d(_,{key:0},[c(g,{class:"btn cart",onClick:M},{default:u(()=>[n(r(e.$t("加入购物车")),1)]),_:1}),c(g,{class:"btn buy",onClick:M},{default:u(()=>[n(r(e.$t("立即购买")),1)]),_:1})],64)):(s(),o(g,{key:1,class:"other-products-btn",onClick:M},{default:u(()=>[n(r(e.$t("立即购买")),1)]),_:1}))],64))],64))]),_:1}),0===W.value.productStatus||0===De.value?(s(),o(g,{key:0,class:"product-status"},{default:u(()=>[n(r(e.$t(0===W.value.productStatus?"商品已下架":"商品已售罄")),1)]),_:1})):C("",!0)]),_:1})]),_:1},8,["style"])):C("",!0),c(Qe,{ref_key:"specificationRef",ref:N,modelValue:L.value,"onUpdate:modelValue":t[4]||(t[4]=e=>L.value=e),"sku-id":It.value,"onUpdate:skuId":t[5]||(t[5]=e=>It.value=e),type:D.value,onLoadEnd:oe,onAddCardSucceed:Vt,onSendValue:Je},null,8,["modelValue","sku-id","type"]),c(pt,{modelValue:Ye.value,"onUpdate:modelValue":t[6]||(t[6]=e=>Ye.value=e),"product-id":Number(w.value),"promotion-list":Re.value},null,8,["modelValue","product-id","promotion-list"]),c(R,{show:V.value,"onUpdate:show":t[7]||(t[7]=e=>V.value=e)},{default:u(()=>[c(F,{"scroll-y":"true",class:"attr_table-box"},{default:u(()=>[c(g,{class:"popup-title title"},{default:u(()=>[n(r(e.$t("规格参数")),1)]),_:1}),c(g,{class:"attr_table"},{default:u(()=>[(s(!0),d(_,null,p(A.value.normal,(t,l)=>(s(),o(g,{key:l,class:"item flex"},{default:u(()=>[c(g,{class:"lable"},{default:u(()=>[n(r(e.$t(t.attrName)),1)]),_:2},1024),(s(!0),d(_,null,p(t.attrList,(e,t)=>(s(),o(g,{key:t,class:"value"},{default:u(()=>[n(r(e.attrValue),1)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["show"]),c(E,{"scroll-top":m(h)},null,8,["scroll-top"]),c(vt,{modelValue:wt.value,"onUpdate:modelValue":t[8]||(t[8]=e=>wt.value=e),"style-variable":Pt.value,"animation-position":U.value},null,8,["modelValue","style-variable","animation-position"])]),_:1},512)),[[T,!ae.value]])]),_:1},8,["product-id","shop-id"]),c(G,{modelValue:ae.value,"onUpdate:modelValue":t[9]||(t[9]=e=>ae.value=e)},null,8,["modelValue"])]),_:1})}}}),[["__scopeId","data-v-38f6d949"]]);export{yt as default};
