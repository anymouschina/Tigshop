import{d as e,j as a,r as l,ay as t,K as s,l as u,aa as r,ab as c,k as i,c as o,w as d,B as n,E as p,c3 as f,c4 as m,o as v,g as _,i as y,I as h,a as k,J as b,h as g,f as x,t as $,X as I,O as A,N as C,ak as w,F as S,ae as j,Q as D,n as N,bb as T,_ as F}from"./index-BcyAKDDV.js";import{_ as P}from"./uni-steps.OJZXb1De.js";import{_ as O}from"./uni-icons.CtiPjGAO.js";import{_ as q,a as z}from"./tig-layout.DHsvU4xy.js";import{_ as R}from"./tig-image.lWnA30Ud.js";import{_ as E}from"./format-price.csRf0ax_.js";import{_ as G}from"./tig-fixed-placeholder.BvTFztLB.js";import{_ as W}from"./index.vue_vue_type_script_setup_true_lang.DrbG3ThL.js";import{g as B,f as J,c as K,e as Q}from"./order.DielggEZ.js";const V=F(e({__name:"info",setup(e){const F=a(),V=l(null),X=()=>{V.value&&V.value.handleClick()},H=t(),{t:L}=s(),M=l({0:L("您的订单已提交成功，请尽快完成付款哦！"),1:L("感谢您在本店的购物，您的订单已提交成功，我们会尽快为您发货！"),2:L("您的订单已经发货，请注意查收，祝您购物愉快！"),3:L('您的订单已被取消，您可以通过"再次购买"，重新购买订单中的商品。'),4:L('您的订单被认定为无效订单，订单已被关闭。您可以通过"再次购买"，重新购买订单中的商品。给您造成的不便请多多谅解！'),5:L("您的订单已经确认收货，感谢您在本店购物，祝您生活愉快！")}),U=l({}),Y=l(!1),Z=l();u(e=>{if(e&&e.id){Z.value=e.id;try{r({title:L("加载中")}),Promise.all([ee(),te()])}catch(a){console.error(a)}}});const ee=async()=>{try{const e=await B({id:Z.value});U.value=e}catch(e){console.error(e)}},ae=l([]),le=l(""),te=async()=>{try{const e=await J({id:Z.value});e&&(Array.isArray(e)?ae.value=e:ae.value=e.traces??[])}catch(e){console.error(e)}finally{c()}},se=e=>{N(e?{url:`/pages/user/afterSale/edit?itemId=${e}&orderId=${U.value.orderId}`}:{url:`/pages/user/afterSale/edit?orderId=${U.value.orderId}`})},ue=e=>{N({url:`/pages/product/index?id=${e}`})},re=e=>{T(e,()=>{D({title:L("复制成功"),icon:"none"})})},ce=i(()=>U.value.shop&&Object.keys(U.value.shop).length>0?!!(U.value.shop.kefuInlet&&U.value.shop.kefuInlet.length>0&&U.value.shop.kefuInlet.includes(2)):H.serviceConfig.show);return(e,a)=>{const l=n(p("uni-steps"),P),t=y,s=g,u=n(p("up-steps-item"),f),r=n(p("up-steps"),m),c=n(p("uni-icons"),O),i=n(p("tig-button"),z),T=n(p("tig-image"),R),B=n(p("format-price"),E),J=w,H=n(p("tig-fixed-placeholder"),G),Z=n(p("tig-layout"),q);return v(),o(Z,{title:"我的订单"},{default:d(()=>[_(t,{class:"order-info"},{default:d(()=>[Object.keys(U.value).length?(v(),h(b,{key:0},[_(t,{class:"order-info-steps"},{default:d(()=>[_(l,{"active-color":"var(--general)",options:U.value.stepStatus.steps,active:U.value.stepStatus.current},null,8,["options","active"])]),_:1}),_(t,{class:"order-info-content"},{default:d(()=>[_(t,{class:"order-card card-space"},{default:d(()=>[_(t,{class:"order-card-item flex justify-between"},{default:d(()=>[_(t,{class:"item-left"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("订单编号"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(U.value.orderSn),1)]),_:1})]),_:1}),_(t,{class:"item-right"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("订单状态"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(U.value.orderStatusName),1)]),_:1})]),_:1})]),_:1}),_(t,{class:"order-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("下单时间"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(U.value.addTime),1)]),_:1})]),_:1}),U.value.autoDeliveryDays?(v(),o(t,{key:0,class:"order-card-item"},{default:d(()=>[x("订单将在"+$(U.value.autoDeliveryDays)+"天后自动收货",1)]),_:1})):(v(),o(t,{key:1,class:"order-card-item"},{default:d(()=>[x($(M.value[U.value.orderStatus]),1)]),_:1}))]),_:1}),!U.value.orderId||2!==U.value.orderStatus&&5!==U.value.orderStatus?k("",!0):(v(),o(t,{key:0,class:"expressage-card card-space"},{default:d(()=>[0===ae.value.length?(v(),o(t,{key:0,class:"shippingInfo-title"},{default:d(()=>[x($(e.$t("物流信息")),1)]),_:1})):k("",!0),_(t,{class:"expressage-box"},{default:d(()=>[_(t,{class:"expressage-info"},{default:d(()=>[_(t,{class:""},{default:d(()=>[x($(U.value.logisticsName),1)]),_:1}),_(t,{class:""},{default:d(()=>[x($(U.value.trackingNo),1)]),_:1})]),_:1}),_(t,{class:"copy-btn",onClick:a[0]||(a[0]=e=>re(U.value.trackingNo))},{default:d(()=>[x($(e.$t("复制")),1)]),_:1})]),_:1}),ae.value.length>0?(v(),o(t,{key:1,class:"shippingInfo-box"},{default:d(()=>[_(t,{class:I(["shippingInfo-box-content",{dim:!Y.value,"more-height":Y.value}])},{default:d(()=>[_(r,{current:0,dot:"","active-color":"var(--general)",direction:"column"},{default:d(()=>[(v(!0),h(b,null,A(ae.value,(e,a)=>(v(),o(u,{key:a,title:e.acceptStation,desc:e.acceptTime},null,8,["title","desc"]))),128))]),_:1})]),_:1},8,["class"]),_(t,{class:"shippingInfo-btn",onClick:a[1]||(a[1]=e=>Y.value=!Y.value)},{default:d(()=>[x($(Y.value?e.$t("收起"):e.$t("展开")),1),_(c,{class:I(["btn-icon",{rotate:Y.value}]),type:"down",size:"18",color:"#999"},null,8,["class"])]),_:1})]),_:1})):(v(),o(t,{key:2,class:"emptyText"},{default:d(()=>[x($(le.value),1)]),_:1}))]),_:1})),_(t,{class:"pay-card card-space"},{default:d(()=>[_(t,{class:"pay-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("收货信息"))+"：",1)]),_:1}),_(s,{class:"address-text"},{default:d(()=>[x($(U.value.userAddress+" "+U.value.consignee+" "+U.value.mobile),1)]),_:1})]),_:1}),U.value.shippingTypeName?(v(),o(t,{key:0,class:"pay-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("配送方式"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(U.value.shippingTypeName),1)]),_:1})]),_:1})):k("",!0),_(t,{class:"pay-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("支付方式"))+"：",1)]),_:1}),_(s,null,{default:d(()=>[x($(1===U.value.payTypeId?e.$t("在线支付"):2===U.value.payTypeId?e.$t("货到付款"):e.$t("线下支付")),1)]),_:1})]),_:1}),ce.value?(v(),o(t,{key:1,class:"pay-card-item im-btn"},{default:d(()=>[_(W,{ref_key:"serviceRef",ref:V,phone:U.value.shop&&U.value.shop.kefuPhone?U.value.shop.kefuPhone:"","order-id":U.value.orderId,"shop-id":U.value.shopId},{default:d(()=>[_(i,{plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:X},{default:d(()=>[x($(e.$t("联系客服")),1)]),_:1})]),_:1},8,["phone","order-id","shop-id"])]),_:1})):k("",!0)]),_:1}),_(t,{class:"product-card card-space"},{default:d(()=>[(v(!0),h(b,null,A(U.value.items,l=>(v(),o(t,{key:l.productId,class:"item-box"},{default:d(()=>[U.value.shop?(v(),o(t,{key:0,class:"shop-info",onClick:a[2]||(a[2]=C(e=>{var a,l;return l=null==(a=U.value.shop)?void 0:a.shopId,void N({url:`/pages/shop/index?shopId=${l}`})},["stop"]))},{default:d(()=>[_(s,{class:"text"},{default:d(()=>{var e;return[x($(null==(e=U.value.shop)?void 0:e.shopTitle),1)]}),_:1}),_(s,{class:"iconfont icon-xiangyou"})]),_:1})):k("",!0),_(t,{class:"product-card-item"},{default:d(()=>[_(t,{class:"product-card-item-left",onClick:e=>ue(l.productId)},{default:d(()=>[_(t,{class:"left-img"},{default:d(()=>[_(T,{src:l.picThumb},null,8,["src"]),1===l.isGift?(v(),o(t,{key:0,class:"gift-text"},{default:d(()=>[x($(e.$t("赠品")),1)]),_:1})):k("",!0)]),_:2},1024)]),_:2},1032,["onClick"]),_(t,{class:"product-card-item-right",onClick:e=>ue(l.productId)},{default:d(()=>[_(t,{class:"right-title line2"},{default:d(()=>[_(s,null,{default:d(()=>[x($(l.productName),1)]),_:2},1024)]),_:2},1024),_(t,{class:I(["sku-card",{nodata:!l.skuData||0===l.skuData.length}])},{default:d(()=>[l.skuData&&l.skuData.length>0?(v(!0),h(b,{key:0},A(l.skuData,(e,a)=>(v(),o(t,{key:a,class:"sku-item line1"},{default:d(()=>[x($(e.value),1)]),_:2},1024))),128)):k("",!0)]),_:2},1032,["class"]),l.extraSkuData&&l.extraSkuData.length?(v(),o(t,{key:0,class:"extraskudata-box"},{default:d(()=>[_(t,{class:"extraskudata"},{default:d(()=>[(v(!0),h(b,null,A(l.extraSkuData,e=>(v(),o(t,{key:e,class:"extraskudata-item"},{default:d(()=>[_(t,{class:"title"},{default:d(()=>[x($(e.attrName),1)]),_:2},1024),_(t,{class:"line-box"},{default:d(()=>[_(t,{class:"line"})]),_:1}),_(t,{class:"content"},{default:d(()=>[_(s,{class:"line1 content-text"},{default:d(()=>[x($(e.attrValue),1)]),_:2},1024),_(B,{"show-text":!1,class:"price","price-data":e.attrPrice},null,8,["price-data"]),_(t,{class:"num"},{default:d(()=>[x("x"+$(l.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):k("",!0),_(t,{class:"right-price"},{default:d(()=>[_(B,{"show-text":!1,class:"right-price-pricenum","decimals-style":{fontSize:"23rpx",fontWeight:"bold"},"currency-style":{fontSize:"21rpx",fontWeight:"bold"},"price-data":l.price},null,8,["price-data"]),_(t,{class:"right-price-quantity"},{default:d(()=>[x("x "+$(l.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),2===U.value.payStatus&&0===l.isGift?(v(),o(t,{key:0,class:"item-btn"},{default:d(()=>[l.aftersalesItem?(v(),o(i,{key:0,plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:e=>{return a=l.aftersalesItem.aftersaleId,void N({url:`/pages/user/afterSale/info?id=${a}`});var a}},{default:d(()=>[x($(e.$t("售后详情")),1)]),_:2},1032,["onClick"])):U.value.availableActions.toAftersales?(v(),o(i,{key:1,plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:e=>se(l.itemId)},{default:d(()=>[x($(e.$t("申请售后")),1)]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)):k("",!0)]),_:2},1024),8===U.value.orderType&&l.eCard.length>0?(v(),o(t,{key:1,class:"virtualsample-box"},{default:d(()=>[(v(!0),h(b,null,A(l.eCard,a=>(v(),o(t,{key:a},{default:d(()=>[_(t,{class:"virtualsample-item"},{default:d(()=>[_(t,{class:"virtualsample-item-con"},{default:d(()=>[_(t,{class:"label"},{default:d(()=>[x($(e.$t("卡号"))+"：",1)]),_:1}),_(t,{class:"value"},{default:d(()=>[x($(a.cardNumber),1)]),_:2},1024)]),_:2},1024),_(t,{class:"virtualsample-item-con"},{default:d(()=>[_(t,{class:"label"},{default:d(()=>[x($(e.$t("卡密"))+"：",1)]),_:1}),_(t,{class:"value"},{default:d(()=>[x($(a.cardPwd),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),_(t,{class:"virtualsample-btn"},{default:d(()=>[_(t,null,{default:d(()=>[_(i,{plain:!0,color:"#333","custom-style":{height:"55rpx"},onClick:e=>re(`卡号：${a.cardNumber}  卡密：${a.cardPwd}`)},{default:d(()=>[x($(e.$t("复制")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)):k("",!0)]),_:2},1024))),128))]),_:1}),6===U.value.orderType&&U.value.items[0].virtualSample?(v(),o(t,{key:1,class:"virtualsample card-space"},{default:d(()=>[_(t,{class:"virtualsample-label"},{default:d(()=>[x($(e.$t("虚拟内容"))+"：",1)]),_:1}),_(t,{class:"virtualsample-value"},{default:d(()=>[_(J,{class:"desc-text-item",nodes:U.value.items[0].virtualSample},null,8,["nodes"])]),_:1})]),_:1})):k("",!0),_(t,{class:"money-card card-space"},{default:d(()=>[_(t,{class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("商品总价"))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":U.value.productAmount},null,8,["price-data"])]),_:1}),U.value.serviceFee&&U.value.serviceFee>0?(v(),o(t,{key:0,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("附加费用"))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":U.value.serviceFee},null,8,["price-data"])]),_:1})):k("",!0),U.value.shippingFee&&U.value.shippingFee>0?(v(),o(t,{key:1,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("运费"))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":U.value.shippingFee},null,8,["price-data"])]),_:1})):k("",!0),U.value.balance&&U.value.balance>0?(v(),o(t,{key:2,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("使用余额"))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":U.value.balance},null,8,["price-data"])]),_:1})):k("",!0),U.value.pointsAmount&&U.value.pointsAmount>0?(v(),o(t,{key:3,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t(`使用${S(F).integralName}`))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":U.value.pointsAmount},null,8,["price-data"])]),_:1})):k("",!0),U.value.couponAmount&&U.value.couponAmount>0?(v(),o(t,{key:4,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("优惠券"))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":U.value.couponAmount},null,8,["price-data"])]),_:1})):k("",!0),U.value.discountAmount&&U.value.discountAmount>0?(v(),o(t,{key:5,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("其他优惠"))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":U.value.discountAmount},null,8,["price-data"])]),_:1})):k("",!0),U.value.unpaidAmount&&U.value.unpaidAmount>0?(v(),o(t,{key:6,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("待支付金额"))+"：",1)]),_:1}),_(B,{"show-text":!1,"is-bottom":!1,"price-data":U.value.unpaidAmount},null,8,["price-data"])]),_:1})):k("",!0),2==U.value.payStatus?(v(),o(t,{key:7,class:"money-card-item"},{default:d(()=>[_(s,{class:"order-item-label"},{default:d(()=>[x($(e.$t("实付款"))+"：",1)]),_:1}),_(t,{class:"order-item-price"},{default:d(()=>[_(B,{"show-text":!1,"is-bottom":!1,"price-data":U.value.totalAmount},null,8,["price-data"])]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1}),U.value.availableActions.cancelOrder||U.value.availableActions.toPay||U.value.availableActions.confirmReceipt||U.value.availableActions.toAftersales?(v(),o(H,{key:0,height:"100rpx","background-color":"#fff"},{default:d(()=>[_(t,{class:"order-info-btn"},{default:d(()=>[_(t,{class:"order-info-btn-box"},{default:d(()=>[U.value.availableActions.cancelOrder?(v(),o(i,{key:0,class:"btn",color:"#333",plain:!0,onClick:a[3]||(a[3]=e=>{return a=U.value.orderId,void j({title:L("提示"),content:L("确认要取消该订单吗？"),success:async e=>{if(e.confirm)try{await K({id:a}),ee()}catch(l){D({title:l.message,icon:"none"})}}});var a})},{default:d(()=>[x($(e.$t("取消订单")),1)]),_:1})):k("",!0),U.value.availableActions.toPay?(v(),o(i,{key:1,class:"btn",color:"#333",plain:!0,onClick:a[4]||(a[4]=e=>{return a=U.value.orderId,void N({url:`/pages/order/pay?orderId=${a}`});var a})},{default:d(()=>[x($(e.$t("去付款")),1)]),_:1})):k("",!0),U.value.availableActions.confirmReceipt?(v(),o(i,{key:2,color:"#333",class:"btn",plain:!0,onClick:a[5]||(a[5]=e=>{return a=U.value.orderId,void j({title:L("提示"),content:L("确认收货吗？"),success:async e=>{if(e.confirm)try{await Q({id:a}),ee()}catch(l){D({title:l.message,icon:"none"})}}});var a})},{default:d(()=>[x($(e.$t("确认已收货")),1)]),_:1})):k("",!0),U.value.availableActions.toAftersales?(v(),o(i,{key:3,color:"#333",class:"btn",plain:!0,onClick:a[6]||(a[6]=e=>se(null))},{default:d(()=>[x($(e.$t("整单售后")),1)]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1})):k("",!0)],64)):k("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-60bd8894"]]);export{V as default};
