import{d as s,j as a,W as e,r as t,s as l,q as o,c as n,w as i,i as c,B as r,E as u,o as p,g as d,I as g,a as h,J as f,O as m,aI as v,H as _,F as y,ac as I,f as b,t as k,n as w,_ as T}from"./index-BcyAKDDV.js";import{_ as M}from"./tig-layout.DHsvU4xy.js";import{b as x}from"./im.CjYNb-cY.js";const j=T(s({__name:"list",setup(s){const T=a(),j=e({page:1,size:15}),$=t(0),H=t(!1),L=t([]),z=async()=>{try{const s=await x(j);L.value=s.records,$.value=s.total}catch(s){}finally{H.value=!0}};return l(()=>{z()}),o(()=>{j.page<Math.ceil($.value/j.size)&&(j.page++,z())}),(s,a)=>{const e=c,t=r(u("tig-layout"),M);return p(),n(e,{class:"page-content"},{default:i(()=>[d(t,{title:"消息列表"},{default:i(()=>[d(e,{class:"thanos-layout conversation-list-layout"},{default:i(()=>[d(e,{class:"thanos-layout-main-content"},{default:i(()=>[d(e,{class:"thanos-waterfall conversation-list-wrap"},{default:i(()=>[L.value.length>0?(p(!0),g(f,{key:0},m(L.value,(s,a)=>(p(),n(e,{key:a,class:"main-list"},{default:i(()=>[d(e,{class:"wapim-conversation-item",onClick:a=>{return e=`/pages/im/index?shopId=${s.shopId}&conversationId=${s.conversationId}`,void w({url:e});var e}},{default:i(()=>[v("figure",{class:"bg-pic circle-bg-pic thanos-figure thanos-hairline--surround conversation-figure"},[d(e,{class:"bg-pic-content",style:_({backgroundImage:`url(${s.shop?y(I)(s.shop.shopLogo):y(I)(y(T).baseInfo.icoImg)})`})},null,8,["style"])]),d(e,{class:"wapim-conversation-item-content thanos-hairline--bottom"},{default:i(()=>[d(e,{class:"shop-name thanos-ellipsis"},{default:i(()=>[b(k(s.shop?s.shop.shopTitle:y(T).baseInfo.shopTitle),1)]),_:2},1024),"text"==s.lastMessage[0].messageType?(p(),n(e,{key:0,class:"last-message thanos-ellipsis"},{default:i(()=>[d(e,{class:"ellipsis",innerHTML:s.lastMessage[0].content.content},null,8,["innerHTML"])]),_:2},1024)):(p(),n(e,{key:1,class:"last-message thanos-ellipsis"},{default:i(()=>[b("["+k(s.lastMessage[0].messageTypeText)+"]",1)]),_:2},1024))]),_:2},1024),d(e,{class:"wapim-conversation-item-right"},{default:i(()=>[v("span",{class:"last-time"},k(s.lastUpdateTime),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128)):h("",!0),0===L.value.length&&H.value?(p(),n(e,{key:1,class:"thanos-waterfall-finish-desc"},{default:i(()=>[b(k(s.$t("已经没有更多消息了")),1)]),_:1})):h("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-9ee24e2a"]]);export{j as default};
