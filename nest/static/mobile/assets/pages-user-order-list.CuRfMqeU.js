import{d as a,K as t,W as e,r as l,l as s,c as i,w as o,B as r,E as n,b2 as c,o as u,g as d,i as p,a as m,I as y,J as f,O as g,F as _,h as v,N as k,f as h,t as x,a4 as b,X as C,a0 as w,ae as S,Q as $,S as I,n as D,a1 as j,_ as A}from"./index-BcyAKDDV.js";import{_ as V}from"./tig-image.lWnA30Ud.js";import{_ as N}from"./format-price.csRf0ax_.js";import{_ as T,a as L}from"./tig-layout.DHsvU4xy.js";import{_ as P}from"./loading-box.BPbOi9GY.js";import{_ as q}from"./tig-loadingpage.vue_vue_type_script_setup_true_lang.2R__ugUU.js";import{_ as z}from"./empty-box.vue_vue_type_script_setup_true_lang.Dr-zbZbD.js";import{b as K,c as O,d as R,o as U,e as E}from"./order.DielggEZ.js";import{u as M}from"./useList.DjEWWv0p.js";import"./product.Dt_JmfR-.js";const Q=A(a({__name:"list",setup(a){const{t:A}=t(),Q=e([{type:"all",value:A("全部订单"),badge:{value:0}},{type:"awaitPay",value:A("待支付"),badge:{value:0}},{type:"awaitShipping",value:A("待发货"),badge:{value:0}},{type:"awaitReceived",value:A("待收货"),badge:{value:0}},{type:"awaitComment",value:A("待评价"),badge:{value:0}}]),B=l("all"),F=e({page:1,size:10,orderStatus:-1,commentStatus:-1}),G=l(0),J=a=>{B.value!==a.type&&(B.value=a.type,F.page=1,X.value=[],"awaitComment"===a.type?(F.commentStatus=0,F.orderStatus=-1):(F.orderStatus=aa(a.type),F.commentStatus=-1),W())},{getList:W,data:X,isLoadMore:H,isLoading:Y,total:Z}=M(K,{params:F,path:{dataKey:"records"}}),aa=a=>{switch(a){case"all":default:return-1;case"awaitPay":return 0;case"awaitShipping":return 1;case"awaitReceived":return 2}};return s(a=>{a&&a.type&&(G.value=Q.findIndex(t=>t.type===a.type),"awaitComment"===a.type?F.commentStatus=0:F.orderStatus=aa(a.type),B.value=a.type),W()}),(a,t)=>{const e=r(n("up-tabs"),c),l=p,s=v,K=r(n("tig-image"),V),M=r(n("format-price"),N),B=b,aa=r(n("tig-button"),L),ta=r(n("loading-box"),P),ea=r(n("tig-loadingpage"),q),la=r(n("tig-layout"),T);return u(),i(la,{title:"我的订单"},{default:o(()=>[d(l,{class:"order"},{default:o(()=>[d(l,{class:"order-menu badgecolor"},{default:o(()=>[d(e,{current:G.value,"onUpdate:current":t[0]||(t[0]=a=>G.value=a),"line-color":"var(--general)",list:Q,"active-style":{padding:"0 10rpx"},"inactive-style":{padding:"0 10rpx"},scrollable:!0,"key-name":"value",onChange:J},null,8,["current","list"])]),_:1}),d(l,{class:"placeholder"}),d(l,{class:"order-list"},{default:o(()=>[(u(!0),y(f,null,g(_(X),t=>(u(),i(l,{key:t.orderId,class:"order-list-item"},{default:o(()=>[d(l,{class:"order-list-item-header"},{default:o(()=>[t.shop?(u(),i(s,{key:0,class:"special-text",onClick:k(a=>{var e,l;return l=null==(e=t.shop)?void 0:e.shopId,void D({url:`/pages/shop/index?shopId=${l}`})},["stop"])},{default:o(()=>{var a;return[d(s,{class:"iconfont icon-dianpu"}),h(" "+x(null==(a=t.shop)?void 0:a.shopTitle)+" ",1),d(s,{class:"iconfont icon-xiangyou"})]}),_:2},1032,["onClick"])):(u(),i(s,{key:1,class:"order-special-text"},{default:o(()=>[h(x(a.$t("订单编号"))+"：",1),d(s,{class:"special-color"},{default:o(()=>[h(x(t.orderSn),1)]),_:2},1024)]),_:2},1024)),d(s,null,{default:o(()=>[h(x(t.orderStatusName),1)]),_:2},1024)]),_:2},1024),d(l,{class:"order-list-item-content"},{default:o(()=>[d(l,{class:"item-content-text"},{default:o(()=>[d(l,null,{default:o(()=>[h(x(a.$t("收件人"))+"："+x(t.consignee),1)]),_:2},1024),d(l,{class:"special-color"},{default:o(()=>[h(x(t.addTime),1)]),_:2},1024)]),_:2},1024),d(l,{class:"item-content-product"},{default:o(()=>[(u(!0),y(f,null,g(t.items,t=>(u(),i(B,{key:t.itemId,url:"/pages/user/order/info?id="+t.orderId,"hover-class":"navigator-hover"},{default:o(()=>[d(l,{class:"item-content-product-item"},{default:o(()=>[d(l,{class:"item-content-product-img"},{default:o(()=>[d(K,{src:t.picThumb},null,8,["src"]),1===t.isGift?(u(),i(l,{key:0,class:"gift-text"},{default:o(()=>[h(x(a.$t("赠品")),1)]),_:1})):m("",!0)]),_:2},1024),d(l,{class:"item-content-product-info"},{default:o(()=>[d(l,{class:"product-item-title"},{default:o(()=>[h(x(t.productName),1)]),_:2},1024),d(l,{class:C(["sku-card",{nodata:!t.skuData||0===t.skuData.length}])},{default:o(()=>[t.skuData&&t.skuData.length>0?(u(!0),y(f,{key:0},g(t.skuData,(a,t)=>(u(),i(l,{key:t,class:"sku-item line1"},{default:o(()=>[h(x(a.value),1)]),_:2},1024))),128)):m("",!0)]),_:2},1032,["class"]),t.extraSkuData&&t.extraSkuData.length?(u(),i(l,{key:0,class:"extraskudata-box"},{default:o(()=>[d(l,{class:"extraskudata"},{default:o(()=>[(u(!0),y(f,null,g(t.extraSkuData,a=>(u(),i(l,{key:a,class:"extraskudata-item"},{default:o(()=>[d(l,{class:"title"},{default:o(()=>[h(x(a.attrName),1)]),_:2},1024),d(l,{class:"line-box"},{default:o(()=>[d(l,{class:"line"})]),_:1}),d(l,{class:"content"},{default:o(()=>[d(s,{class:"line1 content-text"},{default:o(()=>[h(x(a.attrValue),1)]),_:2},1024),d(M,{"show-text":!1,class:"price","price-data":a.attrPrice},null,8,["price-data"]),d(l,{class:"num"},{default:o(()=>[h("x"+x(t.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)):m("",!0),d(l,{class:"product-item-price"},{default:o(()=>[d(M,{"show-text":!1,class:"product-item-pricenum","decimals-style":{fontSize:"25rpx"},"currency-style":{fontSize:"23rpx"},"price-data":t.price},null,8,["price-data"]),d(l,{class:"product-item-quantity"},{default:o(()=>[h("x "+x(t.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["url"]))),128))]),_:2},1024),d(l,{class:"item-content-pay"},{default:o(()=>[d(l,{class:"item-content-pay-box"},{default:o(()=>[d(l,{class:"pay-item pay-type"},{default:o(()=>[h(x(1===t.payTypeId?a.$t("在线支付"):2===t.payTypeId?a.$t("货到付款"):_(A)("线下支付")),1)]),_:2},1024),d(l,{class:"pay-item total-money"},{default:o(()=>[h(x(a.$t("总额"))+"：",1),d(M,{"show-text":!1,"is-bottom":!1,"price-data":t.totalAmount},null,8,["price-data"])]),_:2},1024),0===t.orderStatus&&Number(t.unpaidAmount)>0?(u(),i(l,{key:0,class:"pay-item"},{default:o(()=>[h(x(a.$t("应付"))+"：",1),d(M,{"show-text":!1,"is-bottom":!1,"price-data":t.unpaidAmount},null,8,["price-data"])]),_:2},1024)):m("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024),d(l,{class:"order-list-item-btn"},{default:o(()=>[d(l,{class:"autodeliverydays"},{default:o(()=>[t.autoDeliveryDays?(u(),i(l,{key:0,class:"autodeliverydays-text line1"},{default:o(()=>[h("订单将在"+x(t.autoDeliveryDays)+"天后自动收货",1)]),_:2},1024)):m("",!0)]),_:2},1024),d(l,{class:"item-btn-box"},{default:o(()=>[d(aa,{class:"btn-margin","custom-style":{height:"55rpx"},plain:!0,"plain-main-color":!0,onClick:a=>{return e=t.orderId,void D({url:`/pages/user/order/info?id=${e}`});var e}},{default:o(()=>[h(x(a.$t("订单详情")),1)]),_:2},1032,["onClick"]),t.availableActions.toPay?(u(),i(aa,{key:0,class:"btn-margin",color:"#333","custom-style":{height:"55rpx"},plain:!0,onClick:a=>{return e=t.orderId,void D({url:`/pages/order/pay?orderId=${e}`});var e}},{default:o(()=>[h(x(a.$t("去付款")),1)]),_:2},1032,["onClick"])):m("",!0),t.availableActions.cancelOrder?(u(),i(aa,{key:1,color:"#333",class:"btn-margin","custom-style":{height:"55rpx"},plain:!0,onClick:a=>(async a=>{S({title:A("提示"),content:A("确认要取消该订单吗？"),success:async t=>{if(t.confirm)try{await O({id:a}),F.page=1,X.value=[],W()}catch(e){$({title:e.message,icon:"none"})}}})})(t.orderId)},{default:o(()=>[h(x(a.$t("取消订单")),1)]),_:2},1032,["onClick"])):m("",!0),t.availableActions.delOrder?(u(),i(aa,{key:2,color:"#333",class:"btn-margin","custom-style":{height:"55rpx"},plain:!0,onClick:a=>(async a=>{S({title:A("提示"),content:A("确认要删除该订单吗？"),success:async t=>{if(t.confirm)try{await R({id:a}),F.page=1,X.value=[],W()}catch(e){$({title:e.message,icon:"none"})}}})})(t.orderId)},{default:o(()=>[h(x(a.$t("删除订单")),1)]),_:2},1032,["onClick"])):m("",!0),t.availableActions.rebuy?(u(),i(aa,{key:3,color:"#333",class:"btn-margin","custom-style":{height:"55rpx"},plain:!0,onClick:a=>(async a=>{try{await U({id:a}),I({url:"/pages/cart/index"})}catch(t){$({title:t.message,icon:"none"})}})(t.orderId)},{default:o(()=>[h(x(a.$t("再次购买")),1)]),_:2},1032,["onClick"])):m("",!0),t.availableActions.toComment?(u(),i(aa,{key:4,color:"#333",class:"btn-margin","custom-style":{height:"55rpx"},plain:!0,onClick:a=>{return e=t.orderId,void D({url:`/pages/user/comment/info?id=${e}`});var e}},{default:o(()=>[h(x(a.$t("去评价")),1)]),_:2},1032,["onClick"])):m("",!0),t.availableActions.confirmReceipt?(u(),i(aa,{key:5,color:"#333",class:"btn-margin","custom-style":{height:"55rpx"},plain:!0,onClick:a=>{return e=t.orderId,void S({title:A("提示"),content:A("确认收货吗？"),success:async a=>{if(a.confirm)try{await E({id:e}),j({url:"/pages/user/order/list?type=awaitComment"})}catch(t){$({title:t.message,icon:"none"})}}});var e}},{default:o(()=>[h(x(a.$t("确认收货")),1)]),_:2},1032,["onClick"])):m("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),d(ta,{modelValue:_(H),"onUpdate:modelValue":t[1]||(t[1]=a=>w(H)?H.value=a:null),page:F.page,length:_(X).length},null,8,["modelValue","page","length"]),_(Y)||0!==_(Z)?m("",!0):(u(),i(z,{key:0,mode:"list",background:"#f5f5f5",text:a.$t("暂无订单")},null,8,["text"]))]),_:1}),d(ea,{modelValue:_(Y),"onUpdate:modelValue":t[2]||(t[2]=a=>w(Y)?Y.value=a:null)},null,8,["modelValue"])]),_:1})}}}),[["__scopeId","data-v-bda3d423"]]);export{Q as default};
