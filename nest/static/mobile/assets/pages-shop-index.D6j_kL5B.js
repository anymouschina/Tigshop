import{d as e,K as o,k as l,ac as d,B as a,E as u,c as s,o as n,i as t,X as m,w as i,a as r,g as c,H as p,h,M as x,aI as y,t as f,f as _,Q as g,ae as I,n as k,_ as v,I as b,O as w,J as S,r as $,l as j}from"./index-BcyAKDDV.js";import{_ as C}from"./tig-layout.DHsvU4xy.js";import{s as D,a as A,b as z}from"./shop.C0LoUVHm.js";import{n as P,t as L,i as N,a as R,b as B,w as M,d as O,e as T,g as U,p as q,h as E,j as F,k as H,S as G,s as J,l as K,m as Q,o as X,q as V,r as W,u as Y,v as Z,x as ee,y as oe,z as le}from"./index.me9OfWvf.js";import{_ as de}from"./tig-image.lWnA30Ud.js";import"./format-price.csRf0ax_.js";import"./home.CJJfsVI7.js";import"./tig-fixed-placeholder.BvTFztLB.js";const ae=v(e({__name:"index",props:{module:{},shopInfo:{}},emits:["refreshShopDetail"],setup(e,{emit:v}){const{t:b}=o(),w=e,S=v,$=l(()=>{let e=[];for(let o=1;o<=10;o++)e.push(`https://lyecs2.oss-cn-zhangjiakou.aliyuncs.com/static/mini/bg/${o}.jpg`);return e}),j=l(()=>{let e;return e=0==w.module.backgroundDefault&&w.module.customPic.picUrl?d(w.module.customPic.picUrl):$.value[w.module.backgroundDefault-1],e}),C=l(()=>w.shopInfo.collectShop?b("已收藏"):b("收藏")),A=()=>{w.shopInfo.collectShop?P():z()},z=async()=>{try{await D({shopId:w.shopInfo.shopId});g({title:b("收藏成功")}),S("refreshShopDetail",w.shopInfo.shopId)}catch(e){console.error(e)}},P=async()=>{I({title:b("提示"),content:b("确认要取消收藏店铺吗？"),success:async e=>{if(e.confirm)try{await D({shopId:w.shopInfo.shopId});g({title:b("操作成功")}),S("refreshShopDetail",w.shopInfo.shopId)}catch(o){console.error(o)}}})},L=()=>{k({url:`/pages/search/index?shopId=${w.shopInfo.shopId}`})},N=()=>{k({url:`/pages/search/result?&shopId=${w.shopInfo.shopId}`})},R=()=>{k({url:`/pages/shop/category?shopId=${w.shopInfo.shopId}`})};return(e,o)=>{const l=t,d=h,g=x,I=a(u("tig-image"),de);return n(),s(l,{class:m("module-ad-con module-store_info ad-store_style__"+e.module.style)},{default:i(()=>[e.module?(n(),s(l,{key:0,class:"module-ad-content"},{default:i(()=>[c(l,{class:"cap-store-banner"},{default:i(()=>[c(l,{class:"cap-store-banner__cover",style:p("background-image: url("+j.value+");")},{default:i(()=>[c(l,{class:"cap-store-banner__cover-mask"})]),_:1},8,["style"]),c(l,{class:"cap-store-nav-warp"},{default:i(()=>[c(l,{class:"cap-store-nav-con"},{default:i(()=>[c(l,{class:"store-search-con"},{default:i(()=>[c(l,{id:"search",onClick:L},{default:i(()=>[c(d,{class:"module_ico module-ico-sousuo"}),c(g,{type:"text",class:"search-input",placeholder:e.$t("搜商品")},null,8,["placeholder"])]),_:1})]),_:1}),c(l,{class:"store-nav-con"},{default:i(()=>[c(l,{class:"store-nav-item active"},{default:i(()=>[y("a",{class:"store-nav-item-a"},f(e.$t("精选")),1)]),_:1}),c(l,{class:"store-nav-item"},{default:i(()=>[y("a",{class:"store-nav-item-a",onClick:N},f(e.$t("商品")),1)]),_:1}),c(l,{class:"store-nav-item"},{default:i(()=>[y("a",{class:"store-nav-item-a",onClick:R},f(e.$t("分类")),1)]),_:1})]),_:1})]),_:1})]),_:1}),c(l,{class:"cap-store-banner__inner"},{default:i(()=>[c(l,{class:"cap-store-banner__content"},{default:i(()=>[c(l,{class:"cap-store-banner__logo"},{default:i(()=>[c(I,{src:e.shopInfo.shopLogo,mode:"widthFix"},null,8,["src"])]),_:1}),c(l,{class:"cap-store-banner__right-content"},{default:i(()=>[c(l,{class:"cap-store-banner__right-content-title--middle"},{default:i(()=>[_(f(e.shopInfo.shopTitle),1)]),_:1}),c(l,{class:"cap-store-banner__sum-content"},{default:i(()=>[c(l,{class:"cap-store-banner__sum-content-total"},{default:i(()=>[_(f(e.$t("全部商品"))+" "+f(e.shopInfo.productCount),1)]),_:1}),c(l,{class:"cap-store-banner__sum-content-total"},{default:i(()=>[_(f(e.$t("新品"))+" "+f(e.shopInfo.newProductCount),1)]),_:1})]),_:1})]),_:1}),c(l,{class:"store-collect-button-con",onClick:A},{default:i(()=>[c(l,{class:"store-collect-button"},{default:i(()=>[_(f(C.value),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):r("",!0)]),_:1},8,["class"])}}}),[["__scopeId","data-v-6d4fd5b0"]]),ue=v(e({__name:"shopModules",props:{modules:{},shopInfo:{}},emits:["refreshShopDetail"],setup(e,{emit:o}){const l=e,d=o;return(e,o)=>{const a=t;return n(),s(a,null,{default:i(()=>[(n(!0),b(S,null,w(e.modules,(e,a)=>(n(),b(S,{key:a},["notice"==e.type?(n(),s(P,{key:0,module:e.module},null,8,["module"])):r("",!0),"titleAd"==e.type?(n(),s(L,{key:1,module:e.module},null,8,["module"])):r("",!0),"imageAd"==e.type?(n(),s(N,{key:2,module:e.module},null,8,["module"])):r("",!0),"imageNav"==e.type?(n(),s(R,{key:3,module:e.module},null,8,["module"])):r("",!0),"coupon"==e.type?(n(),s(B,{key:4,module:e.module,"shop-id":l.shopInfo.shopId},null,8,["module","shop-id"])):r("",!0),"whiteBlank"==e.type?(n(),s(M,{key:5,module:e.module},null,8,["module"])):r("",!0),"whiteLine"==e.type?(n(),s(O,{key:6,module:e.module},null,8,["module"])):r("",!0),"imageSquareAd"==e.type?(n(),s(T,{key:7,module:e.module},null,8,["module"])):r("",!0),"imageHotarea"==e.type?(n(),s(U,{key:8,module:e.module},null,8,["module"])):r("",!0),"shopInfo"==e.type?(n(),s(ae,{key:9,module:e.module,"shop-info":l.shopInfo,onRefreshShopDetail:o[0]||(o[0]=e=>d("refreshShopDetail"))},null,8,["module","shop-info"])):r("",!0),"product"==e.type?(n(),s(q,{key:10,"shop-id":l.shopInfo.shopId,module:e.module,"module-index":e.moduleIndex},null,8,["shop-id","module","module-index"])):r("",!0),"categoryNav"==e.type?(n(),s(E,{key:11,module:e.module,"module-index":e.moduleIndex},null,8,["module","module-index"])):r("",!0),"categoryNavA2"==e.type?(n(),s(F,{key:12,module:e.module,"module-index":e.moduleIndex},null,8,["module","module-index"])):r("",!0),"banner"==e.type?(n(),s(H,{key:13,module:e.module,"module-index":e.moduleIndex,index:a},null,8,["module","module-index","index"])):r("",!0),"slidingImage"==e.type?(n(),s(G,{key:14,module:e.module,"module-index":e.moduleIndex,index:a},null,8,["module","module-index","index"])):r("",!0),"slideLargeImage"==e.type?(n(),s(J,{key:15,module:e.module,"module-index":e.moduleIndex,index:a},null,8,["module","module-index","index"])):r("",!0),"comboSuggestions"==e.type?(n(),s(K,{key:16,module:e.module,"module-index":e.moduleIndex,index:a},null,8,["module","module-index","index"])):r("",!0),"noticeA2"==e.type?(n(),s(Q,{key:17,module:e.module,"module-index":e.moduleIndex,index:a},null,8,["module","module-index","index"])):r("",!0),"specialOffer"==e.type?(n(),s(X,{key:18,module:e.module,"module-index":e.moduleIndex,index:a},null,8,["module","module-index","index"])):r("",!0),"mixedProductDisplay"==e.type?(n(),s(V,{key:19,module:e.module,"module-index":e.moduleIndex,index:a},null,8,["module","module-index","index"])):r("",!0),"categoryRec"==e.type?(n(),s(W,{key:20,module:e.module,"module-index":e.moduleIndex,index:a},null,8,["module","module-index","index"])):r("",!0),"countdown"==e.type?(n(),s(Y,{key:21,module:e.module,"module-index":e.moduleIndex,index:a},null,8,["module","module-index","index"])):r("",!0),"groupSliding"==e.type?(n(),s(Z,{key:22,module:e.module,"module-index":e.moduleIndex,index:a},null,8,["module","module-index","index"])):r("",!0),"productGrouping"==e.type?(n(),s(ee,{key:23,module:e.module,"module-index":e.moduleIndex,index:a},null,8,["module","module-index","index"])):r("",!0),"imageTextComponent"==e.type?(n(),s(oe,{key:24,module:e.module,"module-index":e.moduleIndex,index:a},null,8,["module","module-index","index"])):r("",!0),"categoryNavA1"==e.type?(n(),s(le,{key:25,module:e.module,"module-index":e.moduleIndex,index:a},null,8,["module","module-index","index"])):r("",!0)],64))),128))]),_:1})}}}),[["__scopeId","data-v-832f4101"]]),se=e({__name:"index",setup(e){const o=$(0);j(e=>{e&&e.shopId&&(o.value=e.shopId,I(),x())});const d=$("店铺详情"),m=$([]),h=$({}),x=async()=>{try{const e=await A(o.value);m.value=e.moduleList,h.value=e.pageModule}catch(e){console.error(e)}},y=l(()=>{var e,o,l;return{"background-color":`${h.value.backgroundColor}`,"background-image":`url("${null==(e=h.value.backgroundImage)?void 0:e.picUrl}")`,"background-size":`${f(null==(o=h.value)?void 0:o.backgroundSize)}`,"background-repeat":`${_(null==(l=h.value)?void 0:l.backgroundRepeat)}`}}),f=e=>({1:"100% auto",2:"auto 100%",3:"100% 100%"}[e]),_=e=>({1:"no-repeat",2:"repeat",3:"repeat-x",4:"repeat-y"}[e]),g=$({}),I=async()=>{try{const e=await z(o.value);g.value=e,d.value=e.shopTitle}catch(e){console.error(e)}};return(e,l)=>{const x=t,f=a(u("tig-layout"),C);return n(),s(f,{title:d.value,"shop-id":o.value,background:h.value.titleBackgroundColor,color:h.value.titleColor},{default:i(()=>[c(x,{class:"decorate-page-window",style:p({...y.value})},{default:i(()=>[Object.keys(g.value).length>0?(n(),s(ue,{key:0,modules:m.value,"shop-info":g.value,onRefreshShopDetail:I},null,8,["modules","shop-info"])):r("",!0)]),_:1},8,["style"])]),_:1},8,["title","shop-id","background","color"])}}});export{se as default};
