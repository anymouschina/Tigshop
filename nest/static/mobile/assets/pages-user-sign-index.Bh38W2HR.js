import{d as a,j as s,K as e,r as i,k as t,l,c as o,w as n,aa as c,ab as d,B as r,E as u,a7 as m,G as v,o as p,aI as g,I as f,a as y,t as k,F as x,f as _,J as $,O as b,X as w,g as B,a4 as h,i as j,ac as N,Q as q,n as G,_ as I}from"./index-BcyAKDDV.js";import{_ as C}from"./format-price.csRf0ax_.js";import{_ as P}from"./tig-layout.DHsvU4xy.js";import{g as E,s as O}from"./sign.y7a7nnj2.js";const S=I(a({__name:"index",setup(a){m(a=>({fff3cb86:K.value,"20fba6dd":Q.value}));const I=s(),{t:S}=e(),T=i({signPoints:0,record:0,isSign:0,days:[],recommendGoods:[]}),F=async()=>{c({title:S("加载中")});try{const a=await E("user/sign/index");Object.assign(T.value,a)}catch(a){console.error(a)}finally{d()}},J=async()=>{c({title:S("加载中")});try{await O(),q({title:S("打卡成功"),duration:1e3,icon:"none"}),setTimeout(function(){F()},1e3)}catch(a){q({title:a.message,duration:1500,icon:"none"})}finally{d()}},K=t(()=>`url(${v("qiandao/bg.png")})`),Q=t(()=>`url(${v("qiandao/hot_bg.png")})`);return l(()=>{F()}),(a,s)=>{const e=h,i=r(u("format-price"),C),t=j,l=r(u("tig-layout"),P);return p(),o(l,{title:"签到"},{default:n(()=>[g("div",{class:"qiandaoBox"},[g("div",{class:"title"},k(a.$t(`每日打卡领${x(I).integralName}`)),1),g("div",{class:"wrap"},[g("div",{class:"samll-title"},[_(k(a.$t("今天打卡得")),1),g("span",null,k(T.value.signPoints),1),_(k(a.$t(x(I).integralName)),1)]),g("div",{class:"selectedBox"},[g("div",{class:"line"}),(p(!0),f($,null,b(T.value.days,(a,s)=>(p(),f("div",{key:s,class:w(["item",{selected:T.value.record>=a.dayNum}])},[g("div",{class:"item-content"},[T.value.record<a.dayNum?(p(),f("div",{key:0,class:"num"},k(a.points),1)):(p(),f("div",{key:1,class:"num"})),g("div",{class:"date"},k(a.name),1)])],2))),128))]),g("div",{class:"qiandaoBtnBox"},[g("div",{class:"qdBtn"},[T.value.isSign?(p(),f("div",{key:0,class:"dk-now"},[g("span",null,k(a.$t("今日已打卡")),1)])):(p(),f("div",{key:1,class:"dk-now",onClick:J},[g("span",null,k(a.$t("立即打卡")),1)]))])])])]),T.value.recommendGoods?(p(),f("div",{key:0,class:"recgoodsBox"},[g("div",{class:"title"},[g("div",{class:"bg"},k(a.$t("今日特卖 发现好货")),1),B(e,{url:"/pages/search/result?intro=hot"},{default:n(()=>[g("div",{class:"moregoods"},[_(k(a.$t("查看更多"))+" ",1),g("span",{class:"iconfont icon-xiangyou"})])]),_:1})]),g("div",{class:"wrapGoods"},[(p(!0),f($,null,b(T.value.recommendGoods,(a,s)=>(p(),o(t,{key:s,class:"item",onClick:s=>{G({url:"/pages/product/index?id="+a.productId})}},{default:n(()=>[g("img",{class:"rec-img",alt:a.productName,src:x(N)(a.picThumb)},null,8,["alt","src"]),g("div",{class:"info"},[g("div",{class:"name"},k(a.productName),1),B(i,{"is-bottom":!1,class:"price","price-data":a.productPrice},null,8,["price-data"])])]),_:2},1032,["onClick"]))),128))])])):y("",!0)]),_:1})}}}),[["__scopeId","data-v-f629cd29"]]);export{S as default};
