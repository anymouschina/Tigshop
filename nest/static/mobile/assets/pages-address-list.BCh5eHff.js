import{d as a,K as e,W as s,l as t,al as l,P as o,R as d,am as n,r as i,m as r,an as u,c,w as m,B as g,E as p,ao as f,ap as _,o as h,g as v,a as y,i as b,I as k,J as x,O as j,F as V,f as I,t as w,aq as C,a0 as D,h as L,ae as R,Q as K,n as U,aa as $,ar as z,ab as F,_ as M}from"./index-BcyAKDDV.js";import{_ as N,a as Q}from"./uni-swipe-action.BR-4IYWe.js";import{_ as q}from"./empty-box.vue_vue_type_script_setup_true_lang.Dr-zbZbD.js";import{_ as B}from"./loading-box.BPbOi9GY.js";import{_ as E,a as J}from"./tig-layout.DHsvU4xy.js";import{_ as O}from"./tig-fixed-placeholder.BvTFztLB.js";import{_ as P}from"./tig-loadingpage.vue_vue_type_script_setup_true_lang.2R__ugUU.js";import{g as S,d as W,s as A}from"./address.DDZ6LhC1.js";import{u as G}from"./useList.DjEWWv0p.js";import"./product.Dt_JmfR-.js";const H=M(a({__name:"list",setup(a){const{t:M}=e(),H=s({page:1,size:10}),{getList:T,data:X,isLoadMore:Y,isLoading:Z}=G(S,{params:H,path:{dataKey:"records"},immediate:!0,manageData:a=>{var e;sa.value=null==(e=a.find(a=>1===a.isSelected))?void 0:e.addressId}});t(()=>{const a=l();"pages/order/check"===(a.length>1?a[a.length-2].route:"")?o("link",!0):d("link"),n("refreshData",()=>{H.page=1,X.value=[],T()})});const aa=async a=>{try{await W({id:a}),K({title:M("删除成功"),icon:"none"}),H.page=1,X.value=[],T()}catch(e){console.error(e)}},ea=()=>{U({url:"/pages/address/editRegion"})},sa=i(),ta=a=>{la()},la=async()=>{$({title:M("切换中")});const a=l();try{if(await A({id:sa.value}),H.page=1,X.value=[],a.length>1){if("pages/order/check"===a[a.length-2].route)return z()}T()}catch(e){console.error(e),K({title:e.message,icon:"none"})}finally{F()}};return r(()=>{u("refreshData")}),(a,e)=>{const s=g(p("up-radio"),f),t=b,l=g(p("uni-swipe-action-item"),N),o=g(p("uni-swipe-action"),Q),d=g(p("up-radio-group"),_),n=g(p("empty-box"),q),i=g(p("loading-box"),B),r=L,u=g(p("tig-button"),J),K=g(p("tig-fixed-placeholder"),O),$=g(p("tig-loadingpage"),P),z=g(p("tig-layout"),E);return h(),c(z,{title:"收货地址"},{default:m(()=>[v(t,{class:"address-list"},{default:m(()=>[v(d,{modelValue:sa.value,"onUpdate:modelValue":e[0]||(e[0]=a=>sa.value=a),placement:"column",onChange:ta},{default:m(()=>[v(o,null,{default:m(()=>[(h(!0),k(x,null,j(V(X),e=>(h(),c(t,{key:e.addressId,class:"address-item"},{default:m(()=>[v(l,{threshold:0},{right:m(()=>[v(t,{class:"address-del",onClick:a=>{return s=e.addressId,console.log("handleDel",s),void R({title:M("提示"),content:M("确定删除吗？"),success:async a=>{a.confirm&&aa(s)}});var s}},{default:m(()=>[I(w(a.$t("删除")),1)]),_:2},1032,["onClick"])]),default:m(()=>[v(t,{class:"address-item-content"},{default:m(()=>[v(t,{class:"address-item-left flex-center"},{default:m(()=>[v(s,{"active-color":"var(--general)",name:e.addressId},null,8,["name"])]),_:2},1024),v(t,{class:"address-item-middle"},{default:m(()=>[v(t,{class:"user-info"},{default:m(()=>[v(t,{class:"name"},{default:m(()=>[I(w(e.consignee),1)]),_:2},1024),v(t,{class:"phone"},{default:m(()=>[I(w(V(C)(e.mobile))+" ",1),1===e.isDefault?(h(),c(t,{key:0,class:"tag"},{default:m(()=>[I(w(a.$t("默认")),1)]),_:1})):y("",!0)]),_:2},1024)]),_:2},1024),v(t,{class:"address line1"},{default:m(()=>[I(w(e.regionName)+" "+w(e.address),1)]),_:2},1024)]),_:2},1024),v(t,{class:"address-item-right flex-center",onClick:a=>{return s=e.addressId,void U({url:"/pages/address/editRegion?id="+s});var s}},{default:m(()=>[v(t,{class:"iconfont icon-bianji"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1}),V(Y)||V(Z)||0!==V(X).length?y("",!0):(h(),c(n,{key:0,background:"transparent",mode:"list",text:"暂无地址！"})),v(i,{modelValue:V(Y),"onUpdate:modelValue":e[1]||(e[1]=a=>D(Y)?Y.value=a:null),page:H.page,length:V(X).length},null,8,["modelValue","page","length"]),v(K,{"background-color":"#fff"},{default:m(()=>[v(t,{class:"btn-box"},{default:m(()=>[v(u,{class:"btn",onClick:ea},{default:m(()=>[v(r,{class:"iconfont icon-dizhi"}),I(" "+w(a.$t("添加新地址")),1)]),_:1})]),_:1})]),_:1}),v($,{modelValue:V(Z),"onUpdate:modelValue":e[2]||(e[2]=a=>D(Z)?Z.value=a:null)},null,8,["modelValue"])]),_:1})}}}),[["__scopeId","data-v-d901b49a"]]);export{H as default};
