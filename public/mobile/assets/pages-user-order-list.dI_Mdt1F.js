import{d as a,G as t,Q as e,r as l,o as s,k as i,l as r,m as o,n,w as c,q as u,y as d,J as p,s as _,F as m,U as f,x as y,C as g,t as v,v as x,V as k,a9 as h,M as b,a4 as w,L as C,af as $,B as j,a0 as S}from"./index-Do_Cb7fn.js";import{_ as D}from"./u-tabs.BhTT9tHy.js";import{_ as V}from"./tig-image.D5KdQk-t.js";import{_ as L}from"./format-price.D2lH_-yv.js";import{a as U,_ as q}from"./tig-layout.BV0ZvCt0.js";import{_ as z}from"./loading-box.Cez_qIZa.js";import{_ as B}from"./tig-loadingpage.vue_vue_type_script_setup_true_lang.BkWOf2EY.js";import{n as M}from"./index.Y6J4G1_A.js";import{_ as T}from"./empty-box.vue_vue_type_script_setup_true_lang.D7M9aYx3.js";import{b as N,c as I,d as J,o as Q,e as F}from"./order.ChpFLtyJ.js";import{u as G}from"./useList.Dtpd-ehd.js";import{_ as K}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-loading-icon.rQrrZF_r.js";import"./u-icon.CBDMG2rO.js";import"./u-empty.DRH0yXs0.js";import"./product.Cqsfbx9G.js";const Z=K(a({__name:"list",setup(a){const{t:K}=t(),Z={navbar:"1",return:"1",title:"我的订单"},A=e([{type:"all",value:K("全部订单"),badge:{value:0}},{type:"await_pay",value:K("待支付"),badge:{value:0}},{type:"await_shipping",value:K("待发货"),badge:{value:0}},{type:"await_received",value:K("待收货"),badge:{value:0}},{type:"await_comment",value:K("待评价"),badge:{value:0}}]),E=l("all"),H=e({page:1,size:10,order_status:-1,comment_status:-1}),O=l(0),P=a=>{E.value!==a.type&&(E.value=a.type,H.page=1,W.value=[],"await_comment"===a.type?(H.comment_status=0,H.order_status=-1):(H.order_status=ta(a.type),H.comment_status=-1),R())},{getList:R,data:W,isLoadMore:X,isLoading:Y,total:aa}=G(N,{params:H,path:{dataKey:"filter_result"}}),ta=a=>{switch(a){case"all":default:return-1;case"await_pay":return 0;case"await_shipping":return 1;case"await_received":return 2}};return s((a=>{a&&a.type&&(O.value=A.findIndex((t=>t.type===a.type)),"await_comment"===a.type?H.comment_status=0:H.order_status=ta(a.type),E.value=a.type),R()})),(a,t)=>{const e=i(r("up-tabs"),D),l=g,s=j,N=i(r("tig-image"),V),G=i(r("format-price"),L),E=S,ta=i(r("tig-button"),U),ea=i(r("loading-box"),z),la=i(r("tig-loadingpage"),B),sa=i(r("tig-layout"),q);return o(),n(sa,null,{default:c((()=>[u(l,{class:"order"},{default:c((()=>[u(M,{parameter:Z}),u(l,{class:"order-menu badgecolor"},{default:c((()=>[u(e,{lineColor:"var(--general)",list:A,activeStyle:{padding:"0 10rpx"},inactiveStyle:{padding:"0 10rpx"},scrollable:!0,onChange:P,keyName:"value",current:O.value,"onUpdate:current":t[0]||(t[0]=a=>O.value=a)},null,8,["list","current"])])),_:1}),u(l,{class:"placeholder"}),u(l,{class:"order-list"},{default:c((()=>[(o(!0),d(m,null,p(_(W),(t=>(o(),n(l,{key:t.order_id,class:"order-list-item"},{default:c((()=>[u(l,{class:"order-list-item-header"},{default:c((()=>[u(s,{class:"special-text"},{default:c((()=>[v(x(a.$t("订单编号"))+"：",1),u(s,{class:"special-color"},{default:c((()=>[v(x(t.order_sn),1)])),_:2},1024)])),_:2},1024),u(s,null,{default:c((()=>[v(x(t.order_status_name),1)])),_:2},1024)])),_:2},1024),u(l,{class:"order-list-item-content"},{default:c((()=>[u(l,{class:"item-content-text"},{default:c((()=>[u(l,null,{default:c((()=>[v(x(a.$t("收件人"))+"："+x(t.consignee),1)])),_:2},1024),u(l,{class:"special-color"},{default:c((()=>[v(x(t.add_time),1)])),_:2},1024)])),_:2},1024),u(l,{class:"item-content-product"},{default:c((()=>[(o(!0),d(m,null,p(t.items,(t=>(o(),n(E,{key:t.item_id,url:"/pages/user/order/info?id="+t.order_id,"hover-class":"navigator-hover"},{default:c((()=>[u(l,{class:"item-content-product-item"},{default:c((()=>[u(l,{class:"item-content-product-img"},{default:c((()=>[u(N,{src:t.pic_thumb,"onUpdate:src":a=>t.pic_thumb=a},null,8,["src","onUpdate:src"]),1===t.is_gift?(o(),n(l,{key:0,class:"gift-text"},{default:c((()=>[v(x(a.$t("赠品")),1)])),_:1})):y("",!0)])),_:2},1024),u(l,{class:"item-content-product-info"},{default:c((()=>[u(l,{class:"product-item-title"},{default:c((()=>[v(x(t.product_name),1)])),_:2},1024),u(l,{class:k(["sku-card",{nodata:0===t.sku_data.length}])},{default:c((()=>[t.sku_data.length>0?(o(!0),d(m,{key:0},p(t.sku_data,((a,t)=>(o(),n(l,{key:t,class:"sku-item line1"},{default:c((()=>[v(x(a.value),1)])),_:2},1024)))),128)):y("",!0)])),_:2},1032,["class"]),t.extra_sku_data&&t.extra_sku_data.length?(o(),n(l,{key:0,class:"extraskudata-box"},{default:c((()=>[u(l,{class:"extraskudata"},{default:c((()=>[(o(!0),d(m,null,p(t.extra_sku_data,(a=>(o(),n(l,{key:a,class:"extraskudata-item"},{default:c((()=>[u(l,{class:"title"},{default:c((()=>[v(x(a.attr_name),1)])),_:2},1024),u(l,{class:"line-box"},{default:c((()=>[u(l,{class:"line"})])),_:1}),u(l,{class:"content"},{default:c((()=>[u(s,{class:"line1 content-text"},{default:c((()=>[v(x(a.attr_value),1)])),_:2},1024),u(G,{showText:!1,class:"price",priceData:a.attr_price},null,8,["priceData"]),u(l,{class:"num"},{default:c((()=>[v("x"+x(t.quantity),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):y("",!0),u(l,{class:"product-item-price"},{default:c((()=>[u(G,{showText:!1,class:"product-item-pricenum",decimalsStyle:{fontSize:"25rpx"},currencyStyle:{fontSize:"23rpx"},priceData:t.price},null,8,["priceData"]),u(l,{class:"product-item-quantity"},{default:c((()=>[v("x "+x(t.quantity),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"])))),128))])),_:2},1024),u(l,{class:"item-content-pay"},{default:c((()=>[u(l,{class:"item-content-pay-box"},{default:c((()=>[u(l,{class:"pay-item pay-type"},{default:c((()=>[v(x(1===t.pay_type_id?a.$t("在线支付"):2===t.pay_type_id?a.$t("货到付款"):_(K)("线下支付")),1)])),_:2},1024),u(l,{class:"pay-item total-money"},{default:c((()=>[v(x(a.$t("总额"))+"：",1),u(G,{showText:!1,isBottom:!1,priceData:t.total_amount},null,8,["priceData"])])),_:2},1024),0===t.order_status&&Number(t.unpaid_amount)>0?(o(),n(l,{key:0,class:"pay-item"},{default:c((()=>[v(x(a.$t("应付"))+"：",1),u(G,{showText:!1,isBottom:!1,priceData:t.unpaid_amount},null,8,["priceData"])])),_:2},1024)):y("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(l,{class:"order-list-item-btn"},{default:c((()=>[u(l,{class:"item-btn-box"},{default:c((()=>[u(ta,{class:"btn-margin",customStyle:{height:"55rpx"},plain:!0,plainMainColor:!0,onClick:a=>{return e=t.order_id,void C({url:`/pages/user/order/info?id=${e}`});var e}},{default:c((()=>[v(x(a.$t("订单详情")),1)])),_:2},1032,["onClick"]),t.available_actions.to_pay?(o(),n(ta,{key:0,class:"btn-margin",color:"#333",customStyle:{height:"55rpx"},plain:!0,onClick:a=>{return e=t.order_id,void C({url:`/pages/order/pay?order_id=${e}`});var e}},{default:c((()=>[v(x(a.$t("去付款")),1)])),_:2},1032,["onClick"])):y("",!0),t.available_actions.cancel_order?(o(),n(ta,{key:1,color:"#333",class:"btn-margin",customStyle:{height:"55rpx"},plain:!0,onClick:a=>(async a=>{h({title:K("提示"),content:K("确认要取消该订单吗？"),success:async t=>{if(t.confirm)try{await I({id:a}),H.page=1,W.value=[],R()}catch(e){b({title:e.message,icon:"none"})}}})})(t.order_id)},{default:c((()=>[v(x(a.$t("取消订单")),1)])),_:2},1032,["onClick"])):y("",!0),t.available_actions.del_order?(o(),n(ta,{key:2,color:"#333",class:"btn-margin",customStyle:{height:"55rpx"},plain:!0,onClick:a=>(async a=>{h({title:K("提示"),content:K("确认要删除该订单吗？"),success:async t=>{if(t.confirm)try{await J({id:a}),H.page=1,W.value=[],R()}catch(e){b({title:e.message,icon:"none"})}}})})(t.order_id)},{default:c((()=>[v(x(a.$t("删除订单")),1)])),_:2},1032,["onClick"])):y("",!0),t.available_actions.rebuy?(o(),n(ta,{key:3,color:"#333",class:"btn-margin",customStyle:{height:"55rpx"},plain:!0,onClick:a=>(async a=>{try{await Q({id:a}),w({url:"/pages/cart/index"})}catch(t){b({title:t.message,icon:"none"})}})(t.order_id)},{default:c((()=>[v(x(a.$t("再次购买")),1)])),_:2},1032,["onClick"])):y("",!0),t.available_actions.to_comment?(o(),n(ta,{key:4,color:"#333",class:"btn-margin",customStyle:{height:"55rpx"},plain:!0,onClick:a=>{return e=t.order_id,void C({url:`/pages/user/comment/info?id=${e}`});var e}},{default:c((()=>[v(x(a.$t("去评价")),1)])),_:2},1032,["onClick"])):y("",!0),t.available_actions.confirm_receipt?(o(),n(ta,{key:5,color:"#333",class:"btn-margin",customStyle:{height:"55rpx"},plain:!0,onClick:a=>{return e=t.order_id,void h({title:K("提示"),content:K("确认收货吗？"),success:async a=>{if(a.confirm)try{await F({id:e}),$({url:"/pages/user/order/list?type=await_comment"})}catch(t){b({title:t.message,icon:"none"})}}});var e}},{default:c((()=>[v(x(a.$t("确认收货")),1)])),_:2},1032,["onClick"])):y("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),u(ea,{modelValue:_(X),"onUpdate:modelValue":t[1]||(t[1]=a=>f(X)?X.value=a:null),page:H.page,length:_(W).length},null,8,["modelValue","page","length"]),_(Y)||0!==_(aa)?y("",!0):(o(),n(T,{key:0,mode:"list",background:"#f5f5f5",text:a.$t("暂无订单")},null,8,["text"]))])),_:1}),u(la,{modelValue:_(Y),"onUpdate:modelValue":t[2]||(t[2]=a=>f(Y)?Y.value=a:null)},null,8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-615fca6c"]]);export{Z as default};
