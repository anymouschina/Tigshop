import{e,r as a,R as l,g as s,c as t,w as _,a9 as u,aa as n,v as i,z as c,a2 as o,D as v,ba as r,o as d,a as f,i as m,A as y,C as h,B as p,b as g,t as b,a6 as k,T as $,E as w,F as x,K as j,_ as C}from"./index-BKXBH4vI.js";import{_ as M}from"./tig-image.BbZoJ9nS.js";import{_ as z}from"./tig-layout.DMoUsUKf.js";import{a as F,g as T}from"./salesmanCenter.CIW08toJ.js";import{u as A}from"./useCurrency.BKNIWl9f.js";const B=C(e({__name:"level",setup(e){o((e=>({"184c36db":S.value,"5fed97b4":q.value})));const{currencyName:C}=A(),B=a({}),D=a([]),E=a({}),I=a({}),K=a({}),N=e=>{var a;return null==(a=D.value[e-1])?void 0:a.rate},R=(e,a)=>{let l=a.condition.sales_amount.value,s=a.condition.sales_invite_users.value,t=a.condition.self_buy_amount.value,_={total_perc:0,sales_amount_info:{sales_amount_reach:!1,sales_amount_gap:""},sales_invite_users_info:{sales_invite_users_reach:!1,sales_invite_users_gap:""},self_buy_amount_info:{self_buy_amount_reach:!1,self_buy_amount_gap:""}},u=0,n=e.all_sum-l,i=e.all_user_count-s,c=e.self_buy_sum-t;return n>=0&&(_.sales_amount_info.sales_amount_reach=!0,u+=1),i>=0&&(_.sales_invite_users_info.sales_invite_users_reach=!0,u+=1),c>=0&&(_.self_buy_amount_info.self_buy_amount_reach=!0,u+=1),_.total_perc=(u/3*100).toFixed(2),_.sales_amount_info.sales_amount_gap=Math.abs(n),_.sales_invite_users_info.sales_invite_users_gap=Math.abs(i),_.self_buy_amount_info.self_buy_amount_gap=Math.abs(c),_},S=l((()=>`url(${v("salesman/viprankbg.png")})`)),q=l((()=>`url(${v("salesman/tuiguang.png")})`));return s((()=>{(async()=>{u({title:"加载中"});try{const e=await F();B.value=e.item}catch(e){}finally{n()}})(),(async()=>{try{const e=await T();E.value=e.item,D.value=e.item.salesman_config.level,I.value=E.value.salesman_config.level[E.value.level],K.value=R(E.value.order,I.value)}catch(e){}})()})),(e,a)=>{const l=i(c("tig-image"),M),s=h,u=m,n=i(c("up-icon"),r),o=i(c("tig-layout"),z);return d(),t(o,{needSafeTop:!0},{default:_((()=>[f(u,{class:"level"},{default:_((()=>[f(u,{class:"level-dashboard"},{default:_((()=>[f(u,{class:"container"},{default:_((()=>[f(u,{class:"header"},{default:_((()=>[B.value.avatar?(d(),t(l,{key:0,class:"avatar",src:B.value.avatar},null,8,["src"])):(d(),t(s,{key:1,src:p(v)("salesman/avatar.png"),class:"avatar"},null,8,["src"])),f(u,{class:"level-name"},{default:_((()=>[g(b(E.value.level_name),1)])),_:1})])),_:1}),f(u,{class:"level-stepper"},{default:_((()=>[f(u,{class:"level-stepper-wrap less"},{default:_((()=>[f(u,{class:"level-stepper-wrap__point active reach"},{default:_((()=>[f(u,{class:"inner-text"},{default:_((()=>[g(b(E.value.level_name),1)])),_:1})])),_:1}),f(u,{class:"level-stepper-wrap__line"},{default:_((()=>[f(u,{class:"line-inner progress",style:k(`width: ${K.value.total_perc}%;`)},null,8,["style"])])),_:1}),f(u,{class:"level-stepper-wrap__point"},{default:_((()=>[f(u,{class:"inner-text"},{default:_((()=>[g(b(I.value.name),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),N(E.value.level)>0?(d(),t(u,{key:0,class:"rights-and-interests"},{default:_((()=>[f(u,{class:"item"},{default:_((()=>[f(u,{class:"title-icon tui"}),f(u,null,{default:_((()=>[f(u,null,{default:_((()=>[g(b(N(E.value.level))+"%",1)])),_:1}),f(u,null,{default:_((()=>[g(b(e.$t("推广佣金比")),1)])),_:1})])),_:1})])),_:1})])),_:1})):y("",!0),f(u,{class:"level-dashboard__rate-text"},{default:_((()=>[f(n,{name:"info-circle",color:"#999",size:"12"}),g(" "+b(e.$t("部分商品的佣金比例可能因商家设置而有所不同，请以商品中所显示的为准")),1)])),_:1})])),_:1}),I.value?(d(),t(u,{key:0,class:"level-schedule"},{default:_((()=>[f(u,{class:"title"},{default:_((()=>[g(b(e.$t("满足以下规则可升级为"))+b(I.value.name),1)])),_:1}),f(u,{class:"level-schedule__status"},{default:_((()=>{var a,l,s;return[(null==(a=E.value.condition)?void 0:a.sales_amount.checked)?(d(),t(u,{key:0,class:"level-schedule-item"},{default:_((()=>[f(u,{class:"tag-wrap"},{default:_((()=>[f(u,{class:$(["level-schedule-item__tag van-tag van-tag--plain van-tag--default",{"level-schedule-item__reach":K.value.sales_amount_info.sales_amount_reach}])},{default:_((()=>[g(b(e.$t(K.value.sales_amount_info.sales_amount_reach?"已达标":"未达标")),1)])),_:1},8,["class"])])),_:1}),f(u,{class:"tag-desc"},{default:_((()=>{var a;return[g(b(e.$t("推广金额达"))+" "+b((null==(a=I.value.condition)?void 0:a.sales_amount.value)+p(C))+" ",1),!1===K.value.sales_amount_info.sales_amount_reach?(d(),w(x,{key:0},[g(" (还差"),f(u,{class:"level-schedule-item__left"},{default:_((()=>[g(b(K.value.sales_amount_info.sales_amount_gap),1)])),_:1}),g(" "+b(p(C))+") ",1)],64)):y("",!0)]})),_:1})])),_:1})):y("",!0),(null==(l=I.value.condition)?void 0:l.sales_invite_users.checked)?(d(),t(u,{key:1,class:"level-schedule-item"},{default:_((()=>[f(u,{class:"tag-wrap"},{default:_((()=>[f(u,{class:$(["level-schedule-item__tag van-tag van-tag--plain van-tag--default",{"level-schedule-item__reach":K.value.sales_invite_users_info.sales_invite_users_reach}])},{default:_((()=>[g(b(K.value.sales_invite_users_info.sales_invite_users_reach?"已达标":"未达标"),1)])),_:1},8,["class"])])),_:1}),f(u,{class:"tag-desc"},{default:_((()=>{var e;return[g("累计客户数达 "+b(null==(e=I.value.condition)?void 0:e.sales_invite_users.value)+" 人 ",1),!1===K.value.sales_invite_users_info.sales_invite_users_reach?(d(),w(x,{key:0},[g(" (还差"),f(u,{class:"level-schedule-item__left"},{default:_((()=>[g(b(K.value.sales_invite_users_info.sales_invite_users_gap),1)])),_:1}),g(" 人) ")],64)):y("",!0)]})),_:1})])),_:1})):y("",!0),(null==(s=I.value.condition)?void 0:s.self_buy_amount.checked)?(d(),t(u,{key:2,class:"level-schedule-item"},{default:_((()=>[f(u,{class:"tag-wrap"},{default:_((()=>[f(u,{class:$(["level-schedule-item__tag van-tag van-tag--plain van-tag--default",{"level-schedule-item__reach":K.value.self_buy_amount_info.self_buy_amount_reach}])},{default:_((()=>[g(b(K.value.self_buy_amount_info.self_buy_amount_reach?"已达标":"未达标"),1)])),_:1},8,["class"])])),_:1}),f(u,{class:"tag-desc"},{default:_((()=>{var a;return[g(b(e.$t("自购金额达"))+" "+b((null==(a=I.value.condition)?void 0:a.self_buy_amount.value)+p(C))+" ",1),!1===K.value.self_buy_amount_info.self_buy_amount_reach?(d(),w(x,{key:0},[g(" ("+b(e.$t("还差")),1),f(u,{class:"level-schedule-item__left"},{default:_((()=>[g(b(K.value.self_buy_amount_info.self_buy_amount_gap),1)])),_:1}),g(" "+b(p(C))+") ",1)],64)):y("",!0)]})),_:1})])),_:1})):y("",!0)]})),_:1})])),_:1})):y("",!0),D.value?(d(),t(u,{key:1,class:"level-rules"},{default:_((()=>[(d(!0),w(x,null,j(D.value,(a=>(d(),t(u,{key:a.id,class:"rules-item"},{default:_((()=>[f(u,{class:"label"},{default:_((()=>[g(b(a.name),1)])),_:2},1024),f(u,{class:"desc"},{default:_((()=>[f(u,{class:"desc-item"},{default:_((()=>[f(u,{class:"desc-item__title"},{default:_((()=>[g(b(e.$t("规则介绍")),1)])),_:1}),a.condition.sales_amount.checked?(d(),t(u,{key:0},{default:_((()=>[g(b(a.condition.sales_amount.title||e.$t("推广金额"))+" "+b(a.condition.sales_amount.value)+" "+b(a.condition.sales_amount.unit||p(C)),1)])),_:2},1024)):y("",!0),a.condition.sales_invite_users.checked?(d(),t(u,{key:1},{default:_((()=>[g(b(a.condition.sales_invite_users.title||e.$t("发展客户数"))+" "+b(a.condition.sales_invite_users.value)+" "+b(a.condition.sales_invite_users.unit||e.$t("人")),1)])),_:2},1024)):y("",!0),a.condition.self_buy_amount.checked?(d(),t(u,{key:2},{default:_((()=>[g(b(a.condition.self_buy_amount.title||e.$t("自购金额"))+" "+b(a.condition.self_buy_amount.value)+" "+b(a.condition.self_buy_amount.unit||p(C)),1)])),_:2},1024)):y("",!0)])),_:2},1024),f(u,{class:"desc-item"},{default:_((()=>[f(u,{class:"desc-item__title"},{default:_((()=>[g(b(e.$t("权益介绍")),1)])),_:1}),f(u,null,{default:_((()=>[g(b(e.$t("推广佣金比为"))+b(a.rate)+"%",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):y("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-bc64395e"]]);export{B as default};
