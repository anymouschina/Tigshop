import{Z as a,d as e,G as t,Q as l,r as s,o,e as c,k as r,l as u,m as i,n,w as d,q as p,y as m,J as _,F as f,x as g,s as v,t as y,v as h,a6 as x,a7 as b,C as j,D as k,E as w,af as C,a9 as z,M as D,B as S}from"./index-Do_Cb7fn.js";import{_ as U}from"./tig-image.D5KdQk-t.js";import{_ as V}from"./format-price.D2lH_-yv.js";import{_ as B,a as M}from"./uni-swipe-action.BC8407Iy.js";import{_ as $}from"./loading-box.Cez_qIZa.js";import{_ as q}from"./tig-layout.BV0ZvCt0.js";import{n as E}from"./index.Y6J4G1_A.js";import{_ as F}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-loading-icon.rQrrZF_r.js";import"./u-icon.CBDMG2rO.js";const G=F(e({__name:"index",setup(e){const{t:F}=t(),G={navbar:"1",return:"1",title:"商品收藏",color:!1},I=l({page:1,size:10,keyword:""}),J=s(0),L=s(!1),N=s(!1),Q=s([]),R=async()=>{I.page>1?L.value=!0:x({title:F("加载中")});try{const t=await(e={...I},a({url:"user/collect_product/list",method:"get",params:e}));J.value=t.total,Q.value=[...Q.value,...t.filter_result]}catch(t){console.error(t)}finally{b(),L.value=!1,N.value=!0}var e},Z=async e=>{try{const l=await(t={id:e},a({url:"user/collect_product/cancel",method:"post",params:t}));l.message&&D({title:l.message,icon:"none"}),I.page=1,Q.value=[],R()}catch(l){D({title:l.message,icon:"none",duration:1e3})}var t};return o((()=>{R()})),c((()=>{I.page<Math.ceil(J.value/I.size)&&(I.page++,R())})),(a,e)=>{const t=r(u("tig-image"),U),l=j,s=r(u("format-price"),V),o=S,c=r(u("uni-swipe-action-item"),B),x=r(u("uni-swipe-action"),M),b=k,D=r(u("loading-box"),$),J=r(u("tig-layout"),q);return i(),n(l,null,{default:d((()=>[p(J,null,{default:d((()=>[p(E,{parameter:G}),Q.value.length>0?(i(),n(l,{key:0,class:"collect-product"},{default:d((()=>[p(x,null,{default:d((()=>[(i(!0),m(f,null,_(Q.value,(e=>(i(),n(l,{key:e.product_id,class:"move-item"},{default:d((()=>[p(c,{threshold:0,autoClose:""},{right:d((()=>[p(l,{class:"collect-move-box"},{default:d((()=>[p(l,{class:"btn-del",onClick:a=>{return t=e.product_id,void z({title:F("提示"),content:F("确定取消收藏吗？"),success:async a=>{a.confirm&&Z(t)}});var t}},{default:d((()=>[p(o,null,{default:d((()=>[y(h(a.$t("取消收藏")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),default:d((()=>[p(l,{class:"collect-product-item",onClick:a=>{return t=e.product_id,void C({url:"/pages/productDetail/index?id="+t});var t}},{default:d((()=>[p(l,{class:"collect-product-item-left"},{default:d((()=>[p(l,{class:"img-box"},{default:d((()=>[p(t,{src:e.pic_thumb,"onUpdate:src":a=>e.pic_thumb=a},null,8,["src","onUpdate:src"])])),_:2},1024)])),_:2},1024),p(l,{class:"collect-product-item-right"},{default:d((()=>[p(l,{class:"title"},{default:d((()=>[y(h(e.product_name),1)])),_:2},1024),p(l,{class:"item-bottom"},{default:d((()=>[p(l,{class:"price"},{default:d((()=>[p(s,{decimalsStyle:{fontSize:"25rpx"},currencyStyle:{fontSize:"23rpx"},priceData:e.product_price},null,8,["priceData"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):g("",!0),0===Q.value.length&&!0===N.value?(i(),n(l,{key:1,class:"empty-box"},{default:d((()=>[p(l,{class:"pictrue"},{default:d((()=>[p(b,{src:v(w)("common/data_empty.png")},null,8,["src"])])),_:1}),p(l,{class:"txt"},{default:d((()=>[y(h(a.$t("暂无收藏记录！")),1)])),_:1})])),_:1})):g("",!0),p(D,{modelValue:L.value,"onUpdate:modelValue":e[0]||(e[0]=a=>L.value=a),page:I.page,length:Q.value.length},null,8,["modelValue","page","length"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-5510539f"]]);export{G as default};
