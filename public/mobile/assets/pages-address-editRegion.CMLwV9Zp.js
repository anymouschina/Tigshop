import{am as e,an as a,ao as l,ap as t,aq as o,k as i,l as s,m as r,n,w as u,q as d,T as c,V as m,C as h,d as f,G as p,Q as g,r as b,f as v,ae as _,o as y,t as V,v as w,M as C,ak as $,ar as S}from"./index-Do_Cb7fn.js";import{_ as N}from"./uni-easyinput.DgTgv_xO.js";import{_ as j,a as k}from"./uni-forms.7UC4mlQa.js";import{_ as z}from"./u-loading-icon.rQrrZF_r.js";import{_ as B}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{a as x,_ as q}from"./tig-layout.BV0ZvCt0.js";import{_ as A}from"./save-bottom-box.BM5fwIJO.js";import{n as U}from"./index.Y6J4G1_A.js";import{s as I}from"./selectRegion.DEC1aCwy.js";import{a as M,b as R,u as D}from"./address.Dml38_tY.js";import"./uni-icons.DK0ZiICA.js";import"./u-icon.CBDMG2rO.js";const F=B({name:"u-switch",mixins:[a,l,{props:{loading:{type:Boolean,default:()=>e.switch.loading},disabled:{type:Boolean,default:()=>e.switch.disabled},size:{type:[String,Number],default:()=>e.switch.size},activeColor:{type:String,default:()=>e.switch.activeColor},inactiveColor:{type:String,default:()=>e.switch.inactiveColor},modelValue:{type:[Boolean,String,Number],default:()=>e.switch.value},activeValue:{type:[String,Number,Boolean],default:()=>e.switch.activeValue},inactiveValue:{type:[String,Number,Boolean],default:()=>e.switch.inactiveValue},asyncChange:{type:Boolean,default:()=>e.switch.asyncChange},space:{type:[String,Number],default:()=>e.switch.space}}}],watch:{modelValue:{immediate:!0,handler(e){e!==this.inactiveValue&&this.activeValue}}},data:()=>({bgColor:"#ffffff"}),computed:{isActive(){return this.modelValue===this.activeValue},switchStyle(){let e={};return e.width=t(2*this.size+2),e.height=t(Number(this.size)+2),this.customInactiveColor&&(e.borderColor="rgba(0, 0, 0, 0)"),e.backgroundColor=this.isActive?this.activeColor:this.inactiveColor,e},nodeStyle(){let e={};e.width=t(this.size-this.space),e.height=t(this.size-this.space);const a=this.isActive?t(this.space):t(this.size);return e.transform=`translateX(-${a})`,e},bgStyle(){let e={};return e.width=t(2*Number(this.size)-this.size/2),e.height=t(this.size),e.backgroundColor=this.inactiveColor,e.transform=`scale(${this.isActive?0:1})`,e},customInactiveColor(){return"#fff"!==this.inactiveColor&&"#ffffff"!==this.inactiveColor}},emits:["update:modelValue","change"],methods:{addStyle:o,clickHandler(){if(!this.disabled&&!this.loading){const e=this.isActive?this.inactiveValue:this.activeValue;this.asyncChange||this.$emit("update:modelValue",e),this.$nextTick((()=>{this.$emit("change",e)}))}}}},[["render",function(e,a,l,t,o,f){const p=h,g=i(s("u-loading-icon"),z);return r(),n(p,{class:m(["u-switch cursor-pointer",[e.disabled&&"u-switch--disabled"]]),style:c([f.switchStyle,f.addStyle(e.customStyle)]),onClick:f.clickHandler},{default:u((()=>[d(p,{class:"u-switch__bg",style:c([f.bgStyle])},null,8,["style"]),d(p,{class:m(["u-switch__node",[e.modelValue&&"u-switch__node--on"]]),style:c([f.nodeStyle]),ref:"u-switch__node"},{default:u((()=>[d(g,{show:e.loading,mode:"circle",timingFunction:"linear",color:e.modelValue?e.activeColor:"#AAABAD",size:.6*e.size},null,8,["show","color","size"])])),_:1},8,["class","style"])])),_:1},8,["class","style","onClick"])}],["__scopeId","data-v-09bf48b9"]]),T=B(f({__name:"editRegion",setup(e){const{t:a}=p(),l=g({navbar:"1",return:"1",title:"添加地址"}),t=b(null),o=g({consignee:"",region_ids:[],address:"",mobile:"",telephone:"",email:"",regionNames:"",is_default:0}),c=b(!1),m={consignee:{rules:[{required:!0,errorMessage:a("请您填写收货人姓名")}]},regionNames:{rules:[{required:!0,errorMessage:a("请选择所在地区")},{validateFunction:function(e,l,t,i){return o.region_ids.length<1&&i(a("请选择所在地区")),!0}}]},address:{rules:[{required:!0,errorMessage:a("请您填写详细收货地址")}]},mobile:{rules:[{required:!0,errorMessage:a("请您填写收货人手机号码")},{validateFunction:function(e,l,t,o){return/^(?:(?:\+|00)86)?1[3-9]\d{9}$/.test(l)||o(a("请输入正确的手机号码")),!0}}]}};v((()=>{_((()=>{H.value.setRules(m)}))})),y((e=>{e&&e.id&&(l.title="编辑地址",t.value=e.id,f())}));const f=async()=>{try{const e=await M({id:t.value}),{region_names:a}=e.item;Object.assign(o,e.item),o.regionNames=a.join(" "),c.value=1===o.is_default}catch(e){console.error(e)}},z=e=>{o.regionNames=e.join(" ")},B=b(!1),T=()=>{B.value=!0},H=b(),X=e=>{H.value.validate().then((()=>{o.is_default=c.value?1:0,t.value?L():G()})).catch((e=>{console.log("表单错误信息：",e)}))},G=async()=>{try{const e=await R(o);e.message&&C({title:e.message,icon:"none",duration:1e3}),setTimeout((()=>{$({success:function(e){S("refreshData")}})}),1e3)}catch(e){console.error(e),C({title:e.message,icon:"none",duration:1e3})}},L=async()=>{try{const e=await D({id:t.value,...o});e.message&&C({title:e.message,icon:"none",duration:1e3}),setTimeout((()=>{$({success:function(e){S("refreshData")}})}),1e3)}catch(e){console.error(e),C({title:e.message,icon:"none",duration:1e3})}};return(e,a)=>{const t=i(s("uni-easyinput"),N),m=i(s("uni-forms-item"),j),f=i(s("u-switch"),F),p=h,g=i(s("uni-forms"),k),b=i(s("tig-button"),x),v=i(s("save-bottom-box"),A),_=i(s("tig-layout"),q);return r(),n(p,null,{default:u((()=>[d(_,{specialNum:65},{default:u((()=>[d(U,{parameter:l},null,8,["parameter"]),d(p,{class:"address-edit-main"},{default:u((()=>[d(p,{class:"address-edit-content"},{default:u((()=>[d(g,{ref_key:"formRef",ref:H,modelValue:o,"label-width":"165rpx"},{default:u((()=>[d(m,{label:e.$t("收货人："),name:"consignee",required:""},{default:u((()=>[d(t,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:o.consignee,"onUpdate:modelValue":a[0]||(a[0]=e=>o.consignee=e),placeholder:e.$t("请输入姓名")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),d(m,{label:e.$t("所在地区："),name:"regionNames",required:""},{default:u((()=>[d(t,{onIconClick:T,onFocus:T,style:{"background-color":"#fff"},suffixIcon:"right",primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:o.regionNames,"onUpdate:modelValue":a[1]||(a[1]=e=>o.regionNames=e),placeholder:e.$t("点击选择所在地区")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),d(m,{label:e.$t("详细地址："),name:"address",required:""},{default:u((()=>[d(t,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:o.address,"onUpdate:modelValue":a[2]||(a[2]=e=>o.address=e),placeholder:e.$t("请您填写详细收货地址")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),d(m,{label:e.$t("手机号码："),name:"mobile",required:""},{default:u((()=>[d(t,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:o.mobile,"onUpdate:modelValue":a[3]||(a[3]=e=>o.mobile=e),placeholder:e.$t("请输入手机号码")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),d(m,{label:e.$t("固定电话："),name:"telephone"},{default:u((()=>[d(t,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:o.telephone,"onUpdate:modelValue":a[4]||(a[4]=e=>o.telephone=e),placeholder:e.$t("请输入固定电话")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),d(m,{label:e.$t("邮箱地址："),name:"email"},{default:u((()=>[d(t,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:o.email,"onUpdate:modelValue":a[5]||(a[5]=e=>o.email=e),placeholder:e.$t("请输入邮箱地址")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),d(m,{label:e.$t("默认地址"),name:"email"},{default:u((()=>[d(p,{class:"switch"},{default:u((()=>[d(f,{modelValue:c.value,"onUpdate:modelValue":a[6]||(a[6]=e=>c.value=e),activeColor:"var(--general)"},null,8,["modelValue"])])),_:1})])),_:1},8,["label"])])),_:1},8,["modelValue"])])),_:1})])),_:1}),d(v,{height:65,backgroundColor:"#fff"},{default:u((()=>[d(p,{class:"btn-box"},{default:u((()=>[d(b,{style:{width:"100%"},onClick:X},{default:u((()=>[V(w(e.$t("提交")),1)])),_:1})])),_:1})])),_:1})])),_:1}),d(I,{show:B.value,"onUpdate:show":a[7]||(a[7]=e=>B.value=e),modelValue:o.region_ids,"onUpdate:modelValue":a[8]||(a[8]=e=>o.region_ids=e),onSendRegionNames:z},null,8,["show","modelValue"])])),_:1})}}}),[["__scopeId","data-v-e2677418"]]);export{T as default};
