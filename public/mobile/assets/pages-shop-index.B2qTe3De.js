import{d as e,G as o,R as s,a5 as a,k as t,l,m as n,n as u,w as r,q as c,T as d,as as p,v as i,t as _,x as m,V as h,M as f,a9 as y,L as g,C as v,B as k,N as I,y as b,J as x,F as j,r as w,o as $,Q as D,p as S}from"./index-Ce4FtYLL.js";import{_ as C}from"./tig-layout.nM03J4I_.js";import{s as R,a as q,b as z}from"./shop.TpH5rL7F.js";import{n as B,t as F,i as L,a as M,c as A,w as G,b as J,d as N,e as O,p as P}from"./index.BklJ8UsZ.js";import{_ as Q}from"./tig-image.bUT1hZK2.js";import{_ as T}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{n as U}from"./index.v2UirNFN.js";import"./u-loading-icon.CaEeBur7.js";import"./u-icon.BDQrrWMI.js";import"./format-price.C2WNeN1M.js";import"./home.BFekSb01.js";const V=T(e({__name:"index",props:{module:{},shopInfo:{}},emits:["refreshShopDetail"],setup(e,{emit:b}){const{t:x}=o(),j=e,w=b,$=s((()=>{let e=[];for(let o=1;o<=10;o++)e.push(`https://lyecs2.oss-cn-zhangjiakou.aliyuncs.com/static/mini/bg/${o}.jpg`);return e})),D=s((()=>{let e;return e=0==j.module.background_default&&j.module.custom_pic.pic_url?a(j.module.custom_pic.pic_url):$.value[j.module.background_default-1],e})),S=s((()=>j.shopInfo.collect_shop?x("已收藏"):x("收藏"))),C=()=>{j.shopInfo.collect_shop?z():q()},q=async()=>{try{await R({shop_id:j.shopInfo.shop_id});f({title:x("收藏成功")}),w("refreshShopDetail",j.shopInfo.shop_id)}catch(e){console.error(e)}},z=async()=>{y({title:x("提示"),content:x("确认要取消收藏店铺吗？"),success:async e=>{if(e.confirm)try{await R({shop_id:j.shopInfo.shop_id});f({title:x("操作成功")}),w("refreshShopDetail",j.shopInfo.shop_id)}catch(o){console.error(o)}}})},B=()=>{g({url:`/pages/search/index?shop_id=${j.shopInfo.shop_id}`})},F=()=>{g({url:`/pages/search/result?&shop_id=${j.shopInfo.shop_id}`})},L=()=>{g({url:`/pages/shop/category?shop_id=${j.shopInfo.shop_id}`})};return(e,o)=>{const s=v,a=k,f=I,y=t(l("tig-image"),Q);return n(),u(s,{class:h("module-ad-con module-store_info ad-store_style__"+e.module.style)},{default:r((()=>[e.module?(n(),u(s,{key:0,class:"module-ad-content"},{default:r((()=>[c(s,{class:"cap-store-banner"},{default:r((()=>[c(s,{class:"cap-store-banner__cover",style:d("background-image: url("+D.value+");")},{default:r((()=>[c(s,{class:"cap-store-banner__cover-mask"})])),_:1},8,["style"]),c(s,{class:"cap-store-nav-warp"},{default:r((()=>[c(s,{class:"cap-store-nav-con"},{default:r((()=>[c(s,{class:"store-search-con"},{default:r((()=>[c(s,{id:"search",onClick:B},{default:r((()=>[c(a,{class:"module_ico module-ico-sousuo"}),c(f,{type:"text",class:"search-input",placeholder:e.$t("搜商品")},null,8,["placeholder"])])),_:1})])),_:1}),c(s,{class:"store-nav-con"},{default:r((()=>[c(s,{class:"store-nav-item active"},{default:r((()=>[p("a",{class:"store-nav-item-a"},i(e.$t("精选")),1)])),_:1}),c(s,{class:"store-nav-item"},{default:r((()=>[p("a",{class:"store-nav-item-a",onClick:F},i(e.$t("商品")),1)])),_:1}),c(s,{class:"store-nav-item"},{default:r((()=>[p("a",{class:"store-nav-item-a",onClick:L},i(e.$t("分类")),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(s,{class:"cap-store-banner__inner"},{default:r((()=>[c(s,{class:"cap-store-banner__content"},{default:r((()=>[c(s,{class:"cap-store-banner__logo"},{default:r((()=>[c(y,{src:e.shopInfo.shop_logo,"onUpdate:src":o[0]||(o[0]=o=>e.shopInfo.shop_logo=o),mode:"widthFix"},null,8,["src"])])),_:1}),c(s,{class:"cap-store-banner__right-content"},{default:r((()=>[c(s,{class:"cap-store-banner__right-content-title--middle"},{default:r((()=>[_(i(e.shopInfo.shop_title),1)])),_:1}),c(s,{class:"cap-store-banner__sum-content"},{default:r((()=>[c(s,{class:"cap-store-banner__sum-content-total"},{default:r((()=>[_(i(e.$t("全部商品"))+" "+i(e.shopInfo.product_count),1)])),_:1}),c(s,{class:"cap-store-banner__sum-content-total"},{default:r((()=>[_(i(e.$t("新品"))+" "+i(e.shopInfo.new_product_count),1)])),_:1})])),_:1})])),_:1}),c(s,{class:"store-collect-button-con",onClick:C},{default:r((()=>[c(s,{class:"store-collect-button"},{default:r((()=>[_(i(S.value),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):m("",!0)])),_:1},8,["class"])}}}),[["__scopeId","data-v-71d7a41a"]]),E=T(e({__name:"shopModules",props:{modules:{},shopInfo:{}},emits:["refreshShopDetail"],setup(e,{emit:o}){const s=e,a=o;return(e,o)=>{const t=v;return n(),u(t,{style:{height:"100%"}},{default:r((()=>[(n(!0),b(j,null,x(e.modules,((e,t)=>(n(),b(j,{key:t},["notice"==e.type?(n(),u(B,{key:0,module:e.module},null,8,["module"])):m("",!0),"title_ad"==e.type?(n(),u(F,{key:1,module:e.module},null,8,["module"])):m("",!0),"image_ad"==e.type?(n(),u(L,{key:2,module:e.module},null,8,["module"])):m("",!0),"image_nav"==e.type?(n(),u(M,{key:3,module:e.module},null,8,["module"])):m("",!0),"coupon"==e.type?(n(),u(A,{key:4,module:e.module,shop_id:s.shopInfo.shop_id},null,8,["module","shop_id"])):m("",!0),"white_blank"==e.type?(n(),u(G,{key:5,module:e.module},null,8,["module"])):m("",!0),"white_line"==e.type?(n(),u(J,{key:6,module:e.module},null,8,["module"])):m("",!0),"image_square_ad"==e.type?(n(),u(N,{key:7,module:e.module},null,8,["module"])):m("",!0),"image_hotarea"==e.type?(n(),u(O,{key:8,module:e.module},null,8,["module"])):m("",!0),"shop_info"==e.type?(n(),u(V,{key:9,module:e.module,shopInfo:s.shopInfo,onRefreshShopDetail:o[0]||(o[0]=e=>a("refreshShopDetail"))},null,8,["module","shopInfo"])):m("",!0),"product"==e.type?(n(),u(P,{key:10,module:e.module,module_index:e.module_index},null,8,["module","module_index"])):m("",!0)],64)))),128))])),_:1})}}}),[["__scopeId","data-v-4a7e8cc2"]]),H=e({__name:"index",setup(e){const o=w(0);$((e=>{e&&e.shop_id&&(o.value=e.shop_id,_(),p())}));const s=D({navbar:"1",return:"1",title:"店铺详情"}),a=w([]),d=w(0),p=async()=>{try{const e=await q(o.value);a.value=e.module_list,d.value=e.decorate_id}catch(e){console.error(e)}};S("decorate_id",d);const i=w({}),_=async()=>{try{const e=await z(o.value);i.value=e.item,s.title=e.item.shop_title}catch(e){console.error(e)}};return(e,d)=>{const p=v,h=t(l("tig-layout"),C);return n(),u(h,{shopId:o.value},{default:r((()=>[c(U,{parameter:s},null,8,["parameter"]),c(p,{class:"decorate-page-window"},{default:r((()=>[Object.keys(i.value).length>0?(n(),u(E,{key:0,modules:a.value,onRefreshShopDetail:_,shopInfo:i.value},null,8,["modules","shopInfo"])):m("",!0)])),_:1})])),_:1},8,["shopId"])}}});export{H as default};
