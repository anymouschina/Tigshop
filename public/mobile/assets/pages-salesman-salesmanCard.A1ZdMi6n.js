import{e as a,r as e,Q as s,g as t,H as l,L as n,k as i,c,w as o,i as r,v as u,z as d,o as m,a as p,b as f,t as _,A as g,E as v,F as C,K as b,d as h,T as x,M as y,a3 as k,_ as j}from"./index-BKXBH4vI.js";import{_ as w}from"./tig-image.BbZoJ9nS.js";import{_ as $}from"./format-price.0qAAshfo.js";import{_ as D}from"./tig-fixed-placeholder.BHdfEiP8.js";import{_ as z}from"./tig-layout.DMoUsUKf.js";import{a as I,c as S}from"./salesman.CxOPGtEY.js";import{e as T}from"./empty.CM0AaKdC.js";import"./empty.vue_vue_type_style_index_0_scoped_b2f6c60f_lang.BgK1t0Rd.js";const U=j(a({__name:"salesmanCard",setup(a){const j=e({}),U=e([]),A=s({page:1,page_size:15}),B=e(0),M=e(null),E=[{name:"名片",icon:"icon-mingpian",url:""},{name:"商城",icon:"icon-shangcheng-",url:"/pages/index/index"},{name:"我的",icon:"icon-wode",url:"/pages/user/index"}],F=e(!1),H=async()=>{F.value=!0;try{const a=await I(A);U.value=[...U.value,...a.filter_result],B.value=a.total}catch(a){}finally{F.value=!1}};return t((a=>{if(a&&a.salesman_id){M.value=Number(a.salesman_id);l("bindSalesmanId")||n("bindSalesmanId",M.value),(async()=>{try{const a=await S(M.value);j.value=a.item}catch(a){}})()}H()})),i((()=>{A.page<Math.ceil(B.value/A.page_size)&&(A.page++,H())})),(a,e)=>{const s=u(d("tig-image"),w),t=r,l=u(d("format-price"),$),n=h,i=u(d("tig-fixed-placeholder"),D),I=u(d("tig-layout"),z);return m(),c(t,null,{default:o((()=>[p(I,{needSafeTop:!0,safeTopBgColor:"#f5f5f5"},{default:o((()=>[p(t,{class:"salesmanCard-top"},{default:o((()=>[p(t,{class:"salesmanCard-top-content"},{default:o((()=>[p(t,{class:"salesmanCard-top-left"},{default:o((()=>[p(t,{class:"salesmanCard-top-left-img"},{default:o((()=>[p(s,{src:j.value.avatar,"onUpdate:src":e[0]||(e[0]=a=>j.value.avatar=a)},null,8,["src"])])),_:1})])),_:1}),p(t,{class:"salesmanCard-top-right"},{default:o((()=>[p(t,{class:"salesmanCard-top-right-mobile"},{default:o((()=>[f(_(j.value.mobile),1)])),_:1}),p(t,{class:"salesmanCard-top-right-name"},{default:o((()=>[f(_(j.value.nickname),1)])),_:1})])),_:1})])),_:1})])),_:1}),p(t,{class:"salesmanCard-list"},{default:o((()=>[p(t,{class:"salesmanCard-list-title"},{default:o((()=>[f(_(a.$t("推荐商品")),1)])),_:1}),p(t,{class:"salesmanCard-list-content"},{default:o((()=>[(m(!0),v(C,null,b(U.value,(a=>(m(),c(t,{key:a.product_id,class:"salesmanCard-list-content-item",onClick:e=>(a=>{let e=M.value?`/pages/productDetail/index?id=${a}&salesman_id=${M.value}`:`/pages/productDetail/index?id=${a}`;y({url:e})})(a.product_id)},{default:o((()=>[p(t,{class:"salesmanCard-list-content-item-img"},{default:o((()=>[p(s,{src:a.pic_url,"onUpdate:src":e=>a.pic_url=e},null,8,["src","onUpdate:src"])])),_:2},1024),p(t,{class:"content-item-text"},{default:o((()=>[p(t,{class:"item-text-name line2"},{default:o((()=>[f(_(a.product_name),1)])),_:2},1024),p(t,{class:"item-text-price"},{default:o((()=>[p(l,{priceData:a.product_price},null,8,["priceData"]),p(n,{class:"iconfont-h5 icon-gouwuche3"})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),F.value||0!==B.value?g("",!0):(m(),c(T,{key:0,styles:{width:"320rpx",height:"320rpx"}}))])),_:1}),p(i,{backgroundColor:"#fff"},{default:o((()=>[p(t,{class:"bottom-btns"},{default:o((()=>[(m(),v(C,null,b(E,((e,s)=>p(t,{key:s,class:x(["bottom-btns-item",{active:0===s}]),onClick:a=>{var s;(s=e.url)&&k({url:s})}},{default:o((()=>[p(t,{class:x(["bottom-btns-item-icon iconfont-h5",e.icon])},null,8,["class"]),p(t,{class:"bottom-btns-item-text"},{default:o((()=>[f(_(a.$t(e.name)),1)])),_:2},1024)])),_:2},1032,["class","onClick"]))),64))])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-b9fecfa1"]]);export{U as default};
