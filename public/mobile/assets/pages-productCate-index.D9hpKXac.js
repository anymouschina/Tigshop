import{c as e,_ as a,b as t}from"./tig-layout.BpNdXByQ.js";import{Y as l,e as s,Z as c,r as o,q as u,y as r,c as n,o as d,i,w as p,a as m,z as y,H as f,d as g,b as _,t as v,D as h,T as I,J as C,F as b,$ as k,P as w,_ as x,a0 as S,a1 as L,S as N,E as $,R as j,O as M,a2 as U,Q as z,x as D,A as P,C as T,N as B,a3 as A,u as R,a4 as V,f as E}from"./index-BKzbZvRR.js";import{_ as F}from"./tig-image.DrOwWlV9.js";import{m as H,_ as K}from"./masonry.XQRK2NFB.js";import{g as q}from"./home.Cp7aP7xW.js";import{u as O}from"./useList.qLYpICh7.js";import{_ as W}from"./format-price.kSnuguuz.js";import{s as G}from"./specification.DeG19GHJ.js";import"./activityCard.DDPb7Kxq.js";import"./product.BqL6tr7k.js";import"./uni-icons.DELFdrY8.js";import"./uni-number-box.CzE6YkX8.js";const J=e=>l({url:"category/category/list?id="+e,method:"get",cancelPrevious:!0,requestKey:"categoryList"}),Q=x(s({__name:"styleOneCate",props:{catId:{type:Number,default:0},catIdModifiers:{}},emits:["update:catId"],setup(t){const s=c(t,"catId"),x=o([]),S=o([]),L=o([]),N=o(!1),$=o(!0),j=o(0),M=()=>{w({url:"/pages/search/index"})},U=(e,a)=>{s.value=e,a&&(S.value=a.children)};return(async()=>{N.value=!0;try{const e=await l({url:"category/category/all",method:"get"});x.value=e||[]}catch(e){console.error(e)}})(),(async()=>{try{const e=await l({url:"category/category/hot",method:"get"});L.value=e||[],$.value=!1}catch(e){console.error(e)}})(),(t,l)=>{const c=u(r("tig-navbar"),e),o=i,w=g,z=u(r("tig-image"),F),D=k,P=u(r("tig-layout"),a);return d(),n(o,null,{default:p((()=>[m(P,null,{default:p((()=>[m(c,{showLeft:!1,title:"产品分类"}),$.value||!N.value?(d(),n(o,{key:0,class:"page-loading"},{default:p((()=>[m(o,{class:"ico"})])),_:1})):y("",!0),N.value?(d(),n(o,{key:1,class:"pageMain"},{default:p((()=>[0==j.value?(d(),n(o,{key:0,class:"productSort"},{default:p((()=>[m(o,{class:"header acea-row row-center-wrapper"},{default:p((()=>[m(o,{onClick:f(M,["stop"]),class:"acea-row row-between-wrapper input"},{default:p((()=>[m(w,{class:"iconfont-h5 icon-sousuo"}),m(o,{class:"txt"},{default:p((()=>[_(v(t.$t("点击搜索商品信息")),1)])),_:1})])),_:1})])),_:1}),m(o,{class:"aside"},{default:p((()=>[m(o,{class:I("item acea-row row-center-wrapper "+(0==s.value?"on":"")),onClick:l[0]||(l[0]=e=>U(0))},{default:p((()=>[m(w,null,{default:p((()=>[_(v(t.$t("推荐")),1)])),_:1})])),_:1},8,["class"]),(d(!0),h(b,null,C(x.value,((e,a)=>(d(),n(o,{key:a,class:I("item acea-row row-center-wrapper "+(s.value==e.categoryId?"on":"")),"data-cat_id":e.categoryId,onClick:a=>U(e.categoryId,e)},{default:p((()=>[e.catShortName?(d(),n(w,{key:0},{default:p((()=>[_(v(e.catShortName),1)])),_:2},1024)):(d(),n(w,{key:1},{default:p((()=>[_(v(e.categoryName),1)])),_:2},1024))])),_:2},1032,["class","data-cat_id","onClick"])))),128))])),_:1}),m(o,{class:"conter"},{default:p((()=>[$.value?y("",!0):(d(),h(b,{key:0},[0==s.value?(d(),n(o,{key:0,class:"listw"},{default:p((()=>[m(o,{class:"title acea-row row-center-wrapper"},{default:p((()=>[m(o,{class:"name"},{default:p((()=>[_(v(t.$t("热门分类")),1)])),_:1})])),_:1}),m(o,{class:"list acea-row"},{default:p((()=>[(d(!0),h(b,null,C(L.value,((e,a)=>(d(),n(D,{key:a,"hover-class":"none",url:"/pages/search/result?categoryId="+e.categoryId,class:"item acea-row row-column row-middle"},{default:p((()=>[m(o,{class:"picture"},{default:p((()=>[m(z,{src:e.categoryPic,mode:"aspectFill"},null,8,["src"])])),_:2},1024),m(o,{class:"name line1"},{default:p((()=>[_(v(e.categoryName),1)])),_:2},1024)])),_:2},1032,["url"])))),128))])),_:1})])),_:1})):y("",!0),s.value>0?(d(!0),h(b,{key:1},C(S.value,((e,a)=>(d(),n(o,{class:"listw",key:a,id:"b"+a},{default:p((()=>[m(o,{class:"title acea-row row-center-wrapper"},{default:p((()=>[m(D,{"hover-class":"none",url:"/pages/search/result?categoryId="+e.categoryId,class:"item acea-row row-column row-middle"},{default:p((()=>[m(o,{class:"name"},{default:p((()=>[_(v(e.categoryName),1)])),_:2},1024)])),_:2},1032,["url"])])),_:2},1024),m(o,{class:"list acea-row"},{default:p((()=>[(d(!0),h(b,null,C(e.children,((e,a)=>(d(),n(D,{key:a,"hover-class":"none",url:"/pages/search/result?categoryId="+e.categoryId,class:"item acea-row row-column row-middle"},{default:p((()=>[e.categoryPic?(d(),n(o,{key:0,class:"picture"},{default:p((()=>[m(z,{src:e.categoryPic},null,8,["src"])])),_:2},1024)):y("",!0),m(o,{class:"name line1"},{default:p((()=>[_(v(e.categoryName),1)])),_:2},1024)])),_:2},1032,["url"])))),128))])),_:2},1024)])),_:2},1032,["id"])))),128)):y("",!0)],64))])),_:1})])),_:1})):y("",!0)])),_:1})):y("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-8b8aeac9"]]),Y=x(s({__name:"search",props:{placeholder:{type:String,default:"搜索商品"},needMenu:{type:Boolean,default:!1}},emits:["menu","search"],setup:(e,{emit:a})=>(a,t)=>{const l=g,s=i;return d(),n(s,{class:"search-box"},{default:p((()=>[e.needMenu?(d(),n(s,{key:0,class:"btn-box",onClick:t[0]||(t[0]=e=>a.$emit("menu"))},{default:p((()=>[m(l,{class:"iconfont-h5 icon-shouye"})])),_:1})):y("",!0),m(s,{class:"search-content",onClick:t[1]||(t[1]=e=>a.$emit("search"))},{default:p((()=>[m(l,{class:"iconfont-h5 icon-sousuo1"}),m(l,{class:"placeholder-text"},{default:p((()=>[_(v(a.$t(e.placeholder)),1)])),_:1})])),_:1})])),_:1})}}),[["__scopeId","data-v-9ce25180"]]),Z=x(s({__name:"menu",props:{currentCateId:{},currentCateIdModifiers:{}},emits:S(["change"],["update:currentCateId"]),setup(e,{emit:a}){const t=c(e,"currentCateId"),l=a,s=L([]);(async()=>{try{const e=await J(0);s.value=e,t.value=e[0].categoryId}catch(e){console.error(e)}})();return(e,a)=>{const c=i,o=N;return d(),n(c,{class:"menu-content"},{default:p((()=>[m(o,{"scroll-y":"true",class:"menu-scroll"},{default:p((()=>[(d(!0),h(b,null,C(s.value,((e,a)=>(d(),n(c,{key:e.categoryId,class:I(["menu-item",{active:t.value===e.categoryId}]),onClick:a=>{var s;(s=e.categoryId)!==t.value&&(t.value=s,l("change",s))}},{default:p((()=>[_(v(e.categoryName),1)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1})}}}),[["__scopeId","data-v-24b9461b"]]),X=x(s({__name:"selectCate",props:S({currentCateId:{type:Number},type:{type:String,default:""}},{subCurrentCateId:{default:0},subCurrentCateIdModifiers:{},menuList:{default:[]},menuListModifiers:{}}),emits:S(["change"],["update:subCurrentCateId","update:menuList"]),setup(e,{emit:a}){const{t:l}=$(),s=e,f=a,k=c(e,"subCurrentCateId"),w=o(0),x=c(e,"menuList"),S=e=>{e!==k.value&&(k.value=e,f("change"))},L=e=>{w.value=e.detail.scrollLeft},U=()=>{x.value.length&&(D.value=!0)},z=j((()=>{var e;return null==(e=x.value.find((e=>e.categoryId===k.value)))?void 0:e.categoryName}));M((()=>s.currentCateId),(async e=>{e&&e>0&&await(async e=>{try{const a=await J(e);x.value=[{categoryId:0,categoryName:l("全部商品")},...a],f("change"),w.value=0}catch(a){console.error(a)}})(e)}));const D=o(!1);return(a,l)=>{const s=i,c=N,o=g,f=u(r("tig-popup"),t);return d(),n(s,{class:I(["cate-box",{main:"main"===e.type}])},{default:p((()=>[m(c,{"scroll-x":!0,class:"cate-scroll","scroll-with-animation":!0,"scroll-left":w.value,onScroll:L},{default:p((()=>[(d(!0),h(b,null,C(x.value,(a=>(d(),h(b,{key:a.categoryId},[a.categoryName?(d(),n(s,{key:0,class:"cate-item",onClick:e=>S(a.categoryId)},{default:p((()=>[m(s,{class:I(["item-text",{active:a.categoryId===k.value,main:"main"===e.type}])},{default:p((()=>[_(v(a.categoryName),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])):y("",!0)],64)))),128))])),_:1},8,["scroll-left"]),m(s,{class:"cate-btn",onClick:U},{default:p((()=>[m(o,{class:I(["iconfont-h5 icon-xiajiantou",{"icon-xiajiantou1-copy":"main"===e.type}])},null,8,["class"])])),_:1}),m(f,{show:D.value,"onUpdate:show":l[1]||(l[1]=e=>D.value=e),position:"top",zIndex:999,showClose:!1,backgroundColor:"#fff"},{default:p((()=>[m(s,{class:"cate-popup"},{default:p((()=>[m(s,{class:"cate-popup-title"},{default:p((()=>[_(v(z.value),1)])),_:1}),m(s,{class:"cate-popup-list-box"},{default:p((()=>[m(s,{class:"cate-popup-list"},{default:p((()=>[(d(!0),h(b,null,C(x.value,(a=>(d(),n(s,{key:a.categoryId,class:"list-item popup-item",onClick:e=>S(a.categoryId)},{default:p((()=>[m(s,{class:I(["item-text popup-text line1",{active:a.categoryId===k.value,main:"main"===e.type}])},{default:p((()=>[_(v(a.categoryName),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),m(s,{class:"cate-popup-close",onClick:l[0]||(l[0]=e=>D.value=!1)},{default:p((()=>[_(v(a.$t("点击收起")),1),m(o,{class:"iconfont-h5 icon-xiajiantou1-copy"})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1},8,["class"])}}}),[["__scopeId","data-v-f7d2d388"]]),ee=x(s({__name:"styleTwoCate",props:{height:{type:[Number,String],default:0}},setup(a){U((e=>({"597ddb5a":x.value})));const t=o(0),l=o(0),s=o([]),c=a,f=z({categoryId:0,page:1,size:10}),{data:g,getList:_,reachBottom:v,isLoading:h,total:I}=O(q,{params:f,path:{dataKey:"records"},needReachBottom:!1}),C=()=>{g.value=[],f.page=1,0===l.value?f.categoryId=t.value:f.categoryId=l.value,_()},b=()=>{l.value=0,g.value=[],s.value=[],f.page=1},k=()=>{B({url:"/pages/index/index",success:function(){}})},w=()=>{B({url:"/pages/search/index"})},x=j((()=>`calc(${c.height} - 90rpx)`));return(a,c)=>{const o=u(r("tig-navbar"),e),f=i,_=N,x=u(r("up-empty"),D);return d(),n(f,null,{default:p((()=>[m(o,{title:"产品分类",showLeft:!1}),m(Y,{needMenu:!0,onMenu:k,onSearch:w}),m(f,{class:"scroll-box"},{default:p((()=>[m(f,{class:"content-box"},{default:p((()=>[m(f,{class:"side"},{default:p((()=>[m(Z,{currentCateId:t.value,"onUpdate:currentCateId":c[0]||(c[0]=e=>t.value=e),onChange:b},null,8,["currentCateId"])])),_:1}),m(f,{class:"list-box"},{default:p((()=>[m(X,{onChange:C,menuList:s.value,"onUpdate:menuList":c[1]||(c[1]=e=>s.value=e),subCurrentCateId:l.value,"onUpdate:subCurrentCateId":c[2]||(c[2]=e=>l.value=e),currentCateId:t.value},null,8,["menuList","subCurrentCateId","currentCateId"]),m(f,{class:"list-content"},{default:p((()=>[!P(h)&&P(I)>0?(d(),n(_,{key:0,"scroll-y":!0,class:"list-scroll",onScrolltolower:P(v)},{default:p((()=>[m(H,{commodityList:P(g)},null,8,["commodityList"])])),_:1},8,["onScrolltolower"])):y("",!0),P(h)||0!==P(I)?y("",!0):(d(),n(f,{key:1,class:"empty-box"},{default:p((()=>[m(x,{icon:P(T)("salesman/no_order.png"),text:a.$t("暂无数据")},null,8,["icon","text"])])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-b0883b99"]]),ae=x(s({__name:"styleThreeCate",props:{height:{type:[Number,String],default:0}},setup(a){U((e=>({"331b39b8":ee.value})));const t=o(0),l=o(0),s=o([]),c=a,f=z({categoryId:0,page:1,size:10}),{data:I,getList:k,reachBottom:w,isLoading:x,total:S}=O(q,{params:f,path:{dataKey:"records"},needReachBottom:!1}),L=()=>{I.value=[],f.page=1,0===l.value?f.categoryId=t.value:f.categoryId=l.value,k()},$=()=>{l.value=0,I.value=[],s.value=[],f.page=1},M=()=>{B({url:"/pages/index/index"})},R=()=>{B({url:"/pages/search/index"})},V=e=>{B({url:`/pages/product/index?id=${e}`})},E=o(0),F=o(),H=o({}),J=()=>{F.value.handleShowPopup(),H.value.isCheck=!1},Q=()=>{E.value=0},ee=j((()=>`calc(${c.height} - 90rpx)`));return(a,c)=>{const o=u(r("tig-navbar"),e),f=i,k=u(r("tig-lazy-image"),K),j=u(r("format-price"),W),U=u(r("up-loading-icon"),A),z=g,B=N,q=u(r("up-empty"),D);return d(),n(f,null,{default:p((()=>[m(o,{title:"产品分类",showLeft:!1}),m(Y,{needMenu:!0,onMenu:M,onSearch:R}),m(f,{class:"scroll-box"},{default:p((()=>[m(f,{class:"content-box"},{default:p((()=>[m(f,{class:"side"},{default:p((()=>[m(Z,{currentCateId:t.value,"onUpdate:currentCateId":c[0]||(c[0]=e=>t.value=e),onChange:$},null,8,["currentCateId"])])),_:1}),m(f,{class:"list-box"},{default:p((()=>[m(X,{type:"main",onChange:L,menuList:s.value,"onUpdate:menuList":c[1]||(c[1]=e=>s.value=e),subCurrentCateId:l.value,"onUpdate:subCurrentCateId":c[2]||(c[2]=e=>l.value=e),currentCateId:t.value},null,8,["menuList","subCurrentCateId","currentCateId"]),m(f,{class:"list-content"},{default:p((()=>[!P(x)&&P(S)>0?(d(),n(B,{key:0,"scroll-y":!0,class:"list-scroll",onScrolltolower:P(w)},{default:p((()=>[m(f,{class:"product-list"},{default:p((()=>[(d(!0),h(b,null,C(P(I),(e=>(d(),n(f,{class:"product-item",key:e.productId},{default:p((()=>[m(f,{class:"item-left",onClick:a=>V(e.productId)},{default:p((()=>[m(k,{src:e.picThumb},null,8,["src"]),0==e.productStock||0==e.productStatus?(d(),n(f,{key:0,class:"product-status-box"},{default:p((()=>[m(f,{class:"outsale"},{default:p((()=>[_(v(a.$t(0==e.productStock?"已售罄":"已下架")),1)])),_:2},1024)])),_:2},1024)):y("",!0)])),_:2},1032,["onClick"]),m(f,{class:"item-right"},{default:p((()=>[m(f,{class:"item-right-title line2",onClick:a=>V(e.productId)},{default:p((()=>[_(v(e.productName),1)])),_:2},1032,["onClick"]),m(f,{class:"item-right-price"},{default:p((()=>[m(j,{decimalsStyle:{fontSize:"24rpx",fontWeight:"bold"},currencyStyle:{fontSize:"23rpx",fontWeight:"bold"},fontStyle:{fontSize:"32rpx"},priceData:e.productPrice},null,8,["priceData"])])),_:2},1024),m(f,{class:"buy_icon"},{default:p((()=>[m(f,{class:"buy_btn",onClick:a=>(e=>{e.isCheck||(E.value=e.productId,e.isCheck=!0,H.value=e)})(e)},{default:p((()=>[e.isCheck?(d(),n(U,{key:0,mode:"circle"})):(d(),n(z,{key:1,class:"iconfont-h5 icon-gouwuche3 buy_btn_icon"}))])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["onScrolltolower"])):y("",!0),P(x)||0!==P(S)?y("",!0):(d(),n(f,{key:1,class:"empty-box"},{default:p((()=>[m(q,{icon:P(T)("salesman/no_order.png"),text:a.$t("暂无数据")},null,8,["icon","text"])])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1}),m(G,{ref_key:"specificationRef",ref:F,modelValue:E.value,"onUpdate:modelValue":c[3]||(c[3]=e=>E.value=e),onAddCardSucceed:c[4]||(c[4]=()=>{}),onLoadEnd:J,onClose:Q},null,8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-14b6a88e"]]),te=x(s({__name:"index",setup(e){const t=R(),l=V(),s=o(0);E((e=>{e&&e.categoryId&&(s.value=e.categoryId)}));const c=j((()=>`calc(${t.windowInfo.screenHeight}px - var(${l.currentActiveValue>-1?"--tabbar-height":"--safe-bottom"}) - var(--nav-height))`));return(e,l)=>{const o=u(r("tig-layout"),a),f=i;return d(),n(f,null,{default:p((()=>[m(o,null,{default:p((()=>[1===P(t).categoryDecorateType?(d(),n(Q,{key:0,catId:s.value,"onUpdate:catId":l[0]||(l[0]=e=>s.value=e)},null,8,["catId"])):y("",!0),2===P(t).categoryDecorateType?(d(),n(ee,{key:1,height:c.value},null,8,["height"])):y("",!0),3===P(t).categoryDecorateType?(d(),n(ae,{key:2,height:c.value},null,8,["height"])):y("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-99634b55"]]);export{te as default};
