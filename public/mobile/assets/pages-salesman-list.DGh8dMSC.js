import{d as a,a3 as e,G as s,u as t,ac as l,Q as r,r as o,o as c,e as i,k as u,l as n,m as d,n as p,w as _,q as m,y as f,J as v,F as h,x as g,s as b,C as y,V as x,t as j,v as C,W as k,X as w,E as D,L as z,B as S,D as U}from"./index-Do_Cb7fn.js";import{_ as V}from"./tig-image.D5KdQk-t.js";import{_ as q}from"./format-price.D2lH_-yv.js";import{g as B,_ as I}from"./tig-layout.BV0ZvCt0.js";import{s as $}from"./searchInput.Co29IpPQ.js";import{e as H}from"./empty.D3RAhSOu.js";import{_ as N}from"./share.vue_vue_type_script_setup_true_lang.-wPDGpyi.js";import{a as W}from"./salesman.Chs56Hn_.js";import{_ as E}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-loading-icon.rQrrZF_r.js";import"./u-icon.CBDMG2rO.js";import"./u-input.D5cVF6K1.js";import"./empty.vue_vue_type_style_index_0_scoped_b2f6c60f_lang.B7spAC_x.js";import"./tig-qrcode.DKgN6Bad.js";import"./save-bottom-box.BM5fwIJO.js";import"./useCurrency.CIGGLYsX.js";const F=E(a({__name:"list",setup(a){e((a=>({"2ba84727":b(E)+"px",b29c9878:b(J)+"px","78ef9668":b(F)+"px","3eeebb0c":b(G)}))),s(),t(),l();const{height:E,contentHeight:F,contentWidth:G,statusBarHeight:J}=B(60),L=r({product_name:"",sort_field:"add_time",sort_order:"desc",page:1,page_size:15}),M=o(0),Q=o("add_time"),X=o([{label:"最新",value:"add_time"},{label:"销量",value:"virtual_sales"},{label:"价格",value:"product_price",sort_order:"desc"}]),A=()=>{L.page=1,L.sort_order="desc",R.value=[]},K=()=>{L.product_name="",A(),T()},O=a=>{A(),T()},P=o(!1),R=o([]),T=async()=>{P.value=!0;try{const a=await W(L);R.value=[...R.value,...a.filter_result],M.value=a.total}catch(a){console.error(a)}finally{P.value=!1}},Y=o({}),Z=o(!1);return c((()=>{T()})),i((()=>{L.page<Math.ceil(M.value/L.page_size)&&(L.page++,T())})),(a,e)=>{const s=y,t=S,l=u(n("tig-image"),V),r=u(n("format-price"),q),o=U,c=u(n("tig-layout"),I);return d(),p(s,null,{default:_((()=>[m(c,null,{default:_((()=>[m(s,{class:"sticky"},{default:_((()=>[m(s,{class:"salesman-menu"},{default:_((()=>[m(s,{class:"search-box"},{default:_((()=>[m(s,{class:"status-bar"}),m(s,{class:"search-input-box"},{default:_((()=>[m(s,{class:"input"},{default:_((()=>[m($,{style:{width:"100%"},modelValue:L.product_name,"onUpdate:modelValue":e[0]||(e[0]=a=>L.product_name=a),onConfirm:O,onClear:K},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),m(s,{class:"salesman-content"},{default:_((()=>[(d(!0),f(h,null,v(X.value,((e,l)=>(d(),p(s,{onClick:a=>(a=>{if(A(),"product_price"==a.value)a.sort_order="desc"===a.sort_order?"asc":"desc",L.sort_order=a.sort_order;else if(a.value===L.sort_field)return;Q.value=a.value,L.sort_field=a.value,T()})(e),class:x(["salesman-item",{active:Q.value===e.value}]),key:l},{default:_((()=>[m(t,null,{default:_((()=>[j(C(a.$t(e.label)),1)])),_:2},1024),k(m(s,{class:"price-ico-box flex flex-column"},{default:_((()=>[m(t,{class:x(["iconfont-h5 icon-shangjiantou price-icon",{order:"product_price"===Q.value&&"asc"===e.sort_order}])},null,8,["class"]),m(t,{class:x(["iconfont-h5 icon-xiajiantou price-icon",{order:"product_price"===Q.value&&"desc"===e.sort_order}])},null,8,["class"])])),_:2},1536),[[w,"product_price"===e.value]])])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1})])),_:1}),m(s,{class:"salesman-list"},{default:_((()=>[(d(!0),f(h,null,v(R.value,(e=>(d(),p(s,{key:e.product_id,class:"salesman-list-item"},{default:_((()=>[m(s,{class:"salesman-item-content",onClick:a=>{return s=`/pages/salesman/detail?id=${e.product_id}`,void z({url:s});var s}},{default:_((()=>[m(s,{class:"salesman-item-img"},{default:_((()=>[m(l,{src:e.pic_thumb,"onUpdate:src":a=>e.pic_thumb=a},null,8,["src","onUpdate:src"])])),_:2},1024),m(s,{class:"salesman-item-text"},{default:_((()=>[m(s,{class:"line2 name"},{default:_((()=>[j(C(e.product_name),1)])),_:2},1024),m(s,{class:"price"},{default:_((()=>[m(r,{currencyStyle:{"font-size":"21rpx"},priceData:e.product_price},null,8,["priceData"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),m(s,{class:"salesman-item-btn"},{default:_((()=>[m(s,{class:"salesman-item-btn-content",onClick:a=>{return s=e,Z.value=!0,void(Y.value=s);var s}},{default:_((()=>[m(o,{class:"salesman-item-btn-icon",src:b(D)("salesman/shareIcon.png")},null,8,["src"]),m(s,{class:"salesman-item-btn-text"},{default:_((()=>[j(C(a.$t(Number(e.final_commission_price)>0?"预计可赚":"立即分享"))+" ",1),Number(e.final_commission_price)>0?(d(),p(r,{key:0,priceData:e.final_commission_price},null,8,["priceData"])):g("",!0)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),P.value||0!==M.value?g("",!0):(d(),p(H,{key:0,styles:{width:"320rpx",height:"320rpx"}})),m(N,{showShareCard:Z.value,"onUpdate:showShareCard":e[1]||(e[1]=a=>Z.value=a),currentData:Y.value},null,8,["showShareCard","currentData"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-a3b8c8d0"]]);export{F as default};
