import{e as a,G as e,Q as l,r as s,g as t,k as u,h as n,b0 as o,E as c,a as r,c as i,A as d,w as f,F as m,a9 as _,N as v,aa as p,i as g,v as b,z as y,o as k,K as x,C as h,B as j,a7 as w,d as z,b as C,t as G,D as E,aV as F,_ as I}from"./index-BKXBH4vI.js";import{_ as A}from"./uni-rate.CVLwPHjC.js";import{n as B}from"./index.xrDesKlL.js";import{b as D}from"./product.BhwveQst.js";import"./uni-icons.C94_g2wt.js";const K=I(a({__name:"comment",setup(a){const{t:I}=e(),K=l({navbar:"1",return:"1",title:"商品评价",class:"pageGoods"}),L=s(!1),M=s([]),N=s(1),Q=s(10),V=s(0),$=s(!1),q=async()=>{N.value>1&&($.value=!0),_({title:I("加载中")});try{const a=await D(H.value,{type:1,size:Q.value,page:N.value});M.value=[...M.value,...a.filter_result],V.value=a.total}catch(a){v({title:a.message,icon:"none"})}finally{$.value=!1,p()}},H=s("");return t((a=>{if(a){const{id:e}=a;e&&(H.value=e,q())}})),u((()=>{N.value<Math.ceil(V.value/Q.value)&&(N.value++,q())})),n((()=>{o()})),(a,e)=>{const l=h,s=g,t=z,u=b(y("uni-rate"),A);return k(),c(m,null,[r(B,{parameter:K},null,8,["parameter"]),r(s,{class:"product-comment-card"},{default:f((()=>[(k(!0),c(m,null,x(M.value,((a,e)=>(k(),i(s,{class:"comment-item",key:e},{default:f((()=>[r(s,{class:"user-info flex justify-between align-center"},{default:f((()=>[r(s,{class:"user-name flex align-center"},{default:f((()=>[r(s,{class:"head_logo"},{default:f((()=>[r(l,{src:j(w)((null==a?void 0:a.avatar)||"")},null,8,["src"])])),_:2},1024),r(s,null,{default:f((()=>[r(t,null,{default:f((()=>[C(G(a.username),1)])),_:2},1024),r(u,{value:a.comment_rank,readonly:!0,size:"14",color:"#bfbfbf","active-color":"#ffa800"},null,8,["value"])])),_:2},1024)])),_:2},1024),r(s,{class:"time"},{default:f((()=>[C(G(a.add_time),1)])),_:2},1024)])),_:2},1024),r(s,{class:"tags flex-wrap"},{default:f((()=>[(k(!0),c(m,null,x(a.comment_tag,((a,e)=>(k(),i(s,{class:"tag",key:e},{default:f((()=>[C(G(a),1)])),_:2},1024)))),128))])),_:2},1024),r(s,{class:"user-content"},{default:f((()=>[C(G(a.content),1)])),_:2},1024),r(s,{class:"user-imgs flex-wrap align-center"},{default:f((()=>[(k(!0),c(m,null,x(a.show_pics,((a,e)=>(k(),i(l,{key:e,mode:"aspectFit",src:j(w)(a.pic_thumb),onClick:e=>{return l=j(w)((null==a?void 0:a.pic_url)||""),void F({urls:[l]});var l}},null,8,["src","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1}),N.value>1?(k(),i(s,{key:0,class:"loading-box"},{default:f((()=>[L.value?(k(),i(s,{key:0,class:"bottomLoading"},{default:f((()=>[r(l,{"lazy-load":"",class:"loading",src:j(E)("common/loading.gif")},null,8,["src"])])),_:1})):d("",!0)])),_:1})):d("",!0),r(s,{class:"loading-box"},{default:f((()=>[M.value.length<1?(k(),i(s,{key:0},{default:f((()=>[C(G(a.$t("暂无评价")),1)])),_:1})):d("",!0)])),_:1})],64)}}}),[["__scopeId","data-v-479403b8"]]);export{K as default};
