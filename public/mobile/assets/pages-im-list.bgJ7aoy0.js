import{d as s,a,Q as e,r as t,f as l,e as i,k as o,l as n,m as r,n as c,w as u,q as p,y as m,J as _,F as d,x as f,t as g,v as h,C as v,as as y,T as b,s as k,a5 as w,L as x}from"./index-Ce4FtYLL.js";import{_ as j}from"./tig-layout.nM03J4I_.js";import{b as M}from"./im.BuuEVos6.js";import{n as I}from"./index.v2UirNFN.js";import{_ as L}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-loading-icon.CaEeBur7.js";import"./u-icon.BDQrrWMI.js";const $=L(s({__name:"list",setup(s){const L=a(),$={navbar:"1",return:"1",title:"消息列表"},C=e({page:1,size:15}),T=t(0),z=t(!1),H=t([]),q=async()=>{try{const s=await M(C);H.value=s.filter_result,T.value=s.total}catch(s){}finally{z.value=!0}};return l((()=>{q()})),i((()=>{C.page<Math.ceil(T.value/C.size)&&(C.page++,q())})),(s,a)=>{const e=v,t=o(n("tig-layout"),j);return r(),c(e,{class:"page-content"},{default:u((()=>[p(t,null,{default:u((()=>[p(e,{class:"thanos-layout conversation-list-layout"},{default:u((()=>[p(I,{parameter:$}),p(e,{class:"thanos-layout-main-content"},{default:u((()=>[p(e,{class:"thanos-waterfall conversation-list-wrap"},{default:u((()=>[H.value.length>0?(r(!0),m(d,{key:0},_(H.value,((s,a)=>(r(),c(e,{class:"main-list",key:a},{default:u((()=>[p(e,{onClick:a=>{return e=`/pages/im/index?shop_id=${s.shop_id}&conversation_id=${s.conversation_id}`,void x({url:e});var e},class:"wapim-conversation-item"},{default:u((()=>[y("figure",{class:"bg-pic circle-bg-pic thanos-figure thanos-hairline--surround conversation-figure"},[p(e,{class:"bg-pic-content",style:b({backgroundImage:`url(${s.shop?k(w)(s.shop.shop_logo):k(w)(k(L).baseInfo.ico_img)})`})},null,8,["style"])]),p(e,{class:"wapim-conversation-item-content thanos-hairline--bottom"},{default:u((()=>[p(e,{class:"shop-name thanos-ellipsis"},{default:u((()=>[g(h(s.shop?s.shop.shop_title:k(L).baseInfo.shop_title),1)])),_:2},1024),"text"==s.lastMessage[0].message_type?(r(),c(e,{key:0,class:"last-message thanos-ellipsis"},{default:u((()=>[p(e,{class:"ellipsis",innerHTML:s.lastMessage[0].content.content},null,8,["innerHTML"])])),_:2},1024)):(r(),c(e,{key:1,class:"last-message thanos-ellipsis"},{default:u((()=>[g("["+h(s.lastMessage[0].message_type_text)+"]",1)])),_:2},1024))])),_:2},1024),p(e,{class:"wapim-conversation-item-right"},{default:u((()=>[y("span",{class:"last-time"},h(s.last_update_time),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128)):f("",!0),0===H.value.length&&z.value?(r(),c(e,{key:1,class:"thanos-waterfall-finish-desc"},{default:u((()=>[g(h(s.$t("已经没有更多消息了")),1)])),_:1})):f("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-b4a25d3b"]]);export{$ as default};
