import{d as a,r as e,Q as s,o as t,H as l,K as o,e as n,k as i,l as r,m as c,n as u,w as m,q as d,t as p,v as _,y as f,J as v,F as g,x as C,C as b,V as x,L as h,a4 as y,B as j}from"./index-Do_Cb7fn.js";import{_ as k}from"./tig-image.D5KdQk-t.js";import{_ as w}from"./format-price.D2lH_-yv.js";import{_ as D}from"./save-bottom-box.BM5fwIJO.js";import{_ as $}from"./tig-layout.BV0ZvCt0.js";import{a as z,c as B}from"./salesman.Chs56Hn_.js";import{e as I}from"./empty.D3RAhSOu.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-loading-icon.rQrrZF_r.js";import"./u-icon.CBDMG2rO.js";import"./empty.vue_vue_type_style_index_0_scoped_b2f6c60f_lang.B7spAC_x.js";const U=S(a({__name:"salesmanCard",setup(a){const S=e({}),U=e([]),N=s({page:1,page_size:15}),T=e(0),q=e(null),F=[{name:"名片",icon:"icon-mingpian",url:""},{name:"商城",icon:"icon-shangcheng-",url:"/pages/index/index"},{name:"我的",icon:"icon-wode",url:"/pages/user/index"}],H=e(!1),J=async()=>{H.value=!0;try{const a=await z(N);U.value=[...U.value,...a.filter_result],T.value=a.total}catch(a){console.error(a)}finally{H.value=!1}};return t((a=>{if(a&&a.salesman_id){q.value=Number(a.salesman_id);l("bindSalesmanId")||o("bindSalesmanId",q.value),(async()=>{try{const a=await B(q.value);S.value=a.item}catch(a){console.error(a)}})()}J()})),n((()=>{N.page<Math.ceil(T.value/N.page_size)&&(N.page++,J())})),(a,e)=>{const s=i(r("tig-image"),k),t=b,l=i(r("format-price"),w),o=j,n=i(r("save-bottom-box"),D),z=i(r("tig-layout"),$);return c(),u(t,null,{default:m((()=>[d(z,{specialNum:55,needSaveTop:!0,saveTopBgColor:"#f5f5f5"},{default:m((()=>[d(t,{class:"salesmanCard-top"},{default:m((()=>[d(t,{class:"salesmanCard-top-content"},{default:m((()=>[d(t,{class:"salesmanCard-top-left"},{default:m((()=>[d(t,{class:"salesmanCard-top-left-img"},{default:m((()=>[d(s,{src:S.value.avatar,"onUpdate:src":e[0]||(e[0]=a=>S.value.avatar=a)},null,8,["src"])])),_:1})])),_:1}),d(t,{class:"salesmanCard-top-right"},{default:m((()=>[d(t,{class:"salesmanCard-top-right-mobile"},{default:m((()=>[p(_(S.value.mobile),1)])),_:1}),d(t,{class:"salesmanCard-top-right-name"},{default:m((()=>[p(_(S.value.nickname),1)])),_:1})])),_:1})])),_:1})])),_:1}),d(t,{class:"salesmanCard-list"},{default:m((()=>[d(t,{class:"salesmanCard-list-title"},{default:m((()=>[p(_(a.$t("推荐商品")),1)])),_:1}),d(t,{class:"salesmanCard-list-content"},{default:m((()=>[(c(!0),f(g,null,v(U.value,(a=>(c(),u(t,{key:a.product_id,class:"salesmanCard-list-content-item",onClick:e=>(a=>{let e=q.value?`/pages/productDetail/index?id=${a}&salesman_id=${q.value}`:`/pages/productDetail/index?id=${a}`;h({url:e})})(a.product_id)},{default:m((()=>[d(t,{class:"salesmanCard-list-content-item-img"},{default:m((()=>[d(s,{src:a.pic_url,"onUpdate:src":e=>a.pic_url=e},null,8,["src","onUpdate:src"])])),_:2},1024),d(t,{class:"content-item-text"},{default:m((()=>[d(t,{class:"item-text-name line2"},{default:m((()=>[p(_(a.product_name),1)])),_:2},1024),d(t,{class:"item-text-price"},{default:m((()=>[d(l,{priceData:a.product_price},null,8,["priceData"]),d(o,{class:"iconfont-h5 icon-gouwuche3"})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),H.value||0!==T.value?C("",!0):(c(),u(I,{key:0,styles:{width:"320rpx",height:"320rpx"}}))])),_:1}),d(n,{height:55,backgroundColor:"#fff"},{default:m((()=>[d(t,{class:"bottom-btns"},{default:m((()=>[(c(),f(g,null,v(F,((e,s)=>d(t,{key:s,class:x(["bottom-btns-item",{active:0===s}]),onClick:a=>{var s;(s=e.url)&&y({url:s})}},{default:m((()=>[d(t,{class:x(["bottom-btns-item-icon iconfont-h5",e.icon])},null,8,["class"]),d(t,{class:"bottom-btns-item-text"},{default:m((()=>[p(_(a.$t(e.name)),1)])),_:2},1024)])),_:2},1032,["class","onClick"]))),64))])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-a23c9624"]]);export{U as default};
