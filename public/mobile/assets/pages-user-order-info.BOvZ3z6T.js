import{e as a,ad as e,G as t,r as l,g as s,a9 as u,aa as i,R as r,c as o,w as c,v as d,z as n,bN as _,bO as f,o as p,a as m,i as v,E as y,A as h,F as b,d as k,b as g,t as x,T as $,K as D,ac as w,N as C,M as j,a_ as T,_ as S}from"./index-BKXBH4vI.js";import{_ as B}from"./uni-steps.CWStG65y.js";import{_ as I}from"./uni-icons.C94_g2wt.js";import{_ as z,a as q}from"./tig-layout.DMoUsUKf.js";import{_ as O}from"./tig-image.BbZoJ9nS.js";import{_ as A}from"./format-price.0qAAshfo.js";import{_ as E}from"./tig-fixed-placeholder.BHdfEiP8.js";import{n as N}from"./index.xrDesKlL.js";import{_ as U}from"./index.vue_vue_type_script_setup_true_lang.t1GYzFiu.js";import{g as W,f as F,c as G,e as H}from"./order.BjcCWkE9.js";const K=S(a({__name:"info",setup(a){const S=e(),{t:K}=t(),M={navbar:"1",return:"1",title:"我的订单",showHome:!0,color:!1},R=l({0:K("您的订单已提交成功，请尽快完成付款哦！"),1:K("感谢您在本店的购物，您的订单已提交成功，我们会尽快为您发货！"),2:K("您的订单已经发货，请注意查收，祝您购物愉快！"),3:K('您的订单已被取消，您可以通过"再次购买"，重新购买订单中的商品。'),4:K('您的订单被认定为无效订单，订单已被关闭。您可以通过"再次购买"，重新购买订单中的商品。给您造成的不便请多多谅解！'),5:K("您的订单已经确认收货，感谢您在本店购物，祝您生活愉快！")}),J=l({}),L=l(!1),P=l();s((a=>{a&&a.id&&(P.value=a.id,Q(),Y())}));const Q=async()=>{u({title:K("加载中")});try{const a=await W({id:P.value});J.value=a.item}catch(a){}finally{i()}},V=l([]),X=l(""),Y=async()=>{try{const a=await F({id:P.value});"string"==typeof a.list?X.value=a.list:V.value=a.list}catch(a){}finally{i()}},Z=a=>{j(a?{url:`/pages/user/afterSale/edit?item_id=${a}&order_id=${J.value.order_id}`}:{url:`/pages/user/afterSale/edit?order_id=${J.value.order_id}`})},aa=a=>{j({url:`/pages/productDetail/index?id=${a}`})},ea=r((()=>J.value.shop&&Object.keys(J.value.shop).length>0?!!(J.value.shop.kefu_inlet&&J.value.shop.kefu_inlet.length>0&&J.value.shop.kefu_inlet.includes(2)):S.serviceConfig.show));return(a,e)=>{const t=d(n("uni-steps"),B),l=v,s=k,u=d(n("up-steps-item"),_),i=d(n("up-steps"),f),r=d(n("uni-icons"),I),S=d(n("tig-button"),q),W=d(n("tig-image"),O),F=d(n("format-price"),A),P=d(n("tig-fixed-placeholder"),E),Y=d(n("tig-layout"),z);return p(),o(Y,null,{default:c((()=>[m(l,{class:"order-info"},{default:c((()=>[m(N,{parameter:M}),Object.keys(J.value).length?(p(),y(b,{key:0},[m(l,{class:"order-info-steps"},{default:c((()=>[m(t,{"active-color":"var(--general)",options:J.value.step_status.steps,active:J.value.step_status.current},null,8,["options","active"])])),_:1}),m(l,{class:"order-info-content"},{default:c((()=>[m(l,{class:"order-card card-space"},{default:c((()=>[m(l,{class:"order-card-item flex justify-between"},{default:c((()=>[m(l,{class:"item-left"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("订单编号"))+"：",1)])),_:1}),m(s,null,{default:c((()=>[g(x(J.value.order_sn),1)])),_:1})])),_:1}),m(l,{class:"item-right"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("订单状态"))+"：",1)])),_:1}),m(s,null,{default:c((()=>[g(x(J.value.order_status_name),1)])),_:1})])),_:1})])),_:1}),m(l,{class:"order-card-item"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("下单时间"))+"：",1)])),_:1}),m(s,null,{default:c((()=>[g(x(J.value.add_time),1)])),_:1})])),_:1}),m(l,{class:"order-card-item"},{default:c((()=>[g(x(R.value[J.value.order_status]),1)])),_:1})])),_:1}),J.value.order_id&&2===J.value.order_status&&V.value.length>0?(p(),o(l,{key:0,class:"expressage-card card-space"},{default:c((()=>[m(l,{class:"shippingInfo-title"},{default:c((()=>[g(x(a.$t("快递公司")),1)])),_:1}),V.value.length>0?(p(),o(l,{key:0,class:"shippingInfo-box"},{default:c((()=>[m(l,{class:$(["shippingInfo-box-content",{dim:!L.value,"more-height":L.value}])},{default:c((()=>[m(i,{current:0,dot:"",activeColor:"#39bf3e",direction:"column"},{default:c((()=>[(p(!0),y(b,null,D(V.value,((a,e)=>(p(),o(u,{key:e,title:a.StatusDescription,desc:a.Date},null,8,["title","desc"])))),128))])),_:1})])),_:1},8,["class"]),m(l,{class:"shippingInfo-btn",onClick:e[0]||(e[0]=a=>L.value=!L.value)},{default:c((()=>[g(x(L.value?a.$t("收起"):a.$t("展开")),1),m(r,{class:$(["btn-icon",{rotate:L.value}]),type:"down",size:"18",color:"#999"},null,8,["class"])])),_:1})])),_:1})):(p(),o(l,{key:1,class:"emptyText"},{default:c((()=>[g(x(X.value),1)])),_:1}))])),_:1})):h("",!0),m(l,{class:"pay-card card-space"},{default:c((()=>[m(l,{class:"pay-card-item"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("收货信息"))+"：",1)])),_:1}),m(s,{class:"address-text"},{default:c((()=>[g(x(J.value.user_address+" "+J.value.consignee+" "+J.value.mobile),1)])),_:1})])),_:1}),m(l,{class:"pay-card-item"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("配送方式"))+"：",1)])),_:1}),m(s,null,{default:c((()=>[g(x(J.value.shipping_type_name),1)])),_:1})])),_:1}),m(l,{class:"pay-card-item"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("支付方式"))+"：",1)])),_:1}),m(s,null,{default:c((()=>[g(x(1===J.value.pay_type_id?a.$t("在线支付"):2===J.value.pay_type_id?a.$t("货到付款"):a.$t("线下支付")),1)])),_:1})])),_:1}),ea.value?(p(),o(l,{key:0,class:"pay-card-item im-btn"},{default:c((()=>[m(U,{phone:J.value.shop&&J.value.shop.kefu_phone?J.value.shop.kefu_phone:"",order_id:J.value.order_id,shop_id:J.value.shop_id},{default:c((()=>[m(S,{plain:!0,color:"#333",customStyle:{height:"55rpx"}},{default:c((()=>[g(x(a.$t("联系客服")),1)])),_:1})])),_:1},8,["phone","order_id","shop_id"])])),_:1})):h("",!0)])),_:1}),m(l,{class:"product-card card-space"},{default:c((()=>[(p(!0),y(b,null,D(J.value.items,(e=>(p(),o(l,{key:e.product_id,class:"item-box"},{default:c((()=>[m(l,{class:"product-card-item"},{default:c((()=>[m(l,{class:"product-card-item-left",onClick:a=>aa(e.product_id)},{default:c((()=>[m(l,{class:"left-img"},{default:c((()=>[m(W,{src:e.pic_thumb,"onUpdate:src":a=>e.pic_thumb=a},null,8,["src","onUpdate:src"]),1===e.is_gift?(p(),o(l,{key:0,class:"gift-text"},{default:c((()=>[g(x(a.$t("赠品")),1)])),_:1})):h("",!0)])),_:2},1024)])),_:2},1032,["onClick"]),m(l,{class:"product-card-item-right",onClick:a=>aa(e.product_id)},{default:c((()=>[m(l,{class:"right-title line2"},{default:c((()=>[m(s,null,{default:c((()=>[g(x(e.product_name),1)])),_:2},1024)])),_:2},1024),m(l,{class:$(["sku-card",{nodata:0===e.sku_data.length}])},{default:c((()=>[e.sku_data.length>0?(p(!0),y(b,{key:0},D(e.sku_data,((a,e)=>(p(),o(l,{key:e,class:"sku-item line1"},{default:c((()=>[g(x(a.value),1)])),_:2},1024)))),128)):h("",!0)])),_:2},1032,["class"]),e.extra_sku_data&&e.extra_sku_data.length?(p(),o(l,{key:0,class:"extraskudata-box"},{default:c((()=>[m(l,{class:"extraskudata"},{default:c((()=>[(p(!0),y(b,null,D(e.extra_sku_data,(a=>(p(),o(l,{key:a,class:"extraskudata-item"},{default:c((()=>[m(l,{class:"title"},{default:c((()=>[g(x(a.attr_name),1)])),_:2},1024),m(l,{class:"line-box"},{default:c((()=>[m(l,{class:"line"})])),_:1}),m(l,{class:"content"},{default:c((()=>[m(s,{class:"line1 content-text"},{default:c((()=>[g(x(a.attr_value),1)])),_:2},1024),m(F,{showText:!1,class:"price",priceData:a.attr_price},null,8,["priceData"]),m(l,{class:"num"},{default:c((()=>[g("x"+x(e.quantity),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):h("",!0),m(l,{class:"right-price"},{default:c((()=>[m(F,{showText:!1,class:"right-price-pricenum",decimalsStyle:{fontSize:"23rpx",fontWeight:"bold"},currencyStyle:{fontSize:"21rpx",fontWeight:"bold"},priceData:e.price},null,8,["priceData"]),m(l,{class:"right-price-quantity"},{default:c((()=>[g("x "+x(e.quantity),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),J.value.available_actions.to_aftersales||e.aftersales_item?(p(),o(l,{key:0,class:"item-btn"},{default:c((()=>[J.value.available_actions.to_aftersales?(p(),o(S,{key:0,plain:!0,color:"#333",customStyle:{height:"55rpx"},onClick:a=>Z(e.item_id)},{default:c((()=>[g(x(a.$t("申请售后")),1)])),_:2},1032,["onClick"])):h("",!0),e.aftersales_item?(p(),o(S,{key:1,plain:!0,color:"#333",customStyle:{height:"55rpx"},onClick:a=>{return t=e.aftersales_item.aftersale_id,void j({url:`/pages/user/afterSale/info?id=${t}`});var t}},{default:c((()=>[g(x(a.$t("售后详情")),1)])),_:2},1032,["onClick"])):h("",!0)])),_:2},1024)):h("",!0)])),_:2},1024),8===J.value.order_type&&e.e_card.length>0?(p(),o(l,{key:0,class:"virtualsample-box"},{default:c((()=>[(p(!0),y(b,null,D(e.e_card,(e=>(p(),o(l,{key:e},{default:c((()=>[m(l,{class:"virtualsample-item"},{default:c((()=>[m(l,{class:"virtualsample-item-con"},{default:c((()=>[m(l,{class:"label"},{default:c((()=>[g(x(a.$t("卡号"))+"：",1)])),_:1}),m(l,{class:"value"},{default:c((()=>[g(x(e.card_number),1)])),_:2},1024)])),_:2},1024),m(l,{class:"virtualsample-item-con"},{default:c((()=>[m(l,{class:"label"},{default:c((()=>[g(x(a.$t("卡密"))+"：",1)])),_:1}),m(l,{class:"value"},{default:c((()=>[g(x(e.card_pwd),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),m(l,{class:"virtualsample-btn",onClick:a=>{var t;T(`卡号：${(t=e).card_number}  卡密：${t.card_pwd}`,(()=>{C({title:K("复制成功"),icon:"none"})}))}},{default:c((()=>[m(l,null,{default:c((()=>[m(S,{plain:!0,color:"#333",customStyle:{height:"55rpx"}},{default:c((()=>[g(x(a.$t("复制")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:2},1024)):h("",!0)])),_:2},1024)))),128))])),_:1}),m(l,{class:"money-card card-space"},{default:c((()=>[m(l,{class:"money-card-item"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("商品总价"))+"：",1)])),_:1}),m(s,null,{default:c((()=>[m(F,{showText:!1,isBottom:!1,priceData:J.value.product_amount},null,8,["priceData"])])),_:1})])),_:1}),J.value.service_fee&&J.value.service_fee>0?(p(),o(l,{key:0,class:"money-card-item"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("附加费用"))+"：",1)])),_:1}),m(s,null,{default:c((()=>[m(F,{showText:!1,isBottom:!1,priceData:J.value.service_fee},null,8,["priceData"])])),_:1})])),_:1})):h("",!0),J.value.shipping_fee&&J.value.shipping_fee>0?(p(),o(l,{key:1,class:"money-card-item"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("运费"))+"：",1)])),_:1}),m(s,null,{default:c((()=>[m(F,{showText:!1,isBottom:!1,priceData:J.value.shipping_fee},null,8,["priceData"])])),_:1})])),_:1})):h("",!0),J.value.balance&&J.value.balance>0?(p(),o(l,{key:2,class:"money-card-item"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("使用余额"))+"：",1)])),_:1}),m(s,null,{default:c((()=>[m(F,{showText:!1,isBottom:!1,priceData:J.value.balance},null,8,["priceData"])])),_:1})])),_:1})):h("",!0),J.value.points_amount&&J.value.points_amount>0?(p(),o(l,{key:3,class:"money-card-item"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("使用积分"))+"：",1)])),_:1}),m(s,null,{default:c((()=>[m(F,{showText:!1,isBottom:!1,priceData:J.value.points_amount},null,8,["priceData"])])),_:1})])),_:1})):h("",!0),J.value.coupon_amount&&J.value.coupon_amount>0?(p(),o(l,{key:4,class:"money-card-item"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("优惠券"))+"：",1)])),_:1}),m(s,null,{default:c((()=>[m(F,{showText:!1,isBottom:!1,priceData:J.value.coupon_amount},null,8,["priceData"])])),_:1})])),_:1})):h("",!0),J.value.discount_amount&&J.value.discount_amount>0?(p(),o(l,{key:5,class:"money-card-item"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("其他优惠"))+"：",1)])),_:1}),m(s,null,{default:c((()=>[m(F,{showText:!1,isBottom:!1,priceData:J.value.discount_amount},null,8,["priceData"])])),_:1})])),_:1})):h("",!0),J.value.unpaid_amount&&J.value.unpaid_amount>0?(p(),o(l,{key:6,class:"money-card-item"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("待支付金额"))+"：",1)])),_:1}),m(s,null,{default:c((()=>[m(F,{showText:!1,isBottom:!1,priceData:J.value.unpaid_amount},null,8,["priceData"])])),_:1})])),_:1})):h("",!0),2==J.value.pay_status?(p(),o(l,{key:7,class:"money-card-item"},{default:c((()=>[m(s,{class:"order-item-label"},{default:c((()=>[g(x(a.$t("实付款"))+"：",1)])),_:1}),m(s,{class:"order-item-price"},{default:c((()=>[m(F,{showText:!1,isBottom:!1,priceData:J.value.total_amount},null,8,["priceData"])])),_:1})])),_:1})):h("",!0)])),_:1})])),_:1}),J.value.available_actions.cancel_order||J.value.available_actions.to_pay||J.value.available_actions.confirm_receipt||J.value.available_actions.to_aftersales?(p(),o(P,{key:0,height:"100rpx",backgroundColor:"#fff"},{default:c((()=>[m(l,{class:"order-info-btn"},{default:c((()=>[m(l,{class:"order-info-btn-box"},{default:c((()=>[J.value.available_actions.cancel_order?(p(),o(S,{key:0,class:"btn",color:"#333",plain:!0,onClick:e[1]||(e[1]=a=>{return e=J.value.order_id,void w({title:K("提示"),content:K("确认要取消该订单吗？"),success:async a=>{if(a.confirm)try{await G({id:e}),Q()}catch(t){C({title:t.message,icon:"none"})}}});var e})},{default:c((()=>[g(x(a.$t("取消订单")),1)])),_:1})):h("",!0),J.value.available_actions.to_pay?(p(),o(S,{key:1,class:"btn",color:"#333",plain:!0,onClick:e[2]||(e[2]=a=>{return e=J.value.order_id,void j({url:`/pages/order/pay?order_id=${e}`});var e})},{default:c((()=>[g(x(a.$t("去付款")),1)])),_:1})):h("",!0),J.value.available_actions.confirm_receipt?(p(),o(S,{key:2,color:"#333",class:"btn",plain:!0,onClick:e[3]||(e[3]=a=>{return e=J.value.order_id,void w({title:K("提示"),content:K("确认收货吗？"),success:async a=>{if(a.confirm)try{await H({id:e}),Q()}catch(t){C({title:t.message,icon:"none"})}}});var e})},{default:c((()=>[g(x(a.$t("确认已收货")),1)])),_:1})):h("",!0),J.value.available_actions.to_aftersales?(p(),o(S,{key:3,color:"#333",class:"btn",plain:!0,onClick:e[4]||(e[4]=a=>Z(null))},{default:c((()=>[g(x(a.$t("整单售后")),1)])),_:1})):h("",!0)])),_:1})])),_:1})])),_:1})):h("",!0)],64)):h("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-e7f9b940"]]);export{K as default};
