import{e as a,E as e,r as l,f as s,j as t,g as u,b4 as n,c as o,w as c,a5 as i,L as r,a6 as d,q as f,y as m,o as v,a as _,z as g,i as p,D as y,F as b,J as k,B as x,A as j,a7 as h,d as w,b as z,t as C,C as T,aX as E,_ as F}from"./index-BKzbZvRR.js";import{_ as L}from"./uni-rate.CHwxaVXA.js";import{_ as q}from"./tig-layout.BpNdXByQ.js";import{b as A}from"./product.BqL6tr7k.js";import"./uni-icons.DELFdrY8.js";const B=F(a({__name:"comment",setup(a){const{t:F}=e(),B=l(!1),D=l([]),G=l(1),I=l(10),J=l(0),M=l(!1),P=async()=>{G.value>1&&(M.value=!0),i({title:F("加载中")});try{const a=await A(R.value,{type:1,size:I.value,page:G.value});D.value=[...D.value,...a.records],J.value=a.total}catch(a){r({title:a.message,icon:"none"})}finally{M.value=!1,d()}},R=l("");return s((a=>{if(a){const{id:e}=a;e&&(R.value=e,P())}})),t((()=>{G.value<Math.ceil(J.value/I.value)&&(G.value++,P())})),u((()=>{n()})),(a,e)=>{const l=x,s=p,t=w,u=f(m("uni-rate"),L),n=f(m("tig-layout"),q);return v(),o(n,{title:"商品评价"},{default:c((()=>[_(s,{class:"product-comment-card"},{default:c((()=>[(v(!0),y(b,null,k(D.value,((a,e)=>(v(),o(s,{class:"comment-item",key:e},{default:c((()=>[_(s,{class:"user-info flex justify-between align-center"},{default:c((()=>[_(s,{class:"user-name flex align-center"},{default:c((()=>[_(s,{class:"head_logo"},{default:c((()=>[_(l,{src:j(h)((null==a?void 0:a.avatar)||"")},null,8,["src"])])),_:2},1024),_(s,null,{default:c((()=>[_(t,null,{default:c((()=>[z(C(a.username),1)])),_:2},1024),_(u,{value:a.commentRank,readonly:!0,size:"14",color:"#bfbfbf","active-color":"#ffa800"},null,8,["value"])])),_:2},1024)])),_:2},1024),_(s,{class:"time"},{default:c((()=>[z(C(a.addTime),1)])),_:2},1024)])),_:2},1024),_(s,{class:"tags flex-wrap"},{default:c((()=>[(v(!0),y(b,null,k(a.commentTag,((a,e)=>(v(),o(s,{class:"tag",key:e},{default:c((()=>[z(C(a),1)])),_:2},1024)))),128))])),_:2},1024),_(s,{class:"user-content"},{default:c((()=>[z(C(a.content),1)])),_:2},1024),_(s,{class:"user-imgs flex-wrap align-center"},{default:c((()=>[(v(!0),y(b,null,k(a.showPics,((a,e)=>(v(),o(l,{key:e,mode:"aspectFit",src:j(h)(a.picThumb),onClick:e=>{return l=j(h)((null==a?void 0:a.picUrl)||""),void E({urls:[l]});var l}},null,8,["src","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1}),G.value>1?(v(),o(s,{key:0,class:"loading-box"},{default:c((()=>[B.value?(v(),o(s,{key:0,class:"bottomLoading"},{default:c((()=>[_(l,{"lazy-load":"",class:"loading",src:j(T)("common/loading.gif")},null,8,["src"])])),_:1})):g("",!0)])),_:1})):g("",!0),_(s,{class:"loading-box"},{default:c((()=>[D.value.length<1?(v(),o(s,{key:0},{default:c((()=>[z(C(a.$t("暂无评价")),1)])),_:1})):g("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-e0e70ce6"]]);export{B as default};
