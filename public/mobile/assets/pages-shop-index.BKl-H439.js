import{e,G as s,R as o,a7 as a,v as t,z as l,c as n,o as u,i as c,T as d,w as r,A as p,a as i,a6 as _,d as m,I as h,ar as f,t as y,b as g,N as v,ac as I,M as k,_ as b,E as w,K as x,F as j,r as $,g as D,Q as S}from"./index-BKXBH4vI.js";import{_ as C}from"./tig-layout.DMoUsUKf.js";import{s as z,a as R,b as A}from"./shop.B9S7eu-g.js";import{n as F,t as M,i as N,a as q,c as E,w as G,b as K,d as O,e as Q,p as T}from"./index.Da2Pe3TC.js";import{_ as U}from"./tig-image.BbZoJ9nS.js";import{n as B}from"./index.xrDesKlL.js";import"./format-price.0qAAshfo.js";import"./home.DZ4q0OJm.js";const H=b(e({__name:"index",props:{module:{},shopInfo:{}},emits:["refreshShopDetail"],setup(e,{emit:b}){const{t:w}=s(),x=e,j=b,$=o((()=>{let e=[];for(let s=1;s<=10;s++)e.push(`https://lyecs2.oss-cn-zhangjiakou.aliyuncs.com/static/mini/bg/${s}.jpg`);return e})),D=o((()=>{let e;return e=0==x.module.background_default&&x.module.custom_pic.pic_url?a(x.module.custom_pic.pic_url):$.value[x.module.background_default-1],e})),S=o((()=>x.shopInfo.collect_shop?w("已收藏"):w("收藏"))),C=()=>{x.shopInfo.collect_shop?A():R()},R=async()=>{try{await z({shop_id:x.shopInfo.shop_id});v({title:w("收藏成功")}),j("refreshShopDetail",x.shopInfo.shop_id)}catch(e){}},A=async()=>{I({title:w("提示"),content:w("确认要取消收藏店铺吗？"),success:async e=>{if(e.confirm)try{await z({shop_id:x.shopInfo.shop_id});v({title:w("操作成功")}),j("refreshShopDetail",x.shopInfo.shop_id)}catch(s){}}})},F=()=>{k({url:`/pages/search/index?shop_id=${x.shopInfo.shop_id}`})},M=()=>{k({url:`/pages/search/result?&shop_id=${x.shopInfo.shop_id}`})},N=()=>{k({url:`/pages/shop/category?shop_id=${x.shopInfo.shop_id}`})};return(e,s)=>{const o=c,a=m,v=h,I=t(l("tig-image"),U);return u(),n(o,{class:d("module-ad-con module-store_info ad-store_style__"+e.module.style)},{default:r((()=>[e.module?(u(),n(o,{key:0,class:"module-ad-content"},{default:r((()=>[i(o,{class:"cap-store-banner"},{default:r((()=>[i(o,{class:"cap-store-banner__cover",style:_("background-image: url("+D.value+");")},{default:r((()=>[i(o,{class:"cap-store-banner__cover-mask"})])),_:1},8,["style"]),i(o,{class:"cap-store-nav-warp"},{default:r((()=>[i(o,{class:"cap-store-nav-con"},{default:r((()=>[i(o,{class:"store-search-con"},{default:r((()=>[i(o,{id:"search",onClick:F},{default:r((()=>[i(a,{class:"module_ico module-ico-sousuo"}),i(v,{type:"text",class:"search-input",placeholder:e.$t("搜商品")},null,8,["placeholder"])])),_:1})])),_:1}),i(o,{class:"store-nav-con"},{default:r((()=>[i(o,{class:"store-nav-item active"},{default:r((()=>[f("a",{class:"store-nav-item-a"},y(e.$t("精选")),1)])),_:1}),i(o,{class:"store-nav-item"},{default:r((()=>[f("a",{class:"store-nav-item-a",onClick:M},y(e.$t("商品")),1)])),_:1}),i(o,{class:"store-nav-item"},{default:r((()=>[f("a",{class:"store-nav-item-a",onClick:N},y(e.$t("分类")),1)])),_:1})])),_:1})])),_:1})])),_:1}),i(o,{class:"cap-store-banner__inner"},{default:r((()=>[i(o,{class:"cap-store-banner__content"},{default:r((()=>[i(o,{class:"cap-store-banner__logo"},{default:r((()=>[i(I,{src:e.shopInfo.shop_logo,"onUpdate:src":s[0]||(s[0]=s=>e.shopInfo.shop_logo=s),mode:"widthFix"},null,8,["src"])])),_:1}),i(o,{class:"cap-store-banner__right-content"},{default:r((()=>[i(o,{class:"cap-store-banner__right-content-title--middle"},{default:r((()=>[g(y(e.shopInfo.shop_title),1)])),_:1}),i(o,{class:"cap-store-banner__sum-content"},{default:r((()=>[i(o,{class:"cap-store-banner__sum-content-total"},{default:r((()=>[g(y(e.$t("全部商品"))+" "+y(e.shopInfo.product_count),1)])),_:1}),i(o,{class:"cap-store-banner__sum-content-total"},{default:r((()=>[g(y(e.$t("新品"))+" "+y(e.shopInfo.new_product_count),1)])),_:1})])),_:1})])),_:1}),i(o,{class:"store-collect-button-con",onClick:C},{default:r((()=>[i(o,{class:"store-collect-button"},{default:r((()=>[g(y(S.value),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):p("",!0)])),_:1},8,["class"])}}}),[["__scopeId","data-v-71d7a41a"]]),J=b(e({__name:"shopModules",props:{modules:{},shopInfo:{}},emits:["refreshShopDetail"],setup(e,{emit:s}){const o=e,a=s;return(e,s)=>{const t=c;return u(),n(t,{style:{height:"100%"}},{default:r((()=>[(u(!0),w(j,null,x(e.modules,((e,t)=>(u(),w(j,{key:t},["notice"==e.type?(u(),n(F,{key:0,module:e.module},null,8,["module"])):p("",!0),"title_ad"==e.type?(u(),n(M,{key:1,module:e.module},null,8,["module"])):p("",!0),"image_ad"==e.type?(u(),n(N,{key:2,module:e.module},null,8,["module"])):p("",!0),"image_nav"==e.type?(u(),n(q,{key:3,module:e.module},null,8,["module"])):p("",!0),"coupon"==e.type?(u(),n(E,{key:4,module:e.module,shop_id:o.shopInfo.shop_id},null,8,["module","shop_id"])):p("",!0),"white_blank"==e.type?(u(),n(G,{key:5,module:e.module},null,8,["module"])):p("",!0),"white_line"==e.type?(u(),n(K,{key:6,module:e.module},null,8,["module"])):p("",!0),"image_square_ad"==e.type?(u(),n(O,{key:7,module:e.module},null,8,["module"])):p("",!0),"image_hotarea"==e.type?(u(),n(Q,{key:8,module:e.module},null,8,["module"])):p("",!0),"shop_info"==e.type?(u(),n(H,{key:9,module:e.module,shopInfo:o.shopInfo,onRefreshShopDetail:s[0]||(s[0]=e=>a("refreshShopDetail"))},null,8,["module","shopInfo"])):p("",!0),"product"==e.type?(u(),n(T,{key:10,module:e.module,module_index:e.module_index},null,8,["module","module_index"])):p("",!0)],64)))),128))])),_:1})}}}),[["__scopeId","data-v-4a7e8cc2"]]),L=e({__name:"index",setup(e){const s=$(0);D((e=>{e&&e.shop_id&&(s.value=e.shop_id,m(),d())}));const o=S({navbar:"1",return:"1",title:"店铺详情"}),a=$([]),d=async()=>{try{const e=await R(s.value);a.value=e.module_list}catch(e){}},_=$({}),m=async()=>{try{const e=await A(s.value);_.value=e.item,o.title=e.item.shop_title}catch(e){}};return(e,d)=>{const h=c,f=t(l("tig-layout"),C);return u(),n(f,{shopId:s.value},{default:r((()=>[i(B,{parameter:o},null,8,["parameter"]),i(h,{class:"decorate-page-window"},{default:r((()=>[Object.keys(_.value).length>0?(u(),n(J,{key:0,modules:a.value,onRefreshShopDetail:m,shopInfo:_.value},null,8,["modules","shopInfo"])):p("",!0)])),_:1})])),_:1},8,["shopId"])}}});export{L as default};
