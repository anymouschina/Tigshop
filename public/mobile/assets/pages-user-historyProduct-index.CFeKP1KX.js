import{Y as a,e,G as t,r as l,c as s,w as o,a9 as u,aa as c,i as r,v as d,z as i,be as n,bS as p,o as f,a as _,A as m,E as h,F as v,K as b,U as g,b as y,t as x,J as k,V as C,C as S,B as $,D as j,d as z,N as U,ag as w,_ as D}from"./index-BKXBH4vI.js";import{_ as V}from"./tig-image.BbZoJ9nS.js";import{_ as A}from"./format-price.0qAAshfo.js";import{a as B,c as F,_ as I}from"./tig-layout.DMoUsUKf.js";import{_ as T}from"./tig-fixed-placeholder.BHdfEiP8.js";import{n as E}from"./index.xrDesKlL.js";const G=D(e({__name:"index",setup(e){const{t:D}=t(),G={navbar:"1",return:"1",title:"浏览记录",color:!1},J=l(!0),K=l([]),N=l([]),Y=l(!1),q=l(!1),H=a=>{a.length==K.value.length?q.value=!0:q.value=!1},L=()=>{q.value?N.value=K.value.map((a=>a.product_id)):N.value=[]},M=async()=>{try{await(e=N.value,a({url:"user/user/del_history_product",method:"post",data:{ids:e}}));U({title:D("删除成功"),icon:"none"}),O()}catch(t){}var e},O=async()=>{u({title:D("加载中")});try{const e=await a({url:"user/user/history_product",method:"get"});K.value=e.list}catch(e){}finally{c(),J.value=!1}};O();return(a,e)=>{const t=d(i("tig-image"),V),l=r,u=d(i("format-price"),A),c=d(i("up-checkbox"),n),U=d(i("up-checkbox-group"),p),D=S,O=z,P=d(i("tig-button"),B),Q=d(i("tig-checkbox"),F),R=d(i("tig-fixed-placeholder"),T),W=d(i("tig-layout"),I);return f(),s(l,null,{default:o((()=>[_(W,null,{default:o((()=>[_(E,{parameter:G}),_(U,{modelValue:N.value,"onUpdate:modelValue":e[1]||(e[1]=a=>N.value=a),activeColor:"var(--general)",placement:"column",onChange:H},{default:o((()=>[K.value.length>0?(f(),s(l,{key:0,class:"history-product"},{default:o((()=>[(f(!0),h(v,null,b(K.value,(a=>(f(),s(l,{key:a.product_id,class:"history-product-item",onClick:e=>{return t=a.product_id,void w({url:"/pages/productDetail/index?id="+t});var t}},{default:o((()=>[_(l,{class:"history-product-item-top"},{default:o((()=>[_(l,{class:"img-box"},{default:o((()=>[_(t,{src:a.pic_thumb,"onUpdate:src":e=>a.pic_thumb=e,mode:"widthFix"},null,8,["src","onUpdate:src"])])),_:2},1024)])),_:2},1024),_(l,{class:"history-product-item-bottom"},{default:o((()=>[_(l,{class:"detail line2"},{default:o((()=>[y(x(a.product_name),1)])),_:2},1024),_(l,{class:"price"},{default:o((()=>[_(u,{fontStyle:{fontSize:"32rpx"},currencyStyle:{fontSize:"22rpx"},decimalsStyle:{fontSize:"25rpx"},priceData:a.product_price},null,8,["priceData"])])),_:2},1024)])),_:2},1024),g(_(l,{class:"item-btn",onClick:e[0]||(e[0]=k((()=>{}),["stop"]))},{default:o((()=>[_(l,{class:"btn-box"},{default:o((()=>[_(c,{customStyle:{border:"none"},size:"20",shape:"circle",name:a.product_id},null,8,["name"])])),_:2},1024)])),_:2},1536),[[C,Y.value]])])),_:2},1032,["onClick"])))),128))])),_:1})):m("",!0)])),_:1},8,["modelValue"]),J.value||0!=K.value.length?m("",!0):(f(),s(l,{key:0,class:"empty-box"},{default:o((()=>[_(l,{class:"pictrue"},{default:o((()=>[_(D,{src:$(j)("common/data_empty.png")},null,8,["src"])])),_:1}),_(l,{class:"txt"},{default:o((()=>[y(x(a.$t("暂无浏览记录！")),1)])),_:1})])),_:1})),_(R,{backgroundColor:"#fff"},{default:o((()=>[_(l,{class:"footer-box"},{default:o((()=>[g(_(l,{class:"footer-text"},{default:o((()=>[_(l,{class:"footer-num"},{default:o((()=>[y(x(a.$t("共")),1),_(O,{class:"num"},{default:o((()=>[y(x(K.value.length),1)])),_:1}),y(x(a.$t("件商品")),1)])),_:1}),_(l,{class:"footer-text-btn"},{default:o((()=>[_(P,{class:"btn",onClick:e[2]||(e[2]=a=>Y.value=!0)},{default:o((()=>[y(x(a.$t("管理")),1)])),_:1})])),_:1})])),_:1},512),[[C,!Y.value]]),g(_(l,{class:"footer-edit"},{default:o((()=>[_(l,{class:"all-check"},{default:o((()=>[_(Q,{checked:q.value,"onUpdate:checked":e[3]||(e[3]=a=>q.value=a),onChange:L,checkedText:a.$t("全选")},null,8,["checked","checkedText"])])),_:1}),_(l,{class:"edit-btn"},{default:o((()=>[_(P,{class:"btn",plain:"",onClick:e[4]||(e[4]=a=>Y.value=!1)},{default:o((()=>[y(x(a.$t("取消")),1)])),_:1}),_(P,{class:"btn",disabled:!N.value.length,onClick:M},{default:o((()=>[y(x(a.$t("删除")),1)])),_:1},8,["disabled"])])),_:1})])),_:1},512),[[C,Y.value]])])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-dc72a350"]]);export{G as default};
