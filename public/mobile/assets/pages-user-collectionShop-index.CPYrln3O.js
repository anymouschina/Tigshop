import{Z as s,d as a,G as e,Q as o,r as t,o as l,e as i,k as n,l as c,m as r,n as p,w as u,q as d,y as _,J as h,F as f,x as m,C as g,t as v,v as y,L as x,M as j,B as k}from"./index-Ce4FtYLL.js";import{_ as w}from"./tig-image.bUT1hZK2.js";import{_ as C,a as b}from"./uni-swipe-action.BWuf2iA6.js";import{_ as z}from"./tig-layout.nM03J4I_.js";import{n as L}from"./index.v2UirNFN.js";import{s as M}from"./shop.TpH5rL7F.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-loading-icon.CaEeBur7.js";import"./u-icon.BDQrrWMI.js";const $=U(a({__name:"index",setup(a){const{t:U}=e(),$={navbar:"1",return:"1",title:"店铺收藏",color:!1},q=o({page:1,size:10,keyword:""}),B=t([]),F=t(0),G=t(!1),I=t(!1),J=async()=>{q.page>1?I.value=!0:G.value=!0;try{const e=await(a=q,s({url:"user/user/collection_shop",method:"get",params:a}));B.value=e.list,F.value=e.total}catch(e){console.error(e)}finally{I.value=!1,G.value=!1}var a};l((()=>{J()}));return i((()=>{q.page<Math.ceil(F.value/q.size)&&(q.page++,J())})),(s,a)=>{const e=n(c("tig-image"),w),o=g,t=k,l=n(c("uni-swipe-action-item"),C),i=n(c("uni-swipe-action"),b),F=n(c("tig-layout"),z);return r(),p(o,{class:"collection-shop"},{default:u((()=>[d(L,{parameter:$}),d(F,null,{default:u((()=>[B.value.length>0?(r(),p(i,{key:0},{default:u((()=>[d(o,{class:"collection-content"},{default:u((()=>[(r(!0),_(f,null,h(B.value,(a=>(r(),p(o,{key:a.shop_id,class:"move-item"},{default:u((()=>[d(l,{threshold:0,autoClose:""},{right:u((()=>[d(o,{class:"collect-move-box"},{default:u((()=>[d(o,{class:"btn-del",onClick:s=>(async s=>{try{await M({shop_id:s}),j({title:U("取消成功"),icon:"none"}),q.page=1,B.value=[],J()}catch(a){console.error(a)}})(a.shop_id)},{default:u((()=>[d(t,null,{default:u((()=>[v(y(s.$t("取消收藏")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),default:u((()=>[d(o,{class:"shop-item",onClick:s=>{return e=a.shop_id,void x({url:`/pages/shop/index?shop_id=${e}`});var e}},{default:u((()=>[d(o,{class:"shop-item-left"},{default:u((()=>[d(e,{src:a.shop.shop_logo,"onUpdate:src":s=>a.shop.shop_logo=s},null,8,["src","onUpdate:src"])])),_:2},1024),d(o,{class:"shop-item-right"},{default:u((()=>[d(o,{class:"shop-name line1"},{default:u((()=>[v(y(a.shop.shop_title),1)])),_:2},1024),d(o,{class:"shop-desc line1"},{default:u((()=>[v(y(a.shop.description?a.shop.description:""),1)])),_:2},1024),d(o,{class:"shop-info"},{default:u((()=>[d(t,{class:"shop-info-text"},{default:u((()=>[v("上架商品："+y(a.product_count),1)])),_:2},1024),d(t,{class:"shop-info-text"},{default:u((()=>[v("店铺收藏："+y(a.collect_count),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):m("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-8b55ef3a"]]);export{$ as default};
