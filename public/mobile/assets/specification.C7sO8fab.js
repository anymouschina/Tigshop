import{am as e,an as t,ao as a,ay as l,ap as s,k as u,l as i,m as n,n as o,w as r,I as d,aB as c,V as m,T as p,q as _,x as h,C as v,N as b,d as f,a3 as y,R as k,Z as g,G as x,r as S,b8 as V,L as I,M as C,H as B,u as $,P as T,Q as w,t as N,s as P,v as z,y as D,W as j,X as A,F as M,J as E,B as U,D as W,E as L}from"./index-Do_Cb7fn.js";import{_ as Q}from"./tig-image.D5KdQk-t.js";import{_ as H}from"./format-price.D2lH_-yv.js";import{_ as O}from"./uni-icons.DK0ZiICA.js";import{_ as F}from"./uni-number-box.Bfp_yH4M.js";import{_ as q}from"./u-icon.CBDMG2rO.js";import{_ as J}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{c as G}from"./tig-layout.BV0ZvCt0.js";import{i as R,j as X,k as Z,h as K}from"./product.Cqsfbx9G.js";const Y=J({name:"u-number-box",mixins:[t,a,{props:{name:{type:[String,Number],default:()=>e.numberBox.name},modelValue:{type:[String,Number],default:()=>e.numberBox.value},min:{type:[String,Number],default:()=>e.numberBox.min},max:{type:[String,Number],default:()=>e.numberBox.max},step:{type:[String,Number],default:()=>e.numberBox.step},integer:{type:Boolean,default:()=>e.numberBox.integer},disabled:{type:Boolean,default:()=>e.numberBox.disabled},disabledInput:{type:Boolean,default:()=>e.numberBox.disabledInput},asyncChange:{type:Boolean,default:()=>e.numberBox.asyncChange},inputWidth:{type:[String,Number],default:()=>e.numberBox.inputWidth},showMinus:{type:Boolean,default:()=>e.numberBox.showMinus},showPlus:{type:Boolean,default:()=>e.numberBox.showPlus},decimalLength:{type:[String,Number,null],default:()=>e.numberBox.decimalLength},longPress:{type:Boolean,default:()=>e.numberBox.longPress},color:{type:String,default:()=>e.numberBox.color},buttonSize:{type:[String,Number],default:()=>e.numberBox.buttonSize},bgColor:{type:String,default:()=>e.numberBox.bgColor},cursorSpacing:{type:[String,Number],default:()=>e.numberBox.cursorSpacing},disablePlus:{type:Boolean,default:()=>e.numberBox.disablePlus},disableMinus:{type:Boolean,default:()=>e.numberBox.disableMinus},iconStyle:{type:[Object,String],default:()=>e.numberBox.iconStyle}}}],data:()=>({currentValue:"",longPressTimer:null}),watch:{watchChange(e){this.check()},modelValue:{handler:function(e,t){e!==this.currentValue&&(this.currentValue=this.format(this.modelValue))},immediate:!0}},computed:{getCursorSpacing(){return l(this.cursorSpacing)},buttonStyle(){return e=>{const t={backgroundColor:this.bgColor,height:s(this.buttonSize),color:this.color};return this.isDisabled(e)&&(t.backgroundColor="#f7f8fa"),t}},inputStyle(){this.disabled||this.disabledInput;return{color:this.color,backgroundColor:this.bgColor,height:s(this.buttonSize),width:s(this.inputWidth)}},watchChange(){return[this.integer,this.decimalLength,this.min,this.max]},isDisabled(){return e=>"plus"===e?this.disabled||this.disablePlus||this.currentValue>=this.max:this.disabled||this.disableMinus||this.currentValue<=this.min}},mounted(){this.init()},emits:["update:modelValue","focus","blur","overlimit","change","plus","minus"],methods:{init(){this.currentValue=this.format(this.modelValue)},format(e){return e=""===(e=this.filter(e))?0:+e,e=Math.max(Math.min(this.max,e),this.min),null!==this.decimalLength&&(e=e.toFixed(this.decimalLength)),e},filter(e){return e=String(e).replace(/[^0-9.-]/g,""),this.integer&&-1!==e.indexOf(".")&&(e=e.split(".")[0]),e},check(){const e=this.format(this.currentValue);e!==this.currentValue&&(this.currentValue=e)},onFocus(e){this.$emit("focus",{...e.detail,name:this.name})},onBlur(e){this.format(e.detail.value),this.$emit("blur",{...e.detail,name:this.name})},onInput(e){const{value:t=""}=e.detail||{};if(""===t)return;let a=this.filter(t);if(null!==this.decimalLength&&-1!==a.indexOf(".")){const e=a.split(".");a=`${e[0]}.${e[1].slice(0,this.decimalLength)}`}a=this.format(a),this.emitChange(a)},emitChange(e){this.asyncChange||this.$nextTick((()=>{this.$emit("update:modelValue",e),this.currentValue=e,this.$forceUpdate()})),this.$emit("change",{value:e,name:this.name})},onChange(){const{type:e}=this;if(this.isDisabled(e))return this.$emit("overlimit",e);const t="minus"===e?-this.step:+this.step,a=this.format(this.add(+this.currentValue,t));this.emitChange(a),this.$emit(e)},add(e,t){const a=Math.pow(10,10);return Math.round((e+t)*a)/a},clickHandler(e){this.type=e,this.onChange()},longPressStep(){this.clearTimeout(),this.longPressTimer=setTimeout((()=>{this.onChange(),this.longPressStep()}),250)},onTouchStart(e){this.longPress&&(this.clearTimeout(),this.type=e,this.longPressTimer=setTimeout((()=>{this.onChange(),this.longPressStep()}),600))},onTouchEnd(){this.longPress&&this.clearTimeout()},clearTimeout(){clearTimeout(this.longPressTimer),this.longPressTimer=null}}},[["render",function(e,t,a,l,s,f){const y=v,k=u(i("u-icon"),q),g=b;return n(),o(y,{class:"u-number-box"},{default:r((()=>[e.showMinus&&e.$slots.minus?(n(),o(y,{key:0,class:"u-number-box__slot cursor-pointer",onClick:t[0]||(t[0]=d((e=>f.clickHandler("minus")),["stop"])),onTouchstart:t[1]||(t[1]=e=>f.onTouchStart("minus")),onTouchend:d(f.clearTimeout,["stop"])},{default:r((()=>[c(e.$slots,"minus",{},void 0,!0)])),_:3},8,["onTouchend"])):e.showMinus?(n(),o(y,{key:1,class:m(["u-number-box__minus cursor-pointer",{"u-number-box__minus--disabled":f.isDisabled("minus")}]),onClick:t[2]||(t[2]=d((e=>f.clickHandler("minus")),["stop"])),onTouchstart:t[3]||(t[3]=e=>f.onTouchStart("minus")),onTouchend:d(f.clearTimeout,["stop"]),"hover-class":"u-number-box__minus--hover","hover-stay-time":"150",style:p([f.buttonStyle("minus")])},{default:r((()=>[_(k,{name:"minus",color:f.isDisabled("minus")?"#c8c9cc":"#323233",size:"15",bold:"",customStyle:e.iconStyle},null,8,["color","customStyle"])])),_:1},8,["onTouchend","class","style"])):h("",!0),c(e.$slots,"input",{},(()=>[_(g,{disabled:e.disabledInput||e.disabled,"cursor-spacing":f.getCursorSpacing,class:m([{"u-number-box__input--disabled":e.disabled||e.disabledInput},"u-number-box__input"]),modelValue:s.currentValue,"onUpdate:modelValue":t[4]||(t[4]=e=>s.currentValue=e),onBlur:f.onBlur,onFocus:f.onFocus,onInput:f.onInput,type:"number",style:p([f.inputStyle])},null,8,["disabled","cursor-spacing","class","modelValue","onBlur","onFocus","onInput","style"])]),!0),e.showPlus&&e.$slots.plus?(n(),o(y,{key:2,class:"u-number-box__slot cursor-pointer",onClick:t[5]||(t[5]=d((e=>f.clickHandler("plus")),["stop"])),onTouchstart:t[6]||(t[6]=e=>f.onTouchStart("plus")),onTouchend:d(f.clearTimeout,["stop"])},{default:r((()=>[c(e.$slots,"plus",{},void 0,!0)])),_:3},8,["onTouchend"])):e.showPlus?(n(),o(y,{key:3,class:m(["u-number-box__plus cursor-pointer",{"u-number-box__minus--disabled":f.isDisabled("plus")}]),onClick:t[7]||(t[7]=d((e=>f.clickHandler("plus")),["stop"])),onTouchstart:t[8]||(t[8]=e=>f.onTouchStart("plus")),onTouchend:d(f.clearTimeout,["stop"]),"hover-class":"u-number-box__plus--hover","hover-stay-time":"150",style:p([f.buttonStyle("plus")])},{default:r((()=>[_(k,{name:"plus",color:f.isDisabled("plus")?"#c8c9cc":"#323233",size:"15",bold:"",customStyle:e.iconStyle},null,8,["color","customStyle"])])),_:1},8,["onTouchend","class","style"])):h("",!0)])),_:3})}],["__scopeId","data-v-254f2e11"]]),ee=J(f({__name:"tig-number-box",props:{modelValue:{type:Number,default:1},max:{type:Number,default:99},min:{type:Number,default:1},inputWidth:{type:[String,Number],default:35},buttonSize:{type:[String,Number],default:30},buttonWidth:{type:[String,Number],default:35},iconStyle:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","overlimit","change"],setup(e,{emit:t}){y((e=>({"0c6b5de3":d.value})));const a=e,l=t,s=k({get:()=>a.modelValue,set(e){l("update:modelValue",e),l("change",e)}}),r=e=>{l("overlimit",e)},d=k((()=>a.buttonWidth+"px"));return(t,a)=>{const l=u(i("up-number-box"),Y);return n(),o(l,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),iconStyle:e.iconStyle,buttonSize:e.buttonSize,min:e.min,max:e.max,onOverlimit:r,inputWidth:e.inputWidth,disabled:e.disabled,onChange:a[1]||(a[1]=()=>{})},null,8,["modelValue","iconStyle","buttonSize","min","max","inputWidth","disabled"])}}}),[["__scopeId","data-v-69416ffe"]]),te=e=>g({url:"product/exchange/list",method:"get",params:e}),ae=e=>g({url:"product/exchange/detail",method:"get",params:{id:e}}),le=f({__name:"buy",props:{id:Number,number:{type:Number},skuId:{type:Number},extraAttrIds:{type:String,default:""},disabled:{type:Boolean,default:!1},isQuick:{type:Boolean,default:!1},type:{type:String},skuItem:{type:Array}},emits:["callback"],setup(e,{emit:t}){const{t:a}=x(),l=e,s=t,u=S(!1),i=async()=>{var e;if(!l.disabled)try{if(1==u.value)return;u.value=!0;const t=m(l.id);let i={};const n={id:l.id??0,number:l.number,sku_id:l.skuId,is_quick:l.isQuick?1:0};if(l.extraAttrIds&&(n.extra_attr_ids=l.extraAttrIds),V(),"exchange"===l.type)i=await(e=n,g({url:"product/exchange/add_to_cart",method:"post",data:e}));else n.salesman_id=t>0?t:void 0,i=await R(n);s("callback"),1==l.isQuick?I({url:`/pages/order/check?flow_type=${i.flow_type}`}):C({title:a("加入购物车成功"),duration:1500})}catch(t){C({title:t.message,icon:"none",duration:1500})}finally{u.value=!1}},m=e=>{const t=B("salesmanProducts")||[];if(!t.length)return 0;const a=t.find((t=>t.product_id==e));return Number(null==a?void 0:a.salesman_id)||0};return(e,t)=>{const a=v;return n(),o(a,{class:"buy",onClick:d(i,["stop"])},{default:r((()=>[c(e.$slots,"default")])),_:3})}}}),se=J(f({__name:"specification",props:{modelValue:{type:[Number],default:0},skuId:{type:[Number],default:0},type:{type:[String],default:""}},emits:["sendValue","addCardSucceed","update:skuId","loadEnd","close"],setup(e,{expose:t,emit:a}){y((e=>({"70226b1a":Me.value,b6655f6e:Ee.value})));const{t:l}=x(),s=$(),b=e,f=a,g=S(!1),I=()=>{f("close"),Ce(),g.value=!1},B=()=>{g.value=!0},q=S([]),J=S([]),R=S({}),Y=S("0"),te=S("0"),se=S(""),ue=S(0),ie=S(""),ne=S(1),oe=S(0),re=S([]),de=S({}),ce=S(1),me=S([]),pe=S([]),_e=S(!1);T((()=>b.modelValue),(e=>{e&&e>0&&(ne.value=1,re.value=[],R.value={},pe.value=[],Ne.value=0,_e.value=!0,(async()=>{try{let e={};"exchange"===b.type?(e=await ae(b.modelValue),de.value=e.exchange_info,ue.value=e.exchange_info.product_stock,Y.value=de.value.discounts_price||"0",se.value=de.value.pic_url||""):(e=await K(b.modelValue),ue.value=e.item.product_stock,Y.value=e.item.product_price||"0",se.value=e.item.pic_url||""),ce.value=e.item.product_type,ie.value=e.item.product_name||"",q.value=e.attr_list.spe,me.value=e.attr_list.extra,J.value=e.sku_list,V(),he()}catch(e){C({title:e.message,icon:"none"}),f("loadEnd")}})())}),{immediate:!0});const he=()=>{if(q.value.length>0){if(b.skuId>0){const e=J.value.find((e=>e.sku_id===b.skuId));if(e){e.sku_value.split("|").forEach(((e,t)=>{re.value[t]=e}))}}0===re.value.length&&(q.value.forEach(((e,t)=>{e.attr_list.forEach((e=>{e.checked=!1})),re.value[t]=e.attr_list[0].attr_name+":"+e.attr_list[0].attr_value,e.attr_list[0].checked=!0})),se.value=q.value[0].attr_list[0].attr_pic),ve()}xe()},ve=()=>{q.value.forEach(((e,t)=>{const a=re.value[t];e.attr_list.forEach((e=>{const l=`${e.attr_name}:${e.attr_value}`;e.checked=a===l;const s=[...re.value];s[t]=l;const u=J.value.find((e=>e.sku_value===s.join("|")));e.sku_stock=u?u.sku_stock:0}))}));const e=J.value.find((e=>e.sku_value==re.value.join("|")));e&&(R.value=e)},be=w({id:0}),fe=S(""),ye=S(0),ke=S([]),ge=S(0),xe=async()=>{if(b.type)return _e.value=!1,void f("loadEnd");if(b.modelValue){be.id=b.modelValue,be.sku_id=R.value.sku_id||null,be.extra_attr_ids=pe.value.length>0?pe.value.filter((e=>!!e)).join(","):"";try{const e=await X(be);Y.value=e.price,e.origin_price&&(te.value=e.origin_price),ue.value=e.stock,re.value.length>0&&(fe.value=re.value.map((e=>e.split(":")[1])).join(" ")),e.promotion.length>0&&Ie(e.promotion),ye.value&&oe.value>0?ne.value=ne.value>oe.value?oe.value:ne.value:0===ue.value?ne.value=1:ne.value=ne.value>ue.value?ue.value:ne.value,_e.value&&Ce()}catch(e){C({title:e.message,icon:"none"})}finally{_e.value=!1,f("loadEnd")}}},Se=S({seckill_end_time:"",seckill_sales:0,seckill_stock:0}),Ve=S({discount_end_time:"",discount_price:0}),Ie=e=>{ke.value=e.filter((e=>1!==e.type&&6!==e.type));const t=e.find((e=>1===e.type)),a=e.find((e=>6===e.type));a?(ge.value=1,Ve.value.discount_end_time=a.data.item.end_time,Ve.value.discount_price=a.data.item.discount_price):(ge.value=0,Ve.value={discount_end_time:"",discount_price:0}),t?(console.log("seckillData",t),ye.value=1,Se.value.seckill_end_time=t.data.seckill_end_time,Se.value.seckill_sales=t.data.item.seckill_sales,Se.value.seckill_stock=t.data.item.seckill_stock,oe.value=t.data.seckill_limit_num,ue.value=t.data.item.seckill_stock):(ye.value=0,Se.value={seckill_end_time:"",seckill_sales:0,seckill_stock:0})},Ce=()=>{f("sendValue",{productOriginPrice:te.value,productPrice:Y.value,productStock:ue.value,productNumber:ne.value,productSkuId:R.value.sku_id,skuStr:fe.value,is_seckill:ye.value,seckillValue:Se.value,promotionList:ke.value,is_discount:ge.value,discountValue:Ve.value})},Be=()=>{I()},$e=()=>{I(),setTimeout((()=>{f("addCardSucceed",!0)}),500)},Te=e=>{e&&"minus"===e&&uni.$u.toast(l("商品数量不能小于1")),e&&"plus"===e&&uni.$u.toast(l("库存不足"))},we=k((()=>V())),Ne=S(0),Pe=e=>{Ne.value=e},ze=S([]);let De=null;const je=S({count:0,total:"0"}),Ae=async()=>{try{const e=await Z({id:b.modelValue,sku_item:ze.value});je.value=e.item}catch(e){console.error(e)}},Me=k((()=>"80vh")),Ee=k((()=>`calc(100rpx  + ${s.saveBottom+15}px)`));return t({handleShowPopup:B}),(t,a)=>{const l=v,b=u(i("tig-image"),Q),f=u(i("format-price"),H),y=U,k=W,x=u(i("uni-icons"),O),S=u(i("uni-number-box"),F),C=u(i("tig-number-box"),ee),$=u(i("tig-popup"),G);return n(),o(l,null,{default:r((()=>[_(l,{onClick:B},{default:r((()=>[c(t.$slots,"default",{},void 0,!0)])),_:3}),_($,{show:g.value,"onUpdate:show":a[6]||(a[6]=e=>g.value=e),onClose:Be,showClose:!1},{default:r((()=>[_(l,{class:"specification"},{default:r((()=>[_(l,{class:"product-sku-box flex justify-between"},{default:r((()=>[_(l,{class:"product-info"},{default:r((()=>[_(l,{class:"product-info-img"},{default:r((()=>[_(b,{src:se.value,"onUpdate:src":a[0]||(a[0]=e=>se.value=e)},null,8,["src"])])),_:1}),_(l,{class:"info"},{default:r((()=>[_(l,{class:"price"},{default:r((()=>["exchange"===e.type?(n(),o(l,{key:0,class:"exchange-box"},{default:r((()=>[_(f,{fontStyle:{fontSize:"32rpx"},currencyStyle:{fontSize:"22rpx"},decimalsStyle:{fontSize:"25rpx"},priceData:Y.value},null,8,["priceData"]),_(y,{class:"exchange-icon"},{default:r((()=>[N("+")])),_:1}),_(k,{class:"exchange-img",src:P(L)("exchange/exchange.png")},null,8,["src"]),_(y,{class:"exchange-text"},{default:r((()=>[N(z(de.value.exchange_integral),1)])),_:1})])),_:1})):(n(),o(f,{key:1,fontStyle:{fontSize:"32rpx"},currencyStyle:{fontSize:"22rpx"},decimalsStyle:{fontSize:"24rpx"},priceData:Y.value},null,8,["priceData"]))])),_:1}),ge.value||ye.value?(n(),o(l,{key:0,class:"ticket"},{default:r((()=>[_(l,{class:"ticket-content"},{default:r((()=>[N(z(ye.value?t.$t("秒杀价"):t.$t("限时折扣")),1)])),_:1})])),_:1})):h("",!0),te.value&&Number(te.value)>Number(Y.value)?(n(),o(l,{key:1,class:"del-box"},{default:r((()=>[_(f,{isBottom:!1,priceData:te.value,fontStyle:{"text-decoration":"line-through"}},null,8,["priceData"])])),_:1})):h("",!0),_(l,{class:"name"},{default:r((()=>[N(z(ie.value),1)])),_:1})])),_:1})])),_:1}),_(l,{class:"popup-close",onClick:I},{default:r((()=>[_(x,{type:"closeempty",size:"24",style:{color:"#c8c9cc"}})])),_:1})])),_:1}),P(V)()&&J.value.length>0?(n(),D(M,{key:0},[_(l,{class:"placeholder"}),_(l,{class:"tab"},{default:r((()=>[_(l,{class:m(["tab-item",{active:0===Ne.value}]),onClick:a[1]||(a[1]=e=>Pe(0))},{default:r((()=>[N(z(t.$t("单品采购"))+" ",1),j(_(k,{class:"image",style:{right:"0"},src:P(L)("product/shadow-right.png")},null,8,["src"]),[[A,1===Ne.value]])])),_:1},8,["class"]),_(l,{class:m(["tab-item",{active:1===Ne.value}]),onClick:a[2]||(a[2]=e=>Pe(1))},{default:r((()=>[N(z(t.$t("批量采购"))+" ",1),j(_(k,{class:"image",style:{left:"0"},src:P(L)("product/shadow-left.png")},null,8,["src"]),[[A,0===Ne.value]])])),_:1},8,["class"]),_(l,{class:"line",style:p(""+(0===Ne.value?"left: 0":"right: 0"))},null,8,["style"]),_(l,{class:"subline",style:p(""+(0===Ne.value?"right: 0":"left: 0"))},null,8,["style"])])),_:1})],64)):h("",!0),j(_(l,null,{default:r((()=>[q.value.length>0?(n(),o(l,{key:0,class:"product-sku-info"},{default:r((()=>[(n(!0),D(M,null,E(q.value,((e,t)=>(n(),o(l,{class:"sku-item",key:t},{default:r((()=>[_(l,{class:"tit"},{default:r((()=>[N(z(e.attr_name),1)])),_:2},1024),_(l,{class:"sku-tag flex"},{default:r((()=>[(n(!0),D(M,null,E(e.attr_list,((e,a)=>(n(),o(l,{key:a,class:m("tag "+(e.checked?"checked ":0==e.sku_stock?"disabled":"")),onClick:e=>((e,t)=>{const a=q.value[e].attr_list[t];0===e&&(se.value=a.attr_pic),re.value[e]=a.attr_name+":"+a.attr_value,ve(),xe()})(t,a)},{default:r((()=>[e.attr_pic_thumb&&0===t?(n(),o(l,{key:0,class:"tag-img"},{default:r((()=>[_(b,{src:e.attr_pic_thumb,"onUpdate:src":t=>e.attr_pic_thumb=t},null,8,["src","onUpdate:src"])])),_:2},1024)):h("",!0),_(l,{class:"tag-text"},{default:r((()=>[N(z(e.attr_value),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})):h("",!0),_(l,{class:"product-sku-info"},{default:r((()=>[_(l,{class:"num-item"},{default:r((()=>[_(l,{class:"tit"},{default:r((()=>[N(z(t.$t("购买数量")),1)])),_:1}),_(l,{class:"sku-num flex align-center"},{default:r((()=>[ye.value&&oe.value>0?(n(),D(M,{key:0},[_(S,{min:1,max:oe.value,modelValue:ne.value,"onUpdate:modelValue":a[3]||(a[3]=e=>ne.value=e),width:60},null,8,["max","modelValue"]),_(l,{class:"stock"},{default:r((()=>[N(z(t.$t("限购"))+"：",1),_(y,{style:{color:"var(--general)"}},{default:r((()=>[N(z(oe.value)+z(t.$t("件")),1)])),_:1})])),_:1})],64)):(n(),D(M,{key:1},[_(C,{modelValue:ne.value,"onUpdate:modelValue":a[4]||(a[4]=e=>ne.value=e),min:1,onOverlimit:Te,max:ue.value},null,8,["modelValue","max"]),_(l,{class:"stock"},{default:r((()=>[N(z(t.$t("库存"))+"：",1),ue.value>50?(n(),o(y,{key:0,style:{color:"var(--general)"}},{default:r((()=>[N(z(t.$t("充足")),1)])),_:1})):0===ue.value?(n(),o(y,{key:1,style:{color:"var(--general)"}},{default:r((()=>[N(z(t.$t("缺货")),1)])),_:1})):(n(),o(y,{key:2,style:{color:"var(--general)"}},{default:r((()=>[N(z(t.$t("仅剩"))+z(ue.value)+"件",1)])),_:1}))])),_:1})],64))])),_:1})])),_:1})])),_:1})])),_:1},512),[[A,1!==Ne.value]]),j(_(l,null,{default:r((()=>[J.value.length>0?(n(),o(l,{key:0},{default:r((()=>[_(l,{class:"allskulist"},{default:r((()=>[(n(!0),D(M,null,E(J.value,((e,t)=>(n(),o(l,{class:"allskulist-item"},{default:r((()=>[_(l,{class:"left"},{default:r((()=>[_(l,{class:"title line2"},{default:r((()=>[N(z(e.title),1)])),_:2},1024),_(l,{class:"desc"},{default:r((()=>[_(l,{class:"price"},{default:r((()=>[_(f,{priceData:e.sku_price},null,8,["priceData"])])),_:2},1024),_(l,{class:"line"}),_(l,{class:"stock"},{default:r((()=>[N("库存："+z(e.sku_stock),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),_(l,{class:"right"},{default:r((()=>[_(C,{buttonWidth:30,onChange:e=>(De&&clearTimeout(De),void(De=setTimeout((()=>{const e=J.value.filter((e=>e.num));ze.value=e.map((e=>({sku_id:e.sku_id,num:e.num}))),Ae()}),300))),modelValue:e.num,"onUpdate:modelValue":t=>e.num=t,min:0,onOverlimit:a[5]||(a[5]=()=>{}),max:e.sku_stock},null,8,["onChange","modelValue","onUpdate:modelValue","max"])])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1})):h("",!0)])),_:1},512),[[A,we.value]]),me.value.length>0?(n(),o(l,{key:1,class:"product-sku-info attribute"},{default:r((()=>[(n(!0),D(M,null,E(me.value,((e,t)=>(n(),o(l,{key:t,class:"attribute-item"},{default:r((()=>[_(l,{class:"item-title"},{default:r((()=>[N(z(e.attr_name),1)])),_:2},1024),_(l,{class:"item-content"},{default:r((()=>[(n(!0),D(M,null,E(e.attr_list,(e=>(n(),o(l,{key:e.attributes_id,class:m(["item-attr",{checked:pe.value[t]===e.attributes_id}]),onClick:d((a=>((e,t)=>{pe.value[e]&&pe.value[e]===t?pe.value[e]=null:pe.value[e]=t,xe()})(t,e.attributes_id)),["stop"])},{default:r((()=>[_(l,{class:"label"},{default:r((()=>[N(z(e.attr_value),1)])),_:2},1024),_(f,{class:"value",priceData:e.attr_price},null,8,["priceData"])])),_:2},1032,["onClick","class"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})):h("",!0)])),_:1}),_(l,{class:m(["footer",{shadow:we.value}]),style:p({"padding-bottom":P(s).saveBottom+15+"px"})},{default:r((()=>[we.value?(n(),o(l,{key:0,class:"b2b-btn"},{default:r((()=>[_(l,{class:"desc"},{default:r((()=>[_(l,null,{default:r((()=>[N("已选"),_(y,{class:"num"},{default:r((()=>[N(z(je.value.count),1)])),_:1}),N("件")])),_:1}),_(l,{class:"price"},{default:r((()=>[_(l,null,{default:r((()=>[N("商品金额：")])),_:1}),_(f,{fontStyle:{fontSize:"32rpx",color:"var(--general)"},currencyStyle:{fontSize:"22rpx",color:"var(--general)"},decimalsStyle:{fontSize:"25rpx",color:"var(--general)"},priceData:je.value.total},null,8,["fontStyle","currencyStyle","decimalsStyle","priceData"])])),_:1})])),_:1}),_(l,{class:"add_cart"},{default:r((()=>[_(le,{id:Number(e.modelValue),disabled:0===ze.value.length,skuItem:ze.value,extraAttrIds:be.extra_attr_ids,onCallback:$e},{default:r((()=>[_(l,{class:m(["btn cart",0===ze.value.length?"disabled-div":""])},{default:r((()=>[N(z(t.$t("批量加入购物车")),1)])),_:1},8,["class"])])),_:1},8,["id","disabled","skuItem","extraAttrIds"]),_(le,{id:Number(e.modelValue),skuItem:ze.value,disabled:0===ze.value.length,extraAttrIds:be.extra_attr_ids,onCallback:I,isQuick:!0},{default:r((()=>[_(l,{class:m(["btn buy-right",0===ze.value.length?"disabled-div":""])},{default:r((()=>[N(z(t.$t("立即购买")),1)])),_:1},8,["class"])])),_:1},8,["id","skuItem","disabled","extraAttrIds"])])),_:1})])),_:1})):(n(),D(M,{key:1},["exchange"===e.type?(n(),o(l,{key:0,class:"exchange-btn"},{default:r((()=>[_(le,{id:de.value.id,skuId:R.value.sku_id,disabled:0==ue.value,extraAttrIds:be.extra_attr_ids,number:ne.value,onCallback:I,isQuick:!0,type:e.type},{default:r((()=>[_(l,{class:m(["btn",0===ue.value?"disabled-div":""])},{default:r((()=>[N(z(t.$t("立即兑换")),1)])),_:1},8,["class"])])),_:1},8,["id","skuId","disabled","extraAttrIds","number","type"])])),_:1})):(n(),D(M,{key:1},[1===ce.value?(n(),o(l,{key:0,class:"add_cart"},{default:r((()=>[_(le,{id:Number(e.modelValue),skuId:R.value.sku_id,disabled:0==ue.value,extraAttrIds:be.extra_attr_ids,number:ne.value,onCallback:$e},{default:r((()=>[_(l,{class:m(["btn cart",0===ue.value?"disabled-div":""])},{default:r((()=>[N(z(t.$t("加入购物车")),1)])),_:1},8,["class"])])),_:1},8,["id","skuId","disabled","extraAttrIds","number"]),_(le,{id:Number(e.modelValue),skuId:R.value.sku_id,disabled:0==ue.value,extraAttrIds:be.extra_attr_ids,number:ne.value,onCallback:I,isQuick:!0},{default:r((()=>[_(l,{class:m(["btn buy-right",0===ue.value?"disabled-div":""])},{default:r((()=>[N(z(t.$t("立即购买")),1)])),_:1},8,["class"])])),_:1},8,["id","skuId","disabled","extraAttrIds","number"])])),_:1})):(n(),o(l,{key:1,class:"exchange-btn"},{default:r((()=>[_(le,{id:e.modelValue,skuId:R.value.sku_id,disabled:0==ue.value,extraAttrIds:be.extra_attr_ids,number:ne.value,onCallback:I,isQuick:!0,type:e.type},{default:r((()=>[_(l,{class:m(["btn",0===ue.value?"disabled-div":""])},{default:r((()=>[N(z(t.$t("立即购买")),1)])),_:1},8,["class"])])),_:1},8,["id","skuId","disabled","extraAttrIds","number","type"])])),_:1}))],64))],64))])),_:1},8,["class","style"])])),_:1},8,["show"])])),_:3})}}}),[["__scopeId","data-v-d08e24df"]]);export{ee as _,ae as a,te as g,se as s};
