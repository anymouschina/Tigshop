import{Y as e,e as a,u as l,r as t,G as o,Q as s,R as i,a1 as r,l as d,H as n,ae as u,af as c,c as p,w as m,v as f,z as _,o as b,a as g,i as v,b as h,t as y,B as x,A as k,d as V,J as S,N as $,ag as w,M as C,_ as j}from"./index-BKXBH4vI.js";import{_ as z}from"./tig-mobile-areacode.DEwvEg2p.js";import{_ as U}from"./uni-easyinput.D0KhEVqd.js";import{_ as q,a as A}from"./uni-forms.lNaSstdl.js";import{_ as M,c as R,a as B,s as F}from"./tig-layout.DMoUsUKf.js";import{n as I}from"./index.xrDesKlL.js";import{V as T}from"./verificationCode.CRSs8EZv.js";import{u as D}from"./useResetState.cjuY0ZCe.js";import"./uni-icons.C94_g2wt.js";const E=j(a({__name:"index",setup(a){const j=l(),E=t("86"),[W,Z]=D({mobile:"",mobile_code:"",password:""}),{t:G}=o(),H=s({navbar:"1",return:"1",title:"注册"}),J=t(!1),N=t(""),Q=t(!1),Y=i((()=>!(W.value.mobile&&W.value.mobile_code&&W.value.password&&N.value))),K={mobile:{rules:[{required:!0,errorMessage:G("请输入手机号")},{validateFunction:(e,a,l,t)=>a?/^(?=.*\D).+$/.test(a)?t(G("格式错误，请输入正确的手机号码")):void t():t(G("手机号不能为空"))}]},mobile_code:{rules:[{required:!0,errorMessage:G("请输入验证码")},{validateFunction:(e,a,l,t)=>a?6!=a.length?t(G("请输入6位验证码")):void t():t(G("验证码不能为空"))}]},password:{rules:[{required:!0,errorMessage:G("请输入密码")},{validateFunction:(e,a,l,t)=>a?a.length>20||a.length<6?t(G("密码应为6-20位字符")):/\s/.test(a)?t(G("密码中不允许有空格")):/^\d+$/.test(a)?t(G("密码不能全为数字")):/^(?=.*[\d\W]).+$/.test(a)?/^(?=.*[a-zA-Z0-9]).+$/.test(a)?/^(?!([a-zA-Z0-9])\1*$).+$/.test(a)?void t():t(G("密码不能全为相同字符或数字")):t(G("密码不能全为符号")):t(G("密码不能全为字母")):t(G("密码不能为空"))}]}},L=r(),O=async()=>{L.value.validate().then((async()=>{const a=n("bindSalesmanId");try{Q.value=!0,W.value.mobile=j.is_open_mobile_area_code?E.value+W.value.mobile:W.value.mobile;await(l={...W.value,salesman_id:a},e({url:"user/regist/regist_act",method:"post",data:l}));$({title:G("注册成功"),duration:1500,icon:"none"}),setTimeout((()=>{w({url:"/pages/login/index"})}),1e3)}catch(t){Z(),$({title:t.message,duration:1500,icon:"none"})}finally{Q.value=!1}var l})).catch((e=>{}))};d((()=>{n("token")&&u({url:"/pages/index/index"}),c((()=>{L.value.setRules(K)}))}));const P=e=>{$({title:e,duration:1500,icon:"none"})},X=e=>{C({url:e})};return(e,a)=>{const l=v,t=f(_("tig-mobile-areacode"),z),o=f(_("uni-easyinput"),U),s=f(_("uni-forms-item"),q),i=f(_("tig-checkbox"),R),r=V,d=f(_("uni-forms"),A),n=f(_("tig-button"),B),u=f(_("tig-layout"),M);return b(),p(u,null,{default:m((()=>[g(l,{class:"register-container"},{default:m((()=>[g(I,{parameter:H},null,8,["parameter"]),g(l,{class:"register-warp"},{default:m((()=>[g(l,{class:"h1_tit"},{default:m((()=>[h(y(e.$t("会员注册")),1)])),_:1})])),_:1}),g(l,{class:"profile-edit-content"},{default:m((()=>[g(d,{ref_key:"formRef",ref:L,modelValue:x(W),rules:K,"label-align":"right"},{default:m((()=>[g(s,{label:"",name:"mobile"},{default:m((()=>[g(l,{class:"input mobileareacode-box"},{default:m((()=>[x(j).is_open_mobile_area_code?(b(),p(t,{key:0,labelStyle:{fontSize:"28rpx"},nameStyle:{fontSize:"24rpx",padding:"0 2rpx 0 10rpx"},boxStyle:{paddingRight:"0"},iconStyle:{fontSize:"22rpx"},modelValue:E.value,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value=e)},null,8,["modelValue"])):k("",!0),g(o,{inputBorder:!1,modelValue:x(W).mobile,"onUpdate:modelValue":a[1]||(a[1]=e=>x(W).mobile=e),class:"uni-input item-input",placeholderStyle:"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("请输入手机号"),primaryColor:"rgb(192, 196, 204)"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),g(s,{label:"",name:"mobile_code"},{default:m((()=>[g(l,{class:"item-one"},{default:m((()=>[g(o,{inputBorder:!1,modelValue:x(W).mobile_code,"onUpdate:modelValue":a[2]||(a[2]=e=>x(W).mobile_code=e),class:"uni-input item-input input",focus:"",placeholderStyle:"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("手机短信验证码"),primaryColor:"rgb(192, 196, 204)",style:{width:"400rpx"}},null,8,["modelValue","placeholder"]),g(T,{style:{height:"65rpx"},isChecked:J.value,"onUpdate:isChecked":a[3]||(a[3]=e=>J.value=e),mobile:x(j).is_open_mobile_area_code?E.value+x(W).mobile:x(W).mobile,"verify-token-data":N.value,"onUpdate:verifyTokenData":a[4]||(a[4]=e=>N.value=e),requestApi:x(F),onMobileErrorCallback:P},null,8,["isChecked","mobile","verify-token-data","requestApi"])])),_:1})])),_:1}),g(s,{label:"",name:"password"},{default:m((()=>[g(l,{class:"input"},{default:m((()=>[g(o,{clearable:!1,inputBorder:!1,trim:!0,type:"password",modelValue:x(W).password,"onUpdate:modelValue":a[5]||(a[5]=e=>x(W).password=e),class:"uni-input item-input",placeholderStyle:"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("请输入密码"),primaryColor:"rgb(192, 196, 204)"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),g(s,{label:"",name:""},{default:m((()=>[g(l,{class:"btn"},{default:m((()=>[g(l,{class:"agreement-btn"},{default:m((()=>[g(i,{checked:J.value,"onUpdate:checked":a[6]||(a[6]=e=>J.value=e)},null,8,["checked"]),g(r,{class:"agreement-text special-color",onClick:a[7]||(a[7]=S((e=>X("/pages/register/agreement")),["stop"]))},{default:m((()=>[h(y(e.$t("《注册协议》")),1)])),_:1})])),_:1}),g(l,{class:"lf-input",onClick:a[8]||(a[8]=S((e=>X("/pages/login/index")),["stop"]))},{default:m((()=>[g(l,null,{default:m((()=>[h(y(e.$t("已有账号？")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),g(l,{class:"form-con"},{default:m((()=>[g(n,{disabled:Y.value,loading:Q.value,class:"btn2-css3",onClick:O},{default:m((()=>[h(y(e.$t("注 册")),1)])),_:1},8,["disabled","loading"])])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-02ed5f84"]]);export{E as default};
