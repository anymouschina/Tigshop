import{d as a,G as e,Q as t,r as o,f as l,k as s,l as r,m as n,n as i,w as m,q as u,t as f,v as d,a6 as c,a7 as p,ak as b,ar as g,C as _}from"./index-Ce4FtYLL.js";import{_ as h}from"./tig-image.bUT1hZK2.js";import{_ as v,a as y}from"./u-form.Ck-vb9z5.js";import{_ as j}from"./u-input.2cv__j3I.js";import{a as $,_ as k}from"./tig-layout.nM03J4I_.js";import{_ as x}from"./save-bottom-box.C22fRRFe.js";import{g as w,u as V}from"./salesmanPersonal.MCC-UDFJ.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.BDQrrWMI.js";import"./u-line.CYstIzYr.js";import"./u-loading-icon.CaEeBur7.js";const B=S(a({__name:"personalInfo",setup(a){const{t:S}=e(),B=t({nickname:"",cardname:"",wechatname:"",mobile:""}),C={mobile:{type:"string",required:!0,message:S("请输入手机号"),trigger:["blur","change"]}},R=o(),z=()=>{R.value.validate().then((()=>{T()})).catch((()=>{uni.$u.toast(S("保存失败"))}))},T=async()=>{try{const a=await V({...B});a.message&&uni.$u.toast(a.message),setTimeout((()=>{b({success:function(a){g("refreshData")}})}),1e3)}catch(a){console.error("表单错误信息：",a),uni.$u.toast(a.message)}};return l((()=>{(async()=>{c({title:S("加载中")});try{const a=await w();Object.assign(B,a.item)}catch(a){console.error(a)}finally{p()}})()})),(a,e)=>{const t=_,o=s(r("tig-image"),h),l=s(r("up-form-item"),v),c=s(r("up-input"),j),p=s(r("up-form"),y),b=s(r("tig-button"),$),g=s(r("save-bottom-box"),x),w=s(r("tig-layout"),k);return n(),i(w,{needSaveTop:!0,saveTopBgColor:"#f5f5f5"},{default:m((()=>[u(p,{labelPosition:"left",model:B,rules:C,ref_key:"formRef",ref:R},{default:m((()=>[u(t,{class:"personal-title"},{default:m((()=>[f(d(a.$t("个人信息")),1)])),_:1}),u(t,{class:"personal-info"},{default:m((()=>[u(l,{label:a.$t("头像"),labelWidth:"100",borderBottom:!0,ref:"itemRef"},{default:m((()=>[u(t,{class:"salesman-avatar"},{default:m((()=>[u(o,{class:"salesman-avatar__img salesman-avatar--round salesman-avatar__img--big",src:B.avatar,"onUpdate:src":e[0]||(e[0]=a=>B.avatar=a)},null,8,["src"])])),_:1})])),_:1},8,["label"]),u(l,{label:a.$t("昵称"),labelWidth:"100",prop:"nickname",borderBottom:!0,ref:"itemRef"},{default:m((()=>[u(c,{modelValue:B.nickname,"onUpdate:modelValue":e[1]||(e[1]=a=>B.nickname=a),border:"none",placeholder:a.$t("请输入昵称"),fontSize:"14"},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),u(t,{class:"personal-title"},{default:m((()=>[f(d(a.$t("联系方式")),1)])),_:1}),u(t,{class:"personal-info"},{default:m((()=>[u(l,{label:a.$t("手机号"),labelWidth:"100",prop:"mobile",borderBottom:!0,ref:"itemRef"},{default:m((()=>[u(c,{modelValue:B.mobile,"onUpdate:modelValue":e[2]||(e[2]=a=>B.mobile=a),border:"none",placeholder:a.$t("请输入手机号"),fontSize:"14"},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})])),_:1},8,["model"]),u(g,{height:65,backgroundColor:"#fff"},{default:m((()=>[u(t,{class:"btn-box"},{default:m((()=>[u(b,{customStyle:{background:"linear-gradient(45deg, rgb(255, 170, 30), rgb(255, 114, 13))","border-color":"#fff"},style:{width:"100%"},onClick:z},{default:m((()=>[f(d(a.$t("保存")),1)])),_:1},8,["customStyle"])])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-4715b5a2"]]);export{B as default};
