import{e,r as a,f as l,R as t,c as s,w as i,q as u,y as o,o as n,a as r,i as d,D as c,b as f,t as p,F as v,A as m,L as _,P as y,_ as b}from"./index-BKzbZvRR.js";import{_ as h}from"./uni-easyinput.DUnQnQgu.js";import{_ as k,a as g}from"./tig-layout.BpNdXByQ.js";import{V as $}from"./index.B_Pq2Y6R.js";import{s as C,a as x,m as j,b as U}from"./security.BEN9OWFY.js";import"./uni-icons.DELFdrY8.js";const q=b(e({__name:"phone",setup(e){const b=e=>{A.value=e},q=e=>{w.value=e},A=a(""),w=a(""),D=a(""),E=a(!0),I=a(!1);l((e=>{e.mobile?(I.value=!0,w.value=e.mobile):I.value=!1}));const T=t((()=>!A.value||!D.value)),B=e=>{_({title:e,duration:1500,icon:"none"})},M=async()=>{try{let e={mobile:w.value,code:A.value};console.log(I.value),I.value?await j({...e}):await U({...e}),y({url:"/pages/user/security/newPhone"})}catch(e){_({title:e.message,icon:"none"})}};return(e,a)=>{const l=d,t=u(o("uni-easyinput"),h),_=u(o("tig-button"),g),y=u(o("tig-layout"),k);return n(),s(y,{title:"账户安全"},{default:i((()=>[r(l,{class:"profile-edit-main"},{default:i((()=>[r(l,{class:"profile-edit-content"},{default:i((()=>[I.value?(n(),s(l,{key:0,class:"item"},{default:i((()=>[r(l,{class:"title"},{default:i((()=>[r(l,null,{default:i((()=>[f(p(e.$t("请输入")),1)])),_:1}),r(l,{class:"info"},{default:i((()=>[f(p(w.value.replace(/(\d{2})\d*(\d{4})$/,"$1*****$2")),1)])),_:1}),r(l,null,{default:i((()=>[f(p(e.$t("收到的短信验证码")),1)])),_:1})])),_:1})])),_:1})):(n(),c(v,{key:1},[r(l,{class:"item"},{default:i((()=>[r(l,{class:"title"},{default:i((()=>[r(l,null,{default:i((()=>[f(p(e.$t("您还未绑定手机号，请输入手机号绑定")),1)])),_:1})])),_:1})])),_:1}),r(l,{class:"item special-item line"},{default:i((()=>[r(t,{inputBorder:!1,value:w.value,class:"uni-input item-input",placeholder:e.$t("请输入手机号"),primaryColor:"rgb(192, 196, 204)",onInput:q},null,8,["value","placeholder"])])),_:1})],64)),r(l,{class:"flex align-center"},{default:i((()=>[r(l,{class:"item line"},{default:i((()=>[r(t,{inputBorder:!1,value:A.value,focus:"",class:"",placeholder:e.$t("手机短信验证码"),primaryColor:"rgb(192, 196, 204)",onInput:b},null,8,["value","placeholder"])])),_:1}),I.value?(n(),s($,{key:0,style:{height:"65rpx"},isChecked:E.value,"onUpdate:isChecked":a[0]||(a[0]=e=>E.value=e),mobile:w.value,"onUpdate:mobile":a[1]||(a[1]=e=>w.value=e),"verify-token-data":D.value,"onUpdate:verifyTokenData":a[2]||(a[2]=e=>D.value=e),requestApi:m(C),onMobileErrorCallback:B},null,8,["isChecked","mobile","verify-token-data","requestApi"])):(n(),s($,{key:1,style:{height:"65rpx"},isChecked:E.value,"onUpdate:isChecked":a[3]||(a[3]=e=>E.value=e),mobile:w.value,"onUpdate:mobile":a[4]||(a[4]=e=>w.value=e),"verify-token-data":D.value,"onUpdate:verifyTokenData":a[5]||(a[5]=e=>D.value=e),requestApi:m(x),onMobileErrorCallback:B},null,8,["isChecked","mobile","verify-token-data","requestApi"]))])),_:1}),r(l,{class:"item",style:{height:"60rpx"}},{default:i((()=>[r(_,{disabled:T.value,class:"next",onClick:M},{default:i((()=>[f(p(e.$t("下一步")),1)])),_:1},8,["disabled"])])),_:1})])),_:1}),r(l,{class:"profile-edit-content"},{default:i((()=>[r(l,{class:"btn-item"},{default:i((()=>[r(l,{class:"title"},{default:i((()=>[r(l,{class:"big-title"},{default:i((()=>[f(p(e.$t("为什么要进行身份验证"))+"？",1)])),_:1})])),_:1}),r(l,{class:"info"},{default:i((()=>[f("1. "+p(e.$t("为保障您的账户信息安全，在变更账户中的重要信息时需要进行身份验证，感谢您的理解和支持"))+"。",1)])),_:1}),r(l,{class:"info"},{default:i((()=>[f("2. "+p(e.$t("验证身份遇到问题？您可以通知我们的客服，我们将尽快联系您"))+"。",1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-c91890a9"]]);export{q as default};
