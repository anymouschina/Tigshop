import{e,E as a,r as t,R as l,c as s,w as i,q as o,y as u,o as n,a as r,i as d,A as p,b as c,t as m,L as v,ae as f,_ as y}from"./index-BKzbZvRR.js";import{_}from"./uni-easyinput.DUnQnQgu.js";import{_ as b,a as h}from"./tig-layout.BpNdXByQ.js";import{V as g}from"./index.B_Pq2Y6R.js";import{a as k,b as x}from"./security.BEN9OWFY.js";import"./uni-icons.DELFdrY8.js";const C=y(e({__name:"newPhone",setup(e){const{t:y}=a(),C=e=>{q.value=e},j=e=>{w.value=e},q=t(""),w=t(""),A=t(""),E=t(!0),I=l((()=>!w.value||!q.value)),T=e=>{v({title:e,duration:1500,icon:"none"})},U=async()=>{try{let e={mobile:w.value,code:q.value};await x({...e}),v({title:y("修改成功"),icon:"none"}),setTimeout((()=>{f({url:"/pages/user/profile/index"})}),1e3)}catch(e){e.message&&v({title:e.message,icon:"none"})}};return(e,a)=>{const t=o(u("uni-easyinput"),_),l=d,v=o(u("tig-button"),h),f=o(u("tig-layout"),b);return n(),s(f,{title:"账户安全"},{default:i((()=>[r(l,{class:"profile-edit-main"},{default:i((()=>[r(l,{class:"profile-edit-content"},{default:i((()=>[r(l,{class:"item input"},{default:i((()=>[r(t,{inputBorder:!1,value:w.value,class:"uni-input item-input",placeholder:e.$t("请输入新手机号"),primaryColor:"rgb(192, 196, 204)",onInput:j},null,8,["value","placeholder"])])),_:1}),r(l,{class:"flex align-center"},{default:i((()=>[r(l,{class:"item line"},{default:i((()=>[r(t,{inputBorder:!1,value:q.value,class:"uni-input item-input",focus:"",placeholder:e.$t("新手机短信验证码"),primaryColor:"rgb(192, 196, 204)",onInput:C},null,8,["value","placeholder"])])),_:1}),r(g,{style:{height:"65rpx"},isChecked:E.value,"onUpdate:isChecked":a[0]||(a[0]=e=>E.value=e),mobile:w.value,"onUpdate:mobile":a[1]||(a[1]=e=>w.value=e),"verify-token-data":A.value,"onUpdate:verifyTokenData":a[2]||(a[2]=e=>A.value=e),requestApi:p(k),onMobileErrorCallback:T},null,8,["isChecked","mobile","verify-token-data","requestApi"])])),_:1}),r(l,{class:"item",style:{height:"60rpx"}},{default:i((()=>[r(v,{disabled:I.value,class:"next",onClick:U},{default:i((()=>[c(m(e.$t("提交")),1)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-0a7ee0d7"]]);export{C as default};
