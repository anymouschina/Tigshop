import{Y as e,e as a,E as t,r as l,c as s,w as o,a5 as c,a6 as u,q as r,y as d,be as i,bY as n,o as f,a as p,z as m,i as _,D as h,F as v,J as y,U as g,b,t as x,H as k,V as C,B as S,A as $,C as j,d as z,L as I,ae as w,_ as V}from"./index-BKzbZvRR.js";import{_ as D}from"./tig-image.DrOwWlV9.js";import{_ as P}from"./format-price.kSnuguuz.js";import{_ as T,a as U,d as A}from"./tig-layout.BpNdXByQ.js";import{_ as B}from"./tig-fixed-placeholder.s9cnCRBL.js";const F=V(a({__name:"index",setup(a){const{t:V}=t(),F=l(!0),H=l([]),Y=l([]),q=l(!1),E=l(!1),J=e=>{e.length==H.value.length?E.value=!0:E.value=!1},L=()=>{E.value?Y.value=H.value.map((e=>e.productId)):Y.value=[]},N=async()=>{try{await(a=Y.value,e({url:"user/user/delHistoryProduct",method:"post",data:{ids:a}})),I({title:V("删除成功"),icon:"none"}),G()}catch(t){console.error(t)}var a},G=async()=>{c({title:V("加载中")});try{const a=await e({url:"user/user/historyProduct",method:"get"});H.value=a}catch(a){console.error(a)}finally{u(),F.value=!1}};G();return(e,a)=>{const t=r(d("tig-image"),D),l=_,c=r(d("format-price"),P),u=r(d("up-checkbox"),i),I=r(d("up-checkbox-group"),n),V=S,G=z,K=r(d("tig-button"),U),M=r(d("tig-checkbox"),A),O=r(d("tig-fixed-placeholder"),B),Q=r(d("tig-layout"),T);return f(),s(Q,{title:"浏览记录"},{default:o((()=>[p(I,{modelValue:Y.value,"onUpdate:modelValue":a[1]||(a[1]=e=>Y.value=e),activeColor:"var(--general)",placement:"column",onChange:J},{default:o((()=>[H.value.length>0?(f(),s(l,{key:0,class:"history-product"},{default:o((()=>[(f(!0),h(v,null,y(H.value,(e=>(f(),s(l,{key:e.productId,class:"history-product-item",onClick:a=>{return t=e.productId,void w({url:"/pages/product/index?id="+t});var t}},{default:o((()=>[p(l,{class:"history-product-item-top"},{default:o((()=>[p(l,{class:"img-box"},{default:o((()=>[p(t,{src:e.picThumb,mode:"widthFix"},null,8,["src"])])),_:2},1024)])),_:2},1024),p(l,{class:"history-product-item-bottom"},{default:o((()=>[p(l,{class:"detail line2"},{default:o((()=>[b(x(e.productName),1)])),_:2},1024),p(l,{class:"price"},{default:o((()=>[p(c,{fontStyle:{fontSize:"32rpx"},currencyStyle:{fontSize:"22rpx"},decimalsStyle:{fontSize:"25rpx"},priceData:e.productPrice},null,8,["priceData"])])),_:2},1024)])),_:2},1024),g(p(l,{class:"item-btn",onClick:a[0]||(a[0]=k((()=>{}),["stop"]))},{default:o((()=>[p(l,{class:"btn-box"},{default:o((()=>[p(u,{customStyle:{border:"none"},size:"20",shape:"circle",name:e.productId},null,8,["name"])])),_:2},1024)])),_:2},1536),[[C,q.value]])])),_:2},1032,["onClick"])))),128))])),_:1})):m("",!0)])),_:1},8,["modelValue"]),F.value||0!=H.value.length?m("",!0):(f(),s(l,{key:0,class:"empty-box"},{default:o((()=>[p(l,{class:"pictrue"},{default:o((()=>[p(V,{src:$(j)("common/data_empty.png")},null,8,["src"])])),_:1}),p(l,{class:"txt"},{default:o((()=>[b(x(e.$t("暂无浏览记录！")),1)])),_:1})])),_:1})),p(O,{backgroundColor:"#fff"},{default:o((()=>[p(l,{class:"footer-box"},{default:o((()=>[q.value?(f(),s(l,{key:1,class:"footer-edit"},{default:o((()=>[p(l,{class:"all-check"},{default:o((()=>[p(M,{checked:E.value,"onUpdate:checked":a[3]||(a[3]=e=>E.value=e),onChange:L,checkedText:e.$t("全选")},null,8,["checked","checkedText"])])),_:1}),p(l,{class:"edit-btn"},{default:o((()=>[p(K,{class:"btn",plain:"",onClick:a[4]||(a[4]=e=>q.value=!1)},{default:o((()=>[b(x(e.$t("取消")),1)])),_:1}),p(K,{class:"btn",disabled:!Y.value.length,onClick:N},{default:o((()=>[b(x(e.$t("删除")),1)])),_:1},8,["disabled"])])),_:1})])),_:1})):(f(),s(l,{key:0,class:"footer-text"},{default:o((()=>[p(l,{class:"footer-num"},{default:o((()=>[b(x(e.$t("共")),1),p(G,{class:"num"},{default:o((()=>[b(x(H.value.length),1)])),_:1}),b(x(e.$t("件商品")),1)])),_:1}),p(l,{class:"footer-text-btn"},{default:o((()=>[p(K,{class:"btn",onClick:a[2]||(a[2]=e=>q.value=!0)},{default:o((()=>[b(x(e.$t("管理")),1)])),_:1})])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-8fa60898"]]);export{F as default};
