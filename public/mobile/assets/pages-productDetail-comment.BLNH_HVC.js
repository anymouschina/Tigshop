import{d as a,G as e,Q as l,r as s,o as t,e as u,b as n,b4 as o,k as r,l as c,m as i,y as d,q as f,w as m,F as _,J as v,n as p,s as g,x as y,t as b,v as x,a6 as k,M as h,a7 as j,D as w,C as z,a5 as C,E as F,aZ as G,B as J}from"./index-Ce4FtYLL.js";import{_ as L}from"./uni-rate.BdAT1cYl.js";import{n as M}from"./index.v2UirNFN.js";import{b as q}from"./product.rX84B_3L.js";import{_ as B}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.yuSuVTUg.js";const D=B(a({__name:"comment",setup(a){const{t:B}=e(),D=l({navbar:"1",return:"1",title:"商品评价",class:"pageGoods"}),E=s(!1),H=s([]),I=s(1),Q=s(10),Z=s(0),$=s(!1),A=async()=>{I.value>1&&($.value=!0),k({title:B("加载中")});try{const a=await q(K.value,{type:1,size:Q.value,page:I.value});H.value=[...H.value,...a.filter_result],Z.value=a.total}catch(a){h({title:a.message,icon:"none"})}finally{$.value=!1,j()}},K=s("");return t((a=>{if(a){const{id:e}=a;e&&(K.value=e,A())}})),u((()=>{I.value<Math.ceil(Z.value/Q.value)&&(I.value++,A())})),n((()=>{o()})),(a,e)=>{const l=w,s=z,t=J,u=r(c("uni-rate"),L);return i(),d(_,null,[f(M,{parameter:D},null,8,["parameter"]),f(s,{class:"product-comment-card"},{default:m((()=>[(i(!0),d(_,null,v(H.value,((a,e)=>(i(),p(s,{class:"comment-item",key:e},{default:m((()=>[f(s,{class:"user-info flex justify-between align-center"},{default:m((()=>[f(s,{class:"user-name flex align-center"},{default:m((()=>[f(s,{class:"head_logo"},{default:m((()=>[f(l,{src:g(C)((null==a?void 0:a.avatar)||"")},null,8,["src"])])),_:2},1024),f(s,null,{default:m((()=>[f(t,null,{default:m((()=>[b(x(a.username),1)])),_:2},1024),f(u,{value:a.comment_rank,readonly:!0,size:"14",color:"#bfbfbf","active-color":"#ffa800"},null,8,["value"])])),_:2},1024)])),_:2},1024),f(s,{class:"time"},{default:m((()=>[b(x(a.add_time),1)])),_:2},1024)])),_:2},1024),f(s,{class:"tags flex-wrap"},{default:m((()=>[(i(!0),d(_,null,v(a.comment_tag,((a,e)=>(i(),p(s,{class:"tag",key:e},{default:m((()=>[b(x(a),1)])),_:2},1024)))),128))])),_:2},1024),f(s,{class:"user-content"},{default:m((()=>[b(x(a.content),1)])),_:2},1024),f(s,{class:"user-imgs flex-wrap align-center"},{default:m((()=>[(i(!0),d(_,null,v(a.show_pics,((a,e)=>(i(),p(l,{key:e,mode:"aspectFit",src:g(C)(a.pic_thumb),onClick:e=>{return l=g(C)((null==a?void 0:a.pic_url)||""),void G({urls:[l]});var l}},null,8,["src","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1}),I.value>1?(i(),p(s,{key:0,class:"loading-box"},{default:m((()=>[E.value?(i(),p(s,{key:0,class:"bottomLoading"},{default:m((()=>[f(l,{"lazy-load":"",class:"loading",src:g(F)("common/loading.gif")},null,8,["src"])])),_:1})):y("",!0)])),_:1})):y("",!0),f(s,{class:"loading-box"},{default:m((()=>[H.value.length<1?(i(),p(s,{key:0},{default:m((()=>[b(x(a.$t("暂无评价")),1)])),_:1})):y("",!0)])),_:1})],64)}}}),[["__scopeId","data-v-479403b8"]]);export{D as default};
