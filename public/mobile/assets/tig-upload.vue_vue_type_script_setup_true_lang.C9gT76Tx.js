import{e,E as t,r as a,c as s,o as u,w as l,aE as i,i as n,bK as o,L as r,a5 as c,bD as d,bE as p,G as m,a6 as h,bF as f}from"./index-BKzbZvRR.js";const g=e({__name:"tig-upload",props:{count:{type:Number,default:1},modelValue:{type:String,default:""},requestUrl:{type:String,default:"user/user/uploadImg"}},emits:["update:modelValue","change"],setup(e,{emit:g}){const{t:b}=t(),y=e,S=a([]),_=g,E=()=>{o({count:y.count,success:async e=>{c({title:b("上传中...")}),e.tempFilePaths.map((e=>{d({url:f+"/api/"+y.requestUrl,filePath:e,name:"file",header:{Authorization:m("token"),Secret:p()},success:e=>{y.count>1?(S.value.push(JSON.parse(e.data).data),_("update:modelValue",S.value),h()):(r({title:b("图片上传成功")}),_("change"),h())},fail:e=>{h(),r({title:b("图片上传失败"),icon:"none"})}})}))},fail:e=>{r({title:b("图片选择失败"),icon:"none"})}})};return(e,t)=>{const a=n;return u(),s(a,{style:{height:"inherit",width:"inherit"},onClick:E},{default:l((()=>[i(e.$slots,"default")])),_:3})}}});export{g as _};
