import{Y as a,e,G as t,Q as l,r as s,g as o,k as c,c as u,w as r,a9 as i,aa as n,i as d,v as p,z as m,o as _,a as f,A as g,E as v,F as y,K as h,b as x,t as b,d as k,C as j,B as w,D as C,ag as z,ac as D,N as S,_ as U}from"./index-BKXBH4vI.js";import{_ as V}from"./tig-image.BbZoJ9nS.js";import{_ as A}from"./format-price.0qAAshfo.js";import{_ as I,a as K}from"./uni-swipe-action.B2KeTgwu.js";import{_ as $}from"./loading-box.BnnJRdlH.js";import{_ as B}from"./tig-layout.DMoUsUKf.js";import{n as E}from"./index.xrDesKlL.js";const F=U(e({__name:"index",setup(e){const{t:U}=t(),F={navbar:"1",return:"1",title:"商品收藏",color:!1},G=l({page:1,size:10,keyword:""}),M=s(0),N=s(!1),O=s(!1),Q=s([]),Y=async()=>{G.page>1?N.value=!0:i({title:U("加载中")});try{const t=await(e={...G},a({url:"user/collect_product/list",method:"get",params:e}));M.value=t.total,Q.value=[...Q.value,...t.filter_result]}catch(t){}finally{n(),N.value=!1,O.value=!0}var e},q=async e=>{try{const l=await(t={id:e},a({url:"user/collect_product/cancel",method:"post",params:t}));l.message&&S({title:l.message,icon:"none"}),G.page=1,Q.value=[],Y()}catch(l){S({title:l.message,icon:"none",duration:1e3})}var t};return o((()=>{Y()})),c((()=>{G.page<Math.ceil(M.value/G.size)&&(G.page++,Y())})),(a,e)=>{const t=p(m("tig-image"),V),l=d,s=p(m("format-price"),A),o=k,c=p(m("uni-swipe-action-item"),I),i=p(m("uni-swipe-action"),K),n=j,S=p(m("loading-box"),$),M=p(m("tig-layout"),B);return _(),u(l,null,{default:r((()=>[f(M,null,{default:r((()=>[f(E,{parameter:F}),Q.value.length>0?(_(),u(l,{key:0,class:"collect-product"},{default:r((()=>[f(i,null,{default:r((()=>[(_(!0),v(y,null,h(Q.value,(e=>(_(),u(l,{key:e.product_id,class:"move-item"},{default:r((()=>[f(c,{threshold:0,autoClose:""},{right:r((()=>[f(l,{class:"collect-move-box"},{default:r((()=>[f(l,{class:"btn-del",onClick:a=>{return t=e.product_id,void D({title:U("提示"),content:U("确定取消收藏吗？"),success:async a=>{a.confirm&&q(t)}});var t}},{default:r((()=>[f(o,null,{default:r((()=>[x(b(a.$t("取消收藏")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),default:r((()=>[f(l,{class:"collect-product-item",onClick:a=>{return t=e.product_id,void z({url:"/pages/productDetail/index?id="+t});var t}},{default:r((()=>[f(l,{class:"collect-product-item-left"},{default:r((()=>[f(l,{class:"img-box"},{default:r((()=>[f(t,{src:e.pic_thumb,"onUpdate:src":a=>e.pic_thumb=a},null,8,["src","onUpdate:src"])])),_:2},1024)])),_:2},1024),f(l,{class:"collect-product-item-right"},{default:r((()=>[f(l,{class:"title"},{default:r((()=>[x(b(e.product_name),1)])),_:2},1024),f(l,{class:"item-bottom"},{default:r((()=>[f(l,{class:"price"},{default:r((()=>[f(s,{decimalsStyle:{fontSize:"25rpx"},currencyStyle:{fontSize:"23rpx"},priceData:e.product_price},null,8,["priceData"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):g("",!0),0===Q.value.length&&!0===O.value?(_(),u(l,{key:1,class:"empty-box"},{default:r((()=>[f(l,{class:"pictrue"},{default:r((()=>[f(n,{src:w(C)("common/data_empty.png")},null,8,["src"])])),_:1}),f(l,{class:"txt"},{default:r((()=>[x(b(a.$t("暂无收藏记录！")),1)])),_:1})])),_:1})):g("",!0),f(S,{modelValue:N.value,"onUpdate:modelValue":e[0]||(e[0]=a=>N.value=a),page:G.page,length:Q.value.length},null,8,["modelValue","page","length"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-5510539f"]]);export{F as default};
