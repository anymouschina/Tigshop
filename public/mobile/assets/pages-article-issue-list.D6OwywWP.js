import{am as t,an as e,ao as s,au as i,ap as a,av as l,aq as o,aw as n,ax as r,ay as c,az as u,aA as d,m as h,n as y,w as p,q as f,T as _,aB as m,C as k,Z as g,d as v,G as b,r as x,o as C,k as S,l as w,x as T,y as z,J as I,F as j,a6 as O,a7 as N,V as $,t as F,v as H,L as Z,B as q,a0 as B}from"./index-Ce4FtYLL.js";import{_ as G}from"./u-tabs.DUI4fA-S.js";import{_ as L}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as R}from"./tig-image.bUT1hZK2.js";import{_ as U}from"./empty-box.vue_vue_type_script_setup_true_lang.jMkm3TP8.js";import{_ as V}from"./tig-layout.nM03J4I_.js";import{n as A}from"./index.v2UirNFN.js";import"./u-empty.DoqyT2U6.js";import"./u-icon.BDQrrWMI.js";import"./u-loading-icon.CaEeBur7.js";const E=L({name:"u-sticky",mixins:[e,s,{props:{offsetTop:{type:[String,Number],default:()=>t.sticky.offsetTop},customNavHeight:{type:[String,Number],default:44},disabled:{type:Boolean,default:()=>t.sticky.disabled},bgColor:{type:String,default:()=>t.sticky.bgColor},zIndex:{type:[String,Number],default:()=>t.sticky.zIndex},index:{type:[String,Number],default:()=>t.sticky.index}}}],data:()=>({cssSticky:!1,stickyTop:0,elId:i(),left:0,width:"auto",height:"auto",fixed:!1}),computed:{style(){const t={};return this.disabled?t.position="static":this.cssSticky?(t.position="sticky",t.zIndex=this.uZindex,t.top=a(this.stickyTop)):t.height=this.fixed?this.height+"px":"auto",t.backgroundColor=this.bgColor,l(o(this.customStyle),t)},stickyContent(){const t={};return this.cssSticky||(t.position=this.fixed?"fixed":"static",t.top=this.stickyTop+"px",t.left=this.left+"px",t.width="auto"==this.width?"auto":this.width+"px",t.zIndex=this.uZindex),t},uZindex(){return this.zIndex?this.zIndex:n.sticky}},mounted(){this.init()},methods:{init(){this.getStickyTop(),this.checkSupportCssSticky(),this.cssSticky||!this.disabled&&this.initObserveContent()},initObserveContent(){this.$uGetRect("#"+this.elId).then((t=>{this.height=t.height,this.left=t.left,this.width=t.width,this.$nextTick((()=>{this.observeContent()}))}))},observeContent(){this.disconnectObserver("contentObserver");const t=r({thresholds:[.95,.98,1]});t.relativeToViewport({top:-this.stickyTop}),t.observe(`#${this.elId}`,(t=>{this.setFixed(t.boundingClientRect.top)})),this.contentObserver=t},setFixed(t){const e=t<=this.stickyTop;this.fixed=e},disconnectObserver(t){const e=this[t];e&&e.disconnect()},getStickyTop(){this.stickyTop=c(this.offsetTop)+c(this.customNavHeight)},async checkSupportCssSticky(){this.checkCssStickyForH5()&&(this.cssSticky=!0),"android"===u()&&Number(d().system)>8&&(this.cssSticky=!0),"ios"===u()&&(this.cssSticky=!0)},checkComputedStyle(){},checkCssStickyForH5(){const t=["","-webkit-","-ms-","-moz-","-o-"],e=t.length,s=document.createElement("div");for(let i=0;i<e;i++)if(s.style.position=t[i]+"sticky",""!==s.style.position)return!0;return!1}},beforeUnmount(){this.disconnectObserver("contentObserver")}},[["render",function(t,e,s,i,a,l){const o=k;return h(),y(o,{class:"u-sticky",id:a.elId,style:_([l.style])},{default:p((()=>[f(o,{style:_([l.stickyContent]),class:"u-sticky__content"},{default:p((()=>[m(t.$slots,"default",{},void 0,!0)])),_:3},8,["style"])])),_:3},8,["id","style"])}],["__scopeId","data-v-dbb1d77f"]]),J=L(v({__name:"list",setup(t){const{t:e}=b(),s={navbar:"1",return:"1",title:"文章中心",color:!1},i=x(!1),a=x(0),l=x([]),o=x([]),n=async()=>{O({title:e("加载中")});try{i.value=!0;const e=await(t={category_size:99,article_size:99},g({url:"article/category/index_bzzx_list",method:"get",params:t}));Object.assign(l.value,e.filter_result),o.value=e.filter_result[0].articles}catch(s){console.error(s.message)}finally{i.value=!1,N()}var t},r=t=>{o.value=t.articles};return C((()=>{n()})),(t,e)=>{const n=S(w("up-tabs"),G),c=S(w("up-sticky"),E),u=q,d=k,_=S(w("tig-image"),R),m=B,g=S(w("empty-box"),U),v=S(w("tig-layout"),V);return h(),y(v,null,{default:p((()=>[f(A,{parameter:s}),f(c,{bgColor:"#fff"},{default:p((()=>[l.value.length?(h(),y(n,{key:0,lineColor:"var(--general)",list:l.value,onChange:r,keyName:"article_category_name",current:a.value,"onUpdate:current":e[0]||(e[0]=t=>a.value=t)},null,8,["list","current"])):T("",!0)])),_:1}),i.value?T("",!0):(h(),y(d,{key:0,class:"article-center"},{default:p((()=>[f(d,{class:"news-list"},{default:p((()=>[o.value.length?(h(!0),z(j,{key:0},I(o.value,(e=>(h(),y(d,{class:"news-item",key:e.article_id},{default:p((()=>[f(d,{class:"pic-desc",onClick:t=>{return s=`/pages/article/issue/detail?id=${e.article_id}`,void Z({url:s});var s}},{default:p((()=>[f(d,{class:$(["news-left",{"w-100":!e.article_thumb}])},{default:p((()=>[f(d,{class:"pd-title",title:e.article_title},{default:p((()=>[e.article_tag?(h(),y(u,{key:0,class:"yin_agn"},{default:p((()=>[F(H(t.$t("新闻资讯")),1)])),_:1})):T("",!0),f(u,null,{default:p((()=>[F(H(e.article_title),1)])),_:2},1024)])),_:2},1032,["title"]),e.description?(h(),y(d,{key:0,class:"pd-det"},{default:p((()=>[F(H(e.description),1)])),_:2},1024)):T("",!0)])),_:2},1032,["class"]),e.article_thumb?(h(),y(d,{key:0,class:"news-right"},{default:p((()=>[f(_,{src:e.article_thumb,alt:e.article_title},null,8,["src","alt"])])),_:2},1024)):T("",!0)])),_:2},1032,["onClick"]),f(d,{class:"info-btn"},{default:p((()=>[e.add_time?(h(),y(d,{key:0,class:"evaluate"},{default:p((()=>[f(u,{class:"time"},{default:p((()=>[F(H(e.add_time),1)])),_:2},1024)])),_:2},1024)):T("",!0),e.link?(h(),y(m,{key:1,class:"red-btn",target:"_blank",url:e.link,"hover-class":"navigator-hover","open-type":"navigate"},{default:p((()=>[f(u,null,{default:p((()=>[F(H(t.$t("相关链接")),1)])),_:1})])),_:2},1032,["url"])):T("",!0)])),_:2},1024)])),_:2},1024)))),128)):(h(),y(g,{key:1,mode:"news",text:"暂无文章"}))])),_:1})])),_:1}))])),_:1})}}}),[["__scopeId","data-v-c170316e"]]);export{J as default};
