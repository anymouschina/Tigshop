import{d as e,a3 as a,r as l,R as s,o as t,k as _,l as u,m as n,n as i,w as o,q as c,s as r,t as v,v as d,T as f,x as m,V as p,y,F as h,J as g,a6 as b,a7 as k,E as $,D as w,C as x}from"./index-Ce4FtYLL.js";import{_ as j}from"./tig-image.bUT1hZK2.js";import{_ as C}from"./u-icon.BDQrrWMI.js";import{_ as M}from"./tig-layout.nM03J4I_.js";import{a as z,g as F}from"./salesmanCenter.BbgqgNbv.js";import{u as T}from"./useCurrency.DUvpp8TJ.js";import{_ as q}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-loading-icon.CaEeBur7.js";const D=q(e({__name:"level",setup(e){a((e=>({"6fb6415c":V.value,"6e9af746":A.value})));const{currencyName:q}=T(),D=l({}),E=l([]),I=l({}),J=l({}),N=l({}),R=e=>{var a;return null==(a=E.value[e-1])?void 0:a.rate},S=(e,a)=>{let l=a.condition.sales_amount.value,s=a.condition.sales_invite_users.value,t=a.condition.self_buy_amount.value,_={total_perc:0,sales_amount_info:{sales_amount_reach:!1,sales_amount_gap:""},sales_invite_users_info:{sales_invite_users_reach:!1,sales_invite_users_gap:""},self_buy_amount_info:{self_buy_amount_reach:!1,self_buy_amount_gap:""}},u=0,n=e.all_sum-l,i=e.all_user_count-s,o=e.self_buy_sum-t;return n>=0&&(_.sales_amount_info.sales_amount_reach=!0,u+=1),i>=0&&(_.sales_invite_users_info.sales_invite_users_reach=!0,u+=1),o>=0&&(_.self_buy_amount_info.self_buy_amount_reach=!0,u+=1),_.total_perc=(u/3*100).toFixed(2),_.sales_amount_info.sales_amount_gap=Math.abs(n),_.sales_invite_users_info.sales_invite_users_gap=Math.abs(i),_.self_buy_amount_info.self_buy_amount_gap=Math.abs(o),_},V=s((()=>`url(${$("salesman/viprankbg.png")})`)),A=s((()=>`url(${$("salesman/tuiguang.png")})`));return t((()=>{(async()=>{b({title:"加载中"});try{const e=await z();D.value=e.item}catch(e){console.error(e)}finally{k()}})(),(async()=>{try{const e=await F();I.value=e.item,E.value=e.item.salesman_config.level,J.value=I.value.salesman_config.level[I.value.level],N.value=S(I.value.order,J.value)}catch(e){console.error(e)}})()})),(e,a)=>{const l=_(u("tig-image"),j),s=w,t=x,b=_(u("up-icon"),C),k=_(u("tig-layout"),M);return n(),i(k,{needSaveTop:!0},{default:o((()=>[c(t,{class:"level"},{default:o((()=>[c(t,{class:"level-dashboard"},{default:o((()=>[c(t,{class:"container"},{default:o((()=>[c(t,{class:"header"},{default:o((()=>[D.value.avatar?(n(),i(l,{key:0,class:"avatar",src:D.value.avatar},null,8,["src"])):(n(),i(s,{key:1,src:r($)("salesman/avatar.png"),class:"avatar"},null,8,["src"])),c(t,{class:"level-name"},{default:o((()=>[v(d(I.value.level_name),1)])),_:1})])),_:1}),c(t,{class:"level-stepper"},{default:o((()=>[c(t,{class:"level-stepper-wrap less"},{default:o((()=>[c(t,{class:"level-stepper-wrap__point active reach"},{default:o((()=>[c(t,{class:"inner-text"},{default:o((()=>[v(d(I.value.level_name),1)])),_:1})])),_:1}),c(t,{class:"level-stepper-wrap__line"},{default:o((()=>[c(t,{class:"line-inner progress",style:f(`width: ${N.value.total_perc}%;`)},null,8,["style"])])),_:1}),c(t,{class:"level-stepper-wrap__point"},{default:o((()=>[c(t,{class:"inner-text"},{default:o((()=>[v(d(J.value.name),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),R(I.value.level)>0?(n(),i(t,{key:0,class:"rights-and-interests"},{default:o((()=>[c(t,{class:"item"},{default:o((()=>[c(t,{class:"title-icon tui"}),c(t,null,{default:o((()=>[c(t,null,{default:o((()=>[v(d(R(I.value.level))+"%",1)])),_:1}),c(t,null,{default:o((()=>[v(d(e.$t("推广佣金比")),1)])),_:1})])),_:1})])),_:1})])),_:1})):m("",!0),c(t,{class:"level-dashboard__rate-text"},{default:o((()=>[c(b,{name:"info-circle",color:"#999",size:"12"}),v(" "+d(e.$t("部分商品的佣金比例可能因商家设置而有所不同，请以商品中所显示的为准")),1)])),_:1})])),_:1}),J.value?(n(),i(t,{key:0,class:"level-schedule"},{default:o((()=>[c(t,{class:"title"},{default:o((()=>[v(d(e.$t("满足以下规则可升级为"))+d(J.value.name),1)])),_:1}),c(t,{class:"level-schedule__status"},{default:o((()=>{var a,l,s;return[(null==(a=I.value.condition)?void 0:a.sales_amount.checked)?(n(),i(t,{key:0,class:"level-schedule-item"},{default:o((()=>[c(t,{class:"tag-wrap"},{default:o((()=>[c(t,{class:p(["level-schedule-item__tag van-tag van-tag--plain van-tag--default",{"level-schedule-item__reach":N.value.sales_amount_info.sales_amount_reach}])},{default:o((()=>[v(d(e.$t(N.value.sales_amount_info.sales_amount_reach?"已达标":"未达标")),1)])),_:1},8,["class"])])),_:1}),c(t,{class:"tag-desc"},{default:o((()=>{var a;return[v(d(e.$t("推广金额达"))+" "+d((null==(a=J.value.condition)?void 0:a.sales_amount.value)+r(q))+" ",1),!1===N.value.sales_amount_info.sales_amount_reach?(n(),y(h,{key:0},[v(" (还差"),c(t,{class:"level-schedule-item__left"},{default:o((()=>[v(d(N.value.sales_amount_info.sales_amount_gap),1)])),_:1}),v(" "+d(r(q))+") ",1)],64)):m("",!0)]})),_:1})])),_:1})):m("",!0),(null==(l=J.value.condition)?void 0:l.sales_invite_users.checked)?(n(),i(t,{key:1,class:"level-schedule-item"},{default:o((()=>[c(t,{class:"tag-wrap"},{default:o((()=>[c(t,{class:p(["level-schedule-item__tag van-tag van-tag--plain van-tag--default",{"level-schedule-item__reach":N.value.sales_invite_users_info.sales_invite_users_reach}])},{default:o((()=>[v(d(N.value.sales_invite_users_info.sales_invite_users_reach?"已达标":"未达标"),1)])),_:1},8,["class"])])),_:1}),c(t,{class:"tag-desc"},{default:o((()=>{var e;return[v("累计客户数达 "+d(null==(e=J.value.condition)?void 0:e.sales_invite_users.value)+" 人 ",1),!1===N.value.sales_invite_users_info.sales_invite_users_reach?(n(),y(h,{key:0},[v(" (还差"),c(t,{class:"level-schedule-item__left"},{default:o((()=>[v(d(N.value.sales_invite_users_info.sales_invite_users_gap),1)])),_:1}),v(" 人) ")],64)):m("",!0)]})),_:1})])),_:1})):m("",!0),(null==(s=J.value.condition)?void 0:s.self_buy_amount.checked)?(n(),i(t,{key:2,class:"level-schedule-item"},{default:o((()=>[c(t,{class:"tag-wrap"},{default:o((()=>[c(t,{class:p(["level-schedule-item__tag van-tag van-tag--plain van-tag--default",{"level-schedule-item__reach":N.value.self_buy_amount_info.self_buy_amount_reach}])},{default:o((()=>[v(d(N.value.self_buy_amount_info.self_buy_amount_reach?"已达标":"未达标"),1)])),_:1},8,["class"])])),_:1}),c(t,{class:"tag-desc"},{default:o((()=>{var a;return[v(d(e.$t("自购金额达"))+" "+d((null==(a=J.value.condition)?void 0:a.self_buy_amount.value)+r(q))+" ",1),!1===N.value.self_buy_amount_info.self_buy_amount_reach?(n(),y(h,{key:0},[v(" ("+d(e.$t("还差")),1),c(t,{class:"level-schedule-item__left"},{default:o((()=>[v(d(N.value.self_buy_amount_info.self_buy_amount_gap),1)])),_:1}),v(" "+d(r(q))+") ",1)],64)):m("",!0)]})),_:1})])),_:1})):m("",!0)]})),_:1})])),_:1})):m("",!0),E.value?(n(),i(t,{key:1,class:"level-rules"},{default:o((()=>[(n(!0),y(h,null,g(E.value,(a=>(n(),i(t,{key:a.id,class:"rules-item"},{default:o((()=>[c(t,{class:"label"},{default:o((()=>[v(d(a.name),1)])),_:2},1024),c(t,{class:"desc"},{default:o((()=>[c(t,{class:"desc-item"},{default:o((()=>[c(t,{class:"desc-item__title"},{default:o((()=>[v(d(e.$t("规则介绍")),1)])),_:1}),a.condition.sales_amount.checked?(n(),i(t,{key:0},{default:o((()=>[v(d(a.condition.sales_amount.title||e.$t("推广金额"))+" "+d(a.condition.sales_amount.value)+" "+d(a.condition.sales_amount.unit||r(q)),1)])),_:2},1024)):m("",!0),a.condition.sales_invite_users.checked?(n(),i(t,{key:1},{default:o((()=>[v(d(a.condition.sales_invite_users.title||e.$t("发展客户数"))+" "+d(a.condition.sales_invite_users.value)+" "+d(a.condition.sales_invite_users.unit||e.$t("人")),1)])),_:2},1024)):m("",!0),a.condition.self_buy_amount.checked?(n(),i(t,{key:2},{default:o((()=>[v(d(a.condition.self_buy_amount.title||e.$t("自购金额"))+" "+d(a.condition.self_buy_amount.value)+" "+d(a.condition.self_buy_amount.unit||r(q)),1)])),_:2},1024)):m("",!0)])),_:2},1024),c(t,{class:"desc-item"},{default:o((()=>[c(t,{class:"desc-item__title"},{default:o((()=>[v(d(e.$t("权益介绍")),1)])),_:1}),c(t,null,{default:o((()=>[v(d(e.$t("推广佣金比为"))+d(a.rate)+"%",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):m("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-1036c36b"]]);export{D as default};
