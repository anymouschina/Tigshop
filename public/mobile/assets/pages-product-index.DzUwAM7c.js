import{e,R as t,q as l,y as a,c as o,o as s,w as u,a as c,i as n,b as i,t as d,D as r,J as p,B as f,A as m,C as v,F as _,N as y,_ as g,a2 as h,u as k,r as b,a9 as x,d as I,T as w,ax as V,aV as S,aB as C,z as $,U as P,az as D,a7 as T,V as N,aW as L,ay as j,aX as U,E as z,aM as O,aY as B,L as F,G as A,aZ as M,a_ as R,aP as W,a$ as E,b0 as H,H as X,ar as J,O as q,b1 as G,f as Y,P as Z,aa as K,S as Q,a8 as ee,aL as te,af as le,b2 as ae,a0 as oe,Z as se,b3 as ue,aO as ce,g as ne,b4 as ie,k as de,m as re,n as pe,b5 as fe,ad as me,K as ve,X as _e,b6 as ye,W as ge,b7 as he,b8 as ke,p as be,aA as xe}from"./index-BKzbZvRR.js";import{_ as Ie}from"./tig-image.DrOwWlV9.js";import{_ as we}from"./uni-badge.D9pmvW-4.js";import{b as Ve,a as Se,u as Ce,_ as $e}from"./tig-layout.BpNdXByQ.js";import{_ as Pe}from"./tig-back-top.vue_vue_type_script_setup_true_lang.CIMNqfpz.js";import{_ as De}from"./tig-loadingpage.vue_vue_type_script_setup_true_lang.De24EPaU.js";import{_ as Te}from"./format-price.kSnuguuz.js";import{d as Ne,u as Le,g as je,a as Ue,b as ze,c as Oe,e as Be,f as Fe,h as Ae}from"./product.BqL6tr7k.js";import{g as Me}from"./guide.Av8YiKLe.js";import{a as Re}from"./activityCard.DDPb7Kxq.js";import{_ as We}from"./tig-countdown.vue_vue_type_script_setup_true_lang.D1VN3hDu.js";import{_ as Ee}from"./uni-icons.DELFdrY8.js";import{_ as He}from"./uni-rate.CHwxaVXA.js";import{s as Xe,b as Je}from"./shop.C37ErgAh.js";import{a as qe,s as Ge}from"./specification.DeG19GHJ.js";import{_ as Ye}from"./tig-fixed-placeholder.s9cnCRBL.js";import{a as Ze}from"./coupon.C9brn0BP.js";import{_ as Ke}from"./index.vue_vue_type_script_setup_true_lang.BEg3YZfT.js";import{b as Qe}from"./cart.C2GVAgA7.js";import"./uni-transition.C8_h94ej.js";import"./uni-number-box.CzE6YkX8.js";const et=g(e({__name:"tig-menu",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:g}){const h=e,k=g,b=t({get:()=>h.modelValue,set(e){k("update:modelValue",e)}}),x=[{icon:"common/home.svg",text:"首页",link:"/pages/index/index"},{icon:"common/search.svg",text:"搜索",link:"/pages/search/index"},{icon:"common/user.svg",text:"个人中心",link:"/pages/user/index"},{icon:"common/collection.svg",text:"商品收藏",link:"/pages/user/collectProduct/index"},{icon:"common/history.svg",text:"查看足迹",link:"/pages/user/historyProduct/index"},{icon:"common/message.svg",text:"消息中心",link:"/pages/user/messageLog/index"}];return(e,t)=>{const g=n,h=f,I=l(a("tig-popup"),Ve);return s(),o(I,{show:b.value,"onUpdate:show":t[0]||(t[0]=e=>b.value=e),position:"top",backgroundColor:"#fff",showClose:!1},{default:u((()=>[c(g,{class:"menu-box"},{default:u((()=>[c(g,{class:"menu-title"},{default:u((()=>[i(d(e.$t("快捷入口")),1)])),_:1}),c(g,{class:"menu-list"},{default:u((()=>[(s(),r(_,null,p(x,((t,l)=>c(g,{key:l,class:"menu-item",onClick:e=>(e=>{k("update:modelValue",!1),y({url:e.link})})(t)},{default:u((()=>[c(g,{class:"menu-item-icon"},{default:u((()=>[c(h,{class:"menu-item-img",src:m(v)(t.icon)},null,8,["src"])])),_:2},1024),c(g,{class:"menu-item-text"},{default:u((()=>[i(d(e.$t(t.text)),1)])),_:2},1024)])),_:2},1032,["onClick"]))),64))])),_:1})])),_:1})])),_:1},8,["show"])}}}),[["__scopeId","data-v-987d1710"]]),tt=g(e({__name:"productNav",props:{modelValue:{type:Number,default:0},activeModule:{type:String,default:""},event:{type:Function,default:()=>{}}},emits:["update:modelValue","update:activeModule"],setup(e,{emit:f}){h((e=>({"0ec25e82":N.value})));const m=k(),v=e,y=f,g=b([{label:"商品",value:".product-area"},{label:"评价",value:".evaluate-area"},{label:"详情",value:".product-detail-area"}]),V=b(250),S=V.value-80,C=t((()=>{let e=1;return v.modelValue>S?e=0:v.modelValue<S&&v.modelValue>0&&(e=(S-v.modelValue)/S),v.modelValue>V.value&&(e=1),e})),$=t((()=>{let e=0;return v.modelValue>V.value?e=1:v.modelValue<V.value&&v.modelValue>0&&(e=v.modelValue/V.value),e})),P=b(!1),D=()=>{P.value=!0},T=()=>{history.back()},N=t((()=>m.saveTop+10+"px"));return t((()=>m.menuButtonInfo)),(t,f)=>{const m=I,h=n,k=l(a("tig-menu"),et);return s(),r(_,null,[c(h,{class:"product-nav"},{default:u((()=>[c(h,{class:"product-nav-container"},{default:u((()=>[c(h,{class:"product-nav-left product-nav-icon",style:x({opacity:C.value}),onClick:T},{default:u((()=>[c(m,{class:w(["iconfont icon-houtui",{change:e.modelValue>V.value}])},null,8,["class"])])),_:1},8,["style"]),c(h,{class:"product-nav-middle",style:x({opacity:$.value})},{default:u((()=>[(s(!0),r(_,null,p(g.value,(l=>(s(),o(h,{key:l.label,class:w(["middle-text",{active:l.value===e.activeModule}]),onClick:e=>{return t=l.value,y("update:activeModule",t),void v.event(t);var t}},{default:u((()=>[i(d(t.$t(l.label)),1)])),_:2},1032,["class","onClick"])))),128))])),_:1},8,["style"]),c(h,{class:"product-nav-right product-nav-icon",style:x({opacity:C.value}),onClick:D},{default:u((()=>[c(m,{class:w(["iconfont-h5 icon-gengduo",{change:e.modelValue>V.value}])},null,8,["class"])])),_:1},8,["style"])])),_:1})])),_:1}),c(k,{modelValue:P.value,"onUpdate:modelValue":f[0]||(f[0]=e=>P.value=e)},null,8,["modelValue"])],64)}}}),[["__scopeId","data-v-8a70938d"]]),lt=g(e({__name:"productImg",props:{picList:{default:()=>[]},productInfo:{default:()=>({})},videoList:{default:()=>[]}},setup(e){const l=e,a=b(1),v=t((()=>l.videoList[0]?l.videoList[0]:{})),y=t((()=>{var e;return v.value.videoUrl?[{...v.value,picUrl:(null==(e=l.picList[0])?void 0:e.picUrl)||""},...l.picList]:l.picList})),g=e=>{a.value=e.detail.current+1,x.value=!1,null==k||k.pause()},h=C();let k;const x=b(!1),w=()=>{x.value=!0,null==k||k.play()},z=e=>{console.log("video error",e)},O=()=>{x.value=!1},B=()=>{};return V((()=>{k=S("productVideo",h)})),(e,t)=>{const l=n,v=f,h=L,k=D,b=j,V=I;return s(),o(l,{class:"product-pic-con"},{default:u((()=>[c(l,{class:"nav-bg"}),y.value.length>0?(s(),o(l,{key:0,class:"product-bg"},{default:u((()=>[c(b,{"indicator-dots":!1,circular:!0,interval:"3000",duration:"500",onChange:g},{default:u((()=>[(s(!0),r(_,null,p(y.value,((e,t)=>(s(),o(k,{key:t},{default:u((()=>[e.videoUrl?(s(),o(l,{key:1,class:"video-box"},{default:u((()=>[P(c(l,{class:"cover-box",onClick:w},{default:u((()=>[c(v,{src:m(T)(e.videoCover?e.videoCover:e.picUrl||""),class:"slide-image"},null,8,["src"]),c(l,{class:"video-icon"})])),_:2},1536),[[N,!x.value]]),P(c(h,{class:"product-video",id:"productVideo",src:e.videoUrl,onPause:B,onError:z,onEnded:O,autoplay:!1,"enable-progress-gesture":!1,controls:"",loop:!1},null,8,["src"]),[[N,x.value]])])),_:2},1024)):(s(),o(v,{key:0,onClick:e=>(e=>{const t=y.value.map((e=>T(e.picUrl||"")));U({current:t[e],urls:t,indicator:"number",loop:!0})})(t),src:m(T)(e.picUrl||""),class:"slide-image"},null,8,["onClick","src"]))])),_:2},1024)))),128))])),_:1}),P(c(l,{class:"pages"},{default:u((()=>[c(V,null,{default:u((()=>[i(d(a.value),1)])),_:1}),i(" /"+d(y.value.length||1),1)])),_:1},512),[[N,y.value.length>1&&!x.value]])])),_:1})):$("",!0)])),_:1})}}}),[["__scopeId","data-v-92a3c298"]]),at=g(e({__name:"poster",props:{modelValue:{type:Boolean},productId:{},productInfo:{}},emits:["update:modelValue"],setup(e,{emit:t}){const{t:r}=z(),p=C(),m=e,_=b(""),y=b(!1),g=b(0);V((async()=>{const{windowWidth:e}=O();g.value=e/375,await h(),k()}));const h=async()=>{try{const e=await B(location.href);_.value=e,F({title:r("正在生成海报，请稍后"),icon:"none",duration:1e3})}catch(e){console.error(e),F({title:e.message,icon:"none"})}},k=async()=>{const e=A("userInfo"),t=M();let l=R("myCanvas",p);l.draw(),l.save(),l.setFillStyle("#ffffff"),l.fillRect(0,0,500,900),l.draw(),l.setFontSize(14),l.setFillStyle("#000000"),l.fillText(e.username??r("普通会员"),100*g.value,48),l.setFontSize(12),l.setFillStyle("#999999"),l.fillText(r("的分享"),100*g.value,68),l.setFontSize(18),l.setFillStyle(t.themeStyle["--general"]),l.fillText(`${m.productInfo.productPrice}`,20,366*g.value),x(m.productInfo.productName,20,379*g.value,l),l.save();try{const t=await W(e.avatar?T(e.avatar):v("user/default_avatar.jpg"));l.beginPath(),l.arc(50,50,28,0,2*Math.PI),l.clip(),l.drawImage(t.path,20,20,70*g.value,70*g.value),l.restore(),l.draw(!0,(async()=>{l.save();const e=await W(T(m.productInfo.picOriginal));l.drawImage(e.path,15,92,245*g.value,245*g.value),l.draw(!0,(async()=>{l.drawImage(_.value,165,360*g.value,100*g.value,100*g.value),l.draw(!0,(()=>{w()}))}))}))}catch(a){console.error(a)}},x=(e,t,l,a)=>{let o=[];for(let s=0,u=e.length;s<u/11;s++){let t=e.slice(11*s,11*(s+1));o.push(t)}o.forEach(((e,o)=>{o>3||(l+=20,a.setFontSize(12),a.setFillStyle("#333333"),a.fillText(e,t,l))}))},I=b(""),w=()=>{E({fileType:"jpg",canvasId:"myCanvas",quality:1,success:function(e){I.value=e.tempFilePath,y.value=!0},fail:e=>{F({title:JSON.stringify(e),icon:"none",duration:3e3}),y.value=!1,console.log(e)}},p)},S=()=>{};return(e,t)=>{const r=H,p=f,m=n,v=l(a("tig-popup"),Ve);return s(),o(m,null,{default:u((()=>[c(r,{class:"canvas-content",id:"myCanvas","canvas-id":"myCanvas"}),c(v,{show:y.value,"onUpdate:show":t[1]||(t[1]=e=>y.value=e),onClose:t[2]||(t[2]=t=>e.$emit("update:modelValue",!1)),backgroundColor:"transparent",position:"center",showClose:!1},{default:u((()=>[c(m,{class:"poster-box",onTouchmove:t[0]||(t[0]=X((()=>{}),["stop","prevent"])),onLongpress:X(S,["stop"])},{default:u((()=>[c(p,{src:I.value,style:{height:"100%",width:"100%"}},null,8,["src"])])),_:1}),c(m,{class:"canvas-tip"},{default:u((()=>[i(d(e.$t("长按可保存海报")),1)])),_:1})])),_:1},8,["show"])])),_:1})}}}),[["__scopeId","data-v-cc1729d4"]]),ot=g(e({__name:"productShare",props:{modelValue:{type:Boolean},productId:{},productInfo:{}},emits:["update:modelValue"],setup(e,{emit:r}){const{t:p}=z(),f=k();J();const m=e,v=r,_=b(m.productInfo);q((()=>m.productInfo),(e=>{_.value=e}));const y=t({get:()=>m.modelValue,set(e){v("update:modelValue",e)}}),g=b(!1),h=()=>{v("update:modelValue",!1),g.value=!0},x=()=>{v("update:modelValue",!1),w()},w=()=>{G(window.location.href,(()=>{F({title:p("复制成功"),icon:"none"})}))},V=t((()=>"miniProgram"===f.XClientType||"wechat"===f.XClientType)),S=b(!1),C=()=>{v("update:modelValue",!1),S.value=!0};return(e,t)=>{const r=n,p=I,f=l(a("tig-popup"),Ve);return s(),o(r,{class:"share"},{default:u((()=>[c(f,{show:y.value,"onUpdate:show":t[0]||(t[0]=e=>y.value=e),position:"bottom"},{default:u((()=>[c(r,{class:"share-title"},{default:u((()=>[i(d(e.$t("分享")),1)])),_:1}),c(r,{class:"share-content"},{default:u((()=>[V.value?(s(),o(r,{key:0,class:"share-item",onClick:C},{default:u((()=>[c(p,{class:"iconfont-h5 icon-haoyou"}),c(p,{class:"share-item-text"},{default:u((()=>[i(d(e.$t("分享给好友")),1)])),_:1})])),_:1})):$("",!0),c(r,{class:"share-item",onClick:x},{default:u((()=>[c(p,{class:"iconfont-h5 icon-link"}),c(p,{class:"share-item-text"},{default:u((()=>[i(d(e.$t("复制链接")),1)])),_:1})])),_:1}),c(r,{class:"share-item",onClick:h},{default:u((()=>[c(p,{class:"iconfont-h5 icon-tupian"}),c(p,{class:"share-item-text"},{default:u((()=>[i(d(e.$t("生成商品海报")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["show"]),g.value?(s(),o(at,{key:0,modelValue:g.value,"onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),productId:e.productId,productInfo:_.value},null,8,["modelValue","productId","productInfo"])):$("",!0),c(Me,{modelValue:S.value,"onUpdate:modelValue":t[2]||(t[2]=e=>S.value=e)},null,8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-c08b4a41"]]),st=g(e({__name:"productTitleInfo",props:{productInfo:{type:Object,default:()=>({})},productPrice:{type:[String,Number],default:"0"},isSeckill:{type:Number,default:0},isDiscount:{type:Number,default:0},promotionList:{type:Array,default:()=>[]},showCoupon:{type:Boolean,default:!1},type:{type:String,default:""},exchangeIntegral:{type:Number,default:0}},emits:["update:showCoupon"],setup(e,{emit:t}){const y=k(),g=e,h=t,{t:x}=z(),V=b(!1),S=b(0),C=()=>{h("update:showCoupon",!0)},P=async e=>{try{const t=await je({id:e});V.value=t}catch(t){if(401===t.code)return V.value=!1;F({title:t.message,icon:"none"})}},D=async()=>{try{V.value?await Ne({id:S.value}):await Le({productId:S.value}),F({title:V.value?x("取消收藏成功"):x("收藏成功"),icon:"none"}),await P(S.value)}catch(e){F({title:e.message,icon:"none"})}},T=b(!1),N=()=>{T.value=!0};return q((()=>g.productInfo),(e=>{e&&(S.value=e.productId,P(e.productId))})),(t,g)=>{const h=n,k=l(a("format-price"),Te),b=I,x=f;return s(),o(h,{class:"product-title-info"},{default:u((()=>[c(h,{class:"title-info-top"},{default:u((()=>[e.isSeckill||e.isDiscount?(s(),o(h,{key:0,class:"title-info-bottom line2"},{default:u((()=>[i(d(e.productInfo.productName),1)])),_:1})):(s(),o(h,{key:1,class:"title-top-price"},{default:u((()=>[c(k,{fontStyle:{fontSize:"36rpx"},decimalsStyle:{fontSize:"25rpx"},currencyStyle:{fontSize:"23rpx"},priceData:e.productPrice},null,8,["priceData"]),"exchange"===e.type?(s(),o(h,{key:0,class:"exchange-box"},{default:u((()=>[c(b,{class:"exchange-icon"},{default:u((()=>[i("+")])),_:1}),c(x,{class:"exchange-img",src:m(v)("exchange/exchange.png")},null,8,["src"]),c(b,{class:"exchange-text"},{default:u((()=>[i(d(e.exchangeIntegral),1)])),_:1})])),_:1})):$("",!0),"exchange"!==e.type&&m(y).showMarketprice&&e.productInfo.marketPrice&&Number(e.productInfo.marketPrice)>0?(s(),o(h,{key:1,class:"title-top-market_price"},{default:u((()=>[c(k,{isBottom:!1,priceData:e.productInfo.marketPrice},null,8,["priceData"])])),_:1})):$("",!0)])),_:1})),c(h,{class:"title-top-panle"},{default:u((()=>[c(h,{class:"title-top-panle-collect",onClick:D},{default:u((()=>[c(h,{class:w(["iconfont-h5 icon-shoucang1",{"icon-yishoucang":V.value}])},{default:u((()=>[c(b)])),_:1},8,["class"]),c(h,{class:"title-panle-collect-text"},{default:u((()=>[i(d(t.$t("收藏")),1)])),_:1})])),_:1}),c(h,{class:"title-top-panle-collect",onClick:X(N,["stop"])},{default:u((()=>[c(h,{class:"iconfont-h5 icon-fenxiang"}),c(h,{class:"title-panle-collect-text"},{default:u((()=>[i(d(t.$t("分享")),1)])),_:1})])),_:1})])),_:1})])),_:1}),e.promotionList.length>0?(s(),o(h,{key:0,class:"activity-box",onClick:C},{default:u((()=>[c(h,{class:"flex"},{default:u((()=>[(s(!0),r(_,null,p(e.promotionList.length>2?e.promotionList.slice(0,2):e.promotionList,(e=>(s(),o(Re,{key:e.promotionId,activityInfo:e,cardType:"detail"},null,8,["activityInfo"])))),128))])),_:1}),c(h,{class:"activity-btn"},{default:u((()=>[i(d(t.$t("领券")),1),c(b,{class:"iconfont-h5 icon-youjiantou"})])),_:1})])),_:1})):$("",!0),e.isSeckill||e.isDiscount?$("",!0):(s(),o(h,{key:1,class:"title-info-bottom line2"},{default:u((()=>[i(d(e.productInfo.productName),1)])),_:1})),c(ot,{modelValue:T.value,"onUpdate:modelValue":g[0]||(g[0]=e=>T.value=e),productId:Number(S.value),productInfo:e.productInfo},null,8,["modelValue","productId","productInfo"])])),_:1})}}}),[["__scopeId","data-v-b56fbc88"]]),ut=g(e({__name:"productSeckillTitle",props:{productInfo:{},productPrice:{},productOriginPrice:{},seckillValue:{}},setup(e){const r=e;console.log("seckillValue",r.seckillValue);const p=t((()=>r.seckillValue.seckillStock)),f=t((()=>{return e=r.seckillValue.seckillSales,t=r.seckillValue.seckillStock,Math.round(e/(t+e)*100)+"%";var e,t}));return(e,t)=>{const r=l(a("format-price"),Te),m=n,v=l(a("tig-countdown"),We);return s(),o(m,{class:"product-seckill-title flex justify-between align-center"},{default:u((()=>[c(m,{class:"seckill-price-box"},{default:u((()=>[c(m,{class:"title-top-price"},{default:u((()=>[c(m,{class:"price-box"},{default:u((()=>[c(m,{class:"price"},{default:u((()=>[c(r,{fontStyle:{fontWeight:"bold"},decimalsStyle:{fontSize:"24rpx",fontWeight:"bold"},currencyStyle:{fontSize:"23rpx",fontWeight:"bold"},priceData:e.productPrice},null,8,["priceData"])])),_:1}),c(m,{class:"tag-text-box"},{default:u((()=>[c(m,{class:"tag-text"},{default:u((()=>[i(d(e.$t("秒杀价")),1)])),_:1})])),_:1})])),_:1}),c(m,{class:"title-top-market_price flex align-center"},{default:u((()=>[e.productOriginPrice&&Number(e.productOriginPrice)>Number(e.productPrice)?(s(),o(m,{key:0,class:"originalprice-box"},{default:u((()=>[i(d(e.$t("价格"))+" ",1),c(m,null,{default:u((()=>[c(r,{isBottom:!1,priceData:e.productOriginPrice,fontStyle:{"text-decoration":"line-through"}},null,8,["priceData"])])),_:1})])),_:1})):$("",!0)])),_:1})])),_:1})])),_:1}),c(m,{class:"seckill-time-box"},{default:u((()=>[c(m,{class:"countdown-box flex align-center"},{default:u((()=>[c(m,{class:"title-top-time"},{default:u((()=>[i(d(e.$t("距结束还剩")),1)])),_:1}),c(v,{endTime:e.seckillValue.seckillEndTime,fontSize:11,color:"#fff"},null,8,["endTime"])])),_:1}),c(m,{class:"stock-progress"},{default:u((()=>[c(m,{class:"progress-line-box"},{default:u((()=>[c(m,{class:"progress-line",style:x({width:`${f.value}`})},null,8,["style"])])),_:1}),c(m,{class:"progress-text"},{default:u((()=>[i(d(e.$t("仅剩"))+" "+d(p.value)+" "+d(e.$t("件")),1)])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-30c6d8a0"]]),ct=g(e({__name:"productDiscountTitle",props:{productInfo:{},productPrice:{},productOriginPrice:{},discountValue:{},productStock:{}},setup:e=>(e,t)=>{const r=l(a("format-price"),Te),p=n,f=l(a("tig-countdown"),We);return s(),o(p,{class:"product-seckill-title flex justify-between align-center"},{default:u((()=>[c(p,{class:"seckill-price-box"},{default:u((()=>[c(p,{class:"title-top-price"},{default:u((()=>[c(p,{class:"price-box"},{default:u((()=>[c(p,{class:"price"},{default:u((()=>[c(r,{fontStyle:{fontWeight:"bold"},decimalsStyle:{fontSize:"24rpx",fontWeight:"bold"},currencyStyle:{fontSize:"23rpx",fontWeight:"bold"},priceData:e.productPrice},null,8,["priceData"])])),_:1}),c(p,{class:"tag-text-box"},{default:u((()=>[c(p,{class:"tag-text"},{default:u((()=>[i(d(e.$t("直降"))+" ",1),c(r,{isBottom:!1,fontStyle:{fontWeight:"bold"},priceData:e.discountValue.discountPrice},null,8,["priceData"])])),_:1})])),_:1})])),_:1}),c(p,{class:"title-top-market_price flex align-center"},{default:u((()=>[e.productOriginPrice&&Number(e.productOriginPrice)>Number(e.productPrice)?(s(),o(p,{key:0,class:"originalprice-box"},{default:u((()=>[i(d(e.$t("价格"))+" ",1),c(p,null,{default:u((()=>[c(r,{isBottom:!1,priceData:e.productOriginPrice,fontStyle:{"text-decoration":"line-through"}},null,8,["priceData"])])),_:1})])),_:1})):$("",!0),c(p,{class:"discountStock"},{default:u((()=>[c(p,null,{default:u((()=>[i(d(e.$t("剩余"))+" "+d(e.productStock),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),c(p,{class:"seckill-time-box"},{default:u((()=>[c(p,{class:"type-box"},{default:u((()=>[c(p,{class:"type-text"},{default:u((()=>[i(d(e.$t("限时折扣")),1)])),_:1})])),_:1}),c(p,{class:"countdown-box flex align-center"},{default:u((()=>[c(p,{class:"title-top-time"},{default:u((()=>[i(d(e.$t("距结束还剩")),1)])),_:1}),c(f,{backgroundColor:"rgba(0, 0, 0, .06)",endTime:e.discountValue.discountEndTime,fontSize:11,color:"#fff"},null,8,["endTime"])])),_:1})])),_:1})])),_:1})}}),[["__scopeId","data-v-55360bec"]]),nt=g(e({__name:"productComment",props:{productId:{}},emits:["change"],setup(e,{emit:t}){const v=b(!1),y=b({}),g=b([]),h=b(1),k=b(10),x=e=>{Z({url:e})},w=b([]),V=b(0);return Y((e=>{if(e){const{id:t}=e;t&&((async e=>{v.value=!0;try{const t=await Ue(e);y.value=t}catch(t){}finally{v.value=!1}})(t),(async e=>{v.value=!0;try{const t=await ze(e,{type:1,page:h.value});g.value=t.records}catch(t){F({title:t.message,icon:"none"})}finally{v.value=!1}})(t),(async e=>{try{const t=await Oe({productId:e,page:h.value,size:k.value});w.value=t.records,V.value=t.total}catch(t){}finally{v.value=!1}})(t))}})),(e,t)=>{const v=I,h=n,k=l(a("uni-icons"),Ee),b=f,w=l(a("uni-rate"),He);return s(),o(h,{class:"product-comment-card"},{default:u((()=>[c(h,{class:"comment-title flex justify-between align-center"},{default:u((()=>[c(h,{class:"txt"},{default:u((()=>[i(d(e.$t("评价")),1),c(v,null,{default:u((()=>[i("("+d(y.value.total??0)+")",1)])),_:1})])),_:1}),c(h,{class:"more",onClick:t[0]||(t[0]=t=>x(`/pages/product/comment?id=${e.productId}`))},{default:u((()=>[i(d(e.$t("好评")),1),c(v,null,{default:u((()=>[i(d(y.value.goodPercent??0)+"%",1)])),_:1}),c(k,{type:"right",size:"16",color:"#bfbfbf"})])),_:1})])),_:1}),g.value.length>0?(s(!0),r(_,{key:0},p(g.value.slice(0,2),((e,t)=>(s(),o(h,{class:"comment-item",key:t},{default:u((()=>[c(h,{class:"user-info flex justify-between align-center"},{default:u((()=>[c(h,{class:"user-name flex align-center"},{default:u((()=>[c(h,{class:"head_logo"},{default:u((()=>[c(b,{src:m(T)((null==e?void 0:e.avatar)||"")},null,8,["src"])])),_:2},1024),c(h,null,{default:u((()=>[c(v,null,{default:u((()=>[i(d(e.username),1)])),_:2},1024),c(w,{readonly:!0,value:e.commentRank,size:"14",color:"#bfbfbf","active-color":"#ffa800"},null,8,["value"])])),_:2},1024)])),_:2},1024),c(h,{class:"time"},{default:u((()=>[i(d(e.addTime),1)])),_:2},1024)])),_:2},1024),c(h,{class:"user-content"},{default:u((()=>[i(d(e.content),1)])),_:2},1024),c(h,{class:"user-imgs flex-wrap align-center"},{default:u((()=>[(s(!0),r(_,null,p(e.showPics,((e,t)=>(s(),o(b,{key:t,src:m(T)(e.picThumb),onClick:t=>{return l=m(T)((null==e?void 0:e.picUrl)||""),void U({urls:[l]});var l}},null,8,["src","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128)):(s(),o(h,{key:1,class:"no-data"},{default:u((()=>[i(d(e.$t("暂无评价"))+"~ ",1)])),_:1})),c(h,{class:"comment-btn-box flex align-center justify-around"},{default:u((()=>[c(h,{class:"btn flex align-center",onClick:t[1]||(t[1]=t=>x(`/pages/product/comment?id=${e.productId}`))},{default:u((()=>[c(k,{type:"chat",size:"20",color:"#333"}),c(v,null,{default:u((()=>[i(d(e.$t("全部评价"))+"("+d(y.value.total??0)+")",1)])),_:1})])),_:1}),c(h,{class:"btn flex align-center",onClick:t[2]||(t[2]=t=>x(`/pages/product/consult?id=${e.productId}`))},{default:u((()=>[c(k,{type:"chatboxes",size:"20",color:"#333"}),c(v,null,{default:u((()=>[i(d(e.$t("购买咨询"))+"("+d(V.value??0)+")",1)])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-c7cc146f"]]),it=g(e({__name:"productShopInfo",props:{shopInfo:{}},emits:["refreshShopDetail"],setup(e,{emit:r}){const{t:p}=z(),f=e,m=r,v=t((()=>f.shopInfo.collectShop?p("取消收藏"):p("收藏店铺"))),_=()=>{f.shopInfo.collectShop?g():y()},y=async()=>{try{await Xe({shopId:f.shopInfo.shopId});F({title:p("收藏成功")}),m("refreshShopDetail",f.shopInfo.shopId)}catch(e){console.error(e)}},g=async()=>{K({title:p("提示"),content:p("确认要取消收藏店铺吗？"),success:async e=>{if(e.confirm)try{await Xe({shopId:f.shopInfo.shopId});F({title:p("操作成功")}),m("refreshShopDetail",f.shopInfo.shopId)}catch(t){console.error(t)}}})},h=()=>{Z({url:`/pages/shop/index?shopId=${f.shopInfo.shopId}`})};return(e,t)=>{const r=l(a("tig-image"),Ie),p=n,f=I;return s(),o(p,{class:"shop-info-box"},{default:u((()=>[c(p,{class:"shop-info-title"},{default:u((()=>[c(p,{class:"shop-info-title-left"},{default:u((()=>[c(r,{src:e.shopInfo.shopLogo},null,8,["src"])])),_:1}),c(p,{class:"shop-info-title-right"},{default:u((()=>[i(d(e.shopInfo.shopTitle),1)])),_:1})])),_:1}),c(p,{class:"shop-info-btn"},{default:u((()=>[c(p,{class:"shop-info-btn-item",onClick:_},{default:u((()=>[i(d(e.$t(v.value)),1)])),_:1}),c(p,{class:"shop-info-btn-item",onClick:h},{default:u((()=>[c(f,{class:"iconfont icon-dianpu"}),i(" "+d(e.$t("进店逛逛")),1)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-c3ca436e"]]),dt=g(e({__name:"productCoupon",props:{modelValue:{type:Boolean,default:!1},promotionList:{type:Array,default:()=>[]},productId:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:f}){const{t:v}=z(),y=e;console.log(y.promotionList);const g=f,h=t({get:()=>y.modelValue,set(e){g("update:modelValue",e)}}),k={3:v("满减"),4:v("满折"),5:v("满赠")},x=t((()=>y.promotionList.filter((e=>3===e.type||4===e.type)))),I=t((()=>y.promotionList.filter((e=>5===e.type)))),V=(b(!1),(e,t,l)=>v(0===t?1===e?"已领取":"马上领":0===e?"马上领":l>=t?"已领取":"再次领取")),S=b([]),C=async()=>{try{const e=await Be(Number(y.productId));S.value=e}catch(e){console.error(e.message)}};return q((()=>y.productId),(e=>{e&&e>0&&C()})),(e,t)=>{const f=n,y=l(a("format-price"),Te),g=l(a("tig-image"),Ie),b=Q,P=l(a("tig-button"),Se),D=l(a("tig-fixed-placeholder"),Ye),T=l(a("tig-popup"),Ve);return s(),o(T,{show:h.value,"onUpdate:show":t[1]||(t[1]=e=>h.value=e),zIndex:999,showClose:!1,backgroundColor:"#fff"},{default:u((()=>[c(f,{class:"coupon-content"},{default:u((()=>[c(f,{class:"coupon-title"},{default:u((()=>[i(d(e.$t("优惠")),1)])),_:1}),c(b,{"scroll-y":"true",class:"promotion-box"},{default:u((()=>[c(f,{class:"promotion-content"},{default:u((()=>[$("",!0),x.value.length>0||I.value.length>0?(s(),o(f,{key:1,class:"activity-box"},{default:u((()=>[c(f,{class:"public-title"},{default:u((()=>[i(d(e.$t("促销")),1)])),_:1}),x.value.length>0?(s(!0),r(_,{key:0},p(x.value,(e=>(s(),o(f,{class:"activity-item",key:e.promotionId},{default:u((()=>[c(f,{class:"activity-item-label"},{default:u((()=>[i(d(k[e.type]),1)])),_:2},1024),c(f,{class:"activity-item-value"},{default:u((()=>[c(f,{class:"activity-item-name"},{default:u((()=>[i(d(e.data.promotionName),1)])),_:2},1024),c(f,{class:"activity-item-time"},{default:u((()=>[i(d(e.data.startTime)+"~"+d(e.data.endTime),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):$("",!0),I.value.length>0?(s(!0),r(_,{key:1},p(I.value,(t=>(s(),r(_,{key:t.promotionId},[(s(!0),r(_,null,p(t.data.promotionDesc,(t=>(s(),o(f,{class:"activity-item",key:t.giftId},{default:u((()=>[c(f,{class:"activity-item-label"},{default:u((()=>[i(d(e.$t("满赠")),1)])),_:1}),c(f,{class:"activity-product"},{default:u((()=>[c(f,{class:"activity-name"},{default:u((()=>[i(d(t.desc),1)])),_:2},1024),c(b,{class:"scroll-x","scroll-x":"true"},{default:u((()=>[c(f,{class:"activity-product-item",onClick:e=>{return l=t.gift.productInfo.productId,void Z({url:`/pages/product/index?id=${l}`});var l}},{default:u((()=>[c(g,{src:t.gift.productInfo.picThumb,class:"gift-img"},null,8,["src"]),c(f,{class:"gift-price"},{default:u((()=>[c(y,{showText:!1,fontStyle:{fontSize:"18rpx",fontWeight:"bold"},isBottom:!1,priceData:t.gift.productInfo.productPrice},null,8,["priceData"])])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))],64)))),128)):$("",!0)])),_:1})):$("",!0),S.value.length>0?(s(),o(f,{key:2,class:"coupon-box"},{default:u((()=>[c(f,{class:"public-title"},{default:u((()=>[i(d(e.$t("可领优惠券")),1)])),_:1}),(s(!0),r(_,null,p(S.value,(t=>(s(),o(f,{key:t.couponId,class:"coupon-item"},{default:u((()=>[c(f,{class:"left"},{default:u((()=>[c(f,{class:"col-1"},{default:u((()=>[c(f,{class:"title"},{default:u((()=>[i(d(t.couponName),1)])),_:2},1024)])),_:2},1024),t.couponDesc?(s(),o(f,{key:0,class:"col-2"},{default:u((()=>[i(d(t.couponDesc),1)])),_:2},1024)):$("",!0),1===t.sendType?(s(),o(f,{key:1,class:w(["col-3",{"special-col":!t.couponDesc}])},{default:u((()=>[i(d(e.$t("有效期"))+"："+d(t.useEndDate),1)])),_:2},1032,["class"])):$("",!0),0===t.sendType&&t.delayDay>0?(s(),o(f,{key:2,class:w(["col-3",{"special-col":!t.couponDesc}])},{default:u((()=>[i(d(m(ee)()?e.$t("领券{0}天后生效，有效期{1}天",[t.delayDay,t.useDay]):`领券${t.delayDay}天后生效，有效期${t.useDay}天`),1)])),_:2},1032,["class"])):$("",!0),0===t.sendType&&0===t.delayDay?(s(),o(f,{key:3,class:w(["col-3",{"special-col":!t.couponDesc}])},{default:u((()=>[i(d(m(ee)()?e.$t("领券当日起{0}天内可用",[t.useDay]):`领券当日起${t.useDay}天内可用`),1)])),_:2},1032,["class"])):$("",!0)])),_:2},1024),c(f,{class:"right"},{default:u((()=>[c(f,{class:"right-1"},{default:u((()=>[2===t.couponType?(s(),r(_,{key:0},[c(f,{class:"zhekou"},{default:u((()=>[i(d(t.couponDiscount),1)])),_:2},1024),c(f,{class:"zhe"},{default:u((()=>[i(d(e.$t("折")),1)])),_:1})],64)):(s(),o(y,{key:1,showText:!1,fontStyle:{fontSize:"48rpx",lineHeight:1,fontWeight:"400"},currencyStyle:{selfAlign:"end",fontSize:"28rpx"},priceData:t.couponMoney},null,8,["priceData"]))])),_:2},1024),"已领取"!==V(t.isReceive,t.limitNum,t.receiveNum)?(s(),o(f,{key:0,class:"right-2"},{default:u((()=>[c(f,null,{default:u((()=>[c(P,{customStyle:{height:"55rpx"},onClick:e=>(async e=>{if(!(1===e.isReceive&&e.limitNum>0&&e.receiveNum>=e.limitNum))try{await Ze({couponId:e.couponId}),F({title:v("领取成功"),duration:1e3}),setTimeout((()=>{C()}),500)}catch(t){console.log("error",t),F({title:t.message,icon:"none"})}})(t)},{default:u((()=>[i(d(V(t.isReceive,t.limitNum,t.receiveNum)),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)):(s(),o(f,{key:1,class:"already-received-box"},{default:u((()=>[c(f,{class:"already-received-content"},{default:u((()=>[c(f,{class:"already-received-text"},{default:u((()=>[i(d(V(t.isReceive,t.limitNum,t.receiveNum)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024))])),_:2},1024),c(f,{class:"dotted-line"})])),_:2},1024)))),128))])),_:1})):$("",!0),c(D,{backgroundColor:"#fff"},{default:u((()=>[c(f,{class:"btn-box"},{default:u((()=>[c(P,{onClick:t[0]||(t[0]=t=>e.$emit("update:modelValue",!1))},{default:u((()=>[i(d(e.$t("我知道了")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}}),[["__scopeId","data-v-b2151398"]]),rt=g(e({__name:"afterSaleService",props:{id:{type:[String,Number],default:""}},setup(e){const t=e,l=b({});return te((()=>{t.id&&(async e=>{try{const t=await Fe(e);Object.assign(l.value,t)}catch(t){F({title:t.message,icon:"none"})}})(t.id)})),(e,t)=>{const a=le,i=n;return s(),o(i,null,{default:u((()=>[c(i,{class:"tab_body"},{default:u((()=>[c(a,{nodes:l.value.templateContent},null,8,["nodes"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-465b0027"]]),pt=g(e({__name:"productContent",props:{descArr:{type:Array,default:()=>[]},productId:{type:Number,default:""},productType:{type:Number,default:1},isBuy:{type:Number,default:0},paidContent:{type:Array,default:""}},setup(e){const t=b(0);return(l,a)=>{const y=n,g=f,h=le;return s(),o(y,{class:"product-card-row product-detail-area"},{default:u((()=>[c(y,{class:"tab-box flex align-center justify-around"},{default:u((()=>[c(y,{class:w(["tab",{active:0==t.value}]),onClick:a[0]||(a[0]=e=>t.value=0)},{default:u((()=>[i(d(l.$t("商品介绍")),1)])),_:1},8,["class"]),c(y,{class:w(["tab",{active:1==t.value}]),onClick:a[1]||(a[1]=e=>t.value=1)},{default:u((()=>[i(d(l.$t("售后服务")),1)])),_:1},8,["class"])])),_:1}),0==t.value?(s(),o(y,{key:0,class:"default"},{default:u((()=>[m(ae)()&&4===e.productType?(s(),r(_,{key:0},[1===e.isBuy&&e.paidContent?(s(!0),r(_,{key:0},p(e.paidContent,((e,t)=>(s(),r(_,{key:t},["pic"==e.type?(s(),o(y,{key:0,class:"desc-pic-item"},{default:u((()=>[c(g,{"lazy-load":"",src:m(T)((null==e?void 0:e.pic)||""),class:"slide-image",mode:"widthFix"},null,8,["src"])])),_:2},1024)):$("",!0),"text"==e.type?(s(),o(h,{key:1,class:"desc-text-item",nodes:e.html},null,8,["nodes"])):$("",!0)],64)))),128)):(s(),o(g,{key:1,class:"img",src:m(v)("product/paid_content_bg.png"),mode:"widthFix"},null,8,["src"]))],64)):$("",!0),(s(!0),r(_,null,p(e.descArr,((e,t)=>(s(),r(_,{key:t},["pic"==e.type?(s(),o(y,{key:0,class:"desc-pic-item"},{default:u((()=>[c(g,{"lazy-load":"",src:m(T)((null==e?void 0:e.pic)||""),class:"slide-image",mode:"widthFix"},null,8,["src"])])),_:2},1024)):$("",!0),"text"==e.type?(s(),o(h,{key:1,class:"desc-text-item",nodes:e.html},null,8,["nodes"])):$("",!0)],64)))),128))])),_:1})):$("",!0),P(c(y,{class:"default"},{default:u((()=>[c(rt,{id:e.productId},null,8,["id"])])),_:1},512),[[N,1==t.value]])])),_:1})}}}),[["__scopeId","data-v-5b54ed23"]]),ft=g(e({__name:"animation",props:oe({animationPosition:{},styleVariable:{}},{modelValue:{default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(e){h((e=>({"083a2786":t.animationPosition.top+"px","6609d8a1":t.animationPosition.left+"px"})));const t=e,l=se(e,"modelValue"),a=()=>{l.value=!1};return(e,t)=>{const i=n;return s(),o(i,{class:w(["animation-box",{animation:l.value}]),style:x({...e.styleVariable})},{default:u((()=>[c(i,{class:"animation-content",onAnimationend:a})])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-f614fdba"]]),mt=g(e({__name:"index",setup(e){const g=J(),{scrollTop:h}=Ce(),w=b(0),V=b(!1),S=k(),D=b(),L=b(0),j=b({top:0,left:0}),U=b(),z=b(""),B=b(0),M=()=>{V.value=!0},R=()=>{D.value&&D.value.handleShowPopup()},W=b({productId:0,productStock:0}),E=b({}),H=b([]),q=b([]),G=b([]),K=b({}),ee=b([]),te=b([]),le=b([]),ae=b(!0),oe=()=>{ae.value=!1},se=b({}),Se=async e=>{try{const t=await Je(e);se.value=t}catch(t){console.error(t)}},Te=e=>{Se(e)},Ne=()=>{se.value.shopId&&Z({url:`/pages/shop/index?shopId=${se.value.shopId}`})},Le=b(""),je=b("0"),Ue=b("0"),ze=b(0),Oe=b(0),Be=b({}),Fe=b(1),Me=b([]),Re=b(0),We=b({}),Ee=b(""),He=e=>{e.productSkuId&&e.skuStr&&(Le.value=e.skuStr),ze.value=e.productStock,Me.value=e.promotionList,je.value=e.productPrice,Ue.value=e.productOriginPrice,Fe.value=e.productNumber,Oe.value=e.isSeckill,Be.value=e.seckillValue,Re.value=e.isDiscount,We.value=e.discountValue,Ee.value=e.discountEndTime},Xe=b(0),Ye=async()=>{try{const e=await Qe();Xe.value=e}catch(e){}},Ze=b(!1),et=t((()=>{if(E.value.normal&&E.value.normal.length){return E.value.normal.map((e=>e.attrName)).join("/")}return""})),at=()=>{he({url:"/pages/index/index"})},ot=()=>{Z({url:"/pages/search/result"})},rt=C(),mt=b(O()),vt=e=>{const t=ke().in(rt);t.select(e).boundingClientRect(),t.selectViewport().scrollOffset((()=>{})),t.exec((e=>{be({scrollTop:e[0].top+e[1].scrollTop-50,duration:0})}))},_t=b(".product-area");let yt,gt,ht;const kt=(e,t)=>{e.relativeToViewport({bottom:-(mt.value.windowHeight-200)}).observe(t,(e=>{e.intersectionRatio>0&&(_t.value=t)}))};ue((()=>{yt=ce(rt),gt=ce(rt),ht=ce(rt),kt(yt,".product-area"),kt(gt,".evaluate-area"),kt(ht,".product-detail-area")})),ne((()=>{yt&&yt.disconnect(),yt=null,gt&&gt.disconnect(),gt=null,ht&&ht.disconnect(),ht=null,ie()}));const bt=b(0);Y((e=>{e&&(e.type&&(z.value=e.type),e.id&&(async e=>{try{let t={};"exchange"===z.value?(t=await qe(e),B.value=t.exchangeInfo.exchangeIntegral,ze.value=t.exchangeInfo.productStock,je.value=t.exchangeInfo.discountsPrice||"0",L.value=t.exchangeInfo.id):(t=await Ae(e),ze.value=t.item.productStock,je.value=t.item.productPrice||"0",L.value=t.item.productId),w.value=t.item.productId,W.value=t.item,E.value=t.attrList,q.value=t.picList,le.value=t.videoList,K.value=t.rankDetail,H.value=t.skuList,te.value=t.checkedValue,ee.value=t.descArr,G.value=t.serviceList,fe({title:t.item.productName}),t.item.shopId&&Se(t.item.shopId),me((()=>{var e;null==(e=U.value)||e.handleLog()}))}catch(t){F({title:t.message,icon:"none"})}})(Number(e.id)),e.skuId&&(bt.value=Number(e.skuId)),e.salesmanId&&((e,t)=>{let l=A("salesmanProducts")||[];if(l.length>0){const a=l.findIndex((e=>e.productId==t));-1!==a&&(l[a].salesmanId=e)}l=[...l,{salesmanId:e,productId:t}],ve("salesmanProducts",l)})(e.salesmanId,e.id))})),de((()=>{Ye()}));const xt=b(!1),It=async e=>{await St(".cart-position"),await wt(".cart"),xt.value=e,Ye()},wt=async e=>{const t=await xe(e);if(t){const{width:e,height:l,top:a,left:o}=t;j.value.top=a-l/2,j.value.left=o+e/2}},Vt=b({left:0,top:0}),St=async e=>{const t=await xe(e);if(t){const{width:e,height:l,top:a,left:o}=t;Vt.value.top=a-l/2,Vt.value.left=o+e/2}},Ct=t((()=>({"--x":Vt.value.left-j.value.left+"px","--y":"8px"})));re((e=>({title:W.value.productName,imageUrl:T(W.value.picUrl)}))),pe((()=>({title:W.value.productName,imageUrl:T(W.value.picUrl)})));const $t=t((()=>Object.keys(se.value).length>0?!!(se.value.kefuInlet&&se.value.kefuInlet.length>0&&se.value.kefuInlet.includes(1)):g.serviceConfig.show));return(e,t)=>{const g=n,k=I,b=f,C=l(a("tig-image"),Ie),T=l(a("uni-badge"),we),O=Q,F=l(a("tig-popup"),Ve),A=l(a("tig-back-top"),Pe),H=l(a("tig-layout"),$e),J=l(a("tig-loadingpage"),De);return s(),o(g,null,{default:u((()=>[P(c(g,null,{default:u((()=>[c(H,{ref_key:"layoutRef",ref:U,immediateLog:!1,productId:w.value,shopId:W.value.shopId},{default:u((()=>[c(tt,{modelValue:m(h),"onUpdate:modelValue":t[0]||(t[0]=e=>_e(h)?h.value=e:null),activeModule:_t.value,"onUpdate:activeModule":t[1]||(t[1]=e=>_t.value=e),event:vt},null,8,["modelValue","activeModule"]),c(lt,{class:"product-area",videoList:le.value,picList:q.value,productInfo:W.value},null,8,["videoList","picList","productInfo"]),Oe.value?(s(),o(ut,{key:0,productInfo:W.value,productOriginPrice:Ue.value,productPrice:je.value,seckillValue:Be.value},null,8,["productInfo","productOriginPrice","productPrice","seckillValue"])):$("",!0),Re.value?(s(),o(ct,{key:1,productInfo:W.value,productOriginPrice:Ue.value,productPrice:je.value,discountValue:We.value,productStock:ze.value},null,8,["productInfo","productOriginPrice","productPrice","discountValue","productStock"])):$("",!0),c(g,{class:"productDetail-content",style:x({"padding-bottom":(0===W.value.productStatus||0===ze.value?160:100)+"rpx"})},{default:u((()=>[c(st,{isSeckill:Oe.value,promotionList:Me.value,productInfo:W.value,productPrice:je.value,isDiscount:Re.value,showCoupon:Ze.value,"onUpdate:showCoupon":t[2]||(t[2]=e=>Ze.value=e),type:z.value,exchangeIntegral:B.value},null,8,["isSeckill","promotionList","productInfo","productPrice","isDiscount","showCoupon","type","exchangeIntegral"]),c(g,{class:"product-card-row"},{default:u((()=>{var l;return[c(Ge,{onLoadEnd:oe,ref_key:"specificationRef",ref:D,modelValue:L.value,"onUpdate:modelValue":t[3]||(t[3]=e=>L.value=e),skuId:bt.value,"onUpdate:skuId":t[4]||(t[4]=e=>bt.value=e),onAddCardSucceed:It,onSendValue:He,type:z.value},{default:u((()=>[m(ye)()?(s(),r(_,{key:0},[E.value.spe&&E.value.spe.length>0?(s(),o(g,{key:0,class:"cart-item flex align-center justify-between"},{default:u((()=>[c(g,{class:"flex align-center"},{default:u((()=>[c(g,{class:"title"},{default:u((()=>[i(d(e.$t("规格")),1)])),_:1}),c(g,{class:"label"},{default:u((()=>[(s(!0),r(_,null,p(E.value.spe,(e=>(s(),o(k,{key:e},{default:u((()=>[i(d(`${e.attrList.length}种${e.attrName} `),1)])),_:2},1024)))),128))])),_:1})])),_:1}),c(g,null,{default:u((()=>[c(b,{class:"icon-image",src:m(v)("common/more.png")},null,8,["src"])])),_:1})])),_:1})):$("",!0)],64)):(s(),o(g,{key:1,class:"cart-item flex align-center justify-between"},{default:u((()=>[c(g,{class:"flex align-center"},{default:u((()=>[c(g,{class:"title"},{default:u((()=>[i(d(e.$t("已选")),1)])),_:1}),c(g,{class:"label"},{default:u((()=>[i(d(Le.value)+" "+d(Fe.value)+" 件 ",1)])),_:1})])),_:1}),c(g,null,{default:u((()=>[c(b,{class:"icon-image",src:m(v)("common/more.png")},null,8,["src"])])),_:1})])),_:1})),m(S).showSelledCount?(s(),o(g,{key:2,class:"cart-item flex align-center justify-between"},{default:u((()=>[c(g,{class:"flex align-center"},{default:u((()=>[c(g,{class:"title"},{default:u((()=>[i(d(e.$t("销量")),1)])),_:1}),c(g,{class:"label"},{default:u((()=>[i(d(W.value.virtualSales)+" 件 ",1)])),_:1})])),_:1})])),_:1})):$("",!0)])),_:1},8,["modelValue","skuId","type"]),(null==(l=E.value.normal)?void 0:l.length)>0?(s(),o(g,{key:0,class:"cart-item flex align-center justify-between",onClick:M},{default:u((()=>[c(g,{class:"flex align-center"},{default:u((()=>[c(g,{class:"title"},{default:u((()=>[i(d(e.$t("参数")),1)])),_:1}),c(g,{class:"label attr_text line1"},{default:u((()=>[c(g,{class:"shuxin"},{default:u((()=>[i(d(et.value),1)])),_:1})])),_:1})])),_:1}),c(g,null,{default:u((()=>[c(b,{class:"icon-image",":src":m(v)("common/more.png")},null,8,[":src"])])),_:1})])),_:1})):$("",!0),G.value.length>0?(s(),o(g,{key:1,class:"cart-item"},{default:u((()=>[c(g,{class:"flex"},{default:u((()=>[c(g,{class:"title"},{default:u((()=>[i(d(e.$t("服务")),1)])),_:1}),c(g,{class:"label flex-wrap align-center servicelist"},{default:u((()=>[(s(!0),r(_,null,p(G.value,((e,t)=>(s(),r(_,{key:t},[e.icoImg?(s(),r("span",{key:0,class:"flex align-center service-item"},[c(C,{style:{width:"15px",height:"15px"},src:e.icoImg},null,8,["src"]),i(d(e.productServiceName),1)])):$("",!0)],64)))),128))])),_:1})])),_:1})])),_:1})):$("",!0)]})),_:1}),Object.keys(se.value).length>0&&m(ge)()?(s(),o(it,{key:0,shopInfo:se.value,onRefreshShopDetail:Te},null,8,["shopInfo"])):$("",!0),c(nt,{class:"evaluate-area",productId:W.value.productId},null,8,["productId"]),c(pt,{isBuy:W.value.isBuy,paidContent:W.value.paidContent,productType:W.value.productType,descArr:ee.value,productId:W.value.productId,class:"product-detail-area"},null,8,["isBuy","paidContent","productType","descArr","productId"])])),_:1},8,["style"]),4!==W.value.productType||1!==W.value.isBuy?(s(),o(g,{key:2,style:x({"padding-bottom":m(S).safeBottom+"rpx"}),class:"bottom-bar-box"},{default:u((()=>[c(g,{class:"bottom-bar flex align-center"},{default:u((()=>[c(g,{class:"icon-box"},{default:u((()=>[se.value.shopId?(s(),o(g,{key:0,class:"label",onClick:Ne},{default:u((()=>[c(g,null,{default:u((()=>[c(b,{src:m(v)("product/shop.png"),class:"img"},null,8,["src"])])),_:1}),c(g,{class:"label-text"},{default:u((()=>[c(k,null,{default:u((()=>[i(d(e.$t("店铺")),1)])),_:1})])),_:1})])),_:1})):(s(),o(g,{key:1,class:"label",onClick:at},{default:u((()=>[c(g,null,{default:u((()=>[c(b,{mode:"widthFix",src:m(v)("product/home.png"),class:"img"},null,8,["src"])])),_:1}),c(g,{class:"label-text"},{default:u((()=>[c(k,null,{default:u((()=>[i(d(e.$t("首页")),1)])),_:1})])),_:1})])),_:1})),$t.value?(s(),o(g,{key:2,class:"label"},{default:u((()=>[c(Ke,{phone:se.value.kefuPhone,productId:w.value,shopId:se.value.shopId},{default:u((()=>[c(g,null,{default:u((()=>[c(b,{mode:"widthFix",src:m(v)("product/service.png"),class:"img"},null,8,["src"])])),_:1}),c(g,{class:"label-text"},{default:u((()=>[c(k,null,{default:u((()=>[i(d(e.$t("客服")),1)])),_:1})])),_:1})])),_:1},8,["phone","productId","shopId"])])),_:1})):$("",!0),c(g,{class:"label cart-position",onClick:t[5]||(t[5]=X((e=>{y({url:"/pages/cart/cartJump"})}),["stop"]))},{default:u((()=>[c(g,null,{default:u((()=>[c(T,{class:"uni-badge-left-margin badgecolor",text:Xe.value,absolute:"rightTop",size:"small"},{default:u((()=>[c(b,{mode:"widthFix",src:m(v)("product/cart.png"),class:"img"},null,8,["src"])])),_:1},8,["text"])])),_:1}),c(g,{class:"label-text"},{default:u((()=>[c(k,null,{default:u((()=>[i(d(e.$t("购物车")),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(g,{class:"btn-box"},{default:u((()=>[0===W.value.productStatus||0===ze.value?(s(),o(g,{key:0,class:"other-products-btn",onClick:ot},{default:u((()=>[i(d(e.$t("查看其他商品")),1)])),_:1})):(s(),r(_,{key:1},["exchange"===z.value?(s(),o(g,{key:0,class:"other-products-btn",onClick:R},{default:u((()=>[i(d(e.$t("立即兑换")),1)])),_:1})):(s(),r(_,{key:1},[1===W.value.productType?(s(),r(_,{key:0},[c(g,{class:"btn cart",onClick:R},{default:u((()=>[i(d(e.$t("加入购物车")),1)])),_:1}),c(g,{class:"btn buy",onClick:R},{default:u((()=>[i(d(e.$t("立即购买")),1)])),_:1})],64)):(s(),o(g,{key:1,class:"other-products-btn",onClick:R},{default:u((()=>[i(d(e.$t("立即购买")),1)])),_:1}))],64))],64))])),_:1}),0===W.value.productStatus||0===ze.value?(s(),o(g,{key:0,class:"product-status"},{default:u((()=>[i(d(e.$t(0===W.value.productStatus?"商品已下架":"商品已售罄")),1)])),_:1})):$("",!0)])),_:1})])),_:1},8,["style"])):$("",!0),c(dt,{productId:Number(w.value),promotionList:Me.value,modelValue:Ze.value,"onUpdate:modelValue":t[6]||(t[6]=e=>Ze.value=e)},null,8,["productId","promotionList","modelValue"]),c(F,{show:V.value,"onUpdate:show":t[7]||(t[7]=e=>V.value=e)},{default:u((()=>[c(O,{"scroll-y":"true",class:"attr_table-box"},{default:u((()=>[c(g,{class:"popup-title title"},{default:u((()=>[i(d(e.$t("规格参数")),1)])),_:1}),c(g,{class:"attr_table"},{default:u((()=>[(s(!0),r(_,null,p(E.value.normal,((e,t)=>(s(),o(g,{key:t,class:"item flex"},{default:u((()=>[c(g,{class:"lable"},{default:u((()=>[i(d(e.attrName),1)])),_:2},1024),(s(!0),r(_,null,p(e.attrList,((e,t)=>(s(),o(g,{class:"value",key:t},{default:u((()=>[i(d(e.attrValue),1)])),_:2},1024)))),128))])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["show"]),c(A,{scrollTop:m(h)},null,8,["scrollTop"]),c(ft,{styleVariable:Ct.value,animationPosition:j.value,modelValue:xt.value,"onUpdate:modelValue":t[8]||(t[8]=e=>xt.value=e)},null,8,["styleVariable","animationPosition","modelValue"])])),_:1},8,["productId","shopId"])])),_:1},512),[[N,!ae.value]]),c(J,{modelValue:ae.value,"onUpdate:modelValue":t[9]||(t[9]=e=>ae.value=e)},null,8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-a840cbfe"]]);export{mt as default};
