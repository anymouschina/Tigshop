import{e,R as a,r as t,O as l,q as u,y as s,c as i,o as r,w as o,a as n,i as d,aE as c,bM as m,D as f,J as v,bN as p,F as _,b as g,t as h,_ as b,E as k,bO as w,T as x,L as y,bP as T,a2 as V,A as C,bu as D,z as $}from"./index-BKzbZvRR.js";import{s as S}from"./searchInput.BbZKz8d8.js";import{a as j,b as I,i as N}from"./tig-layout.BpNdXByQ.js";import{_ as O}from"./tig-fixed-placeholder.s9cnCRBL.js";const E=b(e({__name:"tig-picker-date",props:{modelValue:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]},defaultIndex:{type:Array,default:()=>[0,0,0]}},emits:["update:modelValue","change","confirm"],setup(e,{emit:b}){const k=e,w=b,x=a({get:()=>k.modelValue,set(e){w("update:modelValue",e)}}),y=t([0,0,0]);l((()=>k.defaultIndex),(e=>{e.length>0&&(y.value=JSON.parse(JSON.stringify(e)))}),{immediate:!0});const T=e=>{w("change",{values:k.columns.map(((a,t)=>a[e.detail.value[t]])),indexs:e.detail.value})};return(a,t)=>{const l=d,b=p,k=m,w=u(s("tig-button"),j),V=u(s("tig-fixed-placeholder"),O),C=u(s("tig-popup"),I);return r(),i(C,{show:x.value,"onUpdate:show":t[1]||(t[1]=e=>x.value=e),zIndex:999,showClose:!1,backgroundColor:"#fff"},{default:o((()=>[n(l,{class:"picker-box"},{default:o((()=>[c(a.$slots,"default",{},void 0,!0),n(k,{indicatorStyle:"height: 50px;",value:y.value,class:"picker-view",onChange:T},{default:o((()=>[(r(!0),f(_,null,v(e.columns,((e,a)=>(r(),i(b,{key:a},{default:o((()=>[(r(!0),f(_,null,v(e,((e,a)=>(r(),i(l,{class:"item",key:a},{default:o((()=>[g(h(e),1)])),_:2},1024)))),128))])),_:2},1024)))),128))])),_:1},8,["value"]),n(V,{backgroundColor:"#fff"},{default:o((()=>[n(l,{class:"btn-box"},{default:o((()=>[n(w,{class:"btn",customStyle:{"background-color":"#ff720d"},onClick:t[0]||(t[0]=e=>a.$emit("confirm"))},{default:o((()=>[g(h(a.$t("确定")),1)])),_:1})])),_:1})])),_:1})])),_:3})])),_:3},8,["show"])}}}),[["__scopeId","data-v-efbab093"]]),B=b(e({__name:"selectDate",props:{modelValue:{type:Boolean,default:!1},minYears:{type:[Number,String],default:2013}},emits:["change","update:modelValue","confirm"],setup(e,{emit:l}){const{t:c}=k(),m=e,f=a({get:()=>m.modelValue,set(e){v("update:modelValue",e)}}),v=l,p=t(),_=a((()=>{let e=[];for(let a=Number(m.minYears);a<=(new Date).getFullYear();a++)e.push(a);return e})),b=a((()=>{let e=[];for(let a=1;a<=12;a++)e.push(a);return e})),V=a((()=>{let e=[],a=S(_.value[N.value[0]],b.value[N.value[1]]);for(let t=1;t<=a;t++)e.push(t);return e})),C=a((()=>[_.value,b.value,V.value])),D=e=>{const{values:a,indexs:t}=e;N.value=t,B.value[z.value]=a.join("."),U.value[z.value]=a.join("-")},$=e=>{if(!B.value[0]||!B.value[1])return y({title:c("请选择开始时间和结束时间"),icon:"none"});if(-1===I(B.value[1],B.value[0]))return y({title:c("结束时间必须大于等于开始时间"),icon:"none"});v("confirm",U.value),v("update:modelValue",!1)},S=(e,a)=>2===a?j(e)?29:28:[4,6,9,11].includes(a)?30:31,j=e=>e%4==0&&e%100!=0||e%400==0,I=(e,a)=>{const t=new Date(e.split("-").join("/")),l=new Date(a.split("-").join("/"));return t.getTime()>l.getTime()?1:t.getTime()<l.getTime()?-1:0},N=t([0,0,0]),O=e=>{const a=T(e),[t,l,u]=a.split("-");N.value=[_.value.indexOf(Number(t)),b.value.indexOf(Number(l)),V.value.indexOf(Number(u))]},B=t([]),U=t([]),z=t(0),A=e=>{z.value=e,B.value[e]&&O(new Date(B.value[e].split(".").join("-")))};return w((()=>{O(new Date)})),(e,a)=>{const t=d,l=u(s("tig-picker-date"),E);return r(),i(l,{modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=e=>f.value=e),ref_key:"uPickerRef",ref:p,defaultIndex:N.value,columns:C.value,onConfirm:$,onChange:D},{default:o((()=>[n(t,{class:"picker-box-header"},{default:o((()=>[n(t,{class:x(["header-item",{active:0===z.value}]),onClick:a[0]||(a[0]=e=>A(0))},{default:o((()=>[n(t,{class:"header-item-text"},{default:o((()=>[g(h(e.$t("开始时间")),1)])),_:1}),n(t,{class:"header-item-value"},{default:o((()=>[g(h(B.value[0]??e.$t("请选择")),1)])),_:1})])),_:1},8,["class"]),n(t,{class:x(["header-item",{active:1===z.value}]),onClick:a[1]||(a[1]=e=>A(1))},{default:o((()=>[n(t,{class:"header-item-text"},{default:o((()=>[g(h(e.$t("结束时间")),1)])),_:1}),n(t,{class:"header-item-value"},{default:o((()=>[g(h(B.value[1]??e.$t("请选择")),1)])),_:1})])),_:1},8,["class"])])),_:1})])),_:1},8,["modelValue","defaultIndex","columns"])}}}),[["__scopeId","data-v-176e953c"]]),U=b(e({__name:"timeFilter",props:{params:{type:Object,default:()=>({})},placeholder:{type:String,default:"输入用户手机号、订单号或商品名"}},emits:["update:params","change"],setup(e,{emit:l}){V((e=>({"3c42f470":C(c)+"px","248a2eca":C(p)+"px","7c36b363":C(m)+"px","99d67eba":C(v)})));const{height:c,contentHeight:m,contentWidth:v,statusBarHeight:p}=N(60),b=e,k=l,w=a({get:()=>b.params,set(e){k("update:params",e)}}),y=t(0),j=e=>{switch(e){case 0:w.value.orderTimeStart="",w.value.orderTimeEnd="";break;case 1:w.value.orderTimeStart=T(new Date),w.value.orderTimeEnd=T(new Date);break;case 2:w.value.orderTimeStart=T(new Date((new Date).getTime()-864e5)),w.value.orderTimeEnd=T(new Date((new Date).getTime()-864e5));break;case 3:w.value.orderTimeStart=T(new Date((new Date).getTime()-5184e5)),w.value.orderTimeEnd=T(new Date)}k("change"),y.value=e,O.value=[]},I=t(!1),O=t([]),E=e=>{O.value=e,w.value.orderTimeStart=e[0],w.value.orderTimeEnd=e[1],y.value=-1,k("change")};return(a,t)=>{const l=d,c=u(s("up-icon"),D);return r(),i(l,null,{default:o((()=>[n(l,{class:"time-filter"},{default:o((()=>[n(l,{class:"search-box"},{default:o((()=>[n(l,{class:"status-bar"}),n(l,{class:"search-input-box"},{default:o((()=>[n(l,{class:"input"},{default:o((()=>[n(S,{style:{width:"100%"},placeholder:e.placeholder,modelValue:w.value.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>w.value.keyword=e),onConfirm:t[1]||(t[1]=e=>a.$emit("change")),onClear:t[2]||(t[2]=e=>a.$emit("change"))},null,8,["placeholder","modelValue"])])),_:1})])),_:1})])),_:1}),n(l,{class:"time-filter__inner"},{default:o((()=>[n(l,{class:"time-filter-tags"},{default:o((()=>[n(l,{class:x(["time-filter-tags__item",{"time-filter-tags__item--active":0===y.value}]),onClick:t[3]||(t[3]=e=>j(0))},{default:o((()=>[g(h(a.$t("全部")),1)])),_:1},8,["class"]),n(l,{class:x(["time-filter-tags__item",{"time-filter-tags__item--active":1===y.value}]),onClick:t[4]||(t[4]=e=>j(1))},{default:o((()=>[g(h(a.$t("今日")),1)])),_:1},8,["class"]),n(l,{class:x(["time-filter-tags__item",{"time-filter-tags__item--active":2===y.value}]),onClick:t[5]||(t[5]=e=>j(2))},{default:o((()=>[g(h(a.$t("昨日")),1)])),_:1},8,["class"]),n(l,{class:x(["time-filter-tags__item",{"time-filter-tags__item--active":3===y.value}]),onClick:t[6]||(t[6]=e=>j(3))},{default:o((()=>[g(h(a.$t("近七日")),1)])),_:1},8,["class"])])),_:1}),n(l,{class:"time-filter-custom",onClick:t[7]||(t[7]=e=>I.value=!0)},{default:o((()=>[O.value.length?(r(),i(l,{key:0,class:"time-filter__txt"},{default:o((()=>[n(l,null,{default:o((()=>[g(h(O.value[0])+"~",1)])),_:1}),O.value[1]?(r(),i(l,{key:0},{default:o((()=>[g(h(O.value[1]),1)])),_:1})):$("",!0)])),_:1})):(r(),f(_,{key:1},[g(h(a.$t("自定义时间")),1)],64)),n(c,{name:"arrow-down",color:"#969799",size:"8"})])),_:1})])),_:1})])),_:1}),n(B,{onConfirm:E,modelValue:I.value,"onUpdate:modelValue":t[8]||(t[8]=e=>I.value=e)},null,8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-3b4b0113"]]);export{U as t};
