import{Y as s,e as a,E as e,Q as t,r as o,f as l,j as i,c,w as n,q as u,y as p,o as r,a as d,i as h,z as f,D as _,F as m,J as g,b as v,t as y,d as k,P as w,L as x,_ as C}from"./index-BKzbZvRR.js";import{_ as j}from"./tig-image.DrOwWlV9.js";import{_ as I,a as b}from"./uni-swipe-action.DXHhbVv2.js";import{_ as z}from"./tig-layout.BpNdXByQ.js";import{s as L}from"./shop.C37ErgAh.js";const M=C(a({__name:"index",setup(a){const{t:C}=e(),M=t({page:1,size:10,keyword:""}),$=o([]),q=o(0),D=o(!1),E=o(!1),F=async()=>{M.page>1?E.value=!0:D.value=!0;try{const e=await(a=M,s({url:"user/user/collectionShop",method:"get",params:a}));$.value=e.records,q.value=e.total}catch(e){console.error(e)}finally{E.value=!1,D.value=!1}var a};l((()=>{F()}));return i((()=>{M.page<Math.ceil(q.value/M.size)&&(M.page++,F())})),(s,a)=>{const e=u(p("tig-image"),j),t=h,o=k,l=u(p("uni-swipe-action-item"),I),i=u(p("uni-swipe-action"),b),q=u(p("tig-layout"),z);return r(),c(q,{title:"店铺收藏"},{default:n((()=>[d(t,{class:"collection-shop"},{default:n((()=>[$.value.length>0?(r(),c(i,{key:0},{default:n((()=>[d(t,{class:"collection-content"},{default:n((()=>[(r(!0),_(m,null,g($.value,(a=>(r(),c(t,{key:a.shopId,class:"move-item"},{default:n((()=>[d(l,{threshold:0,autoClose:""},{right:n((()=>[d(t,{class:"collect-move-box"},{default:n((()=>[d(t,{class:"btn-del",onClick:s=>(async s=>{try{await L({shopId:s}),x({title:C("取消成功"),icon:"none"}),M.page=1,$.value=[],F()}catch(a){console.error(a)}})(a.shopId)},{default:n((()=>[d(o,null,{default:n((()=>[v(y(s.$t("取消收藏")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),default:n((()=>[d(t,{class:"shop-item",onClick:s=>{return e=a.shopId,void w({url:`/pages/shop/index?shopId=${e}`});var e}},{default:n((()=>[d(t,{class:"shop-item-left"},{default:n((()=>[d(e,{src:a.shop.shopLogo},null,8,["src"])])),_:2},1024),d(t,{class:"shop-item-right"},{default:n((()=>[d(t,{class:"shop-name line1"},{default:n((()=>[v(y(a.shop.shopTitle),1)])),_:2},1024),d(t,{class:"shop-desc line1"},{default:n((()=>[v(y(a.shop.description?a.shop.description:""),1)])),_:2},1024),d(t,{class:"shop-info"},{default:n((()=>[d(o,{class:"shop-info-text"},{default:n((()=>[v("上架商品："+y(a.productCount),1)])),_:2},1024),d(o,{class:"shop-info-text"},{default:n((()=>[v("店铺收藏："+y(a.collectCount),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):f("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-89307ce8"]]);export{M as default};
