import{e as a,E as e,u as s,ar as l,Q as t,r,f as c,j as i,c as o,w as u,i as n,a2 as d,A as m,q as p,y as f,o as v,a as _,z as h,D as g,F as y,J as b,T as x,U as C,d as j,b as k,t as P,V as O,B as w,C as D,P as N,_ as S}from"./index-BKzbZvRR.js";import{_ as I}from"./tig-image.DrOwWlV9.js";import{_ as T}from"./format-price.kSnuguuz.js";import{i as z,_ as F}from"./tig-layout.BpNdXByQ.js";import{s as V}from"./searchInput.BbZKz8d8.js";import{e as B}from"./empty.C2Tqbwan.js";import{_ as U}from"./share.vue_vue_type_script_setup_true_lang.B2TrjAEr.js";import{a as $}from"./salesman.nutPT2Bz.js";import"./tig-qrcode.BJY7sSut.js";import"./tig-fixed-placeholder.s9cnCRBL.js";import"./useCurrency.CZI2I-Mo.js";const q=S(a({__name:"list",setup(a){d((a=>({f4b41df4:m(q)+"px",fe089676:m(E)+"px","729efbe6":m(A)+"px","84964d66":m(H)})));const{t:S}=e();s(),l();const{height:q,contentHeight:A,contentWidth:H,statusBarHeight:E}=z(60),J=t({productName:"",sortField:"addTime",sortOrder:"desc",page:1,pageSize:15}),M=r(0),Q=r("addTime"),W=r([{label:"最新",value:"addTime"},{label:"销量",value:"virtualSales"},{label:"价格",value:"productPrice",sortOrder:"desc"}]),G=()=>{J.page=1,J.sortOrder="desc",X.value=[]},K=()=>{J.productName="",G(),Y()},L=a=>{G(),Y()},R=r(!1),X=r([]),Y=async()=>{R.value=!0;try{const a=await $(J);X.value=[...X.value,...a.records],M.value=a.total}catch(a){console.error(a)}finally{R.value=!1}},Z=r({}),aa=r(!1);return c((()=>{Y()})),i((()=>{J.page<Math.ceil(M.value/J.pageSize)&&(J.page++,Y())})),(a,e)=>{const s=n,l=j,t=p(f("tig-image"),I),r=p(f("format-price"),T),c=w,i=p(f("tig-layout"),F);return v(),o(s,null,{default:u((()=>[_(i,null,{default:u((()=>[_(s,{class:"sticky"},{default:u((()=>[_(s,{class:"salesman-menu"},{default:u((()=>[_(s,{class:"search-box"},{default:u((()=>[_(s,{class:"status-bar"}),_(s,{class:"search-input-box"},{default:u((()=>[_(s,{class:"input"},{default:u((()=>[_(V,{style:{width:"100%"},modelValue:J.productName,"onUpdate:modelValue":e[0]||(e[0]=a=>J.productName=a),onConfirm:L,onClear:K},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),_(s,{class:"salesman-content"},{default:u((()=>[(v(!0),g(y,null,b(W.value,((e,t)=>(v(),o(s,{onClick:a=>(a=>{if(G(),"productPrice"==a.value)a.sortOrder="desc"===a.sortOrder?"asc":"desc",J.sortOrder=a.sortOrder;else if(a.value===J.sortField)return;Q.value=a.value,J.sortField=a.value,Y()})(e),class:x(["salesman-item",{active:Q.value===e.value}]),key:t},{default:u((()=>[_(l,null,{default:u((()=>[k(P(a.$t(e.label)),1)])),_:2},1024),C(_(s,{class:"price-ico-box flex flex-column"},{default:u((()=>[_(l,{class:x(["iconfont-h5 icon-shangjiantou price-icon",{order:"productPrice"===Q.value&&"asc"===e.sortOrder}])},null,8,["class"]),_(l,{class:x(["iconfont-h5 icon-xiajiantou price-icon",{order:"productPrice"===Q.value&&"desc"===e.sortOrder}])},null,8,["class"])])),_:2},1536),[[O,"productPrice"===e.value]])])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1})])),_:1}),_(s,{class:"salesman-list"},{default:u((()=>[(v(!0),g(y,null,b(X.value,(e=>(v(),o(s,{key:e.productId,class:"salesman-list-item"},{default:u((()=>[_(s,{class:"salesman-item-content",onClick:a=>{return s=`/pages/salesman/detail?id=${e.productId}`,void N({url:s});var s}},{default:u((()=>[_(s,{class:"salesman-item-img"},{default:u((()=>[_(t,{src:e.picThumb},null,8,["src"])])),_:2},1024),_(s,{class:"salesman-item-text"},{default:u((()=>[_(s,{class:"line2 name"},{default:u((()=>[k(P(e.productName),1)])),_:2},1024),_(s,{class:"price"},{default:u((()=>[_(r,{currencyStyle:{"font-size":"21rpx"},priceData:e.productPrice},null,8,["priceData"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),_(s,{class:"salesman-item-btn"},{default:u((()=>[_(s,{class:"salesman-item-btn-content",onClick:a=>{return s=e,aa.value=!0,void(Z.value=s);var s}},{default:u((()=>[_(c,{class:"salesman-item-btn-icon",src:m(D)("salesman/shareIcon.png")},null,8,["src"]),_(s,{class:"salesman-item-btn-text"},{default:u((()=>[k(P(a.$t(Number(e.finalCommissionPrice)>0?"预计可赚":"立即分享"))+" ",1),Number(e.finalCommissionPrice)>0?(v(),o(r,{key:0,priceData:e.finalCommissionPrice},null,8,["priceData"])):h("",!0)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),R.value||0!==M.value?h("",!0):(v(),o(B,{key:0,styles:{width:"320rpx",height:"320rpx"}})),_(U,{showShareCard:aa.value,"onUpdate:showShareCard":e[1]||(e[1]=a=>aa.value=a),currentData:Z.value},null,8,["showShareCard","currentData"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-2d8c6efd"]]);export{q as default};
