import{Y as a,e,E as t,Q as l,r as s,f as o,j as c,c as u,w as r,a5 as i,a6 as d,q as n,y as p,o as m,z as f,a as _,i as g,D as v,F as y,J as h,b as x,t as b,d as k,B as j,A as w,C,ae as z,aa as I,L as S,_ as D}from"./index-BKzbZvRR.js";import{_ as P}from"./tig-image.DrOwWlV9.js";import{_ as V}from"./format-price.kSnuguuz.js";import{_ as A,a as J}from"./uni-swipe-action.DXHhbVv2.js";import{_ as N}from"./loading-box.C4egri0r.js";import{_ as $}from"./tig-layout.BpNdXByQ.js";const q=D(e({__name:"index",setup(e){const{t:D}=t(),q=l({page:1,size:10,keyword:""}),B=s(0),E=s(!1),F=s(!1),L=s([]),M=async()=>{q.page>1?E.value=!0:i({title:D("加载中")});try{const t=await(e={...q},a({url:"user/collectProduct/list",method:"get",params:e}));B.value=t.total,L.value=[...L.value,...t.records]}catch(t){console.error(t)}finally{d(),E.value=!1,F.value=!0}var e},Q=async e=>{try{await(t={id:e},a({url:"user/collectProduct/cancel",method:"post",data:t})),S({title:D("取消收藏成功"),icon:"none"}),q.page=1,L.value=[],M()}catch(l){S({title:l.message,icon:"none",duration:1e3})}var t};return o((()=>{M()})),c((()=>{q.page<Math.ceil(B.value/q.size)&&(q.page++,M())})),(a,e)=>{const t=n(p("tig-image"),P),l=g,s=n(p("format-price"),V),o=k,c=n(p("uni-swipe-action-item"),A),i=n(p("uni-swipe-action"),J),d=j,S=n(p("loading-box"),N),B=n(p("tig-layout"),$);return m(),u(B,{title:"商品收藏"},{default:r((()=>[L.value.length>0?(m(),u(l,{key:0,class:"collect-product"},{default:r((()=>[_(i,null,{default:r((()=>[(m(!0),v(y,null,h(L.value,(e=>(m(),u(l,{key:e.productId,class:"move-item"},{default:r((()=>[_(c,{threshold:0,autoClose:""},{right:r((()=>[_(l,{class:"collect-move-box"},{default:r((()=>[_(l,{class:"btn-del",onClick:a=>{return t=e.productId,void I({title:D("提示"),content:D("确定取消收藏吗？"),success:async a=>{a.confirm&&Q(t)}});var t}},{default:r((()=>[_(o,null,{default:r((()=>[x(b(a.$t("取消收藏")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),default:r((()=>[_(l,{class:"collect-product-item",onClick:a=>{return t=e.productId,void z({url:"/pages/product/index?id="+t});var t}},{default:r((()=>[_(l,{class:"collect-product-item-left"},{default:r((()=>[_(l,{class:"img-box"},{default:r((()=>[_(t,{src:e.picThumb},null,8,["src"])])),_:2},1024)])),_:2},1024),_(l,{class:"collect-product-item-right"},{default:r((()=>[_(l,{class:"title"},{default:r((()=>[x(b(e.productName),1)])),_:2},1024),_(l,{class:"item-bottom"},{default:r((()=>[_(l,{class:"price"},{default:r((()=>[_(s,{decimalsStyle:{fontSize:"25rpx"},currencyStyle:{fontSize:"23rpx"},priceData:e.productPrice},null,8,["priceData"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):f("",!0),0===L.value.length&&!0===F.value?(m(),u(l,{key:1,class:"empty-box"},{default:r((()=>[_(l,{class:"pictrue"},{default:r((()=>[_(d,{src:w(C)("common/data_empty.png")},null,8,["src"])])),_:1}),_(l,{class:"txt"},{default:r((()=>[x(b(a.$t("暂无收藏记录！")),1)])),_:1})])),_:1})):f("",!0),_(S,{modelValue:E.value,"onUpdate:modelValue":e[0]||(e[0]=a=>E.value=a),page:q.page,length:L.value.length},null,8,["modelValue","page","length"])])),_:1})}}}),[["__scopeId","data-v-150f72ee"]]);export{q as default};
