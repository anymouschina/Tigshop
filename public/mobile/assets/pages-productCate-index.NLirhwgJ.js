import{_ as e,b as a}from"./tig-layout.DMoUsUKf.js";import{Y as t,e as l,Z as c,r as s,v as o,z as r,c as u,o as n,i,w as d,a as _,A as p,J as y,d as m,b as f,t as g,E as v,T as h,K as C,F as b,$ as k,M as w,_ as x,a0 as I,a1 as S,S as j,G as $,R as U,P as M,a2 as L,Q as z,y as B,B as D,D as N,a3 as R,a4 as T,u as A,a5 as E,g as F}from"./index-BKXBH4vI.js";import{_ as K}from"./tig-image.BbZoJ9nS.js";import{n as V}from"./index.xrDesKlL.js";import{m as G}from"./masonry.9uAp5d6k.js";import{g as H}from"./home.DZ4q0OJm.js";import{u as P}from"./useList.D_gHwM0_.js";import{_ as W}from"./format-price.0qAAshfo.js";import{s as J}from"./specification.CVGl6USd.js";import"./activityCard.75t95NbP.js";import"./product.BhwveQst.js";import"./uni-icons.C94_g2wt.js";import"./uni-number-box.B4MZlCkq.js";const O=e=>t({url:"category/category/list?id="+e,method:"get"}),Q=x(l({__name:"styleOneCate",props:{cat_id:{type:Number,default:0},cat_idModifiers:{}},emits:["update:cat_id"],setup(a){const l=c(a,"cat_id"),x=s([]),I={navbar:"1",return:"0",title:"产品分类"},S=s([]),j=s([]),$=s(!1),U=s(!0),M=s(0),L=()=>{w({url:"/pages/search/index"})},z=(e,a)=>{l.value=e,a&&(S.value=a.children)};return(async()=>{$.value=!0;try{const e=await t({url:"category/category/all",method:"get"});x.value=e.category_tree||[]}catch(e){}})(),(async()=>{try{const e=await t({url:"category/category/hot",method:"get"});j.value=e.category||[],U.value=!1}catch(e){}})(),(a,t)=>{const c=i,s=m,w=o(r("tig-image"),K),B=k,D=o(r("tig-layout"),e);return n(),u(c,null,{default:d((()=>[_(D,null,{default:d((()=>[_(V,{parameter:I}),U.value||!$.value?(n(),u(c,{key:0,class:"page-loading"},{default:d((()=>[_(c,{class:"ico"})])),_:1})):p("",!0),$.value?(n(),u(c,{key:1,class:"pageMain"},{default:d((()=>[0==M.value?(n(),u(c,{key:0,class:"productSort"},{default:d((()=>[_(c,{class:"header acea-row row-center-wrapper"},{default:d((()=>[_(c,{onClick:y(L,["stop"]),class:"acea-row row-between-wrapper input"},{default:d((()=>[_(s,{class:"iconfont-h5 icon-sousuo"}),_(c,{class:"txt"},{default:d((()=>[f(g(a.$t("点击搜索商品信息")),1)])),_:1})])),_:1})])),_:1}),_(c,{class:"aside"},{default:d((()=>[_(c,{class:h("item acea-row row-center-wrapper "+(0==l.value?"on":"")),onClick:t[0]||(t[0]=e=>z(0))},{default:d((()=>[_(s,null,{default:d((()=>[f(g(a.$t("推荐")),1)])),_:1})])),_:1},8,["class"]),(n(!0),v(b,null,C(x.value,((e,a)=>(n(),u(c,{key:a,class:h("item acea-row row-center-wrapper "+(l.value==e.category_id?"on":"")),"data-cat_id":e.category_id,onClick:a=>z(e.category_id,e)},{default:d((()=>[e.cat_short_name?(n(),u(s,{key:0},{default:d((()=>[f(g(e.cat_short_name),1)])),_:2},1024)):(n(),u(s,{key:1},{default:d((()=>[f(g(e.category_name),1)])),_:2},1024))])),_:2},1032,["class","data-cat_id","onClick"])))),128))])),_:1}),_(c,{class:"conter"},{default:d((()=>[U.value?p("",!0):(n(),v(b,{key:0},[0==l.value?(n(),u(c,{key:0,class:"listw"},{default:d((()=>[_(c,{class:"title acea-row row-center-wrapper"},{default:d((()=>[_(c,{class:"name"},{default:d((()=>[f(g(a.$t("热门分类")),1)])),_:1})])),_:1}),_(c,{class:"list acea-row"},{default:d((()=>[(n(!0),v(b,null,C(j.value,((e,a)=>(n(),u(B,{key:a,"hover-class":"none",url:"/pages/search/result?category_id="+e.category_id,class:"item acea-row row-column row-middle"},{default:d((()=>[_(c,{class:"picture"},{default:d((()=>[_(w,{src:e.category_pic,"onUpdate:src":a=>e.category_pic=a,mode:"aspectFill"},null,8,["src","onUpdate:src"])])),_:2},1024),_(c,{class:"name line1"},{default:d((()=>[f(g(e.category_name),1)])),_:2},1024)])),_:2},1032,["url"])))),128))])),_:1})])),_:1})):p("",!0),l.value>0?(n(!0),v(b,{key:1},C(S.value,((e,a)=>(n(),u(c,{class:"listw",key:a,id:"b"+a},{default:d((()=>[_(c,{class:"title acea-row row-center-wrapper"},{default:d((()=>[_(B,{"hover-class":"none",url:"/pages/search/result?category_id="+e.category_id,class:"item acea-row row-column row-middle"},{default:d((()=>[_(c,{class:"name"},{default:d((()=>[f(g(e.category_name),1)])),_:2},1024)])),_:2},1032,["url"])])),_:2},1024),_(c,{class:"list acea-row"},{default:d((()=>[(n(!0),v(b,null,C(e.children,((e,a)=>(n(),u(B,{key:a,"hover-class":"none",url:"/pages/search/result?category_id="+e.category_id,class:"item acea-row row-column row-middle"},{default:d((()=>[e.category_pic?(n(),u(c,{key:0,class:"picture"},{default:d((()=>[_(w,{src:e.category_pic,"onUpdate:src":a=>e.category_pic=a},null,8,["src","onUpdate:src"])])),_:2},1024)):p("",!0),_(c,{class:"name line1"},{default:d((()=>[f(g(e.category_name),1)])),_:2},1024)])),_:2},1032,["url"])))),128))])),_:2},1024)])),_:2},1032,["id"])))),128)):p("",!0)],64))])),_:1})])),_:1})):p("",!0)])),_:1})):p("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-c9ca857b"]]),Y=x(l({__name:"search",props:{placeholder:{type:String,default:"搜索商品"},needMenu:{type:Boolean,default:!1}},emits:["menu","search"],setup:(e,{emit:a})=>(a,t)=>{const l=m,c=i;return n(),u(c,{class:"search-box"},{default:d((()=>[e.needMenu?(n(),u(c,{key:0,class:"btn-box",onClick:t[0]||(t[0]=e=>a.$emit("menu"))},{default:d((()=>[_(l,{class:"iconfont-h5 icon-shouye"})])),_:1})):p("",!0),_(c,{class:"search-content",onClick:t[1]||(t[1]=e=>a.$emit("search"))},{default:d((()=>[_(l,{class:"iconfont-h5 icon-sousuo1"}),_(l,{class:"placeholder-text"},{default:d((()=>[f(g(a.$t(e.placeholder)),1)])),_:1})])),_:1})])),_:1})}}),[["__scopeId","data-v-9ce25180"]]),Z=x(l({__name:"menu",props:{currentCateId:{},currentCateIdModifiers:{}},emits:I(["change"],["update:currentCateId"]),setup(e,{emit:a}){const t=c(e,"currentCateId"),l=a,s=S([]);(async()=>{try{const e=await O(0);s.value=e.category_tree,t.value=e.category_tree[0].category_id}catch(e){}})();return(e,a)=>{const c=i,o=j;return n(),u(c,{class:"menu-content"},{default:d((()=>[_(o,{"scroll-y":"true",class:"menu-scroll"},{default:d((()=>[(n(!0),v(b,null,C(s.value,((e,a)=>(n(),u(c,{key:e.category_id,class:h(["menu-item",{active:t.value===e.category_id}]),onClick:a=>{var c;(c=e.category_id)!==t.value&&(t.value=c,l("change",c))}},{default:d((()=>[f(g(e.category_name),1)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1})}}}),[["__scopeId","data-v-b1ef62b8"]]),q=x(l({__name:"selectCate",props:I({currentCateId:{type:Number},type:{type:String,default:""}},{subCurrentCateId:{default:0},subCurrentCateIdModifiers:{}}),emits:I(["change"],["update:subCurrentCateId"]),setup(e,{emit:t}){const{t:l}=$(),y=e,k=t,w=c(e,"subCurrentCateId"),x=s(0),I=S([]),L=e=>{e!==w.value&&(w.value=e,k("change"))},z=e=>{x.value=e.detail.scrollLeft},B=()=>{I.value.length&&(N.value=!0)},D=U((()=>{var e;return null==(e=I.value.find((e=>e.category_id===w.value)))?void 0:e.category_name}));M((()=>y.currentCateId),(async e=>{e&&e>0&&await(async e=>{try{const a=await O(e);I.value=[{category_id:0,category_name:l("全部商品")},...a.category_tree],k("change"),x.value=0}catch(a){}})(e)}));const N=s(!1);return(t,l)=>{const c=i,s=j,y=m,k=o(r("tig-popup"),a);return n(),u(c,{class:h(["cate-box",{main:"main"===e.type}])},{default:d((()=>[_(s,{"scroll-x":!0,class:"cate-scroll","scroll-with-animation":!0,"scroll-left":x.value,onScroll:z},{default:d((()=>[(n(!0),v(b,null,C(I.value,(a=>(n(),v(b,{key:a.category_id},[a.category_name?(n(),u(c,{key:0,class:"cate-item",onClick:e=>L(a.category_id)},{default:d((()=>[_(c,{class:h(["item-text",{active:a.category_id===w.value,main:"main"===e.type}])},{default:d((()=>[f(g(a.category_name),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])):p("",!0)],64)))),128))])),_:1},8,["scroll-left"]),_(c,{class:"cate-btn",onClick:B},{default:d((()=>[_(y,{class:h(["iconfont-h5 icon-xiajiantou",{"icon-xiajiantou1-copy":"main"===e.type}])},null,8,["class"])])),_:1}),_(k,{show:N.value,"onUpdate:show":l[1]||(l[1]=e=>N.value=e),position:"top",zIndex:999,showClose:!1,backgroundColor:"#fff"},{default:d((()=>[_(c,{class:"cate-popup"},{default:d((()=>[_(c,{class:"cate-popup-title"},{default:d((()=>[f(g(D.value),1)])),_:1}),_(c,{class:"cate-popup-list-box"},{default:d((()=>[_(c,{class:"cate-popup-list"},{default:d((()=>[(n(!0),v(b,null,C(I.value,(a=>(n(),u(c,{key:a.category_id,class:"list-item popup-item",onClick:e=>L(a.category_id)},{default:d((()=>[_(c,{class:h(["item-text popup-text line1",{active:a.category_id===w.value,main:"main"===e.type}])},{default:d((()=>[f(g(a.category_name),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),_(c,{class:"cate-popup-close",onClick:l[0]||(l[0]=e=>N.value=!1)},{default:d((()=>[f(g(t.$t("点击收起")),1),_(y,{class:"iconfont-h5 icon-xiajiantou1-copy"})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1},8,["class"])}}}),[["__scopeId","data-v-36d6156e"]]),X=x(l({__name:"styleTwoCate",props:{height:{type:[Number,String],default:0}},setup(e){L((e=>({"39545ca8":x.value})));const a=s(0),t=s(0),l=e,c=z({category_id:0,page:1,size:10}),{data:y,getList:m,reachBottom:f,isLoading:g,total:v}=P(H,{params:c,path:{dataKey:"filter_result"},needReachBottom:!1}),h=()=>{y.value=[],c.page=1,0===t.value?c.category_id=a.value:c.category_id=t.value,m()},C=()=>{t.value=0,y.value=[],c.page=1},b=()=>{R({url:"/pages/index/index",success:function(){}})},k=()=>{R({url:"/pages/search/index"})},w={navbar:"1",return:"0",title:"产品分类"},x=U((()=>`calc(${l.height} - 90rpx)`));return(e,l)=>{const c=i,s=j,m=o(r("up-empty"),B);return n(),u(c,null,{default:d((()=>[_(V,{parameter:w}),_(Y,{needMenu:!0,onMenu:b,onSearch:k}),_(c,{class:"scroll-box"},{default:d((()=>[_(c,{class:"content-box"},{default:d((()=>[_(c,{class:"side"},{default:d((()=>[_(Z,{currentCateId:a.value,"onUpdate:currentCateId":l[0]||(l[0]=e=>a.value=e),onChange:C},null,8,["currentCateId"])])),_:1}),_(c,{class:"list-box"},{default:d((()=>[_(q,{onChange:h,subCurrentCateId:t.value,"onUpdate:subCurrentCateId":l[1]||(l[1]=e=>t.value=e),currentCateId:a.value},null,8,["subCurrentCateId","currentCateId"]),_(c,{class:"list-content"},{default:d((()=>[!D(g)&&D(v)>0?(n(),u(s,{key:0,"scroll-y":!0,class:"list-scroll",onScrolltolower:D(f)},{default:d((()=>[_(G,{commodityList:D(y)},null,8,["commodityList"])])),_:1},8,["onScrolltolower"])):p("",!0),D(g)||0!==D(v)?p("",!0):(n(),u(c,{key:1,class:"empty-box"},{default:d((()=>[_(m,{icon:D(N)("salesman/no_order.png"),text:e.$t("暂无数据")},null,8,["icon","text"])])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-722ff64d"]]),ee=x(l({__name:"styleThreeCate",props:{height:{type:[Number,String],default:0}},setup(e){L((e=>({"7f3138ae":ee.value})));const a=s(0),t=s(0),l=e,c=z({category_id:0,page:1,size:10}),{data:y,getList:h,reachBottom:k,isLoading:w,total:x}=P(H,{params:c,path:{dataKey:"filter_result"},needReachBottom:!1}),I=()=>{y.value=[],c.page=1,0===t.value?c.category_id=a.value:c.category_id=t.value,h()},S=()=>{t.value=0,y.value=[],c.page=1},$=()=>{R({url:"/pages/index/index"})},M=()=>{R({url:"/pages/search/index"})},A=e=>{R({url:`/pages/productDetail/index?id=${e}`})},E=s(0),F=s(),G=s({}),O=()=>{F.value.handleShowPopup(),G.value.is_check=!1},Q=()=>{E.value=0},X={navbar:"1",return:"0",title:"产品分类"},ee=U((()=>`calc(${l.height} - 90rpx)`));return(e,l)=>{const c=i,s=o(r("tig-image"),K),h=o(r("format-price"),W),U=o(r("up-loading-icon"),T),L=m,z=j,R=o(r("up-empty"),B);return n(),u(c,null,{default:d((()=>[_(V,{parameter:X}),_(Y,{needMenu:!0,onMenu:$,onSearch:M}),_(c,{class:"scroll-box"},{default:d((()=>[_(c,{class:"content-box"},{default:d((()=>[_(c,{class:"side"},{default:d((()=>[_(Z,{currentCateId:a.value,"onUpdate:currentCateId":l[0]||(l[0]=e=>a.value=e),onChange:S},null,8,["currentCateId"])])),_:1}),_(c,{class:"list-box"},{default:d((()=>[_(q,{type:"main",onChange:I,subCurrentCateId:t.value,"onUpdate:subCurrentCateId":l[1]||(l[1]=e=>t.value=e),currentCateId:a.value},null,8,["subCurrentCateId","currentCateId"]),_(c,{class:"list-content"},{default:d((()=>[!D(w)&&D(x)>0?(n(),u(z,{key:0,"scroll-y":!0,class:"list-scroll",onScrolltolower:D(k)},{default:d((()=>[_(c,{class:"product-list"},{default:d((()=>[(n(!0),v(b,null,C(D(y),(a=>(n(),u(c,{class:"product-item",key:a.product_id},{default:d((()=>[_(c,{class:"item-left",onClick:e=>A(a.product_id)},{default:d((()=>[_(s,{src:a.pic_thumb,"onUpdate:src":e=>a.pic_thumb=e},null,8,["src","onUpdate:src"]),_(c,{class:"product-status-box"},{default:d((()=>[0==a.product_stock||0==a.product_status?(n(),u(c,{key:0,class:"outsale"},{default:d((()=>[f(g(e.$t(0==a.product_stock?"已售罄":"已下架")),1)])),_:2},1024)):p("",!0)])),_:2},1024)])),_:2},1032,["onClick"]),_(c,{class:"item-right"},{default:d((()=>[_(c,{class:"item-right-title line2",onClick:e=>A(a.product_id)},{default:d((()=>[f(g(a.product_name),1)])),_:2},1032,["onClick"]),_(c,{class:"item-right-price"},{default:d((()=>[_(h,{decimalsStyle:{fontSize:"24rpx",fontWeight:"bold"},currencyStyle:{fontSize:"23rpx",fontWeight:"bold"},fontStyle:{fontSize:"32rpx"},priceData:a.product_price},null,8,["priceData"])])),_:2},1024),_(c,{class:"buy_icon"},{default:d((()=>[_(c,{class:"buy_btn",onClick:e=>(e=>{e.is_check||(E.value=e.product_id,e.is_check=!0,G.value=e)})(a)},{default:d((()=>[a.is_check?(n(),u(U,{key:0,mode:"circle"})):(n(),u(L,{key:1,class:"iconfont-h5 icon-gouwuche3 buy_btn_icon"}))])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["onScrolltolower"])):p("",!0),D(w)||0!==D(x)?p("",!0):(n(),u(c,{key:1,class:"empty-box"},{default:d((()=>[_(R,{icon:D(N)("salesman/no_order.png"),text:e.$t("暂无数据")},null,8,["icon","text"])])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1}),_(J,{ref_key:"specificationRef",ref:F,modelValue:E.value,"onUpdate:modelValue":l[2]||(l[2]=e=>E.value=e),onAddCardSucceed:l[3]||(l[3]=()=>{}),onLoadEnd:O,onClose:Q},null,8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-fe8c68ee"]]),ae=x(l({__name:"index",setup(a){const t=A(),l=E(),c=s(0);F((e=>{e&&e.category_id&&(c.value=e.category_id)}));const y=U((()=>`calc(${t.windowInfo.screenHeight}px - var(${l.showTabbar?"--tabbar-height":"--safe-bottom"}) - var(--nav-height))`));return(a,l)=>{const s=o(r("tig-layout"),e),m=i;return n(),u(m,null,{default:d((()=>[_(s,null,{default:d((()=>[1===D(t).category_decorate_type?(n(),u(Q,{key:0,cat_id:c.value,"onUpdate:cat_id":l[0]||(l[0]=e=>c.value=e)},null,8,["cat_id"])):p("",!0),2===D(t).category_decorate_type?(n(),u(X,{key:1,height:y.value},null,8,["height"])):p("",!0),3===D(t).category_decorate_type?(n(),u(ee,{key:2,height:y.value},null,8,["height"])):p("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-8b806592"]]);export{ae as default};
