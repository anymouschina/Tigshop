import{e as a,E as e,Q as t,r as l,f as s,c as i,w as o,q as r,y as n,aT as c,o as u,a as d,i as p,z as m,D as y,F as f,J as g,A as _,d as v,H as k,b as h,t as x,$ as b,T as S,X as C,aa as D,L as w,N as $,P as I,ae as A,_ as T}from"./index-BKzbZvRR.js";import{_ as j}from"./tig-image.DrOwWlV9.js";import{_ as V}from"./format-price.kSnuguuz.js";import{_ as L,a as N}from"./tig-layout.BpNdXByQ.js";import{_ as P}from"./loading-box.C4egri0r.js";import{_ as q}from"./tig-loadingpage.vue_vue_type_script_setup_true_lang.De24EPaU.js";import{_ as z}from"./empty-box.vue_vue_type_script_setup_true_lang.CeENwGmf.js";import{b as R,c as U,d as B,o as G,e as J}from"./order.BKDxR0lS.js";import{u as M}from"./useList.qLYpICh7.js";import"./product.BqL6tr7k.js";const O=T(a({__name:"list",setup(a){const{t:T}=e(),O=t([{type:"all",value:T("全部订单"),badge:{value:0}},{type:"awaitPay",value:T("待支付"),badge:{value:0}},{type:"awaitShipping",value:T("待发货"),badge:{value:0}},{type:"awaitReceived",value:T("待收货"),badge:{value:0}},{type:"awaitComment",value:T("待评价"),badge:{value:0}}]),E=l("all"),F=t({page:1,size:10,orderStatus:-1,commentStatus:-1}),H=l(0),K=a=>{E.value!==a.type&&(E.value=a.type,F.page=1,X.value=[],"awaitComment"===a.type?(F.commentStatus=0,F.orderStatus=-1):(F.orderStatus=aa(a.type),F.commentStatus=-1),Q())},{getList:Q,data:X,isLoadMore:Y,isLoading:W,total:Z}=M(R,{params:F,path:{dataKey:"records"}}),aa=a=>{switch(a){case"all":default:return-1;case"awaitPay":return 0;case"awaitShipping":return 1;case"awaitReceived":return 2}};return s((a=>{a&&a.type&&(H.value=O.findIndex((e=>e.type===a.type)),"awaitComment"===a.type?F.commentStatus=0:F.orderStatus=aa(a.type),E.value=a.type),Q()})),(a,e)=>{const t=r(n("up-tabs"),c),l=p,s=v,R=r(n("tig-image"),j),M=r(n("format-price"),V),E=b,aa=r(n("tig-button"),N),ea=r(n("loading-box"),P),ta=r(n("tig-loadingpage"),q),la=r(n("tig-layout"),L);return u(),i(la,{title:"我的订单"},{default:o((()=>[d(l,{class:"order"},{default:o((()=>[d(l,{class:"order-menu badgecolor"},{default:o((()=>[d(t,{lineColor:"var(--general)",list:O,activeStyle:{padding:"0 10rpx"},inactiveStyle:{padding:"0 10rpx"},scrollable:!0,onChange:K,keyName:"value",current:H.value,"onUpdate:current":e[0]||(e[0]=a=>H.value=a)},null,8,["list","current"])])),_:1}),d(l,{class:"placeholder"}),d(l,{class:"order-list"},{default:o((()=>[(u(!0),y(f,null,g(_(X),(e=>(u(),i(l,{key:e.orderId,class:"order-list-item"},{default:o((()=>[d(l,{class:"order-list-item-header"},{default:o((()=>[e.shop?(u(),i(s,{key:0,class:"special-text",onClick:k((a=>{var t,l;return l=null==(t=e.shop)?void 0:t.shopId,void I({url:`/pages/shop/index?shopId=${l}`})}),["stop"])},{default:o((()=>{var a;return[d(s,{class:"iconfont icon-dianpu"}),h(" "+x(null==(a=e.shop)?void 0:a.shopTitle)+" ",1),d(s,{class:"iconfont icon-xiangyou"})]})),_:2},1032,["onClick"])):(u(),i(s,{key:1,class:"order-special-text"},{default:o((()=>[h(x(a.$t("订单编号"))+"：",1),d(s,{class:"special-color"},{default:o((()=>[h(x(e.orderSn),1)])),_:2},1024)])),_:2},1024)),d(s,null,{default:o((()=>[h(x(e.orderStatusName),1)])),_:2},1024)])),_:2},1024),d(l,{class:"order-list-item-content"},{default:o((()=>[d(l,{class:"item-content-text"},{default:o((()=>[d(l,null,{default:o((()=>[h(x(a.$t("收件人"))+"："+x(e.consignee),1)])),_:2},1024),d(l,{class:"special-color"},{default:o((()=>[h(x(e.addTime),1)])),_:2},1024)])),_:2},1024),d(l,{class:"item-content-product"},{default:o((()=>[(u(!0),y(f,null,g(e.items,(e=>(u(),i(E,{key:e.itemId,url:"/pages/user/order/info?id="+e.orderId,"hover-class":"navigator-hover"},{default:o((()=>[d(l,{class:"item-content-product-item"},{default:o((()=>[d(l,{class:"item-content-product-img"},{default:o((()=>[d(R,{src:e.picThumb},null,8,["src"]),1===e.isGift?(u(),i(l,{key:0,class:"gift-text"},{default:o((()=>[h(x(a.$t("赠品")),1)])),_:1})):m("",!0)])),_:2},1024),d(l,{class:"item-content-product-info"},{default:o((()=>[d(l,{class:"product-item-title"},{default:o((()=>[h(x(e.productName),1)])),_:2},1024),d(l,{class:S(["sku-card",{nodata:!e.skuData||0===e.skuData.length}])},{default:o((()=>[e.skuData&&e.skuData.length>0?(u(!0),y(f,{key:0},g(e.skuData,((a,e)=>(u(),i(l,{key:e,class:"sku-item line1"},{default:o((()=>[h(x(a.value),1)])),_:2},1024)))),128)):m("",!0)])),_:2},1032,["class"]),e.extraSkuData&&e.extraSkuData.length?(u(),i(l,{key:0,class:"extraskudata-box"},{default:o((()=>[d(l,{class:"extraskudata"},{default:o((()=>[(u(!0),y(f,null,g(e.extraSkuData,(a=>(u(),i(l,{key:a,class:"extraskudata-item"},{default:o((()=>[d(l,{class:"title"},{default:o((()=>[h(x(a.attrName),1)])),_:2},1024),d(l,{class:"line-box"},{default:o((()=>[d(l,{class:"line"})])),_:1}),d(l,{class:"content"},{default:o((()=>[d(s,{class:"line1 content-text"},{default:o((()=>[h(x(a.attrValue),1)])),_:2},1024),d(M,{showText:!1,class:"price",priceData:a.attrPrice},null,8,["priceData"]),d(l,{class:"num"},{default:o((()=>[h("x"+x(e.quantity),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):m("",!0),d(l,{class:"product-item-price"},{default:o((()=>[d(M,{showText:!1,class:"product-item-pricenum",decimalsStyle:{fontSize:"25rpx"},currencyStyle:{fontSize:"23rpx"},priceData:e.price},null,8,["priceData"]),d(l,{class:"product-item-quantity"},{default:o((()=>[h("x "+x(e.quantity),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"])))),128))])),_:2},1024),d(l,{class:"item-content-pay"},{default:o((()=>[d(l,{class:"item-content-pay-box"},{default:o((()=>[d(l,{class:"pay-item pay-type"},{default:o((()=>[h(x(1===e.payTypeId?a.$t("在线支付"):2===e.payTypeId?a.$t("货到付款"):_(T)("线下支付")),1)])),_:2},1024),d(l,{class:"pay-item total-money"},{default:o((()=>[h(x(a.$t("总额"))+"：",1),d(M,{showText:!1,isBottom:!1,priceData:e.totalAmount},null,8,["priceData"])])),_:2},1024),0===e.orderStatus&&Number(e.unpaidAmount)>0?(u(),i(l,{key:0,class:"pay-item"},{default:o((()=>[h(x(a.$t("应付"))+"：",1),d(M,{showText:!1,isBottom:!1,priceData:e.unpaidAmount},null,8,["priceData"])])),_:2},1024)):m("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),d(l,{class:"order-list-item-btn"},{default:o((()=>[d(l,{class:"autodeliverydays"},{default:o((()=>[e.autoDeliveryDays?(u(),i(l,{key:0,class:"autodeliverydays-text line1"},{default:o((()=>[h("订单将在"+x(e.autoDeliveryDays)+"天后自动收货",1)])),_:2},1024)):m("",!0)])),_:2},1024),d(l,{class:"item-btn-box"},{default:o((()=>[d(aa,{class:"btn-margin",customStyle:{height:"55rpx"},plain:!0,plainMainColor:!0,onClick:a=>{return t=e.orderId,void I({url:`/pages/user/order/info?id=${t}`});var t}},{default:o((()=>[h(x(a.$t("订单详情")),1)])),_:2},1032,["onClick"]),e.availableActions.toPay?(u(),i(aa,{key:0,class:"btn-margin",color:"#333",customStyle:{height:"55rpx"},plain:!0,onClick:a=>{return t=e.orderId,void I({url:`/pages/order/pay?orderId=${t}`});var t}},{default:o((()=>[h(x(a.$t("去付款")),1)])),_:2},1032,["onClick"])):m("",!0),e.availableActions.cancelOrder?(u(),i(aa,{key:1,color:"#333",class:"btn-margin",customStyle:{height:"55rpx"},plain:!0,onClick:a=>(async a=>{D({title:T("提示"),content:T("确认要取消该订单吗？"),success:async e=>{if(e.confirm)try{await U({id:a}),F.page=1,X.value=[],Q()}catch(t){w({title:t.message,icon:"none"})}}})})(e.orderId)},{default:o((()=>[h(x(a.$t("取消订单")),1)])),_:2},1032,["onClick"])):m("",!0),e.availableActions.delOrder?(u(),i(aa,{key:2,color:"#333",class:"btn-margin",customStyle:{height:"55rpx"},plain:!0,onClick:a=>(async a=>{D({title:T("提示"),content:T("确认要删除该订单吗？"),success:async e=>{if(e.confirm)try{await B({id:a}),F.page=1,X.value=[],Q()}catch(t){w({title:t.message,icon:"none"})}}})})(e.orderId)},{default:o((()=>[h(x(a.$t("删除订单")),1)])),_:2},1032,["onClick"])):m("",!0),e.availableActions.rebuy?(u(),i(aa,{key:3,color:"#333",class:"btn-margin",customStyle:{height:"55rpx"},plain:!0,onClick:a=>(async a=>{try{await G({id:a}),$({url:"/pages/cart/index"})}catch(e){w({title:e.message,icon:"none"})}})(e.orderId)},{default:o((()=>[h(x(a.$t("再次购买")),1)])),_:2},1032,["onClick"])):m("",!0),e.availableActions.toComment?(u(),i(aa,{key:4,color:"#333",class:"btn-margin",customStyle:{height:"55rpx"},plain:!0,onClick:a=>{return t=e.orderId,void I({url:`/pages/user/comment/info?id=${t}`});var t}},{default:o((()=>[h(x(a.$t("去评价")),1)])),_:2},1032,["onClick"])):m("",!0),e.availableActions.confirmReceipt?(u(),i(aa,{key:5,color:"#333",class:"btn-margin",customStyle:{height:"55rpx"},plain:!0,onClick:a=>{return t=e.orderId,void D({title:T("提示"),content:T("确认收货吗？"),success:async a=>{if(a.confirm)try{await J({id:t}),A({url:"/pages/user/order/list?type=awaitComment"})}catch(e){w({title:e.message,icon:"none"})}}});var t}},{default:o((()=>[h(x(a.$t("确认收货")),1)])),_:2},1032,["onClick"])):m("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),d(ea,{modelValue:_(Y),"onUpdate:modelValue":e[1]||(e[1]=a=>C(Y)?Y.value=a:null),page:F.page,length:_(X).length},null,8,["modelValue","page","length"]),_(W)||0!==_(Z)?m("",!0):(u(),i(z,{key:0,mode:"list",background:"#f5f5f5",text:a.$t("暂无订单")},null,8,["text"]))])),_:1}),d(ta,{modelValue:_(W),"onUpdate:modelValue":e[2]||(e[2]=a=>C(W)?W.value=a:null)},null,8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-6d8cb194"]]);export{O as default};
