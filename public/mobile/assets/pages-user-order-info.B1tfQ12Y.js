import{e,r as a,ar as l,E as t,f as s,a5 as u,a6 as r,R as o,c as i,w as c,q as d,y as n,bS as f,bT as p,o as m,a as v,i as _,D as y,z as h,F as k,d as b,b as g,t as x,T as $,J as I,H as D,af as A,aa as S,L as T,P as C,b1 as w,_ as j}from"./index-BKzbZvRR.js";import{_ as B}from"./uni-steps.B0H3NFeo.js";import{_ as P}from"./uni-icons.DELFdrY8.js";import{_ as F,a as N}from"./tig-layout.BpNdXByQ.js";import{_ as q}from"./tig-image.DrOwWlV9.js";import{_ as z}from"./format-price.kSnuguuz.js";import{_ as O}from"./tig-fixed-placeholder.s9cnCRBL.js";import{_ as R}from"./index.vue_vue_type_script_setup_true_lang.BEg3YZfT.js";import{g as E,f as W,c as G,e as H}from"./order.BKDxR0lS.js";const J=j(e({__name:"info",setup(e){const j=a(null),J=()=>{j.value&&j.value.handleClick()},L=l(),{t:V}=t(),K=a({0:V("您的订单已提交成功，请尽快完成付款哦！"),1:V("感谢您在本店的购物，您的订单已提交成功，我们会尽快为您发货！"),2:V("您的订单已经发货，请注意查收，祝您购物愉快！"),3:V('您的订单已被取消，您可以通过"再次购买"，重新购买订单中的商品。'),4:V('您的订单被认定为无效订单，订单已被关闭。您可以通过"再次购买"，重新购买订单中的商品。给您造成的不便请多多谅解！'),5:V("您的订单已经确认收货，感谢您在本店购物，祝您生活愉快！")}),M=a({}),Q=a(!1),U=a();s((e=>{e&&e.id&&(U.value=e.id,X(),ee())}));const X=async()=>{u({title:V("加载中")});try{const e=await E({id:U.value});M.value=e}catch(e){console.error(e)}finally{r()}},Y=a([]),Z=a(""),ee=async()=>{try{const e=await W({id:U.value});e&&(Array.isArray(e)?Y.value=e:Y.value=e.traces??[])}catch(e){console.error(e)}finally{r()}},ae=e=>{C(e?{url:`/pages/user/afterSale/edit?itemId=${e}&orderId=${M.value.orderId}`}:{url:`/pages/user/afterSale/edit?orderId=${M.value.orderId}`})},le=e=>{C({url:`/pages/product/index?id=${e}`})},te=o((()=>M.value.shop&&Object.keys(M.value.shop).length>0?!!(M.value.shop.kefuInlet&&M.value.shop.kefuInlet.length>0&&M.value.shop.kefuInlet.includes(2)):L.serviceConfig.show));return(e,a)=>{const l=d(n("uni-steps"),B),t=_,s=b,u=d(n("up-steps-item"),f),r=d(n("up-steps"),p),o=d(n("uni-icons"),P),E=d(n("tig-button"),N),W=d(n("tig-image"),q),L=d(n("format-price"),z),U=A,ee=d(n("tig-fixed-placeholder"),O),se=d(n("tig-layout"),F);return m(),i(se,{title:"我的订单"},{default:c((()=>[v(t,{class:"order-info"},{default:c((()=>[Object.keys(M.value).length?(m(),y(k,{key:0},[v(t,{class:"order-info-steps"},{default:c((()=>[v(l,{"active-color":"var(--general)",options:M.value.stepStatus.steps,active:M.value.stepStatus.current},null,8,["options","active"])])),_:1}),v(t,{class:"order-info-content"},{default:c((()=>[v(t,{class:"order-card card-space"},{default:c((()=>[v(t,{class:"order-card-item flex justify-between"},{default:c((()=>[v(t,{class:"item-left"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("订单编号"))+"：",1)])),_:1}),v(s,null,{default:c((()=>[g(x(M.value.orderSn),1)])),_:1})])),_:1}),v(t,{class:"item-right"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("订单状态"))+"：",1)])),_:1}),v(s,null,{default:c((()=>[g(x(M.value.orderStatusName),1)])),_:1})])),_:1})])),_:1}),v(t,{class:"order-card-item"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("下单时间"))+"：",1)])),_:1}),v(s,null,{default:c((()=>[g(x(M.value.addTime),1)])),_:1})])),_:1}),M.value.autoDeliveryDays?(m(),i(t,{key:0,class:"order-card-item"},{default:c((()=>[g("订单将在"+x(M.value.autoDeliveryDays)+"天后自动收货",1)])),_:1})):(m(),i(t,{key:1,class:"order-card-item"},{default:c((()=>[g(x(K.value[M.value.orderStatus]),1)])),_:1}))])),_:1}),M.value.orderId&&(2===M.value.orderStatus||5===M.value.orderStatus)&&Y.value.length>0?(m(),i(t,{key:0,class:"expressage-card card-space"},{default:c((()=>[v(t,{class:"shippingInfo-title"},{default:c((()=>[g(x(e.$t("快递公司")),1)])),_:1}),Y.value.length>0?(m(),i(t,{key:0,class:"shippingInfo-box"},{default:c((()=>[v(t,{class:$(["shippingInfo-box-content",{dim:!Q.value,"more-height":Q.value}])},{default:c((()=>[v(r,{current:0,dot:"",activeColor:"#39bf3e",direction:"column"},{default:c((()=>[(m(!0),y(k,null,I(Y.value,((e,a)=>(m(),i(u,{key:a,title:e.acceptStation,desc:e.acceptTime},null,8,["title","desc"])))),128))])),_:1})])),_:1},8,["class"]),v(t,{class:"shippingInfo-btn",onClick:a[0]||(a[0]=e=>Q.value=!Q.value)},{default:c((()=>[g(x(Q.value?e.$t("收起"):e.$t("展开")),1),v(o,{class:$(["btn-icon",{rotate:Q.value}]),type:"down",size:"18",color:"#999"},null,8,["class"])])),_:1})])),_:1})):(m(),i(t,{key:1,class:"emptyText"},{default:c((()=>[g(x(Z.value),1)])),_:1}))])),_:1})):h("",!0),v(t,{class:"pay-card card-space"},{default:c((()=>[v(t,{class:"pay-card-item"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("收货信息"))+"：",1)])),_:1}),v(s,{class:"address-text"},{default:c((()=>[g(x(M.value.userAddress+" "+M.value.consignee+" "+M.value.mobile),1)])),_:1})])),_:1}),M.value.shippingTypeName?(m(),i(t,{key:0,class:"pay-card-item"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("配送方式"))+"：",1)])),_:1}),v(s,null,{default:c((()=>[g(x(M.value.shippingTypeName),1)])),_:1})])),_:1})):h("",!0),v(t,{class:"pay-card-item"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("支付方式"))+"：",1)])),_:1}),v(s,null,{default:c((()=>[g(x(1===M.value.payTypeId?e.$t("在线支付"):2===M.value.payTypeId?e.$t("货到付款"):e.$t("线下支付")),1)])),_:1})])),_:1}),te.value?(m(),i(t,{key:1,class:"pay-card-item im-btn"},{default:c((()=>[v(R,{ref_key:"serviceRef",ref:j,phone:M.value.shop&&M.value.shop.kefuPhone?M.value.shop.kefuPhone:"",orderId:M.value.orderId,shopId:M.value.shopId},{default:c((()=>[v(E,{onClick:J,plain:!0,color:"#333",customStyle:{height:"55rpx"}},{default:c((()=>[g(x(e.$t("联系客服")),1)])),_:1})])),_:1},8,["phone","orderId","shopId"])])),_:1})):h("",!0)])),_:1}),v(t,{class:"product-card card-space"},{default:c((()=>[(m(!0),y(k,null,I(M.value.items,(l=>(m(),i(t,{key:l.productId,class:"item-box"},{default:c((()=>[M.value.shop?(m(),i(t,{key:0,class:"shop-info",onClick:a[1]||(a[1]=D((e=>{var a,l;return l=null==(a=M.value.shop)?void 0:a.shopId,void C({url:`/pages/shop/index?shopId=${l}`})}),["stop"]))},{default:c((()=>[v(s,{class:"text"},{default:c((()=>{var e;return[g(x(null==(e=M.value.shop)?void 0:e.shopTitle),1)]})),_:1}),v(s,{class:"iconfont icon-xiangyou"})])),_:1})):h("",!0),v(t,{class:"product-card-item"},{default:c((()=>[v(t,{class:"product-card-item-left",onClick:e=>le(l.productId)},{default:c((()=>[v(t,{class:"left-img"},{default:c((()=>[v(W,{src:l.picThumb},null,8,["src"]),1===l.isGift?(m(),i(t,{key:0,class:"gift-text"},{default:c((()=>[g(x(e.$t("赠品")),1)])),_:1})):h("",!0)])),_:2},1024)])),_:2},1032,["onClick"]),v(t,{class:"product-card-item-right",onClick:e=>le(l.productId)},{default:c((()=>[v(t,{class:"right-title line2"},{default:c((()=>[v(s,null,{default:c((()=>[g(x(l.productName),1)])),_:2},1024)])),_:2},1024),v(t,{class:$(["sku-card",{nodata:!l.skuData||0===l.skuData.length}])},{default:c((()=>[l.skuData&&l.skuData.length>0?(m(!0),y(k,{key:0},I(l.skuData,((e,a)=>(m(),i(t,{key:a,class:"sku-item line1"},{default:c((()=>[g(x(e.value),1)])),_:2},1024)))),128)):h("",!0)])),_:2},1032,["class"]),l.extraSkuData&&l.extraSkuData.length?(m(),i(t,{key:0,class:"extraskudata-box"},{default:c((()=>[v(t,{class:"extraskudata"},{default:c((()=>[(m(!0),y(k,null,I(l.extraSkuData,(e=>(m(),i(t,{key:e,class:"extraskudata-item"},{default:c((()=>[v(t,{class:"title"},{default:c((()=>[g(x(e.attrName),1)])),_:2},1024),v(t,{class:"line-box"},{default:c((()=>[v(t,{class:"line"})])),_:1}),v(t,{class:"content"},{default:c((()=>[v(s,{class:"line1 content-text"},{default:c((()=>[g(x(e.attrValue),1)])),_:2},1024),v(L,{showText:!1,class:"price",priceData:e.attrPrice},null,8,["priceData"]),v(t,{class:"num"},{default:c((()=>[g("x"+x(l.quantity),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):h("",!0),v(t,{class:"right-price"},{default:c((()=>[v(L,{showText:!1,class:"right-price-pricenum",decimalsStyle:{fontSize:"23rpx",fontWeight:"bold"},currencyStyle:{fontSize:"21rpx",fontWeight:"bold"},priceData:l.price},null,8,["priceData"]),v(t,{class:"right-price-quantity"},{default:c((()=>[g("x "+x(l.quantity),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),M.value.availableActions.toAftersales||l.aftersalesItem?(m(),i(t,{key:0,class:"item-btn"},{default:c((()=>[M.value.availableActions.toAftersales?(m(),i(E,{key:0,plain:!0,color:"#333",customStyle:{height:"55rpx"},onClick:e=>ae(l.itemId)},{default:c((()=>[g(x(e.$t("申请售后")),1)])),_:2},1032,["onClick"])):h("",!0),l.aftersalesItem?(m(),i(E,{key:1,plain:!0,color:"#333",customStyle:{height:"55rpx"},onClick:e=>{return a=l.aftersalesItem.aftersaleId,void C({url:`/pages/user/afterSale/info?id=${a}`});var a}},{default:c((()=>[g(x(e.$t("售后详情")),1)])),_:2},1032,["onClick"])):h("",!0)])),_:2},1024)):h("",!0)])),_:2},1024),8===M.value.orderType&&l.eCard.length>0?(m(),i(t,{key:1,class:"virtualsample-box"},{default:c((()=>[(m(!0),y(k,null,I(l.eCard,(a=>(m(),i(t,{key:a},{default:c((()=>[v(t,{class:"virtualsample-item"},{default:c((()=>[v(t,{class:"virtualsample-item-con"},{default:c((()=>[v(t,{class:"label"},{default:c((()=>[g(x(e.$t("卡号"))+"：",1)])),_:1}),v(t,{class:"value"},{default:c((()=>[g(x(a.cardNumber),1)])),_:2},1024)])),_:2},1024),v(t,{class:"virtualsample-item-con"},{default:c((()=>[v(t,{class:"label"},{default:c((()=>[g(x(e.$t("卡密"))+"：",1)])),_:1}),v(t,{class:"value"},{default:c((()=>[g(x(a.cardPwd),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),v(t,{class:"virtualsample-btn"},{default:c((()=>[v(t,null,{default:c((()=>[v(E,{onClick:e=>{var l;w(`卡号：${(l=a).cardNumber}  卡密：${l.cardPwd}`,(()=>{T({title:V("复制成功"),icon:"none"})}))},plain:!0,color:"#333",customStyle:{height:"55rpx"}},{default:c((()=>[g(x(e.$t("复制")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)):h("",!0)])),_:2},1024)))),128))])),_:1}),6===M.value.orderType&&M.value.items[0].virtualSample?(m(),i(t,{key:1,class:"virtualsample card-space"},{default:c((()=>[v(t,{class:"virtualsample-label"},{default:c((()=>[g(x(e.$t("虚拟内容"))+"：",1)])),_:1}),v(t,{class:"virtualsample-value"},{default:c((()=>[v(U,{class:"desc-text-item",nodes:M.value.items[0].virtualSample},null,8,["nodes"])])),_:1})])),_:1})):h("",!0),v(t,{class:"money-card card-space"},{default:c((()=>[v(t,{class:"money-card-item"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("商品总价"))+"：",1)])),_:1}),v(L,{showText:!1,isBottom:!1,priceData:M.value.productAmount},null,8,["priceData"])])),_:1}),M.value.serviceFee&&M.value.serviceFee>0?(m(),i(t,{key:0,class:"money-card-item"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("附加费用"))+"：",1)])),_:1}),v(L,{showText:!1,isBottom:!1,priceData:M.value.serviceFee},null,8,["priceData"])])),_:1})):h("",!0),M.value.shippingFee&&M.value.shippingFee>0?(m(),i(t,{key:1,class:"money-card-item"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("运费"))+"：",1)])),_:1}),v(L,{showText:!1,isBottom:!1,priceData:M.value.shippingFee},null,8,["priceData"])])),_:1})):h("",!0),M.value.balance&&M.value.balance>0?(m(),i(t,{key:2,class:"money-card-item"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("使用余额"))+"：",1)])),_:1}),v(L,{showText:!1,isBottom:!1,priceData:M.value.balance},null,8,["priceData"])])),_:1})):h("",!0),M.value.pointsAmount&&M.value.pointsAmount>0?(m(),i(t,{key:3,class:"money-card-item"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("使用积分"))+"：",1)])),_:1}),v(L,{showText:!1,isBottom:!1,priceData:M.value.pointsAmount},null,8,["priceData"])])),_:1})):h("",!0),M.value.couponAmount&&M.value.couponAmount>0?(m(),i(t,{key:4,class:"money-card-item"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("优惠券"))+"：",1)])),_:1}),v(L,{showText:!1,isBottom:!1,priceData:M.value.couponAmount},null,8,["priceData"])])),_:1})):h("",!0),M.value.discountAmount&&M.value.discountAmount>0?(m(),i(t,{key:5,class:"money-card-item"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("其他优惠"))+"：",1)])),_:1}),v(L,{showText:!1,isBottom:!1,priceData:M.value.discountAmount},null,8,["priceData"])])),_:1})):h("",!0),M.value.unpaidAmount&&M.value.unpaidAmount>0?(m(),i(t,{key:6,class:"money-card-item"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("待支付金额"))+"：",1)])),_:1}),v(L,{showText:!1,isBottom:!1,priceData:M.value.unpaidAmount},null,8,["priceData"])])),_:1})):h("",!0),2==M.value.payStatus?(m(),i(t,{key:7,class:"money-card-item"},{default:c((()=>[v(s,{class:"order-item-label"},{default:c((()=>[g(x(e.$t("实付款"))+"：",1)])),_:1}),v(t,{class:"order-item-price"},{default:c((()=>[v(L,{showText:!1,isBottom:!1,priceData:M.value.totalAmount},null,8,["priceData"])])),_:1})])),_:1})):h("",!0)])),_:1})])),_:1}),M.value.availableActions.cancelOrder||M.value.availableActions.toPay||M.value.availableActions.confirmReceipt||M.value.availableActions.toAftersales?(m(),i(ee,{key:0,height:"100rpx",backgroundColor:"#fff"},{default:c((()=>[v(t,{class:"order-info-btn"},{default:c((()=>[v(t,{class:"order-info-btn-box"},{default:c((()=>[M.value.availableActions.cancelOrder?(m(),i(E,{key:0,class:"btn",color:"#333",plain:!0,onClick:a[2]||(a[2]=e=>{return a=M.value.orderId,void S({title:V("提示"),content:V("确认要取消该订单吗？"),success:async e=>{if(e.confirm)try{await G({id:a}),X()}catch(l){T({title:l.message,icon:"none"})}}});var a})},{default:c((()=>[g(x(e.$t("取消订单")),1)])),_:1})):h("",!0),M.value.availableActions.toPay?(m(),i(E,{key:1,class:"btn",color:"#333",plain:!0,onClick:a[3]||(a[3]=e=>{return a=M.value.orderId,void C({url:`/pages/order/pay?orderId=${a}`});var a})},{default:c((()=>[g(x(e.$t("去付款")),1)])),_:1})):h("",!0),M.value.availableActions.confirmReceipt?(m(),i(E,{key:2,color:"#333",class:"btn",plain:!0,onClick:a[4]||(a[4]=e=>{return a=M.value.orderId,void S({title:V("提示"),content:V("确认收货吗？"),success:async e=>{if(e.confirm)try{await H({id:a}),X()}catch(l){T({title:l.message,icon:"none"})}}});var a})},{default:c((()=>[g(x(e.$t("确认已收货")),1)])),_:1})):h("",!0),M.value.availableActions.toAftersales?(m(),i(E,{key:3,color:"#333",class:"btn",plain:!0,onClick:a[5]||(a[5]=e=>ae(null))},{default:c((()=>[g(x(e.$t("整单售后")),1)])),_:1})):h("",!0)])),_:1})])),_:1})])),_:1})):h("",!0)],64)):h("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-363af491"]]);export{J as default};
