import{e as a,G as e,Q as s,g as t,ai as l,r as d,h as i,aj as o,c as n,w as r,i as u,v as c,ak as m,z as p,al as _,o as f,a as g,A as v,E as h,F as y,K as b,B as j,b as x,t as k,am as C,X as V,d as w,ac as L,N as z,M as D,a9 as K,an as M,ao as U,aa as $,_ as B}from"./index-BKXBH4vI.js";import{_ as G,a as I}from"./uni-swipe-action.B2KeTgwu.js";import{_ as R}from"./empty-box.vue_vue_type_script_setup_true_lang.BoUZcl39.js";import{_ as A}from"./loading-box.BnnJRdlH.js";import{a as E,_ as F}from"./tig-layout.DMoUsUKf.js";import{_ as J}from"./tig-fixed-placeholder.BHdfEiP8.js";import{_ as N}from"./tig-loadingpage.vue_vue_type_script_setup_true_lang.Dhxkn5Gn.js";import{n as O}from"./index.xrDesKlL.js";import{g as Q,d as X,s as Y}from"./address.BvACR2GO.js";import{u as Z}from"./useList.D_gHwM0_.js";import"./product.BhwveQst.js";const q=B(a({__name:"list",setup(a){const{t:B}=e(),q=s({navbar:"1",return:"1",title:"添加地址"}),H=s({page:1,size:10}),{getList:P,data:S,isLoadMore:T,isLoading:W}=Z(Q,{params:H,path:{dataKey:"filter_result"},immediate:!0,manageData:a=>{var e;sa.value=null==(e=a.find((a=>1===a.is_selected)))?void 0:e.address_id}});t((()=>{l("refreshData",(()=>{H.page=1,S.value=[],P()}))}));const aa=async a=>{try{const e=await X({id:a});e.message&&z({title:e.message,icon:"none"}),H.page=1,S.value=[],P()}catch(e){}},ea=()=>{D({url:"/pages/address/editRegion"})},sa=d(),ta=a=>{la()},la=async()=>{K({title:B("切换中")});const a=M();try{if(await Y({id:sa.value}),H.page=1,S.value=[],a.length>1){if("pages/order/check"===a[a.length-2].route)return U()}P()}catch(e){z({title:e.message,icon:"none"})}finally{$()}};return i((()=>{o("refreshData")})),(a,e)=>{const s=c(p("up-radio"),m),t=u,l=c(p("uni-swipe-action-item"),G),d=c(p("uni-swipe-action"),I),i=c(p("up-radio-group"),_),o=c(p("empty-box"),R),z=c(p("loading-box"),A),K=w,M=c(p("tig-button"),E),U=c(p("tig-fixed-placeholder"),J),$=c(p("tig-loadingpage"),N),Q=c(p("tig-layout"),F);return f(),n(t,null,{default:r((()=>[g(Q,null,{default:r((()=>[g(O,{parameter:q},null,8,["parameter"]),g(t,{class:"address-list"},{default:r((()=>[g(i,{modelValue:sa.value,"onUpdate:modelValue":e[0]||(e[0]=a=>sa.value=a),placement:"column",onChange:ta},{default:r((()=>[g(d,null,{default:r((()=>[(f(!0),h(y,null,b(j(S),(e=>(f(),n(t,{key:e.address_id,class:"address-item"},{default:r((()=>[g(l,{threshold:0,autoClose:""},{right:r((()=>[g(t,{class:"address-del",onClick:a=>{return s=e.address_id,void L({title:B("提示"),content:B("确定删除吗？"),success:async a=>{a.confirm&&aa(s)}});var s}},{default:r((()=>[x(k(a.$t("删除")),1)])),_:2},1032,["onClick"])])),default:r((()=>[g(t,{class:"address-item-content"},{default:r((()=>[g(t,{class:"address-item-left flex-center"},{default:r((()=>[g(s,{activeColor:"var(--general)",name:e.address_id},null,8,["name"])])),_:2},1024),g(t,{class:"address-item-middle"},{default:r((()=>[g(t,{class:"user-info"},{default:r((()=>[g(t,{class:"name"},{default:r((()=>[x(k(e.consignee),1)])),_:2},1024),g(t,{class:"phone"},{default:r((()=>[x(k(j(C)(e.mobile))+" ",1),1===e.is_default?(f(),n(t,{key:0,class:"tag"},{default:r((()=>[x(k(a.$t("默认")),1)])),_:1})):v("",!0)])),_:2},1024)])),_:2},1024),g(t,{class:"address line1"},{default:r((()=>[x(k(e.region_name)+" "+k(e.address),1)])),_:2},1024)])),_:2},1024),g(t,{class:"address-item-right flex-center",onClick:a=>{return s=e.address_id,void D({url:"/pages/address/editRegion?id="+s});var s}},{default:r((()=>[g(t,{class:"iconfont icon-bianji"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1}),j(T)||j(W)||0!==j(S).length?v("",!0):(f(),n(o,{key:0,mode:"list",text:"暂无地址！"})),g(z,{modelValue:j(T),"onUpdate:modelValue":e[1]||(e[1]=a=>V(T)?T.value=a:null),page:H.page,length:j(S).length},null,8,["modelValue","page","length"]),g(U,{backgroundColor:"#fff"},{default:r((()=>[g(t,{class:"btn-box"},{default:r((()=>[g(M,{class:"btn",onClick:ea},{default:r((()=>[g(K,{class:"iconfont icon-dizhi"}),x(" "+k(a.$t("添加新地址")),1)])),_:1})])),_:1})])),_:1}),g($,{modelValue:j(W),"onUpdate:modelValue":e[2]||(e[2]=a=>V(W)?W.value=a:null)},null,8,["modelValue"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-5323c427"]]);export{q as default};
