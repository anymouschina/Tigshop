import{am as e,an as t,ao as a,m as l,n as o,w as s,aB as c,V as r,C as u,Z as i,d as n,G as d,r as p,k as h,l as m,q as f,y as b,J as _,F as x,x as g,s as v,t as y,v as k,W as S,X as C,M as G,a6 as z,a7 as D,D as $,B as j,I as B,E as V,af as w}from"./index-Ce4FtYLL.js";import{_ as N}from"./tig-image.bUT1hZK2.js";import{_ as U}from"./format-price.C2WNeN1M.js";import{m as I,a as F,e as P,_ as T}from"./tig-layout.nM03J4I_.js";import{_ as q}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as A}from"./save-bottom-box.C22fRRFe.js";import{n as E}from"./index.v2UirNFN.js";import"./u-loading-icon.CaEeBur7.js";import"./u-icon.BDQrrWMI.js";const J=q({name:"u-checkbox-group",mixins:[t,a,{props:{name:{type:String,default:()=>e.checkboxGroup.name},modelValue:{type:Array,default:()=>e.checkboxGroup.value},shape:{type:String,default:()=>e.checkboxGroup.shape},disabled:{type:Boolean,default:()=>e.checkboxGroup.disabled},activeColor:{type:String,default:()=>e.checkboxGroup.activeColor},inactiveColor:{type:String,default:()=>e.checkboxGroup.inactiveColor},size:{type:[String,Number],default:()=>e.checkboxGroup.size},placement:{type:String,default:()=>e.checkboxGroup.placement},labelSize:{type:[String,Number],default:()=>e.checkboxGroup.labelSize},labelColor:{type:[String],default:()=>e.checkboxGroup.labelColor},labelDisabled:{type:Boolean,default:()=>e.checkboxGroup.labelDisabled},iconColor:{type:String,default:()=>e.checkboxGroup.iconColor},iconSize:{type:[String,Number],default:()=>e.checkboxGroup.iconSize},iconPlacement:{type:String,default:()=>e.checkboxGroup.iconPlacement},borderBottom:{type:Boolean,default:()=>e.checkboxGroup.borderBottom}}}],computed:{parentData(){return[this.modelValue,this.disabled,this.inactiveColor,this.activeColor,this.size,this.labelDisabled,this.shape,this.iconSize,this.borderBottom,this.placement]},bemClass(){return this.bem("checkbox-group",["placement"])}},watch:{parentData:{handler(){this.children.length&&this.children.map((e=>{"function"==typeof e.init&&e.init()}))},deep:!0}},data:()=>({}),created(){this.children=[]},emits:["update:modelValue","change"],methods:{unCheckedOther(e){const t=[];this.children.map((e=>{e.isChecked&&t.push(e.name)})),this.$emit("change",t),this.$emit("update:modelValue",t)}}},[["render",function(e,t,a,i,n,d){const p=u;return l(),o(p,{class:r(["u-checkbox-group",d.bemClass])},{default:s((()=>[c(e.$slots,"default",{},void 0,!0)])),_:3},8,["class"])}],["__scopeId","data-v-4665ee80"]]),L=q(n({__name:"index",setup(e){const{t:t}=d(),a={navbar:"1",return:"1",title:"浏览记录",color:!1},c=p(!0),r=p([]),n=p([]),q=p(!1),L=p(!1),M=e=>{e.length==r.value.length?L.value=!0:L.value=!1},O=()=>{L.value?n.value=r.value.map((e=>e.product_id)):n.value=[]},W=async()=>{try{await(e=n.value,i({url:"user/user/del_history_product",method:"post",data:{ids:e}}));G({title:t("删除成功"),icon:"none"}),X()}catch(a){console.error(a)}var e},X=async()=>{z({title:t("加载中")});try{const e=await i({url:"user/user/history_product",method:"get"});r.value=e.list}catch(e){console.error(e)}finally{D(),c.value=!1}};X();return(e,t)=>{const i=h(m("tig-image"),N),d=u,p=h(m("format-price"),U),G=h(m("up-checkbox"),I),z=h(m("up-checkbox-group"),J),D=$,X=j,Z=h(m("tig-button"),F),H=h(m("tig-checkbox"),P),K=h(m("save-bottom-box"),A),Q=h(m("tig-layout"),T);return l(),o(d,null,{default:s((()=>[f(Q,{specialNum:60},{default:s((()=>[f(E,{parameter:a}),f(z,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),activeColor:"var(--general)",placement:"column",onChange:M},{default:s((()=>[r.value.length>0?(l(),o(d,{key:0,class:"history-product"},{default:s((()=>[(l(!0),b(x,null,_(r.value,(e=>(l(),o(d,{key:e.product_id,class:"history-product-item",onClick:t=>{return a=e.product_id,void w({url:"/pages/productDetail/index?id="+a});var a}},{default:s((()=>[f(d,{class:"history-product-item-top"},{default:s((()=>[f(d,{class:"img-box"},{default:s((()=>[f(i,{src:e.pic_thumb,"onUpdate:src":t=>e.pic_thumb=t,mode:"widthFix"},null,8,["src","onUpdate:src"])])),_:2},1024)])),_:2},1024),f(d,{class:"history-product-item-bottom"},{default:s((()=>[f(d,{class:"detail line2"},{default:s((()=>[y(k(e.product_name),1)])),_:2},1024),f(d,{class:"price"},{default:s((()=>[f(p,{fontStyle:{fontSize:"32rpx"},currencyStyle:{fontSize:"22rpx"},decimalsStyle:{fontSize:"25rpx"},priceData:e.product_price},null,8,["priceData"])])),_:2},1024)])),_:2},1024),S(f(d,{class:"item-btn",onClick:t[0]||(t[0]=B((()=>{}),["stop"]))},{default:s((()=>[f(d,{class:"btn-box"},{default:s((()=>[f(G,{customStyle:{border:"none"},size:"20",shape:"circle",name:e.product_id},null,8,["name"])])),_:2},1024)])),_:2},1536),[[C,q.value]])])),_:2},1032,["onClick"])))),128))])),_:1})):g("",!0)])),_:1},8,["modelValue"]),c.value||0!=r.value.length?g("",!0):(l(),o(d,{key:0,class:"empty-box"},{default:s((()=>[f(d,{class:"pictrue"},{default:s((()=>[f(D,{src:v(V)("common/data_empty.png")},null,8,["src"])])),_:1}),f(d,{class:"txt"},{default:s((()=>[y(k(e.$t("暂无浏览记录！")),1)])),_:1})])),_:1})),f(K,{height:60,backgroundColor:"#fff"},{default:s((()=>[f(d,{class:"footer-box"},{default:s((()=>[S(f(d,{class:"footer-text"},{default:s((()=>[f(d,{class:"footer-num"},{default:s((()=>[y(k(e.$t("共")),1),f(X,{class:"num"},{default:s((()=>[y(k(r.value.length),1)])),_:1}),y(k(e.$t("件商品")),1)])),_:1}),f(d,{class:"footer-text-btn"},{default:s((()=>[f(Z,{customStyle:{height:"55rpx"},onClick:t[2]||(t[2]=e=>q.value=!0)},{default:s((()=>[y(k(e.$t("管理")),1)])),_:1})])),_:1})])),_:1},512),[[C,!q.value]]),S(f(d,{class:"footer-edit"},{default:s((()=>[f(d,{class:"all-check"},{default:s((()=>[f(H,{checked:L.value,"onUpdate:checked":t[3]||(t[3]=e=>L.value=e),onChange:O,checkedText:e.$t("全选")},null,8,["checked","checkedText"])])),_:1}),f(d,{class:"edit-btn"},{default:s((()=>[f(Z,{customStyle:{height:"60rpx","margin-right":"10rpx"},plain:"",onClick:t[4]||(t[4]=e=>q.value=!1)},{default:s((()=>[y(k(e.$t("取消")),1)])),_:1}),f(Z,{customStyle:{height:"60rpx"},disabled:!n.value.length,onClick:W},{default:s((()=>[y(k(e.$t("删除")),1)])),_:1},8,["disabled"])])),_:1})])),_:1},512),[[C,q.value]])])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-5ff9e058"]]);export{L as default};
