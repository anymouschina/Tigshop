import{d as a,G as e,Q as s,o as t,ah as l,r as o,b as i,ai as d,k as r,l as n,m as u,n as m,w as c,q as p,y as _,J as f,s as g,F as v,x as h,U as y,t as j,v as x,L as b,a6 as k,aj as C,ak as V,M as w,a7 as L,C as D,B as U,al as z,a9 as M}from"./index-Ce4FtYLL.js";import{_ as R,a as $}from"./u-radio-group.BHbsLwTM.js";import{_ as q,a as J}from"./uni-swipe-action.BWuf2iA6.js";import{_ as N}from"./empty-box.vue_vue_type_script_setup_true_lang.jMkm3TP8.js";import{_ as Q}from"./loading-box.PIJN5CrK.js";import{_ as B}from"./tig-loadingpage.vue_vue_type_script_setup_true_lang.CzbTwzVj.js";import{a as F,_ as G}from"./tig-layout.nM03J4I_.js";import{_ as I}from"./save-bottom-box.C22fRRFe.js";import{n as K}from"./index.v2UirNFN.js";import{g as Z,s as A,d as E}from"./address.BzJ2fRli.js";import{u as H}from"./useList.D1YctHiI.js";import{_ as O}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.BDQrrWMI.js";import"./u-empty.DoqyT2U6.js";import"./u-loading-icon.CaEeBur7.js";import"./product.rX84B_3L.js";const P=O(a({__name:"list",setup(a){const{t:O}=e(),P=s({navbar:"1",return:"1",title:"添加地址"}),S=s({page:1,size:10}),{getList:T,data:W,isLoadMore:X,isLoading:Y}=H(Z,{params:S,path:{dataKey:"filter_result"},immediate:!0,manageData:a=>{var e;sa.value=null==(e=a.find((a=>1===a.is_selected)))?void 0:e.address_id}});t((()=>{l("refreshData",(()=>{S.page=1,W.value=[],T()}))}));const aa=async a=>{try{const e=await E({id:a});e.message&&w({title:e.message,icon:"none"}),S.page=1,W.value=[],T()}catch(e){console.error(e)}},ea=()=>{b({url:"/pages/address/editRegion"})},sa=o(),ta=a=>{la()},la=async()=>{k({title:O("切换中")});const a=C();try{await A({id:sa.value});if(S.page=1,W.value=[],a.length>1){"pages/order/check"===a[a.length-2].route&&V()}T()}catch(e){console.error(e),w({title:e.message,icon:"none"})}finally{L()}};return i((()=>{d("refreshData")})),(a,e)=>{const s=r(n("up-radio"),R),t=D,l=r(n("uni-swipe-action-item"),q),o=r(n("uni-swipe-action"),J),i=r(n("up-radio-group"),$),d=r(n("empty-box"),N),k=r(n("loading-box"),Q),C=r(n("tig-loadingpage"),B),V=U,w=r(n("tig-button"),F),L=r(n("save-bottom-box"),I),Z=r(n("tig-layout"),G);return u(),m(t,null,{default:c((()=>[p(Z,{specialNum:70},{default:c((()=>[p(K,{parameter:P},null,8,["parameter"]),p(t,{class:"address-list"},{default:c((()=>[p(i,{modelValue:sa.value,"onUpdate:modelValue":e[0]||(e[0]=a=>sa.value=a),placement:"column",onChange:ta},{default:c((()=>[p(o,null,{default:c((()=>[(u(!0),_(v,null,f(g(W),(e=>(u(),m(t,{key:e.address_id,class:"address-item"},{default:c((()=>[p(l,{threshold:0,autoClose:""},{right:c((()=>[p(t,{class:"address-del",onClick:a=>{return s=e.address_id,void M({title:O("提示"),content:O("确定删除吗？"),success:async a=>{a.confirm&&aa(s)}});var s}},{default:c((()=>[j(x(a.$t("删除")),1)])),_:2},1032,["onClick"])])),default:c((()=>[p(t,{class:"address-item-content"},{default:c((()=>[p(t,{class:"address-item-left flex-center"},{default:c((()=>[p(s,{activeColor:"var(--general)",name:e.address_id},null,8,["name"])])),_:2},1024),p(t,{class:"address-item-middle"},{default:c((()=>[p(t,{class:"user-info"},{default:c((()=>[p(t,{class:"name"},{default:c((()=>[j(x(e.consignee),1)])),_:2},1024),p(t,{class:"phone"},{default:c((()=>[j(x(g(z)(e.mobile))+" ",1),1===e.is_default?(u(),m(t,{key:0,class:"tag"},{default:c((()=>[j(x(a.$t("默认")),1)])),_:1})):h("",!0)])),_:2},1024)])),_:2},1024),p(t,{class:"address line1"},{default:c((()=>[j(x(e.region_name)+" "+x(e.address),1)])),_:2},1024)])),_:2},1024),p(t,{class:"address-item-right flex-center",onClick:a=>{return s=e.address_id,void b({url:"/pages/address/editRegion?id="+s});var s}},{default:c((()=>[p(t,{class:"iconfont icon-bianji"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1}),g(X)||g(Y)||0!==g(W).length?h("",!0):(u(),m(d,{key:0,mode:"list",text:"暂无地址！"})),p(k,{modelValue:g(X),"onUpdate:modelValue":e[1]||(e[1]=a=>y(X)?X.value=a:null),page:S.page,length:g(W).length},null,8,["modelValue","page","length"]),p(C,{modelValue:g(Y),"onUpdate:modelValue":e[2]||(e[2]=a=>y(Y)?Y.value=a:null)},null,8,["modelValue"]),p(L,{height:65,backgroundColor:"#fff"},{default:c((()=>[p(t,{class:"btn-box"},{default:c((()=>[p(w,{style:{width:"100%","font-size":"28rpx"},onClick:ea},{default:c((()=>[p(V,{class:"iconfont icon-dizhi"}),j(" "+x(a.$t("添加新地址")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-660111f7"]]);export{P as default};
