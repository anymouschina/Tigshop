import{e as a,r as e,Q as s,f as l,G as t,K as n,j as o,c as i,w as c,i as r,q as u,y as d,o as m,a as f,b as p,t as _,z as g,D as v,F as C,J as h,d as b,T as x,P as y,N as k,_ as j}from"./index-BKzbZvRR.js";import{_ as I}from"./tig-image.DrOwWlV9.js";import{_ as w}from"./format-price.kSnuguuz.js";import{_ as S}from"./tig-fixed-placeholder.s9cnCRBL.js";import{_ as $}from"./tig-layout.BpNdXByQ.js";import{a as z,c as D}from"./salesman.nutPT2Bz.js";import{e as N}from"./empty.C2Tqbwan.js";const T=j(a({__name:"salesmanCard",setup(a){const j=e({}),T=e([]),B=s({page:1,pageSize:15}),P=e(0),q=e(null),A=[{name:"名片",icon:"icon-mingpian",url:""},{name:"商城",icon:"icon-shangcheng-",url:"/pages/index/index"},{name:"我的",icon:"icon-wode",url:"/pages/user/index"}],F=e(!1),G=async()=>{F.value=!0;try{const a=await z(B);T.value=[...T.value,...a.records],P.value=a.total}catch(a){console.error(a)}finally{F.value=!1}};return l((a=>{if(a&&a.salesmanId){q.value=Number(a.salesmanId);t("bindSalesmanId")||n("bindSalesmanId",q.value),(async()=>{try{const a=await D(q.value);j.value=a}catch(a){console.error(a)}})()}G()})),o((()=>{B.page<Math.ceil(P.value/B.pageSize)&&(B.page++,G())})),(a,e)=>{const s=u(d("tig-image"),I),l=r,t=u(d("format-price"),w),n=b,o=u(d("tig-fixed-placeholder"),S),z=u(d("tig-layout"),$);return m(),i(l,null,{default:c((()=>[f(z,{needSafeTop:!0,safeTopBgColor:"#f5f5f5"},{default:c((()=>[f(l,{class:"salesmanCard-top"},{default:c((()=>[f(l,{class:"salesmanCard-top-content"},{default:c((()=>[f(l,{class:"salesmanCard-top-left"},{default:c((()=>[f(l,{class:"salesmanCard-top-left-img"},{default:c((()=>[f(s,{src:j.value.avatar},null,8,["src"])])),_:1})])),_:1}),f(l,{class:"salesmanCard-top-right"},{default:c((()=>[f(l,{class:"salesmanCard-top-right-mobile"},{default:c((()=>[p(_(j.value.mobile),1)])),_:1}),f(l,{class:"salesmanCard-top-right-name"},{default:c((()=>[p(_(j.value.nickname),1)])),_:1})])),_:1})])),_:1})])),_:1}),f(l,{class:"salesmanCard-list"},{default:c((()=>[f(l,{class:"salesmanCard-list-title"},{default:c((()=>[p(_(a.$t("推荐商品")),1)])),_:1}),f(l,{class:"salesmanCard-list-content"},{default:c((()=>[(m(!0),v(C,null,h(T.value,(a=>(m(),i(l,{key:a.productId,class:"salesmanCard-list-content-item",onClick:e=>(a=>{let e=q.value?`/pages/product/index?id=${a}&salesmanId=${q.value}`:`/pages/product/index?id=${a}`;y({url:e})})(a.productId)},{default:c((()=>[f(l,{class:"salesmanCard-list-content-item-img"},{default:c((()=>[f(s,{src:a.picUrl},null,8,["src"])])),_:2},1024),f(l,{class:"content-item-text"},{default:c((()=>[f(l,{class:"item-text-name line2"},{default:c((()=>[p(_(a.productName),1)])),_:2},1024),f(l,{class:"item-text-price"},{default:c((()=>[f(t,{priceData:a.productPrice},null,8,["priceData"]),f(n,{class:"iconfont-h5 icon-gouwuche3"})])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),F.value||0!==P.value?g("",!0):(m(),i(N,{key:0,styles:{width:"320rpx",height:"320rpx"}}))])),_:1}),f(o,{backgroundColor:"#fff"},{default:c((()=>[f(l,{class:"bottom-btns"},{default:c((()=>[(m(),v(C,null,h(A,((e,s)=>f(l,{key:s,class:x(["bottom-btns-item",{active:0===s}]),onClick:a=>{var s;(s=e.url)&&k({url:s})}},{default:c((()=>[f(l,{class:x(["bottom-btns-item-icon iconfont-h5",e.icon])},null,8,["class"]),f(l,{class:"bottom-btns-item-text"},{default:c((()=>[p(_(a.$t(e.name)),1)])),_:2},1024)])),_:2},1032,["class","onClick"]))),64))])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-f91ef554"]]);export{T as default};
