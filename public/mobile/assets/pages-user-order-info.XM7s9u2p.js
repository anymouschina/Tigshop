import{d as e,ac as a,G as t,r as l,o as s,a6 as u,a7 as i,R as r,k as o,l as c,m as d,n,w as _,q as f,y as p,t as m,v,V as y,F as h,J as b,x as k,a9 as g,M as x,L as $,C as D,B as w,b2 as C}from"./index-Ce4FtYLL.js";import{_ as j}from"./uni-steps.DqUp125J.js";import{_ as S,a as T}from"./u-steps.BqvnoYMp.js";import{_ as B}from"./uni-icons.yuSuVTUg.js";import{a as I,_ as q}from"./tig-layout.nM03J4I_.js";import{_ as z}from"./tig-image.bUT1hZK2.js";import{_ as H}from"./format-price.C2WNeN1M.js";import{_ as L}from"./save-bottom-box.C22fRRFe.js";import{n as O}from"./index.v2UirNFN.js";import{_ as U}from"./index.vue_vue_type_script_setup_true_lang.Cnzs5W_Y.js";import{g as W,f as F,c as G,e as J}from"./order.CCBaGQMp.js";import{_ as M}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.BDQrrWMI.js";import"./u-loading-icon.CaEeBur7.js";const N=M(e({__name:"info",setup(e){const M=a(),{t:N}=t(),R={navbar:"1",return:"1",title:"我的订单",showHome:!0,color:!1},V=l({0:N("您的订单已提交成功，请尽快完成付款哦！"),1:N("感谢您在本店的购物，您的订单已提交成功，我们会尽快为您发货！"),2:N("您的订单已经发货，请注意查收，祝您购物愉快！"),3:N('您的订单已被取消，您可以通过"再次购买"，重新购买订单中的商品。'),4:N('您的订单被认定为无效订单，订单已被关闭。您可以通过"再次购买"，重新购买订单中的商品。给您造成的不便请多多谅解！'),5:N("您的订单已经确认收货，感谢您在本店购物，祝您生活愉快！")}),A=l({}),E=l(!1),K=l();s((e=>{e&&e.id&&(K.value=e.id,P(),Y())}));const P=async()=>{u({title:N("加载中")});try{const e=await W({id:K.value});A.value=e.item}catch(e){console.error(e)}finally{i()}},Q=l([]),X=l(""),Y=async()=>{try{const e=await F({id:K.value});"string"==typeof e.list?X.value=e.list:Q.value=e.list}catch(e){console.error(e)}finally{i()}},Z=e=>{$(e?{url:`/pages/user/afterSale/edit?item_id=${e}&order_id=${A.value.order_id}`}:{url:`/pages/user/afterSale/edit?order_id=${A.value.order_id}`})},ee=e=>{$({url:`/pages/productDetail/index?id=${e}`})},ae=r((()=>A.value.shop&&Object.keys(A.value.shop).length>0?!!(A.value.shop.kefu_inlet&&A.value.shop.kefu_inlet.length>0&&A.value.shop.kefu_inlet.includes(2)):M.serviceConfig.show));return(e,a)=>{const t=o(c("uni-steps"),j),l=D,s=w,u=o(c("up-steps-item"),S),i=o(c("up-steps"),T),r=o(c("uni-icons"),B),W=o(c("tig-button"),I),F=o(c("tig-image"),z),M=o(c("format-price"),H),K=o(c("save-bottom-box"),L),Y=o(c("tig-layout"),q);return d(),n(Y,{specialNum:55},{default:_((()=>[f(l,{class:"order-info"},{default:_((()=>[f(O,{parameter:R}),Object.keys(A.value).length?(d(),p(h,{key:0},[f(l,{class:"order-info-steps"},{default:_((()=>[f(t,{"active-color":"var(--general)",options:A.value.step_status.steps,active:A.value.step_status.current},null,8,["options","active"])])),_:1}),f(l,{class:"order-info-content"},{default:_((()=>[f(l,{class:"order-card card-space"},{default:_((()=>[f(l,{class:"order-card-item flex justify-between"},{default:_((()=>[f(l,{class:"item-left"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("订单编号"))+"：",1)])),_:1}),f(s,null,{default:_((()=>[m(v(A.value.order_sn),1)])),_:1})])),_:1}),f(l,{class:"item-right"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("订单状态"))+"：",1)])),_:1}),f(s,null,{default:_((()=>[m(v(A.value.order_status_name),1)])),_:1})])),_:1})])),_:1}),f(l,{class:"order-card-item"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("下单时间"))+"：",1)])),_:1}),f(s,null,{default:_((()=>[m(v(A.value.add_time),1)])),_:1})])),_:1}),f(l,{class:"order-card-item"},{default:_((()=>[m(v(V.value[A.value.order_status]),1)])),_:1})])),_:1}),A.value.order_id&&2===A.value.order_status&&Q.value.length>0?(d(),n(l,{key:0,class:"expressage-card card-space"},{default:_((()=>[f(l,{class:"shippingInfo-title"},{default:_((()=>[m(v(e.$t("快递公司")),1)])),_:1}),Q.value.length>0?(d(),n(l,{key:0,class:"shippingInfo-box"},{default:_((()=>[f(l,{class:y(["shippingInfo-box-content",{dim:!E.value,"more-height":E.value}])},{default:_((()=>[f(i,{current:0,dot:"",activeColor:"#39bf3e",direction:"column"},{default:_((()=>[(d(!0),p(h,null,b(Q.value,((e,a)=>(d(),n(u,{key:a,title:e.StatusDescription,desc:e.Date},null,8,["title","desc"])))),128))])),_:1})])),_:1},8,["class"]),f(l,{class:"shippingInfo-btn",onClick:a[0]||(a[0]=e=>E.value=!E.value)},{default:_((()=>[m(v(E.value?e.$t("收起"):e.$t("展开")),1),f(r,{class:y(["btn-icon",{rotate:E.value}]),type:"down",size:"18",color:"#999"},null,8,["class"])])),_:1})])),_:1})):(d(),n(l,{key:1,class:"emptyText"},{default:_((()=>[m(v(X.value),1)])),_:1}))])),_:1})):k("",!0),f(l,{class:"pay-card card-space"},{default:_((()=>[f(l,{class:"pay-card-item"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("收货信息"))+"：",1)])),_:1}),f(s,{class:"address-text"},{default:_((()=>[m(v(A.value.user_address+" "+A.value.consignee+" "+A.value.mobile),1)])),_:1})])),_:1}),f(l,{class:"pay-card-item"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("配送方式"))+"：",1)])),_:1}),f(s,null,{default:_((()=>[m(v(A.value.shipping_type_name),1)])),_:1})])),_:1}),f(l,{class:"pay-card-item"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("支付方式"))+"：",1)])),_:1}),f(s,null,{default:_((()=>[m(v(1===A.value.pay_type_id?e.$t("在线支付"):2===A.value.pay_type_id?e.$t("货到付款"):e.$t("线下支付")),1)])),_:1})])),_:1}),ae.value?(d(),n(l,{key:0,class:"pay-card-item im-btn"},{default:_((()=>[f(U,{phone:A.value.shop&&A.value.shop.kefu_phone?A.value.shop.kefu_phone:"",order_id:A.value.order_id,shop_id:A.value.shop_id},{default:_((()=>[f(W,{plain:!0,color:"#333",customStyle:{height:"55rpx"}},{default:_((()=>[m(v(e.$t("联系客服")),1)])),_:1})])),_:1},8,["phone","order_id","shop_id"])])),_:1})):k("",!0)])),_:1}),f(l,{class:"product-card card-space"},{default:_((()=>[(d(!0),p(h,null,b(A.value.items,(a=>(d(),n(l,{key:a.product_id,class:"item-box"},{default:_((()=>[f(l,{class:"product-card-item"},{default:_((()=>[f(l,{class:"product-card-item-left",onClick:e=>ee(a.product_id)},{default:_((()=>[f(l,{class:"left-img"},{default:_((()=>[f(F,{src:a.pic_thumb,"onUpdate:src":e=>a.pic_thumb=e},null,8,["src","onUpdate:src"]),1===a.is_gift?(d(),n(l,{key:0,class:"gift-text"},{default:_((()=>[m(v(e.$t("赠品")),1)])),_:1})):k("",!0)])),_:2},1024)])),_:2},1032,["onClick"]),f(l,{class:"product-card-item-right",onClick:e=>ee(a.product_id)},{default:_((()=>[f(l,{class:"right-title line2"},{default:_((()=>[f(s,null,{default:_((()=>[m(v(a.product_name),1)])),_:2},1024)])),_:2},1024),f(l,{class:y(["sku-card",{nodata:0===a.sku_data.length}])},{default:_((()=>[a.sku_data.length>0?(d(!0),p(h,{key:0},b(a.sku_data,((e,a)=>(d(),n(l,{key:a,class:"sku-item line1"},{default:_((()=>[m(v(e.value),1)])),_:2},1024)))),128)):k("",!0)])),_:2},1032,["class"]),a.extra_sku_data&&a.extra_sku_data.length?(d(),n(l,{key:0,class:"extraskudata-box"},{default:_((()=>[f(l,{class:"extraskudata"},{default:_((()=>[(d(!0),p(h,null,b(a.extra_sku_data,(e=>(d(),n(l,{key:e,class:"extraskudata-item"},{default:_((()=>[f(l,{class:"title"},{default:_((()=>[m(v(e.attr_name),1)])),_:2},1024),f(l,{class:"line-box"},{default:_((()=>[f(l,{class:"line"})])),_:1}),f(l,{class:"content"},{default:_((()=>[f(s,{class:"line1 content-text"},{default:_((()=>[m(v(e.attr_value),1)])),_:2},1024),f(M,{showText:!1,class:"price",priceData:e.attr_price},null,8,["priceData"]),f(l,{class:"num"},{default:_((()=>[m("x"+v(a.quantity),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)):k("",!0),f(l,{class:"right-price"},{default:_((()=>[f(M,{showText:!1,class:"right-price-pricenum",decimalsStyle:{fontSize:"23rpx",fontWeight:"bold"},currencyStyle:{fontSize:"21rpx",fontWeight:"bold"},priceData:a.price},null,8,["priceData"]),f(l,{class:"right-price-quantity"},{default:_((()=>[m("x "+v(a.quantity),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),A.value.available_actions.to_aftersales||a.aftersales_item?(d(),n(l,{key:0,class:"item-btn"},{default:_((()=>[A.value.available_actions.to_aftersales?(d(),n(W,{key:0,plain:!0,color:"#333",customStyle:{height:"55rpx"},onClick:e=>Z(a.item_id)},{default:_((()=>[m(v(e.$t("申请售后")),1)])),_:2},1032,["onClick"])):k("",!0),a.aftersales_item?(d(),n(W,{key:1,plain:!0,color:"#333",customStyle:{height:"55rpx"},onClick:e=>{return t=a.aftersales_item.aftersale_id,void $({url:`/pages/user/afterSale/info?id=${t}`});var t}},{default:_((()=>[m(v(e.$t("售后详情")),1)])),_:2},1032,["onClick"])):k("",!0)])),_:2},1024)):k("",!0)])),_:2},1024),8===A.value.order_type&&a.e_card.length>0?(d(),n(l,{key:0,class:"virtualsample-box"},{default:_((()=>[(d(!0),p(h,null,b(a.e_card,(a=>(d(),n(l,{key:a},{default:_((()=>[f(l,{class:"virtualsample-item"},{default:_((()=>[f(l,{class:"virtualsample-item-con"},{default:_((()=>[f(l,{class:"label"},{default:_((()=>[m(v(e.$t("卡号"))+"：",1)])),_:1}),f(l,{class:"value"},{default:_((()=>[m(v(a.card_number),1)])),_:2},1024)])),_:2},1024),f(l,{class:"virtualsample-item-con"},{default:_((()=>[f(l,{class:"label"},{default:_((()=>[m(v(e.$t("卡密"))+"：",1)])),_:1}),f(l,{class:"value"},{default:_((()=>[m(v(a.card_pwd),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),f(l,{class:"virtualsample-btn",onClick:e=>{var t;C(`卡号：${(t=a).card_number}  卡密：${t.card_pwd}`,(()=>{x({title:N("复制成功"),icon:"none"})}))}},{default:_((()=>[f(l,null,{default:_((()=>[f(W,{plain:!0,color:"#333",customStyle:{height:"55rpx"}},{default:_((()=>[m(v(e.$t("复制")),1)])),_:1})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:2},1024)):k("",!0)])),_:2},1024)))),128))])),_:1}),f(l,{class:"money-card card-space"},{default:_((()=>[f(l,{class:"money-card-item"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("商品总价"))+"：",1)])),_:1}),f(s,null,{default:_((()=>[f(M,{showText:!1,isBottom:!1,priceData:A.value.product_amount},null,8,["priceData"])])),_:1})])),_:1}),A.value.service_fee&&A.value.service_fee>0?(d(),n(l,{key:0,class:"money-card-item"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("附加费用"))+"：",1)])),_:1}),f(s,null,{default:_((()=>[f(M,{showText:!1,isBottom:!1,priceData:A.value.service_fee},null,8,["priceData"])])),_:1})])),_:1})):k("",!0),A.value.shipping_fee&&A.value.shipping_fee>0?(d(),n(l,{key:1,class:"money-card-item"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("运费"))+"：",1)])),_:1}),f(s,null,{default:_((()=>[f(M,{showText:!1,isBottom:!1,priceData:A.value.shipping_fee},null,8,["priceData"])])),_:1})])),_:1})):k("",!0),A.value.balance&&A.value.balance>0?(d(),n(l,{key:2,class:"money-card-item"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("使用余额"))+"：",1)])),_:1}),f(s,null,{default:_((()=>[f(M,{showText:!1,isBottom:!1,priceData:A.value.balance},null,8,["priceData"])])),_:1})])),_:1})):k("",!0),A.value.points_amount&&A.value.points_amount>0?(d(),n(l,{key:3,class:"money-card-item"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("使用积分"))+"：",1)])),_:1}),f(s,null,{default:_((()=>[f(M,{showText:!1,isBottom:!1,priceData:A.value.points_amount},null,8,["priceData"])])),_:1})])),_:1})):k("",!0),A.value.coupon_amount&&A.value.coupon_amount>0?(d(),n(l,{key:4,class:"money-card-item"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("优惠券"))+"：",1)])),_:1}),f(s,null,{default:_((()=>[f(M,{showText:!1,isBottom:!1,priceData:A.value.coupon_amount},null,8,["priceData"])])),_:1})])),_:1})):k("",!0),A.value.discount_amount&&A.value.discount_amount>0?(d(),n(l,{key:5,class:"money-card-item"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("其他优惠"))+"：",1)])),_:1}),f(s,null,{default:_((()=>[f(M,{showText:!1,isBottom:!1,priceData:A.value.discount_amount},null,8,["priceData"])])),_:1})])),_:1})):k("",!0),A.value.unpaid_amount&&A.value.unpaid_amount>0?(d(),n(l,{key:6,class:"money-card-item"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("待支付金额"))+"：",1)])),_:1}),f(s,null,{default:_((()=>[f(M,{showText:!1,isBottom:!1,priceData:A.value.unpaid_amount},null,8,["priceData"])])),_:1})])),_:1})):k("",!0),2==A.value.pay_status?(d(),n(l,{key:7,class:"money-card-item"},{default:_((()=>[f(s,{class:"order-item-label"},{default:_((()=>[m(v(e.$t("实付款"))+"：",1)])),_:1}),f(s,{class:"order-item-price"},{default:_((()=>[f(M,{showText:!1,isBottom:!1,priceData:A.value.total_amount},null,8,["priceData"])])),_:1})])),_:1})):k("",!0)])),_:1})])),_:1}),A.value.available_actions.cancel_order||A.value.available_actions.to_pay||A.value.available_actions.confirm_receipt||A.value.available_actions.to_aftersales?(d(),n(K,{key:0,height:"55",backgroundColor:"#fff"},{default:_((()=>[f(l,{class:"order-info-btn"},{default:_((()=>[f(l,{class:"order-info-btn-box"},{default:_((()=>[A.value.available_actions.cancel_order?(d(),n(W,{key:0,class:"btn",color:"#333",customStyle:{height:"55rpx"},plain:!0,onClick:a[1]||(a[1]=e=>{return a=A.value.order_id,void g({title:N("提示"),content:N("确认要取消该订单吗？"),success:async e=>{if(e.confirm)try{await G({id:a}),P()}catch(t){x({title:t.message,icon:"none"})}}});var a})},{default:_((()=>[m(v(e.$t("取消订单")),1)])),_:1})):k("",!0),A.value.available_actions.to_pay?(d(),n(W,{key:1,class:"btn",color:"#333",customStyle:{height:"55rpx"},plain:!0,onClick:a[2]||(a[2]=e=>{return a=A.value.order_id,void $({url:`/pages/order/pay?order_id=${a}`});var a})},{default:_((()=>[m(v(e.$t("去付款")),1)])),_:1})):k("",!0),A.value.available_actions.confirm_receipt?(d(),n(W,{key:2,color:"#333",customStyle:{height:"55rpx"},class:"btn",plain:!0,onClick:a[3]||(a[3]=e=>{return a=A.value.order_id,void g({title:N("提示"),content:N("确认收货吗？"),success:async e=>{if(e.confirm)try{await J({id:a}),P()}catch(t){x({title:t.message,icon:"none"})}}});var a})},{default:_((()=>[m(v(e.$t("确认已收货")),1)])),_:1})):k("",!0),A.value.available_actions.to_aftersales?(d(),n(W,{key:3,color:"#333",customStyle:{height:"55rpx"},class:"btn",plain:!0,onClick:a[4]||(a[4]=e=>Z(null))},{default:_((()=>[m(v(e.$t("整单售后")),1)])),_:1})):k("",!0)])),_:1})])),_:1})])),_:1})):k("",!0)],64)):k("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-1cb43f65"]]);export{N as default};
