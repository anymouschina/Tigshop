import{d as a,r as e,a as t,p as s,o,c as l,e as u,f as i,g as r,i as n,j as p,k as m,l as c,m as d,n as v,w as _,q as y,s as f,y as j,x as g,F as x,A as b,D as h,C as k,E as w}from"./index-Ce4FtYLL.js";import{_ as T}from"./u-empty.DoqyT2U6.js";import{_ as I}from"./tig-back-top.vue_vue_type_script_setup_true_lang.DN9Yy55p.js";import{u as L,_ as C}from"./tig-layout.nM03J4I_.js";import{g as F,a as q}from"./home.BFekSb01.js";import{u as z,m as A}from"./index.4mMA7PuB.js";import{m as D}from"./masonry.D_ptS7ea.js";import{_ as E}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.BDQrrWMI.js";import"./u-loading-icon.CaEeBur7.js";import"./tig-image.bUT1hZK2.js";import"./index.BklJ8UsZ.js";import"./format-price.C2WNeN1M.js";import"./u-radio-group.BHbsLwTM.js";import"./save-bottom-box.C22fRRFe.js";import"./u-picker.DYwBhpy0.js";import"./tig-countdown.vue_vue_type_script_setup_true_lang.Cb5IQxV3.js";import"./specification.C2u45Lz-.js";import"./uni-icons.yuSuVTUg.js";import"./uni-number-box.tTrqYNWQ.js";import"./product.rX84B_3L.js";import"./activityCard.DT7Jswa-.js";const G=E(a({__name:"index",setup(a){const{scrollTop:E}=L(),G=e(0),B=t(),H=e(0),J=e(!1),K=e([]),$=e(0),M=e(1),N=e(!1),O=e(!0),P=e([]);s("decorate_id",G);const Q=a=>{$.value=a,0!==$.value&&(M.value=1,N.value=!1,P.value=[],R())},R=async()=>{O.value=!0;try{const a=await F({category_id:$.value,page:M.value});a.filter_result&&a.filter_result.length>0?(P.value=[...P.value,...a.filter_result],N.value=!1):N.value=!0}catch(a){console.error(a)}finally{O.value=!1}},S=async a=>{J.value=!0;try{const e=await q(a);K.value=e.module_list,H.value=1,b()}catch(e){console.error(e)}finally{J.value=!1}};o((a=>{a&&a.id&&(G.value=a.id,S(a.id)),U.reset()}));const U=z();return l((()=>{$.value=0,U.reset(),S()})),u((()=>{$.value>0&&!J.value&&!N.value&&(M.value++,R())})),i((()=>{E.value>0&&setTimeout((()=>{r({scrollTop:E.value,duration:0})}),50)})),n((a=>({title:B.baseInfo.shop_title}))),p((()=>({title:B.baseInfo.shop_title}))),(a,e)=>{const t=h,s=k,o=m(c("up-empty"),T),l=m(c("tig-back-top"),I),u=m(c("tig-layout"),C);return d(),v(s,null,{default:_((()=>[y(u,null,{default:_((()=>[y(s,null,{default:_((()=>[J.value?(d(),v(s,{key:0,class:"index_empty"},{default:_((()=>[y(t,{"lazy-load":"",src:f(w)("common/index_empty.png"),mode:"widthFix"},null,8,["src"])])),_:1})):(d(),v(s,{key:1,class:"index"},{default:_((()=>[y(s,{class:"decorate-page-window"},{default:_((()=>[y(A,{modules:K.value,scrollTop:f(E),onLoadGoodsList:Q},null,8,["modules","scrollTop"]),$.value>0?(d(),j(x,{key:0},[y(D,{commodityList:P.value},null,8,["commodityList"]),O.value||0!==P.value.length?g("",!0):(d(),v(s,{key:0,class:"empty-box"},{default:_((()=>[y(o,{icon:f(w)("salesman/no_order.png"),text:a.$t("暂无数据")},null,8,["icon","text"])])),_:1}))],64)):g("",!0)])),_:1})])),_:1})),y(l,{scrollTop:f(E)},null,8,["scrollTop"])])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-01682971"]]);export{G as default};
