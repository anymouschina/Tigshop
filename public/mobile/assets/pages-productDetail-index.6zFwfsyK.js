import{d as e,R as t,k as l,l as a,m as o,n as s,w as u,q as c,t as i,v as n,y as d,F as r,J as p,s as f,E as _,a4 as m,C as v,D as y,a3 as g,u as h,r as b,T as k,V as x,B as w,x as I,aB as V,aZ as C,aR as $,aP as S,a5 as P,G as j,aG as T,aV as D,a_ as z,M as L,H as U,a as N,a$ as B,aJ as O,b0 as F,I as M,aI as A,b1 as W,ac as R,P as E,b2 as H,o as J,L as q,a9 as G,aa as K,S as X,aO as Z,ag as Q,W as Y,X as ee,b3 as te,f as le,b as ae,b4 as oe,b5 as se,ae as ue,i as ce,j as ie,U as ne,b6 as de,b7 as re,aQ as pe,g as fe,K as _e,ax as me,aK as ve,b8 as ye,Y as ge}from"./index-Do_Cb7fn.js";import{_ as he}from"./tig-image.D5KdQk-t.js";import{_ as be}from"./uni-badge.BM3jYsSj.js";import{c as ke,a as xe,u as we,_ as Ie}from"./tig-layout.BV0ZvCt0.js";import{_ as Ve}from"./tig-back-top.vue_vue_type_script_setup_true_lang.CqmEECeP.js";import{_ as Ce}from"./tig-loadingpage.vue_vue_type_script_setup_true_lang.BkWOf2EY.js";import{_ as $e}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as Se}from"./format-price.D2lH_-yv.js";import{u as Pe,d as je,g as Te,a as De,b as ze,c as Le,e as Ue,f as Ne,h as Be}from"./product.Cqsfbx9G.js";import{g as Oe}from"./guide.D6DFl-63.js";import{a as Fe}from"./activityCard._4qx8gud.js";import{_ as Me}from"./tig-countdown.vue_vue_type_script_setup_true_lang.YxaZCm4j.js";import{_ as Ae}from"./uni-icons.DK0ZiICA.js";import{_ as We}from"./uni-rate.-kXA9xQU.js";import{s as Re,b as Ee}from"./shop.Bj95X61o.js";import{s as He,a as Je}from"./specification.C7sO8fab.js";import{_ as qe}from"./save-bottom-box.BM5fwIJO.js";import{a as Ge}from"./coupon.CMOrr1zr.js";import{_ as Ke}from"./index.vue_vue_type_script_setup_true_lang.b52jYjxC.js";import{b as Xe}from"./cart.Bplc97-H.js";import"./u-loading-icon.rQrrZF_r.js";import"./u-icon.CBDMG2rO.js";import"./uni-transition.CXDA_3OO.js";import"./uni-number-box.Bfp_yH4M.js";const Ze=$e(e({__name:"tig-menu",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:g}){const h=e,b=g,k=t({get:()=>h.modelValue,set(e){b("update:modelValue",e)}}),x=[{icon:"common/home.svg",text:"首页",link:"/pages/index/index"},{icon:"common/search.svg",text:"搜索",link:"/pages/search/index"},{icon:"common/user.svg",text:"个人中心",link:"/pages/user/index"},{icon:"common/collection.svg",text:"商品收藏",link:"/pages/user/collectProduct/index"},{icon:"common/history.svg",text:"查看足迹",link:"/pages/user/historyProduct/index"},{icon:"common/message.svg",text:"消息中心",link:"/pages/user/messageLog/index"}];return(e,t)=>{const g=v,h=y,w=l(a("tig-popup"),ke);return o(),s(w,{show:k.value,"onUpdate:show":t[0]||(t[0]=e=>k.value=e),position:"top",backgroundColor:"#fff",showClose:!1},{default:u((()=>[c(g,{class:"menu-box"},{default:u((()=>[c(g,{class:"menu-title"},{default:u((()=>[i(n(e.$t("快捷入口")),1)])),_:1}),c(g,{class:"menu-list"},{default:u((()=>[(o(),d(r,null,p(x,((t,l)=>c(g,{key:l,class:"menu-item",onClick:e=>(e=>{b("update:modelValue",!1),m({url:e.link})})(t)},{default:u((()=>[c(g,{class:"menu-item-icon"},{default:u((()=>[c(h,{class:"menu-item-img",src:f(_)(t.icon)},null,8,["src"])])),_:2},1024),c(g,{class:"menu-item-text"},{default:u((()=>[i(n(e.$t(t.text)),1)])),_:2},1024)])),_:2},1032,["onClick"]))),64))])),_:1})])),_:1})])),_:1},8,["show"])}}}),[["__scopeId","data-v-da647417"]]),Qe=$e(e({__name:"productNav",props:{modelValue:{type:Number,default:0},activeModule:{type:String,default:""},event:{type:Function,default:()=>{}}},emits:["update:modelValue","update:activeModule"],setup(e,{emit:f}){g((e=>({"2802fa9a":D.value})));const _=h(),m=e,y=f,I=b([{label:"商品",value:".product-area"},{label:"评价",value:".evaluate-area"},{label:"详情",value:".product-detail-area"}]),V=b(250),C=V.value-80,$=t((()=>{let e=1;return m.modelValue>C?e=0:m.modelValue<C&&m.modelValue>0&&(e=(C-m.modelValue)/C),m.modelValue>V.value&&(e=1),e})),S=t((()=>{let e=0;return m.modelValue>V.value?e=1:m.modelValue<V.value&&m.modelValue>0&&(e=m.modelValue/V.value),e})),P=b(!1),j=()=>{P.value=!0},T=()=>{history.back()},D=t((()=>_.saveTop+10+"px"));return t((()=>(console.log(_.menuButtonInfo),_.menuButtonInfo))),(t,f)=>{const _=w,g=v,h=l(a("tig-menu"),Ze);return o(),d(r,null,[c(g,{class:"product-nav"},{default:u((()=>[c(g,{class:"product-nav-container"},{default:u((()=>[c(g,{class:"product-nav-left product-nav-icon",style:k({opacity:$.value}),onClick:T},{default:u((()=>[c(_,{class:x(["iconfont icon-houtui",{change:e.modelValue>V.value}])},null,8,["class"])])),_:1},8,["style"]),c(g,{class:"product-nav-middle",style:k({opacity:S.value})},{default:u((()=>[(o(!0),d(r,null,p(I.value,(l=>(o(),s(g,{key:l.label,class:x(["middle-text",{active:l.value===e.activeModule}]),onClick:e=>{return t=l.value,y("update:activeModule",t),void m.event(t);var t}},{default:u((()=>[i(n(t.$t(l.label)),1)])),_:2},1032,["class","onClick"])))),128))])),_:1},8,["style"]),c(g,{class:"product-nav-right product-nav-icon",style:k({opacity:$.value}),onClick:j},{default:u((()=>[c(_,{class:x(["iconfont-h5 icon-gengduo",{change:e.modelValue>V.value}])},null,8,["class"])])),_:1},8,["style"])])),_:1})])),_:1}),c(h,{modelValue:P.value,"onUpdate:modelValue":f[0]||(f[0]=e=>P.value=e)},null,8,["modelValue"])],64)}}}),[["__scopeId","data-v-652bf854"]]),Ye=$e(e({__name:"productImg",props:{picList:{},productInfo:{}},setup(e){const t=e,l=b(1),a=e=>{l.value=e.detail.current+1};return(e,_)=>{const m=v,g=y,h=$,b=S,k=w;return o(),s(m,{class:"product-pic-con"},{default:u((()=>[c(m,{class:"nav-bg"}),e.picList.length>0?(o(),s(m,{key:0,class:"product-bg"},{default:u((()=>{var _;return[c(b,{"indicator-dots":!1,circular:!0,interval:"3000",duration:"500",onChange:a},{default:u((()=>[(o(!0),d(r,null,p(e.picList,((e,l)=>(o(),s(h,{key:l},{default:u((()=>[c(g,{"lazy-load":"",onClick:e=>(e=>{const l=t.picList.map((e=>P(e.pic_url||"")));C({current:l[e],urls:l,indicator:"number",loop:!0})})(l),src:f(P)(e.pic_url||""),class:"slide-image"},null,8,["onClick","src"])])),_:2},1024)))),128))])),_:1}),c(m,{class:x("pages "+(e.picList||(null==(_=e.productInfo)?void 0:_.pic_url)?"show":""))},{default:u((()=>[c(k,null,{default:u((()=>[i(n(l.value),1)])),_:1}),i(" /"+n(e.picList.length||1),1)])),_:1},8,["class"])]})),_:1})):I("",!0),0==e.picList.length?(o(),s(m,{key:1,class:"product-bg"},{default:u((()=>[c(b,{"indicator-dots":!1,circular:!0,interval:"3000",duration:"500"},{default:u((()=>[c(h,null,{default:u((()=>{var t;return[c(g,{"lazy-load":"",onClick:_[0]||(_[0]=t=>{var l,a;return a=f(P)((null==(l=e.productInfo)?void 0:l.pic_url)||""),void C({urls:[a],indicator:"number",loop:!0})}),src:f(P)((null==(t=e.productInfo)?void 0:t.pic_url)||""),class:"slide-image"},null,8,["src"])]})),_:1})])),_:1})])),_:1})):I("",!0),V(e.$slots,"default",{},void 0,!0)])),_:3})}}}),[["__scopeId","data-v-f36450d9"]]),et=$e(e({__name:"poster",props:{modelValue:{type:Boolean},product_id:{},productInfo:{}},emits:["update:modelValue"],setup(e,{emit:t}){const{t:d}=j(),r=A(),p=e,f=b(""),m=b(!1),g=b(0);T((async()=>{const{windowWidth:e}=D();g.value=e/375,await h(),k()}));const h=async()=>{try{const e=await z(location.href);f.value=e.qrcode,L({title:d("正在生成海报，请稍后"),icon:"none",duration:1e3})}catch(e){console.error(e),L({title:e.message,icon:"none"})}},k=async()=>{const e=U("userInfo"),t=N();let l=B("myCanvas",r);l.draw(),l.save(),l.setFillStyle("#ffffff"),l.fillRect(0,0,500,900),l.draw(),l.setFontSize(14),l.setFillStyle("#000000"),l.fillText(e.nickname??d("普通会员"),100*g.value,48),l.setFontSize(12),l.setFillStyle("#999999"),l.fillText(d("的分享"),100*g.value,68),l.setFontSize(18),l.setFillStyle(t.themeStyle["--general"]),l.fillText(`${p.productInfo.product_price}`,20,366*g.value),x(p.productInfo.product_name,20,379*g.value,l),l.save();try{const t=await O(e.avatar?P(e.avatar):_("user/default_avatar.jpg"));l.beginPath(),l.arc(50,50,28,0,2*Math.PI),l.clip(),l.drawImage(t.path,20,20,70*g.value,70*g.value),l.restore(),l.draw(!0,(async()=>{l.save();const e=await O(P(p.productInfo.pic_original));l.drawImage(e.path,15,92,245*g.value,245*g.value),l.draw(!0,(async()=>{l.drawImage(f.value,165,360*g.value,100*g.value,100*g.value),l.draw(!0,(()=>{I()}))}))}))}catch(a){console.error(a)}},x=(e,t,l,a)=>{let o=[];for(let s=0,u=e.length;s<u/11;s++){let t=e.slice(11*s,11*(s+1));o.push(t)}o.forEach(((e,o)=>{o>3||(l+=20,a.setFontSize(12),a.setFillStyle("#333333"),a.fillText(e,t,l))}))},w=b(""),I=()=>{F({fileType:"jpg",canvasId:"myCanvas",quality:1,success:function(e){w.value=e.tempFilePath,m.value=!0},fail:e=>{L({title:JSON.stringify(e),icon:"none",duration:3e3}),m.value=!1,console.log(e)}},r)},V=()=>{};return(e,t)=>{const d=W,r=y,p=v,f=l(a("tig-popup"),ke);return o(),s(p,null,{default:u((()=>[c(d,{class:"canvas-content",id:"myCanvas","canvas-id":"myCanvas"}),c(f,{show:m.value,"onUpdate:show":t[1]||(t[1]=e=>m.value=e),onClose:t[2]||(t[2]=t=>e.$emit("update:modelValue",!1)),backgroundColor:"transparent",position:"center",showClose:!1},{default:u((()=>[c(p,{class:"poster-box",onTouchmove:t[0]||(t[0]=M((()=>{}),["stop","prevent"])),onLongpress:M(V,["stop"])},{default:u((()=>[c(r,{src:w.value,style:{height:"100%",width:"100%"}},null,8,["src"])])),_:1}),c(p,{class:"canvas-tip"},{default:u((()=>[i(n(e.$t("长按可保存海报")),1)])),_:1})])),_:1},8,["show"])])),_:1})}}}),[["__scopeId","data-v-0df6a8da"]]),tt=$e(e({__name:"productShare",props:{modelValue:{type:Boolean},product_id:{},productInfo:{}},emits:["update:modelValue"],setup(e,{emit:d}){const{t:r}=j(),p=h();R();const f=e,_=d,m=b(f.productInfo);E((()=>f.productInfo),(e=>{m.value=e}));const y=t({get:()=>f.modelValue,set(e){_("update:modelValue",e)}}),g=b(!1),k=()=>{_("update:modelValue",!1),g.value=!0},x=()=>{_("update:modelValue",!1),V()},V=()=>{H(window.location.href,(()=>{L({title:r("复制成功"),icon:"none"})}))},C=t((()=>"miniProgram"===p.XClientType||"wechat"===p.XClientType)),$=b(!1),S=()=>{_("update:modelValue",!1),$.value=!0};return(e,t)=>{const d=v,r=w,p=l(a("tig-popup"),ke);return o(),s(d,{class:"share"},{default:u((()=>[c(p,{show:y.value,"onUpdate:show":t[0]||(t[0]=e=>y.value=e),position:"bottom"},{default:u((()=>[c(d,{class:"share-title"},{default:u((()=>[i(n(e.$t("分享")),1)])),_:1}),c(d,{class:"share-content"},{default:u((()=>[C.value?(o(),s(d,{key:0,class:"share-item",onClick:S},{default:u((()=>[c(r,{class:"iconfont-h5 icon-haoyou"}),c(r,{class:"share-item-text"},{default:u((()=>[i(n(e.$t("分享给好友")),1)])),_:1})])),_:1})):I("",!0),c(d,{class:"share-item",onClick:x},{default:u((()=>[c(r,{class:"iconfont-h5 icon-link"}),c(r,{class:"share-item-text"},{default:u((()=>[i(n(e.$t("复制链接")),1)])),_:1})])),_:1}),c(d,{class:"share-item",onClick:k},{default:u((()=>[c(r,{class:"iconfont-h5 icon-tupian"}),c(r,{class:"share-item-text"},{default:u((()=>[i(n(e.$t("生成商品海报")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["show"]),g.value?(o(),s(et,{key:0,modelValue:g.value,"onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),product_id:e.product_id,productInfo:m.value},null,8,["modelValue","product_id","productInfo"])):I("",!0),c(Oe,{modelValue:$.value,"onUpdate:modelValue":t[2]||(t[2]=e=>$.value=e)},null,8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-f5c90b7c"]]),lt=$e(e({__name:"productTitleInfo",props:{productInfo:{type:Object,default:()=>({})},productPrice:{type:String,default:"0"},is_seckill:{type:Number,default:0},is_discount:{type:Number,default:0},promotionList:{type:Array,default:()=>[]},showCoupon:{type:Boolean,default:!1},type:{type:String,default:""},exchangeIntegral:{type:Number,default:0},showMarketPrice:{type:Number,default:1}},emits:["update:showCoupon"],setup(e,{emit:t}){const m=b(!1),g=b(0),h=e,k=t,V=()=>{k("update:showCoupon",!0)},C=async e=>{try{const t=await Te({id:e});m.value=t.item}catch(t){L({title:t.message,icon:"none"})}},$=b(!1),S=()=>{$.value=!0};return E((()=>h.productInfo),(e=>{e&&(g.value=e.product_id,C(e.product_id))})),(t,h)=>{const b=v,k=l(a("format-price"),Se),P=w,j=y;return o(),s(b,{class:"product-title-info"},{default:u((()=>[c(b,{class:"title-info-top"},{default:u((()=>[e.is_seckill||e.is_discount?(o(),s(b,{key:0,class:"title-info-bottom line2"},{default:u((()=>[i(n(e.productInfo.product_name),1)])),_:1})):(o(),s(b,{key:1,class:"title-top-price"},{default:u((()=>[c(k,{fontStyle:{fontSize:"36rpx"},decimalsStyle:{fontSize:"25rpx"},currencyStyle:{fontSize:"23rpx"},priceData:e.productPrice},null,8,["priceData"]),"exchange"===e.type?(o(),s(b,{key:0,class:"exchange-box"},{default:u((()=>[c(P,{class:"exchange-icon"},{default:u((()=>[i("+")])),_:1}),c(j,{class:"exchange-img",src:f(_)("exchange/exchange.png")},null,8,["src"]),c(P,{class:"exchange-text"},{default:u((()=>[i(n(e.exchangeIntegral),1)])),_:1})])),_:1})):(o(),d(r,{key:1},[e.showMarketPrice?(o(),s(b,{key:0,class:"title-top-market_price"},{default:u((()=>[c(k,{isBottom:!1,priceData:e.productInfo.market_price},null,8,["priceData"])])),_:1})):I("",!0)],64))])),_:1})),c(b,{class:"title-top-panle"},{default:u((()=>[c(b,{class:"title-top-panle-collect",onClick:h[0]||(h[0]=e=>(async e=>{try{let t={};t=e?await je({id:g.value}):await Pe({product_id:g.value}),await C(g.value),L({title:t.message,icon:"none"})}catch(t){L({title:t.message,icon:"none"})}})(m.value))},{default:u((()=>[c(b,{class:x(["iconfont-h5 icon-shoucang1",{"icon-yishoucang":m.value}])},{default:u((()=>[c(P)])),_:1},8,["class"]),c(b,{class:"title-panle-collect-text"},{default:u((()=>[i(n(t.$t("收藏")),1)])),_:1})])),_:1}),c(b,{class:"title-top-panle-collect",onClick:M(S,["stop"])},{default:u((()=>[c(b,{class:"iconfont-h5 icon-fenxiang"}),c(b,{class:"title-panle-collect-text"},{default:u((()=>[i(n(t.$t("分享")),1)])),_:1})])),_:1})])),_:1})])),_:1}),e.promotionList.length>0?(o(),s(b,{key:0,class:"activity-box",onClick:V},{default:u((()=>[c(b,{class:"flex"},{default:u((()=>[(o(!0),d(r,null,p(e.promotionList.length>2?e.promotionList.slice(0,2):e.promotionList,(e=>(o(),s(Fe,{key:e.promotion_id,activityInfo:e,cardType:"detail"},null,8,["activityInfo"])))),128))])),_:1}),c(b,{class:"activity-btn"},{default:u((()=>[i(n(t.$t("领券")),1),c(P,{class:"iconfont-h5 icon-youjiantou"})])),_:1})])),_:1})):I("",!0),e.is_seckill||e.is_discount?I("",!0):(o(),s(b,{key:1,class:"title-info-bottom line2"},{default:u((()=>[i(n(e.productInfo.product_name),1)])),_:1})),c(tt,{modelValue:$.value,"onUpdate:modelValue":h[1]||(h[1]=e=>$.value=e),product_id:Number(g.value),productInfo:e.productInfo},null,8,["modelValue","product_id","productInfo"])])),_:1})}}}),[["__scopeId","data-v-147a5dbb"]]),at=$e(e({__name:"productSeckillTitle",props:{productInfo:{},productPrice:{},productOriginPrice:{},seckillValue:{}},setup(e){const d=e,r=t((()=>d.seckillValue.seckill_stock)),p=t((()=>{return e=d.seckillValue.seckill_sales,t=d.seckillValue.seckill_stock,Math.round(e/(t+e)*100)+"%";var e,t}));return(e,t)=>{const d=l(a("format-price"),Se),f=v,_=l(a("tig-countdown"),Me);return o(),s(f,{class:"product-seckill-title flex justify-between align-center"},{default:u((()=>[c(f,{class:"seckill-price-box"},{default:u((()=>[c(f,{class:"title-top-price"},{default:u((()=>[c(f,{class:"price-box"},{default:u((()=>[c(f,{class:"price"},{default:u((()=>[c(d,{fontStyle:{fontWeight:"bold"},decimalsStyle:{fontSize:"24rpx",fontWeight:"bold"},currencyStyle:{fontSize:"23rpx",fontWeight:"bold"},priceData:e.productPrice},null,8,["priceData"])])),_:1}),c(f,{class:"tag-text-box"},{default:u((()=>[c(f,{class:"tag-text"},{default:u((()=>[i(n(e.$t("秒杀价")),1)])),_:1})])),_:1})])),_:1}),c(f,{class:"title-top-market_price flex align-center"},{default:u((()=>[e.productOriginPrice&&Number(e.productOriginPrice)>Number(e.productPrice)?(o(),s(f,{key:0,class:"originalprice-box"},{default:u((()=>[i(n(e.$t("价格"))+" ",1),c(f,null,{default:u((()=>[c(d,{isBottom:!1,priceData:e.productOriginPrice,fontStyle:{"text-decoration":"line-through"}},null,8,["priceData"])])),_:1})])),_:1})):I("",!0)])),_:1})])),_:1})])),_:1}),c(f,{class:"seckill-time-box"},{default:u((()=>[c(f,{class:"countdown-box flex align-center"},{default:u((()=>[c(f,{class:"title-top-time"},{default:u((()=>[i(n(e.$t("距结束还剩")),1)])),_:1}),c(_,{endTime:e.seckillValue.seckill_end_time,fontSize:11,color:"#fff"},null,8,["endTime"])])),_:1}),c(f,{class:"stock-progress"},{default:u((()=>[c(f,{class:"progress-line-box"},{default:u((()=>[c(f,{class:"progress-line",style:k({width:`${p.value}`})},null,8,["style"])])),_:1}),c(f,{class:"progress-text"},{default:u((()=>[i(n(e.$t("仅剩"))+" "+n(r.value)+" "+n(e.$t("件")),1)])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-9c25554d"]]),ot=$e(e({__name:"productDiscountTitle",props:{productInfo:{},productPrice:{},productOriginPrice:{},discountValue:{},productStock:{}},setup:e=>(e,t)=>{const d=l(a("format-price"),Se),r=v,p=l(a("tig-countdown"),Me);return o(),s(r,{class:"product-seckill-title flex justify-between align-center"},{default:u((()=>[c(r,{class:"seckill-price-box"},{default:u((()=>[c(r,{class:"title-top-price"},{default:u((()=>[c(r,{class:"price-box"},{default:u((()=>[c(r,{class:"price"},{default:u((()=>[c(d,{fontStyle:{fontWeight:"bold"},decimalsStyle:{fontSize:"24rpx",fontWeight:"bold"},currencyStyle:{fontSize:"23rpx",fontWeight:"bold"},priceData:e.productPrice},null,8,["priceData"])])),_:1}),c(r,{class:"tag-text-box"},{default:u((()=>[c(r,{class:"tag-text"},{default:u((()=>[i(n(e.$t("直降"))+" ",1),c(d,{isBottom:!1,fontStyle:{fontWeight:"bold"},priceData:e.discountValue.discount_price},null,8,["priceData"])])),_:1})])),_:1})])),_:1}),c(r,{class:"title-top-market_price flex align-center"},{default:u((()=>[e.productOriginPrice&&Number(e.productOriginPrice)>Number(e.productPrice)?(o(),s(r,{key:0,class:"originalprice-box"},{default:u((()=>[i(n(e.$t("价格"))+" ",1),c(r,null,{default:u((()=>[c(d,{isBottom:!1,priceData:e.productOriginPrice,fontStyle:{"text-decoration":"line-through"}},null,8,["priceData"])])),_:1})])),_:1})):I("",!0),c(r,{class:"discountStock"},{default:u((()=>[c(r,null,{default:u((()=>[i(n(e.$t("剩余"))+" "+n(e.productStock),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),c(r,{class:"seckill-time-box"},{default:u((()=>[c(r,{class:"type-box"},{default:u((()=>[c(r,{class:"type-text"},{default:u((()=>[i(n(e.$t("限时折扣")),1)])),_:1})])),_:1}),c(r,{class:"countdown-box flex align-center"},{default:u((()=>[c(r,{class:"title-top-time"},{default:u((()=>[i(n(e.$t("距结束还剩")),1)])),_:1}),c(p,{backgroundColor:"rgba(0, 0, 0, .06)",endTime:e.discountValue.discount_end_time,fontSize:11,color:"#fff"},null,8,["endTime"])])),_:1})])),_:1})])),_:1})}}),[["__scopeId","data-v-cac32d57"]]),st=$e(e({__name:"productComment",props:{productId:{}},emits:["change"],setup(e,{emit:t}){const _=b(!1),m=b({}),g=b([]),h=b(1),k=b(10),x=e=>{q({url:e})},I=b([]),V=b(0);return J((e=>{if(e){const{id:t}=e;t&&((async e=>{_.value=!0;try{const t=await De(e);m.value=t.item}catch(t){}finally{_.value=!1}})(t),(async e=>{_.value=!0;try{const t=await ze(e,{type:1,page:h.value});g.value=t.filter_result}catch(t){L({title:t.message,icon:"none"})}finally{_.value=!1}})(t),(async e=>{try{const t=await Le({product_id:e,page:h.value,size:k.value});I.value=t.filter_result,V.value=t.total}catch(t){}finally{_.value=!1}})(t))}})),(e,t)=>{const _=w,h=v,b=l(a("uni-icons"),Ae),k=y,I=l(a("uni-rate"),We);return o(),s(h,{class:"product-comment-card"},{default:u((()=>[c(h,{class:"comment-title flex justify-between align-center"},{default:u((()=>[c(h,{class:"txt"},{default:u((()=>[i(n(e.$t("评价")),1),c(_,null,{default:u((()=>[i("("+n(m.value.total??0)+")",1)])),_:1})])),_:1}),c(h,{class:"more",onClick:t[0]||(t[0]=t=>x(`/pages/productDetail/comment?id=${e.productId}`))},{default:u((()=>[i(n(e.$t("好评")),1),c(_,null,{default:u((()=>[i(n(m.value.good_percent??0)+"%",1)])),_:1}),c(b,{type:"right",size:"16",color:"#bfbfbf"})])),_:1})])),_:1}),g.value.length>0?(o(!0),d(r,{key:0},p(g.value.slice(0,2),((e,t)=>(o(),s(h,{class:"comment-item",key:t},{default:u((()=>[c(h,{class:"user-info flex justify-between align-center"},{default:u((()=>[c(h,{class:"user-name flex align-center"},{default:u((()=>[c(h,{class:"head_logo"},{default:u((()=>[c(k,{src:f(P)((null==e?void 0:e.avatar)||"")},null,8,["src"])])),_:2},1024),c(h,null,{default:u((()=>[c(_,null,{default:u((()=>[i(n(e.username),1)])),_:2},1024),c(I,{readonly:!0,value:e.comment_rank,size:"14",color:"#bfbfbf","active-color":"#ffa800"},null,8,["value"])])),_:2},1024)])),_:2},1024),c(h,{class:"time"},{default:u((()=>[i(n(e.add_time),1)])),_:2},1024)])),_:2},1024),c(h,{class:"user-content"},{default:u((()=>[i(n(e.content),1)])),_:2},1024),c(h,{class:"user-imgs flex-wrap align-center"},{default:u((()=>[(o(!0),d(r,null,p(e.show_pics,((e,t)=>(o(),s(k,{key:t,src:f(P)(e.pic_thumb),onClick:t=>{return l=f(P)((null==e?void 0:e.pic_url)||""),void C({urls:[l]});var l}},null,8,["src","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128)):(o(),s(h,{key:1,class:"no-data"},{default:u((()=>[i(n(e.$t("暂无评价"))+"~ ",1)])),_:1})),c(h,{class:"comment-btn-box flex align-center justify-around"},{default:u((()=>[c(h,{class:"btn flex align-center",onClick:t[1]||(t[1]=t=>x(`/pages/productDetail/comment?id=${e.productId}`))},{default:u((()=>[c(b,{type:"chat",size:"20",color:"#333"}),c(_,null,{default:u((()=>[i(n(e.$t("全部评价"))+"("+n(m.value.total??0)+")",1)])),_:1})])),_:1}),c(h,{class:"btn flex align-center",onClick:t[2]||(t[2]=t=>x(`/pages/productDetail/consult?id=${e.productId}`))},{default:u((()=>[c(b,{type:"chatboxes",size:"20",color:"#333"}),c(_,null,{default:u((()=>[i(n(e.$t("购买咨询"))+"("+n(V.value??0)+")",1)])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-ac89d2f1"]]),ut=$e(e({__name:"productShopInfo",props:{shopInfo:{}},emits:["refreshShopDetail"],setup(e,{emit:d}){const{t:r}=j(),p=e,f=d,_=t((()=>p.shopInfo.collect_shop?r("取消收藏"):r("收藏店铺"))),m=()=>{p.shopInfo.collect_shop?g():y()},y=async()=>{try{await Re({shop_id:p.shopInfo.shop_id});L({title:r("收藏成功")}),f("refreshShopDetail",p.shopInfo.shop_id)}catch(e){console.error(e)}},g=async()=>{G({title:r("提示"),content:r("确认要取消收藏店铺吗？"),success:async e=>{if(e.confirm)try{await Re({shop_id:p.shopInfo.shop_id});L({title:r("操作成功")}),f("refreshShopDetail",p.shopInfo.shop_id)}catch(t){console.error(t)}}})},h=()=>{q({url:`/pages/shop/index?shop_id=${p.shopInfo.shop_id}`})};return(e,t)=>{const d=l(a("tig-image"),he),r=v,p=w;return o(),s(r,{class:"shop-info-box"},{default:u((()=>[c(r,{class:"shop-info-title"},{default:u((()=>[c(r,{class:"shop-info-title-left"},{default:u((()=>[c(d,{src:e.shopInfo.shop_logo,"onUpdate:src":t[0]||(t[0]=t=>e.shopInfo.shop_logo=t)},null,8,["src"])])),_:1}),c(r,{class:"shop-info-title-right"},{default:u((()=>[i(n(e.shopInfo.shop_title),1)])),_:1})])),_:1}),c(r,{class:"shop-info-btn"},{default:u((()=>[c(r,{class:"shop-info-btn-item",onClick:m},{default:u((()=>[i(n(e.$t(_.value)),1)])),_:1}),c(r,{class:"shop-info-btn-item",onClick:h},{default:u((()=>[c(p,{class:"iconfont icon-dianpu"}),i(" "+n(e.$t("进店逛逛")),1)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-d6b81298"]]),ct=$e(e({__name:"productCoupon",props:{modelValue:{type:Boolean,default:!1},promotionList:{type:Array,default:()=>[]},productId:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:_}){const{t:m}=j(),y=e,g=_,h=t({get:()=>y.modelValue,set(e){g("update:modelValue",e)}}),k={3:m("满减"),4:m("满折"),5:m("满赠")},w=t((()=>y.promotionList.filter((e=>3===e.type||4===e.type)))),V=t((()=>y.promotionList.filter((e=>5===e.type)))),C=(b(!1),(e,t,l)=>m(0===t?1===e?"已领取":"马上领":0===e?"马上领":l>=t?"已领取":"再次领取")),$=b([]),S=async()=>{try{const e=await Ue(Number(y.productId));$.value=e.list}catch(e){console.error(e.message)}};return E((()=>y.productId),(e=>{e&&e>0&&S()})),(e,t)=>{const _=v,y=l(a("format-price"),Se),g=l(a("tig-image"),he),b=X,P=l(a("tig-button"),xe),j=l(a("save-bottom-box"),qe),T=l(a("tig-popup"),ke);return o(),s(T,{show:h.value,"onUpdate:show":t[1]||(t[1]=e=>h.value=e),zIndex:999,showClose:!1,backgroundColor:"#fff"},{default:u((()=>[c(_,{class:"coupon-content"},{default:u((()=>[c(_,{class:"coupon-title"},{default:u((()=>[i(n(e.$t("优惠")),1)])),_:1}),c(_,{class:"promotion-box"},{default:u((()=>[I("",!0),w.value.length>0||V.value.length>0?(o(),s(_,{key:1,class:"activity-box"},{default:u((()=>[c(_,{class:"public-title"},{default:u((()=>[i(n(e.$t("促销")),1)])),_:1}),w.value.length>0?(o(!0),d(r,{key:0},p(w.value,(e=>(o(),s(_,{class:"activity-item",key:e.promotion_id},{default:u((()=>[c(_,{class:"activity-item-label"},{default:u((()=>[i(n(k[e.type]),1)])),_:2},1024),c(_,{class:"activity-item-value"},{default:u((()=>[c(_,{class:"activity-item-name"},{default:u((()=>[i(n(e.data.promotion_name),1)])),_:2},1024),c(_,{class:"activity-item-time"},{default:u((()=>[i(n(e.data.start_time)+"~"+n(e.data.end_time),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)):I("",!0),V.value.length>0?(o(!0),d(r,{key:1},p(V.value,(t=>(o(),d(r,{key:t.promotion_id},[(o(!0),d(r,null,p(t.data.promotion_desc,(t=>(o(),s(_,{class:"activity-item",key:t.gift_id},{default:u((()=>[c(_,{class:"activity-item-label"},{default:u((()=>[i(n(e.$t("满赠")),1)])),_:1}),c(_,{class:"activity-product"},{default:u((()=>[c(_,{class:"activity-name"},{default:u((()=>[i(n(t.desc),1)])),_:2},1024),c(b,{class:"scroll-x","scroll-x":"true"},{default:u((()=>[c(_,{class:"activity-product-item",onClick:e=>{return l=t.gift.product_info.product_id,void q({url:`/pages/productDetail/index?id=${l}`});var l}},{default:u((()=>[c(g,{src:t.gift.product_info.pic_thumb,"onUpdate:src":e=>t.gift.product_info.pic_thumb=e,class:"gift-img"},null,8,["src","onUpdate:src"]),c(_,{class:"gift-price"},{default:u((()=>[c(y,{showText:!1,fontStyle:{fontSize:"18rpx",fontWeight:"bold"},isBottom:!1,priceData:t.gift.product_info.product_price},null,8,["priceData"])])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))],64)))),128)):I("",!0)])),_:1})):I("",!0),$.value.length>0?(o(),s(_,{key:2,class:"coupon-box"},{default:u((()=>[c(_,{class:"public-title"},{default:u((()=>[i(n(e.$t("可领优惠券")),1)])),_:1}),(o(!0),d(r,null,p($.value,(t=>(o(),s(_,{key:t.coupon_id,class:"coupon-item"},{default:u((()=>[c(_,{class:"left"},{default:u((()=>[c(_,{class:"col-1"},{default:u((()=>[c(_,{class:"title"},{default:u((()=>[i(n(t.coupon_name),1)])),_:2},1024)])),_:2},1024),t.coupon_desc?(o(),s(_,{key:0,class:"col-2"},{default:u((()=>[i(n(t.coupon_desc),1)])),_:2},1024)):I("",!0),1===t.send_type?(o(),s(_,{key:1,class:x(["col-3",{"special-col":!t.coupon_desc}])},{default:u((()=>[i(n(e.$t("有效期"))+"："+n(t.use_end_date),1)])),_:2},1032,["class"])):I("",!0),0===t.send_type&&t.delay_day>0?(o(),s(_,{key:2,class:x(["col-3",{"special-col":!t.coupon_desc}])},{default:u((()=>[i(n(f(K)()?e.$t("领券{0}天后生效，有效期{1}天",[t.delay_day,t.use_day]):`领券${t.delay_day}天后生效，有效期${t.use_day}天`),1)])),_:2},1032,["class"])):I("",!0),0===t.send_type&&0===t.delay_day?(o(),s(_,{key:3,class:x(["col-3",{"special-col":!t.coupon_desc}])},{default:u((()=>[i(n(f(K)()?e.$t("领券当日起{0}天内可用",[t.use_day]):`领券当日起${t.use_day}天内可用`),1)])),_:2},1032,["class"])):I("",!0)])),_:2},1024),c(_,{class:"right"},{default:u((()=>[c(_,{class:"right-1"},{default:u((()=>[2===t.coupon_type?(o(),d(r,{key:0},[c(_,{class:"zhekou"},{default:u((()=>[i(n(t.coupon_discount),1)])),_:2},1024),c(_,{class:"zhe"},{default:u((()=>[i(n(e.$t("折")),1)])),_:1})],64)):(o(),s(y,{key:1,showText:!1,fontStyle:{fontSize:"48rpx",lineHeight:1,fontWeight:"400"},currencyStyle:{selfAlign:"end",fontSize:"28rpx"},priceData:t.coupon_money},null,8,["priceData"]))])),_:2},1024),"已领取"!==C(t.is_receive,t.limit_num,t.receive_num)?(o(),s(_,{key:0,class:"right-2"},{default:u((()=>[c(_,null,{default:u((()=>[c(P,{customStyle:{height:"55rpx"},onClick:e=>(async e=>{if(!(1===e.is_receive&&e.limit_num>0&&e.receive_num>=e.limit_num))try{await Ge({coupon_id:e.coupon_id}),L({title:m("领取成功"),duration:1e3}),setTimeout((()=>{S()}),500)}catch(t){console.log("error",t),L({title:t.message,icon:"none"})}})(t)},{default:u((()=>[i(n(C(t.is_receive,t.limit_num,t.receive_num)),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)):(o(),s(_,{key:1,class:"already-received-box"},{default:u((()=>[c(_,{class:"already-received-content"},{default:u((()=>[c(_,{class:"already-received-text"},{default:u((()=>[i(n(C(t.is_receive,t.limit_num,t.receive_num)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024))])),_:2},1024),c(_,{class:"dotted-line"})])),_:2},1024)))),128))])),_:1})):I("",!0)])),_:1})])),_:1}),c(j,{height:"55",backgroundColor:"#fff"},{default:u((()=>[c(_,{class:"btn-box"},{default:u((()=>[c(P,{style:{width:"100%",height:"100%"},onClick:t[0]||(t[0]=t=>e.$emit("update:modelValue",!1))},{default:u((()=>[i(n(e.$t("我知道了")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}}),[["__scopeId","data-v-27054f3b"]]),it=$e(e({__name:"afterSaleService",props:{id:{type:[String,Number],default:""}},setup(e){const t=e,l=b({});return Z((()=>{t.id&&(async e=>{try{const t=await Ne(e);Object.assign(l.value,t.item)}catch(t){L({title:t.message,icon:"none"})}})(t.id)})),(e,t)=>{const a=Q,i=v;return o(),s(i,null,{default:u((()=>[c(i,{class:"tab_body"},{default:u((()=>[c(a,{nodes:l.value.template_content},null,8,["nodes"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-5d93126a"]]),nt=$e(e({__name:"productContent",props:{descArr:{type:Array,default:()=>[]},productId:{type:Number,default:""},productType:{type:Number,default:1},isBuy:{type:Number,default:0},paidContent:{type:String,default:""}},setup(e){const t=e,l=b(0);return Z((()=>{4===t.productType&&(l.value=2)})),(t,a)=>{const m=v,g=y,h=Q;return o(),s(m,{class:"product-card-row product-detail-area"},{default:u((()=>[c(m,{class:"tab-box flex align-center justify-around"},{default:u((()=>[f(te)()&&4===e.productType?(o(),s(m,{key:0,class:x(["tab",{active:2==l.value}]),onClick:a[0]||(a[0]=e=>l.value=2)},{default:u((()=>[i(n(t.$t("付费内容")),1)])),_:1},8,["class"])):(o(),s(m,{key:1,class:x(["tab",{active:0==l.value}]),onClick:a[1]||(a[1]=e=>l.value=0)},{default:u((()=>[i(n(t.$t("商品介绍")),1)])),_:1},8,["class"])),c(m,{class:x(["tab",{active:1==l.value}]),onClick:a[2]||(a[2]=e=>l.value=1)},{default:u((()=>[i(n(t.$t("售后服务")),1)])),_:1},8,["class"])])),_:1}),0==l.value?(o(),s(m,{key:0,class:"default"},{default:u((()=>[(o(!0),d(r,null,p(e.descArr,(e=>(o(),d(r,{key:e},["pic"==e.type?(o(),s(m,{key:0,class:"desc-pic-item"},{default:u((()=>[c(g,{"lazy-load":"",src:f(P)((null==e?void 0:e.pic)||""),class:"slide-image",mode:"widthFix"},null,8,["src"])])),_:2},1024)):I("",!0),"text"==e.type?(o(),s(h,{key:1,class:"desc-text-item",nodes:e.html},null,8,["nodes"])):I("",!0)],64)))),128))])),_:1})):I("",!0),Y(c(m,{class:"default"},{default:u((()=>[c(it,{id:e.productId},null,8,["id"])])),_:1},512),[[ee,1==l.value]]),2==l.value?(o(),s(m,{key:1,class:"default"},{default:u((()=>[c(m,{class:"paidcontent"},{default:u((()=>[1===e.isBuy?(o(),s(h,{key:0,nodes:e.paidContent},null,8,["nodes"])):(o(),s(g,{key:1,class:"img",src:f(_)("product/paid_content_bg.png"),mode:"widthFix"},null,8,["src"]))])),_:1})])),_:1})):I("",!0)])),_:1})}}}),[["__scopeId","data-v-fba1a7e9"]]),dt=$e(e({__name:"animation",props:{animationPosition:{},styleVariable:{}},emits:["animationEnd"],setup(e,{emit:t}){g((e=>({"5a8834df":l.animationPosition.top+"px","47e4b782":l.animationPosition.left+"px"})));const l=e,a=t,i=()=>{a("animationEnd")};return(e,t)=>{const l=v;return o(),s(l,{class:"animation",style:k({...e.styleVariable}),onAnimationend:i},{default:u((()=>[c(l,{class:"animation-content"})])),_:1},8,["style"])}}}),[["__scopeId","data-v-797bf5b8"]]),rt=$e(e({__name:"index",setup(e){const g=R(),{scrollTop:x}=we(),V=b(0),C=b(!1),$=h(),S=b(),j=b(0),T=b({top:0,left:0}),z=b(),N=b(""),B=b(0),O=()=>{C.value=!0},F=()=>{S.value&&S.value.handleShowPopup()},W=b({product_id:0,product_stock:0}),E=b({}),H=b([]),G=b([]),K=b([]),X=b({}),Z=b([]),Q=b([]),Y=b(!0),ee=()=>{Y.value=!1},te=b({}),xe=async e=>{try{const t=await Ee(e);te.value=t.item}catch(t){console.error(t)}},$e=e=>{xe(e)},Se=()=>{te.value.shop_id&&q({url:`/pages/shop/index?shop_id=${te.value.shop_id}`})},Pe=b(""),je=b("0"),Te=b("0"),De=b(0),ze=b(0),Le=b({}),Ue=b(1),Ne=b([]),Oe=b(0),Fe=b({}),Me=b(""),Ae=e=>{e.productSkuId&&e.skuStr&&(Pe.value=e.skuStr),De.value=e.productStock,Ne.value=e.promotionList,je.value=e.productPrice,Te.value=e.productOriginPrice,Ue.value=e.productNumber,ze.value=e.is_seckill,Le.value=e.seckillValue,Oe.value=e.is_discount,Fe.value=e.discountValue,Me.value=e.discount_end_time},We=b(0),Re=async()=>{try{const e=await Xe();We.value=e.count}catch(e){}};b(!1),b("北京 朝阳区");const qe=b(!1),Ge=t((()=>{if(E.value.normal&&E.value.normal.length){return E.value.normal.map((e=>e.attr_name)).join("/")}return""})),Ze=()=>{re({url:"/pages/index/index"})},et=()=>{q({url:"/pages/search/result"})},tt=A(),it=b(D()),rt=e=>{const t=pe().in(tt);t.select(e).boundingClientRect(),t.selectViewport().scrollOffset((()=>{})),t.exec((e=>{fe({scrollTop:e[0].top+e[1].scrollTop-50,duration:0})}))},pt=b(".product-area"),ft=b(null),_t=b(null),mt=b(null),vt=(e,t)=>{e.relativeToViewport({bottom:-(it.value.windowHeight-200)}).observe(t,(e=>{e.intersectionRatio>0&&(pt.value=t)}))},yt=b(0);J((e=>{e&&(e.type&&(N.value=e.type),e.id&&(async e=>{try{let t={};"exchange"===N.value?(t=await Je(e),B.value=t.exchange_info.exchange_integral,De.value=t.exchange_info.product_stock,je.value=t.exchange_info.discounts_price||"0",j.value=t.exchange_info.id):(t=await Be(e),De.value=t.item.product_stock,je.value=t.item.product_price||"0",j.value=t.item.product_id),V.value=t.item.product_id,W.value=t.item,E.value=t.attr_list,G.value=t.pic_list,X.value=t.rank_detail,H.value=t.sku_list,Q.value=t.checked_value,Z.value=t.desc_arr,K.value=t.service_list,de({title:t.item.product_name}),t.item.shop_id&&xe(t.item.shop_id),ue((()=>{var e;null==(e=z.value)||e.handleLog()}))}catch(t){L({title:t.message,icon:"none"})}})(Number(e.id)),e.sku_id&&(yt.value=Number(e.sku_id)),e.salesman_id&&((e,t)=>{let l=U("salesmanProducts")||[];if(l.length>0){const a=l.findIndex((e=>e.product_id==t));-1!==a&&(l[a].salesman_id=e)}l=[...l,{salesman_id:e,product_id:t}],_e("salesmanProducts",l)})(e.salesman_id,e.id))})),le((()=>{Re()})),ae((()=>{null==ft||ft.value.disconnect(),null==_t||_t.value.disconnect(),null==mt||mt.value.disconnect(),oe()})),se((()=>{ue((()=>{ft.value=me(this),_t.value=me(this),mt.value=me(this),vt(ft.value,".product-area"),vt(_t.value,".evaluate-area"),vt(mt.value,".product-detail-area")}))}));const gt=b(!1),ht=async e=>{await xt(".cart-position",this),await bt(".cart",this),gt.value=e,Re()},bt=async(e,t)=>{const l=await ve(e,t);if(l){const{width:e,height:t,top:a,left:o}=l;T.value.top=a-t/2,T.value.left=o+e/2}},kt=b({left:0,top:0}),xt=async(e,t)=>{const l=await ve(e,t);if(l){const{width:e,height:t,top:a,left:o}=l;kt.value.top=a-t/2,kt.value.left=o+e/2}},wt=t((()=>({"--x":kt.value.left-T.value.left+"px","--y":"8px"})));ce((e=>({title:W.value.product_name,imageUrl:P(W.value.pic_url)}))),ie((()=>({title:W.value.product_name,imageUrl:P(W.value.pic_url)})));const It=t((()=>Object.keys(te.value).length>0?!!(te.value.kefu_inlet&&te.value.kefu_inlet.length>0&&te.value.kefu_inlet.includes(1)):g.serviceConfig.show));return(e,t)=>{const g=v,h=w,b=y,P=l(a("tig-image"),he),D=l(a("uni-badge"),be),L=l(a("tig-popup"),ke),U=l(a("tig-back-top"),Ve),A=l(a("tig-layout"),Ie),R=l(a("tig-loadingpage"),Ce);return o(),s(g,null,{default:u((()=>[c(g,{style:k({display:Y.value?"none":"block"})},{default:u((()=>[c(A,{ref_key:"layoutRef",ref:z,immediateLog:!1,productId:V.value,shopId:W.value.shop_id},{default:u((()=>[c(Qe,{modelValue:f(x),"onUpdate:modelValue":t[0]||(t[0]=e=>ne(x)?x.value=e:null),activeModule:pt.value,"onUpdate:activeModule":t[1]||(t[1]=e=>pt.value=e),event:rt},null,8,["modelValue","activeModule"]),c(Ye,{class:"product-area",picList:G.value,productInfo:W.value},null,8,["picList","productInfo"]),ze.value?(o(),s(at,{key:0,productInfo:W.value,productOriginPrice:Te.value,productPrice:je.value,seckillValue:Le.value},null,8,["productInfo","productOriginPrice","productPrice","seckillValue"])):I("",!0),Oe.value?(o(),s(ot,{key:1,productInfo:W.value,productOriginPrice:Te.value,productPrice:je.value,discountValue:Fe.value,productStock:De.value},null,8,["productInfo","productOriginPrice","productPrice","discountValue","productStock"])):I("",!0),c(g,{class:"productDetail-content",style:k({"padding-bottom":(0===W.value.product_status||0===De.value?160:100)+"rpx"})},{default:u((()=>[c(lt,{is_seckill:ze.value,promotionList:Ne.value,productInfo:W.value,productPrice:je.value,is_discount:Oe.value,showCoupon:qe.value,"onUpdate:showCoupon":t[2]||(t[2]=e=>qe.value=e),type:N.value,exchangeIntegral:B.value,showMarketPrice:f($).show_marketprice},null,8,["is_seckill","promotionList","productInfo","productPrice","is_discount","showCoupon","type","exchangeIntegral","showMarketPrice"]),c(g,{class:"product-card-row"},{default:u((()=>{var l;return[c(He,{onLoadEnd:ee,ref_key:"specificationRef",ref:S,modelValue:j.value,"onUpdate:modelValue":t[3]||(t[3]=e=>j.value=e),skuId:yt.value,"onUpdate:skuId":t[4]||(t[4]=e=>yt.value=e),onAddCardSucceed:ht,onSendValue:Ae,type:N.value},{default:u((()=>[f(ye)()?(o(),d(r,{key:0},[E.value.spe&&E.value.spe.length>0?(o(),s(g,{key:0,class:"cart-item flex align-center justify-between"},{default:u((()=>[c(g,{class:"flex align-center"},{default:u((()=>[c(g,{class:"title"},{default:u((()=>[i(n(e.$t("规格")),1)])),_:1}),c(g,{class:"label"},{default:u((()=>[(o(!0),d(r,null,p(E.value.spe,(e=>(o(),s(h,{key:e},{default:u((()=>[i(n(`${e.attr_list.length}种${e.attr_name} `),1)])),_:2},1024)))),128))])),_:1})])),_:1}),c(g,null,{default:u((()=>[c(b,{class:"icon-image",src:f(_)("common/more.png")},null,8,["src"])])),_:1})])),_:1})):I("",!0)],64)):(o(),s(g,{key:1,class:"cart-item flex align-center justify-between"},{default:u((()=>[c(g,{class:"flex align-center"},{default:u((()=>[c(g,{class:"title"},{default:u((()=>[i(n(e.$t("已选")),1)])),_:1}),c(g,{class:"label"},{default:u((()=>[i(n(Pe.value)+" "+n(Ue.value)+" 件 ",1)])),_:1})])),_:1}),c(g,null,{default:u((()=>[c(b,{class:"icon-image",src:f(_)("common/more.png")},null,8,["src"])])),_:1})])),_:1})),f($).show_selled_count?(o(),s(g,{key:2,class:"cart-item flex align-center justify-between"},{default:u((()=>[c(g,{class:"flex align-center"},{default:u((()=>[c(g,{class:"title"},{default:u((()=>[i(n(e.$t("销量")),1)])),_:1}),c(g,{class:"label"},{default:u((()=>[i(n(W.value.virtual_sales)+" 件 ",1)])),_:1})])),_:1})])),_:1})):I("",!0)])),_:1},8,["modelValue","skuId","type"]),(null==(l=E.value.normal)?void 0:l.length)>0?(o(),s(g,{key:0,class:"cart-item flex align-center justify-between",onClick:O},{default:u((()=>[c(g,{class:"flex align-center"},{default:u((()=>[c(g,{class:"title"},{default:u((()=>[i(n(e.$t("参数")),1)])),_:1}),c(g,{class:"label attr_text line1"},{default:u((()=>[c(g,{class:"shuxin"},{default:u((()=>[i(n(Ge.value),1)])),_:1})])),_:1})])),_:1}),c(g,null,{default:u((()=>[c(b,{class:"icon-image",":src":f(_)("common/more.png")},null,8,[":src"])])),_:1})])),_:1})):I("",!0),K.value.length>0?(o(),s(g,{key:1,class:"cart-item"},{default:u((()=>[c(g,{class:"flex"},{default:u((()=>[c(g,{class:"title"},{default:u((()=>[i(n(e.$t("服务")),1)])),_:1}),c(g,{class:"label flex-wrap align-center servicelist"},{default:u((()=>[(o(!0),d(r,null,p(K.value,((e,t)=>(o(),d("span",{key:t,class:"flex align-center service-item"},[c(P,{style:{width:"15px",height:"15px"},src:e.ico_img,"onUpdate:src":t=>e.ico_img=t},null,8,["src","onUpdate:src"]),i(n(e.product_service_name),1)])))),128))])),_:1})])),_:1})])),_:1})):I("",!0)]})),_:1}),Object.keys(te.value).length>0&&f(ge)()?(o(),s(ut,{key:0,shopInfo:te.value,onRefreshShopDetail:$e},null,8,["shopInfo"])):I("",!0),c(st,{class:"evaluate-area",productId:W.value.product_id},null,8,["productId"]),c(nt,{isBuy:W.value.is_buy,paidContent:W.value.paid_content,productType:W.value.product_type,descArr:Z.value,productId:W.value.product_id},null,8,["isBuy","paidContent","productType","descArr","productId"])])),_:1},8,["style"]),4!==W.value.product_type||1!==W.value.is_buy?(o(),s(g,{key:2,style:k({"padding-bottom":f($).saveBottom+"rpx"}),class:"bottom-bar-box"},{default:u((()=>[c(g,{class:"bottom-bar flex align-center"},{default:u((()=>[c(g,{class:"icon-box"},{default:u((()=>[te.value.shop_id?(o(),s(g,{key:0,class:"label",onClick:Se},{default:u((()=>[c(g,null,{default:u((()=>[c(b,{src:f(_)("/product/shop.png"),class:"img"},null,8,["src"])])),_:1}),c(g,{class:"label-text"},{default:u((()=>[c(h,null,{default:u((()=>[i(n(e.$t("店铺")),1)])),_:1})])),_:1})])),_:1})):(o(),s(g,{key:1,class:"label",onClick:Ze},{default:u((()=>[c(g,null,{default:u((()=>[c(b,{mode:"widthFix",src:f(_)("product/home.png"),class:"img"},null,8,["src"])])),_:1}),c(g,{class:"label-text"},{default:u((()=>[c(h,null,{default:u((()=>[i(n(e.$t("首页")),1)])),_:1})])),_:1})])),_:1})),It.value?(o(),s(g,{key:2,class:"label"},{default:u((()=>[c(Ke,{phone:te.value.kefu_phone,product_id:V.value,shop_id:te.value.shop_id},{default:u((()=>[c(g,null,{default:u((()=>[c(b,{mode:"widthFix",src:f(_)("/product/service.png"),class:"img"},null,8,["src"])])),_:1}),c(g,{class:"label-text"},{default:u((()=>[c(h,null,{default:u((()=>[i(n(e.$t("客服")),1)])),_:1})])),_:1})])),_:1},8,["phone","product_id","shop_id"])])),_:1})):I("",!0),c(g,{class:"label cart-position",onClick:t[5]||(t[5]=M((e=>{m({url:"/pages/cart/index"})}),["stop"]))},{default:u((()=>[c(g,null,{default:u((()=>[c(D,{class:"uni-badge-left-margin badgecolor",text:We.value,absolute:"rightTop",size:"small"},{default:u((()=>[c(b,{mode:"widthFix",src:f(_)("product/cart.png"),class:"img"},null,8,["src"])])),_:1},8,["text"])])),_:1}),c(g,{class:"label-text"},{default:u((()=>[c(h,null,{default:u((()=>[i(n(e.$t("购物车")),1)])),_:1})])),_:1})])),_:1})])),_:1}),c(g,{class:"btn-box"},{default:u((()=>[0===W.value.product_status||0===De.value?(o(),s(g,{key:0,class:"other-products-btn",onClick:et},{default:u((()=>[i(n(e.$t("查看其他商品")),1)])),_:1})):(o(),d(r,{key:1},["exchange"===N.value?(o(),s(g,{key:0,class:"other-products-btn",onClick:F},{default:u((()=>[i(n(e.$t("立即兑换")),1)])),_:1})):(o(),d(r,{key:1},[1===W.value.product_type?(o(),d(r,{key:0},[c(g,{class:"btn cart",onClick:F},{default:u((()=>[i(n(e.$t("加入购物车")),1)])),_:1}),c(g,{class:"btn buy",onClick:F},{default:u((()=>[i(n(e.$t("立即购买")),1)])),_:1})],64)):(o(),s(g,{key:1,class:"other-products-btn",onClick:F},{default:u((()=>[i(n(e.$t("立即购买")),1)])),_:1}))],64))],64))])),_:1}),0===W.value.product_status||0===De.value?(o(),s(g,{key:0,class:"product-status"},{default:u((()=>[i(n(e.$t(0===W.value.product_status?"商品已下架":"商品已售罄")),1)])),_:1})):I("",!0)])),_:1})])),_:1},8,["style"])):I("",!0),c(ct,{productId:Number(V.value),promotionList:Ne.value,modelValue:qe.value,"onUpdate:modelValue":t[6]||(t[6]=e=>qe.value=e)},null,8,["productId","promotionList","modelValue"]),c(L,{show:C.value,"onUpdate:show":t[7]||(t[7]=e=>C.value=e)},{default:u((()=>[c(g,{class:"attr_table-box"},{default:u((()=>[c(g,{class:"popup-title title"},{default:u((()=>[i(n(e.$t("规格参数")),1)])),_:1}),c(g,{class:"attr_table"},{default:u((()=>[(o(!0),d(r,null,p(E.value.normal,((e,t)=>(o(),s(g,{key:t,class:"item flex"},{default:u((()=>[c(g,{class:"lable"},{default:u((()=>[i(n(e.attr_name),1)])),_:2},1024),(o(!0),d(r,null,p(e.attr_list,((e,t)=>(o(),s(g,{class:"value",key:t},{default:u((()=>[i(n(e.attr_value),1)])),_:2},1024)))),128))])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["show"]),c(U,{scrollTop:f(x)},null,8,["scrollTop"]),gt.value?(o(),s(dt,{key:3,onAnimationEnd:t[8]||(t[8]=e=>gt.value=!1),styleVariable:wt.value,animationPosition:T.value},null,8,["styleVariable","animationPosition"])):I("",!0)])),_:1},8,["productId","shopId"])])),_:1},8,["style"]),c(R,{modelValue:Y.value,"onUpdate:modelValue":t[9]||(t[9]=e=>Y.value=e)},null,8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-77cb3e61"]]);export{rt as default};
