import{e as a,u as e,r as s,f as t,h as o,j as l,k as u,p as r,m as i,n,c,w as p,s as m,i as d,q as v,x as _,y,o as f,a as g,B as j,A as x,C as h,D as T,z as b,F as w,_ as k}from"./index-BKzbZvRR.js";import{_ as I}from"./tig-back-top.vue_vue_type_script_setup_true_lang.CIMNqfpz.js";import{u as L,_ as z}from"./tig-layout.BpNdXByQ.js";import{g as C,a as F}from"./home.Cp7aP7xW.js";import{u as A,m as B}from"./index.O0ddZqso.js";import{m as D}from"./masonry.XQRK2NFB.js";import"./tig-image.DrOwWlV9.js";import"./index.DVcVp2vA.js";import"./format-price.kSnuguuz.js";import"./tig-fixed-placeholder.s9cnCRBL.js";import"./tig-countdown.vue_vue_type_script_setup_true_lang.D1VN3hDu.js";import"./specification.DeG19GHJ.js";import"./uni-icons.DELFdrY8.js";import"./uni-number-box.CzE6YkX8.js";import"./product.BqL6tr7k.js";import"./activityCard.DDPb7Kxq.js";const G=k(a({__name:"index",setup(a){const{scrollTop:k}=L(),G=e(),q=s(0),E=s(!1),H=s([]),$=s(0),J=s(1),K=s(!1),M=s(!0),N=s([]),O=a=>{$.value=a,console.log("categoryId",a),0!==$.value&&(J.value=1,K.value=!1,N.value=[],P())},P=async()=>{M.value=!0;try{const a=await C({categoryId:$.value,page:J.value});a.records&&a.records.length>0?(N.value=[...N.value,...a.records],K.value=!1):K.value=!0}catch(a){console.error(a)}finally{M.value=!1}},Q=async a=>{E.value=!0;try{const e=await F(a);H.value=e.moduleList,q.value=1,m()}catch(e){console.error(e)}finally{E.value=!1}};t((a=>{a&&a.id&&Q(a.id),R.reset()}));const R=A();return o((()=>{$.value=0,R.reset(),Q()})),l((()=>{$.value>0&&!E.value&&!K.value&&(J.value++,P())})),u((()=>{k.value>0&&setTimeout((()=>{r({scrollTop:k.value,duration:0})}),50)})),i((a=>({title:G.baseInfo.shopTitle}))),n((()=>({title:G.baseInfo.shopTitle}))),(a,e)=>{const s=j,t=d,o=v(y("up-empty"),_),l=v(y("tig-back-top"),I),u=v(y("tig-layout"),z);return f(),c(t,null,{default:p((()=>[g(u,null,{default:p((()=>[g(t,null,{default:p((()=>[E.value?(f(),c(t,{key:0,class:"index_empty"},{default:p((()=>[g(s,{"lazy-load":"",src:x(h)("common/index_empty.png"),mode:"widthFix"},null,8,["src"])])),_:1})):(f(),c(t,{key:1,class:"index"},{default:p((()=>[g(t,{class:"decorate-page-window"},{default:p((()=>[g(B,{modules:H.value,scrollTop:x(k),onLoadGoodsList:O},null,8,["modules","scrollTop"]),$.value>0&&N.value.length>0?(f(),T(w,{key:0},[g(D,{commodityList:N.value},null,8,["commodityList"]),M.value||0!==N.value.length?b("",!0):(f(),c(t,{key:0,class:"empty-box"},{default:p((()=>[g(o,{icon:x(h)("salesman/no_order.png"),text:a.$t("暂无数据")},null,8,["icon","text"])])),_:1}))],64)):b("",!0)])),_:1})])),_:1})),g(l,{scrollTop:x(k)},null,8,["scrollTop"])])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-a521f09b"]]);export{G as default};
