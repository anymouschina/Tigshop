import{e,G as a,R as t,q as s,y as l,c as o,o as u,i as c,w as i,a as n,b as r,t as d,z as p,T as f,D as _,F as m,J as v,A as g,C as y,N as k,aG as C,_ as x,B as b,a7 as w,r as h,ar as $,u as j,k as T,ab as L,b6 as I,a9 as P,b2 as U,d as R,W as S,P as z}from"./index-BKzbZvRR.js";import{u as q,_ as A,c as F}from"./tig-layout.BpNdXByQ.js";import{_ as N}from"./tig-image.DrOwWlV9.js";import{_ as B}from"./tig-upload.vue_vue_type_script_setup_true_lang.C9gT76Tx.js";import{_ as G}from"./uni-badge.D9pmvW-4.js";import{_ as O}from"./tig-back-top.vue_vue_type_script_setup_true_lang.CIMNqfpz.js";import{r as D}from"./index.CiDM1A-3.js";import{d as E}from"./home.Cp7aP7xW.js";import{a as H}from"./order.BKDxR0lS.js";import"./masonry.XQRK2NFB.js";import"./format-price.kSnuguuz.js";import"./specification.DeG19GHJ.js";import"./uni-icons.DELFdrY8.js";import"./uni-number-box.CzE6YkX8.js";import"./product.BqL6tr7k.js";import"./activityCard.DDPb7Kxq.js";import"./useList.qLYpICh7.js";const J=x(e({__name:"index",props:{data:{type:Array,default:()=>[]},menuType:{type:[Number,String],default:1}},setup(e){const x=e;a("userInfo");const b=t((()=>{let e=x.data;return e=e.filter((e=>"分销员中心"!==e.picTitle)),e=e.filter((e=>"实名认证"!==e.picTitle)),e=e.filter((e=>"商家入驻"!==e.picTitle)),e}));return(a,t)=>{const x=c,w=s(l("tig-image"),N);return u(),o(x,{class:"service-box"},{default:i((()=>[n(x,{class:"service-title"},{default:i((()=>[r(d(a.$t("我的服务")),1)])),_:1}),n(x,{class:"service-content"},{default:i((()=>[b.value.length>0?(u(),o(x,{key:0,class:f(["service-list",{grid:2==e.menuType,column:1==e.menuType}])},{default:i((()=>[(u(!0),_(m,null,v(b.value,((t,s)=>(u(),o(x,{key:s,class:"service-item",onClick:e=>(e=>{k({url:C(e.picLink)})})(t)},{default:i((()=>[n(x,{class:"service-icon"},{default:i((()=>[n(w,{"lazy-load":"",src:g(y)(t.picUrl)},null,8,["src"])])),_:2},1024),n(x,{class:"service-label"},{default:i((()=>[r(d(a.$t(t.picTitle??""))+" ",1),1===e.menuType?(u(),o(x,{key:0,class:"service-arrow iconfont-h5 icon-youjiantou"})):p("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["class"])):p("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-ad5c208a"]]),W=x(e({__name:"index",props:{data:{type:Object,default:()=>({})}},setup:e=>(a,t)=>{const s=b,l=c;return u(),o(l,{class:"advertising-box"},{default:i((()=>[n(l,{class:"advertising-content"},{default:i((()=>[n(s,{class:"advertising-image",onClick:t[0]||(t[0]=a=>{var t;(null==(t=e.data)?void 0:t.picLink)&&k({url:C(t.picLink)})}),src:g(w)(e.data.picUrl),mode:"widthFix"},null,8,["src"])])),_:1})])),_:1})}}),[["__scopeId","data-v-d26710c2"]]),Z=e({__name:"index",setup(e){const a=h([]);return(async()=>{try{const e=await E();a.value=e.data}catch(e){console.error(e)}})(),(e,t)=>{const s=c;return u(),o(s,null,{default:i((()=>[(u(!0),_(m,null,v(a.value,((e,a)=>(u(),_(m,{key:a},["bannerList"===e.type&&e.module.bannerList.picUrl?(u(),o(W,{key:0,data:e.module.bannerList},null,8,["data"])):p("",!0),"menus"===e.type?(u(),o(J,{key:1,menuType:e.module.menuType,data:e.module.menuList},null,8,["menuType","data"])):p("",!0)],64)))),128))])),_:1})}}}),K=x(e({__name:"index",setup(e){const{scrollTop:f}=q(),v=$(),k=j(),C=h(),x=t({get:()=>v.userInfo,set:e=>v.setUserInfo(e)}),E=h({collectCount:0,collectStoreCount:0,stayCommentOrder:0,rePay:0,reReceive:0,returnCount:0,bonus:0}),J=h({}),W=async()=>{try{const e=await H();J.value=e}catch(e){console.error(e)}},K=e=>{z({url:e})},M=()=>{v.getUserInfo(),W()},Q=t((()=>v.token||a("token"))),V=t((()=>`url(${y("product/unverified.png")});`));return T((()=>{if(!Q.value)return x.value={},E.value={collectCount:0,collectStoreCount:0,stayCommentOrder:0,rePay:0,reReceive:0,returnCount:0,bonus:0},void(J.value={});v.getUserInfo(),W()})),(e,a)=>{const t=s(l("tig-navbar"),F),h=b,$=c,j=s(l("tig-image"),N),T=s(l("tig-upload"),B),z=R,q=s(l("uni-badge"),G),H=s(l("tig-layout"),A),W=s(l("tig-back-top"),O);return u(),_(m,null,[n(H,{ref_key:"layoutRef",ref:C,onLoginSuccess:M},{default:i((()=>[n(t,{showLeft:!1,title:"会员中心",background:"linear-gradient(90deg, #fcf6fc, #f3f3fe)"}),n($,{class:"user"},{default:i((()=>[n($,{class:"user_header user_bg_color"},{default:i((()=>[n($,{class:"picTxt"},{default:i((()=>[Q.value?(u(),o(T,{key:1,class:"pictrue",onChange:a[0]||(a[0]=e=>g(v).getUserInfo()),requestUrl:"user/user/modify_avatar"},{default:i((()=>[n(j,{class:"pic-btn",src:g(w)(x.value.avatar)},null,8,["src"])])),_:1})):(u(),o($,{key:0,class:"pictrue",onClick:g(L)},{default:i((()=>[n(h,{class:"pic-btn",src:g(y)("common/empty-img-bg3.png")},null,8,["src"])])),_:1},8,["onClick"])),n($,{class:"text"},{default:i((()=>[Q.value?(u(),_(m,{key:1},[n($,{class:"acea-row row-middle info"},{default:i((()=>{var t;return[g(I)()?(u(),_(m,{key:0},[x.value.isCompanyAuth?(u(),o($,{key:0,class:"auth",onClick:a[1]||(a[1]=e=>K("/pages/user/userCertification/index"))},{default:i((()=>[n(h,{src:g(y)("product/authenticated.svg")},null,8,["src"])])),_:1})):(u(),o($,{key:1,class:"auth",onClick:a[2]||(a[2]=e=>K("/pages/user/userCertification/index"))},{default:i((()=>[n($,{class:"unverified",style:P(`background-image: ${V.value};`)},null,8,["style"])])),_:1}))],64)):p("",!0),n($,{class:"name line1"},{default:i((()=>[r(d(x.value.nickname||x.value.username),1)])),_:1}),(null==(t=x.value)?void 0:t.showSign)?(u(),o($,{key:1,class:"acea-row qiandao",onClick:a[3]||(a[3]=e=>K("/pages/user/sign/index"))},{default:i((()=>[n($,{class:"iconfont icon-qiandao"}),n($,{class:""},{default:i((()=>[r(d(e.$t("签到有礼")),1)])),_:1})])),_:1})):p("",!0)]})),_:1}),n($,{class:"logo acea-row row-middle",onClick:a[4]||(a[4]=e=>g(U)()&&void 0)},{default:i((()=>{var e;return[g(U)()?(u(),o(h,{key:0,class:"vip_logo",src:null==(e=x.value)?void 0:e.rankLogo,mode:"scaleToFill"},null,8,["src"])):p("",!0),r(" "+d(x.value.rankName),1)]})),_:1})],64)):(u(),o($,{key:0,onClick:g(L),class:"name"},{default:i((()=>[r(d(e.$t("登录/注册")),1)])),_:1},8,["onClick"]))])),_:1}),n($,{class:"iconfont icon-shezhi",onClick:a[5]||(a[5]=e=>K("/pages/user/profile/index"))})])),_:1}),n($,{class:"user_top_group"},{default:i((()=>[n($,{class:"item",onClick:a[6]||(a[6]=e=>K("/pages/user/collectProduct/index"))},{default:i((()=>[n($,{class:"tit"},{default:i((()=>[r(d(e.$t("商品收藏"))+" ",1),n(z,{class:"txt"},{default:i((()=>[r(d(J.value.productCollect>=0?J.value.productCollect:"--"),1)])),_:1})])),_:1})])),_:1}),g(S)()?(u(),o($,{key:0,class:"item",onClick:a[7]||(a[7]=e=>K("/pages/user/collectionShop/index"))},{default:i((()=>[n($,{class:"tit"},{default:i((()=>[r(d(e.$t("店铺关注"))+" ",1),n(z,{class:"txt"},{default:i((()=>[r(d(J.value.shopCollect>=0?J.value.shopCollect:"--"),1)])),_:1})])),_:1})])),_:1})):p("",!0),C.value&&C.value.isZh?(u(),o($,{key:1,class:"item",onClick:a[8]||(a[8]=e=>K("/pages/user/comment/list"))},{default:i((()=>[n($,{class:"tit"},{default:i((()=>[r(d(e.$t("待评价"))+" ",1),n(z,{class:"txt"},{default:i((()=>[r(d(J.value.awaitComment>=0?J.value.awaitComment:"--"),1)])),_:1})])),_:1})])),_:1})):p("",!0),n($,{class:"item",onClick:a[9]||(a[9]=e=>K("/pages/user/historyProduct/index"))},{default:i((()=>[n($,{class:"tit"},{default:i((()=>[r(d(e.$t("浏览记录")),1)])),_:1})])),_:1})])),_:1})])),_:1}),n($,{class:"user_wrapper"},{default:i((()=>[n($,{class:"list-group my-order"},{default:i((()=>[n($,{class:"title acea-row row-between-wrapper"},{default:i((()=>[n($,{class:""},{default:i((()=>[r(d(e.$t("我的订单")),1)])),_:1}),n($,{class:"more",onClick:a[10]||(a[10]=e=>K("/pages/user/order/list"))},{default:i((()=>[n($,null,{default:i((()=>[r(d(e.$t("全部订单")),1)])),_:1}),n($,{class:"iconfont icon-xiangyou"})])),_:1})])),_:1}),n($,{class:"wrap"},{default:i((()=>[n($,{class:"li",onClick:a[11]||(a[11]=e=>K("/pages/user/order/list?type=awaitPay"))},{default:i((()=>[J.value.awaitPay>0?(u(),_(m,{key:0},[n(q,{class:"badgecolor",text:J.value.awaitPay,absolute:"rightTop",size:"small"},{default:i((()=>[n(z,{class:"iconfont icon-daifukuan"})])),_:1},8,["text"]),n($,{class:"txt"},{default:i((()=>[r(d(e.$t("待付款")),1)])),_:1})],64)):(u(),_(m,{key:1},[n(z,{class:"iconfont icon-daifukuan"}),n($,{class:"txt"},{default:i((()=>[r(d(e.$t("待付款")),1)])),_:1})],64))])),_:1}),n($,{class:"li",onClick:a[12]||(a[12]=e=>K("/pages/user/order/list?type=awaitReceived"))},{default:i((()=>[J.value.awaitReceived>0?(u(),_(m,{key:0},[n(q,{class:"badgecolor",text:J.value.awaitReceived,absolute:"rightTop",size:"small"},{default:i((()=>[n(z,{class:"iconfont icon-daishouhuo1"})])),_:1},8,["text"]),n($,{class:"txt"},{default:i((()=>[r(d(e.$t("待收货")),1)])),_:1})],64)):(u(),_(m,{key:1},[n(z,{class:"iconfont icon-daishouhuo1"}),n($,{class:"txt"},{default:i((()=>[r(d(e.$t("待收货")),1)])),_:1})],64))])),_:1}),n($,{class:"li",onClick:a[13]||(a[13]=e=>K("/pages/user/order/list?type=awaitComment"))},{default:i((()=>[J.value.awaitComment>0?(u(),_(m,{key:0},[n(q,{class:"badgecolor",text:J.value.awaitComment,absolute:"rightTop",size:"small"},{default:i((()=>[n(z,{class:"iconfont icon-pingjia"})])),_:1},8,["text"]),n($,{class:"txt"},{default:i((()=>[r(d(e.$t("待评价")),1)])),_:1})],64)):(u(),_(m,{key:1},[n(z,{class:"iconfont icon-pingjia"}),n($,{class:"txt"},{default:i((()=>[r(d(e.$t("待评价")),1)])),_:1})],64))])),_:1}),n($,{class:"li",onClick:a[14]||(a[14]=e=>K("/pages/user/afterSale/list"))},{default:i((()=>[n(z,{class:"iconfont icon-shouhou1"}),n($,{class:"txt"},{default:i((()=>[r(d(e.$t("退换 / 售后")),1)])),_:1}),E.value.returnCount>0?(u(),o(z,{key:0,class:"counts"},{default:i((()=>[r(d(E.value.returnCount),1)])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1}),n($,{class:"list-group my-wallet"},{default:i((()=>[n($,{class:"title acea-row row-between-wrapper"},{default:i((()=>[n($,{class:""},{default:i((()=>[r(d(e.$t("我的钱包")),1)])),_:1}),n($,{class:"more",onClick:a[15]||(a[15]=e=>K("/pages/user/account/index"))},{default:i((()=>[n($,null,{default:i((()=>[r(d(e.$t("进入钱包")),1)])),_:1}),n($,{class:"iconfont icon-xiangyou"})])),_:1})])),_:1}),n($,{class:"wrap"},{default:i((()=>[n($,{class:"li",onClick:a[16]||(a[16]=e=>K("/pages/user/account/index"))},{default:i((()=>[n(z,{class:"num"},{default:i((()=>[r(d(Number(x.value.totalBalance)>=0?x.value.totalBalance:0),1)])),_:1}),n($,{class:"txt"},{default:i((()=>[r(d(e.$t("余额")),1)])),_:1})])),_:1}),n($,{class:"li",onClick:a[17]||(a[17]=e=>K("/pages/coupon/index?type=2"))},{default:i((()=>[n(z,{class:"num"},{default:i((()=>[r(d(x.value.coupon>=0?x.value.coupon:0),1)])),_:1}),n($,{class:"txt"},{default:i((()=>[r(d(e.$t("优惠券")),1)])),_:1})])),_:1}),n($,{class:"li",onClick:a[18]||(a[18]=e=>K("/pages/user/point/detail"))},{default:i((()=>[n(z,{class:"num"},{default:i((()=>[r(d(x.value.points>=0?x.value.points:0),1)])),_:1}),n($,{class:"txt"},{default:i((()=>[r(d(e.$t("积分")),1)])),_:1})])),_:1})])),_:1})])),_:1}),n(Z)])),_:1})])),_:1}),n(D),n($,{class:"shop-company"},{default:i((()=>[r(d(g(k).shopCompany),1)])),_:1})])),_:1},512),n(W,{scrollTop:g(f)},null,8,["scrollTop"])],64)}}}),[["__scopeId","data-v-744c8e4c"]]);export{K as default};
