import{e,G as a,Q as l,r as o,g as t,l as n,c as r,w as m,i as d,v as i,ak as c,z as p,al as u,o as s,a as _,b as y,t as b,d as f,T as v,E as h,F as g,ag as $,_ as V}from"./index-BKXBH4vI.js";import{_ as k,a as x}from"./uni-forms.lNaSstdl.js";import{_ as C}from"./uni-easyinput.D0KhEVqd.js";import{a as B,_ as U}from"./tig-layout.DMoUsUKf.js";import{_ as M}from"./tig-fixed-placeholder.BHdfEiP8.js";import{g as j,a as q}from"./invoice.B8Uzu1nD.js";import{o as w,a as I}from"./invoiceManagemen.DkScM0Jj.js";import{n as E}from"./index.xrDesKlL.js";import"./uni-icons.C94_g2wt.js";const P=V(e({__name:"applyInvoice",setup(e){const{t:V}=a(),P=l({navbar:"1",return:"1",title:"发票申请"}),R=l({title_type:1,invoice_type:1,company_name:"",mobile:"",email:"",company_code:"",company_address:"",company_phone:"",company_bank:"",company_account:""}),S={company_code:{rules:[{required:!0,errorMessage:V("纳税人识号不能为空!")}]},company_address:{rules:[{required:!0,errorMessage:V("单位地址不能为空!")}]},company_phone:{rules:[{required:!0,errorMessage:V("单位电话不能为空!")}]},company_bank:{rules:[{required:!0,errorMessage:V("开户银行不能为空!")}]},company_account:{rules:[{required:!0,errorMessage:V("银行账户不能为空!")}]},mobile:{rules:[{required:!0,errorMessage:V("手机不能为空!")}]}},z=o(0),F=o(!1),G=async()=>{try{const e=await q({invoice_type:R.invoice_type,title_type:R.title_type});e.item&&(1===R.invoice_type&&1===R.title_type?(R.company_name=e.item.company_name,R.mobile=e.item.mobile,R.email=e.item.email):(R.company_code=e.item.company_code,R.company_name=e.item.company_name,R.company_address=e.item.company_address,R.company_phone=e.item.company_phone,R.company_bank=e.item.company_bank,R.company_account=e.item.company_account),R.mobile=e.item.mobile,R.email=e.item.email)}catch(e){}},Q=e=>{R.invoice_type=e,R.title_type=2===e?2:1,R.company_name="",R.mobile="",R.email="",R.company_code="",R.company_address="",R.company_phone="",R.company_bank="",R.company_account="",G()},T=o(),A=o("insert"),D=()=>{T.value.validate().then((e=>{"insert"===A.value?(async()=>{try{z.value,await w(R),$({url:"/pages/user/invoiceManagement/index?type=list"})}catch(e){}})():(async()=>{try{const e={...R,id:z.value};await I(e),$({url:"/pages/user/invoiceManagement/index?type=list"})}catch(e){}})()})).catch((e=>{}))};t((e=>{e&&e.type&&(A.value=e.type,z.value=e.order_id)})),n((()=>{(async()=>{try{(await j()).item?F.value=!0:F.value=!1}catch(e){}})(),G()}));const H=()=>{$({url:"/pages/user/invoiceManagement/index?type=invoice"})};return(e,a)=>{const l=f,o=d,t=i(p("up-radio"),c),n=i(p("up-radio-group"),u),$=i(p("uni-forms-item"),k),V=i(p("uni-easyinput"),C),j=i(p("uni-forms"),x),q=i(p("tig-button"),B),w=i(p("tig-fixed-placeholder"),M),I=i(p("tig-layout"),U);return s(),r(o,null,{default:m((()=>[_(I,null,{default:m((()=>[_(E,{parameter:P},null,8,["parameter"]),_(o,{class:"invoice-popup-content"},{default:m((()=>[_(o,{class:"invoice-typemenu"},{default:m((()=>[_(o,{class:"invoice-explain"},{default:m((()=>[y(b(e.$t("我公司依法开具发票，请您按照税法规定使用发票。根据现行税收政策，部分公司提供数电票"))+", "+b(e.$t("数电（专用发票）法律效力与现有增值税专用发票相同;如商品由第三方卖家销售，发票类型和内容将由该卖家决定，发票由卖家开具并提供。如您为企业采购，需要多单合并开具或批量提交发票可注册企业用户"))+"；",1),_(l,{class:"main-color"},{default:m((()=>[y(b(e.$t("使用礼品卡支付部分的金额，不支持开发票")),1)])),_:1})])),_:1}),_(o,{class:v(["invoice-typemenu-item",{active:1===R.invoice_type}]),onClick:a[0]||(a[0]=e=>Q(1))},{default:m((()=>[y(b(e.$t("普通发票")),1)])),_:1},8,["class"]),_(o,{class:v(["invoice-typemenu-item",{active:2===R.invoice_type}]),onClick:a[1]||(a[1]=e=>Q(2))},{default:m((()=>[y(b(e.$t("增值税专用发票")),1)])),_:1},8,["class"])])),_:1}),_(o,{class:"invoice-formState"},{default:m((()=>[_(j,{ref_key:"formRef",ref:T,modelValue:R,rules:S,"label-width":"170rpx"},{default:m((()=>[1===R.invoice_type?(s(),h(g,{key:0},[_($,{label:e.$t("发票抬头"),name:"name"},{default:m((()=>[_(o,{class:"item-layout"},{default:m((()=>[_(n,{modelValue:R.title_type,"onUpdate:modelValue":a[2]||(a[2]=e=>R.title_type=e),placement:"row"},{default:m((()=>[_(t,{customStyle:{marginRight:"22rpx"},name:1,activeColor:"var(--general)",label:e.$t("个人")},null,8,["label"]),_(t,{name:2,activeColor:"var(--general)",label:e.$t("企业")},null,8,["label"])])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["label"]),1==R.title_type?(s(),r($,{key:0,label:e.$t("个人名称"),name:"company_name",rules:[{required:!0,errorMessage:e.$t("个人名称不能为空")}]},{default:m((()=>[_(V,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:R.company_name,"onUpdate:modelValue":a[3]||(a[3]=e=>R.company_name=e),placeholder:e.$t("请输入个人名称")},null,8,["modelValue","placeholder"])])),_:1},8,["label","rules"])):(s(),h(g,{key:1},[_($,{label:e.$t("企业名称"),name:"company_name",rules:[{required:!0,errorMessage:"企业名称不能为空"}]},{default:m((()=>[_(V,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:R.company_name,"onUpdate:modelValue":a[4]||(a[4]=e=>R.company_name=e),placeholder:e.$t("请输入企业名称")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),_($,{label:e.$t("纳税人识号"),name:"company_code"},{default:m((()=>[_(V,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:R.company_code,"onUpdate:modelValue":a[5]||(a[5]=e=>R.company_code=e),placeholder:e.$t("请输入纳税人识号")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),_($,{label:e.$t("单位地址"),name:"company_address"},{default:m((()=>[_(V,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:R.company_address,"onUpdate:modelValue":a[6]||(a[6]=e=>R.company_address=e),placeholder:e.$t("请输入单位地址")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),_($,{label:e.$t("单位电话"),name:"company_phone"},{default:m((()=>[_(V,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:R.company_phone,"onUpdate:modelValue":a[7]||(a[7]=e=>R.company_phone=e),placeholder:e.$t("请输入单位电话")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),_($,{label:e.$t("开户银行"),name:"company_bank"},{default:m((()=>[_(V,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:R.company_bank,"onUpdate:modelValue":a[8]||(a[8]=e=>R.company_bank=e),placeholder:e.$t("请输入开户银行")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),_($,{label:e.$t("银行账户"),name:"company_account"},{default:m((()=>[_(V,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:R.company_account,"onUpdate:modelValue":a[9]||(a[9]=e=>R.company_account=e),placeholder:e.$t("请输入银行账户")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])],64)),_($,{label:e.$t("收票人手机"),name:"mobile"},{default:m((()=>[_(V,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:R.mobile,"onUpdate:modelValue":a[10]||(a[10]=e=>R.mobile=e),placeholder:e.$t("请输入收票人手机")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),_($,{label:e.$t("收票人邮箱"),name:"email"},{default:m((()=>[_(V,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:R.email,"onUpdate:modelValue":a[11]||(a[11]=e=>R.email=e),placeholder:e.$t("请输入收票人邮箱")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])],64)):2===R.invoice_type&&F.value?(s(),h(g,{key:1},[_($,{label:e.$t("单位名称")},{default:m((()=>[_(o,{class:"disabled-text"},{default:m((()=>[y(b(R.company_name),1)])),_:1})])),_:1},8,["label"]),_($,{label:e.$t("纳税人识别码")},{default:m((()=>[_(o,{class:"disabled-text"},{default:m((()=>[y(b(R.company_code),1)])),_:1})])),_:1},8,["label"]),_($,{label:e.$t("注册地址")},{default:m((()=>[_(o,{class:"disabled-text"},{default:m((()=>[y(b(R.company_address),1)])),_:1})])),_:1},8,["label"]),_($,{label:e.$t("注册电话")},{default:m((()=>[_(o,{class:"disabled-text"},{default:m((()=>[y(b(R.company_phone),1)])),_:1})])),_:1},8,["label"]),_($,{label:e.$t("开户银行")},{default:m((()=>[_(o,{class:"disabled-text"},{default:m((()=>[y(b(R.company_bank),1)])),_:1})])),_:1},8,["label"]),_($,{label:e.$t("银行账户")},{default:m((()=>[_(o,{class:"disabled-text"},{default:m((()=>[y(b(R.company_account),1)])),_:1})])),_:1},8,["label"]),_($,{label:e.$t("收票人手机"),name:"mobile"},{default:m((()=>[_(V,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:R.mobile,"onUpdate:modelValue":a[12]||(a[12]=e=>R.mobile=e),placeholder:e.$t("请输入收票人手机")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),_($,{label:e.$t("收票人邮箱"),name:"email"},{default:m((()=>[_(V,{primaryColor:"rgb(192, 196, 204)",inputBorder:!1,modelValue:R.email,"onUpdate:modelValue":a[13]||(a[13]=e=>R.email=e),placeholder:e.$t("请输入收票人邮箱")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])],64)):(s(),r(o,{key:2,class:"notPass"},{default:m((()=>[_(o,null,{default:m((()=>[y(b(e.$t("您还未通过增票资质申请，暂时无法开具增值税专用发票"))+" ",1),_(l,{class:"notPassBtn",onClick:H},{default:m((()=>[y(b(e.$t("去申请")),1)])),_:1})])),_:1})])),_:1}))])),_:1},8,["modelValue"])])),_:1})])),_:1}),_(w,{backgroundColor:"#fff"},{default:m((()=>[_(o,{class:"btn-box"},{default:m((()=>[_(q,{disabled:2===R.invoice_type&&!F.value,onClick:D},{default:m((()=>[y(b(e.$t("提交")),1)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-b3570874"]]);export{P as default};
