import{d as a,G as e,Q as l,r as t,o as s,e as u,k as c,l as o,m as n,y as r,q as i,w as d,s as f,t as p,v as m,F as _,J as v,n as y,x as g,M as x,a6 as k,a7 as h,D as b,C as j,a5 as w,E as z,B}from"./index-Do_Cb7fn.js";import{_ as D}from"./format-price.D2lH_-yv.js";import{n as G}from"./index.Y6J4G1_A.js";import{h as J,c as L}from"./product.Cqsfbx9G.js";import{_ as M}from"./_plugin-vue_export-helper.BCo6x5W8.js";const Q=M(a({__name:"consult",setup(a){const{t:M}=e(),Q=l({navbar:"1",return:"1",title:"商品咨询",class:"pageGoods"}),q=t({product_id:0,product_stock:0}),A=t(!1),C=t(1),E=t(10),F=t(0),I=t(!1),$=t([]),H=t(0),K=async()=>{C.value>1&&(I.value=!0),k({title:M("加载中")});try{const a=await L({product_id:N.value,page:C.value,size:E.value});$.value=[...$.value,...a.filter_result],H.value=a.total}catch(a){x({title:a.message,icon:"none"})}finally{I.value=!1,h()}},N=t("");return s((a=>{if(a){const{id:e}=a;e&&(N.value=e,(async a=>{try{let e=await J(a);q.value=e.item}catch(e){x({title:e.message,icon:"none"})}})(e),K())}})),u((()=>{C.value<Math.ceil(F.value/E.value)&&(C.value++,K())})),(a,e)=>{const l=b,t=j,s=c(o("format-price"),D),u=B;return n(),r(_,null,[i(G,{parameter:Q},null,8,["parameter"]),i(t,{class:"product-info flex"},{default:d((()=>[i(t,{class:"product-info-img"},{default:d((()=>[i(l,{"lazy-load":"",class:"product-img",src:f(w)(q.value.pic_thumb||"")},null,8,["src"])])),_:1}),i(t,null,{default:d((()=>[i(t,{class:"product-info-title line2"},{default:d((()=>[p(m(q.value.product_name),1)])),_:1}),i(t,{class:"product-info-price"},{default:d((()=>[i(s,{isBottom:!1,priceData:q.value.market_price},null,8,["priceData"])])),_:1})])),_:1})])),_:1}),i(t,{class:"product-consult-card"},{default:d((()=>[(n(!0),r(_,null,v($.value,((a,e)=>(n(),y(t,{class:"consult-item",key:e},{default:d((()=>[i(t,{class:"consult-item-tit flex justify-between"},{default:d((()=>[i(t,{class:"time"},{default:d((()=>[p(m(a.add_time),1)])),_:2},1024),i(t,{class:"name"},{default:d((()=>[p(m(a.username),1)])),_:2},1024)])),_:2},1024),i(t,{class:"consult-con line1"},{default:d((()=>[i(u,null,{default:d((()=>[p("Q")])),_:1}),p(" "+m(a.content),1)])),_:2},1024),a.reply?(n(),y(t,{key:0,class:"consult-con line1 reply"},{default:d((()=>[i(u,null,{default:d((()=>[p("A")])),_:1}),p(" "+m(a.reply.content),1)])),_:2},1024)):g("",!0)])),_:2},1024)))),128))])),_:1}),C.value>1?(n(),y(t,{key:0,class:"loading-box"},{default:d((()=>[A.value?(n(),y(t,{key:0,class:"bottomLoading"},{default:d((()=>[i(l,{"lazy-load":"",class:"loading",src:f(z)("common/loading.gif")},null,8,["src"])])),_:1})):g("",!0)])),_:1})):g("",!0),i(t,{class:"loading-box"},{default:d((()=>[$.value.length<1?(n(),y(t,{key:0},{default:d((()=>[p(m(a.$t("暂无咨询")),1)])),_:1})):g("",!0)])),_:1})],64)}}}),[["__scopeId","data-v-e91cae0a"]]);export{Q as default};
