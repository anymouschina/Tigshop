var e=Object.defineProperty,t=(t,a,s)=>(((t,a,s)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s})(t,"symbol"!=typeof a?a+"":a,s),s);import{bz as a,d as s,r as n,k as i,l as o,m as r,n as l,x as c,y as d,as as u,F as m,J as p,s as _,q as h,ag as v,bA as f,E as g,b as y,C as k,a3 as b,G as x,u as S,a as w,ac as $,Q as j,R as E,o as C,bt as I,w as A,v as W,W as T,X as z,bB as N,bC as L,H as U,bD as H,M as R,ba as D,ae as O,L as B,B as J,S as P,V,T as F,a5 as K,t as M,aa as X,aK as q,aI as G}from"./index-Ce4FtYLL.js";import{_ as Q}from"./tig-image.bUT1hZK2.js";import{_ as Y}from"./format-price.C2WNeN1M.js";import{_ as Z}from"./u-input.2cv__j3I.js";import{_ as ee}from"./u-upload.KFuLG-QU.js";import{g as te,s as ae,a as se}from"./im.BuuEVos6.js";import{b as ne}from"./shop.TpH5rL7F.js";import{h as ie}from"./product.rX84B_3L.js";import{g as oe}from"./order.CCBaGQMp.js";import{_ as re}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-icon.BDQrrWMI.js";import"./u-loading-icon.CaEeBur7.js";const le=class e{log(t,a){e.console}closeConsole(){e.console=!1}};t(le,"console",!0);let ce=le;class de extends ce{constructor(){super(...arguments),t(this,"listeners",{})}addEventListener(e,t){this.listeners[e]||(this.listeners[e]=[]),-1===this.listeners[e].indexOf(t)&&this.listeners[e].push(t)}removeEventListener(e){this.listeners[e]=[]}dispatchEvent(e,t){const a=this.listeners[e]||[];0!==a.length&&a.forEach((e=>{e.call(this,t)}))}}class ue extends de{constructor(e){super(),t(this,"url",""),t(this,"socket",null),t(this,"reconnectAttempts",0),t(this,"maxReconnectAttempts",5),t(this,"reconnectInterval",1e3),t(this,"heartbeatInterval",15e3),t(this,"heartbeatTimer"),t(this,"stopWs",!1),this.url=e}onopen(e){this.addEventListener("open",e)}onmessage(e){this.addEventListener("message",e)}onclose(e){this.addEventListener("close",e)}onerror(e){this.addEventListener("error",e)}send(e){this.socket?this.socket.send(e):console.error("[WebSocket] 未连接")}connect(){0===this.reconnectAttempts&&this.log("WebSocket",`初始化连接中...          ${this.url}`),this.socket||(this.socket=a({url:this.url,complete:()=>{}}),this.socket&&(this.socket.onOpen((e=>{this.stopWs=!1,this.reconnectAttempts=0,this.startHeartbeat(),this.log("WebSocket",`连接成功,等待服务端数据推送[onopen]...     ${this.url}`),this.dispatchEvent("open",e)})),this.socket.onMessage((e=>{this.dispatchEvent("message",e),this.startHeartbeat()})),this.socket.onClose((e=>{0===this.reconnectAttempts&&this.log("WebSocket",`连接断开[onclose]...    ${this.url}`),this.stopWs||this.handleReconnect(),this.dispatchEvent("close",e)})),this.socket.onError((e=>{0===this.reconnectAttempts&&this.log("WebSocket",`连接异常[onerror]...    ${this.url}`),this.closeHeartbeat(),this.dispatchEvent("error",e)}))))}handleReconnect(){this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,this.log("WebSocket",`尝试重连... (${this.reconnectAttempts}/${this.maxReconnectAttempts})       ${this.url}`),setTimeout((()=>{this.connect()}),this.reconnectInterval)):(this.closeHeartbeat(),this.log("WebSocket",`最大重连失败，终止重连: ${this.url}`))}close(){this.socket&&(this.stopWs=!0,this.socket.close({}),this.socket=null,this.removeEventListener("open"),this.removeEventListener("message"),this.removeEventListener("close"),this.removeEventListener("error")),this.closeHeartbeat()}startHeartbeat(){this.stopWs||(this.heartbeatTimer&&this.closeHeartbeat(),this.heartbeatTimer=setInterval((()=>{this.socket?(this.socket.send({data:JSON.stringify({type:"heartBeat"})}),this.log("WebSocket","送心跳数据...")):console.error("[WebSocket] 未连接")}),this.heartbeatInterval))}closeHeartbeat(){clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0}}const me=[{name:"微笑",id:"1"},{name:"龇牙",id:"2"},{name:"色",id:"3"},{name:"发呆",id:"4"},{name:"可怜",id:"5"},{name:"流泪",id:"6"},{name:"害羞",id:"7"},{name:"闭嘴",id:"8"},{name:"睡",id:"9"},{name:"吃瓜群众",id:"10"},{name:"尴尬",id:"11"},{name:"发怒",id:"12"},{name:"调皮",id:"13"},{name:"撇嘴",id:"14"},{name:"思考",id:"15"},{name:"不失礼貌的微笑",id:"16"},{name:"奸笑",id:"17"},{name:"抓狂",id:"18"},{name:"吐",id:"19"},{name:"偷笑",id:"20"},{name:"愉快",id:"21"},{name:"白眼",id:"22"},{name:"傲慢",id:"23"},{name:"困",id:"24"},{name:"灵光一现",id:"25"},{name:"流汗",id:"26"},{name:"憨笑",id:"27"},{name:"捂脸",id:"28"},{name:"奋斗",id:"29"},{name:"咒骂",id:"30"},{name:"疑问",id:"31"},{name:"嘘",id:"32"},{name:"晕",id:"33"},{name:"衰",id:"34"},{name:"骷髅",id:"35"},{name:"敲打",id:"36"},{name:"再见",id:"37"},{name:"擦汗",id:"38"},{name:"抠鼻",id:"39"},{name:"泣不成声",id:"40"},{name:"坏笑",id:"41"},{name:"左哼哼",id:"42"},{name:"右哼哼",id:"43"},{name:"打哈欠",id:"44"},{name:"鄙视",id:"45"},{name:"委屈",id:"46"},{name:"快哭了",id:"47"},{name:"摸头",id:"48"},{name:"阴险",id:"49"},{name:"亲亲",id:"50"},{name:"机智",id:"51"},{name:"得意",id:"52"},{name:"大金牙",id:"53"},{name:"拥抱",id:"54"},{name:"大笑",id:"55"},{name:"送心",id:"56"},{name:"震惊",id:"57"},{name:"酷拽",id:"58"},{name:"尬笑",id:"59"},{name:"大哭",id:"60"},{name:"哭笑",id:"61"},{name:"做鬼脸",id:"62"},{name:"红脸",id:"63"},{name:"鼓掌",id:"64"},{name:"恐惧",id:"65"},{name:"斜眼",id:"66"},{name:"嘿哈",id:"67"},{name:"惊讶",id:"68"},{name:"绝望的凝视",id:"69"},{name:"囧",id:"70"},{name:"皱眉",id:"71"},{name:"耶",id:"72"},{name:"石化",id:"73"},{name:"我想静静",id:"74"},{name:"吐血",id:"75"},{name:"互粉",id:"76"},{name:"互相关注",id:"77"},{name:"加好友",id:"78"},{name:"强",id:"79"},{name:"钱",id:"80"},{name:"飞吻",id:"81"},{name:"打脸",id:"82"},{name:"惊恐",id:"83"},{name:"悠闲",id:"84"},{name:"泪奔",id:"85"},{name:"舔屏",id:"86"},{name:"紫薇别走",id:"87"},{name:"听歌",id:"88"},{name:"难过",id:"89"},{name:"生病",id:"90"},{name:"绿帽子",id:"91"},{name:"如花",id:"92"},{name:"惊喜",id:"93"},{name:"吐彩虹",id:"94"},{name:"吐舌",id:"95"},{name:"无辜呆",id:"96"},{name:"看",id:"97"},{name:"白眼的狗",id:"98"},{name:"黑脸",id:"99"},{name:"猪头",id:"100"},{name:"熊吉",id:"101"},{name:"不看",id:"102"},{name:"玫瑰",id:"103"},{name:"凋谢",id:"104"},{name:"嘴唇",id:"105"},{name:"爱心",id:"106"},{name:"心碎",id:"107"},{name:"赞",id:"108"},{name:"弱",id:"109"},{name:"握手",id:"110"},{name:"ok",id:"111"},{name:"谢谢",id:"112"},{name:"比心",id:"113"},{name:"碰拳",id:"114"},{name:"击掌",id:"115"},{name:"左",id:"116"},{name:"右",id:"117"},{name:"力量",id:"118"},{name:"胜利",id:"119"},{name:"抱拳",id:"120"},{name:"勾引",id:"121"},{name:"拳头",id:"122"},{name:"庆祝",id:"123"},{name:"礼物",id:"124"},{name:"红包",id:"125"},{name:"18禁",id:"126"},{name:"去污粉",id:"127"},{name:"666",id:"128"},{name:"给力",id:"129"},{name:"v5",id:"130"},{name:"菜刀",id:"131"},{name:"炸弹",id:"132"},{name:"便便",id:"133"},{name:"月亮",id:"134"},{name:"太阳",id:"135"},{name:"发",id:"136"},{name:"黄瓜",id:"137"},{name:"西瓜",id:"138"},{name:"啤酒",id:"139"},{name:"咖啡",id:"140"},{name:"蛋糕",id:"141"}],pe=s({__name:"emojiImage",props:{name:{type:String,default:""},id:{type:[String,Number],default:""}},setup(e){const t=e;const a=n("");let s="";var d,u,m;return t.id?s=String(t.id):(d=me,u=t.name,s=null==(m=d.find((e=>e.name===u)))?void 0:m.id),void 0!==s&&(a.value="http://oss.tigshop.com/official/emoji/"+s+".png"),(e,t)=>{const s=i(o("tig-image"),Q);return a.value?(r(),l(s,{key:0,src:a.value,"onUpdate:src":t[0]||(t[0]=e=>a.value=e)},null,8,["src"])):c("",!0)}}}),_e=re(s({__name:"Emoji",emits:["insertEmoji"],setup(e,{emit:t}){const a=t;return(e,t)=>(r(),d("div",{class:"picker_body"},[u("div",{class:"emojipicker"},[u("div",{class:"list"},[(r(!0),d(m,null,p(_(me),((e,t)=>(r(),d("div",{class:"item",key:e.id,onClick:t=>{return s=e.name,void a("insertEmoji",s);var s}},[u("span",null,[u("span",{class:"byte-tooltip__wrapper"},[h(pe,{class:"image",id:e.id},null,8,["id"])])])],8,["onClick"])))),128))])])]))}}),[["__scopeId","data-v-42e582ee"]]),he=re(s({__name:"emojiHtml",props:{content:{type:String,default:""}},setup(e){const t=e,a=n("");return a.value=function(e,t){const a=new RegExp(`(${t.map((e=>e.name)).join("|")})`,"g");return e.replace(/\[|\]/g,"").replace(a,(e=>{const a=t.find((t=>t.name===e));return a?"<img class='emoji' src='http://oss.tigshop.com/official/emoji/"+a.id+".png'>":e}))}(t.content,me),(e,t)=>{const s=v;return r(),l(s,{nodes:a.value},null,8,["nodes"])}}}),[["__scopeId","data-v-c8f40d79"]]),ve=s({__name:"promptTone",setup(e,{expose:t}){let a=null;const s=n(!1);a=f(),a.src=g("promptTone.wav","audio"),a.onEnded((()=>{s.value=!1}));return t({play:()=>{null==a||s.value||(a.seek(1),a.play(),s.value=!0)}}),y((()=>{null!=a&&a.destroy()})),(e,t)=>{const a=k;return r(),l(a,{class:""})}}}),fe=re(s({__name:"index",setup(e){b((e=>({"0c8cf105":it.value,d2d2c392:ot.value,"45a1e926":rt.value,"56cf79c2":nt.value,"0c3f9926":st.value,"509b4f30":at.value,"4e7cf5ec":tt.value,"93be183c":et.value})));const{t:t}=x(),a=S(),s=w(),v=$(),f=j({first_id:-1,sort_order:"desc",user_from:"",shop_id:0}),y=n([]),re=n(""),le=n(!1),ce=n(!1),de=n(!1);let me=n(!0),pe=n(0);const fe=n(!1),ge=n(0),ye=G(),ke=()=>{history.back()},be=async()=>{try{const e=await q(".message-scroll",ye),t=await q(".message-box",ye);if(t&&e){const a=t.height-e.height;a&&a>0&&(ge.value=a)}}catch(e){console.error(e)}},xe=e=>{De(),me.value&&(pe.value=ge.value,me.value=!1),0==e.detail.scrollTop&&0==fe.value&&y.value.length>0&&(f.first_id=y.value[0].id,Le())};function Se(e){le.value=e.length>0}const we=E((()=>!0)),$e=n(0),je=n(!1),Ee=e=>{},Ce=()=>{je.value=!0,de.value=!1,ce.value=!1},Ie=e=>{re.value+="["+e+"]"},Ae=e=>{if(Array.isArray(e.file))for(const t of e.file)We(t);else We(e.file[0])},We=e=>{N({url:L+"/api/user/user/upload_img",filePath:e.url,name:"file",header:{Authorization:U("token"),Secret:H()},success:e=>{const{data:t}=JSON.parse(e.data);Ue("image",{pic:t.pic_url})},fail:e=>{console.log("error",e),R({title:t("图片上传失败"),icon:"none"})}})},Te=()=>{re.value&&Ue()},ze=()=>{D(),ce.value=!ce.value,de.value=!1,O((()=>{be()}))},Ne=()=>{D(),de.value=!de.value,ce.value=!1,O((()=>{be()}))},Le=async()=>{try{const e=await te(f);if(0==e.filter_result.length)return void(fe.value=!0);y.value=[...e.filter_result,...y.value],O((async()=>{-1==f.first_id?await be():setTimeout((()=>{pe.value&&(ge.value=pe.value,me.value=!0)}),0)}))}catch(e){console.error(e)}},Ue=async(e,t)=>{try{const a=await ae({content:{message_type:e||"text",content:re.value||"",...t},conversation_id:f.conversation_id,shop_id:f.shop_id,product_id:f.product_id,order_id:f.order_id});re.value="",le.value=!1,ce.value=!1,de.value=!1,y.value=[...y.value,a.item],O((()=>{be()}))}catch(a){console.log(a)}},He=n({}),Re=n(!1),De=()=>{0!==y.value[y.value.length-1].is_read||2!==y.value[y.value.length-1].type||Re.value||Oe()},Oe=async()=>{try{Re.value=!0;await se({shop_id:f.shop_id,servant_id:y.value[y.value.length-1].servant_id})}catch(e){console.error(e)}finally{Re.value=!1}},Be=n(),Je=E((()=>s.baseInfo.pc_domain?s.baseInfo.pc_domain:window.location.origin)),Pe=j({pc:{detail:`${Je.value}/item/`,order:`${Je.value}/member/order/info?id=`,shop:`${Je.value}/shop/${f.shop_id}`},mobile:{detail:"/pages/productDetail/index?id=",order:"/pages/user/order/info?id=",shop:`/pages/shop/index?shop_id=${f.shop_id}`}}),Ve=(e,t,a)=>{let s="";switch(e){case"detail":s=Pe[t][e]+("pc"===t&&a?a.content.product.product_sn:null==a?void 0:a.content.product.product_id);break;case"order":s=Pe[t][e]+(a?a.content.order.order_id:"");break;case"shop":s=Pe[t][e]}return s},Fe=(e,t)=>{let a="";"pc"===Ze.value?(a=Ve(e,"pc",t),window.open(a,"_blank")):(a=Ve(e,"mobile",t),B({url:a}))},Ke=E((()=>He.value.shop_logo??s.baseInfo.ico_img));E((()=>He.value.shop_title??t("在线客服")));const Me=e=>{},Xe=e=>{const t=JSON.parse(e.data);"message"===t.type&&t.data&&qe(t.data[0]),"read"===t.type&&y.value.forEach((e=>{1===e.type&&(e.is_read=1)}))},qe=e=>{var t;if(e.shop_id===f.shop_id){const a=(e=>y.value.findIndex((t=>t.id===e.id)))(e);-1===a&&(y.value=[...y.value,e],null==(t=Be.value)||t.play(),O((()=>{be()})))}},Ge=e=>{},Qe=e=>{},Ye=n(),Ze=n("");C((async e=>{e&&(e.shop_id&&Number(e.shop_id)&&(f.shop_id=Number(e.shop_id),await(async e=>{try{const t=await ne(e);He.value=t.item}catch(t){console.error(t)}})(e.shop_id)),e.product_id&&Number(e.product_id)&&(f.product_id=Number(e.product_id),(async e=>{try{const t=await ie(e);let a={message_type:"product",product_id:t.item.product_id,pic_url:t.item.pic_url,product_name:t.item.product_name,product_price:t.item.product_price,product_sn:t.item.product_sn};y.value=[...y.value,a],O((()=>{be()}))}catch(t){console.error(t)}})(e.product_id)),e.order_id&&Number(e.order_id)&&(f.order_id=Number(e.order_id)),e.conversation_id&&Number(e.conversation_id)&&(f.conversation_id=Number(e.conversation_id)),e.platform&&(Ze.value=e.platform),e.token&&I({key:"token",data:e.token,success:async()=>{v.getUserInfo(),f.user_from=a.XClientType,Ye.value=new ue(`${(()=>{let e;return e=location.origin,e=e?e.replace(/^(http|https):/,"wss:")+"/ws":"",e})()}?token=${e.token}&platform=${Ze.value?Ze.value:f.user_from}`),Ye.value.onclose(Ge),Ye.value.onopen(Me),Ye.value.onerror(Qe),Ye.value.onmessage(Xe),Ye.value.connect(),await Le(),f.order_id&&await(async e=>{try{const t=await oe({id:e});let a={message_type:"order",order_id:t.item.order_id,order_sn:t.item.order_sn,pic_url:t.item.items[0].pic_thumb,product_name:t.item.items[0].product_name,product_num:t.item.items.length,total_amount:t.item.total_amount,order_status_name:t.item.order_status_name};-1===y.value.findIndex((t=>"custom"===t.content.message_type&&t.content.order&&t.content.order.order_id==e))&&Ue("custom",{order:a})}catch(t){console.error(t)}})(f.order_id)}}))}));const et=E((()=>`url(${g("im/gallary.png")})`)),tt=E((()=>`url(${g("im/goodspic.png")})`)),at=E((()=>`url(${g("im/plus@2x.png")})`)),st=E((()=>`url(${g("im/ico_face_v2@2x.png")})`)),nt=E((()=>`url(${g("im/talk@2x.png")})`)),it=E((()=>"44px")),ot=E((()=>a.safeAreaInsets.top+"px")),rt=E((()=>{let e=100;return de.value&&(e+=324),ce.value&&(e+=196),je.value?`calc(${e}rpx + ${$e.value}px)`:`${e}rpx`}));return(e,t)=>{const a=k,s=J,n=i(o("tig-image"),Q),v=i(o("format-price"),Y),f=P,g=i(o("up-input"),Z),b=i(o("up-upload"),ee);return r(),l(a,{class:"page-content"},{default:A((()=>[h(a,{class:"thanos-layout"},{default:A((()=>[h(a,{class:"thanos-layout-header"},{default:A((()=>[h(a,{class:"wapim-conversation-banner"},{default:A((()=>[h(a,{class:"shop-info",onClick:ke},{default:A((()=>[h(a,{class:"iconfont icon-houtui"})])),_:1}),h(a,{class:"right-opt",onClick:t[0]||(t[0]=e=>{B({url:"/pages/im/list"})})},{default:A((()=>[h(s,{class:"ico-history wapim-conversation-banner-history"})])),_:1})])),_:1})])),_:1}),h(a,{class:"thanos-layout-main-content",onClick:De},{default:A((()=>[h(f,{class:"message-scroll","scroll-top":ge.value,"scroll-y":"true",onScroll:xe},{default:A((()=>[h(a,{class:"message-box"},{default:A((()=>[fe.value?(r(),d("p",{key:0,class:"empty-text"},W(e.$t("已经没有更多消息了")),1)):c("",!0),h(a,null,{default:A((()=>[(r(!0),d(m,null,p(y.value,((t,s)=>(r(),l(a,{key:t.id,class:V(["thanos-rich-message",[2==t.type?"in":1==t.type?"out":"","custom"===t.message_type&&1==t.type?"card-type":"image"===t.message_type?"image-type":""]])},{default:A((()=>["product"!==t.message_type&&"order"!==t.message_type?(r(),l(a,{key:0,class:"message-time"},{default:A((()=>[u("span",null,W(t.send_time),1)])),_:2},1024)):c("",!0),3===t.type?(r(),l(a,{key:1,class:"message-time"},{default:A((()=>[u("span",null,W(t.content.content),1)])),_:2},1024)):c("",!0),3!=t.type&&"product"!==t.message_type&&"order"!==t.message_type?(r(),l(a,{key:2,class:"message-content message-content-left"},{default:A((()=>[h(a,{class:"bg-pic circle-bg-pic thanos-view thanos-hairline--surround message-avatar"},{default:A((()=>{var e;return[h(a,{class:"bg-pic-content",style:F({backgroundImage:`url(${1===t.type?_(K)(null==(e=t.user)?void 0:e.avatar):_(K)(Ke.value)})`})},null,8,["style"])]})),_:2},1024),h(a,{class:"message-content-inner"},{default:A((()=>[t.message_type?(r(),l(a,{key:0,class:"message-context"},{default:A((()=>[h(a,{class:"thanos-text-message"},{default:A((()=>["text"===t.message_type?(r(),l(a,{key:0},{default:A((()=>[h(he,{content:t.content.content},null,8,["content"])])),_:2},1024)):c("",!0),"image"===t.message_type?(r(),l(a,{key:1,class:"message-image"},{default:A((()=>[h(n,{src:t.content.pic,"onUpdate:src":e=>t.content.pic=e},null,8,["src","onUpdate:src"])])),_:2},1024)):c("",!0),"custom"===t.message_type?(r(),l(a,{key:2},{default:A((()=>[t.content.product?(r(),l(a,{key:0,class:"custom-message-product"},{default:A((()=>[h(a,{class:"product-img",onClick:e=>Fe("detail",t)},{default:A((()=>[t.content.product.pic_url?(r(),l(n,{key:0,src:t.content.product.pic_url,"onUpdate:src":e=>t.content.product.pic_url=e},null,8,["src","onUpdate:src"])):c("",!0)])),_:2},1032,["onClick"]),h(a,{class:"product-info"},{default:A((()=>[h(a,{class:"product-name"},{default:A((()=>[M(W(t.content.product.product_name),1)])),_:2},1024),h(a,{class:"product-price"},{default:A((()=>[h(v,{fontStyle:{fontSize:"28rpx"},currencyStyle:{fontSize:"22rpx"},decimalsStyle:{fontSize:"24rpx"},priceData:t.content.product.product_price},null,8,["priceData"])])),_:2},1024)])),_:2},1024)])),_:2},1024)):c("",!0),t.content.order?(r(),l(a,{key:1,class:"custom-message-order",onClick:e=>Fe("order",t)},{default:A((()=>[h(a,{class:"tit"},{default:A((()=>[M(W(t.content.order.order_status_name),1)])),_:2},1024),h(a,{class:"info"},{default:A((()=>[h(a,{class:"product-img"},{default:A((()=>[t.content.order.pic_url?(r(),l(n,{key:0,src:t.content.order.pic_url,"onUpdate:src":e=>t.content.order.pic_url=e},null,8,["src","onUpdate:src"])):c("",!0)])),_:2},1024),h(a,{class:"product-info"},{default:A((()=>[h(a,{class:"product-name"},{default:A((()=>[M(W(t.content.order.product_name),1)])),_:2},1024),h(a,{class:"product-txt"},{default:A((()=>[M(W(_(X)()?e.$t("共{0}件商品，合计",[t.content.order.product_num]):`共${t.content.order.product_num}件商品，合计`)+" ",1),h(v,{fontStyle:{fontSize:"28rpx"},currencyStyle:{fontSize:"22rpx"},decimalsStyle:{fontSize:"24rpx"},priceData:t.content.order.total_amount},null,8,["priceData"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])):c("",!0)])),_:2},1024)):c("",!0)])),_:2},1024),u("span",{class:"message-status"})])),_:2},1024)):c("",!0)])),_:2},1024),1===t.type?(r(),l(a,{key:0,class:V(["read-status",[t.is_read?"read":"unread"]])},{default:A((()=>[M(W(e.$t(t.is_read?"已读":"未读")),1)])),_:2},1032,["class"])):c("",!0)])),_:2},1024)):c("",!0),"product"===t.message_type?(r(),l(a,{key:3,class:"im-goods-card"},{default:A((()=>[h(a,{class:"content"},{default:A((()=>[h(a,{class:"pic"},{default:A((()=>[h(n,{src:t.pic_url,"onUpdate:src":e=>t.pic_url=e},null,8,["src","onUpdate:src"])])),_:2},1024),h(a,{class:"desc"},{default:A((()=>[h(a,{class:"title"},{default:A((()=>[M(W(t.product_name),1)])),_:2},1024),h(a,{class:"price"},{default:A((()=>[h(v,{fontStyle:{fontSize:"32rpx"},currencyStyle:{fontSize:"22rpx"},decimalsStyle:{fontSize:"24rpx"},priceData:t.product_price},null,8,["priceData"])])),_:2},1024)])),_:2},1024)])),_:2},1024),h(a,{class:"line"}),h(a,{class:"send",onClick:e=>{Ue("custom",{product:t})}},{default:A((()=>[M(W(e.$t("发送宝贝")),1)])),_:2},1032,["onClick"])])),_:2},1024)):c("",!0)])),_:2},1032,["class"])))),128))])),_:1})])),_:1})])),_:1},8,["scroll-top"])])),_:1}),h(a,{class:"thanos-layout-footer"},{default:A((()=>[h(a,{class:"wapim-inputer"},{default:A((()=>[h(a,{class:"thanos-hairline--top-bottom wapim-main-inputer"},{default:A((()=>[h(a,{class:"input-box"},{default:A((()=>[h(a,{class:"rich-input"},{default:A((()=>[h(g,{style:{height:"100%"},placeholder:"",border:"none",modelValue:re.value,"onUpdate:modelValue":t[1]||(t[1]=e=>re.value=e),adjustPosition:we.value,onConfirm:Te,onChange:Se,onFocus:Ce,onBlur:t[2]||(t[2]=e=>je.value=!1),onKeyboardheightchange:Ee},null,8,["modelValue","adjustPosition"])])),_:1})])),_:1}),h(a,{class:"wapim-inputer-operation"},{default:A((()=>[u("span",{class:"operation face",onClick:Ne}),!0===le.value?(r(),d("span",{key:0,class:"operation send",onClick:Te},W(e.$t("发送")),1)):(r(),l(a,{key:1,class:"operation plus",onClick:ze}))])),_:1})])),_:1}),T(h(a,{class:"wapim-inputer-plugin"},{default:A((()=>[h(a,{class:"wapim-inputer-file-picker"},{default:A((()=>[h(a,{class:"file-inputer-plugin"},{default:A((()=>[h(b,{onAfterRead:Ae,name:"6",multiple:"",maxCount:1},{default:A((()=>[h(a,{class:"pic-item plugin-item"},{default:A((()=>[h(a,{class:"photo icon"}),u("span",{class:"title"},W(e.$t("相册")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),[[z,ce.value]]),T(h(a,{class:"wapim-inputer-plugin"},{default:A((()=>[h(a,{class:"wapim-inputer-file-picker"},{default:A((()=>[h(a,{class:"file-emoji-plugin"},{default:A((()=>[h(_e,{onInsertEmoji:Ie})])),_:1})])),_:1})])),_:1},512),[[z,de.value]])])),_:1})])),_:1})])),_:1}),h(ve,{ref_key:"promptToneRef",ref:Be},null,512)])),_:1})}}}),[["__scopeId","data-v-42516337"]]);export{fe as default};
