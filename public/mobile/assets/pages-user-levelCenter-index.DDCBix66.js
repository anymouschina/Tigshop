import{e as l,a2 as e,R as a,E as s,ar as t,Q as n,r as u,O as i,C as d,c as r,o,i as c,w as _,a as v,ay as f,D as p,J as k,F as g,z as m,az as h,T as y,b,t as w,A as $,d as C,a9 as L,B as G,P as I,_ as j,a8 as P,$ as x,ce as O,aL as N,u as T,q as E,y as A,aw as S}from"./index-BKzbZvRR.js";import{_ as M}from"./tig-layout.BpNdXByQ.js";import{g as D}from"./levelCenter.DVO32OZ5.js";import{r as z}from"./index.CiDM1A-3.js";import"./masonry.XQRK2NFB.js";import"./format-price.kSnuguuz.js";import"./specification.DeG19GHJ.js";import"./tig-image.DrOwWlV9.js";import"./uni-icons.DELFdrY8.js";import"./uni-number-box.CzE6YkX8.js";import"./product.BqL6tr7k.js";import"./activityCard.DDPb7Kxq.js";import"./useList.qLYpICh7.js";const B=j(l({__name:"topCard",props:{list:{type:Array,default:()=>[]}},setup(l){e((l=>({"4818e31d":B.value,be65bf24:F.value,"4bf7bb9e":q.value})));const{t:j}=s(),{userInfo:P}=t(),x=l;let O=[];const N=n([]),T=u(0),E=n({discount:"0.0",freeShipping:0,rankPoint:"0"}),A=n([]),S=u(0);i((()=>x.list),(l=>{var e,a;O=l.map((l=>l.rights)),S.value=null==(e=l[0])?void 0:e.rankId,Object.assign(N,null==(a=l[0])?void 0:a.rights),T.value=l.findIndex((l=>(null==l?void 0:l.rankLevel)===(null==P?void 0:P.rankLevel))),-1!==T.value&&(Object.assign(E,l[T.value]),"0.0"!=E.discount&&A.push({iconImg:"discount",isChecked:1,rightName:E.discount+j("折")}),1===E.freeShipping&&A.push({iconImg:"freeShoping",isChecked:1,rightName:j("包邮")}),"0"!=E.rankPoint&&A.push({iconImg:"point",isChecked:1,rightName:E.rankPoint+j("倍积分")}),E.rights.forEach((l=>{1==l.isChecked&&A.push(l)})))}),{deep:!0,immediate:!0});const M=a((()=>{var l;return 0==P.rankExpireTime?j("永久"):null==(l=P.rankExpireTime)?void 0:l.slice(0,10)})),D=l=>{N.length=0,A.length=0;let e=l.detail.current;Object.assign(N,O[e]),Object.assign(E,x.list[e]),S.value=x.list[e].rankId,"0.0"!=E.discount&&A.push({iconImg:"discount",isChecked:1,rightName:E.discount+j("折")}),1==E.freeShipping&&A.push({iconImg:"freeShoping",isChecked:1,rightName:j("包邮")}),"0"!=E.rankPoint&&A.push({iconImg:"point",isChecked:1,rightName:E.rankPoint+j("倍积分")}),E.rights.forEach((l=>{1==l.isChecked&&A.push(l)}))},z=()=>{I({url:"/pages/user/levelCenter/benefit?rankId="+S.value})},B=a((()=>`url(${d("user/discount.png")})`)),F=a((()=>`url(${d("user/free_shoping.png")})`)),q=a((()=>`url(${d("user/point.png")})`));return(e,a)=>{const s=c,t=C,n=h,u=f,i=G;return o(),r(s,{class:"top_card_container"},{default:_((()=>[v(s,{class:"margin"},{default:_((()=>[v(u,{"next-margin":"16rpx",class:"card_swiper",onAnimationfinish:D,current:T.value},{default:_((()=>[(o(!0),p(g,null,k(l.list,((l,a)=>(o(),p(g,{key:null==l?void 0:l.rankId},[1===(null==l?void 0:l.rankCardType)?(o(),r(n,{key:0,class:"card_swiper_item"},{default:_((()=>[v(s,{class:y(["card_item",null==l?void 0:l.rankIco])},{default:_((()=>[v(s,{class:"level_name_wrap"},{default:_((()=>[v(s,{class:"level_name"},{default:_((()=>[b(w(null==l?void 0:l.rankName),1)])),_:2},1024),v(s,{class:"level_expiry"},{default:_((()=>[b(w(e.$t("当前等级有效期至")+" "+M.value),1)])),_:1})])),_:2},1024),(null==l?void 0:l.rankLevel)===$(P).rankLevel?(o(),r(s,{key:0,class:"card_badge"},{default:_((()=>[b(w(e.$t("当前等级")),1)])),_:1})):m("",!0),v(s,{class:"card_bottom"},{default:_((()=>[1===$(P).rankType?(o(),p(g,{key:0},[(null==l?void 0:l.rankLevel)===$(P).rankLevel?(o(),r(s,{key:0,class:"level_value_wapper"},{default:_((()=>[v(t,{class:"level_value"},{default:_((()=>{var l;return[b(w(null==(l=$(P))?void 0:l.growth),1)]})),_:1}),v(t,{class:"desc"},{default:_((()=>[b(w(e.$t("成长值")),1)])),_:1})])),_:1})):(o(),r(s,{key:1,class:"upgrades_wapper"},{default:_((()=>[v(t,{class:"desc"},{default:_((()=>[b(w(e.$t("再获得")),1)])),_:1}),v(t,{class:"level_value"},{default:_((()=>[b(w((null==l?void 0:l.minGrowthPoints)-$(P).growth<0?0:(null==l?void 0:l.minGrowthPoints)-$(P).growth),1)])),_:2},1024),v(t,{class:"desc"},{default:_((()=>[b(w(e.$t("成长值升级为该等级")),1)])),_:1})])),_:2},1024))],64)):m("",!0),2===$(P).rankType?(o(),p(g,{key:1},[(null==l?void 0:l.rankLevel)===$(P).rankLevel?(o(),r(s,{key:0,class:"level_value_wapper"},{default:_((()=>[v(t,{class:"level_value"},{default:_((()=>{var l;return[b(w(null==(l=$(P))?void 0:l.growth),1)]})),_:1}),v(t,{class:"desc"},{default:_((()=>[b(w(e.$t("成长值")),1)])),_:1})])),_:1})):(o(),r(s,{key:1,class:"upgrades_wapper"},{default:_((()=>[v(t,{class:"desc"},{default:_((()=>[b(w(e.$t("再消费")),1)])),_:1}),v(t,{class:"level_value"},{default:_((()=>[b(w((null==l?void 0:l.minGrowthPoints)-$(P).growth<0?0:(null==l?void 0:l.minGrowthPoints)-$(P).growth),1)])),_:2},1024),v(t,{class:"desc"},{default:_((()=>[b(w(e.$t("元升级为该等级")),1)])),_:1})])),_:2},1024))],64)):m("",!0)])),_:2},1024)])),_:2},1032,["class"])])),_:2},1024)):m("",!0),2===(null==l?void 0:l.rankCardType)?(o(),r(n,{key:1,class:"card_swiper_item"},{default:_((()=>[v(s,{class:"card_item",style:L(`background-image: url(${null==l?void 0:l.rankBg});`)},{default:_((()=>[v(s,{class:"level_name_wrap"},{default:_((()=>[v(s,{class:"level_name"},{default:_((()=>[b(w(null==l?void 0:l.rankName),1)])),_:2},1024),v(s,{class:"level_expiry"},{default:_((()=>[b(w(e.$t("当前等级有效期至")+" "+M.value),1)])),_:1})])),_:2},1024),(null==l?void 0:l.rankLevel)===$(P).rankLevel?(o(),r(s,{key:0,class:"card_badge"},{default:_((()=>[b(w(e.$t("当前等级")),1)])),_:1})):m("",!0),(null==l?void 0:l.rankLevel)===$(P).rankLevel?(o(),r(s,{key:1,class:"card_code_icon"})):m("",!0),v(s,{class:"card_bottom"},{default:_((()=>[1===$(P).rankType?(o(),p(g,{key:0},[(null==l?void 0:l.rankLevel)===$(P).rankLevel?(o(),r(s,{key:0,class:"level_value_wapper"},{default:_((()=>[v(t,{class:"level_value"},{default:_((()=>{var l;return[b(w(null==(l=$(P))?void 0:l.growth),1)]})),_:1}),v(t,{class:"desc"},{default:_((()=>[b(w(e.$t("成长值")),1)])),_:1})])),_:1})):(o(),r(s,{key:1,class:"upgrades_wapper"},{default:_((()=>[v(t,{class:"desc"},{default:_((()=>[b(w(e.$t("再获得")),1)])),_:1}),v(t,{class:"level_value"},{default:_((()=>[b(w((null==l?void 0:l.minGrowthPoints)-$(P).growth<0?0:(null==l?void 0:l.minGrowthPoints)-$(P).growth),1)])),_:2},1024),v(t,{class:"desc"},{default:_((()=>[b(w(e.$t("成长值升级为该等级")),1)])),_:1})])),_:2},1024))],64)):m("",!0),2===$(P).rankType?(o(),p(g,{key:1},[(null==l?void 0:l.rankLevel)===$(P).rankLevel?(o(),r(s,{key:0,class:"level_value_wapper"},{default:_((()=>[v(t,{class:"level_value"},{default:_((()=>{var l;return[b(w(null==(l=$(P))?void 0:l.growth),1)]})),_:1}),v(t,{class:"desc"},{default:_((()=>[b(w(e.$t("成长值")),1)])),_:1})])),_:1})):(o(),r(s,{key:1,class:"upgrades_wapper"},{default:_((()=>[v(t,{class:"desc"},{default:_((()=>[b(w(e.$t("再消费")),1)])),_:1}),v(t,{class:"level_value"},{default:_((()=>[b(w((null==l?void 0:l.minGrowthPoints)-$(P).growth<0?0:(null==l?void 0:l.minGrowthPoints)-$(P).growth),1)])),_:2},1024),v(t,{class:"desc"},{default:_((()=>[b(w(e.$t("元升级为该等级")),1)])),_:1})])),_:2},1024))],64)):m("",!0)])),_:2},1024)])),_:2},1032,["style"])])),_:2},1024)):m("",!0)],64)))),128))])),_:1},8,["current"])])),_:1}),v(s,{class:"level_rights_list"},{default:_((()=>[(o(!0),p(g,null,k(A.slice(0,4),((l,e)=>(o(),p(g,{key:e},[l.iconImg?(o(),r(s,{key:0,class:"right_item",onClick:z},{default:_((()=>[v(s,{class:y(["icon_img",l.iconImg])},null,8,["class"]),v(s,{class:"name"},{default:_((()=>[b(w(l.rightName),1)])),_:2},1024)])),_:2},1024)):1===l.isChecked?(o(),r(s,{key:1,class:"right_item",onClick:z},{default:_((()=>[v(s,{class:"icon_wapper"},{default:_((()=>[v(i,{class:"icon",src:null==l?void 0:l.icon},null,8,["src"])])),_:2},1024),v(s,{class:"name"},{default:_((()=>[b(w(null==l?void 0:l.name),1)])),_:2},1024)])),_:2},1024)):m("",!0)],64)))),128)),A.length>4?(o(),r(s,{key:0,class:"right_item",onClick:z},{default:_((()=>[v(s,{class:"icon_img has_five_right"},{default:_((()=>[v(s,{class:"num"},{default:_((()=>[b(w(A.length),1)])),_:1}),v(s,{class:"txt"},{default:_((()=>[b(w(e.$t("项")),1)])),_:1})])),_:1}),v(s,{class:"name"},{default:_((()=>[b(w(e.$t("全部权益")),1)])),_:1})])),_:1})):m("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-3a8fe6b6"]]),F=j(l({__name:"taskCard",setup(l){e((l=>({"68ac7c1e":t.value})));const s=n({});(async()=>{try{let l=await O();Object.assign(s,null==l?void 0:l.growUpSetting),console.log(s)}catch(l){}})();const t=a((()=>`url(${d("user/task_bg.png")})`));return(l,e)=>{const a=c,t=x;return o(),r(a,{class:"task_container"},{default:_((()=>[v(a,{class:"task_head"},{default:_((()=>[v(a,{class:"title"},{default:_((()=>[b(w(l.$t("成长任务")),1)])),_:1})])),_:1}),v(a,{class:"task_list"},{default:_((()=>[1===(null==s?void 0:s.evpi)?(o(),r(a,{key:0,class:"task_item"},{default:_((()=>[v(a,{class:"img",style:L(`background-image: url(${$(d)("user/evpi.png")});`)},null,8,["style"]),v(a,{class:"task_info"},{default:_((()=>[v(a,{class:"name"},{default:_((()=>[b("完善信息")])),_:1}),v(a,{class:"growth_value"},{default:_((()=>[b(w($(P)()?l.$t("+{0}成长值",[null==s?void 0:s.evpiGrowth]):`+${null==s?void 0:s.evpiGrowth}成长值`),1)])),_:1})])),_:1}),v(t,{url:"/pages/user/profile/index",class:"do_task_btn"},{default:_((()=>[b("去完成")])),_:1})])),_:1})):m("",!0),1===(null==s?void 0:s.bindPhone)?(o(),r(a,{key:1,class:"task_item"},{default:_((()=>[v(a,{class:"img",style:L(`background-image: url(${$(d)("user/bind_phone.png")});`)},null,8,["style"]),v(a,{class:"task_info"},{default:_((()=>[v(a,{class:"name"},{default:_((()=>[b("绑定手机号")])),_:1}),v(a,{class:"growth_value"},{default:_((()=>[b(w($(P)()?l.$t("+{0}成长值",[null==s?void 0:s.bindPhoneGrowth]):`+${null==s?void 0:s.bindPhoneGrowth}成长值`),1)])),_:1})])),_:1}),v(t,{url:"/pages/user/profile/index",class:"do_task_btn"},{default:_((()=>[b("去完成")])),_:1})])),_:1})):m("",!0),1===(null==s?void 0:s.buyGoods)?(o(),r(a,{key:2,class:"task_item"},{default:_((()=>[v(a,{class:"img",style:L(`background-image: url(${$(d)("user/buy_goods.png")});`)},null,8,["style"]),v(a,{class:"task_info"},{default:_((()=>[v(a,{class:"name"},{default:_((()=>[b("购买商品")])),_:1}),v(a,{class:"growth_value"},{default:_((()=>[b(w($(P)()?l.$t("每消费{0}元，获得{1}点成长值",[null==s?void 0:s.buyGoodsMoney,null==s?void 0:s.buyGoodsGrowth]):`每消费${null==s?void 0:s.buyGoodsMoney}元，获得${null==s?void 0:s.buyGoodsGrowth}点成长值`),1)])),_:1})])),_:1}),v(t,{url:"/","open-type":"switchTab",class:"do_task_btn"},{default:_((()=>[b("去完成")])),_:1})])),_:1})):m("",!0),1===(null==s?void 0:s.buyOrder)?(o(),r(a,{key:3,class:"task_item"},{default:_((()=>[v(a,{class:"img",style:L(`background-image: url(${$(d)("user/buy_order.png")});`)},null,8,["style"]),v(a,{class:"task_info"},{default:_((()=>[v(a,{class:"name"},{default:_((()=>[b("完成下单")])),_:1}),v(a,{class:"growth_value"},{default:_((()=>[b(w($(P)()?l.$t("每完成{0}笔订单，获得{1}点成长值",[null==s?void 0:s.buyOrderNumber,null==s?void 0:s.buyOrderGrowth]):`每完成${null==s?void 0:s.buyOrderNumber}笔订单，获得${null==s?void 0:s.buyOrderGrowth}点成长值`),1)])),_:1})])),_:1}),v(t,{url:"/pages/cart/index","open-type":"switchTab",class:"do_task_btn"},{default:_((()=>[b("去完成")])),_:1})])),_:1})):m("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-ddd61b50"]]),q=j(l({__name:"levelDesc",props:{list:{type:Array,default:()=>[]},rankConfig:{type:Object,default:()=>{}}},setup(l){const{t:e}=s(),a=l,t=u([]);N((()=>{var l,s;l=a.list,s=a.rankConfig,null==l||l.forEach((l=>{var a,n,u,i;1===(null==(a=null==s?void 0:s.data)?void 0:a.type)?t.value.push({...l,condition:e("不降级")}):2===(null==(n=null==s?void 0:s.data)?void 0:n.type)&&t.value.push({...l,condition:(null==(u=s.data)?void 0:u.rankAfterMonth)+e("个月后，按近")+(null==(i=s.data)?void 0:i.useMonth)+e("个月成长值重新计算")})}))}));return(a,s)=>{const n=c;return o(),r(n,{class:"level_desc_container"},{default:_((()=>[v(n,{class:"level_card"},{default:_((()=>[v(n,{class:"card_title"},{default:_((()=>[b(w(a.$t("等级说明")),1)])),_:1}),v(n,{class:"card_info_wapper"},{default:_((()=>[v(n,{class:"list list_head"},{default:_((()=>[v(n,{class:"level_icon_label"},{default:_((()=>[b(w(a.$t("标识")),1)])),_:1}),v(n,{class:"level_name_label"},{default:_((()=>[b(w(a.$t("会员名称")),1)])),_:1}),v(n,{class:"level_condition_label"},{default:_((()=>[b(w(a.$t("升级条件")),1)])),_:1})])),_:1}),v(n,{class:"list"},{default:_((()=>[(o(!0),p(g,null,k(l.list,((l,a)=>(o(),r(n,{key:null==l?void 0:l.rankId,class:"list_item"},{default:_((()=>[v(n,{class:"level_icon"},{default:_((()=>[v(n,{class:y(["icon",`card${null==l?void 0:l.rankLevel}`]),style:L({"background-image":`url(${$(d)(`user/level_${null==l?void 0:l.rankLevel}.png`)})`})},null,8,["class","style"])])),_:2},1024),v(n,{class:"level_name"},{default:_((()=>[b(w(null==l?void 0:l.rankName),1)])),_:2},1024),v(n,{class:"level_condition"},{default:_((()=>{return[b(w((a=null==l?void 0:l.minGrowthPoints,0===a?e("无门槛"):a+e("成长值"))),1)];var a})),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),v(n,{class:"level_card"},{default:_((()=>[v(n,{class:"card_title"},{default:_((()=>[b(w(a.$t("保级说明")),1)])),_:1}),v(n,{class:"card_info_wapper"},{default:_((()=>[v(n,{class:"list list_head"},{default:_((()=>[v(n,{class:"level_name_label"},{default:_((()=>[b(w(a.$t("会员名称")),1)])),_:1}),v(n,{class:"level_condition_label"},{default:_((()=>[b(w(a.$t("保级条件")),1)])),_:1})])),_:1}),v(n,{class:"list"},{default:_((()=>[(o(!0),p(g,null,k(t.value,((l,e)=>(o(),r(n,{key:e,class:"list_item"},{default:_((()=>[v(n,{class:"level_name"},{default:_((()=>[b(w(null==l?void 0:l.rankName),1)])),_:2},1024),v(n,{class:"level_condition"},{default:_((()=>[b(w(null==l?void 0:l.condition),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-3243a6b0"]]),H=j(l({__name:"index",setup(l){const{userInfo:e}=t(),a=n([]),s=n([]),i=n({rankLevel:"1"}),d=u({}),f=T();return(async()=>{var l;try{let t=await D();console.log(t);let n=null==(l=null==t?void 0:t.item)?void 0:l.filter((l=>parseInt(null==l?void 0:l.rankLevel)>=parseInt(e.rankLevel)));d.value=t.rankConfig,Object.assign(a,n),Object.assign(s,null==t?void 0:t.item)}catch(t){}})(),(l,t)=>{const n=c,u=E(A("tig-layout"),M);return o(),r(u,{title:"会员中心"},{default:_((()=>[v(n,{class:"level_container"},{default:_((()=>[v(B,{list:a,userLevel:i},null,8,["list","userLevel"]),S("div",{class:y(["bottom_wapper",{task_mode:2===$(e).rankType}])},[2===$(e).rankType?(o(),r(F,{key:0})):m("",!0),v(q,{rankConfig:d.value,list:s},null,8,["rankConfig","list"])],2)])),_:1}),v(z),v(n,{class:"shop-company"},{default:_((()=>[b(w($(f).shopCompany),1)])),_:1})])),_:1})}}}),[["__scopeId","data-v-38a732fb"]]);export{H as default};
