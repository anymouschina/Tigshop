import{e,r as a,g as l,R as t,c as s,w as i,i as u,v as o,z as n,o as r,a as d,E as c,b as f,t as p,F as v,B as m,N as _,M as b,_ as y}from"./index-BKXBH4vI.js";import{_ as h}from"./uni-easyinput.D0KhEVqd.js";import{a as k,_ as g}from"./tig-layout.DMoUsUKf.js";import{n as C}from"./index.xrDesKlL.js";import{V as $}from"./verificationCode.CRSs8EZv.js";import{s as x,a as j,m as U,b as q}from"./security.B7bvd7MX.js";import"./uni-icons.C94_g2wt.js";const w=y(e({__name:"phone",setup(e){const y={navbar:"1",return:"1",title:"账户安全",color:!1},w=e=>{E.value=e},A=e=>{I.value=e},E=a(""),I=a(""),B=a(""),M=a(!0),T=a(!1);l((e=>{e.mobile?(T.value=!0,I.value=e.mobile):T.value=!1}));const D=t((()=>!E.value||!B.value)),z=e=>{_({title:e,duration:1500,icon:"none"})},F=async()=>{try{let e={mobile:I.value,code:E.value};if(T.value){await U({...e})}else{await q({...e})}b({url:"/pages/user/security/newPhone"})}catch(e){_({title:e.message,icon:"none"})}};return(e,a)=>{const l=u,t=o(n("uni-easyinput"),h),_=o(n("tig-button"),k),b=o(n("tig-layout"),g);return r(),s(l,null,{default:i((()=>[d(b,null,{default:i((()=>[d(C,{parameter:y}),d(l,{class:"profile-edit-main"},{default:i((()=>[d(l,{class:"profile-edit-content"},{default:i((()=>[T.value?(r(),s(l,{key:0,class:"item"},{default:i((()=>[d(l,{class:"title"},{default:i((()=>[d(l,null,{default:i((()=>[f(p(e.$t("请输入")),1)])),_:1}),d(l,{class:"info"},{default:i((()=>[f(p(I.value.replace(/(\d{2})\d*(\d{4})$/,"$1*****$2")),1)])),_:1}),d(l,null,{default:i((()=>[f(p(e.$t("收到的短信验证码")),1)])),_:1})])),_:1})])),_:1})):(r(),c(v,{key:1},[d(l,{class:"item"},{default:i((()=>[d(l,{class:"title"},{default:i((()=>[d(l,null,{default:i((()=>[f(p(e.$t("您还未绑定手机号，请输入手机号绑定")),1)])),_:1})])),_:1})])),_:1}),d(l,{class:"item special-item line"},{default:i((()=>[d(t,{inputBorder:!1,value:I.value,class:"uni-input item-input",placeholder:e.$t("请输入手机号"),primaryColor:"rgb(192, 196, 204)",onInput:A},null,8,["value","placeholder"])])),_:1})],64)),d(l,{class:"flex align-center"},{default:i((()=>[d(l,{class:"item line"},{default:i((()=>[d(t,{inputBorder:!1,value:E.value,focus:"",class:"",placeholder:e.$t("手机短信验证码"),primaryColor:"rgb(192, 196, 204)",onInput:w},null,8,["value","placeholder"])])),_:1}),T.value?(r(),s($,{key:0,style:{height:"65rpx"},isChecked:M.value,"onUpdate:isChecked":a[0]||(a[0]=e=>M.value=e),mobile:I.value,"onUpdate:mobile":a[1]||(a[1]=e=>I.value=e),"verify-token-data":B.value,"onUpdate:verifyTokenData":a[2]||(a[2]=e=>B.value=e),requestApi:m(x),onMobileErrorCallback:z},null,8,["isChecked","mobile","verify-token-data","requestApi"])):(r(),s($,{key:1,style:{height:"65rpx"},isChecked:M.value,"onUpdate:isChecked":a[3]||(a[3]=e=>M.value=e),mobile:I.value,"onUpdate:mobile":a[4]||(a[4]=e=>I.value=e),"verify-token-data":B.value,"onUpdate:verifyTokenData":a[5]||(a[5]=e=>B.value=e),requestApi:m(j),onMobileErrorCallback:z},null,8,["isChecked","mobile","verify-token-data","requestApi"]))])),_:1}),d(l,{class:"item",style:{height:"60rpx"}},{default:i((()=>[d(_,{disabled:D.value,class:"next",onClick:F},{default:i((()=>[f(p(e.$t("下一步")),1)])),_:1},8,["disabled"])])),_:1})])),_:1}),d(l,{class:"profile-edit-content"},{default:i((()=>[d(l,{class:"btn-item"},{default:i((()=>[d(l,{class:"title"},{default:i((()=>[d(l,{class:"big-title"},{default:i((()=>[f(p(e.$t("为什么要进行身份验证"))+"？",1)])),_:1})])),_:1}),d(l,{class:"info"},{default:i((()=>[f("1. "+p(e.$t("为保障您的账户信息安全，在变更账户中的重要信息时需要进行身份验证，感谢您的理解和支持"))+"。",1)])),_:1}),d(l,{class:"info"},{default:i((()=>[f("2. "+p(e.$t("验证身份遇到问题？您可以通知我们的客服，我们将尽快联系您"))+"。",1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-cdc709a6"]]);export{w as default};
