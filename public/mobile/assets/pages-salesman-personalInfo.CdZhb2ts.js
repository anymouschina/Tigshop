import{e as a,E as e,Q as l,r as t,k as s,c as o,w as r,a5 as n,a6 as i,q as m,y as f,bI as u,bt as d,bJ as c,o as b,a as p,i as _,b as g,t as h,am as y,ao as $,_ as k}from"./index-BKzbZvRR.js";import{_ as v}from"./tig-image.DrOwWlV9.js";import{_ as j,a as V}from"./tig-layout.BpNdXByQ.js";import{_ as x}from"./tig-fixed-placeholder.s9cnCRBL.js";import{g as B,u as w}from"./salesmanPersonal.BtKUMDNk.js";const R=k(a({__name:"personalInfo",setup(a){const{t:k}=e(),R=l({nickname:"",cardname:"",wechatname:"",mobile:""}),C={mobile:{type:"string",required:!0,message:k("请输入手机号"),trigger:["blur","change"]}},I=t(),S=()=>{I.value.validate().then((()=>{T()})).catch((()=>{uni.$u.toast(k("保存失败"))}))},T=async()=>{try{const a=await w({...R});a.message&&uni.$u.toast(a.message),setTimeout((()=>{y({success:function(a){$("refreshData")}})}),1e3)}catch(a){console.error("表单错误信息：",a),uni.$u.toast(a.message)}};return s((()=>{(async()=>{n({title:k("加载中")});try{const a=await B();Object.assign(R,a)}catch(a){console.error(a)}finally{i()}})()})),(a,e)=>{const l=_,t=m(f("tig-image"),v),s=m(f("up-form-item"),u),n=m(f("up-input"),d),i=m(f("up-form"),c),y=m(f("tig-button"),V),$=m(f("tig-fixed-placeholder"),x),k=m(f("tig-layout"),j);return b(),o(k,{needSafeTop:!0,safeTopBgColor:"#f5f5f5"},{default:r((()=>[p(i,{labelPosition:"left",model:R,rules:C,ref_key:"formRef",ref:I},{default:r((()=>[p(l,{class:"personal-title"},{default:r((()=>[g(h(a.$t("个人信息")),1)])),_:1}),p(l,{class:"personal-info"},{default:r((()=>[p(s,{label:a.$t("头像"),labelWidth:"100",borderBottom:!0,ref:"itemRef"},{default:r((()=>[p(l,{class:"salesman-avatar"},{default:r((()=>[p(t,{class:"salesman-avatar__img salesman-avatar--round salesman-avatar__img--big",src:R.avatar},null,8,["src"])])),_:1})])),_:1},8,["label"]),p(s,{label:a.$t("昵称"),labelWidth:"100",prop:"nickname",borderBottom:!0,ref:"itemRef"},{default:r((()=>[p(n,{modelValue:R.nickname,"onUpdate:modelValue":e[0]||(e[0]=a=>R.nickname=a),border:"none",placeholder:a.$t("请输入昵称"),fontSize:"14"},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),p(l,{class:"personal-title"},{default:r((()=>[g(h(a.$t("联系方式")),1)])),_:1}),p(l,{class:"personal-info"},{default:r((()=>[p(s,{label:a.$t("手机号"),labelWidth:"100",prop:"mobile",borderBottom:!0,ref:"itemRef"},{default:r((()=>[p(n,{modelValue:R.mobile,"onUpdate:modelValue":e[1]||(e[1]=a=>R.mobile=a),border:"none",placeholder:a.$t("请输入手机号"),fontSize:"14"},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})])),_:1},8,["model"]),p($,{backgroundColor:"#fff"},{default:r((()=>[p(l,{class:"btn-box"},{default:r((()=>[p(y,{class:"salesman-btn",onClick:S},{default:r((()=>[g(h(a.$t("保存")),1)])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-6b11b0c4"]]);export{R as default};
