import{e as a,G as e,u as s,ad as t,Q as l,r,g as c,k as o,c as i,w as u,i as n,a2 as d,B as _,v as p,z as m,o as f,a as v,A as h,E as g,F as b,K as y,T as x,U as j,d as C,b as k,t as w,V as D,C as U,D as z,M as S,_ as V}from"./index-BKXBH4vI.js";import{_ as B}from"./tig-image.BbZoJ9nS.js";import{_ as I}from"./format-price.0qAAshfo.js";import{e as $,_ as A}from"./tig-layout.DMoUsUKf.js";import{s as H}from"./searchInput.CP9DQ8PZ.js";import{e as M}from"./empty.CM0AaKdC.js";import{_ as N}from"./share.vue_vue_type_script_setup_true_lang.B6msJkJd.js";import{a as q}from"./salesman.CxOPGtEY.js";import"./empty.vue_vue_type_style_index_0_scoped_b2f6c60f_lang.BgK1t0Rd.js";import"./tig-qrcode.CpruMLXZ.js";import"./tig-fixed-placeholder.BHdfEiP8.js";import"./useCurrency.BKNIWl9f.js";const E=V(a({__name:"list",setup(a){d((a=>({"2ba84727":_(E)+"px",b29c9878:_(K)+"px","78ef9668":_(F)+"px","3eeebb0c":_(G)})));const{t:V}=e();s(),t();const{height:E,contentHeight:F,contentWidth:G,statusBarHeight:K}=$(60),Q=l({product_name:"",sort_field:"add_time",sort_order:"desc",page:1,page_size:15}),T=r(0),W=r("add_time"),J=r([{label:"最新",value:"add_time"},{label:"销量",value:"virtual_sales"},{label:"价格",value:"product_price",sort_order:"desc"}]),L=()=>{Q.page=1,Q.sort_order="desc",X.value=[]},O=()=>{Q.product_name="",L(),Y()},P=a=>{L(),Y()},R=r(!1),X=r([]),Y=async()=>{R.value=!0;try{const a=await q(Q);X.value=[...X.value,...a.filter_result],T.value=a.total}catch(a){}finally{R.value=!1}},Z=r({}),aa=r(!1);return c((()=>{Y()})),o((()=>{Q.page<Math.ceil(T.value/Q.page_size)&&(Q.page++,Y())})),(a,e)=>{const s=n,t=C,l=p(m("tig-image"),B),r=p(m("format-price"),I),c=U,o=p(m("tig-layout"),A);return f(),i(s,null,{default:u((()=>[v(o,null,{default:u((()=>[v(s,{class:"sticky"},{default:u((()=>[v(s,{class:"salesman-menu"},{default:u((()=>[v(s,{class:"search-box"},{default:u((()=>[v(s,{class:"status-bar"}),v(s,{class:"search-input-box"},{default:u((()=>[v(s,{class:"input"},{default:u((()=>[v(H,{style:{width:"100%"},modelValue:Q.product_name,"onUpdate:modelValue":e[0]||(e[0]=a=>Q.product_name=a),onConfirm:P,onClear:O},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),v(s,{class:"salesman-content"},{default:u((()=>[(f(!0),g(b,null,y(J.value,((e,l)=>(f(),i(s,{onClick:a=>(a=>{if(L(),"product_price"==a.value)a.sort_order="desc"===a.sort_order?"asc":"desc",Q.sort_order=a.sort_order;else if(a.value===Q.sort_field)return;W.value=a.value,Q.sort_field=a.value,Y()})(e),class:x(["salesman-item",{active:W.value===e.value}]),key:l},{default:u((()=>[v(t,null,{default:u((()=>[k(w(a.$t(e.label)),1)])),_:2},1024),j(v(s,{class:"price-ico-box flex flex-column"},{default:u((()=>[v(t,{class:x(["iconfont-h5 icon-shangjiantou price-icon",{order:"product_price"===W.value&&"asc"===e.sort_order}])},null,8,["class"]),v(t,{class:x(["iconfont-h5 icon-xiajiantou price-icon",{order:"product_price"===W.value&&"desc"===e.sort_order}])},null,8,["class"])])),_:2},1536),[[D,"product_price"===e.value]])])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1})])),_:1}),v(s,{class:"salesman-list"},{default:u((()=>[(f(!0),g(b,null,y(X.value,(e=>(f(),i(s,{key:e.product_id,class:"salesman-list-item"},{default:u((()=>[v(s,{class:"salesman-item-content",onClick:a=>{return s=`/pages/salesman/detail?id=${e.product_id}`,void S({url:s});var s}},{default:u((()=>[v(s,{class:"salesman-item-img"},{default:u((()=>[v(l,{src:e.pic_thumb,"onUpdate:src":a=>e.pic_thumb=a},null,8,["src","onUpdate:src"])])),_:2},1024),v(s,{class:"salesman-item-text"},{default:u((()=>[v(s,{class:"line2 name"},{default:u((()=>[k(w(e.product_name),1)])),_:2},1024),v(s,{class:"price"},{default:u((()=>[v(r,{currencyStyle:{"font-size":"21rpx"},priceData:e.product_price},null,8,["priceData"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),v(s,{class:"salesman-item-btn"},{default:u((()=>[v(s,{class:"salesman-item-btn-content",onClick:a=>{return s=e,aa.value=!0,void(Z.value=s);var s}},{default:u((()=>[v(c,{class:"salesman-item-btn-icon",src:_(z)("salesman/shareIcon.png")},null,8,["src"]),v(s,{class:"salesman-item-btn-text"},{default:u((()=>[k(w(a.$t(Number(e.final_commission_price)>0?"预计可赚":"立即分享"))+" ",1),Number(e.final_commission_price)>0?(f(),i(r,{key:0,priceData:e.final_commission_price},null,8,["priceData"])):h("",!0)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),R.value||0!==T.value?h("",!0):(f(),i(M,{key:0,styles:{width:"320rpx",height:"320rpx"}})),v(N,{showShareCard:aa.value,"onUpdate:showShareCard":e[1]||(e[1]=a=>aa.value=a),currentData:Z.value},null,8,["showShareCard","currentData"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-a3b8c8d0"]]);export{E as default};
