import{e as s,E as a,r as e,R as i,f as t,c as l,w as o,a5 as n,a6 as c,q as d,y as r,a2 as u,C as m,o as v,aw as p,D as g,z as y,t as f,b as k,F as _,J as x,T as $,a as b,$ as w,i as B,A as h,a7 as q,L as j,P as C,_ as G}from"./index-BKzbZvRR.js";import{_ as N}from"./format-price.kSnuguuz.js";import{_ as P}from"./tig-layout.BpNdXByQ.js";import{g as D,s as T}from"./sign.Lzc_tMw9.js";const A=G(s({__name:"index",setup(s){u((s=>({ff322920:z.value,e3f9ece0:E.value})));const{t:G}=a(),A=e({signPoints:0,record:0,isSign:0,days:[],recommendGoods:[]}),I=async()=>{n({title:G("加载中")});try{const s=await D("user/sign/index");Object.assign(A.value,s)}catch(s){console.error(s)}finally{c()}},S=async()=>{n({title:G("加载中")});try{await T(),j({title:G("打卡成功"),duration:1e3,icon:"none"}),setTimeout((function(){I()}),1e3)}catch(s){j({title:s.message,duration:1500,icon:"none"})}finally{c()}},z=i((()=>`url(${m("qiandao/bg.png")})`)),E=i((()=>`url(${m("qiandao/hot_bg.png")})`));return t((()=>{I()})),(s,a)=>{const e=w,i=d(r("format-price"),N),t=B,n=d(r("tig-layout"),P);return v(),l(n,{title:"签到"},{default:o((()=>[p("div",{class:"qiandaoBox"},[p("div",{class:"title"},f(s.$t("每日打卡领积分")),1),p("div",{class:"wrap"},[p("div",{class:"samll-title"},[k(f(s.$t("今天打卡得")),1),p("span",null,f(A.value.signPoints),1),k(f(s.$t("积分")),1)]),p("div",{class:"selectedBox"},[p("div",{class:"line"}),(v(!0),g(_,null,x(A.value.days,((s,a)=>(v(),g("div",{class:$(["item",{selected:A.value.record>=s.dayNum}]),key:a},[p("div",{class:"item-content"},[A.value.record<s.dayNum?(v(),g("div",{key:0,class:"num"},f(s.points),1)):(v(),g("div",{key:1,class:"num"})),p("div",{class:"date"},f(s.name),1)])],2)))),128))]),p("div",{class:"qiandaoBtnBox"},[p("div",{class:"qdBtn"},[A.value.isSign?(v(),g("div",{key:0,class:"dk-now"},[p("span",null,f(s.$t("今日已打卡")),1)])):(v(),g("div",{key:1,class:"dk-now",onClick:S},[p("span",null,f(s.$t("立即打卡")),1)]))])])])]),A.value.recommendGoods?(v(),g("div",{key:0,class:"recgoodsBox"},[p("div",{class:"title"},[p("div",{class:"bg"},f(s.$t("今日特卖 发现好货")),1),b(e,{url:"/pages/search/result?intro=hot"},{default:o((()=>[p("div",{class:"moregoods"},[k(f(s.$t("查看更多"))+" ",1),p("span",{class:"iconfont icon-xiangyou"})])])),_:1})]),p("div",{class:"wrapGoods"},[(v(!0),g(_,null,x(A.value.recommendGoods,((s,a)=>(v(),l(t,{class:"item",onClick:a=>{C({url:"/pages/product/index?id="+s.productId})},key:a},{default:o((()=>[p("img",{class:"rec-img",alt:s.productName,src:h(q)(s.picThumb)},null,8,["alt","src"]),p("div",{class:"info"},[p("div",{class:"name"},f(s.productName),1),b(i,{isBottom:!1,class:"price",priceData:s.productPrice},null,8,["priceData"])])])),_:2},1032,["onClick"])))),128))])])):y("",!0)])),_:1})}}}),[["__scopeId","data-v-d014bb85"]]);export{A as default};
