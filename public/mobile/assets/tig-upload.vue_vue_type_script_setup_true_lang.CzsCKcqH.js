import{e,G as a,r as t,c as s,o as u,w as i,ay as l,i as n,bF as o,N as r,a9 as c,by as d,bz as p,H as m,aa as h,bA as f}from"./index-BKXBH4vI.js";const g=e({__name:"tig-upload",props:{count:{type:Number,default:1},modelValue:{type:String,default:""},requestUrl:{type:String,default:"user/user/upload_img"}},emits:["update:modelValue","change"],setup(e,{emit:g}){const{t:y}=a(),b=e,_=t([]),S=g,N=()=>{o({count:b.count,success:async e=>{c({title:y("上传中...")}),e.tempFilePaths.map((e=>{d({url:f+"/api/"+b.requestUrl,filePath:e,name:"file",header:{Authorization:m("token"),Secret:p()},success:e=>{b.count>1?(_.value.push(JSON.parse(e.data).data),S("update:modelValue",_.value),h()):(r({title:y("图片上传成功")}),S("change"),h())},fail:e=>{h(),r({title:y("图片上传失败"),icon:"none"})}})}))},fail:e=>{r({title:y("图片选择失败"),icon:"none"})}})};return(e,a)=>{const t=n;return u(),s(t,{style:{height:"inherit",width:"inherit"},onClick:N},{default:i((()=>[l(e.$slots,"default")])),_:3})}}});export{g as _};
