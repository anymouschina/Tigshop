import{Z as e,d as a,u as l,r as o,G as t,ac as s,Q as i,R as r,a2 as n,f as u,H as d,ad as c,ae as p,k as m,l as f,m as _,n as v,w as b,q as g,t as h,v as y,s as x,x as k,I as V,M as $,af as j,C,B as w,L as S}from"./index-Do_Cb7fn.js";import{_ as z}from"./tig-mobile-areacode.Dq2bqdok.js";import{_ as U}from"./uni-easyinput.DgTgv_xO.js";import{_ as q,a as M}from"./uni-forms.7UC4mlQa.js";import{e as A,a as B,_ as R,s as F}from"./tig-layout.BV0ZvCt0.js";import{n as I}from"./index.Y6J4G1_A.js";import{V as Z}from"./verificationCode.Cl5MBpD9.js";import{_ as D}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./u-picker.C0Ehso0s.js";import"./u-loading-icon.rQrrZF_r.js";import"./uni-icons.DK0ZiICA.js";import"./u-icon.CBDMG2rO.js";const E=D(a({__name:"index",setup(a){const D=l(),E=o("86"),{t:H}=t();s();const L=i({navbar:"1",return:"1",title:"注册"}),T=o(!1),W=o(""),G=o(!1),Q=r((()=>!(X.value.mobile&&X.value.mobile_code&&X.value.password&&W.value))),X=o({mobile_code:"",mobile:"",password:""}),J={mobile:{rules:[{required:!0,errorMessage:H("请输入手机号")},{validateFunction:(e,a,l,o)=>a?/^(?=.*\D).+$/.test(a)?o(H("格式错误，请输入正确的手机号码")):void o():o(H("手机号不能为空"))}]},mobile_code:{rules:[{required:!0,errorMessage:H("请输入验证码")},{validateFunction:(e,a,l,o)=>a?6!=a.length?o(H("请输入6位验证码")):void o():o(H("验证码不能为空"))}]},password:{rules:[{required:!0,errorMessage:H("请输入密码")},{validateFunction:(e,a,l,o)=>a?a.length>20||a.length<6?o(H("密码应为6-20位字符")):/\s/.test(a)?o(H("密码中不允许有空格")):/^\d+$/.test(a)?o(H("密码不能全为数字")):/^(?=.*[\d\W]).+$/.test(a)?/^(?=.*[a-zA-Z0-9]).+$/.test(a)?/^(?!([a-zA-Z0-9])\1*$).+$/.test(a)?void o():o(H("密码不能全为相同字符或数字")):o(H("密码不能全为符号")):o(H("密码不能全为字母")):o(H("密码不能为空"))}]}},K=n(),N=async()=>{K.value.validate().then((async()=>{const a=d("bindSalesmanId");try{G.value=!0,X.value.mobile=D.is_open_mobile_area_code?E.value+X.value.mobile:X.value.mobile;await(l={...X.value,salesman_id:a},e({url:"user/regist/regist_act",method:"post",data:l}));$({title:H("注册成功"),duration:1500,icon:"none"}),setTimeout((()=>{j({url:"/pages/login/index"})}),1e3)}catch(o){$({title:o.message,duration:1500,icon:"none"})}finally{G.value=!1}var l})).catch((e=>{console.error("表单错误信息：",e)}))};u((()=>{d("token")&&c({url:"/pages/index/index"}),p((()=>{K.value.setRules(J)}))}));const O=e=>{$({title:e,duration:1500,icon:"none"})},P=e=>{S({url:e})};return(e,a)=>{const l=C,o=m(f("tig-mobile-areacode"),z),t=m(f("uni-easyinput"),U),s=m(f("uni-forms-item"),q),i=m(f("tig-checkbox"),A),r=w,n=m(f("uni-forms"),M),u=m(f("tig-button"),B),d=m(f("tig-layout"),R);return _(),v(d,null,{default:b((()=>[g(l,{class:"register-container"},{default:b((()=>[g(I,{parameter:L},null,8,["parameter"]),g(l,{class:"register-warp"},{default:b((()=>[g(l,{class:"h1_tit"},{default:b((()=>[h(y(e.$t("会员注册")),1)])),_:1})])),_:1}),g(l,{class:"profile-edit-content"},{default:b((()=>[g(n,{ref_key:"formRef",ref:K,modelValue:X.value,rules:J,"label-align":"right"},{default:b((()=>[g(s,{label:"",name:"mobile"},{default:b((()=>[g(l,{class:"input mobileareacode-box"},{default:b((()=>[x(D).is_open_mobile_area_code?(_(),v(o,{key:0,labelStyle:{fontSize:"28rpx"},nameStyle:{fontSize:"24rpx",padding:"0 2rpx 0 10rpx"},boxStyle:{paddingRight:"0"},iconStyle:{fontSize:"22rpx"},modelValue:E.value,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value=e)},null,8,["modelValue"])):k("",!0),g(t,{inputBorder:!1,modelValue:X.value.mobile,"onUpdate:modelValue":a[1]||(a[1]=e=>X.value.mobile=e),class:"uni-input item-input",placeholderStyle:"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("请输入手机号"),primaryColor:"rgb(192, 196, 204)"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),g(s,{label:"",name:"mobile_code"},{default:b((()=>[g(l,{class:"item-one"},{default:b((()=>[g(t,{inputBorder:!1,modelValue:X.value.mobile_code,"onUpdate:modelValue":a[2]||(a[2]=e=>X.value.mobile_code=e),class:"uni-input item-input input",focus:"",placeholderStyle:"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("手机短信验证码"),primaryColor:"rgb(192, 196, 204)",style:{width:"400rpx"}},null,8,["modelValue","placeholder"]),g(Z,{style:{height:"65rpx"},isChecked:T.value,"onUpdate:isChecked":a[3]||(a[3]=e=>T.value=e),mobile:x(D).is_open_mobile_area_code?E.value+X.value.mobile:X.value.mobile,"verify-token-data":W.value,"onUpdate:verifyTokenData":a[4]||(a[4]=e=>W.value=e),requestApi:x(F),onMobileErrorCallback:O},null,8,["isChecked","mobile","verify-token-data","requestApi"])])),_:1})])),_:1}),g(s,{label:"",name:"password"},{default:b((()=>[g(l,{class:"input"},{default:b((()=>[g(t,{inputBorder:!1,modelValue:X.value.password,"onUpdate:modelValue":a[5]||(a[5]=e=>X.value.password=e),class:"uni-input item-input",placeholderStyle:"font-size: 28rpx;","placeholder-class":"placeholder",placeholder:e.$t("请输入密码"),primaryColor:"rgb(192, 196, 204)"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),g(s,{label:"",name:""},{default:b((()=>[g(l,{class:"btn"},{default:b((()=>[g(l,{class:"agreement-btn"},{default:b((()=>[g(i,{checked:T.value,"onUpdate:checked":a[6]||(a[6]=e=>T.value=e)},null,8,["checked"]),g(r,{class:"agreement-text special-color",onClick:a[7]||(a[7]=V((e=>P("/pages/register/agreement")),["stop"]))},{default:b((()=>[h(y(e.$t("《注册协议》")),1)])),_:1})])),_:1}),g(l,{class:"lf-input",onClick:a[8]||(a[8]=V((e=>P("/pages/login/index")),["stop"]))},{default:b((()=>[g(l,null,{default:b((()=>[h(y(e.$t("已有账号？")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),g(l,{class:"form-con"},{default:b((()=>[g(u,{disabled:Q.value,loading:G.value,class:"btn2-css3",onClick:N},{default:b((()=>[h(y(e.$t("注 册")),1)])),_:1},8,["disabled","loading"])])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-ff94d91f"]]);export{E as default};
