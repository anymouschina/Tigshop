import{d as e,G as t,r as a,m as s,n as u,w as l,aB as i,bG as n,a6 as o,bB as r,bC as c,H as d,bD as p,a7 as m,M as h,C as f}from"./index-Do_Cb7fn.js";const g=e({__name:"tig-upload",props:{count:{type:Number,default:1},modelValue:{type:String,default:""},requestUrl:{type:String,default:"user/user/upload_img"}},emits:["update:modelValue","change"],setup(e,{emit:g}){const{t:b}=t(),y=e,_=a([]),S=g,C=()=>{n({count:y.count,success:async e=>{o({title:b("上传中...")}),e.tempFilePaths.map((e=>{r({url:c+"/api/"+y.requestUrl,filePath:e,name:"file",header:{Authorization:d("token"),Secret:p()},success:e=>{y.count>1?(_.value.push(JSON.parse(e.data).data),S("update:modelValue",_.value),m()):(h({title:b("图片上传成功")}),S("change"),m())},fail:e=>{m(),h({title:b("图片上传失败"),icon:"none"})}})}))},fail:e=>{h({title:b("图片选择失败"),icon:"none"})}})};return(e,t)=>{const a=f;return s(),u(a,{style:{height:"inherit",width:"inherit"},onClick:C},{default:l((()=>[i(e.$slots,"default")])),_:3})}}});export{g as _};
