import{_ as e,c as a,d as t}from"./tig-layout.nM03J4I_.js";import{Z as l,d as c,_ as s,u as o,$ as r,r as u,k as n,l as i,m as d,n as p,w as _,q as y,x as m,T as f,s as g,I as v,t as h,v as C,V as k,y as x,J as b,F as w,C as I,B as S,L as j,a0 as $,a1 as U,a2 as L,S as M,G as z,R as B,P as H,a3 as V,Q as N,a4 as R,E as T,o as A}from"./index-Ce4FtYLL.js";import{_ as D}from"./tig-image.bUT1hZK2.js";import{n as K}from"./index.v2UirNFN.js";import{_ as q}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as E}from"./u-empty.DoqyT2U6.js";import{m as F}from"./masonry.D_ptS7ea.js";import{g as G}from"./home.BFekSb01.js";import{u as J}from"./useList.D1YctHiI.js";import{_ as P}from"./format-price.C2WNeN1M.js";import{_ as Q}from"./u-loading-icon.CaEeBur7.js";import{s as W}from"./specification.C2u45Lz-.js";import"./u-icon.BDQrrWMI.js";import"./activityCard.DT7Jswa-.js";import"./product.rX84B_3L.js";import"./uni-icons.yuSuVTUg.js";import"./uni-number-box.tTrqYNWQ.js";const O=e=>l({url:"category/category/list?id="+e,method:"get"}),Z=q(c({__name:"styleOneCate",props:{cat_id:{type:Number,default:0},cat_idModifiers:{}},emits:["update:cat_id"],setup(a){const t=s(),c=o(),U=r(a,"cat_id"),L=u([]),M={navbar:"1",return:"0",title:"产品分类"},z=c.navHeight,B=u([]),H=u([]),V=u(!1),N=u(!0),R=u(0),T=()=>{j({url:"/pages/search/index"})},A=(e,a)=>{U.value=e,a&&(B.value=a.children)};return(async()=>{V.value=!0;try{const e=await l({url:"category/category/all",method:"get"});L.value=e.category_tree||[]}catch(e){console.error(e)}})(),(async()=>{try{const e=await l({url:"category/category/hot",method:"get"});H.value=e.category||[],N.value=!1}catch(e){console.error(e)}})(),(a,l)=>{const c=I,s=S,o=n(i("tig-image"),D),r=$,u=n(i("tig-layout"),e);return d(),p(c,null,{default:_((()=>[y(u,null,{default:_((()=>[y(K,{parameter:M}),N.value||!V.value?(d(),p(c,{key:0,class:"page-loading"},{default:_((()=>[y(c,{class:"ico"})])),_:1})):m("",!0),V.value?(d(),p(c,{key:1,class:"pageMain"},{default:_((()=>[0==R.value?(d(),p(c,{key:0,class:"productSort"},{default:_((()=>[y(c,{class:"header acea-row row-center-wrapper",style:f("top:"+g(z)+"rpx")},{default:_((()=>[y(c,{onClick:v(T,["stop"]),class:"acea-row row-between-wrapper input"},{default:_((()=>[y(s,{class:"iconfont-h5 icon-sousuo"}),y(c,{class:"txt"},{default:_((()=>[h(C(a.$t("点击搜索商品信息")),1)])),_:1})])),_:1})])),_:1},8,["style"]),y(c,{class:"aside",style:f("top:"+g(z)+"rpx;margin-top:98rpx;padding-bottom:"+g(t).tabbarHeight)},{default:_((()=>[y(c,{class:k("item acea-row row-center-wrapper "+(0==U.value?"on":"")),onClick:l[0]||(l[0]=e=>A(0))},{default:_((()=>[y(s,null,{default:_((()=>[h(C(a.$t("推荐")),1)])),_:1})])),_:1},8,["class"]),(d(!0),x(w,null,b(L.value,((e,a)=>(d(),p(c,{key:a,class:k("item acea-row row-center-wrapper "+(U.value==e.category_id?"on":"")),"data-cat_id":e.category_id,onClick:a=>A(e.category_id,e)},{default:_((()=>[e.cat_short_name?(d(),p(s,{key:0},{default:_((()=>[h(C(e.cat_short_name),1)])),_:2},1024)):(d(),p(s,{key:1},{default:_((()=>[h(C(e.category_name),1)])),_:2},1024))])),_:2},1032,["class","data-cat_id","onClick"])))),128))])),_:1},8,["style"]),y(c,{class:"conter"},{default:_((()=>[N.value?m("",!0):(d(),x(w,{key:0},[0==U.value?(d(),p(c,{key:0,class:"listw"},{default:_((()=>[y(c,{class:"title acea-row row-center-wrapper"},{default:_((()=>[y(c,{class:"name"},{default:_((()=>[h(C(a.$t("热门分类")),1)])),_:1})])),_:1}),y(c,{class:"list acea-row"},{default:_((()=>[(d(!0),x(w,null,b(H.value,((e,a)=>(d(),p(r,{key:a,"hover-class":"none",url:"/pages/search/result?category_id="+e.category_id,class:"item acea-row row-column row-middle"},{default:_((()=>[y(c,{class:"picture"},{default:_((()=>[y(o,{src:e.category_pic,"onUpdate:src":a=>e.category_pic=a,mode:"aspectFill"},null,8,["src","onUpdate:src"])])),_:2},1024),y(c,{class:"name line1"},{default:_((()=>[h(C(e.category_name),1)])),_:2},1024)])),_:2},1032,["url"])))),128))])),_:1})])),_:1})):m("",!0),U.value>0?(d(!0),x(w,{key:1},b(B.value,((e,a)=>(d(),p(c,{class:"listw",key:a,id:"b"+a},{default:_((()=>[y(c,{class:"title acea-row row-center-wrapper"},{default:_((()=>[y(r,{"hover-class":"none",url:"/pages/search/result?category_id="+e.category_id,class:"item acea-row row-column row-middle"},{default:_((()=>[y(c,{class:"name"},{default:_((()=>[h(C(e.category_name),1)])),_:2},1024)])),_:2},1032,["url"])])),_:2},1024),y(c,{class:"list acea-row"},{default:_((()=>[(d(!0),x(w,null,b(e.children,((e,a)=>(d(),p(r,{key:a,"hover-class":"none",url:"/pages/search/result?category_id="+e.category_id,class:"item acea-row row-column row-middle"},{default:_((()=>[e.category_pic?(d(),p(c,{key:0,class:"picture"},{default:_((()=>[y(o,{src:e.category_pic,"onUpdate:src":a=>e.category_pic=a},null,8,["src","onUpdate:src"])])),_:2},1024)):m("",!0),y(c,{class:"name line1"},{default:_((()=>[h(C(e.category_name),1)])),_:2},1024)])),_:2},1032,["url"])))),128))])),_:2},1024)])),_:2},1032,["id"])))),128)):m("",!0)],64))])),_:1})])),_:1})):m("",!0)])),_:1})):m("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-a7019403"]]),X=q(c({__name:"search",props:{placeholder:{type:String,default:"搜索商品"},needMenu:{type:Boolean,default:!1}},emits:["menu","search"],setup:(e,{emit:a})=>(a,t)=>{const l=S,c=I;return d(),p(c,{class:"search-box"},{default:_((()=>[e.needMenu?(d(),p(c,{key:0,class:"btn-box",onClick:t[0]||(t[0]=e=>a.$emit("menu"))},{default:_((()=>[y(l,{class:"iconfont-h5 icon-shouye"})])),_:1})):m("",!0),y(c,{class:"search-content",onClick:t[1]||(t[1]=e=>a.$emit("search"))},{default:_((()=>[y(l,{class:"iconfont-h5 icon-sousuo1"}),y(l,{class:"placeholder-text"},{default:_((()=>[h(C(a.$t(e.placeholder)),1)])),_:1})])),_:1})])),_:1})}}),[["__scopeId","data-v-9ce25180"]]),Y=q(c({__name:"menu",props:{currentCateId:{},currentCateIdModifiers:{}},emits:U(["change"],["update:currentCateId"]),setup(e,{emit:a}){const t=r(e,"currentCateId"),l=a,c=L([]);(async()=>{try{const e=await O(0);c.value=e.category_tree,t.value=e.category_tree[0].category_id}catch(e){console.error(e)}})();return(e,a)=>{const s=I,o=M;return d(),p(s,{class:"menu-content"},{default:_((()=>[y(o,{"scroll-y":"true",class:"menu-scroll"},{default:_((()=>[(d(!0),x(w,null,b(c.value,((e,a)=>(d(),p(s,{key:e.category_id,class:k(["menu-item",{active:t.value===e.category_id}]),onClick:a=>{var c;(c=e.category_id)!==t.value&&(t.value=c,l("change",c))}},{default:_((()=>[h(C(e.category_name),1)])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1})}}}),[["__scopeId","data-v-c34cdbf8"]]),ee=q(c({__name:"selectCate",props:U({currentCateId:{type:Number},type:{type:String,default:""}},{subCurrentCateId:{default:0},subCurrentCateIdModifiers:{}}),emits:U(["change"],["update:subCurrentCateId"]),setup(e,{emit:t}){const{t:l}=z(),c=e,s=t,o=r(e,"subCurrentCateId"),f=u(0),g=L([]),v=e=>{e!==o.value&&(o.value=e,s("change"))},j=e=>{f.value=e.detail.scrollLeft},$=()=>{g.value.length&&(V.value=!0)},U=B((()=>{var e;return null==(e=g.value.find((e=>e.category_id===o.value)))?void 0:e.category_name}));H((()=>c.currentCateId),(async e=>{e&&e>0&&await(async e=>{try{const a=await O(e);g.value=[{category_id:0,category_name:l("全部商品")},...a.category_tree],s("change"),f.value=0}catch(a){console.error(a)}})(e)}));const V=u(!1);return(t,l)=>{const c=I,s=M,r=S,u=n(i("tig-popup"),a);return d(),p(c,{class:k(["cate-box",{main:"main"===e.type}])},{default:_((()=>[y(s,{"scroll-x":!0,class:"cate-scroll","scroll-with-animation":!0,"scroll-left":f.value,onScroll:j},{default:_((()=>[(d(!0),x(w,null,b(g.value,(a=>(d(),x(w,{key:a.category_id},[a.category_name?(d(),p(c,{key:0,class:"cate-item",onClick:e=>v(a.category_id)},{default:_((()=>[y(c,{class:k(["item-text",{active:a.category_id===o.value,main:"main"===e.type}])},{default:_((()=>[h(C(a.category_name),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])):m("",!0)],64)))),128))])),_:1},8,["scroll-left"]),y(c,{class:"cate-btn",onClick:$},{default:_((()=>[y(r,{class:k(["iconfont-h5 icon-xiajiantou",{"icon-xiajiantou1-copy":"main"===e.type}])},null,8,["class"])])),_:1}),y(u,{show:V.value,"onUpdate:show":l[1]||(l[1]=e=>V.value=e),position:"top",zIndex:999,showClose:!1,backgroundColor:"#fff"},{default:_((()=>[y(c,{class:"cate-popup"},{default:_((()=>[y(c,{class:"cate-popup-title"},{default:_((()=>[h(C(U.value),1)])),_:1}),y(c,{class:"cate-popup-list-box"},{default:_((()=>[y(c,{class:"cate-popup-list"},{default:_((()=>[(d(!0),x(w,null,b(g.value,(a=>(d(),p(c,{key:a.category_id,class:"list-item popup-item",onClick:e=>v(a.category_id)},{default:_((()=>[y(c,{class:k(["item-text popup-text line1",{active:a.category_id===o.value,main:"main"===e.type}])},{default:_((()=>[h(C(a.category_name),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),y(c,{class:"cate-popup-close",onClick:l[0]||(l[0]=e=>V.value=!1)},{default:_((()=>[h(C(t.$t("点击收起")),1),y(r,{class:"iconfont-h5 icon-xiajiantou1-copy"})])),_:1})])),_:1})])),_:1},8,["show"])])),_:1},8,["class"])}}}),[["__scopeId","data-v-331b7691"]]),ae=q(c({__name:"styleTwoCate",props:{height:{type:[Number,String],default:0}},setup(e){V((e=>({"74cf4086":U.value})));const a=o(),t=s(),l=u(0),c=u(0),r=e,f=N({category_id:0,page:1,size:10}),{data:v,getList:h,reachBottom:C,isLoading:k,total:x}=J(G,{params:f,path:{dataKey:"filter_result"},needReachBottom:!1}),b=()=>{v.value=[],f.page=1,0===c.value?f.category_id=l.value:f.category_id=c.value,h()},w=()=>{c.value=0,v.value=[],f.page=1},S=()=>{R({url:"/pages/index/index",success:function(){const e=t.formatTabarList.findIndex((e=>e.includes("pages/index/index")));-1!==e&&e!==a.currentActiveValue&&a.setCurrentActiveValue(e)}})},j=()=>{R({url:"/pages/search/index"})},$={navbar:"1",return:"0",title:"产品分类"},U=B((()=>`calc(${r.height} - 90rpx)`));return(e,a)=>{const t=I,s=M,o=n(i("up-empty"),E);return d(),p(t,null,{default:_((()=>[y(K,{parameter:$}),y(X,{needMenu:!0,onMenu:S,onSearch:j}),y(t,{class:"scroll-box"},{default:_((()=>[y(t,{class:"content-box"},{default:_((()=>[y(t,{class:"side"},{default:_((()=>[y(Y,{currentCateId:l.value,"onUpdate:currentCateId":a[0]||(a[0]=e=>l.value=e),onChange:w},null,8,["currentCateId"])])),_:1}),y(t,{class:"list-box"},{default:_((()=>[y(ee,{onChange:b,subCurrentCateId:c.value,"onUpdate:subCurrentCateId":a[1]||(a[1]=e=>c.value=e),currentCateId:l.value},null,8,["subCurrentCateId","currentCateId"]),y(t,{class:"list-content"},{default:_((()=>[g(k)?m("",!0):(d(),p(s,{key:0,"scroll-y":!0,class:"list-scroll",onScrolltolower:g(C)},{default:_((()=>[y(F,{commodityList:g(v)},null,8,["commodityList"])])),_:1},8,["onScrolltolower"])),g(k)||0!==g(x)?m("",!0):(d(),p(t,{key:1,class:"empty-box"},{default:_((()=>[y(o,{icon:g(T)("salesman/no_order.png"),text:e.$t("暂无数据")},null,8,["icon","text"])])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-eabdcd12"]]),te=q(c({__name:"styleThreeCate",props:{height:{type:[Number,String],default:0}},setup(e){V((e=>({"0046dc9c":Z.value})));const a=u(0),t=u(0),l=e,c=N({category_id:0,page:1,size:10}),{data:s,getList:o,reachBottom:r,isLoading:f,total:v}=J(G,{params:c,path:{dataKey:"filter_result"},needReachBottom:!1}),k=()=>{s.value=[],c.page=1,0===t.value?c.category_id=a.value:c.category_id=t.value,o()},j=()=>{t.value=0,s.value=[],c.page=1},$=()=>{R({url:"/pages/index/index"})},U=()=>{R({url:"/pages/search/index"})},L=e=>{R({url:`/pages/productDetail/index?id=${e}`})},z=u(0),H=u(),A=u({}),q=()=>{H.value.handleShowPopup(),A.value.is_check=!1},F=()=>{z.value=0},O={navbar:"1",return:"0",title:"产品分类"},Z=B((()=>`calc(${l.height} - 90rpx)`));return(e,l)=>{const c=I,o=n(i("tig-image"),D),u=n(i("format-price"),P),B=n(i("up-loading-icon"),Q),V=S,N=M,R=n(i("up-empty"),E);return d(),p(c,null,{default:_((()=>[y(K,{parameter:O}),y(X,{needMenu:!0,onMenu:$,onSearch:U}),y(c,{class:"scroll-box"},{default:_((()=>[y(c,{class:"content-box"},{default:_((()=>[y(c,{class:"side"},{default:_((()=>[y(Y,{currentCateId:a.value,"onUpdate:currentCateId":l[0]||(l[0]=e=>a.value=e),onChange:j},null,8,["currentCateId"])])),_:1}),y(c,{class:"list-box"},{default:_((()=>[y(ee,{type:"main",onChange:k,subCurrentCateId:t.value,"onUpdate:subCurrentCateId":l[1]||(l[1]=e=>t.value=e),currentCateId:a.value},null,8,["subCurrentCateId","currentCateId"]),y(c,{class:"list-content"},{default:_((()=>[g(f)?m("",!0):(d(),p(N,{key:0,"scroll-y":!0,class:"list-scroll",onScrolltolower:g(r)},{default:_((()=>[y(c,{class:"product-list"},{default:_((()=>[(d(!0),x(w,null,b(g(s),(a=>(d(),p(c,{class:"product-item",key:a.product_id},{default:_((()=>[y(c,{class:"item-left",onClick:e=>L(a.product_id)},{default:_((()=>[y(o,{src:a.pic_thumb,"onUpdate:src":e=>a.pic_thumb=e},null,8,["src","onUpdate:src"]),y(c,{class:"product-status-box"},{default:_((()=>[0==a.product_stock||0==a.product_status?(d(),p(c,{key:0,class:"outsale"},{default:_((()=>[h(C(e.$t(0==a.product_stock?"已售罄":"已下架")),1)])),_:2},1024)):m("",!0)])),_:2},1024)])),_:2},1032,["onClick"]),y(c,{class:"item-right"},{default:_((()=>[y(c,{class:"item-right-title line2",onClick:e=>L(a.product_id)},{default:_((()=>[h(C(a.product_name),1)])),_:2},1032,["onClick"]),y(c,{class:"item-right-price"},{default:_((()=>[y(u,{decimalsStyle:{fontSize:"24rpx",fontWeight:"bold"},currencyStyle:{fontSize:"23rpx",fontWeight:"bold"},fontStyle:{fontSize:"32rpx"},priceData:a.product_price},null,8,["priceData"])])),_:2},1024),y(c,{class:"buy_icon"},{default:_((()=>[y(c,{class:"buy_btn",onClick:e=>(e=>{e.is_check||(z.value=e.product_id,e.is_check=!0,A.value=e)})(a)},{default:_((()=>[a.is_check?(d(),p(B,{key:0,mode:"circle"})):(d(),p(V,{key:1,class:"iconfont-h5 icon-gouwuche3 buy_btn_icon"}))])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["onScrolltolower"])),g(f)||0!==g(v)?m("",!0):(d(),p(c,{key:1,class:"empty-box"},{default:_((()=>[y(R,{icon:g(T)("salesman/no_order.png"),text:e.$t("暂无数据")},null,8,["icon","text"])])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1}),y(W,{ref_key:"specificationRef",ref:H,modelValue:z.value,"onUpdate:modelValue":l[2]||(l[2]=e=>z.value=e),onAddCardSucceed:l[3]||(l[3]=()=>{}),onLoadEnd:q,onClose:F},null,8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-f5859cba"]]),le=q(c({__name:"index",setup(a){const{navbaHeight:l}=t(),c=o(),s=u(0);A((e=>{e&&e.category_id&&(s.value=e.category_id)}));const r=u(),f=B((()=>{let e=`calc(${c.windowInfo.screenHeight}px - ${l.value}rpx)`;return r.value&&(e=`calc(${c.windowInfo.screenHeight-r.value.bottomNum}px - ${l.value}rpx)`),e}));return(a,t)=>{const l=n(i("tig-layout"),e),o=I;return d(),p(o,null,{default:_((()=>[y(l,{ref_key:"layoutRef",ref:r},{default:_((()=>[1===g(c).category_decorate_type?(d(),p(Z,{key:0,cat_id:s.value,"onUpdate:cat_id":t[0]||(t[0]=e=>s.value=e)},null,8,["cat_id"])):m("",!0),2===g(c).category_decorate_type?(d(),p(ae,{key:1,height:f.value},null,8,["height"])):m("",!0),3===g(c).category_decorate_type?(d(),p(te,{key:2,height:f.value},null,8,["height"])):m("",!0)])),_:1},512)])),_:1})}}}),[["__scopeId","data-v-2c945d32"]]);export{le as default};
