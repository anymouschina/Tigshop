import{d as e,H as a,R as t,k as s,l,m as c,n as o,w as u,q as i,t as n,v as r,V as d,y as _,F as p,J as f,s as m,E as v,x as y,a4 as g,aL as k,C as x,a5 as w,D as b,r as h,ac as C,u as $,f as j,T,a8 as L,L as I,B as z,ab as U,b8 as q,Y as B}from"./index-Ce4FtYLL.js";import{_ as P}from"./tig-image.bUT1hZK2.js";import{_ as R}from"./tig-upload.vue_vue_type_script_setup_true_lang.Clo3q5sb.js";import{_ as S}from"./uni-badge.DwjSh_3D.js";import{u as F,_ as H}from"./tig-layout.nM03J4I_.js";import{_ as J}from"./tig-back-top.vue_vue_type_script_setup_true_lang.DN9Yy55p.js";import{n as K}from"./index.v2UirNFN.js";import{m as N}from"./masonry.D_ptS7ea.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{e as D}from"./home.BFekSb01.js";import{a as E}from"./order.CCBaGQMp.js";import{u as G}from"./useList.D1YctHiI.js";import"./u-loading-icon.CaEeBur7.js";import"./u-icon.BDQrrWMI.js";import"./format-price.C2WNeN1M.js";import"./specification.C2u45Lz-.js";import"./uni-icons.yuSuVTUg.js";import"./uni-number-box.tTrqYNWQ.js";import"./product.rX84B_3L.js";import"./activityCard.DT7Jswa-.js";const O=A(e({__name:"index",props:{data:{type:Array,default:()=>[]},menuType:{type:Number,default:1}},setup(e){const w=e;a("userInfo");const b=t((()=>{let e=w.data;return e=e.filter((e=>"分销员中心"!==e.pic_title)),e=e.filter((e=>"实名认证"!==e.pic_title)),e=e.filter((e=>"商家入驻"!==e.pic_title)),e}));return(a,t)=>{const w=x,h=s(l("tig-image"),P);return c(),o(w,{class:"service-box"},{default:u((()=>[i(w,{class:"service-title"},{default:u((()=>[n(r(a.$t("我的服务")),1)])),_:1}),i(w,{class:"service-content"},{default:u((()=>[b.value.length>0?(c(),o(w,{key:0,class:d(["service-list",{grid:2===e.menuType,column:1===e.menuType}])},{default:u((()=>[(c(!0),_(p,null,f(b.value,((t,s)=>(c(),o(w,{key:s,class:"service-item",onClick:e=>(e=>{g({url:k(e.pic_link)})})(t)},{default:u((()=>[i(w,{class:"service-icon"},{default:u((()=>[i(h,{"lazy-load":"",src:m(v)(t.pic_url)},null,8,["src"])])),_:2},1024),i(w,{class:"service-label"},{default:u((()=>[n(r(a.$t(t.pic_title??""))+" ",1),1===e.menuType?(c(),o(w,{key:0,class:"service-arrow iconfont-h5 icon-youjiantou"})):y("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["class"])):y("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-0ef6185c"]]),Q=A(e({__name:"index",props:{data:{type:Object,default:()=>({})}},setup:e=>(a,t)=>{const s=b,l=x;return c(),o(l,{class:"advertising-box"},{default:u((()=>[i(l,{class:"advertising-content"},{default:u((()=>[i(s,{class:"advertising-image",onClick:t[0]||(t[0]=a=>{var t;(null==(t=e.data)?void 0:t.pic_link)&&g({url:k(t.pic_link)})}),src:m(w)(e.data.pic_url),mode:"widthFix"},null,8,["src"])])),_:1})])),_:1})}}),[["__scopeId","data-v-c1e81d98"]]),V=e({__name:"index",setup(e){const a=h([]);return(async()=>{try{const e=await D();a.value=e.item.data}catch(e){console.error(e)}})(),(e,t)=>{const s=x;return c(),o(s,null,{default:u((()=>[(c(!0),_(p,null,f(a.value,((e,a)=>(c(),_(p,{key:a},["banner_list"===e.type&&e.module.banner_list.pic_url?(c(),o(Q,{key:0,data:e.module.banner_list},null,8,["data"])):y("",!0),"menus"===e.type?(c(),o(O,{key:1,menuType:e.module.menu_type,data:e.module.menu_list},null,8,["menuType","data"])):y("",!0)],64)))),128))])),_:1})}}}),Y=A(e({__name:"index",setup(e){const{scrollTop:d}=F(),{data:f,promotionList:g,isLoading:k}=G(L,{path:{dataKey:"product_list"},immediate:!0,needPromotionList:!0,needReachBottom:!1}),w=C(),A=$(),D=h({navbar:"1",return:"0",title:"会员中心",color:!1,class:"user"}),O=h(),Q=t({get:()=>w.userInfo,set:e=>w.setUserInfo(e)}),Y=h({collect_count:0,collect_store_count:0,stay_comment_order:0,re_pay:0,re_receive:0,return_count:0,bonus:0}),M=h({}),W=async()=>{try{const e=await E();M.value=e.item}catch(e){console.error(e)}},X=e=>{I({url:e})},Z=()=>{w.getUserInfo(),W()},ee=t((()=>w.token||a("token"))),ae=t((()=>`url(${v("product/unverified.png")});`));return j((()=>{if(!ee.value)return Q.value={},Y.value={collect_count:0,collect_store_count:0,stay_comment_order:0,re_pay:0,re_receive:0,return_count:0,bonus:0},void(M.value={});w.getUserInfo(),W()})),(e,a)=>{const t=s(l("tig-image"),P),h=x,C=s(l("tig-upload"),R),$=b,j=z,L=s(l("uni-badge"),S),I=s(l("tig-layout"),H),F=s(l("tig-back-top"),J);return c(),o(h,null,{default:u((()=>[i(I,{ref_key:"layoutRef",ref:O,onLoginSuccess:Z},{default:u((()=>[i(K,{parameter:D.value},null,8,["parameter"]),i(h,null,{default:u((()=>[i(h,{class:"user"},{default:u((()=>[i(h,{class:"user_header user_bg_color"},{default:u((()=>[i(h,{class:"picTxt"},{default:u((()=>[ee.value?(c(),o(C,{key:1,class:"pictrue",onChange:a[1]||(a[1]=e=>m(w).getUserInfo()),requestUrl:"user/user/modify_avatar"},{default:u((()=>[i(t,{class:"pic-btn",src:Q.value.avatar,"onUpdate:src":a[0]||(a[0]=e=>Q.value.avatar=e)},null,8,["src"])])),_:1})):(c(),o(h,{key:0,class:"pictrue",onClick:m(U)},{default:u((()=>[i(t,{class:"pic-btn",src:m(v)("common/empty-img-bg3.png")},null,8,["src"])])),_:1},8,["onClick"])),i(h,{class:"text"},{default:u((()=>[ee.value?(c(),_(p,{key:1},[i(h,{class:"acea-row row-middle info"},{default:u((()=>{var t;return[m(q)()?(c(),_(p,{key:0},[Q.value.is_company_auth?(c(),o(h,{key:0,class:"auth",onClick:a[2]||(a[2]=e=>X("/pages/user/userCertification/index"))},{default:u((()=>[i($,{src:m(v)("product/authenticated.svg")},null,8,["src"])])),_:1})):(c(),o(h,{key:1,class:"auth",onClick:a[3]||(a[3]=e=>X("/pages/user/userCertification/index"))},{default:u((()=>[i(h,{class:"unverified",style:T(`background-image: ${ae.value};`)},null,8,["style"])])),_:1}))],64)):y("",!0),i(h,{class:"name line1"},{default:u((()=>[n(r(Q.value.nickname),1)])),_:1}),(null==(t=Q.value)?void 0:t.show_sign)?(c(),o(h,{key:1,class:"acea-row qiandao",onClick:a[4]||(a[4]=e=>X("/pages/user/sign/index"))},{default:u((()=>[i(h,{class:"iconfont icon-qiandao"}),i(h,{class:""},{default:u((()=>[n(r(e.$t("签到有礼")),1)])),_:1})])),_:1})):y("",!0)]})),_:1}),Q.value.rank_name?(c(),o(h,{key:0,class:"member acea-row row-middle"},{default:u((()=>[n(r(Q.value.rank_name),1)])),_:1})):(c(),o(h,{key:1,class:"member acea-row row-middle"},{default:u((()=>[n(r(e.$t("普通会员")),1)])),_:1}))],64)):(c(),o(h,{key:0,onClick:m(U),class:"name"},{default:u((()=>[n(r(e.$t("登录/注册")),1)])),_:1},8,["onClick"]))])),_:1}),i(h,{class:"iconfont icon-shezhi",onClick:a[5]||(a[5]=e=>X("/pages/user/profile/index"))})])),_:1}),i(h,{class:"user_top_group"},{default:u((()=>[i(h,{class:"item",onClick:a[6]||(a[6]=e=>X("/pages/user/collectProduct/index"))},{default:u((()=>[i(h,{class:"tit"},{default:u((()=>[n(r(e.$t("商品收藏"))+" ",1),i(j,{class:"txt"},{default:u((()=>[n(r(M.value.product_collect>=0?M.value.product_collect:"--"),1)])),_:1})])),_:1})])),_:1}),m(B)()?(c(),o(h,{key:0,class:"item",onClick:a[7]||(a[7]=e=>X("/pages/user/collectionShop/index"))},{default:u((()=>[i(h,{class:"tit"},{default:u((()=>[n(r(e.$t("店铺关注"))+" ",1),i(j,{class:"txt"},{default:u((()=>[n(r(M.value.shop_collect>=0?M.value.shop_collect:"--"),1)])),_:1})])),_:1})])),_:1})):y("",!0),O.value&&O.value.is_zh?(c(),o(h,{key:1,class:"item",onClick:a[8]||(a[8]=e=>X("/pages/user/comment/list"))},{default:u((()=>[i(h,{class:"tit"},{default:u((()=>[n(r(e.$t("待评价"))+" ",1),i(j,{class:"txt"},{default:u((()=>[n(r(M.value.await_comment>=0?M.value.await_comment:"--"),1)])),_:1})])),_:1})])),_:1})):y("",!0),i(h,{class:"item",onClick:a[9]||(a[9]=e=>X("/pages/user/historyProduct/index"))},{default:u((()=>[i(h,{class:"tit"},{default:u((()=>[n(r(e.$t("浏览记录")),1)])),_:1})])),_:1})])),_:1}),y("",!0)])),_:1}),i(h,{class:"user_wrapper"},{default:u((()=>[i(h,{class:"list-group my-order"},{default:u((()=>[i(h,{class:"title acea-row row-between-wrapper"},{default:u((()=>[i(h,{class:""},{default:u((()=>[n(r(e.$t("我的订单")),1)])),_:1}),i(h,{class:"more",onClick:a[11]||(a[11]=e=>X("/pages/user/order/list"))},{default:u((()=>[i(h,null,{default:u((()=>[n(r(e.$t("全部订单")),1)])),_:1}),i(h,{class:"iconfont icon-xiangyou"})])),_:1})])),_:1}),i(h,{class:"wrap"},{default:u((()=>[i(h,{class:"li",onClick:a[12]||(a[12]=e=>X("/pages/user/order/list?type=await_pay"))},{default:u((()=>[M.value.await_pay>0?(c(),_(p,{key:0},[i(L,{class:"badgecolor",text:M.value.await_pay,absolute:"rightTop",size:"small"},{default:u((()=>[i(j,{class:"iconfont icon-daifukuan"})])),_:1},8,["text"]),i(h,{class:"txt"},{default:u((()=>[n(r(e.$t("待付款")),1)])),_:1})],64)):(c(),_(p,{key:1},[i(j,{class:"iconfont icon-daifukuan"}),i(h,{class:"txt"},{default:u((()=>[n(r(e.$t("待付款")),1)])),_:1})],64))])),_:1}),i(h,{class:"li",onClick:a[13]||(a[13]=e=>X("/pages/user/order/list?type=await_received"))},{default:u((()=>[M.value.await_received>0?(c(),_(p,{key:0},[i(L,{class:"badgecolor",text:M.value.await_received,absolute:"rightTop",size:"small"},{default:u((()=>[i(j,{class:"iconfont icon-daishouhuo1"})])),_:1},8,["text"]),i(h,{class:"txt"},{default:u((()=>[n(r(e.$t("待收货")),1)])),_:1})],64)):(c(),_(p,{key:1},[i(j,{class:"iconfont icon-daishouhuo1"}),i(h,{class:"txt"},{default:u((()=>[n(r(e.$t("待收货")),1)])),_:1})],64))])),_:1}),i(h,{class:"li",onClick:a[14]||(a[14]=e=>X("/pages/user/order/list?type=await_comment"))},{default:u((()=>[M.value.await_comment>0?(c(),_(p,{key:0},[i(L,{class:"badgecolor",text:M.value.await_comment,absolute:"rightTop",size:"small"},{default:u((()=>[i(j,{class:"iconfont icon-pingjia"})])),_:1},8,["text"]),i(h,{class:"txt"},{default:u((()=>[n(r(e.$t("待评价")),1)])),_:1})],64)):(c(),_(p,{key:1},[i(j,{class:"iconfont icon-pingjia"}),i(h,{class:"txt"},{default:u((()=>[n(r(e.$t("待评价")),1)])),_:1})],64))])),_:1}),i(h,{class:"li",onClick:a[15]||(a[15]=e=>X("/pages/user/afterSale/list"))},{default:u((()=>[i(j,{class:"iconfont icon-shouhou1"}),i(h,{class:"txt"},{default:u((()=>[n(r(e.$t("退换 / 售后")),1)])),_:1}),Y.value.return_count>0?(c(),o(j,{key:0,class:"counts"},{default:u((()=>[n(r(Y.value.return_count),1)])),_:1})):y("",!0)])),_:1})])),_:1})])),_:1}),i(h,{class:"list-group my-wallet"},{default:u((()=>[i(h,{class:"title acea-row row-between-wrapper"},{default:u((()=>[i(h,{class:""},{default:u((()=>[n(r(e.$t("我的钱包")),1)])),_:1}),i(h,{class:"more",onClick:a[16]||(a[16]=e=>X("/pages/user/account/index"))},{default:u((()=>[i(h,null,{default:u((()=>[n(r(e.$t("进入钱包")),1)])),_:1}),i(h,{class:"iconfont icon-xiangyou"})])),_:1})])),_:1}),i(h,{class:"wrap"},{default:u((()=>[i(h,{class:"li",onClick:a[17]||(a[17]=e=>X("/pages/user/account/index"))},{default:u((()=>[i(j,{class:"num"},{default:u((()=>[n(r(Number(Q.value.total_balance)>=0?Q.value.total_balance:0),1)])),_:1}),i(h,{class:"txt"},{default:u((()=>[n(r(e.$t("余额")),1)])),_:1})])),_:1}),i(h,{class:"li",onClick:a[18]||(a[18]=e=>X("/pages/coupon/index?type=2"))},{default:u((()=>[i(j,{class:"num"},{default:u((()=>[n(r(Q.value.coupon>=0?Q.value.coupon:0),1)])),_:1}),i(h,{class:"txt"},{default:u((()=>[n(r(e.$t("优惠券")),1)])),_:1})])),_:1}),i(h,{class:"li",onClick:a[19]||(a[19]=e=>X("/pages/user/point/detail"))},{default:u((()=>[i(j,{class:"num"},{default:u((()=>[n(r(Q.value.points>=0?Q.value.points:0),1)])),_:1}),i(h,{class:"txt"},{default:u((()=>[n(r(e.$t("积分")),1)])),_:1})])),_:1})])),_:1})])),_:1}),i(V)])),_:1})])),_:1}),m(k)?y("",!0):(c(),_(p,{key:0},[i(h,{class:"recommend_wrapper"},{default:u((()=>[i(h,{class:"title"},{default:u((()=>[i(h,{class:"text"},{default:u((()=>[i(h,{class:"name"},{default:u((()=>[n(r(e.$t("猜你喜欢")),1)])),_:1}),i(h,{class:"desc"},{default:u((()=>[n(r(e.$t("您还可以逛一逛")),1)])),_:1})])),_:1})])),_:1}),i(h,{class:"recommend"},{default:u((()=>[i(h,{class:"container"},{default:u((()=>[i(N,{commodityList:m(f),promotionList:m(g)},null,8,["commodityList","promotionList"])])),_:1})])),_:1})])),_:1}),i(h,{class:"shop-company"},{default:u((()=>[n(r(m(A).shop_company),1)])),_:1})],64))])),_:1})])),_:1},512),i(F,{scrollTop:m(d)},null,8,["scrollTop"])])),_:1})}}}),[["__scopeId","data-v-80fd29df"]]);export{Y as default};
