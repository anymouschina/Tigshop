import{e,E as o,R as l,a7 as d,q as s,y as u,c as a,o as n,i as t,T as m,w as c,z as r,a as p,a9 as i,d as I,I as h,aw as x,t as y,b as f,L as _,aa as g,P as k,_ as v,D as b,J as w,F as S,r as j,f as D}from"./index-BKzbZvRR.js";import{_ as $}from"./tig-layout.BpNdXByQ.js";import{s as A,a as C,b as L}from"./shop.C37ErgAh.js";import{n as P,t as z,i as N,a as R,b as T,w as q,d as B,e as F,g as M,p as O,h as U,j as E,k as G,S as H,s as J,l as K,m as Q,o as V,q as W,r as X,u as Y,v as Z,x as ee,y as oe,z as le}from"./index.DVcVp2vA.js";import{_ as de}from"./tig-image.DrOwWlV9.js";import"./format-price.kSnuguuz.js";import"./home.Cp7aP7xW.js";import"./tig-fixed-placeholder.s9cnCRBL.js";const se=v(e({__name:"index",props:{module:{},shopInfo:{}},emits:["refreshShopDetail"],setup(e,{emit:v}){const{t:b}=o(),w=e,S=v,j=l((()=>{let e=[];for(let o=1;o<=10;o++)e.push(`https://lyecs2.oss-cn-zhangjiakou.aliyuncs.com/static/mini/bg/${o}.jpg`);return e})),D=l((()=>{let e;return e=0==w.module.backgroundDefault&&w.module.customPic.picUrl?d(w.module.customPic.picUrl):j.value[w.module.backgroundDefault-1],e})),$=l((()=>w.shopInfo.collectShop?b("已收藏"):b("收藏"))),C=()=>{w.shopInfo.collectShop?P():L()},L=async()=>{try{await A({shopId:w.shopInfo.shopId});_({title:b("收藏成功")}),S("refreshShopDetail",w.shopInfo.shopId)}catch(e){console.error(e)}},P=async()=>{g({title:b("提示"),content:b("确认要取消收藏店铺吗？"),success:async e=>{if(e.confirm)try{await A({shopId:w.shopInfo.shopId});_({title:b("操作成功")}),S("refreshShopDetail",w.shopInfo.shopId)}catch(o){console.error(o)}}})},z=()=>{k({url:`/pages/search/index?shopId=${w.shopInfo.shopId}`})},N=()=>{k({url:`/pages/search/result?&shopId=${w.shopInfo.shopId}`})},R=()=>{k({url:`/pages/shop/category?shopId=${w.shopInfo.shopId}`})};return(e,o)=>{const l=t,d=I,_=h,g=s(u("tig-image"),de);return n(),a(l,{class:m("module-ad-con module-store_info ad-store_style__"+e.module.style)},{default:c((()=>[e.module?(n(),a(l,{key:0,class:"module-ad-content"},{default:c((()=>[p(l,{class:"cap-store-banner"},{default:c((()=>[p(l,{class:"cap-store-banner__cover",style:i("background-image: url("+D.value+");")},{default:c((()=>[p(l,{class:"cap-store-banner__cover-mask"})])),_:1},8,["style"]),p(l,{class:"cap-store-nav-warp"},{default:c((()=>[p(l,{class:"cap-store-nav-con"},{default:c((()=>[p(l,{class:"store-search-con"},{default:c((()=>[p(l,{id:"search",onClick:z},{default:c((()=>[p(d,{class:"module_ico module-ico-sousuo"}),p(_,{type:"text",class:"search-input",placeholder:e.$t("搜商品")},null,8,["placeholder"])])),_:1})])),_:1}),p(l,{class:"store-nav-con"},{default:c((()=>[p(l,{class:"store-nav-item active"},{default:c((()=>[x("a",{class:"store-nav-item-a"},y(e.$t("精选")),1)])),_:1}),p(l,{class:"store-nav-item"},{default:c((()=>[x("a",{class:"store-nav-item-a",onClick:N},y(e.$t("商品")),1)])),_:1}),p(l,{class:"store-nav-item"},{default:c((()=>[x("a",{class:"store-nav-item-a",onClick:R},y(e.$t("分类")),1)])),_:1})])),_:1})])),_:1})])),_:1}),p(l,{class:"cap-store-banner__inner"},{default:c((()=>[p(l,{class:"cap-store-banner__content"},{default:c((()=>[p(l,{class:"cap-store-banner__logo"},{default:c((()=>[p(g,{src:e.shopInfo.shopLogo,mode:"widthFix"},null,8,["src"])])),_:1}),p(l,{class:"cap-store-banner__right-content"},{default:c((()=>[p(l,{class:"cap-store-banner__right-content-title--middle"},{default:c((()=>[f(y(e.shopInfo.shopTitle),1)])),_:1}),p(l,{class:"cap-store-banner__sum-content"},{default:c((()=>[p(l,{class:"cap-store-banner__sum-content-total"},{default:c((()=>[f(y(e.$t("全部商品"))+" "+y(e.shopInfo.productCount),1)])),_:1}),p(l,{class:"cap-store-banner__sum-content-total"},{default:c((()=>[f(y(e.$t("新品"))+" "+y(e.shopInfo.newProductCount),1)])),_:1})])),_:1})])),_:1}),p(l,{class:"store-collect-button-con",onClick:C},{default:c((()=>[p(l,{class:"store-collect-button"},{default:c((()=>[f(y($.value),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):r("",!0)])),_:1},8,["class"])}}}),[["__scopeId","data-v-cce86190"]]),ue=v(e({__name:"shopModules",props:{modules:{},shopInfo:{}},emits:["refreshShopDetail"],setup(e,{emit:o}){const l=e,d=o;return(e,o)=>{const s=t;return n(),a(s,null,{default:c((()=>[(n(!0),b(S,null,w(e.modules,((e,s)=>(n(),b(S,{key:s},["notice"==e.type?(n(),a(P,{key:0,module:e.module},null,8,["module"])):r("",!0),"titleAd"==e.type?(n(),a(z,{key:1,module:e.module},null,8,["module"])):r("",!0),"imageAd"==e.type?(n(),a(N,{key:2,module:e.module},null,8,["module"])):r("",!0),"imageNav"==e.type?(n(),a(R,{key:3,module:e.module},null,8,["module"])):r("",!0),"coupon"==e.type?(n(),a(T,{key:4,module:e.module,shopId:l.shopInfo.shopId},null,8,["module","shopId"])):r("",!0),"whiteBlank"==e.type?(n(),a(q,{key:5,module:e.module},null,8,["module"])):r("",!0),"whiteLine"==e.type?(n(),a(B,{key:6,module:e.module},null,8,["module"])):r("",!0),"imageSquareAd"==e.type?(n(),a(F,{key:7,module:e.module},null,8,["module"])):r("",!0),"imageHotarea"==e.type?(n(),a(M,{key:8,module:e.module},null,8,["module"])):r("",!0),"shopInfo"==e.type?(n(),a(se,{key:9,module:e.module,shopInfo:l.shopInfo,onRefreshShopDetail:o[0]||(o[0]=e=>d("refreshShopDetail"))},null,8,["module","shopInfo"])):r("",!0),"product"==e.type?(n(),a(O,{key:10,shopId:l.shopInfo.shopId,module:e.module,moduleIndex:e.moduleIndex},null,8,["shopId","module","moduleIndex"])):r("",!0),"categoryNav"==e.type?(n(),a(U,{key:11,module:e.module,moduleIndex:e.moduleIndex},null,8,["module","moduleIndex"])):r("",!0),"categoryNavA2"==e.type?(n(),a(E,{key:12,module:e.module,moduleIndex:e.moduleIndex},null,8,["module","moduleIndex"])):r("",!0),"banner"==e.type?(n(),a(G,{key:13,module:e.module,moduleIndex:e.moduleIndex,index:s},null,8,["module","moduleIndex","index"])):r("",!0),"slidingImage"==e.type?(n(),a(H,{key:14,module:e.module,moduleIndex:e.moduleIndex,index:s},null,8,["module","moduleIndex","index"])):r("",!0),"slideLargeImage"==e.type?(n(),a(J,{key:15,module:e.module,moduleIndex:e.moduleIndex,index:s},null,8,["module","moduleIndex","index"])):r("",!0),"comboSuggestions"==e.type?(n(),a(K,{key:16,module:e.module,moduleIndex:e.moduleIndex,index:s},null,8,["module","moduleIndex","index"])):r("",!0),"noticeA2"==e.type?(n(),a(Q,{key:17,module:e.module,moduleIndex:e.moduleIndex,index:s},null,8,["module","moduleIndex","index"])):r("",!0),"specialOffer"==e.type?(n(),a(V,{key:18,module:e.module,moduleIndex:e.moduleIndex,index:s},null,8,["module","moduleIndex","index"])):r("",!0),"mixedProductDisplay"==e.type?(n(),a(W,{key:19,module:e.module,moduleIndex:e.moduleIndex,index:s},null,8,["module","moduleIndex","index"])):r("",!0),"categoryRec"==e.type?(n(),a(X,{key:20,module:e.module,moduleIndex:e.moduleIndex,index:s},null,8,["module","moduleIndex","index"])):r("",!0),"countdown"==e.type?(n(),a(Y,{key:21,module:e.module,moduleIndex:e.moduleIndex,index:s},null,8,["module","moduleIndex","index"])):r("",!0),"groupSliding"==e.type?(n(),a(Z,{key:22,module:e.module,moduleIndex:e.moduleIndex,index:s},null,8,["module","moduleIndex","index"])):r("",!0),"productGrouping"==e.type?(n(),a(ee,{key:23,module:e.module,moduleIndex:e.moduleIndex,index:s},null,8,["module","moduleIndex","index"])):r("",!0),"imageTextComponent"==e.type?(n(),a(oe,{key:24,module:e.module,moduleIndex:e.moduleIndex,index:s},null,8,["module","moduleIndex","index"])):r("",!0),"categoryNavA1"==e.type?(n(),a(le,{key:25,module:e.module,moduleIndex:e.moduleIndex,index:s},null,8,["module","moduleIndex","index"])):r("",!0)],64)))),128))])),_:1})}}}),[["__scopeId","data-v-9d80b7d1"]]),ae=e({__name:"index",setup(e){const o=j(0);D((e=>{e&&e.shopId&&(o.value=e.shopId,I(),m())}));const l=j("店铺详情"),d=j([]),m=async()=>{try{const e=await C(o.value);d.value=e.moduleList}catch(e){console.error(e)}},i=j({}),I=async()=>{try{const e=await L(o.value);i.value=e,l.value=e.shopTitle}catch(e){console.error(e)}};return(e,m)=>{const h=t,x=s(u("tig-layout"),$);return n(),a(x,{title:l.value,shopId:o.value},{default:c((()=>[p(h,{class:"decorate-page-window"},{default:c((()=>[Object.keys(i.value).length>0?(n(),a(ue,{key:0,modules:d.value,onRefreshShopDetail:I,shopInfo:i.value},null,8,["modules","shopInfo"])):r("",!0)])),_:1})])),_:1},8,["title","shopId"])}}});export{ae as default};
