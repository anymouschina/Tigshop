import{e,G as a,g as t,r as l,l as s,ai as u,h as i,aj as f,N as r,c,w as n,i as d,v as o,z as _,o as p,a as m,E as v,A as g,F as b,b as y,t as $,K as h,ac as k,ag as x,M as j,_ as D}from"./index-BKXBH4vI.js";import{_ as S}from"./uni-steps.CWStG65y.js";import{_ as w}from"./uni-icons.C94_g2wt.js";import{_ as C}from"./tig-image.BbZoJ9nS.js";import{_ as T}from"./format-price.0qAAshfo.js";import{a as z,_ as B}from"./tig-layout.DMoUsUKf.js";import{_ as E}from"./tig-fixed-placeholder.BHdfEiP8.js";import{b as I,d as N}from"./afterSale.DvomNz22.js";const A=D(e({__name:"info",setup(e){const{t:D}=a();t((e=>{e&&e.id&&(A.value=Number(e.id),q())})),s((()=>{u("refreshInfo",(e=>{A.value=e,q()}))})),i((()=>{f("refreshInfo")}));const A=l(),U=l({}),W=l(0),q=async()=>{try{const e=await I(A.value);U.value=e.item,U.value.aftersales_items.forEach((e=>{W.value+=e.number}))}catch(e){r({title:e.message,icon:"none"})}},F=()=>{k({title:D("提示"),content:D("确认要撤销申请吗？"),success:async e=>{if(e.confirm)try{await N({aftersale_id:U.value.aftersale_id});r({title:D("撤销成功")}),x({url:"/pages/user/afterSale/list"})}catch(a){}}})},G=async()=>{try{1===U.value.aftersales_items.length?x({url:`/pages/user/afterSale/edit?aftersale_id=${U.value.aftersale_id}&item_id=${U.value.aftersales_items[0].order_item_id}`}):x({url:`/pages/user/afterSale/edit?aftersale_id=${U.value.aftersale_id}`})}catch(e){}},K=()=>{j({url:"/pages/user/afterSale/negotiate?id="+U.value.aftersale_id})},M=()=>{j({url:`/pages/user/afterSale/shipments?id=${U.value.aftersale_id}&return_address=${U.value.return_address}`})};return(e,a)=>{const t=o(_("uni-steps"),S),l=d,s=o(_("uni-icons"),w),u=o(_("tig-image"),C),i=o(_("format-price"),T),f=o(_("tig-button"),z),r=o(_("tig-fixed-placeholder"),E),k=o(_("tig-layout"),B);return p(),c(l,{class:"after-sale-info"},{default:n((()=>[m(k,{needSafeTop:!0},{default:n((()=>[Object.keys(U.value).length?(p(),v(b,{key:0},[m(l,{class:"after-sal-info-steps"},{default:n((()=>[m(t,{"active-color":"var(--general)",options:U.value.step_status.steps,active:U.value.step_status.current},null,8,["options","active"])])),_:1}),3===U.value.status?(p(),c(l,{key:0,class:"refuse-reply"},{default:n((()=>[m(l,{class:"refuse-reply-title"},{default:n((()=>[y($(e.$t("拒绝原因"))+": ",1)])),_:1}),m(l,{class:"refuse-reply-content line1"},{default:n((()=>[y($(U.value.reply),1)])),_:1})])),_:1})):g("",!0),m(l,{class:"negotiate",onClick:K},{default:n((()=>[m(l,{class:"negotiate-text"},{default:n((()=>[y($(e.$t("查看协商记录")),1)])),_:1}),m(l,{class:"negotiate-icon"},{default:n((()=>[m(s,{type:"right",size:"20",color:"#999"})])),_:1})])),_:1}),4===U.value.status?(p(),c(l,{key:1,class:"negotiate",onClick:M},{default:n((()=>[m(l,{class:"negotiate-text"},{default:n((()=>[y($(e.$t("去发货")),1)])),_:1}),m(l,{class:"negotiate-icon"},{default:n((()=>[m(s,{type:"right",size:"20",color:"#999"})])),_:1})])),_:1})):g("",!0),m(l,{class:"info-content"},{default:n((()=>[m(l,{class:"info-content-title"},{default:n((()=>[y($(e.$t("售后信息")),1)])),_:1}),m(l,{class:"info-content-product"},{default:n((()=>[(p(!0),v(b,null,h(U.value.aftersales_items,(e=>(p(),c(l,{class:"info-content-product-item",onClick:a=>{return t=e.product_id,void j({url:`/pages/productDetail/index?id=${t}`});var t},key:e.aftersales_item_id},{default:n((()=>[m(l,{class:"product-item-left"},{default:n((()=>[m(u,{src:e.pic_thumb,"onUpdate:src":a=>e.pic_thumb=a},null,8,["src","onUpdate:src"])])),_:2},1024),m(l,{class:"product-item-right"},{default:n((()=>[m(l,{class:"product-item-name line2"},{default:n((()=>[y($(e.product_name),1)])),_:2},1024),m(l,{class:"right-price"},{default:n((()=>[m(i,{showText:!1,decimalsStyle:{fontSize:"23rpx",fontWeight:"bold"},currencyStyle:{fontSize:"21rpx",fontWeight:"bold"},class:"right-price-pricenum",priceData:e.price},null,8,["priceData"]),m(l,{class:"right-price-quantity"},{default:n((()=>[y("x "+$(e.number),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),m(l,{class:"refund-info"},{default:n((()=>[Number(U.value.refund_amount)>0?(p(),c(l,{key:0,class:"refund-info-item"},{default:n((()=>[m(l,{class:"label"},{default:n((()=>[y($(e.$t("退款金额"))+"：",1)])),_:1}),m(l,{class:"value price"},{default:n((()=>[m(i,{showText:!1,isBottom:!1,priceData:U.value.refund_amount},null,8,["priceData"])])),_:1})])),_:1})):g("",!0),m(l,{class:"refund-info-item"},{default:n((()=>[m(l,{class:"label"},{default:n((()=>[y($(e.$t("售后方式"))+"：",1)])),_:1}),m(l,{class:"value"},{default:n((()=>[y($(U.value.aftersales_type_name),1)])),_:1})])),_:1}),m(l,{class:"refund-info-item"},{default:n((()=>[m(l,{class:"label"},{default:n((()=>[y($(e.$t("退款原因"))+"：",1)])),_:1}),m(l,{class:"value"},{default:n((()=>[y($(U.value.aftersale_reason),1)])),_:1})])),_:1})])),_:1}),m(l,{class:"after-sale"},{default:n((()=>[m(l,{class:"after-sale-item"},{default:n((()=>[m(l,{class:"label"},{default:n((()=>[y($(e.$t("售后编号"))+"：",1)])),_:1}),m(l,{class:"value"},{default:n((()=>[y($(U.value.aftersales_sn),1)])),_:1})])),_:1}),m(l,{class:"after-sale-item"},{default:n((()=>[m(l,{class:"label"},{default:n((()=>[y($(e.$t("申请时间"))+"：",1)])),_:1}),m(l,{class:"value"},{default:n((()=>[y($(U.value.add_time),1)])),_:1})])),_:1}),m(l,{class:"after-sale-item"},{default:n((()=>[m(l,{class:"label"},{default:n((()=>[y($(e.$t("退货数量"))+"：",1)])),_:1}),m(l,{class:"value"},{default:n((()=>[y($(W.value),1)])),_:1})])),_:1})])),_:1})])),_:1}),U.value.logistics_name&&U.value.tracking_no?(p(),c(l,{key:2,class:"info-content"},{default:n((()=>[m(l,{class:"info-content-title"},{default:n((()=>[y($(e.$t("退货信息")),1)])),_:1}),m(l,{class:"after-sale"},{default:n((()=>[m(l,{class:"after-sale-item"},{default:n((()=>[m(l,{class:"label"},{default:n((()=>[y($(e.$t("快递公司"))+"：",1)])),_:1}),m(l,{class:"value"},{default:n((()=>[y($(U.value.logistics_name),1)])),_:1})])),_:1}),m(l,{class:"after-sale-item"},{default:n((()=>[m(l,{class:"label"},{default:n((()=>[y($(e.$t("快递单号"))+"：",1)])),_:1}),m(l,{class:"value"},{default:n((()=>[y($(U.value.tracking_no),1)])),_:1})])),_:1})])),_:1})])),_:1})):g("",!0),U.value.refund?(p(),c(l,{key:3,class:"info-content"},{default:n((()=>[m(l,{class:"info-content-title"},{default:n((()=>[y($(e.$t("退款进度")),1)])),_:1}),m(l,{class:"after-sale"},{default:n((()=>[U.value.refund.online_balance>0?(p(),c(l,{key:0,class:"after-sale-item"},{default:n((()=>[m(l,{class:"label"},{default:n((()=>[y($(e.$t("线上退款"))+"：",1)])),_:1}),m(l,{class:"value"},{default:n((()=>[m(i,{showText:!1,isBottom:!1,priceData:U.value.refund.online_balance},null,8,["priceData"])])),_:1}),m(l,{class:"after-sale-status"},{default:n((()=>[y($(2===U.value.refund.is_online?e.$t("退款成功"):e.$t("退款中")),1)])),_:1})])),_:1})):g("",!0),U.value.refund.offline_balance>0?(p(),c(l,{key:1,class:"after-sale-item"},{default:n((()=>[m(l,{class:"label"},{default:n((()=>[y($(e.$t("线下退款"))+"：",1)])),_:1}),m(l,{class:"value"},{default:n((()=>[m(i,{showText:!1,isBottom:!1,priceData:U.value.refund.offline_balance},null,8,["priceData"])])),_:1}),m(l,{class:"after-sale-status"},{default:n((()=>[y($(2===U.value.refund.is_online?e.$t("退款成功"):e.$t("退款中")),1)])),_:1})])),_:1})):g("",!0),U.value.refund.refund_balance>0?(p(),c(l,{key:2,class:"after-sale-item"},{default:n((()=>[m(l,{class:"label"},{default:n((()=>[y($(e.$t("余额退款"))+"：",1)])),_:1}),m(l,{class:"value"},{default:n((()=>[m(i,{showText:!1,isBottom:!1,priceData:U.value.refund.refund_balance},null,8,["priceData"])])),_:1}),m(l,{class:"after-sale-status"},{default:n((()=>[y($(2===U.value.refund.is_online?e.$t("退款成功"):e.$t("退款中")),1)])),_:1})])),_:1})):g("",!0)])),_:1})])),_:1})):g("",!0),U.value.can_cancel?(p(),c(r,{key:4,height:"100rpx",backgroundColor:"#fff"},{default:n((()=>[m(l,{class:"after-sale-btn"},{default:n((()=>[m(l,{class:"after-sale-btn-box"},{default:n((()=>[m(f,{class:"btn",plain:!0,onClick:F},{default:n((()=>[y($(e.$t("撤销申请")),1)])),_:1}),m(f,{plain:!0,class:"btn",onClick:G},{default:n((()=>[y($(e.$t("修改申请")),1)])),_:1})])),_:1})])),_:1})])),_:1})):g("",!0)],64)):g("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-c5ad1a54"]]);export{A as default};
