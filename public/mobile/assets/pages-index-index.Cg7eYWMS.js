import{_ as e,c as a,o as s,w as t,a as l,i as o,b as u,t as r,d as i,e as n,u as c,r as p,f as d,g as m,h as v,j as _,k as f,p as y,l as g,m as j,n as x,s as w,q as h,v as b,x as I,y as T,z as k,A as L,B as z,C,D as F,F as $}from"./index-BKzbZvRR.js";import{_ as A}from"./tig-back-top.vue_vue_type_script_setup_true_lang.CIMNqfpz.js";import{u as B,_ as D}from"./tig-layout.BpNdXByQ.js";import{g as G,a as q}from"./home.Cp7aP7xW.js";import{u as E,m as H}from"./index.O0ddZqso.js";import{m as J}from"./masonry.XQRK2NFB.js";import"./tig-image.DrOwWlV9.js";import"./index.DVcVp2vA.js";import"./format-price.kSnuguuz.js";import"./tig-fixed-placeholder.s9cnCRBL.js";import"./tig-countdown.vue_vue_type_script_setup_true_lang.D1VN3hDu.js";import"./specification.DeG19GHJ.js";import"./uni-icons.DELFdrY8.js";import"./uni-number-box.CzE6YkX8.js";import"./product.BqL6tr7k.js";import"./activityCard.DDPb7Kxq.js";const K=e({},[["render",function(e,n){const c=i,p=o;return s(),a(p,null,{default:t((()=>[l(p,{class:"preview-box"},{default:t((()=>[l(p,null,{default:t((()=>[u(r(e.$t("预览"))+"：  ",1),l(c,null,{default:t((()=>[u(r(e.$t("移动端")),1)])),_:1})])),_:1})])),_:1}),l(p,{class:"placeholder"})])),_:1})}],["__scopeId","data-v-decbbe23"]]),M=e(n({__name:"index",setup(e){const{scrollTop:u}=B(b),r=c(),i=p(0),n=p(!1),M=p([]),N=p(0),O=p(1),P=p(!1),Q=p(!0),R=p([]),S=e=>{N.value=e,0!==N.value&&(O.value=1,P.value=!1,R.value=[],U())},U=async()=>{Q.value=!0;try{const e=await G({categoryId:N.value,page:O.value});e.records&&e.records.length>0?(R.value=[...R.value,...e.records],P.value=!1):P.value=!0}catch(e){console.error(e)}finally{Q.value=!1}},V=async()=>{n.value=!0;try{const e=await q();M.value=e.moduleList,i.value=1,w()}catch(e){console.error(e)}finally{n.value=!1}};d((e=>{e&&e.previewId&&(r.previewId=e.previewId),W.reset(),V()})),m((()=>{W.reset()}));const W=E();return v((()=>{N.value=0,W.reset(),V()})),_((()=>{N.value>0&&!n.value&&!P.value&&(O.value++,U())})),f((()=>{u.value>0&&setTimeout((()=>{y({scrollTop:u.value,duration:0})}),20),g()})),j((e=>({title:r.baseInfo.shopTitle}))),x((()=>({title:r.baseInfo.shopTitle}))),(e,i)=>{const c=z,p=o,d=h(T("up-empty"),I),m=h(T("tig-back-top"),A),v=h(T("tig-layout"),D);return s(),a(v,null,{default:t((()=>[L(r).previewId>0?(s(),a(K,{key:0})):k("",!0),n.value?(s(),a(p,{key:1,class:"index_empty"},{default:t((()=>[l(c,{"lazy-load":"",src:L(C)("common/index_empty.png"),mode:"widthFix"},null,8,["src"])])),_:1})):(s(),a(p,{key:2,class:"index"},{default:t((()=>[l(p,{class:"decorate-page-window"},{default:t((()=>[l(H,{modules:M.value,scrollTop:L(u),onLoadGoodsList:S},null,8,["modules","scrollTop"]),N.value>0&&R.value.length>0?(s(),F($,{key:0},[l(J,{commodityList:R.value},null,8,["commodityList"]),Q.value||0!==R.value.length?k("",!0):(s(),a(p,{key:0,class:"empty-box"},{default:t((()=>[l(d,{icon:L(C)("salesman/no_order.png"),text:e.$t("暂无数据")},null,8,["icon","text"])])),_:1}))],64)):k("",!0)])),_:1})])),_:1})),l(m,{scrollTop:L(u)},null,8,["scrollTop"])])),_:1})}}}),[["__scopeId","data-v-78121f8f"]]);export{M as default};
