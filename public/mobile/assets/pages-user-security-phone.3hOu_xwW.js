import{d as e,r as a,o as l,R as t,k as s,l as i,m as u,n as o,w as n,q as r,t as d,v as c,y as p,F as f,s as v,M as m,L as _,C as y}from"./index-Ce4FtYLL.js";import{_ as b}from"./uni-easyinput.Do0WG9vl.js";import{a as h,_ as k}from"./tig-layout.nM03J4I_.js";import{n as g}from"./index.v2UirNFN.js";import{V as C}from"./verificationCode.vdLVoKDN.js";import{m as $,a as x,s as j,b as U}from"./security.DnVy-TMb.js";import{_ as q}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.yuSuVTUg.js";import"./u-loading-icon.CaEeBur7.js";import"./u-icon.BDQrrWMI.js";const w=q(e({__name:"phone",setup(e){const q={navbar:"1",return:"1",title:"账户安全",color:!1},w=e=>{I.value=e},A=e=>{M.value=e},I=a(""),M=a(""),B=a(""),D=a(!0),E=a(!1);l((e=>{e.mobile?(E.value=!0,M.value=e.mobile):E.value=!1}));const L=t((()=>!I.value)),T=e=>{m({title:e,duration:1500,icon:"none"})},V=async()=>{try{let e={mobile:M.value,code:I.value};if(console.log(E.value),E.value){await $({...e})}else{await x({...e})}_({url:"/pages/user/security/newPhone"})}catch(e){m({title:e.message,icon:"none"})}};return(e,a)=>{const l=y,t=s(i("uni-easyinput"),b),m=s(i("tig-button"),h),_=s(i("tig-layout"),k);return u(),o(l,null,{default:n((()=>[r(_,null,{default:n((()=>[r(g,{parameter:q}),r(l,{class:"profile-edit-main"},{default:n((()=>[r(l,{class:"profile-edit-content"},{default:n((()=>[E.value?(u(),o(l,{key:0,class:"item"},{default:n((()=>[r(l,{class:"title"},{default:n((()=>[r(l,null,{default:n((()=>[d(c(e.$t("请输入")),1)])),_:1}),r(l,{class:"info"},{default:n((()=>[d(c(M.value.replace(/(\d{2})\d*(\d{4})$/,"$1*****$2")),1)])),_:1}),r(l,null,{default:n((()=>[d(c(e.$t("收到的短信验证码")),1)])),_:1})])),_:1})])),_:1})):(u(),p(f,{key:1},[r(l,{class:"item"},{default:n((()=>[r(l,{class:"title"},{default:n((()=>[r(l,null,{default:n((()=>[d(c(e.$t("您还未绑定手机号，请输入手机号绑定")),1)])),_:1})])),_:1})])),_:1}),r(l,{class:"item special-item line"},{default:n((()=>[r(t,{inputBorder:!1,value:M.value,class:"uni-input item-input",placeholder:e.$t("请输入手机号"),primaryColor:"rgb(192, 196, 204)",onInput:A},null,8,["value","placeholder"])])),_:1})],64)),r(l,{class:"flex align-center"},{default:n((()=>[r(l,{class:"item line"},{default:n((()=>[r(t,{inputBorder:!1,value:I.value,focus:"",class:"",placeholder:e.$t("手机短信验证码"),primaryColor:"rgb(192, 196, 204)",onInput:w},null,8,["value","placeholder"])])),_:1}),E.value?(u(),o(C,{key:0,style:{height:"65rpx"},isChecked:D.value,"onUpdate:isChecked":a[0]||(a[0]=e=>D.value=e),mobile:M.value,"onUpdate:mobile":a[1]||(a[1]=e=>M.value=e),"verify-token-data":B.value,"onUpdate:verifyTokenData":a[2]||(a[2]=e=>B.value=e),requestApi:v(j),onMobileErrorCallback:T},null,8,["isChecked","mobile","verify-token-data","requestApi"])):(u(),o(C,{key:1,style:{height:"65rpx"},isChecked:D.value,"onUpdate:isChecked":a[3]||(a[3]=e=>D.value=e),mobile:M.value,"onUpdate:mobile":a[4]||(a[4]=e=>M.value=e),"verify-token-data":B.value,"onUpdate:verifyTokenData":a[5]||(a[5]=e=>B.value=e),requestApi:v(U),onMobileErrorCallback:T},null,8,["isChecked","mobile","verify-token-data","requestApi"]))])),_:1}),r(l,{class:"item",style:{height:"60rpx"}},{default:n((()=>[r(m,{disabled:L.value,class:"next",onClick:V},{default:n((()=>[d(c(e.$t("下一步")),1)])),_:1},8,["disabled"])])),_:1})])),_:1}),r(l,{class:"profile-edit-content"},{default:n((()=>[r(l,{class:"btn-item"},{default:n((()=>[r(l,{class:"title"},{default:n((()=>[r(l,{class:"big-title"},{default:n((()=>[d(c(e.$t("为什么要进行身份验证"))+"？",1)])),_:1})])),_:1}),r(l,{class:"info"},{default:n((()=>[d("1. "+c(e.$t("为保障您的账户信息安全，在变更账户中的重要信息时需要进行身份验证，感谢您的理解和支持"))+"。",1)])),_:1}),r(l,{class:"info"},{default:n((()=>[d("2. "+c(e.$t("验证身份遇到问题？您可以通知我们的客服，我们将尽快联系您"))+"。",1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-ddd21159"]]);export{w as default};
