import{e,r as a,R as t,c as l,w as s,i,v as o,z as n,o as u,a as r,B as c,b as p,t as d,N as m,ag as v,_ as f}from"./index-BKXBH4vI.js";import{_}from"./uni-easyinput.D0KhEVqd.js";import{a as b,_ as y}from"./tig-layout.DMoUsUKf.js";import{n as g}from"./index.xrDesKlL.js";import{V as h}from"./verificationCode.CRSs8EZv.js";import{a as k,b as x}from"./security.B7bvd7MX.js";import"./uni-icons.C94_g2wt.js";const C=f(e({__name:"newPhone",setup(e){const f={navbar:"1",return:"1",title:"账户安全",color:!1},C=e=>{I.value=e},j=e=>{U.value=e},I=a(""),U=a(""),w=a(""),B=a(!0),T=t((()=>!U.value||!I.value)),$=e=>{m({title:e,duration:1500,icon:"none"})},q=async()=>{try{let e={mobile:U.value,code:I.value};const a=await x({...e});m({title:a.message,icon:"none"}),setTimeout((()=>{v({url:"/pages/user/profile/index"})}),1e3)}catch(e){e.message&&m({title:e.message,icon:"none"})}};return(e,a)=>{const t=o(n("uni-easyinput"),_),m=i,v=o(n("tig-button"),b),x=o(n("tig-layout"),y);return u(),l(m,null,{default:s((()=>[r(x,null,{default:s((()=>[r(g,{parameter:f}),r(m,{class:"profile-edit-main"},{default:s((()=>[r(m,{class:"profile-edit-content"},{default:s((()=>[r(m,{class:"item input"},{default:s((()=>[r(t,{inputBorder:!1,value:U.value,class:"uni-input item-input",placeholder:e.$t("请输入新手机号"),primaryColor:"rgb(192, 196, 204)",onInput:j},null,8,["value","placeholder"])])),_:1}),r(m,{class:"flex align-center"},{default:s((()=>[r(m,{class:"item line"},{default:s((()=>[r(t,{inputBorder:!1,value:I.value,class:"uni-input item-input",focus:"",placeholder:e.$t("新手机短信验证码"),primaryColor:"rgb(192, 196, 204)",onInput:C},null,8,["value","placeholder"])])),_:1}),r(h,{style:{height:"65rpx"},isChecked:B.value,"onUpdate:isChecked":a[0]||(a[0]=e=>B.value=e),mobile:U.value,"onUpdate:mobile":a[1]||(a[1]=e=>U.value=e),"verify-token-data":w.value,"onUpdate:verifyTokenData":a[2]||(a[2]=e=>w.value=e),requestApi:c(k),onMobileErrorCallback:$},null,8,["isChecked","mobile","verify-token-data","requestApi"])])),_:1}),r(m,{class:"item",style:{height:"60rpx"}},{default:s((()=>[r(v,{disabled:T.value,class:"next",onClick:q},{default:s((()=>[p(d(e.$t("提交")),1)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-b35121ac"]]);export{C as default};
