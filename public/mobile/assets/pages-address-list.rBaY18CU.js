import{e as a,E as e,Q as s,f as t,ag as l,r as d,g as o,ah as i,c as n,w as r,i as u,q as c,ai as m,y as f,aj as g,o as p,a as _,z as h,D as v,F as y,J as b,A as j,b as x,t as k,ak as V,X as C,d as I,aa as w,L as D,P as L,a5 as z,al as U,am as $,a6 as J,_ as N}from"./index-BKzbZvRR.js";import{_ as R,a as q}from"./uni-swipe-action.DXHhbVv2.js";import{_ as A}from"./empty-box.vue_vue_type_script_setup_true_lang.CeENwGmf.js";import{_ as B}from"./loading-box.C4egri0r.js";import{a as E,_ as F}from"./tig-layout.BpNdXByQ.js";import{_ as G}from"./tig-fixed-placeholder.s9cnCRBL.js";import{_ as K}from"./tig-loadingpage.vue_vue_type_script_setup_true_lang.De24EPaU.js";import{g as M,d as P,s as Q}from"./address.av227DZr.js";import{u as S}from"./useList.qLYpICh7.js";import"./product.BqL6tr7k.js";const X=N(a({__name:"list",setup(a){const{t:N}=e(),X=s({page:1,size:10}),{getList:Y,data:Z,isLoadMore:H,isLoading:O}=S(M,{params:X,path:{dataKey:"records"},immediate:!0,manageData:a=>{var e;aa.value=null==(e=a.find((a=>1===a.isSelected)))?void 0:e.addressId}});t((()=>{l("refreshData",(()=>{X.page=1,Z.value=[],Y()}))}));const T=async a=>{try{await P({id:a});D({title:N("删除成功"),icon:"none"}),X.page=1,Z.value=[],Y()}catch(e){console.error(e)}},W=()=>{L({url:"/pages/address/editRegion"})},aa=d(),ea=a=>{sa()},sa=async()=>{z({title:N("切换中")});const a=U();try{if(await Q({id:aa.value}),X.page=1,Z.value=[],a.length>1){if("pages/order/check"===a[a.length-2].route)return $()}Y()}catch(e){console.error(e),D({title:e.message,icon:"none"})}finally{J()}};return o((()=>{i("refreshData")})),(a,e)=>{const s=c(f("up-radio"),m),t=u,l=c(f("uni-swipe-action-item"),R),d=c(f("uni-swipe-action"),q),o=c(f("up-radio-group"),g),i=c(f("empty-box"),A),D=c(f("loading-box"),B),z=I,U=c(f("tig-button"),E),$=c(f("tig-fixed-placeholder"),G),J=c(f("tig-loadingpage"),K),M=c(f("tig-layout"),F);return p(),n(t,null,{default:r((()=>[_(M,{title:"收货地址"},{default:r((()=>[_(t,{class:"address-list"},{default:r((()=>[_(o,{modelValue:aa.value,"onUpdate:modelValue":e[0]||(e[0]=a=>aa.value=a),placement:"column",onChange:ea},{default:r((()=>[_(d,null,{default:r((()=>[(p(!0),v(y,null,b(j(Z),(e=>(p(),n(t,{key:e.addressId,class:"address-item"},{default:r((()=>[_(l,{threshold:0},{right:r((()=>[_(t,{class:"address-del",onClick:a=>{return s=e.addressId,console.log("handleDel",s),void w({title:N("提示"),content:N("确定删除吗？"),success:async a=>{a.confirm&&T(s)}});var s}},{default:r((()=>[x(k(a.$t("删除")),1)])),_:2},1032,["onClick"])])),default:r((()=>[_(t,{class:"address-item-content"},{default:r((()=>[_(t,{class:"address-item-left flex-center"},{default:r((()=>[_(s,{activeColor:"var(--general)",name:e.addressId},null,8,["name"])])),_:2},1024),_(t,{class:"address-item-middle"},{default:r((()=>[_(t,{class:"user-info"},{default:r((()=>[_(t,{class:"name"},{default:r((()=>[x(k(e.consignee),1)])),_:2},1024),_(t,{class:"phone"},{default:r((()=>[x(k(j(V)(e.mobile))+" ",1),1===e.isDefault?(p(),n(t,{key:0,class:"tag"},{default:r((()=>[x(k(a.$t("默认")),1)])),_:1})):h("",!0)])),_:2},1024)])),_:2},1024),_(t,{class:"address line1"},{default:r((()=>[x(k(e.regionName)+" "+k(e.address),1)])),_:2},1024)])),_:2},1024),_(t,{class:"address-item-right flex-center",onClick:a=>{return s=e.addressId,void L({url:"/pages/address/editRegion?id="+s});var s}},{default:r((()=>[_(t,{class:"iconfont icon-bianji"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"])])),_:1}),j(H)||j(O)||0!==j(Z).length?h("",!0):(p(),n(i,{key:0,mode:"list",text:"暂无地址！"})),_(D,{modelValue:j(H),"onUpdate:modelValue":e[1]||(e[1]=a=>C(H)?H.value=a:null),page:X.page,length:j(Z).length},null,8,["modelValue","page","length"]),_($,{backgroundColor:"#fff"},{default:r((()=>[_(t,{class:"btn-box"},{default:r((()=>[_(U,{class:"btn",onClick:W},{default:r((()=>[_(z,{class:"iconfont icon-dizhi"}),x(" "+k(a.$t("添加新地址")),1)])),_:1})])),_:1})])),_:1}),_(J,{modelValue:j(O),"onUpdate:modelValue":e[2]||(e[2]=a=>C(O)?O.value=a:null)},null,8,["modelValue"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-854aca84"]]);export{X as default};
