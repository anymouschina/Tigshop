import{Y as s,e as a,G as e,Q as t,r as o,g as l,k as i,c,w as n,v as u,z as p,o as r,a as d,i as _,A as h,E as f,F as m,K as g,b as v,t as y,d as k,M as x,N as w,_ as j}from"./index-BKXBH4vI.js";import{_ as b}from"./tig-image.BbZoJ9nS.js";import{_ as C,a as z}from"./uni-swipe-action.B2KeTgwu.js";import{_ as I}from"./tig-layout.DMoUsUKf.js";import{n as M}from"./index.xrDesKlL.js";import{s as N}from"./shop.B9S7eu-g.js";const U=j(a({__name:"index",setup(a){const{t:j}=e(),U={navbar:"1",return:"1",title:"店铺收藏"},$=t({page:1,size:10,keyword:""}),A=o([]),E=o(0),F=o(!1),G=o(!1),K=async()=>{$.page>1?G.value=!0:F.value=!0;try{const e=await(a=$,s({url:"user/user/collection_shop",method:"get",params:a}));A.value=e.list,E.value=e.total}catch(e){}finally{G.value=!1,F.value=!1}var a};l((()=>{K()}));return i((()=>{$.page<Math.ceil(E.value/$.size)&&($.page++,K())})),(s,a)=>{const e=u(p("tig-image"),b),t=_,o=k,l=u(p("uni-swipe-action-item"),C),i=u(p("uni-swipe-action"),z),E=u(p("tig-layout"),I);return r(),c(E,null,{default:n((()=>[d(t,{class:"collection-shop"},{default:n((()=>[d(M,{parameter:U}),d(E,null,{default:n((()=>[A.value.length>0?(r(),c(i,{key:0},{default:n((()=>[d(t,{class:"collection-content"},{default:n((()=>[(r(!0),f(m,null,g(A.value,(a=>(r(),c(t,{key:a.shop_id,class:"move-item"},{default:n((()=>[d(l,{threshold:0,autoClose:""},{right:n((()=>[d(t,{class:"collect-move-box"},{default:n((()=>[d(t,{class:"btn-del",onClick:s=>(async s=>{try{await N({shop_id:s}),w({title:j("取消成功"),icon:"none"}),$.page=1,A.value=[],K()}catch(a){}})(a.shop_id)},{default:n((()=>[d(o,null,{default:n((()=>[v(y(s.$t("取消收藏")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),default:n((()=>[d(t,{class:"shop-item",onClick:s=>{return e=a.shop_id,void x({url:`/pages/shop/index?shop_id=${e}`});var e}},{default:n((()=>[d(t,{class:"shop-item-left"},{default:n((()=>[d(e,{src:a.shop.shop_logo,"onUpdate:src":s=>a.shop.shop_logo=s},null,8,["src","onUpdate:src"])])),_:2},1024),d(t,{class:"shop-item-right"},{default:n((()=>[d(t,{class:"shop-name line1"},{default:n((()=>[v(y(a.shop.shop_title),1)])),_:2},1024),d(t,{class:"shop-desc line1"},{default:n((()=>[v(y(a.shop.description?a.shop.description:""),1)])),_:2},1024),d(t,{class:"shop-info"},{default:n((()=>[d(o,{class:"shop-info-text"},{default:n((()=>[v("上架商品："+y(a.product_count),1)])),_:2},1024),d(o,{class:"shop-info-text"},{default:n((()=>[v("店铺收藏："+y(a.collect_count),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):h("",!0)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-af02e6b9"]]);export{U as default};
