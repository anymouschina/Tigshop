import{d as U,i as m,C as j,s as q,q as V,r as v,c as _,o as f,e as s,f as E,b as e,w as l,g as n,E as r,D as o,F as L,a as M,I as P,_ as R}from"./index-DrbzVNl6.js";import{u as T,c as $}from"./user-Zgy4YOmN.js";import{i as G,p as z}from"./format-CRgx78oe.js";import{P as H}from"./PopFormElm-BZp1_Wme.js";import"./index-CeQDmMxd.js";import{M as J}from"./MobileCard-BSBggTtf.js";import{U as K}from"./UserCard-dYd3AGRe.js";import{_ as c}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const Q={class:"container"},W={class:"content_wrapper"},X={class:"lyecs-form-table"},Y={key:0},Z={class:"container-card"},ss={class:"title"},as={class:"info-card"},ts={class:"card-info"},es={class:"name"},ls={class:"gr"},os={class:"rank"},is={class:"container-card"},ns={class:"info-card"},rs={class:"container-card"},ds={class:"info-card"},us={class:"container-card"},cs={class:"title"},ps={class:"info-card"},ms={class:"zj-info"},vs={class:"rank fz20"},_s={class:"btn-link"},fs={class:"zj-info"},bs={class:"rank fz20"},ks={class:"btn-link"},gs={class:"container-card"},ws={class:"title"},hs={class:"info-card"},ys={class:"zj-info"},Cs={class:"rank fz20"},xs={class:"btn-link"},Ds={class:"zj-info"},zs={class:"rank fz20"},As={class:"btn-link"},Is=U({__name:"Detail",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","callback","close"],setup(A,{expose:I,emit:F}){const b=F,p=A,k=m(!0),h=j().currentRoute.value.query,y=m(p.isDialog?p.act:String(h.act)),N=m(p.isDialog?p.id:Number(h.id));y.value,q();const t=m({balance:0,frozenBalance:0,avatar:""}),C=async()=>{try{const u=await $(y.value,{id:N.value});Object.assign(t.value,u)}catch(u){P.error(u.message),b("close")}finally{k.value=!1}};V(()=>{C()});const O=u=>{C(),b("callback",u)},g=()=>{b("submitCallback",!0)};return I({onFormSubmit:()=>{g()}}),(u,a)=>{const S=v("el-avatar"),d=v("el-col"),w=v("el-row"),B=v("a-spin");return f(),_("div",Q,[s("div",W,[s("div",X,[k.value?E("",!0):(f(),_("div",Y,[s("div",Z,[s("div",ss,[a[2]||(a[2]=s("span",{class:"mr10"},"基本信息",-1)),e(n(c),{params:{act:"detail",id:t.value.userId},isDrawer:"",path:"user/user/Info",title:"编辑会员",width:"560px",onOkCallback:O},{default:l(()=>a[1]||(a[1]=[s("a",{class:"btn-link"},"编辑",-1)])),_:1},8,["params"])]),s("div",as,[e(S,{size:60,src:n(G)(t.value.avatar)},null,8,["src"]),s("div",ts,[s("div",es,[e(K,{user:t.value.username},null,8,["user"])]),s("div",ls,[a[3]||(a[3]=r(" 等级：")),s("span",os,o(t.value.rankName),1)]),e(w,null,{default:l(()=>[e(d,{span:8},{default:l(()=>[e(n(H),{"org-value":t.value.nickname,"onUpdate:orgValue":a[0]||(a[0]=i=>t.value.nickname=i),max:10,params:{id:t.value.userId,field:"nickname"},requestApi:n(T),label:"昵称",type:"textarea"},{default:l(()=>[s("div",null,o("昵称："+t.value.nickname),1)]),_:1},8,["org-value","params","requestApi"])]),_:1}),e(d,{span:8},{default:l(()=>[a[4]||(a[4]=r(" 手机号： ")),e(J,{mobile:t.value.mobile},null,8,["mobile"])]),_:1}),e(d,{span:8},{default:l(()=>[r(" 邮箱地址："+o(t.value.email),1)]),_:1})]),_:1})])])]),s("div",is,[a[5]||(a[5]=s("div",{class:"title"},"会员资料",-1)),s("div",ns,[e(w,{style:{width:"100%"}},{default:l(()=>[e(d,{span:8},{default:l(()=>[r(" 生日："+o(t.value.birthday),1)]),_:1}),e(d,{span:8},{default:l(()=>[r(" 注册时间："+o(t.value.regTime),1)]),_:1})]),_:1})])]),s("div",rs,[a[7]||(a[7]=s("div",{class:"title"},[s("span",{class:"mr10"},"收货信息")],-1)),s("div",ds,[e(w,{style:{width:"100%","line-height":"30px"}},{default:l(()=>[e(d,{span:8},{default:l(()=>{var i;return[r(" 收货人："+o(((i=t.value.userAddress)==null?void 0:i.consignee)||"--"),1)]}),_:1}),e(d,{span:8},{default:l(()=>{var i;return[r(" 联系方式："+o(((i=t.value.userAddress)==null?void 0:i.mobile)||"--"),1)]}),_:1}),e(d,{span:8},{default:l(()=>{var i;return[r(" 邮箱地址："+o(((i=t.value.userAddress)==null?void 0:i.email)||"--"),1)]}),_:1}),e(d,{span:8},{default:l(()=>{var i,x;return[a[6]||(a[6]=r(" 所在地区： ")),(f(!0),_(L,null,M((i=t.value.userAddress)==null?void 0:i.regionNames,D=>(f(),_("span",{key:D},o(D),1))),128)),r(" "+o(((x=t.value.userAddress)==null?void 0:x.address)||"--"),1)]}),_:1})]),_:1})])]),s("div",us,[s("div",cs,[a[10]||(a[10]=s("span",{class:"mr10"},"资金信息",-1)),e(n(c),{params:{act:"detail",id:t.value.userId,type:1},isDrawer:"",path:"user/user/EditAccount",title:"资金管理",width:"600px",onOkCallback:g},{default:l(()=>a[8]||(a[8]=[s("a",{class:"btn-link mr10"},"管理",-1)])),_:1},8,["params"]),e(n(c),{params:{act:"detail",id:t.value.userId,type:1},isDrawer:"",path:"user/user/AccountLog",title:"资金管理",width:"资金明细",showClose:!1,showOnOk:!1},{default:l(()=>a[9]||(a[9]=[s("a",{class:"btn-link"},"明细",-1)])),_:1},8,["params"])]),s("div",ps,[s("div",ms,[a[11]||(a[11]=s("div",null,"可用资金",-1)),s("div",vs,[s("a",_s,o(n(z)(t.value.balance)),1)])]),s("div",fs,[a[12]||(a[12]=s("div",null,"冻结资金",-1)),s("div",bs,[s("a",ks,o(n(z)(t.value.frozenBalance)),1)])])])]),s("div",gs,[s("div",ws,[a[15]||(a[15]=s("span",{class:"mr10"},"积分信息",-1)),e(n(c),{params:{act:"detail",id:t.value.userId,type:3},isDrawer:"",path:"user/user/EditAccount",title:"资金管理",width:"600px",onOkCallback:g},{default:l(()=>a[13]||(a[13]=[s("a",{class:"btn-link mr10"},"管理",-1)])),_:1},8,["params"]),e(n(c),{params:{act:"detail",id:t.value.userId,type:3},isDrawer:"",path:"user/user/AccountLog",title:"资金管理",width:"资金明细",showClose:!1,showOnOk:!1},{default:l(()=>a[14]||(a[14]=[s("a",{class:"btn-link"},"明细",-1)])),_:1},8,["params"])]),s("div",hs,[s("div",ys,[a[16]||(a[16]=s("div",null,"成长积分",-1)),s("div",Cs,[s("a",xs,o(t.value.growthPoints),1)])]),s("div",Ds,[a[17]||(a[17]=s("div",null,"消费积分",-1)),s("div",zs,[s("a",As,o(t.value.points),1)])])])])])),e(B,{spinning:k.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}}),Es=R(Is,[["__scopeId","data-v-01cd701a"]]);export{Es as default};
