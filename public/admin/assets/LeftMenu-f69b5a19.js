import{d as F,a9 as J,j as g,v as R,r as S,o as s,c as o,e as a,f as i,b as _,w as y,F as b,a as z,h as n,dk as Z,aV as A,E as V,k as I,n as E,dw as W,dx as X,G as $,p as j,i as G,_ as U}from"./index-7c2d2aef.js";import{S as B}from"./StatusDot-19af4eec.js";import{r as q,i as H}from"./format-4e0206d3.js";import{e as K}from"./util-1ee03ed8.js";import{u as Q}from"./im-efe55bdf.js";import{s as T}from"./conversation-43b2bd1f.js";import"./config-9548fa9b.js";import"./config-e2aa16d1.js";const h=m=>(j("data-v-dfd35904"),m=m(),G(),m),Y={class:"left-menu-container"},ee={class:"app-layout-m_nav_o1XZi"},te={class:"avg"},se=["src"],ae=["src"],oe={class:"popover-box"},ie={class:"status"},ne={key:3,class:"text"},le={key:4,class:"text"},ce={key:5,class:"text"},re={class:"status-pop-box"},ue=["onClick"],de={key:0,class:"status-pop-item-content"},_e=h(()=>a("div",{class:"label green"},null,-1)),pe=h(()=>a("div",{class:"txt"},"在线",-1)),he=[_e,pe],me={key:1,class:"status-pop-item-content"},ve=h(()=>a("div",{class:"txt"},"忙碌",-1)),fe={key:2,class:"status-pop-item-content"},ge=h(()=>a("div",{class:"label"},null,-1)),ye=h(()=>a("div",{class:"txt"},"离线",-1)),ke=[ge,ye],xe=["onClick"],Se={class:"app-layout-m_item-icon_1yDNO"},be={class:"app-layout-m_item-title_2Je8J"};const Ie=F({__name:"LeftMenu",setup(m){const l=Q(),k=J(()=>Z().userInfo),p=A(),M=g([{value:1,label:"在线"},{value:2,label:"忙碌"},{value:3,label:"离开"}]),N=async t=>{(await T({status:t})).errcode===0&&l.setImPresence(t)},O=t=>{if(p.path.split("/").length==4){let c=p.path.lastIndexOf("/");return p.path.substring(0,c)===t}return p.path===t},x=g([{path:"/im/index",svg:"im-recently",name:"index",title:"即时会话",children:[]},{path:"/im/history",svg:"im-history",name:"history",title:"历史会话",children:[]},{path:"/im/systemSetting",svg:"im-setting",name:"systemSetting",title:"系统设置",children:[{path:"/im/systemSetting/autoReply",name:"autoReply",title:"客服自动回复"}]}]),v=g([]),C=V(),P=g("");R(()=>p,t=>{var c,d;if(t.path.split("/").length==3){let r=x.value.filter(e=>e.path===t.path),u=r.length>0?r[0]:{};((c=u.children)==null?void 0:c.length)>0&&(v.value=u.children,P.value=t.path,C.push({path:v.value[0].path}))}else{let r=t.path,u=r.lastIndexOf("/"),e="";u!==-1&&(e=r.substring(0,u),r.substring(u+1));let f=x.value.filter(D=>D.path===e),L=f.length>0?f[0]:{};((d=L.children)==null?void 0:d.length)>0&&(v.value=L.children,P.value=t.path)}},{deep:!0,immediate:!0});const w=t=>{C.push({path:t})};function Be(t,c){return c===t}return(t,c)=>{const d=S("el-icon"),r=S("el-popover"),u=S("SvgIcon");return s(),o(b,null,[a("div",Y,[a("div",ee,[a("div",te,[i(K)(String(k.value.avatar))=="def"?(s(),o("img",{key:0,class:"image",src:i(q)(k.value.avatar)},null,8,se)):(s(),o("img",{key:1,class:"image",src:i(H)(k.value.avatar)},null,8,ae))]),a("div",oe,[_(r,{placement:"right-start",width:100,trigger:"click"},{reference:y(()=>[a("div",ie,[i(l).imPresence==1?(s(),I(B,{key:0,style:{"margin-top":"2px"},inline:!1,flicker:!0,size:8,color:"#3ebd00"})):n("",!0),i(l).imPresence==2?(s(),I(B,{key:1,style:{"margin-top":"2px"},inline:!1,flicker:!0,size:8,color:"#f44444"})):n("",!0),i(l).imPresence==3?(s(),I(B,{key:2,style:{"margin-top":"2px"},inline:!1,flicker:!0,size:8,color:"#d0d0d0"})):n("",!0),i(l).imPresence==1?(s(),o("div",ne,"在线")):n("",!0),i(l).imPresence==2?(s(),o("div",le,"忙碌")):n("",!0),i(l).imPresence==3?(s(),o("div",ce,"离开")):n("",!0)])]),default:y(()=>[a("div",re,[(s(!0),o(b,null,z(M.value,e=>(s(),o("div",{class:"status-pop-item flex align-center cursor-pointer",key:e.value,onClick:f=>N(e.value)},[a("div",{class:E(["status-pop-item-icon",{opacity:e.value==i(l).imPresence}])},[_(d,{size:"14",color:"#000"},{default:y(()=>[_(i(W))]),_:1})],2),e.value==1?(s(),o("div",de,he)):n("",!0),e.value==2?(s(),o("div",me,[a("div",null,[_(d,{size:"14",color:"#ff4444"},{default:y(()=>[_(i(X))]),_:1})]),ve])):n("",!0),e.value==3?(s(),o("div",fe,ke)):n("",!0)],8,ue))),128))])]),_:1})]),(s(!0),o(b,null,z(x.value,e=>(s(),o("div",{class:E(["app-layout-m_item_1hZOk",{"app-layout-m_active_1p89k":O(e.path)}]),onClick:f=>w(e.path)},[a("div",Se,[_(u,{name:e.svg,width:"16",height:"16"},null,8,["name"])]),a("div",be,$(e.title),1)],10,xe))),256))])]),(v.value.length>0,n("",!0))],64)}}});const we=U(Ie,[["__scopeId","data-v-dfd35904"]]);export{we as default};
