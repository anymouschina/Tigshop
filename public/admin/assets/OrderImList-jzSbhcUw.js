import{g as I}from"./order-CoX6hLeE.js";import{i as B,p as $}from"./format-DFT-VJzO.js";import"./index-B-GURfkM.js";import{d as F,i as _,G as L,q as N,c,l as S,e as s,n as m,f as D,b as u,F as g,j as A,a as J,r as b,I as P,o as d,D as r,w as k,g as p,_ as V}from"./index-CGYuOau0.js";import{_ as w}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";const j={class:"top-bar"},E={class:"info-bar"},M={class:"order-card"},Q={class:"order-history-m_header_2AO48"},T={class:"order-history-m_header-line_3zlQJ"},q={class:"order-history-m_content_2mSu8"},G={class:"order-history-m_header-line_3zlQJ"},H={class:"order-history-m_content_2mSu8 order-history-m_time_1Pp-t"},R={class:"order-history-m_status_fLMU8"},U=["onClick"],X={style:{border:"1px solid #f5f5f5"},class:"order-history-m_goods-pic_3wo1h"},K=["src"],W={class:"order-history-m_goods-detail_1XBpg"},Y={class:"order-history-m_goods-name_2i4Hj"},Z={class:"order-history-m_summary_2gJrv"},ss={class:"order-history-m_bottom_2g40I"},es={class:"order-history-m_orderOperationArea_o0OOz"},ts={class:"zent-popover-wrapper zent-pop-wrapper",style:{display:"inline-block"}},os=F({__name:"OrderImList",props:{userId:{type:Number,default:0},preview:{type:Boolean,default:!1}},setup(v){const C=v,a=_(1),l=o=>{a.value=o,o==1?i.order_status=-1:o==2?i.order_status=[0,1,2]:o==3?i.order_status=5:o==4&&(i.order_status=[3,4,-2]),y()},n=_(!1),i=L({page:1,size:9999,order_status:-1,sort_field:"add_time",sort_order:"desc",user_id:C.userId}),h=_(0),f=_([]),y=async()=>{n.value=!0;try{const o=await I({...i});f.value=o.filter_result,h.value=o.total}catch(o){P.error(o.message)}finally{n.value=!1}},x=o=>{console.log(o)};return N(()=>{y()}),(o,t)=>{const O=b("el-empty"),z=b("a-spin");return d(),c("div",{class:"order-area",style:S({height:v.preview?"calc(100vh - 153px)":"calc(100vh - 50px)"})},[s("div",j,[s("div",{onClick:t[0]||(t[0]=e=>l(1)),class:m([{tab__actived:a.value==1},"card"])},"全部",2),s("div",{onClick:t[1]||(t[1]=e=>l(2)),class:m([{tab__actived:a.value==2},"card"])},"未完成",2),s("div",{onClick:t[2]||(t[2]=e=>l(3)),class:m([{tab__actived:a.value==3},"card"])},"已完成",2),s("div",{onClick:t[3]||(t[3]=e=>l(4)),class:m([{tab__actived:a.value==4},"card"])},"已关闭",2)]),s("div",E,[n.value?D("",!0):(d(),c(g,{key:0},[h.value>0?(d(!0),c(g,{key:0},J(f.value,e=>(d(),c("div",M,[s("div",Q,[s("div",T,[t[4]||(t[4]=s("label",null,"订单编号：",-1)),s("div",q,r(e.order_sn),1)]),s("div",G,[t[5]||(t[5]=s("label",null,"下单时间：",-1)),s("div",H,r(e.add_time),1),s("div",R,r(e.order_status_name),1)])]),u(p(w),{params:{act:"detail",id:e.order_id},showClose:!1,showOnOk:!1,title:"订单详情 "+e.order_sn,isDrawer:"",path:"order/order/Info",width:"880px"},{default:k(()=>[s("a",{class:"order-history-m_goods-item_216A0",onClick:rs=>x(e),target:"_blank"},[s("div",X,[s("img",{width:"100%",src:p(B)(e.items[0].product_pic_thumb)},null,8,K)]),s("div",W,[s("div",Y,r(e.items[0].product_name),1)])],8,U)]),_:2},1032,["params","title"]),s("div",Z,"共 "+r(e.items.length)+" 件商品，实付 "+r(p($)(e.total_amount)),1),s("div",ss,[s("div",es,[s("div",ts,[u(p(w),{params:{act:"detail",id:e.order_id,valueName:"admin_note"},isDrawer:"",path:"order/order/src/EditRemark",title:"编辑备注",width:"600px"},{default:k(()=>t[6]||(t[6]=[s("a",null,"备注",-1)])),_:2},1032,["params"])])])])]))),256)):(d(),A(O,{key:1,description:"暂无订单～"}))],64)),u(z,{spinning:n.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])],4)}}}),ms=V(os,[["__scopeId","data-v-379e3613"]]);export{ms as default};
