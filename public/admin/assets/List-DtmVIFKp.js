import{y as ve,d as Ve,G as me,i as ce,q as De,H as Ye,c as o,e as t,b as i,w as u,D as _,E as p,j as h,f as w,I as pe,r as c,o as n,F as Ce,a as Ne,J as Ee,_ as Me}from"./index-CGYuOau0.js";import Le from"./OrderamountStatistics-BauAkNOG.js";import Oe from"./OrderNumberStatistics-BjqoqoC9.js";import{r as Te}from"./export-Bb89fUlC.js";import"./index-u3wYLQ4o.js";const Ue=v=>ve({url:"panel/sales_statistics/list",method:"get",params:v}),Be=v=>ve({url:"panel/sales_statistics/list",method:"get",responseType:"arraybuffer",params:v}),Fe={class:"container"},qe={class:"content_wrapper"},Ae={class:"filtrate-menu"},Ie={class:"main-panel"},ze={class:"main-panel-item"},je={class:"main-panel-item-value"},Ge={class:"main-panel-item-increase"},He={key:0,class:"admin-iconfont red f12 up"},Je={key:1,class:"admin-iconfont green f12"},Pe={class:"main-panel-item"},Xe={class:"main-panel-item-value"},Ke={class:"main-panel-item-increase"},Qe={key:0,class:"admin-iconfont red f12 up"},Re={key:1,class:"admin-iconfont green f12"},We={class:"main-panel-item"},Ze={class:"main-panel-item-value"},$e={class:"main-panel-item-increase"},et={key:0,class:"admin-iconfont red f12 up"},tt={key:1,class:"admin-iconfont green f12"},at={class:"main-panel-item"},st={class:"main-panel-item-value"},nt={class:"main-panel-item-increase"},lt={key:0,class:"admin-iconfont red f12 up"},ot={key:1,class:"admin-iconfont green f12"},it={class:"main-panel-item"},rt={class:"main-panel-item-value"},dt={class:"main-panel-item-increase"},_t={key:0,class:"admin-iconfont red f12 up"},ut={key:1,class:"admin-iconfont green f12"},mt={class:"chart"},ct=Ve({__name:"List",setup(v){const fe=(s,e)=>{b()},l=me({statistic_type:"1",start_end_time:"",date_type:"1"}),m=me({1:"",2:""}),ge=[{label:"按年筛选",value:"1"},{label:"按月筛选",value:"2"}],ye=[{text:"本月",value:new Date},{text:"上月",value:()=>{const s=new Date;return s.setTime(s.getTime()-3600*1e3*24*30),s}},{text:"本年一月",value:()=>{const s=new Date;return new Date(s.getFullYear(),0,1)}}],he=[{text:"本年",value:()=>f(0)},{text:"去年",value:()=>f(1)},{text:"三年前",value:()=>f(3)},{text:"五年前",value:()=>f(5)}],f=s=>{const e=new Date;return new Date(e.getFullYear()-s,e.getMonth(),e.getDate())},a=ce();Ee("filterState",a);const b=async()=>{try{l.start_end_time=m[l.date_type];const s=await Ue(l);if(s.errcode===0){a.value=s;const{sales_statistics_data:e}=s,r=l.date_type==="1"?"月":"日";a.value.sales_statistics_data.horizontal_axis=e.horizontal_axis.map(k=>k+r)}}catch(s){pe.error(s.message),console.error(s)}},x=()=>{b()},g=ce(!1),we=async()=>{g.value=!0;try{const s=await Be({...l,is_export:"1"});g.value=!1,Te(s,"销售统计导出")}catch(s){pe.error(s.message)}finally{g.value=!1}};return De(()=>{const s=Ye(new Date);if(s){const e=s.split("-");for(const r in m)r==="1"&&(m[r]=e[0]),r==="2"&&(m[r]=e[0]+"-"+e[1])}b()}),(s,e)=>{var D,Y,C,N,E,M,L,O,T,U,B,F,q,A,I,z,j,G,H,J,P,X,K,Q,R,W,Z,$,ee,te,ae,se,ne,le,oe,ie,re,de,_e,ue;const r=c("el-tab-pane"),k=c("el-tabs"),be=c("el-option"),ke=c("el-select"),y=c("el-form-item"),S=c("el-date-picker"),V=c("el-button"),xe=c("el-form");return n(),o("div",Fe,[t("div",qe,[t("div",null,[i(k,{modelValue:l.statistic_type,"onUpdate:modelValue":e[0]||(e[0]=d=>l.statistic_type=d),onTabChange:fe},{default:u(()=>[i(r,{label:"订单金额统计",name:"1"}),i(r,{label:"订单数统计",name:"0"})]),_:1},8,["modelValue"]),i(xe,{model:l},{default:u(()=>[t("div",Ae,[i(y,{class:"mr-10"},{default:u(()=>[i(ke,{modelValue:l.date_type,"onUpdate:modelValue":e[1]||(e[1]=d=>l.date_type=d),placeholder:"Select",style:{width:"94.5px"},onChange:x},{default:u(()=>[(n(),o(Ce,null,Ne(ge,(d,Se)=>i(be,{key:Se,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),i(y,{class:"mr-10"},{default:u(()=>[l.date_type==="2"?(n(),h(S,{key:0,style:{width:"200px"},shortcuts:ye,modelValue:m[2],"onUpdate:modelValue":e[2]||(e[2]=d=>m[2]=d),"value-format":"YYYY-MM",type:"month",editable:!1},null,8,["modelValue"])):w("",!0),l.date_type==="1"?(n(),h(S,{key:1,modelValue:m[1],"onUpdate:modelValue":e[3]||(e[3]=d=>m[1]=d),type:"year","value-format":"YYYY",style:{width:"200px"},editable:!1,shortcuts:he},null,8,["modelValue"])):w("",!0)]),_:1}),i(y,{class:"mr-10"},{default:u(()=>[i(V,{plain:"",onClick:x},{default:u(()=>e[4]||(e[4]=[p("搜索")])),_:1})]),_:1}),i(y,null,{default:u(()=>[i(V,{plain:"",onClick:we,loading:g.value},{default:u(()=>e[5]||(e[5]=[p("导出EXCEL")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"]),t("div",Ie,[t("ul",null,[t("li",ze,[e[7]||(e[7]=t("div",{class:"main-panel-item-title"},"商品支付金额",-1)),t("div",je,_(((Y=(D=a.value)==null?void 0:D.sales_data)==null?void 0:Y.product_payment)??0),1),t("div",Ge,[e[6]||(e[6]=p(" 环比： ")),t("span",null,_((N=(C=a.value)==null?void 0:C.sales_data)==null?void 0:N.product_payment_growth_rate)+"%",1),((M=(E=a.value)==null?void 0:E.sales_data)==null?void 0:M.product_payment_growth_rate.toString())!=="--"&&Number((O=(L=a.value)==null?void 0:L.sales_data)==null?void 0:O.product_payment_growth_rate)>0?(n(),o("i",He,"")):(n(),o("i",Je,""))])]),t("li",Pe,[e[9]||(e[9]=t("div",{class:"main-panel-item-title"},"商品退款金额",-1)),t("div",Xe,_(((U=(T=a.value)==null?void 0:T.sales_data)==null?void 0:U.product_refund)??0),1),t("div",Ke,[e[8]||(e[8]=p(" 环比： ")),t("span",null,_((F=(B=a.value)==null?void 0:B.sales_data)==null?void 0:F.product_refund_growth_rate)+"%",1),((A=(q=a.value)==null?void 0:q.sales_data)==null?void 0:A.product_refund_growth_rate.toString())!=="--"&&Number((z=(I=a.value)==null?void 0:I.sales_data)==null?void 0:z.product_refund_growth_rate)>0?(n(),o("i",Qe,"")):(n(),o("i",Re,""))])]),t("li",We,[e[11]||(e[11]=t("div",{class:"main-panel-item-title"},"营业额",-1)),t("div",Ze,_(((G=(j=a.value)==null?void 0:j.sales_data)==null?void 0:G.turnover)??0),1),t("div",$e,[e[10]||(e[10]=p(" 环比： ")),t("span",null,_((J=(H=a.value)==null?void 0:H.sales_data)==null?void 0:J.turnover_growth_rate)+"%",1),((X=(P=a.value)==null?void 0:P.sales_data)==null?void 0:X.turnover_growth_rate.toString())!=="--"&&Number((Q=(K=a.value)==null?void 0:K.sales_data)==null?void 0:Q.turnover_growth_rate)>0?(n(),o("i",et,"")):(n(),o("i",tt,""))])]),t("li",at,[e[13]||(e[13]=t("div",{class:"main-panel-item-title"},"充值金额",-1)),t("div",st,_(((W=(R=a.value)==null?void 0:R.sales_data)==null?void 0:W.recharge_amount)??0),1),t("div",nt,[e[12]||(e[12]=p(" 环比： ")),t("span",null,_(($=(Z=a.value)==null?void 0:Z.sales_data)==null?void 0:$.recharge_amount_growth_rate)+"%",1),((te=(ee=a.value)==null?void 0:ee.sales_data)==null?void 0:te.recharge_amount_growth_rate.toString())!=="--"&&Number((se=(ae=a.value)==null?void 0:ae.sales_data)==null?void 0:se.recharge_amount_growth_rate)>0?(n(),o("i",lt,"")):(n(),o("i",ot,""))])]),t("li",it,[e[15]||(e[15]=t("div",{class:"main-panel-item-title"},"余额支付金额",-1)),t("div",rt,_(((le=(ne=a.value)==null?void 0:ne.sales_data)==null?void 0:le.balance_payment)??0),1),t("div",dt,[e[14]||(e[14]=p(" 环比： ")),t("span",null,_((ie=(oe=a.value)==null?void 0:oe.sales_data)==null?void 0:ie.balance_payment_growth_rate)+"%",1),((de=(re=a.value)==null?void 0:re.sales_data)==null?void 0:de.balance_payment_growth_rate.toString())!=="--"&&Number((ue=(_e=a.value)==null?void 0:_e.sales_data)==null?void 0:ue.balance_payment_growth_rate)>0?(n(),o("i",_t,"")):(n(),o("i",ut,""))])])])])]),t("div",mt,[l.statistic_type==="1"?(n(),h(Le,{key:0})):w("",!0),l.statistic_type==="0"?(n(),h(Oe,{key:1})):w("",!0)])])])}}}),ht=Me(ct,[["__scopeId","data-v-2f1a2317"]]);export{ht as default};
