import{d as P,i as m,C as U,s as h,q as G,r as i,c as L,o as _,e as w,j as V,f as k,b as t,w as l,a0 as j,g as E,E as F,a1 as I,I as f}from"./index-CGYuOau0.js";import{a as M,u as O}from"./productGroup-D9PsniyG.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";import{S as T}from"./SelectProduct-Dqera5O0.js";/* empty css                                                                    *//* empty css                                                                              *//* empty css             */import"./time-ClyPenjC.js";import"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";import"./product-CxWf3yyB.js";import"./Pagination-yOfjsBuR.js";import"./SelectSku-DpuXlI1z.js";/* empty css                                                                  */import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";const z={class:"container"},A={class:"content_wrapper"},H={class:"lyecs-form-table"},pe=P({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(S,{expose:C,emit:x}){const p=x,s=S,u=m(!0),v=U().currentRoute.value.query,d=m(s.isDialog?s.act:String(v.act)),g=m(s.isDialog?s.id:Number(v.id)),B=d.value==="add"?"create":"update",b=h(),e=m({product_ids:[]}),N=async()=>{try{const a=await M(d.value,{id:g.value});Object.assign(e.value,a.item)}catch(a){f.error(a.message),p("close")}finally{u.value=!1}};G(()=>{console.log(d.value),d.value==="detail"?N():u.value=!1});const y=async()=>{await b.value.validate();try{p("update:confirmLoading",!0);const a=await O(B,{id:g.value,...e.value});p("submitCallback",a),f.success(a.message)}catch(a){f.error(a.message)}finally{p("update:confirmLoading",!1)}};return C({onFormSubmit:()=>{y()}}),(a,o)=>{const c=i("el-input"),n=i("el-form-item"),D=i("el-button"),R=i("el-form"),q=i("a-spin");return _(),L("div",z,[w("div",A,[w("div",H,[u.value?k("",!0):(_(),V(R,{key:0,ref_key:"formRef",ref:b,model:e.value,"label-width":"auto"},{default:l(()=>[t(n,{rules:[{required:!0,message:"分组名称不能为空!"}],label:"分组名称",prop:"product_group_name"},{default:l(()=>[t(c,{modelValue:e.value.product_group_name,"onUpdate:modelValue":o[0]||(o[0]=r=>e.value.product_group_name=r)},null,8,["modelValue"])]),_:1}),t(n,{label:"分组别名",prop:"product_group_sn"},{default:l(()=>[t(c,{modelValue:e.value.product_group_sn,"onUpdate:modelValue":o[1]||(o[1]=r=>e.value.product_group_sn=r)},null,8,["modelValue"])]),_:1}),t(n,{label:"分组描述",prop:"product_group_description"},{default:l(()=>[t(c,{modelValue:e.value.product_group_description,"onUpdate:modelValue":o[2]||(o[2]=r=>e.value.product_group_description=r),row:"2",type:"textarea"},null,8,["modelValue"])]),_:1}),t(n,{label:"分组商品",prop:"product_ids"},{default:l(()=>[u.value?k("",!0):(_(),V(E(T),{key:0,ids:e.value.product_ids,"onUpdate:ids":o[3]||(o[3]=r=>e.value.product_ids=r)},null,8,["ids"]))]),_:1}),j(t(n,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(D,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:y},{default:l(()=>o[4]||(o[4]=[F("提交")])),_:1},512)]),_:1},512),[[I,!s.isDialog]])]),_:1},8,["model"])),t(q,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{pe as default};
