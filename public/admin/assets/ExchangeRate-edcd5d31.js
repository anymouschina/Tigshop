import{d as U,j as p,E as T,s as $,I as k,x as j,K as g,r as s,o as S,c as z,e as v,k as F,w as t,b as e,f as H,H as n,$ as I,a0 as K,h as M}from"./index-7c2d2aef.js";import{a as O,c as A}from"./languagesList-188697d2.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import"./config-9548fa9b.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import"./region-e0d291a6.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import{_ as G}from"./SelectLocaleCode.vue_vue_type_script_setup_true_lang-bd55f330.js";import"./time-290942a2.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";import"./region-05802f67.js";import"./verbalAssociation-438da18f.js";const J={class:"container"},P={class:"content_wrapper"},Q={class:"lyecs-form-table"},W=v("div",{class:"extra"},"请选择关联语言，语言类型是由您自行添加的",-1),ge=U({__name:"ExchangeRate",props:{id:{type:Number,default:0},promotion_type:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(C,{expose:N,emit:q}){const d=q,u=C,f=p(!0),b=T().currentRoute.value.query,_=p(u.isDialog?u.act:String(b.act)),y=p(u.isDialog?u.id:Number(b.id)),B=_.value==="add"?"create":"update",V=$(),a=p({language:"",locale_code:"",is_enabled:0,is_default:0});k({page:1,size:9999,sort_field:"",sort_order:"",keyword:""}),j(()=>{_.value==="detail"?L():f.value=!1});const L=async()=>{try{const l=await O(_.value,{id:y.value});Object.assign(a.value,l.item)}catch(l){g.error(l.message),d("close")}finally{f.value=!1}},w=async()=>{await V.value.validate();try{d("update:confirmLoading",!0);const l=await A(B,{id:y.value,...a.value});d("submitCallback",l),g.success(l.message)}catch(l){g.error(l.message)}finally{d("update:confirmLoading",!1)}},R=()=>{w()},h=k({promotion_name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],send_type:[{required:!0,validator:(l,o,m)=>{if(!a.value.language&&!a.value.language){m(new Error("请输入用券时间"));return}m()},trigger:"blur"}]});return N({onFormSubmit:R}),(l,o)=>{const m=s("el-input"),i=s("el-form-item"),c=s("el-radio"),x=s("el-radio-group"),D=s("el-button"),E=s("el-form");return S(),z("div",J,[v("div",P,[v("div",Q,[f.value?M("",!0):(S(),F(E,{key:0,ref_key:"formRef",ref:V,rules:h,model:a.value,"label-width":"auto"},{default:t(()=>[e(i,{prop:"language",label:"语言名称：",rules:[{required:!0,message:"语言名称不能为空!"}]},{default:t(()=>[e(m,{type:"text",maxlength:"60",modelValue:a.value.language,"onUpdate:modelValue":o[0]||(o[0]=r=>a.value.language=r)},null,8,["modelValue"])]),_:1}),e(i,{prop:"locale_code",label:"语言识别码：",rules:[{required:!0,message:"请选择语言识别码!"}]},{default:t(()=>[e(H(G),{modelValue:a.value.locale_code,"onUpdate:modelValue":o[1]||(o[1]=r=>a.value.locale_code=r)},null,8,["modelValue"]),W]),_:1}),e(i,{prop:"is_enabled",label:"是否启用："},{default:t(()=>[e(x,{modelValue:a.value.is_enabled,"onUpdate:modelValue":o[2]||(o[2]=r=>a.value.is_enabled=r)},{default:t(()=>[e(c,{value:1},{default:t(()=>[n("是")]),_:1}),e(c,{value:0},{default:t(()=>[n("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(i,{prop:"is_default",label:"是否默认："},{default:t(()=>[e(x,{modelValue:a.value.is_default,"onUpdate:modelValue":o[3]||(o[3]=r=>a.value.is_default=r)},{default:t(()=>[e(c,{value:1},{default:t(()=>[n("是")]),_:1}),e(c,{value:0},{default:t(()=>[n("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),I(e(i,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[e(D,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:o[4]||(o[4]=r=>w())},{default:t(()=>[n("提交")]),_:1},512)]),_:1},512),[[K,!u.isDialog]])]),_:1},8,["rules","model"]))])])])}}});export{ge as default};
