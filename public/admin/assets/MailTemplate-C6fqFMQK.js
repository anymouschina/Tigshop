/* empty css             */import{y as I,d as L,i as r,s as j,p as F,q as M,c as _,e as f,b as o,w as n,I as v,r as s,o as i,f as B,F as E,a as R,j as U,g as q,E as z,_ as O}from"./index-DrbzVNl6.js";import{_ as $}from"./Editor.vue_vue_type_script_setup_true_lang-DYKF5akI.js";import{c as A}from"./format-CRgx78oe.js";import"./index.esm-bNAKkq0_.js";import"./index-CeQDmMxd.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const D=()=>I({url:"setting/mailTemplates/list",method:"get"}),G=g=>I({url:"setting/mailTemplates/update",method:"post",data:g}),H={class:"container"},J={class:"content_wrapper"},K={class:"lyecs-form-table"},P={key:0,class:"selected-action-warp"},Q={class:"selected-action",style:{"padding-left":"80px"}},W=L({__name:"MailTemplate",emits:["submitCallback","update:confirmLoading","close"],setup(g,{expose:h,emit:w}){const p=w,T=r(!1),u=r(!0),b=j(),t=r({templateName:"",templateId:""}),m=r([]),C=async()=>{var a;try{const e=await D();m.value=A(e),m.value&&((a=m.value)==null?void 0:a.length)>0&&(t.value.templateId=m.value[0].templateId)}catch(e){v.error(e.message)}finally{u.value=!1}};F(()=>t.value.templateId,a=>{const e=m.value.find(c=>c.templateId==a);e&&Object.assign(t.value,e)}),M(()=>{C()});const y=async()=>{await b.value.validate();try{p("update:confirmLoading",!0);const a=await G({id:t.value.templateId,...t.value});p("submitCallback",a),v.success("修改成功")}catch(a){v.error(a.message)}finally{p("update:confirmLoading",!1)}};return h({onFormSubmit:()=>{y()}}),(a,e)=>{const c=s("el-option"),V=s("el-select"),d=s("el-form-item"),k=s("TigInput"),S=s("el-form"),x=s("el-button"),N=s("a-spin");return i(),_("div",H,[f("div",J,[f("div",K,[o(N,{spinning:u.value},{default:n(()=>[o(S,{ref_key:"formRef",ref:b,model:t.value,"label-width":"auto"},{default:n(()=>[o(d,{label:"邮件模板",prop:"selTemplate"},{default:n(()=>[o(V,{modelValue:t.value.templateId,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.templateId=l),style:{width:"100%"}},{default:n(()=>[(i(!0),_(E,null,R(m.value,l=>(i(),U(c,{key:l.templateId,label:l.templateName,value:l.templateId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"邮件主题",prop:"templateSubject"},{default:n(()=>[o(k,{width:"100%",modelValue:t.value.templateSubject,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.templateSubject=l),type:"text"},null,8,["modelValue"])]),_:1}),o(d,{label:"邮件内容",prop:"templateContent"},{default:n(()=>[o(q($),{html:t.value.templateContent,"onUpdate:html":e[2]||(e[2]=l=>t.value.templateContent=l)},null,8,["html"])]),_:1})]),_:1},8,["model"]),u.value?B("",!0):(i(),_("div",P,[f("div",Q,[o(x,{loading:T.value,class:"form-submit-btn",size:"large",type:"primary",onClick:y},{default:n(()=>e[3]||(e[3]=[z("提 交")])),_:1},8,["loading"])])]))]),_:1},8,["spinning"])])])])}}}),ne=O(W,[["__scopeId","data-v-43c28d87"]]);export{ne as default};
