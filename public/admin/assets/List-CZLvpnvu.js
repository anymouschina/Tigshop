/* empty css             */import{d as E,i as c,G as F,q as j,c as g,e as a,f as p,b as s,w as l,g as r,I as G,r as m,o as _,E as n,D as b,j as C,K as y,_ as K}from"./index-CGYuOau0.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";import{u as R}from"./config-DNllFJyR.js";import{_ as S}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as W}from"./Pagination-yOfjsBuR.js";/* empty css                                                                  *//* empty css                                                                              */import{S as J}from"./SelectTimeInterval-BYQIPzkk.js";import{f as u}from"./time-ClyPenjC.js";import{g as Q,u as I,d as X}from"./material-DYUiyv0A.js";import{_ as Z}from"./selectCategory.vue_vue_type_script_setup_true_lang-CsSgBdcE.js";import{_ as U}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";import"./category-COJmNN7y.js";const tt={class:"container"},et={class:"content_wrapper"},at={class:"lyecs-table-list-warp"},st={class:"list-table-tool lyecs-search-warp"},lt={class:"advanced-search-warp list-table-tool-row"},ot={class:"simple-form-warp"},it={class:"simple-form-field"},nt={class:"form-group"},dt={class:"control-container"},rt={class:"simple-form-field"},mt={class:"form-group"},_t={class:"control-container flex flex-align-center"},pt={style:{"margin-left":"10px"}},ut={class:"simple-form-field"},ft={class:"advanced-search-warp list-table-tool-row"},ct={class:"simple-form-warp"},vt={class:"simple-form-field"},gt={class:"table-container"},bt={class:"tit-row flex flex-align-center"},yt={key:0,class:"label"},Yt={class:"txt"},Dt={class:"empty-warp"},kt={key:0,class:"empty-bg"},Mt={key:0,class:"pagination-con"},Ct={key:0,class:"selected-action-warp"},Ht={class:"selected-action"},xt=E({__name:"List",setup(wt){const $=R(),A=c([]),Y=c(!0),D=c(0);c(0);const H=c([]),o=F({page:1,size:$.pageSize,sort_field:"",sort_order:"",category_id:"",end_time:"",start_time:""}),x=c(-1),z=i=>{if(i===-1){x.value=i;return}o.start_time=u(new Date,"YYYY-MM-DD HH:mm:ss"),i===0&&(o.end_time=u(new Date,"YYYY-MM-DD HH:mm:ss")),i===1&&(o.start_time=u(y(1,"sub"),"YYYY-MM-DD HH:mm:ss"),o.end_time=u(y(1,"sub"),"YYYY-MM-DD HH:mm:ss")),i===2&&(o.end_time=u(y(7,"add"),"YYYY-MM-DD HH:mm:ss")),i===3&&(o.end_time=u(y(30,"add"),"YYYY-MM-DD HH:mm:ss")),i===4&&(o.end_time=u(y(180,"add"),"YYYY-MM-DD HH:mm:ss")),d()},d=async()=>{Y.value=!0;try{const i=await Q({...o});A.value=i.filter_result,D.value=i.total}catch(i){G.error(i.message)}finally{Y.value=!1}};j(()=>{d()});const q=()=>{d()},B=()=>{o.status=-1,o.title="",o.end_time="",o.start_time="",d()},N=({prop:i,order:t})=>{o.sort_field=i,o.sort_order=t=="ascending"?"asc":t=="descending"?"desc":"",d()},L=i=>{H.value=i.map(t=>t.id)};return(i,t)=>{const k=m("el-radio-button"),O=m("el-radio-group"),f=m("el-button"),P=m("el-form"),M=m("el-table-column"),w=m("el-divider"),V=m("el-space"),T=m("el-table"),h=m("a-spin");return _(),g("div",tt,[a("div",et,[a("div",at,[a("div",st,[s(P,{model:o,name:"form"},{default:l(()=>[a("div",lt,[a("div",ot,[a("div",it,[a("div",nt,[t[7]||(t[7]=a("label",{class:"control-label"},[a("span",null,"素材分类：")],-1)),a("div",dt,[s(Z,{category_id:o.category_id,"onUpdate:category_id":t[0]||(t[0]=e=>o.category_id=e),onOnChange:q},null,8,["category_id"])])])]),a("div",rt,[a("div",mt,[t[12]||(t[12]=a("label",{class:"control-label"},[a("span",null,"推送时间：")],-1)),a("div",_t,[s(r(J),{"start-date":o.start_time,"onUpdate:startDate":t[1]||(t[1]=e=>o.start_time=e),"end-date":o.end_time,"onUpdate:endDate":t[2]||(t[2]=e=>o.end_time=e),"value-format":"YYYY-MM-DD HH:mm:ss",onCallback:t[3]||(t[3]=e=>z(-1))},null,8,["start-date","end-date"]),a("div",pt,[s(O,{class:"itemWidth",modelValue:x.value,"onUpdate:modelValue":t[4]||(t[4]=e=>x.value=e),onChange:z},{default:l(()=>[s(k,{value:0},{default:l(()=>t[8]||(t[8]=[n("今天")])),_:1}),s(k,{value:1},{default:l(()=>t[9]||(t[9]=[n("昨天")])),_:1}),s(k,{value:2},{default:l(()=>t[10]||(t[10]=[n("近7天")])),_:1}),s(k,{value:3},{default:l(()=>t[11]||(t[11]=[n("近30天")])),_:1})]),_:1},8,["modelValue"])])])])]),a("div",ut,[s(f,{type:"primary",onClick:q},{default:l(()=>t[13]||(t[13]=[n("搜索")])),_:1})])])]),a("div",ft,[a("div",ct,[a("div",vt,[s(r(U),{isDrawer:"",onOkCallback:d,title:"添加素材",width:"700px",path:"salesman/material/Info",params:{act:"add"}},{default:l(()=>[s(f,{type:"primary"},{default:l(()=>t[14]||(t[14]=[n("立即新建")])),_:1})]),_:1}),s(f,{class:"ml10",onClick:B},{default:l(()=>t[15]||(t[15]=[n("清空筛选条件")])),_:1})])])])]),_:1},8,["model"])]),a("div",gt,[s(h,{spinning:Y.value},{default:l(()=>[s(T,{data:A.value,total:D.value,"row-key":"id",onSelectionChange:L,onSortChange:N},{empty:l(()=>[a("div",Dt,[Y.value?p("",!0):(_(),g("div",kt,"暂无数据"))])]),default:l(()=>[s(M,{label:"素材内容",prop:"content",fixed:"left"},{default:l(({row:e})=>[a("div",bt,[e.is_top!=0?(_(),g("div",yt,"置顶")):p("",!0),a("div",Yt,b(e.content||"--"),1)])]),_:1}),s(M,{label:"相关商品",width:200},{default:l(({row:e})=>{var v;return[n(b(((v=e.product)==null?void 0:v.product_name)||"--"),1)]}),_:1}),s(M,{label:"分类",width:160},{default:l(({row:e})=>{var v;return[n(b(((v=e.category)==null?void 0:v.category_name)||"--"),1)]}),_:1}),s(M,{width:200,fixed:"right",label:"操作"},{default:l(({row:e})=>[s(V,{size:0},{default:l(()=>[e.is_top!=0?(_(),C(r(S),{key:0,onAfterDelete:d,requestApi:r(I),params:{id:e.id,field:"is_top",val:0},title:"确定取消置顶吗？"},{default:l(()=>t[16]||(t[16]=[n("取消置顶")])),_:2},1032,["requestApi","params"])):p("",!0),e.is_top!=0?(_(),C(w,{key:1,direction:"vertical"})):p("",!0),s(r(U),{params:{act:"detail",id:e.id},isDrawer:"",path:"salesman/material/Info",title:"编辑素材",width:"700px",onOkCallback:d},{default:l(()=>t[17]||(t[17]=[a("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),s(w,{direction:"vertical"}),s(r(S),{onAfterDelete:d,requestApi:r(I),params:{id:e.id,field:"is_available",val:e.is_available==1?0:1},title:`确认${e.is_available==1?"失效":"恢复"}？`},{default:l(()=>[n(b(e.is_available==1?"失效":"恢复"),1)]),_:2},1032,["requestApi","params","title"]),e.is_available!==1?(_(),C(w,{key:2,direction:"vertical"})):p("",!0),e.is_available!==1?(_(),C(r(S),{key:3,onAfterDelete:d,requestApi:r(X),params:{id:e.id}},{default:l(()=>t[18]||(t[18]=[n("删除")])),_:2},1032,["requestApi","params"])):p("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),D.value>0?(_(),g("div",Mt,[s(r(W),{page:o.page,"onUpdate:page":t[5]||(t[5]=e=>o.page=e),size:o.size,"onUpdate:size":t[6]||(t[6]=e=>o.size=e),total:D.value,onCallback:d},null,8,["page","size","total"])])):p("",!0)]),H.value.length>0?(_(),g("div",Ct,[a("div",Ht,[s(V,null,{default:l(()=>[a("span",null,[t[19]||(t[19]=n("已选择：")),a("b",null,b(H.value.length),1),t[20]||(t[20]=n(" 项"))]),s(f,null,{default:l(()=>t[21]||(t[21]=[n("设置等级")])),_:1}),s(f,null,{default:l(()=>t[22]||(t[22]=[n("分组")])),_:1}),s(f,null,{default:l(()=>t[23]||(t[23]=[n("清退")])),_:1})]),_:1})])])):p("",!0)])])])}}}),jt=K(xt,[["__scopeId","data-v-ce2271ac"]]);export{jt as default};
