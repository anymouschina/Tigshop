import{d as E,i as p,C as I,s as R,q as P,I as f,r as i,c as L,o as S,e as w,j as O,f as j,w as l,b as t,a0 as F,g as J,E as n,a1 as M}from"./index-CGYuOau0.js";import{a as T,c as h}from"./pointsExchange-Sba1zWQ3.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";import{S as z}from"./SelectProduct-Dqera5O0.js";/* empty css                                                                    *//* empty css                                                                              *//* empty css             */import"./time-ClyPenjC.js";import"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";import"./product-CxWf3yyB.js";import"./Pagination-yOfjsBuR.js";import"./SelectSku-DpuXlI1z.js";/* empty css                                                                  */import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";const A={class:"container"},G={class:"content_wrapper"},H={class:"lyecs-form-table"},me=E({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:C,emit:N}){const d=N,u=x,_=p(!0),v=I().currentRoute.value.query,c=p(u.isDialog?u.act:String(v.act)),g=p(u.isDialog?u.id:Number(v.id)),B=c.value==="add"?"create":"update",b=R(),o=p({product_id:"",sku_id:"",is_enabled:1,is_hot:0});P(()=>{c.value==="detail"?U():_.value=!1});const U=async()=>{try{const a=await T(c.value,{id:g.value});a.item.product_id&&(a.item.product_id=[a.item.product_id]),Object.assign(o.value,a.item)}catch(a){f.error(a.message),d("close")}finally{_.value=!1}},y=async()=>{await b.value.validate();try{d("update:confirmLoading",!0);let a=JSON.parse(JSON.stringify(o.value));if(a.product_id)a.product_id=a.product_id[0];else{f.error("请选择商品!");return}const e=await h(B,{id:g.value,...a});d("submitCallback",e),f.success(e.message)}catch(a){f.error(a.message)}finally{d("update:confirmLoading",!1)}};return C({onFormSubmit:()=>{y()}}),(a,e)=>{const r=i("el-form-item"),V=i("el-input"),m=i("el-radio"),k=i("el-radio-group"),q=i("el-button"),D=i("el-form");return S(),L("div",A,[w("div",G,[w("div",H,[_.value?j("",!0):(S(),O(D,{key:0,ref_key:"formRef",ref:b,model:o.value,"label-width":"auto"},{default:l(()=>[t(r,{prop:"product_id",label:"选择商品"},{default:l(()=>[t(J(z),{isSku:!0,isMultiple:!1,ids:o.value.product_id,"onUpdate:ids":e[0]||(e[0]=s=>o.value.product_id=s),skuId:o.value.sku_id,"onUpdate:skuId":e[1]||(e[1]=s=>o.value.sku_id=s),is_self:1},null,8,["ids","skuId"])]),_:1}),t(r,{prop:"exchange_integral",label:"兑换积分",rules:[{required:!0,message:"兑换积分不能为空!"}]},{default:l(()=>[t(V,{type:"number",modelValue:o.value.exchange_integral,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.exchange_integral=s)},null,8,["modelValue"])]),_:1}),t(r,{prop:"points_deducted_amount",label:"减免金额",rules:[{required:!0,message:"减免金额不能为空!"}]},{default:l(()=>[t(V,{type:"number",modelValue:o.value.points_deducted_amount,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.points_deducted_amount=s)},null,8,["modelValue"])]),_:1}),t(r,{prop:"is_enabled",label:"兑换"},{default:l(()=>[t(k,{modelValue:o.value.is_enabled,"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.is_enabled=s)},{default:l(()=>[t(m,{value:1},{default:l(()=>e[6]||(e[6]=[n("是")])),_:1}),t(m,{value:0},{default:l(()=>e[7]||(e[7]=[n("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(r,{prop:"is_hot",label:"是否热销"},{default:l(()=>[t(k,{modelValue:o.value.is_hot,"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.is_hot=s)},{default:l(()=>[t(m,{value:1},{default:l(()=>e[8]||(e[8]=[n("是")])),_:1}),t(m,{value:0},{default:l(()=>e[9]||(e[9]=[n("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),F(t(r,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(q,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:y},{default:l(()=>e[10]||(e[10]=[n("提交")])),_:1},512)]),_:1},512),[[M,!u.isDialog]])]),_:1},8,["model"]))])])])}}});export{me as default};
