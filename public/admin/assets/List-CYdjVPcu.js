/* empty css             */import"./index-B-GURfkM.js";import{P as j}from"./PopFormElm-DSof3F4x.js";import{_ as G}from"./Switch.vue_vue_type_script_setup_true_lang-CKSPWIQL.js";import{_ as M}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as T}from"./Pagination-yOfjsBuR.js";import{u as H}from"./config-DNllFJyR.js";import{u as V,d as J,g as K,a as Q,b as R}from"./productActivity-BpQYPQbl.js";import{_ as w}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import{d as W,i as b,G as X,q as Y,r,c as g,o as u,e,b as o,E as l,w as a,g as d,f as h,F as Z,a as tt,j as et,D as m,I as C}from"./index-CGYuOau0.js";import"./config-DU8_t5BN.js";const ot={class:"container"},st={class:"content_wrapper"},at={class:"bonus-wrap"},lt={class:"card-wrap"},it={class:"card-wrap__container"},nt={class:"item-bg coupon-cards-item"},rt={class:"item-bg coupon-cards-item"},dt={class:"item-bg coupon-cards-item item-bg2"},pt={class:"lyecs-table-list-warp"},ct={class:"list-table-tool lyecs-search-warp"},ut={class:"advanced-search-warp list-table-tool-row"},mt={class:"simple-form-warp"},_t={class:"simple-form-field"},vt={class:"form-group"},ft={class:"control-container"},bt={class:"simple-form-field"},gt={class:"form-group"},yt={class:"control-container"},kt={class:"simple-form-field"},wt={class:"table-container"},ht={style:{position:"relative"}},Ct={class:"order-tips-p"},At={class:"green"},xt={class:"empty-warp"},Vt={key:0,class:"empty-bg"},St={key:0,class:"pagination-con"},Pt={key:0,class:"selected-action-warp"},Ut={class:"selected-action"},Mt=W({__name:"List",setup(qt){const S=H(),A=b(),_=b(!0),y=b(0),k=b([]),i=X({page:1,size:S.get("page_size"),sort_field:"",sort_order:"",keyword:""}),x=b([]),p=async()=>{_.value=!0;try{const n=await K({...i});A.value=n.filter_result,y.value=n.total;const t=await Q();x.value=t.promotion_status}catch(n){C.error(n.message)}finally{_.value=!1}};Y(()=>{p()});const P=()=>{p()},U=({prop:n,order:t})=>{i.sort_field=n,i.sort_order=t=="ascending"?"asc":t=="descending"?"desc":"",p()},q=async n=>{try{const t=await R(n,{ids:k.value});C.success(t.message),p()}catch(t){C.error(t.message)}},z=n=>{k.value=n.map(t=>t.promotion_id)};return(n,t)=>{const v=r("el-button"),D=r("el-input"),I=r("el-option"),B=r("el-select"),F=r("el-form"),c=r("el-table-column"),N=r("el-divider"),O=r("el-table"),$=r("a-spin"),L=r("el-popconfirm"),E=r("el-space");return u(),g("div",ot,[e("div",st,[e("div",at,[t[11]||(t[11]=e("p",{class:"subtitle"},"按优惠方式快速创建",-1)),e("div",lt,[e("div",it,[e("div",nt,[t[6]||(t[6]=e("div",null,[e("div",{class:"title"},"满减"),e("div",{class:"desc"},[e("p",null,[l("例：100元减20元"),e("br"),l("便于合理控制活动成本")])])],-1)),o(d(w),{isDrawer:"",onOkCallback:p,title:"添加减免优惠活动",width:"800px",path:"promotion/productActivity/Info",params:{act:"add",promotion_type:1}},{default:a(()=>[o(v,{type:"primary"},{default:a(()=>t[5]||(t[5]=[l("立即新建")])),_:1})]),_:1})]),e("div",rt,[t[8]||(t[8]=e("div",null,[e("div",{class:"title"},"折扣"),e("div",{class:"desc"},[e("p",null,[l("例：100元打9折"),e("br"),l("提高店铺销量和客单价")])])],-1)),o(d(w),{isDrawer:"",onOkCallback:p,title:"添加折扣优惠活动",width:"800px",path:"promotion/productActivity/Info",params:{act:"add",promotion_type:2}},{default:a(()=>[o(v,{type:"primary"},{default:a(()=>t[7]||(t[7]=[l("立即新建")])),_:1})]),_:1})]),e("div",dt,[t[10]||(t[10]=e("div",null,[e("div",{class:"title"},"赠品"),e("div",{class:"desc"},[e("p",null,[l("据会员等级可领的赠品，丰富会"),e("br"),l("员权益，凸显会员身份价值")])])],-1)),o(d(w),{isDrawer:"",onOkCallback:p,title:"添加赠品优惠活动",width:"800px",path:"promotion/productActivity/Info",params:{act:"add",promotion_type:0}},{default:a(()=>[o(v,{type:"primary"},{default:a(()=>t[9]||(t[9]=[l("立即新建")])),_:1})]),_:1})])])])]),e("div",pt,[e("div",ct,[o(F,{model:i},{default:a(()=>[e("div",ut,[e("div",mt,[e("div",_t,[e("div",vt,[t[12]||(t[12]=e("label",{class:"control-label"},[e("span",null,"活动名称：")],-1)),e("div",ft,[o(D,{name:"keyword",modelValue:i.keyword,"onUpdate:modelValue":t[0]||(t[0]=s=>i.keyword=s),placeholder:"输入活动名称"},null,8,["modelValue"])])])]),e("div",bt,[e("div",gt,[t[13]||(t[13]=e("label",{class:"control-label"},[e("span",null,"是否显示：")],-1)),e("div",yt,[o(B,{modelValue:i.is_going,"onUpdate:modelValue":t[1]||(t[1]=s=>i.is_going=s),clearable:""},{default:a(()=>[(u(!0),g(Z,null,tt(x.value,(s,f)=>(u(),et(I,{value:f+1,label:s},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])])])]),e("div",kt,[o(v,{type:"primary",onClick:P},{default:a(()=>t[14]||(t[14]=[l("搜索")])),_:1})])])])]),_:1},8,["model"])]),e("div",wt,[o($,{spinning:_.value},{default:a(()=>[o(O,{data:A.value,"row-key":"coupon_id",onSelectionChange:z,total:y.value,onSortChange:U,loading:_.value},{empty:a(()=>[e("div",xt,[_.value?h("",!0):(u(),g("div",Vt,"暂无数据"))])]),default:a(()=>[o(c,{type:"selection",width:"32"}),o(c,{label:"活动名称",prop:"promotion_name",width:150},{default:a(({row:s})=>[e("div",ht,[e("div",null,m(s.promotion_name||"--"),1)]),e("p",Ct,[e("span",At,m(s.promotion_type==1?"减免":s.promotion_type==2?"折扣":"赠品"),1)])]),_:1}),o(c,{label:"起始日期",prop:"start_time",width:"150",sortable:"custom"}),o(c,{label:"截止日期",prop:"end_time",width:"150",sortable:"custom"}),o(c,{label:"金额下限",prop:"min_order_amount",sortable:"custom"},{default:a(({row:s})=>[e("div",null,m(s.min_order_amount),1)]),_:1}),o(c,{label:"金额上限",prop:"max_order_amount",sortable:"custom"},{default:a(({row:s})=>[e("div",null,m(s.max_order_amount),1)]),_:1}),o(c,{label:"排序",prop:"sort_order",sortable:"custom"},{default:a(({row:s})=>[o(d(j),{label:"排序",type:"input",requestApi:d(V),"org-value":s.sort_order,"onUpdate:orgValue":f=>s.sort_order=f,params:{id:s.promotion_id,field:"sort_order"},extra:"默认值为50，数值越小，排序越靠前"},{default:a(()=>[e("div",null,m(s.sort_order),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])]),_:1}),o(c,{label:"状态",prop:"product_status"}),o(c,{label:"是否启用",prop:"is_show",sortable:"custom"},{default:a(({row:s})=>[o(d(G),{checked:s.is_available,"onUpdate:checked":f=>s.is_available=f,requestApi:d(V),params:{id:s.promotion_id,field:"is_available"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),o(c,{label:"操作",fixed:"right"},{default:a(({row:s})=>[o(d(w),{isDrawer:"",onOkCallback:p,title:"编辑优惠活动",width:"800px",path:"promotion/productActivity/Info",params:{act:"detail",id:s.promotion_id}},{default:a(()=>t[15]||(t[15]=[e("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(N,{direction:"vertical"}),o(d(M),{onAfterDelete:p,requestApi:d(J),params:{id:s.promotion_id}},{default:a(()=>t[16]||(t[16]=[l("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),y.value>0?(u(),g("div",St,[o(d(T),{page:i.page,"onUpdate:page":t[2]||(t[2]=s=>i.page=s),size:i.size,"onUpdate:size":t[3]||(t[3]=s=>i.size=s),total:y.value,onCallback:p},null,8,["page","size","total"])])):h("",!0)]),k.value.length>0?(u(),g("div",Pt,[e("div",Ut,[o(E,null,{default:a(()=>[e("span",null,[t[17]||(t[17]=l("已选择：")),e("b",null,m(k.value.length),1),t[18]||(t[18]=l(" 项"))]),o(L,{title:"您确认要批量删除所选数据吗？",onConfirm:t[4]||(t[4]=s=>q("del"))},{reference:a(()=>[o(v,null,{default:a(()=>t[19]||(t[19]=[l("批量删除")])),_:1})]),_:1})]),_:1})])])):h("",!0)])])])}}});export{Mt as default};
