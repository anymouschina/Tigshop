import{d as L,i as m,C as U,s as j,q as E,I as c,r as u,c as F,o as v,e as C,j as D,f as k,w as o,b as a,a3 as M,E as y,a4 as O}from"./index-DrbzVNl6.js";import{c as $,e as z}from"./currencyManagement-ChS-Zs2m.js";const A={class:"container"},G={class:"content_wrapper"},H={class:"lyecs-form-table"},Q=L({__name:"Info",props:{id:{type:Number,default:0},promotionType:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:N,emit:S}){const i=S,r=x,d=m(!0),_=U().currentRoute.value.query,p=m(r.isDialog?r.act:String(_.act)),b=m(r.isDialog?r.id:Number(_.id)),T=p.value==="add"?"create":"update",g=j(),t=m({name:"",symbol:"",isDefault:0,localesId:""});E(()=>{p.value==="detail"?B():d.value=!1});const B=async()=>{try{const l=await $(p.value,{id:b.value});Object.assign(t.value,l)}catch(l){c.error(l.message),i("close")}finally{d.value=!1}},V=async()=>{await g.value.validate();try{i("update:confirmLoading",!0);const l=await z(T,{id:b.value,...t.value});i("submitCallback",l),c.success("操作成功")}catch(l){c.error(l.message)}finally{i("update:confirmLoading",!1)}};return N({onFormSubmit:()=>{V()}}),(l,e)=>{const f=u("TigInput"),n=u("el-form-item"),w=u("el-radio"),q=u("el-radio-group"),I=u("el-button"),R=u("el-form");return v(),F("div",A,[C("div",G,[C("div",H,[d.value?k("",!0):(v(),D(R,{key:0,ref_key:"formRef",ref:g,model:t.value,"label-width":"auto"},{default:o(()=>[a(n,{prop:"name",label:"货币名称：",rules:[{required:!0,message:"货币名称不能为空!"}]},{default:o(()=>[a(f,{classType:"tig-form-input",type:"text",modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.name=s)},null,8,["modelValue"])]),_:1}),a(n,{prop:"symbol",label:"币种符号：",rules:[{required:!0,message:"币种符号不能为空!"}]},{default:o(()=>[a(f,{classType:"tig-form-input",type:"text",modelValue:t.value.symbol,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.symbol=s)},null,8,["modelValue"])]),_:1}),t.value.isDefault===0?(v(),D(n,{key:0,prop:"rate",label:"汇率："},{default:o(()=>[a(f,{classType:"tig-form-input",type:"decimal",modelValue:t.value.rate,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.rate=s)},null,8,["modelValue"])]),_:1})):k("",!0),a(n,{prop:"isDefault",label:"是否默认："},{default:o(()=>[a(q,{modelValue:t.value.isDefault,"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.isDefault=s)},{default:o(()=>[a(w,{value:1},{default:o(()=>e[5]||(e[5]=[y("是")])),_:1}),a(w,{value:0},{default:o(()=>e[6]||(e[6]=[y("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),M(a(n,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[a(I,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[4]||(e[4]=s=>V())},{default:o(()=>e[7]||(e[7]=[y("提交")])),_:1},512)]),_:1},512),[[O,!r.isDialog]])]),_:1},8,["model"]))])])])}}});export{Q as default};
