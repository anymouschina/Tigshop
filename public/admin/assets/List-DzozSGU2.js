import{d as B,K as D,i as b,G as P,C as q,q as K,c as l,e as t,b as n,w as r,f as d,g,I as j,r as c,o as a,M as E,F as I,a as N,j as v,E as S,D as i,n as M,_ as $}from"./index-DrbzVNl6.js";/* empty css             */import{S as G}from"./SortButton-DoQNSDum.js";import"./index-CeQDmMxd.js";/* empty css                                                                    */import{P as H}from"./Pagination-wR9huHyl.js";import{P as J}from"./ProductCard-DkH9tOY5.js";import{g as Q,a as W,b as X}from"./aftersales-0KSvwj7B.js";import{p as Y}from"./format-CRgx78oe.js";import{_ as F}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const Z={class:"container"},ss={class:"content_wrapper"},ts={class:"lyecs-table-list-warp"},es={class:"list-table-tool lyecs-search-warp"},as={class:"advanced-search-warp list-table-tool-row"},os={class:"simple-form-warp"},ls={class:"simple-form-field"},ns={class:"form-group"},rs={class:"control-container"},ds={class:"simple-form-field"},is={class:"form-group"},us={class:"control-container"},ps={class:"simple-form-field"},cs={class:"form-group"},_s={class:"control-container"},fs={class:"simple-form-field"},ms={class:"table-container"},vs={class:"custom-table"},ys={class:"custom-table"},bs={class:"data-tr"},gs={colspan:"4"},hs={class:"check-box"},ws={class:"check-box"},ks={class:"check-box"},Cs={key:1,class:"check-box"},Is={key:3,class:"check-box"},Ns={class:"displayRow flex-justify-between"},Ss={class:"displayColumn textR whiteSN widthAuto"},xs={class:"red ml10"},Ts=["rowspan"],Vs=["rowspan"],Os=["rowspan"],zs=["rowspan"],Fs={key:0,class:"empty-warp"},Ls={key:0,class:"empty-bg"},Us={key:0,class:"pagination-con"},Rs=B({__name:"List",setup(As){const L=D(),x=b([]),y=b(!0),h=b(0),o=P({page:1,size:L.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),T=b({}),V=b({}),_=q().currentRoute.value.query,f=async()=>{y.value=!0;try{const w=await Q();V.value=w;const e=await W();T.value=e;const p=await X({...o});x.value=p.records,h.value=p.total,_&&_.status&&(o.status=_.status)}catch(w){j.error(w.message)}finally{y.value=!1}};K(()=>{_&&_.status&&(o.status=Number(_.status)),f()});const m=()=>{f()};return(w,e)=>{const p=c("el-button"),U=c("TigInput"),O=c("el-option"),z=c("el-select"),R=c("el-form"),k=c("el-divider"),A=c("a-spin");return a(),l("div",Z,[t("div",ss,[t("div",ts,[t("div",es,[n(R,{model:o},{default:r(()=>[t("div",as,[t("div",os,[t("div",ls,[t("div",ns,[t("div",rs,[n(U,{modelValue:o.keyword,"onUpdate:modelValue":e[0]||(e[0]=s=>o.keyword=s),name:"keyword",placeholder:"订单号",onKeyup:E(m,["enter"]),clearable:"",onClear:m},{append:r(()=>[n(p,{onClick:m},{default:r(()=>e[8]||(e[8]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",ds,[t("div",is,[e[9]||(e[9]=t("label",{class:"control-label"},[t("span",null,"申请类型：")],-1)),t("div",us,[n(z,{modelValue:o.aftersaleType,"onUpdate:modelValue":e[1]||(e[1]=s=>o.aftersaleType=s),clearable:"",onChange:m},{default:r(()=>[(a(!0),l(I,null,N(V.value,(s,u)=>(a(),v(O,{value:u,label:s},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])])])]),t("div",ps,[t("div",cs,[e[10]||(e[10]=t("label",{class:"control-label"},[t("span",null,"退换货状态：")],-1)),t("div",_s,[n(z,{modelValue:o.status,"onUpdate:modelValue":e[2]||(e[2]=s=>o.status=s),clearable:"",onChange:m},{default:r(()=>[(a(!0),l(I,null,N(T.value,(s,u)=>(a(),v(O,{value:u,label:s},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])])])]),t("div",fs,[n(p,{type:"primary",onClick:m},{default:r(()=>e[11]||(e[11]=[S("搜索")])),_:1})])])])]),_:1},8,["model"])]),t("div",ms,[n(A,{spinning:y.value},{default:r(()=>[t("table",vs,[t("thead",null,[t("tr",null,[t("th",null,[n(G,{sortField:o.sortField,"onUpdate:sortField":e[3]||(e[3]=s=>o.sortField=s),sortOrder:o.sortOrder,"onUpdate:sortOrder":e[4]||(e[4]=s=>o.sortOrder=s),sortName:"orderId",text:"退换货商品",onLoadData:e[5]||(e[5]=s=>f())},null,8,["sortField","sortOrder"])]),e[12]||(e[12]=t("th",null,"售后原因",-1)),e[13]||(e[13]=t("th",null,"服务类型",-1)),e[14]||(e[14]=t("th",null,"售后状态",-1)),e[15]||(e[15]=t("th",null,"操作",-1))])])]),(a(!0),l(I,null,N(x.value,s=>(a(),l("table",ys,[t("thead",null,[t("tr",bs,[t("th",gs,[t("span",hs,"订单编号："+i(s.orderSn),1),n(k,{direction:"vertical"}),t("span",ws,"售后编号："+i(s.aftersalesSn),1),n(k,{direction:"vertical"}),t("span",ks,"申请时间："+i(s.addTime),1),s.shippingTime?(a(),v(k,{key:0,direction:"vertical"})):d("",!0),s.userName?(a(),l("span",Cs,"发货时间："+i(s.shippingTime),1)):d("",!0),s.userName?(a(),v(k,{key:2,direction:"vertical"})):d("",!0),s.userName?(a(),l("span",Is,"申请人："+i(s.userName),1)):d("",!0)])])]),t("tbody",null,[(a(!0),l(I,null,N(s.aftersalesItems,(u,C)=>(a(),l("tr",null,[t("td",null,[t("div",Ns,[n(g(J),{picThumb:u.picThumb,productId:u.productId,productName:u.productName},null,8,["picThumb","productId","productName"]),t("div",Ss,[t("div",null,i(g(Y)(u.price)),1),t("div",null,[S(" × "+i(u.quantity),1),t("span",xs,"(退货数量："+i(u.number)+")",1)]),e[16]||(e[16]=t("div",null,null,-1))])])]),C==0?(a(),l("td",{key:0,rowspan:s.aftersalesItems.length},[t("p",null,i(s.aftersaleReason||"-"),1)],8,Ts)):d("",!0),C==0?(a(),l("td",{key:1,rowspan:s.aftersalesItems.length},[t("span",null,i(s.aftersalesTypeName),1)],8,Vs)):d("",!0),C==0?(a(),l("td",{key:2,rowspan:s.aftersalesItems.length},[t("span",{class:M({orange:s.status===0,black:s.status===1||s.status===2||s.status===4,gray:s.status===3,green:s.status===5})},i(s.statusName),3)],8,Os)):d("",!0),C==0?(a(),l("td",{key:3,rowspan:s.aftersalesItems.length},[s.status===5||s.status===6||s.status===7?(a(),v(g(F),{key:0,params:{act:"detail",id:s.aftersaleId},isDrawer:"",path:"order/aftersales/Info",title:"售后详情 "+s.aftersalesSn,width:"800px",onOkCallback:f,showClose:!1,showOnOk:!1},{default:r(()=>[n(p,{size:"small",text:"",type:"primary"},{default:r(()=>e[17]||(e[17]=[S(" 售后详情 ")])),_:1})]),_:2},1032,["params","title"])):(a(),v(g(F),{key:1,params:{act:"detail",id:s.aftersaleId},isDrawer:"",path:"order/aftersales/Info",title:"处理售后申请 "+s.aftersalesSn,width:"800px",onOkCallback:f,showClose:!1,showOnOk:!1},{default:r(()=>[n(p,{size:"small",text:"",type:"danger"},{default:r(()=>e[18]||(e[18]=[S(" 处理退款 ")])),_:1})]),_:2},1032,["params","title"]))],8,zs)):d("",!0)]))),256))])]))),256)),y.value||h.value==0?(a(),l("div",Fs,[y.value?d("",!0):(a(),l("div",Ls,"暂无数据"))])):d("",!0)]),_:1},8,["spinning"]),h.value>0?(a(),l("div",Us,[n(g(H),{page:o.page,"onUpdate:page":e[6]||(e[6]=s=>o.page=s),size:o.size,"onUpdate:size":e[7]||(e[7]=s=>o.size=s),total:h.value,onCallback:f},null,8,["page","size","total"])])):d("",!0)])])])])}}}),Hs=$(Rs,[["__scopeId","data-v-6ee6da7d"]]);export{Hs as default};
