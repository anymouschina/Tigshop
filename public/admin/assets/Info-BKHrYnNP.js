import{d as N,i as d,C as R,s as D,q as L,r as s,c as j,o as n,e as u,j as p,f,b as l,w as t,D as b,E,I as y}from"./index-DrbzVNl6.js";import{a as F,u as P}from"./enquiry-TjKnwH1U.js";const U={class:"container"},M={class:"content_wrapper"},O={class:"lyecs-form-table"},H=N({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(C,{expose:h,emit:B}){const i=B,m=C,c=d(!0),g=R().currentRoute.value.query,v=d(m.isDialog?m.act:String(g.act)),k=d(m.isDialog?m.id:Number(g.id));v.value;const w=D(),e=d({}),S=async()=>{try{const a=await F(v.value,{id:k.value});Object.assign(e.value,a)}catch(a){y.error(a.message),i("close")}finally{c.value=!1}};L(()=>{v.value==="detail"?S():c.value=!1});const V=async()=>{await w.value.validate();try{i("update:confirmLoading",!0);const a=await P({id:k.value,remark:e.value.remark});i("submitCallback",a),y.success("操作成功")}catch(a){y.error(a.message)}finally{i("update:confirmLoading",!1)}};return h({onFormSubmit:()=>{V()}}),(a,o)=>{const r=s("el-form-item"),x=s("TigInput"),T=s("el-button"),q=s("el-form"),I=s("a-spin");return n(),j("div",U,[u("div",M,[u("div",O,[c.value?f("",!0):(n(),p(q,{key:0,ref_key:"formRef",ref:w,model:e.value,"label-width":"auto"},{default:t(()=>[l(r,{label:"联系方式",prop:"mobile"},{default:t(()=>[u("div",null,b(e.value.mobile),1)]),_:1}),l(r,{label:"询价内容",prop:"content"},{default:t(()=>[u("div",null,b(e.value.content),1)]),_:1}),l(r,{label:"创建时间",prop:"createTime"},{default:t(()=>[u("div",null,b(e.value.createTime),1)]),_:1}),e.value.status===1?(n(),p(r,{key:0,label:"回复内容",prop:"remark"},{default:t(()=>[l(x,{classType:"tig-form-input",modelValue:e.value.remark,"onUpdate:modelValue":o[0]||(o[0]=_=>e.value.remark=_),rows:6,type:"textarea",disabled:"",placeholder:"请输入回复内容"},null,8,["modelValue"])]),_:1})):f("",!0),e.value.status===0?(n(),p(r,{key:1,label:"回复内容",prop:"remark",rules:[{required:!0,message:"请输入回复内容"}]},{default:t(()=>[l(x,{classType:"tig-form-input",modelValue:e.value.remark,"onUpdate:modelValue":o[1]||(o[1]=_=>e.value.remark=_),rows:6,type:"textarea",placeholder:"请输入回复内容"},null,8,["modelValue"])]),_:1})):f("",!0),e.value.status===0?(n(),p(r,{key:2,label:" "},{default:t(()=>[l(T,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:V},{default:t(()=>o[2]||(o[2]=[E("提交")])),_:1},512)]),_:1})):f("",!0)]),_:1},8,["model"])),l(I,{spinning:c.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{H as default};
