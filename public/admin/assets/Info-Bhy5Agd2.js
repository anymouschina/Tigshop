import{d as w,G as I,dQ as L,C as N,i as m,s as V,r as d,j as x,o as C,w as l,a3 as D,b as t,g as k,a4 as F,e as b,D as R,I as v}from"./index-DrbzVNl6.js";import{F as B}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-BDvYUQtN.js";import"./index-CeQDmMxd.js";import"./vuedraggable.umd-DAKh-e3Q.js";import{u as U}from"./team-KLIJmCUS.js";import"./Image.vue_vue_type_script_setup_true_lang-BWzCs9jv.js";import"./format-CRgx78oe.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const E=w({__name:"Info",props:{act:{type:String,default:""},id:{type:Number,default:0},type:{type:Number,default:1},page:{type:Number,default:1},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(f,{expose:y,emit:h}){const u=h,r=f,a=I(JSON.parse(JSON.stringify(L().shopInfo))),c=N().currentRoute.value.query,S=m(r.isDialog?r.act:String(c.act));m(r.isDialog?r.id:Number(c.id)),S.value;const n=V(),e=m({shopId:a.shopId,shopTitle:a.shopTitle,shopLogo:a.shopLogo,description:a.description}),T=async()=>{await n.value.validate();try{u("update:confirmLoading",!0);const i=await U({...e.value});await n.value.resetFields(),v.success("操作成功"),u("submitCallback",i)}catch(i){v.error(i.message)}finally{u("update:confirmLoading",!1)}};return y({onFormSubmit:()=>{T()}}),(i,o)=>{const p=d("el-form-item"),g=d("TigInput"),_=d("el-form");return C(),x(_,{ref_key:"formRef",ref:n,model:e.value,class:"form-body","label-suffix":"：","label-width":"auto"},{default:l(()=>[D(t(p,{label:"店铺Logo"},{default:l(()=>[t(k(B),{photo:e.value.shopLogo,"onUpdate:photo":o[0]||(o[0]=s=>e.value.shopLogo=s),isMultiple:!1},null,8,["photo"])]),_:1},512),[[F,f.page]]),t(p,{rules:[{required:!0,message:"请输入店铺名称!"}],label:"店铺名称",prop:"shopTitle"},{default:l(()=>[t(g,{classType:"tig-form-input",modelValue:e.value.shopTitle,"onUpdate:modelValue":o[1]||(o[1]=s=>e.value.shopTitle=s),placeholder:"请输入店铺名称"},null,8,["modelValue"]),o[3]||(o[3]=b("div",{class:"extra"},"店铺名称应尽量简洁易记, 建议15字以内",-1))]),_:1}),t(p,{label:"创建时间",prop:"addTime"},{default:l(()=>[b("p",null,R(a.addTime),1)]),_:1}),t(p,{label:"店铺简介",prop:"description"},{default:l(()=>[t(g,{classType:"tig-form-input",modelValue:e.value.description,"onUpdate:modelValue":o[2]||(o[2]=s=>e.value.description=s),rows:4,type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])}}});export{E as default};
