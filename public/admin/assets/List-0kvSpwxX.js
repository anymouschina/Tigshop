import{d as I,i as b,G as R,C as j,q as A,c as l,e as t,b as n,w as r,f as i,g as h,I as E,r as p,o as a,L as K,F as x,a as V,j as v,E as z,D as d,n as $,_ as G}from"./index-CGYuOau0.js";/* empty css             */import{S as M}from"./SortButton-Dod5kej3.js";import"./index-B-GURfkM.js";/* empty css                                                                    */import{P as T}from"./Pagination-yOfjsBuR.js";import{P as H}from"./ProductCard-DnyTbnB8.js";import{u as J}from"./config-DNllFJyR.js";import{g as Q}from"./aftersales-C37am-lV.js";import{p as W}from"./format-DFT-VJzO.js";import{_ as L}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const X={class:"container"},Y={class:"content_wrapper"},Z={class:"lyecs-table-list-warp"},ss={class:"list-table-tool lyecs-search-warp"},ts={class:"advanced-search-warp list-table-tool-row"},es={class:"simple-form-warp"},as={class:"simple-form-field"},os={class:"form-group"},ls={class:"control-container"},ns={class:"simple-form-field"},rs={class:"form-group"},is={class:"control-container"},ds={class:"simple-form-field"},us={class:"form-group"},_s={class:"control-container"},ps={class:"simple-form-field"},cs={class:"table-container"},fs={class:"custom-table"},ms={class:"custom-table"},vs={class:"data-tr"},ys={colspan:"4"},bs={class:"check-box"},hs={class:"check-box"},gs={class:"check-box"},ks={key:1,class:"check-box"},ws={key:3,class:"check-box"},Cs={class:"displayRow flex-justify-between"},xs={class:"displayColumn textR whiteSN widthAuto"},Vs={class:"red ml10"},zs=["rowspan"],Os=["rowspan"],Ss=["rowspan"],Fs=["rowspan"],Ns={key:0,class:"empty-warp"},Us={key:0,class:"empty-bg"},Ls={key:0,class:"pagination-con"},Bs=I({__name:"List",setup(Ds){const B=J(),O=b([]),y=b(!0),g=b(0),o=R({page:1,size:B.get("page_size"),sort_field:"",sort_order:"",keyword:""}),S=b({}),F=b({}),c=j().currentRoute.value.query,f=async()=>{y.value=!0;try{const _=await Q({...o});O.value=_.filter_result,S.value=_.status_list,F.value=_.type_list,g.value=_.total,c&&c.status&&(o.status=c.status)}catch(_){E.error(_.message)}finally{y.value=!1}};A(()=>{c&&c.status&&(o.status=Number(c.status)),f()});const m=()=>{f()};return(_,e)=>{const k=p("el-button"),D=p("el-input"),N=p("el-option"),U=p("el-select"),P=p("el-form"),w=p("el-divider"),q=p("a-spin");return a(),l("div",X,[t("div",Y,[t("div",Z,[t("div",ss,[n(P,{model:o},{default:r(()=>[t("div",ts,[t("div",es,[t("div",as,[t("div",os,[t("div",ls,[n(D,{modelValue:o.keyword,"onUpdate:modelValue":e[0]||(e[0]=s=>o.keyword=s),name:"keyword",placeholder:"订单号",onKeyup:K(m,["enter"]),clearable:"",onClear:m},{append:r(()=>[n(k,{onClick:m},{default:r(()=>e[8]||(e[8]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",ns,[t("div",rs,[e[9]||(e[9]=t("label",{class:"control-label"},[t("span",null,"申请类型：")],-1)),t("div",is,[n(U,{modelValue:o.aftersale_type,"onUpdate:modelValue":e[1]||(e[1]=s=>o.aftersale_type=s),clearable:"",onChange:m},{default:r(()=>[(a(!0),l(x,null,V(F.value,(s,u)=>(a(),v(N,{value:u,label:s},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])])])]),t("div",ds,[t("div",us,[e[10]||(e[10]=t("label",{class:"control-label"},[t("span",null,"退换货状态：")],-1)),t("div",_s,[n(U,{modelValue:o.status,"onUpdate:modelValue":e[2]||(e[2]=s=>o.status=s),clearable:"",onChange:m},{default:r(()=>[(a(!0),l(x,null,V(S.value,(s,u)=>(a(),v(N,{value:u,label:s},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])])])]),t("div",ps,[n(k,{type:"primary",onClick:m},{default:r(()=>e[11]||(e[11]=[z("搜索")])),_:1})])])])]),_:1},8,["model"])]),t("div",cs,[n(q,{spinning:y.value},{default:r(()=>[t("table",fs,[t("thead",null,[t("tr",null,[t("th",null,[n(M,{sortField:o.sort_field,"onUpdate:sortField":e[3]||(e[3]=s=>o.sort_field=s),sortOrder:o.sort_order,"onUpdate:sortOrder":e[4]||(e[4]=s=>o.sort_order=s),sortName:"order_id",text:"退换货商品",onLoadData:e[5]||(e[5]=s=>f())},null,8,["sortField","sortOrder"])]),e[12]||(e[12]=t("th",null,"售后原因",-1)),e[13]||(e[13]=t("th",null,"服务类型",-1)),e[14]||(e[14]=t("th",null,"售后状态",-1)),e[15]||(e[15]=t("th",null,"操作",-1))])])]),(a(!0),l(x,null,V(O.value,s=>(a(),l("table",ms,[t("thead",null,[t("tr",vs,[t("th",ys,[t("span",bs,"订单编号："+d(s.order_sn),1),n(w,{direction:"vertical"}),t("span",hs,"售后编号："+d(s.aftersales_sn),1),n(w,{direction:"vertical"}),t("span",gs,"申请时间："+d(s.add_time),1),s.shipping_time?(a(),v(w,{key:0,direction:"vertical"})):i("",!0),s.user_name?(a(),l("span",ks,"发货时间："+d(s.shipping_time),1)):i("",!0),s.user_name?(a(),v(w,{key:2,direction:"vertical"})):i("",!0),s.user_name?(a(),l("span",ws,"申请人："+d(s.user_name),1)):i("",!0)])])]),t("tbody",null,[(a(!0),l(x,null,V(s.aftersales_items,(u,C)=>(a(),l("tr",null,[t("td",null,[t("div",Cs,[n(h(H),{pic_thumb:u.pic_thumb,product_id:u.product_id,product_name:u.product_name},null,8,["pic_thumb","product_id","product_name"]),t("div",xs,[t("div",null,d(h(W)(u.price)),1),t("div",null,[z(" × "+d(u.quantity),1),t("span",Vs,"(退货数量："+d(u.number)+")",1)]),e[16]||(e[16]=t("div",null,null,-1))])])]),C==0?(a(),l("td",{key:0,rowspan:s.aftersales_items.length},[t("p",null,d(s.aftersale_reason||"-"),1)],8,zs)):i("",!0),C==0?(a(),l("td",{key:1,rowspan:s.aftersales_items.length},[t("span",null,d(s.aftersales_type_name),1)],8,Os)):i("",!0),C==0?(a(),l("td",{key:2,rowspan:s.aftersales_items.length},[t("span",{class:$({orange:s.status===0,black:s.status===1||s.status===2||s.status===4,gray:s.status===3,green:s.status===5})},d(s.status_name),3)],8,Ss)):i("",!0),C==0?(a(),l("td",{key:3,rowspan:s.aftersales_items.length},[s.status===5||s.status===6||s.status===7?(a(),v(h(L),{key:0,params:{act:"detail",id:s.aftersale_id},isDrawer:"",path:"order/aftersales/Info",title:"售后详情 "+s.aftersales_sn,width:"800px",onOkCallback:f,showClose:!1,showOnOk:!1},{default:r(()=>[n(k,{size:"small",text:"",type:"primary"},{default:r(()=>e[17]||(e[17]=[z(" 售后详情 ")])),_:1})]),_:2},1032,["params","title"])):(a(),v(h(L),{key:1,params:{act:"detail",id:s.aftersale_id},isDrawer:"",path:"order/aftersales/Info",title:"处理售后申请 "+s.aftersales_sn,width:"800px",onOkCallback:f,showClose:!1,showOnOk:!1},{default:r(()=>[n(k,{size:"small",text:"",type:"danger"},{default:r(()=>e[18]||(e[18]=[z(" 处理退款 ")])),_:1})]),_:2},1032,["params","title"]))],8,Fs)):i("",!0)]))),256))])]))),256)),y.value||g.value==0?(a(),l("div",Ns,[y.value?i("",!0):(a(),l("div",Us,"暂无数据"))])):i("",!0)]),_:1},8,["spinning"]),g.value>0?(a(),l("div",Ls,[n(h(T),{page:o.page,"onUpdate:page":e[6]||(e[6]=s=>o.page=s),size:o.size,"onUpdate:size":e[7]||(e[7]=s=>o.size=s),total:g.value,onCallback:f},null,8,["page","size","total"])])):i("",!0)])])])])}}}),Hs=G(Bs,[["__scopeId","data-v-34feacb6"]]);export{Hs as default};
