import{d as U,j as i,E as j,s as E,x as F,K as f,r as u,o as _,c as $,e as x,k,w as l,b as t,h as C,H as v,$ as H,a0 as I}from"./index-7c2d2aef.js";import{c as K,e as M}from"./currencyManagement-2d40fd5e.js";const O={class:"container"},T={class:"content_wrapper"},z={class:"lyecs-form-table"},P=U({__name:"Info",props:{id:{type:Number,default:0},promotion_type:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(N,{expose:S,emit:B}){const m=B,r=N,d=i(!0),b=j().currentRoute.value.query,c=i(r.isDialog?r.act:String(b.act)),y=i(r.isDialog?r.id:Number(b.id)),h=c.value==="add"?"create":"update",g=E(),e=i({name:"",symbol:"",is_default:0,locales_id:""});F(()=>{c.value==="detail"?D():d.value=!1});const D=async()=>{try{const o=await K(c.value,{id:y.value});Object.assign(e.value,o.item)}catch(o){f.error(o.message),m("close")}finally{d.value=!1}},V=async()=>{await g.value.validate();try{m("update:confirmLoading",!0);const o=await M(h,{id:y.value,...e.value});m("submitCallback",o),f.success(o.message)}catch(o){f.error(o.message)}finally{m("update:confirmLoading",!1)}};return S({onFormSubmit:()=>{V()}}),(o,a)=>{const p=u("el-input"),n=u("el-form-item"),w=u("el-radio"),R=u("el-radio-group"),q=u("el-button"),L=u("el-form");return _(),$("div",O,[x("div",T,[x("div",z,[d.value?C("",!0):(_(),k(L,{key:0,ref_key:"formRef",ref:g,model:e.value,"label-width":"auto"},{default:l(()=>[t(n,{prop:"name",label:"货币名称：",rules:[{required:!0,message:"货币名称不能为空!"}]},{default:l(()=>[t(p,{type:"text",maxlength:"60",modelValue:e.value.name,"onUpdate:modelValue":a[0]||(a[0]=s=>e.value.name=s)},null,8,["modelValue"])]),_:1}),t(n,{prop:"symbol",label:"币种符号：",rules:[{required:!0,message:"币种符号不能为空!"}]},{default:l(()=>[t(p,{type:"text",maxlength:"60",modelValue:e.value.symbol,"onUpdate:modelValue":a[1]||(a[1]=s=>e.value.symbol=s)},null,8,["modelValue"])]),_:1}),e.value.is_default===0?(_(),k(n,{key:0,prop:"rate",label:"汇率："},{default:l(()=>[t(p,{type:"number",maxlength:"60",modelValue:e.value.rate,"onUpdate:modelValue":a[2]||(a[2]=s=>e.value.rate=s)},null,8,["modelValue"])]),_:1})):C("",!0),t(n,{prop:"is_default",label:"是否默认："},{default:l(()=>[t(R,{modelValue:e.value.is_default,"onUpdate:modelValue":a[3]||(a[3]=s=>e.value.is_default=s)},{default:l(()=>[t(w,{value:1},{default:l(()=>[v("是")]),_:1}),t(w,{value:0},{default:l(()=>[v("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),H(t(n,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(q,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:a[4]||(a[4]=s=>V())},{default:l(()=>[v("提交")]),_:1},512)]),_:1},512),[[I,!r.isDialog]])]),_:1},8,["model"]))])])])}}});export{P as default};
