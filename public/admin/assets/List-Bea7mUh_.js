import{d as M,i as v,G as E,q as L,c as g,e as s,b as o,w as a,M as O,f as C,g as r,I as V,r as n,o as b,E as m,D as h}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{P as w}from"./PopFormElm-DSof3F4x.js";import{_ as G}from"./Switch.vue_vue_type_script_setup_true_lang-CKSPWIQL.js";import{_ as T}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as j}from"./Pagination-yOfjsBuR.js";import{u as H}from"./config-DNllFJyR.js";import{_ as J}from"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import{g as K,u as y,d as Q,b as R}from"./productServices-io8pn2tf.js";import{_ as q}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";import"./format-DFT-VJzO.js";const W={class:"container"},X={class:"content_wrapper"},Y={class:"lyecs-table-list-warp"},Z={class:"list-table-tool lyecs-search-warp"},ee={class:"advanced-search-warp list-table-tool-row"},te={class:"simple-form-warp"},oe={class:"simple-form-field"},se={class:"form-group"},ae={class:"control-container"},re={class:"simple-form-field"},ie={class:"form-group"},le={class:"control-container"},de={class:"simple-form-field"},ne={class:"form-group"},ce={class:"control-container"},pe={key:0},_e={class:"table-container"},ue={style:{position:"relative"}},me={class:"empty-warp"},fe={key:0,class:"empty-bg"},ve={key:0,class:"pagination-con"},De=M({__name:"List",setup(ge){const A=H(),x=v(),_=v(!0),f=v(0),u=v([]),l=E({page:1,size:A.get("page_size"),sort_field:"",sort_order:"",keyword:""}),d=async()=>{_.value=!0;try{const i=await K({...l});x.value=i.filter_result,f.value=i.total}catch(i){V.error(i.message)}finally{_.value=!1}};L(()=>{d()});const k=()=>{d()},U=({prop:i,order:e})=>{l.sort_field=i,l.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",d()},P=async i=>{try{const e=await R(i,{ids:u.value});V.success(e.message),d()}catch(e){V.error(e.message)}},z=i=>{u.value=i.map(e=>e.product_service_id)};return(i,e)=>{const S=n("el-button"),D=n("el-input"),$=n("el-popconfirm"),B=n("el-form"),c=n("el-table-column"),I=n("el-divider"),N=n("el-table"),F=n("a-spin");return b(),g("div",W,[s("div",X,[s("div",Y,[s("div",Z,[o(B,{model:l,onSubmit:O(k,["prevent"])},{default:a(()=>[s("div",ee,[s("div",te,[s("div",oe,[s("div",se,[s("div",ae,[o(D,{modelValue:l.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>l.keyword=t),name:"keyword",placeholder:"输入服务名称",clearable:"",onClear:k},{append:a(()=>[o(S,{onClick:k},{default:a(()=>e[4]||(e[4]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),s("div",re,[s("div",ie,[s("div",le,[o(r(q),{params:{act:"add"},isDrawer:"",path:"product/productServices/Info",title:"添加商品服务",width:"600px",onOkCallback:d},{default:a(()=>[o(S,{type:"primary"},{default:a(()=>e[5]||(e[5]=[m("添加商品服务")])),_:1})]),_:1})])])]),s("div",de,[s("div",ne,[s("div",ce,[o($,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=t=>P("del"))},{reference:a(()=>[o(S,{disabled:u.value.length===0},{default:a(()=>e[6]||(e[6]=[m("批量删除")])),_:1},8,["disabled"])]),_:1}),u.value.length>0?(b(),g("span",pe,[e[7]||(e[7]=m(" 已选择：")),s("b",null,h(u.value.length),1),e[8]||(e[8]=m(" 项 "))])):C("",!0)])])])])])]),_:1},8,["model"])]),s("div",_e,[o(F,{spinning:_.value},{default:a(()=>[o(N,{data:x.value,loading:_.value,total:f.value,"row-key":"product_service_id",onSelectionChange:z,onSortChange:U},{empty:a(()=>[s("div",me,[_.value?C("",!0):(b(),g("div",fe,"暂无数据"))])]),default:a(()=>[o(c,{type:"selection",width:"32"}),o(c,{width:300,label:"服务名称",prop:"product_service_id",sortable:"custom"},{default:a(({row:t})=>[s("div",ue,[o(r(w),{label:"服务名称",type:"textarea",requestApi:r(y),"org-value":t.product_service_name,"onUpdate:orgValue":p=>t.product_service_name=p,params:{id:t.product_service_id,field:"product_service_name"},max:100},{default:a(()=>[s("div",null,h(t.product_service_name),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])])]),_:1}),o(c,{label:"图标"},{default:a(({row:t})=>[o(r(J),{src:t.ico_img,fit:"contain",style:{height:"25px"}},null,8,["src"])]),_:1}),o(c,{label:"简介",prop:"product_service_desc"},{default:a(({row:t})=>[o(r(w),{max:100,label:"简介",type:"input",requestApi:r(y),"org-value":t.product_service_desc,"onUpdate:orgValue":p=>t.product_service_desc=p,params:{id:t.product_service_id,field:"product_service_desc"}},{default:a(()=>[s("div",null,h(t.product_service_desc),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])]),_:1}),o(c,{label:"默认显示",prop:"default_on",sortable:"custom"},{default:a(({row:t})=>[o(r(G),{checked:t.default_on,"onUpdate:checked":p=>t.default_on=p,requestApi:r(y),params:{id:t.product_service_id,field:"default_on"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),o(c,{label:"排序",prop:"sort_order",sortable:"custom"},{default:a(({row:t})=>[o(r(w),{label:"排序",type:"input",requestApi:r(y),"org-value":t.sort_order,"onUpdate:orgValue":p=>t.sort_order=p,params:{id:t.product_service_id,field:"sort_order"},extra:"默认值为50，数值越小，排序越靠前"},{default:a(()=>[s("div",null,h(t.sort_order),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])]),_:1}),o(c,{width:150,fixed:"right",label:"操作"},{default:a(({row:t})=>[o(r(q),{params:{act:"detail",id:t.product_service_id},isDrawer:"",path:"product/productServices/Info",title:"编辑商品服务",width:"600px",onOkCallback:d},{default:a(()=>e[9]||(e[9]=[s("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(I,{direction:"vertical"}),o(r(T),{params:{id:t.product_service_id},requestApi:r(Q),onAfterDelete:d},{default:a(()=>e[10]||(e[10]=[m("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),f.value>0?(b(),g("div",ve,[o(r(j),{page:l.page,"onUpdate:page":e[2]||(e[2]=t=>l.page=t),size:l.size,"onUpdate:size":e[3]||(e[3]=t=>l.size=t),total:f.value,onCallback:d},null,8,["page","size","total"])])):C("",!0)])])])])}}});export{De as default};
