import{d as E,j as f,I as G,a9 as H,x as M,r,o as v,c as h,e as a,b as e,w as s,f as i,h as w,K as V,L as J,H as g,G as S}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{P as Q}from"./PopFormElm-61cd9b7d.js";import{_ as N}from"./Switch.vue_vue_type_script_setup_true_lang-95245cd7.js";import{_ as R}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as W}from"./Pagination-8eb7b6b1.js";import{u as X}from"./config-9548fa9b.js";import{g as Y,u as U,d as Z,b as ee}from"./pcNavigation-ccffba82.js";import{_ as q}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const te={class:"container"},ae={class:"content_wrapper"},oe={key:0,class:"container"},se={class:"lyecs-table-list-warp"},le={class:"list-table-tool lyecs-search-warp"},ne={class:"advanced-search-warp list-table-tool-row"},ie={class:"simple-form-warp"},re={class:"simple-form-field"},de={class:"form-group"},ce={class:"control-container"},pe=a("span",{class:"iconfont icon-chakan1"},null,-1),_e={class:"simple-form-field"},ue={class:"form-group"},me={class:"control-container"},fe={class:"simple-form-field"},ve={class:"form-group"},he={class:"control-container"},ge={key:0},be={class:"table-container"},ye=a("a",{class:"btn-link"},"编辑",-1),ke={class:"empty-warp"},we={key:0,class:"empty-bg"},Ce={key:0,class:"pagination-con"},$e=E({__name:"List",setup(Ve){const P=X(),x=f([]),_=f(!0),b=f(0),u=f([]),n=G({page:1,size:P.get("page_size"),sort_field:"",sort_order:"",keyword:"",type:1}),c=f(1),y=H(()=>c.value===1?"主导航":c.value===2?"顶部小导航":c.value===3?"底部导航":"侧边导航"),z=l=>{n.type=l,d()},d=async()=>{_.value=!0;try{const l=await Y({...n});x.value=l.filter_result,b.value=l.total}catch(l){V.error(l.message)}finally{_.value=!1}};M(()=>{d()});const A=()=>{d()},B=({prop:l,order:o})=>{n.sort_field=l,n.sort_order=o=="ascending"?"asc":o=="descending"?"desc":"",d()},D=async l=>{try{const o=await ee(l,{ids:u.value});V.success(o.message),d()}catch(o){V.error(o.message)}},I=l=>{u.value=l.map(o=>o.id)};return(l,o)=>{const k=r("el-tab-pane"),K=r("el-tabs"),C=r("el-button"),$=r("el-input"),F=r("el-popconfirm"),L=r("el-form"),p=r("el-table-column"),O=r("el-divider"),T=r("el-table"),j=r("a-spin");return v(),h("div",te,[a("div",ae,[e(K,{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=t=>c.value=t),class:"lyecs-tabs","tab-position":"top",onTabChange:z},{default:s(()=>[e(k,{name:1,label:"主导航"}),e(k,{name:2,label:"顶部小导航"}),e(k,{name:3,label:"底部导航"}),e(k,{name:4,label:"侧边导航"})]),_:1},8,["modelValue"]),c.value!=null?(v(),h("div",oe,[a("div",se,[a("div",le,[e(L,{model:n},{default:s(()=>[a("div",ne,[a("div",ie,[a("div",re,[a("div",de,[a("div",ce,[e($,{modelValue:n.keyword,"onUpdate:modelValue":o[1]||(o[1]=t=>n.keyword=t),name:"keyword",placeholder:"输入导航栏名称",onKeyup:J(A,["enter"])},{append:s(()=>[e(C,{onClick:A},{default:s(()=>[pe]),_:1})]),_:1},8,["modelValue"])])])]),a("div",_e,[a("div",ue,[a("div",me,[e(i(q),{params:{act:"add",type:c.value,type_name:y.value},title:"添加"+y.value,isDrawer:"",path:"decorate/pcNavigation/Info",width:"600px",onOkCallback:d},{default:s(()=>[e(C,{type:"primary"},{default:s(()=>[g(S("添加"+y.value),1)]),_:1})]),_:1},8,["params","title"])])])]),a("div",fe,[a("div",ve,[a("div",he,[e(F,{title:"您确认要批量删除所选数据吗？",onConfirm:o[2]||(o[2]=t=>D("del"))},{reference:s(()=>[e(C,{disabled:u.value.length===0},{default:s(()=>[g("批量删除")]),_:1},8,["disabled"])]),_:1}),u.value.length>0?(v(),h("span",ge,[g(" 已选择："),a("b",null,S(u.value.length),1),g(" 项 ")])):w("",!0)])])])])])]),_:1},8,["model"])]),a("div",be,[e(j,{spinning:_.value},{default:s(()=>[e(T,{data:x.value,loading:_.value,total:b.value,"row-key":"id",onSelectionChange:I,onSortChange:B},{empty:s(()=>[a("div",ke,[_.value?w("",!0):(v(),h("div",we,"暂无数据"))])]),default:s(()=>[e(p,{type:"selection",width:"32"}),e(p,{width:200,label:"名称",prop:"title"}),e(p,{width:100,label:"位置",prop:"type_name"}),e(p,{label:"是否显示",prop:"is_show"},{default:s(({row:t})=>[e(i(N),{checked:t.is_show,"onUpdate:checked":m=>t.is_show=m,params:{id:t.id,field:"is_show"},requestApi:i(U)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),e(p,{label:"是否新窗口"},{default:s(({row:t})=>[e(i(N),{checked:t.is_blank,"onUpdate:checked":m=>t.is_blank=m,params:{id:t.id,field:"is_blank"},requestApi:i(U)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),e(p,{label:"排序",prop:"sort_order",sortable:"custom"},{default:s(({row:t})=>[e(i(Q),{"org-value":t.sort_order,"onUpdate:orgValue":m=>t.sort_order=m,params:{id:t.id,field:"sort_order"},requestApi:i(U),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"input"},{default:s(()=>[a("div",null,S(t.sort_order),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),e(p,{width:150,fixed:"right",label:"操作"},{default:s(({row:t})=>[e(i(q),{params:{act:"detail",type:c.value,id:t.id},title:"编辑商城"+y.value+"导航栏",isDrawer:"",path:"decorate/pcNavigation/Info",width:"600px",onOkCallback:d},{default:s(()=>[ye]),_:2},1032,["params","title"]),e(O,{direction:"vertical"}),e(i(R),{params:{id:t.id},requestApi:i(Z),onAfterDelete:d},{default:s(()=>[g("删除 ")]),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),b.value>0?(v(),h("div",Ce,[e(i(W),{page:n.page,"onUpdate:page":o[3]||(o[3]=t=>n.page=t),size:n.size,"onUpdate:size":o[4]||(o[4]=t=>n.size=t),total:b.value,onCallback:d},null,8,["page","size","total"])])):w("",!0)])])])):w("",!0)])])}}});export{$e as default};
