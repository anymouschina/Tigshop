import{d as K,K as D,dO as L,i as b,G as T,q as E,c as _,e as t,f as h,b as s,w as a,M,g as i,E as d,D as y,I as k,r as c,o as f,n as G}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{P as R}from"./PopFormElm-BZp1_Wme.js";import{_ as j}from"./Switch.vue_vue_type_script_setup_true_lang-C5nzofSO.js";import{D as H}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as J}from"./Pagination-wR9huHyl.js";import{g as Q,b as W,u as V,d as X}from"./pcCatFloor-BL1hyY-I.js";import{_ as x}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const Y={class:"container"},Z={class:"content_wrapper"},ee={class:"lyecs-table-list-warp"},te={class:"list-table-tool lyecs-search-warp"},oe={class:"advanced-search-warp list-table-tool-row"},se={class:"simple-form-warp"},ae={class:"simple-form-field"},le={class:"form-group"},ne={class:"control-container"},ie={class:"simple-form-field"},re={class:"form-group"},de={class:"control-container"},ce={class:"simple-form-field"},pe={class:"form-group"},ue={class:"control-container"},me={key:0},_e={class:"table-container"},fe={class:"empty-warp"},ve={key:0,class:"empty-bg"},ge={key:0,class:"pagination-con"},be={key:0,class:"selected-action-warp"},he={class:"selected-action"},ze=K({__name:"List",setup(ye){const F=D();F.config.icoDefinedCss&&L(F.config.icoDefinedCss);const z=D(),S=b([]),m=b(!0),v=b(0),p=b([]),n=T({page:1,size:z.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),r=async()=>{m.value=!0;try{const l=await Q({...n});S.value=l.records,v.value=l.total}catch(l){k.error(l.message)}finally{m.value=!1}};E(()=>{r()});const w=()=>{r()},P=({prop:l,order:e})=>{n.sortField=l,n.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",r()},I=async l=>{try{const e=await W(l,{ids:p.value});k.success("操作成功"),await r()}catch(e){k.error(e.message)}},q=l=>{p.value=l.map(e=>e.catFloorId)};return(l,e)=>{const g=c("el-button"),A=c("TigInput"),O=c("el-popconfirm"),u=c("el-table-column"),N=c("el-divider"),U=c("el-table"),B=c("a-spin"),$=c("el-space");return f(),_("div",Y,[t("div",Z,[t("div",ee,[t("div",te,[t("div",oe,[t("div",se,[t("div",ae,[t("div",le,[t("div",ne,[s(A,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=o=>n.keyword=o),name:"keyword",placeholder:"输入楼层名称",onKeyup:M(w,["enter"]),clearable:"",onClear:w},{append:a(()=>[s(g,{onClick:w},{default:a(()=>e[5]||(e[5]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",ie,[t("div",re,[t("div",de,[s(i(x),{params:{act:"add"},isDrawer:"",path:"decorate/pcCatFloor/Info",title:"添加抽屉楼层",width:"800px",onOkCallback:r},{default:a(()=>[s(g,{type:"primary"},{default:a(()=>e[6]||(e[6]=[d("添加抽屉楼层")])),_:1})]),_:1})])])]),t("div",ce,[t("div",pe,[t("div",ue,[s(O,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=o=>I("del"))},{reference:a(()=>[s(g,{disabled:p.value.length===0},{default:a(()=>e[7]||(e[7]=[d("批量删除")])),_:1},8,["disabled"])]),_:1}),p.value.length>0?(f(),_("span",me,[e[8]||(e[8]=d(" 已选择：")),t("b",null,y(p.value.length),1),e[9]||(e[9]=d(" 项 "))])):h("",!0)])])])])])]),t("div",_e,[s(B,{spinning:m.value},{default:a(()=>[s(U,{data:S.value,loading:m.value,total:v.value,"row-key":"catFloorId",onSelectionChange:q,onSortChange:P},{empty:a(()=>[t("div",fe,[m.value?h("",!0):(f(),_("div",ve,"暂无数据"))])]),default:a(()=>[s(u,{type:"selection",width:"32"}),s(u,{width:100,label:"楼层图标"},{default:a(({row:o})=>[t("em",{class:G([o.floorIcoFont,"main_pel_m"])},null,2)]),_:1}),s(u,{label:"楼层名称",prop:"catFloorName"},{default:a(({row:o})=>[t("span",null,y(o.catFloorName?o.catFloorName:"--"),1)]),_:1}),s(u,{width:120,label:"是否显示",sortable:"custom"},{default:a(({row:o})=>[s(i(j),{checked:o.isShow,"onUpdate:checked":C=>o.isShow=C,params:{id:o.catFloorId,field:"isShow"},requestApi:i(V)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),s(u,{width:120,label:"排序",prop:"sortOrder",sortable:"custom"},{default:a(({row:o})=>[s(i(R),{"org-value":o.sortOrder,"onUpdate:orgValue":C=>o.sortOrder=C,params:{id:o.catFloorId,field:"sortOrder"},requestApi:i(V),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"integer"},{default:a(()=>[t("div",null,y(o.sortOrder),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),s(u,{width:150,fixed:"right",label:"操作"},{default:a(({row:o})=>[s(i(x),{params:{act:"detail",id:o.catFloorId},isDrawer:"",path:"decorate/pcCatFloor/Info",title:"编辑抽屉楼层",width:"800px",onOkCallback:r},{default:a(()=>e[10]||(e[10]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),s(N,{direction:"vertical"}),s(i(H),{params:{id:o.catFloorId},requestApi:i(X),onAfterDelete:r},{default:a(()=>e[11]||(e[11]=[d("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),v.value>0?(f(),_("div",ge,[s(i(J),{page:n.page,"onUpdate:page":e[2]||(e[2]=o=>n.page=o),size:n.size,"onUpdate:size":e[3]||(e[3]=o=>n.size=o),total:v.value,onCallback:r},null,8,["page","size","total"])])):h("",!0)]),p.value.length>0?(f(),_("div",be,[t("div",he,[s($,null,{default:a(()=>[t("span",null,[e[12]||(e[12]=d("已选择：")),t("b",null,y(p.value.length),1),e[13]||(e[13]=d(" 项"))]),s(O,{title:"您确认要批量删除所选数据吗？",onConfirm:e[4]||(e[4]=o=>I("del"))},{reference:a(()=>[s(g,null,{default:a(()=>e[14]||(e[14]=[d("批量删除")])),_:1})]),_:1})]),_:1})])])):h("",!0)])])])}}});export{ze as default};
