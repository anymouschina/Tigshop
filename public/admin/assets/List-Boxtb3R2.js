import{d as T,i as v,G,aa as M,q as j,c as f,e as o,b as t,f as w,w as s,L as H,g as n,E as b,D as S,I as U,r as d,o as g}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{P as J}from"./PopFormElm-DSof3F4x.js";import{_ as N}from"./Switch.vue_vue_type_script_setup_true_lang-CKSPWIQL.js";import{_ as Q}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as R}from"./Pagination-yOfjsBuR.js";import{u as W}from"./config-DNllFJyR.js";import{g as X,b as Y,u as q,d as Z}from"./pcNavigation-B90kf6yK.js";import{_ as x}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const ee={class:"container"},te={class:"content_wrapper"},ae={key:0,class:"container"},oe={class:"lyecs-table-list-warp"},se={class:"list-table-tool lyecs-search-warp"},le={class:"advanced-search-warp list-table-tool-row"},ne={class:"simple-form-warp"},ie={class:"simple-form-field"},re={class:"form-group"},de={class:"control-container"},pe={class:"simple-form-field"},ce={class:"form-group"},ue={class:"control-container"},_e={class:"simple-form-field"},me={class:"form-group"},ve={class:"control-container"},fe={key:0},be={class:"table-container"},ge={class:"empty-warp"},he={key:0,class:"empty-bg"},ye={key:0,class:"pagination-con"},Be=T({__name:"List",setup(ke){const P=W(),A=v([]),u=v(!0),h=v(0),_=v([]),i=G({page:1,size:P.get("page_size"),sort_field:"",sort_order:"",keyword:"",type:1}),p=v(1),y=M(()=>p.value===1?"主导航":p.value===2?"顶部小导航":p.value===3?"底部导航":"侧边导航"),z=l=>{i.type=l,r()},r=async()=>{u.value=!0;try{const l=await X({...i});A.value=l.filter_result,h.value=l.total}catch(l){U.error(l.message)}finally{u.value=!1}};j(()=>{r()});const C=()=>{r()},D=({prop:l,order:e})=>{i.sort_field=l,i.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",r()},B=async l=>{try{const e=await Y(l,{ids:_.value});U.success(e.message),r()}catch(e){U.error(e.message)}},I=l=>{_.value=l.map(e=>e.id)};return(l,e)=>{const k=d("el-tab-pane"),$=d("el-tabs"),V=d("el-button"),F=d("el-input"),K=d("el-popconfirm"),c=d("el-table-column"),L=d("el-divider"),E=d("el-table"),O=d("a-spin");return g(),f("div",ee,[o("div",te,[t($,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),class:"lyecs-tabs","tab-position":"top",onTabChange:z},{default:s(()=>[t(k,{name:1,label:"主导航"}),t(k,{name:2,label:"顶部小导航"}),t(k,{name:3,label:"底部导航"}),t(k,{name:4,label:"侧边导航"})]),_:1},8,["modelValue"]),p.value!=null?(g(),f("div",ae,[o("div",oe,[o("div",se,[o("div",le,[o("div",ne,[o("div",ie,[o("div",re,[o("div",de,[t(F,{modelValue:i.keyword,"onUpdate:modelValue":e[1]||(e[1]=a=>i.keyword=a),name:"keyword",placeholder:"输入导航栏名称",onKeyup:H(C,["enter"]),clearable:"",onClear:C},{append:s(()=>[t(V,{onClick:C},{default:s(()=>e[5]||(e[5]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),o("div",pe,[o("div",ce,[o("div",ue,[t(n(x),{params:{act:"add",type:p.value,type_name:y.value},title:"添加"+y.value,isDrawer:"",path:"decorate/pcNavigation/Info",width:"600px",onOkCallback:r},{default:s(()=>[t(V,{type:"primary"},{default:s(()=>[b(S("添加"+y.value),1)]),_:1})]),_:1},8,["params","title"])])])]),o("div",_e,[o("div",me,[o("div",ve,[t(K,{title:"您确认要批量删除所选数据吗？",onConfirm:e[2]||(e[2]=a=>B("del"))},{reference:s(()=>[t(V,{disabled:_.value.length===0},{default:s(()=>e[6]||(e[6]=[b("批量删除")])),_:1},8,["disabled"])]),_:1}),_.value.length>0?(g(),f("span",fe,[e[7]||(e[7]=b(" 已选择：")),o("b",null,S(_.value.length),1),e[8]||(e[8]=b(" 项 "))])):w("",!0)])])])])])]),o("div",be,[t(O,{spinning:u.value},{default:s(()=>[t(E,{data:A.value,loading:u.value,total:h.value,"row-key":"id",onSelectionChange:I,onSortChange:D},{empty:s(()=>[o("div",ge,[u.value?w("",!0):(g(),f("div",he,"暂无数据"))])]),default:s(()=>[t(c,{type:"selection",width:"32"}),t(c,{width:200,label:"名称",prop:"title"}),t(c,{width:100,label:"位置",prop:"type_name"}),t(c,{label:"是否显示",prop:"is_show"},{default:s(({row:a})=>[t(n(N),{checked:a.is_show,"onUpdate:checked":m=>a.is_show=m,params:{id:a.id,field:"is_show"},requestApi:n(q)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),t(c,{label:"是否新窗口"},{default:s(({row:a})=>[t(n(N),{checked:a.is_blank,"onUpdate:checked":m=>a.is_blank=m,params:{id:a.id,field:"is_blank"},requestApi:n(q)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),t(c,{label:"排序",prop:"sort_order",sortable:"custom"},{default:s(({row:a})=>[t(n(J),{"org-value":a.sort_order,"onUpdate:orgValue":m=>a.sort_order=m,params:{id:a.id,field:"sort_order"},requestApi:n(q),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"input"},{default:s(()=>[o("div",null,S(a.sort_order),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),t(c,{width:150,fixed:"right",label:"操作"},{default:s(({row:a})=>[t(n(x),{params:{act:"detail",type:p.value,id:a.id},title:"编辑商城"+y.value+"导航栏",isDrawer:"",path:"decorate/pcNavigation/Info",width:"600px",onOkCallback:r},{default:s(()=>e[9]||(e[9]=[o("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params","title"]),t(L,{direction:"vertical"}),t(n(Q),{params:{id:a.id},requestApi:n(Z),onAfterDelete:r},{default:s(()=>e[10]||(e[10]=[b("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),h.value>0?(g(),f("div",ye,[t(n(R),{page:i.page,"onUpdate:page":e[3]||(e[3]=a=>i.page=a),size:i.size,"onUpdate:size":e[4]||(e[4]=a=>i.size=a),total:h.value,onCallback:r},null,8,["page","size","total"])])):w("",!0)])])])):w("",!0)])])}}});export{Be as default};
