import{d as q,C as F,i as _,s as E,r as s,c as f,o as i,e as c,b as l,w as a,a0 as I,g as v,j as V,F as k,E as $,a1 as j,I as w}from"./index-CGYuOau0.js";import{u as M}from"./messageLog-CImtsejn.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";/* empty css                                                                    *//* empty css                                                                  */import{_ as T}from"./SelectRankList.vue_vue_type_script_setup_true_lang-CCUoIaLF.js";/* empty css                                                                              */import{S as z}from"./SelectLink-7bDF6pPk.js";import{_ as A}from"./SelectUser.vue_vue_type_script_setup_true_lang-9s5XBM-R.js";/* empty css             */import"./time-ClyPenjC.js";import"./userRank-4CcE-k1Z.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./user-CEb--1cT.js";const G={class:"container"},H={class:"content_wrapper"},J={class:"lyecs-form-table"},ue=q({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:S,emit:C}){const d=C,r=x,b=F().currentRoute.value.query,U=_(r.isDialog?r.act:String(b.act)),B=_(r.isDialog?r.id:Number(b.id)),D=U.value==="add"?"create":"update",g=E(),e=_({}),y=async()=>{await g.value.validate();try{d("update:confirmLoading",!0);const u=await M(D,{id:B.value,...e.value});d("submitCallback",u),w.success(u.message)}catch(u){w.error(u.message)}finally{d("update:confirmLoading",!1)}};return S({onFormSubmit:()=>{y()}}),(u,t)=>{const p=s("el-input"),n=s("el-form-item"),m=s("el-option"),L=s("el-select"),N=s("el-button"),R=s("el-form");return i(),f("div",G,[c("div",H,[c("div",J,[l(R,{ref_key:"formRef",ref:g,model:e.value,"label-width":"auto"},{default:a(()=>[l(n,{rules:[{required:!0,message:"标题不能为空!"}],label:"标题",prop:"message_title"},{default:a(()=>[l(p,{modelValue:e.value.message_title,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.message_title=o)},null,8,["modelValue"])]),_:1}),l(n,{rules:[{required:!0,message:"内容不能为空!"}],label:"内容",prop:"message_content"},{default:a(()=>[l(p,{modelValue:e.value.message_content,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.message_content=o),row:"2",type:"textarea"},null,8,["modelValue"])]),_:1}),l(n,{label:"链接",prop:"is_show"},{default:a(()=>[l(v(z),{modelValue:e.value.message_link,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.message_link=o)},null,8,["modelValue"])]),_:1}),l(n,{label:"发送类型",prop:"brand_is_hot"},{default:a(()=>[l(L,{modelValue:e.value.send_user_type,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.send_user_type=o),style:{width:"100%","margin-bottom":"20px"}},{default:a(()=>[l(m,{value:0,label:"全部会员"}),l(m,{value:1,label:"单个会员"}),l(m,{value:2,label:"会员等级"}),l(m,{value:3,label:"部分会员"})]),_:1},8,["modelValue"]),e.value.send_user_type===1?(i(),V(v(A),{key:0,multiple:!1,user_id:e.value.user_ids,"onUpdate:user_id":t[4]||(t[4]=o=>e.value.user_ids=o)},null,8,["user_id"])):e.value.send_user_type===2?(i(),V(v(T),{key:1,modelValue:e.value.user_rank,"onUpdate:modelValue":t[5]||(t[5]=o=>e.value.user_rank=o)},null,8,["modelValue"])):e.value.send_user_type===3?(i(),f(k,{key:2},[l(p,{modelValue:e.value.user_ids,"onUpdate:modelValue":t[6]||(t[6]=o=>e.value.user_ids=o),row:"2",type:"textarea"},null,8,["modelValue"]),t[7]||(t[7]=c("div",{class:"extra"},"注意：输入会员名称时，请用英文逗号隔开。",-1))],64)):(i(),f(k,{key:3},[],64))]),_:1}),I(l(n,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[l(N,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:y},{default:a(()=>t[8]||(t[8]=[$("提交")])),_:1},512)]),_:1},512),[[j,!r.isDialog]])]),_:1},8,["model"])])])])}}});export{ue as default};
