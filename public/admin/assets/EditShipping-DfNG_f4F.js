import{d as E,i as p,C as L,s as j,q,I as f,r as n,c as D,o as u,e as m,j as g,f as c,w as i,b as o,a0 as T,E as _,g as S,a1 as F,_ as I}from"./index-CGYuOau0.js";import{a as M,l as z}from"./order-CoX6hLeE.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{S as A}from"./SelectLogisticsCompany-CjvtX9cs.js";import{S as G}from"./SelectShippingType-xup_1EqY.js";/* empty css             */import"./time-ClyPenjC.js";import"./logisticsCompany-BhiSneCE.js";import"./shippingType-fDWXUBuR.js";const H={class:"container"},J={class:"content_wrapper"},K={class:"lyecs-form-table"},P=E({__name:"EditShipping",props:{id:{type:Number,default:0},form:{type:Object,default:()=>({})},valueName:String,isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:w,emit:C}){const r=C,v=V,b=p(!0),x=L().currentRoute.value.query,y=p(v.isDialog?v.id:Number(x.id));p(1);const h=j(),e=p({items:[]});q(()=>{N()});const N=async()=>{try{const a=await M("detail",{id:y.value});Object.assign(e.value,a.item)}catch(a){f.error(a.message),r("close")}finally{b.value=!1}},B=async()=>{await h.value.validate();try{r("update:confirmLoading",!0);const a=await z({id:y.value,shipping_method:e.value.shipping_method,logistics_id:e.value.logistics_id,tracking_no:e.value.tracking_no});r("submitCallback",a),f.success(a.message)}catch(a){f.error(a.message)}finally{r("update:confirmLoading",!1)}},O=a=>{e.value.logistics_id=a};return w({onFormSubmit:()=>{B()}}),(a,t)=>{const d=n("el-radio"),R=n("el-radio-group"),s=n("el-form-item"),k=n("el-input"),U=n("el-form");return u(),D("div",H,[m("div",J,[m("div",K,[t[9]||(t[9]=m("div",{class:"button-card babyBlue pd15"}," 提示：在当前页面修改配送方式或物流公司不会更改订单运费，如需修改运费请编辑订单金额（仅对未支付的订单支持订单金额编辑） ",-1)),b.value?c("",!0):(u(),g(U,{key:0,ref_key:"formRef",ref:h,model:e.value,"label-width":"auto"},{default:i(()=>[o(s,{label:"配送方式",prop:"shipping_method"},{default:i(()=>[o(R,{modelValue:e.value.shipping_method,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.shipping_method=l)},{default:i(()=>[o(d,{value:1},{default:i(()=>t[5]||(t[5]=[_("物流配送")])),_:1}),o(d,{value:2},{default:i(()=>t[6]||(t[6]=[_("商家配送")])),_:1}),o(d,{value:3},{default:i(()=>t[7]||(t[7]=[_("无需配送")])),_:1}),o(d,{value:4},{default:i(()=>t[8]||(t[8]=[_("电子面单")])),_:1})]),_:1},8,["modelValue"])]),_:1}),T(m("div",null,[o(s,{label:"配送类型",prop:"shipping_type_id"},{default:i(()=>[o(S(G),{id:e.value.shipping_type_id,"onUpdate:id":t[1]||(t[1]=l=>e.value.shipping_type_id=l),onChange:O},null,8,["id"])]),_:1}),o(s,{label:"物流公司",prop:"logistics_id"},{default:i(()=>[o(S(A),{id:e.value.logistics_id,"onUpdate:id":t[2]||(t[2]=l=>e.value.logistics_id=l)},null,8,["id"])]),_:1}),e.value.shipping_method===1?(u(),g(s,{key:0,label:"快递单号",prop:"tracking_no"},{default:i(()=>[o(k,{modelValue:e.value.tracking_no,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.tracking_no=l)},null,8,["modelValue"])]),_:1})):c("",!0),e.value.shipping_method===4?(u(),g(s,{key:1,label:"发货备注",prop:"bill_remark"},{default:i(()=>[o(k,{modelValue:e.value.bill_remark,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.bill_remark=l),type:"textarea",rows:"3"},null,8,["modelValue"])]),_:1})):c("",!0)],512),[[F,e.value.shipping_method===1||e.value.shipping_method===4]])]),_:1},8,["model"]))])])])}}}),re=I(P,[["__scopeId","data-v-54d7e9aa"]]);export{re as default};
