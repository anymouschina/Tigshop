import{d as Q,i as f,G as R,q as W,c as m,e as s,b as t,f as u,w as a,M as X,g as l,I as V,r as d,o as c,E as g,D as v,F as z,a as Y,j as Z,_ as ee}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{P as F}from"./PopFormElm-DSof3F4x.js";import{_ as P}from"./Switch.vue_vue_type_script_setup_true_lang-CKSPWIQL.js";import{_ as te}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as oe}from"./Pagination-yOfjsBuR.js";import{i as U,u as se}from"./format-DFT-VJzO.js";import{_ as q}from"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import{u as ae}from"./config-DNllFJyR.js";import{g as le,u as y,d as ne,b as ie}from"./comment-D0vM8ilm.js";import{_ as N}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const re={class:"container"},de={class:"content_wrapper"},ce={key:0,class:"container"},me={class:"lyecs-table-list-warp"},_e={class:"list-table-tool lyecs-search-warp"},pe={class:"advanced-search-warp list-table-tool-row"},ue={class:"simple-form-warp"},fe={class:"simple-form-field"},ve={class:"form-group"},he={class:"control-container"},be={class:"simple-form-field"},ge={class:"form-group"},ke={class:"control-container"},ye={class:"simple-form-field"},we={class:"form-group"},Ce={class:"control-container"},xe={key:0},Ve={class:"table-container"},Ue={class:"display-col"},qe={key:0,class:"image avatar flex"},Ae={class:"text"},Se={class:"display-col"},ze={class:"image_comment"},Fe={class:"text_comment multiline_hiding"},Pe=["href"],Ne={class:"text_comment"},Be={key:0,class:"image"},De={key:1},Ie={class:"empty-warp"},$e={key:0,class:"empty-bg"},Le={key:0,class:"pagination-con"},Me=Q({__name:"List",setup(Ee){const B=ae(),A=f(),h=f(!0),k=f(0),b=f([]);f(!1);const i=R({page:1,size:B.get("page_size"),sort_field:"",sort_order:"",keyword:"",is_showed:-1}),w=f(-1),D=n=>{i.is_showed=n,_()},_=async()=>{h.value=!0;try{const n=await le({...i});A.value=n.filter_result,k.value=n.total}catch(n){V.error(n.message)}finally{h.value=!1}};W(()=>{_()});const C=()=>{_()},I=({prop:n,order:o})=>{i.sort_field=n,i.sort_order=o=="ascending"?"asc":o=="descending"?"desc":"",_()},$=async n=>{try{const o=await ie(n,{ids:b.value});V.success(o.message),_()}catch(o){V.error(o.message)}},L=n=>{b.value=n.map(o=>o.comment_id)};return(n,o)=>{const S=d("el-tab-pane"),M=d("el-tabs"),x=d("el-button"),E=d("el-input"),O=d("el-popconfirm"),T=d("el-form"),r=d("el-table-column"),j=d("el-tooltip"),G=d("el-divider"),K=d("el-table"),H=d("a-spin");return c(),m("div",re,[s("div",de,[t(M,{modelValue:w.value,"onUpdate:modelValue":o[0]||(o[0]=e=>w.value=e),class:"lyecs-tabs","tab-position":"top",onTabChange:D},{default:a(()=>[t(S,{name:-1,label:"全部评价"}),t(S,{name:1,label:"有晒单"})]),_:1},8,["modelValue"]),w.value!=null?(c(),m("div",ce,[s("div",me,[s("div",_e,[t(T,{model:i,onSubmit:X(C,["prevent"])},{default:a(()=>[s("div",pe,[s("div",ue,[s("div",fe,[s("div",ve,[s("div",he,[t(E,{modelValue:i.keyword,"onUpdate:modelValue":o[1]||(o[1]=e=>i.keyword=e),name:"keyword",placeholder:"请输入评价内容",clearable:"",onClear:C},{append:a(()=>[t(x,{onClick:C},{default:a(()=>o[5]||(o[5]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),s("div",be,[s("div",ge,[s("div",ke,[t(l(N),{params:{act:"add"},isDrawer:"",path:"product/comment/Info",title:"添加用户评论",width:"600px",onOkCallback:_},{default:a(()=>[t(x,{type:"primary"},{default:a(()=>o[6]||(o[6]=[g("添加用户评论")])),_:1})]),_:1})])])]),s("div",ye,[s("div",we,[s("div",Ce,[t(O,{title:"您确认要批量删除所选数据吗？",onConfirm:o[2]||(o[2]=e=>$("del"))},{reference:a(()=>[t(x,{disabled:b.value.length===0},{default:a(()=>o[7]||(o[7]=[g("批量删除")])),_:1},8,["disabled"])]),_:1}),b.value.length>0?(c(),m("span",xe,[o[8]||(o[8]=g(" 已选择：")),s("b",null,v(b.value.length),1),o[9]||(o[9]=g(" 项 "))])):u("",!0)])])])])])]),_:1},8,["model"])]),s("div",Ve,[t(H,{spinning:h.value},{default:a(()=>[t(K,{data:A.value,loading:h.value,total:k.value,"row-key":"comment_id",onSelectionChange:L,onSortChange:I},{empty:a(()=>[s("div",Ie,[h.value?u("",!0):(c(),m("div",$e,"暂无数据"))])]),default:a(()=>[t(r,{type:"selection",width:"32"}),t(r,{width:150,label:"用户名称",prop:"username",sortable:"custom"},{default:a(({row:e})=>[s("div",Ue,[e.avatar?(c(),m("div",qe,[t(l(q),{src:l(U)(e.avatar),class:"image-style",fit:"cover"},null,8,["src"])])):u("",!0),t(j,{class:"box-item",effect:"light",content:e.username,placement:"bottom"},{default:a(()=>[s("div",Ae,v(e.username),1)]),_:2},1032,["content"])])]),_:1}),t(r,{width:260,label:"评论对象"},{default:a(({row:e})=>[s("div",Se,[s("div",ze,[t(l(q),{src:l(U)(e.pic_thumb),class:"image-style shopPics",fit:"contain"},null,8,["src"])]),s("div",Fe,[s("a",{href:l(se)({path:"product",id:e.product_id}),target:"_blank"},v(e.product_name),9,Pe)])])]),_:1}),t(r,{width:260,label:"评价内容",prop:"content"},{default:a(({row:e})=>[s("div",Ne,v(e.content),1)]),_:1}),t(r,{width:250,label:"晒单",prop:"show_pics"},{default:a(({row:e})=>[e.show_pics?(c(),m("div",Be,[e.show_pics.length>1?(c(!0),m(z,{key:0},Y(e.show_pics,(p,J)=>(c(),m(z,null,[J<4?(c(),Z(l(q),{key:0,class:"shopPics",src:l(U)(p.pic_thumb),width:"50",style:{},fit:"contain"},null,8,["src"])):u("",!0)],64))),256)):u("",!0)])):(c(),m("div",De,"--"))]),_:1}),t(r,{label:"评论等级",prop:"comment_rank",sortable:"custom",width:"100"},{default:a(({row:e})=>[t(l(F),{"org-value":e.comment_rank,"onUpdate:orgValue":p=>e.comment_rank=p,params:{id:e.comment_id,field:"comment_rank"},type:"number",minNum:1,maxNum:5,requestApi:l(y),label:"评论等级"},{default:a(()=>[s("div",null,v(e.comment_rank)+"星",1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),t(r,{label:"评论日期",prop:"add_time",sortable:"custom",width:"160"}),t(r,{label:"是否置顶",prop:"is_top",sortable:"custom",width:"100"},{default:a(({row:e})=>[t(l(P),{checked:e.is_top,"onUpdate:checked":p=>e.is_top=p,params:{id:e.comment_id,field:"is_top"},requestApi:l(y)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),t(r,{label:"是否推荐",prop:"is_recommend",sortable:"custom",width:"100"},{default:a(({row:e})=>[t(l(P),{checked:e.is_recommend,"onUpdate:checked":p=>e.is_recommend=p,params:{id:e.comment_id,field:"is_recommend"},requestApi:l(y)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),t(r,{label:"排序",prop:"sort_order",sortable:"custom"},{default:a(({row:e})=>[t(l(F),{"org-value":e.sort_order,"onUpdate:orgValue":p=>e.sort_order=p,params:{id:e.comment_id,field:"sort_order"},requestApi:l(y),label:"排序"},{default:a(()=>[s("div",null,v(e.sort_order),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),t(r,{width:"100",fixed:"right",label:"操作"},{default:a(({row:e})=>[t(l(N),{params:{act:"detail",id:e.comment_id},isDrawer:"",path:"product/comment/Info",title:"编辑用户评论",width:"700px",onOkCallback:_},{default:a(()=>o[10]||(o[10]=[s("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),t(G,{direction:"vertical"}),t(l(te),{params:{id:e.comment_id},requestApi:l(ne),onAfterDelete:_},{default:a(()=>o[11]||(o[11]=[g("删除")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),k.value>0?(c(),m("div",Le,[t(l(oe),{page:i.page,"onUpdate:page":o[3]||(o[3]=e=>i.page=e),size:i.size,"onUpdate:size":o[4]||(o[4]=e=>i.size=e),total:k.value,onCallback:_},null,8,["page","size","total"])])):u("",!0)])])])):u("",!0)])])}}}),tt=ee(Me,[["__scopeId","data-v-7eea418e"]]);export{tt as default};
