import{d as q,de as E,j as f,E as L,s as O,x as j,r as n,o as g,c as A,e as p,k as S,w as l,b as e,f as U,h as V,H as m,$ as T,a0 as G,K as b}from"./index-7c2d2aef.js";import{F as H}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-9b6073fb.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import{_ as K}from"./SelectCategory.vue_vue_type_script_setup_true_lang-a47fadcd.js";import"./index-6c62cf9b.js";import"./config-9548fa9b.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import"./region-e0d291a6.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import{c as M,e as z}from"./category-7b076a22.js";import{u as J}from"./category-a8bd4d11.js";import{B as P}from"./BusinessData-197b7ba6.js";import"./vuedraggable.umd-75ad0f8f.js";import"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import"./format-4e0206d3.js";import"./util-1ee03ed8.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./time-290942a2.js";import"./config-e2aa16d1.js";import"./region-05802f67.js";import"./currencyManagement-2d40fd5e.js";import"./version-f7bce787.js";const Q={class:"container"},W={class:"content_wrapper"},X={class:"lyecs-form-table"},Y=p("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1),Z=p("div",{class:"extra"},'请先在Tigshop设置中的"接口设置"中设置"ico图标库地址"',-1),ee=p("div",{class:"extra"},"如果不填，则该分类页的标题则为默认标题；如果该项不为空，则该分类页的标题显示此项的内容。",-1),Ue=q({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean,parentId:Number},emits:["submitCallback","update:confirmLoading","close"],setup(B,{expose:N,emit:D}){E();const _=D,d=B,i=f(!0),w=L().currentRoute.value.query,v=f(d.isDialog?d.act:String(w.act)),y=f(d.isDialog?d.id:Number(w.id)),k=v.value==="add"?"create":"update",h=O(),o=f({is_show:1,sort_order:50}),R=async()=>{try{const s=await M(v.value,{id:y.value});Object.assign(o.value,s.item)}catch(s){b.error(s.message),_("close")}finally{i.value=!1}};j(()=>{v.value==="detail"?R():i.value=!1,k==="create"&&(o.value.parent_id=d.parentId,console.log(o.value.parent_id))});const x=async()=>{await h.value.validate();try{_("update:confirmLoading",!0);const s=await z(k,{id:y.value,...o.value});_("submitCallback",s),b.success(s.message),J().clearCategory()}catch(s){b.error(s.message)}finally{_("update:confirmLoading",!1)}};return N({onFormSubmit:()=>{x()}}),(s,a)=>{const r=n("el-form-item"),u=n("el-input"),c=n("el-radio"),C=n("el-radio-group"),F=n("el-button"),I=n("el-form"),$=n("a-spin");return g(),A("div",Q,[p("div",W,[p("div",X,[i.value?V("",!0):(g(),S(I,{key:0,ref_key:"formRef",ref:h,model:o.value,"label-width":"auto"},{default:l(()=>[e(r,{rules:[{required:!0,message:"分类名称不能为空!"}],label:"分类名称",prop:"category_name"},{default:l(()=>[e(P,{modelValue:o.value.category_name,"onUpdate:modelValue":a[0]||(a[0]=t=>o.value.category_name=t),placeholder:"请输入分类名称",data_type:3,data_id:y.value},null,8,["modelValue","data_id"])]),_:1}),e(r,{label:"分类短名",prop:"short_name"},{default:l(()=>[e(u,{modelValue:o.value.short_name,"onUpdate:modelValue":a[1]||(a[1]=t=>o.value.short_name=t)},null,8,["modelValue"])]),_:1}),e(r,{label:"上级分类",prop:"parent_id"},{default:l(()=>[i.value?V("",!0):(g(),S(U(K),{key:0,category_id:o.value.parent_id,"onUpdate:category_id":a[2]||(a[2]=t=>o.value.parent_id=t),multiple:!1,style:{width:"100%"}},null,8,["category_id"]))]),_:1}),e(r,{label:"分类图片",prop:"category_pic"},{default:l(()=>[e(U(H),{photo:o.value.category_pic,"onUpdate:photo":a[3]||(a[3]=t=>o.value.category_pic=t)},null,8,["photo"]),Y]),_:1}),e(r,{label:"数量单位",prop:"measure_unit"},{default:l(()=>[e(u,{modelValue:o.value.measure_unit,"onUpdate:modelValue":a[4]||(a[4]=t=>o.value.measure_unit=t)},null,8,["modelValue"])]),_:1}),e(r,{label:"ICO图标",prop:"category_ico"},{default:l(()=>[e(u,{modelValue:o.value.category_ico,"onUpdate:modelValue":a[5]||(a[5]=t=>o.value.category_ico=t)},null,8,["modelValue"]),Z]),_:1}),e(r,{label:"SEO标题",prop:"seo_title"},{default:l(()=>[e(u,{modelValue:o.value.seo_title,"onUpdate:modelValue":a[6]||(a[6]=t=>o.value.seo_title=t)},null,8,["modelValue"]),ee]),_:1}),V("",!0),e(r,{label:"关键字",prop:"keywords"},{default:l(()=>[e(u,{modelValue:o.value.keywords,"onUpdate:modelValue":a[8]||(a[8]=t=>o.value.keywords=t)},null,8,["modelValue"])]),_:1}),e(r,{label:"分类描述",prop:"category_desc"},{default:l(()=>[e(u,{modelValue:o.value.category_desc,"onUpdate:modelValue":a[9]||(a[9]=t=>o.value.category_desc=t),row:"2",type:"textarea"},null,8,["modelValue"])]),_:1}),e(r,{label:"排序",prop:"sort_order"},{default:l(()=>[e(u,{modelValue:o.value.sort_order,"onUpdate:modelValue":a[10]||(a[10]=t=>o.value.sort_order=t)},null,8,["modelValue"])]),_:1}),e(r,{label:"是否热门",prop:"is_hot"},{default:l(()=>[e(C,{modelValue:o.value.is_hot,"onUpdate:modelValue":a[11]||(a[11]=t=>o.value.is_hot=t)},{default:l(()=>[e(c,{value:1},{default:l(()=>[m("是")]),_:1}),e(c,{value:0},{default:l(()=>[m("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"是否显示",prop:"is_show"},{default:l(()=>[e(C,{modelValue:o.value.is_show,"onUpdate:modelValue":a[12]||(a[12]=t=>o.value.is_show=t)},{default:l(()=>[e(c,{value:1},{default:l(()=>[m("是")]),_:1}),e(c,{value:0},{default:l(()=>[m("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),T(e(r,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[e(F,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:x},{default:l(()=>[m("提交 ")]),_:1},512)]),_:1},512),[[G,!d.isDialog]])]),_:1},8,["model"])),e($,{spinning:i.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{Ue as default};
