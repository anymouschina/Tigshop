import{d as P,C as Y,K as q,i as c,G as E,q as K,aT as R,c as l,e as o,f,b as s,w as a,M as $,g as z,I as w,r as p,o as i,E as u,D as d,_ as j}from"./index-DrbzVNl6.js";/* empty css             *//* empty css                                                                    */import{P as A}from"./Pagination-wR9huHyl.js";import{d as G,c as H}from"./shop-DM8_bN_f.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import"./index-CeQDmMxd.js";/* empty css                                                                  *//* empty css                                                                              */import{S as J}from"./SelectTimeInterval-C-WvSG46.js";import"./time-Bh5UhrfW.js";const Q={class:"container"},W={class:"content_wrapper"},X={class:"container"},Z={class:"lyecs-table-list-warp"},ee={class:"list-table-tool lyecs-search-warp"},te={class:"advanced-search-warp list-table-tool-row"},oe={class:"simple-form-warp"},se={class:"simple-form-field"},ne={class:"form-group"},ae={class:"control-container"},le={class:"simple-form-field"},ie={class:"form-group"},re={class:"control-container"},de={class:"simple-form-field"},ce={class:"table-container"},pe={key:0,style:{color:"#0000ff"}},ue={key:1,style:{color:"#ff0000"}},_e={key:2},me={key:3,style:{color:"#999","font-size":"12px"}},fe={key:0,style:{color:"#0000ff"}},ye={key:1,style:{color:"#ff0000"}},ve={key:2},he={key:3,style:{color:"#999","font-size":"12px"}},ge={class:"empty-warp"},be={key:0,class:"empty-bg"},ke={key:0,class:"pagination-con"},we={key:0,class:"selected-action-warp"},Me={class:"selected-action"},Te=P({__name:"List",props:{shopId:{type:Number,default:0}},setup(C){const y=Y().currentRoute.value.query,S=C,I=q(),M=c([]),_=c(!1),v=c(0),b=c([]);c(!1);const n=E({page:1,size:I.get("pageSize"),sortField:"",sortOrder:"",keyword:"",shopId:S.shopId||-1,endTime:"",startTime:""}),m=async()=>{_.value=!0;try{const r=await G({...n});M.value=r.records,v.value=r.total}catch(r){w.error(r.message)}finally{_.value=!1}},x=()=>{let r=window.location.href,e=new URL(r);e.search="",window.history.replaceState({},document.title,e.toString())},U=c(),T=c(0);K(()=>{m(),console.log(y),y.id&&R.confirm(`为[${y.companyName||"--"}]立即创建店铺?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{T.value=Number(y.id),U.value.show()}).catch(()=>{T.value=0,x()})});const h=()=>{m()},B=({prop:r,order:e})=>{n.sortField=r,n.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",m()},N=async r=>{try{const e=await H(r,{ids:b.value});w.success("操作成功"),m()}catch(e){w.error(e.message)}};return(r,e)=>{const k=p("el-button"),V=p("TigInput"),g=p("el-table-column"),D=p("el-table"),F=p("a-spin"),L=p("el-popconfirm"),O=p("el-space");return i(),l("div",Q,[o("div",W,[o("div",X,[o("div",Z,[o("div",ee,[o("div",te,[o("div",oe,[o("div",se,[o("div",ne,[o("div",ae,[s(V,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>n.keyword=t),name:"keyword",placeholder:"输入店铺名称",onKeyup:$(h,["enter"]),clearable:"",onClear:h},{append:a(()=>[s(k,{onClick:h},{default:a(()=>e[6]||(e[6]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),o("div",le,[o("div",ie,[e[7]||(e[7]=o("label",{class:"control-label"},[o("span",null,"时间范围：")],-1)),o("div",re,[s(z(J),{"end-date":n.endTime,"onUpdate:endDate":e[1]||(e[1]=t=>n.endTime=t),"start-date":n.startTime,"onUpdate:startDate":e[2]||(e[2]=t=>n.startTime=t),clearable:!1,type:"date","value-format":"YYYY-MM-DD"},null,8,["end-date","start-date"])])])]),o("div",de,[s(k,{type:"primary",onClick:h},{default:a(()=>e[8]||(e[8]=[u("搜索")])),_:1})])])])]),o("div",ce,[s(F,{spinning:_.value},{default:a(()=>[s(D,{data:M.value,loading:_.value,total:v.value,"row-key":"shopId",onSortChange:B},{empty:a(()=>[o("div",ge,[_.value?f("",!0):(i(),l("div",be,"暂无数据"))])]),default:a(()=>[s(g,{label:"账户变动时间"},{default:a(({row:t})=>[u(d(t.addTime||"--"),1)]),_:1}),s(g,{label:"店铺名称"},{default:a(({row:t})=>[u(d(t.shopTitle||"--"),1)]),_:1}),s(g,{label:"变动资金账户"},{default:a(({row:t})=>[t.type==1?(i(),l("span",pe,"+"+d(t.shopMoney),1)):t.type==2?(i(),l("span",ue,"-"+d(t.shopMoney),1)):(i(),l("span",_e,d(t.shopMoney),1)),t.new_shopMoney?(i(),l("span",me,"（变更后金额:"+d(t.new_shopMoney)+"）",1)):f("",!0)]),_:1}),s(g,{label:"冻结资金账户",width:"250"},{default:a(({row:t})=>[t.type==1?(i(),l("span",fe,"+"+d(t.frozenMoney),1)):t.type==2?(i(),l("span",ye,"-"+d(t.frozenMoney),1)):(i(),l("span",ve,d(t.frozenMoney),1)),t.new_frozenMoney?(i(),l("span",he,"（变更后金额:"+d(t.new_frozenMoney)+"）",1)):f("",!0)]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),v.value>0?(i(),l("div",ke,[s(z(A),{page:n.page,"onUpdate:page":e[3]||(e[3]=t=>n.page=t),size:n.size,"onUpdate:size":e[4]||(e[4]=t=>n.size=t),total:v.value,onCallback:m},null,8,["page","size","total"])])):f("",!0)]),b.value.length>0?(i(),l("div",we,[o("div",Me,[s(O,null,{default:a(()=>[o("span",null,[e[9]||(e[9]=u("已选择：")),o("b",null,d(b.value.length),1),e[10]||(e[10]=u(" 项"))]),s(L,{title:"您确认要批量删除所选数据吗？",onConfirm:e[5]||(e[5]=t=>N("del"))},{reference:a(()=>[s(k,null,{default:a(()=>e[11]||(e[11]=[u("批量删除")])),_:1})]),_:1})]),_:1})])])):f("",!0)])])])])}}}),Le=j(Te,[["__scopeId","data-v-579a6be1"]]);export{Le as default};
