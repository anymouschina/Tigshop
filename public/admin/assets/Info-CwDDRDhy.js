import{d as L,i as f,C as U,s as j,q as A,I as _,r as u,c as E,o as C,e as x,j as F,f as I,w as t,b as a,a0 as M,E as i,a1 as O}from"./index-CGYuOau0.js";import{a as T,c as $}from"./areaCode-Bebzj2ob.js";const z={class:"container"},G={class:"content_wrapper"},H={class:"lyecs-form-table"},Q=L({__name:"Info",props:{id:{type:Number,default:0},promotion_type:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(k,{expose:N,emit:S}){const d=S,n=k,p=f(!0),v=U().currentRoute.value.query,c=f(n.isDialog?n.act:String(v.act)),b=f(n.isDialog?n.id:Number(v.id)),B=c.value==="add"?"create":"update",g=j(),l=f({name:"",code:"",is_default:0,is_available:1});A(()=>{c.value==="detail"?q():p.value=!1});const q=async()=>{try{const o=await T(c.value,{id:b.value});Object.assign(l.value,o.item)}catch(o){_.error(o.message),d("close")}finally{p.value=!1}},y=async()=>{await g.value.validate();try{d("update:confirmLoading",!0);const o=await $(B,{id:b.value,...l.value});d("submitCallback",o),_.success(o.message)}catch(o){_.error(o.message)}finally{d("update:confirmLoading",!1)}};return N({onFormSubmit:()=>{y()}}),(o,e)=>{const V=u("el-input"),r=u("el-form-item"),m=u("el-radio"),w=u("el-radio-group"),D=u("el-button"),R=u("el-form");return C(),E("div",z,[x("div",G,[x("div",H,[p.value?I("",!0):(C(),F(R,{key:0,ref_key:"formRef",ref:g,model:l.value,"label-width":"auto"},{default:t(()=>[a(r,{prop:"name",label:"区号地区：",rules:[{required:!0,message:"区号地区不能为空!"}]},{default:t(()=>[a(V,{type:"text",maxlength:"60",modelValue:l.value.name,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.name=s)},null,8,["modelValue"])]),_:1}),a(r,{prop:"code",label:"区号：",rules:[{required:!0,message:"区号不能为空!"}]},{default:t(()=>[a(V,{type:"text",maxlength:"60",modelValue:l.value.code,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.code=s)},null,8,["modelValue"])]),_:1}),a(r,{prop:"is_default",label:"是否默认："},{default:t(()=>[a(w,{modelValue:l.value.is_default,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.is_default=s)},{default:t(()=>[a(m,{value:1},{default:t(()=>e[5]||(e[5]=[i("是")])),_:1}),a(m,{value:0},{default:t(()=>e[6]||(e[6]=[i("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(r,{prop:"is_default",label:"是否启用："},{default:t(()=>[a(w,{modelValue:l.value.is_available,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.is_available=s)},{default:t(()=>[a(m,{value:1},{default:t(()=>e[7]||(e[7]=[i("是")])),_:1}),a(m,{value:0},{default:t(()=>e[8]||(e[8]=[i("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),M(a(r,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[a(D,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[4]||(e[4]=s=>y())},{default:t(()=>e[9]||(e[9]=[i("提交")])),_:1},512)]),_:1},512),[[O,!n.isDialog]])]),_:1},8,["model"]))])])])}}});export{Q as default};
