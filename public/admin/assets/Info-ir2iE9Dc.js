import{d as F,bp as E,i as v,C as H,s as K,q as L,r as u,c as P,o as V,e as c,j as U,f as b,b as o,w as l,a3 as $,g as C,E as p,a4 as j,I as _}from"./index-DrbzVNl6.js";import{F as A}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-BDvYUQtN.js";import"./index-CeQDmMxd.js";import"./vuedraggable.umd-DAKh-e3Q.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import{_ as G}from"./SelectCategory.vue_vue_type_script_setup_true_lang-DKnpU9uO.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              *//* empty css             */import{c as M,e as z}from"./category-B3nMG9Bb.js";import{u as J}from"./category-BQLd1cDS.js";import{B as Q}from"./BusinessData-CHGCSdy5.js";import"./Image.vue_vue_type_script_setup_true_lang-BWzCs9jv.js";import"./format-CRgx78oe.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./time-Bh5UhrfW.js";import"./currencyManagement-ChS-Zs2m.js";import"./version-CL9k3sYf.js";const W={class:"container"},X={class:"content_wrapper"},Y={class:"lyecs-form-table"},Ve=F({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean,parentId:Number},emits:["submitCallback","update:confirmLoading","close"],setup(N,{expose:x,emit:B}){E();const m=B,n=N,i=v(!0),w=H().currentRoute.value.query,y=v(n.isDialog?n.act:String(w.act)),g=v(n.isDialog?n.id:Number(w.id)),S=y.value==="add"?"create":"update",I=K(),t=v({isShow:1,sortOrder:50}),D=async()=>{try{const s=await M(y.value,{id:g.value});Object.assign(t.value,s)}catch(s){_.error(s.message),m("close")}finally{i.value=!1}};L(()=>{y.value==="detail"?D():i.value=!1,S==="create"&&(t.value.parentId=n.parentId,console.log(t.value.parentId))});const k=async()=>{await I.value.validate();try{m("update:confirmLoading",!0);const s=await z(S,{id:g.value,...t.value});m("submitCallback",s),_.success("操作成功"),J().clearCategory()}catch(s){_.error(s.message)}finally{m("update:confirmLoading",!1)}};return x({onFormSubmit:()=>{k()}}),(s,e)=>{const r=u("el-form-item"),d=u("TigInput"),f=u("el-radio"),T=u("el-radio-group"),O=u("el-button"),R=u("el-form"),q=u("a-spin");return V(),P("div",W,[c("div",X,[c("div",Y,[i.value?b("",!0):(V(),U(R,{key:0,ref_key:"formRef",ref:I,model:t.value,"label-width":"auto"},{default:l(()=>[o(r,{rules:[{required:!0,message:"分类名称不能为空!"}],label:"分类名称",prop:"categoryName"},{default:l(()=>[o(Q,{modelValue:t.value.categoryName,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.categoryName=a),placeholder:"请输入分类名称",dataType:3,dataId:g.value},null,8,["modelValue","dataId"])]),_:1}),o(r,{label:"分类短名",prop:"shortName"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.shortName,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.shortName=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"上级分类",prop:"parentId"},{default:l(()=>[i.value?b("",!0):(V(),U(C(G),{key:0,categoryId:t.value.parentId,"onUpdate:categoryId":e[2]||(e[2]=a=>t.value.parentId=a),multiple:!1},null,8,["categoryId"]))]),_:1}),o(r,{label:"分类图片",prop:"categoryPic"},{default:l(()=>[o(C(A),{photo:t.value.categoryPic,"onUpdate:photo":e[3]||(e[3]=a=>t.value.categoryPic=a)},null,8,["photo"]),e[12]||(e[12]=c("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1))]),_:1}),o(r,{label:"数量单位",prop:"measureUnit"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.measureUnit,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.measureUnit=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"SEO标题",prop:"seoTitle"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.seoTitle,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.seoTitle=a)},null,8,["modelValue"]),e[13]||(e[13]=c("div",{class:"extra"},"如果不填，则该分类页的标题则为默认标题；如果该项不为空，则该分类页的标题显示此项的内容。",-1))]),_:1}),b("",!0),o(r,{label:"关键字",prop:"keywords"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.keywords,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.keywords=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"分类描述",prop:"categoryDesc"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.categoryDesc,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.categoryDesc=a),row:2,type:"textarea"},null,8,["modelValue"])]),_:1}),o(r,{label:"排序",prop:"sortOrder"},{default:l(()=>[o(d,{classType:"tig-form-input",type:"integer",modelValue:t.value.sortOrder,"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.sortOrder=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"是否热门",prop:"isHot"},{default:l(()=>[o(T,{modelValue:t.value.isHot,"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.isHot=a)},{default:l(()=>[o(f,{value:1},{default:l(()=>e[14]||(e[14]=[p("是")])),_:1}),o(f,{value:0},{default:l(()=>e[15]||(e[15]=[p("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"是否显示",prop:"isShow"},{default:l(()=>[o(T,{modelValue:t.value.isShow,"onUpdate:modelValue":e[11]||(e[11]=a=>t.value.isShow=a)},{default:l(()=>[o(f,{value:1},{default:l(()=>e[16]||(e[16]=[p("是")])),_:1}),o(f,{value:0},{default:l(()=>e[17]||(e[17]=[p("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),$(o(r,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[o(O,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:k},{default:l(()=>e[18]||(e[18]=[p("提交 ")])),_:1},512)]),_:1},512),[[j,!n.isDialog]])]),_:1},8,["model"])),o(q,{spinning:i.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{Ve as default};
