import{d as O,K as E,i as g,G as M,q as $,c as r,e,b as o,w as a,N as G,f as w,g as c,I as k,r as d,o as p,E as u,D as C,F as I,a as x,_ as K}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{P as R}from"./PopFormElm-BZp1_Wme.js";import{D as j}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as H}from"./Pagination-wR9huHyl.js";import{g as J,u as Q,d as W,b as X}from"./productAttributesTpl-DNP5GILP.js";import{_ as A}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const Y={class:"container"},Z={class:"content_wrapper"},tt={class:"lyecs-table-list-warp"},et={class:"list-table-tool lyecs-search-warp"},ot={class:"advanced-search-warp list-table-tool-row"},st={class:"simple-form-warp"},at={class:"simple-form-field"},lt={class:"form-group"},nt={class:"control-container"},it={class:"simple-form-field"},rt={class:"form-group"},dt={class:"control-container"},pt={class:"simple-form-field"},ct={class:"form-group"},ut={class:"control-container"},mt={key:0},_t={class:"table-container"},ft={style:{position:"relative"}},vt={class:"tpl-data-con"},gt={class:"empty-warp"},bt={key:0,class:"empty-bg"},ht={key:0,class:"pagination-con"},yt=O({__name:"List",setup(wt){const N=E(),S=g(),m=g(!0),f=g(0),_=g([]),n=M({page:1,size:N.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),i=async()=>{m.value=!0;try{const l=await J({...n});S.value=l.records,f.value=l.total}catch(l){k.error(l.message)}finally{m.value=!1}};$(()=>{i()});const b=()=>{i()},V=({prop:l,order:t})=>{n.sortField=l,n.sortOrder=t=="ascending"?"asc":t=="descending"?"desc":"",i()},D=async l=>{try{const t=await X(l,{ids:_.value});k.success("操作成功"),i()}catch(t){k.error(t.message)}},P=l=>{_.value=l.map(t=>t.tplId)};return(l,t)=>{const h=d("el-button"),T=d("TigInput"),z=d("el-popconfirm"),F=d("el-form"),v=d("el-table-column"),q=d("el-divider"),U=d("el-table"),B=d("a-spin");return p(),r("div",Y,[e("div",Z,[e("div",tt,[e("div",et,[o(F,{model:n,onSubmit:G(b,["prevent"])},{default:a(()=>[e("div",ot,[e("div",st,[e("div",at,[e("div",lt,[e("div",nt,[o(T,{modelValue:n.keyword,"onUpdate:modelValue":t[0]||(t[0]=s=>n.keyword=s),name:"keyword",placeholder:"输入属性模板名称",clearable:"",onClear:b},{append:a(()=>[o(h,{onClick:b},{default:a(()=>t[4]||(t[4]=[e("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),e("div",it,[e("div",rt,[e("div",dt,[o(c(A),{params:{act:"add"},isDrawer:"",path:"product/productAttributesTpl/Info",title:"添加属性模板",width:"600px",onOkCallback:i},{default:a(()=>[o(h,{type:"primary"},{default:a(()=>t[5]||(t[5]=[u("添加属性模板")])),_:1})]),_:1})])])]),e("div",pt,[e("div",ct,[e("div",ut,[o(z,{title:"您确认要批量删除所选数据吗？",onConfirm:t[1]||(t[1]=s=>D("del"))},{reference:a(()=>[o(h,{disabled:_.value.length===0},{default:a(()=>t[6]||(t[6]=[u("批量删除")])),_:1},8,["disabled"])]),_:1}),_.value.length>0?(p(),r("span",mt,[t[7]||(t[7]=u(" 已选择：")),e("b",null,C(_.value.length),1),t[8]||(t[8]=u(" 项 "))])):w("",!0)])])])])])]),_:1},8,["model"])]),e("div",_t,[o(B,{spinning:m.value},{default:a(()=>[o(U,{data:S.value,loading:m.value,total:f.value,"row-key":"tplId",onSelectionChange:P,onSortChange:V},{empty:a(()=>[e("div",gt,[m.value?w("",!0):(p(),r("div",bt,"暂无数据"))])]),default:a(()=>[o(v,{type:"selection",width:"32"}),o(v,{label:"属性模板名称",sortable:"custom",width:"200"},{default:a(({row:s})=>[e("div",ft,[o(c(R),{"org-value":s.tplName,"onUpdate:orgValue":y=>s.tplName=y,max:50,params:{id:s.tplId,field:"tplName"},requestApi:c(Q),label:"属性模板名称",type:"textarea"},{default:a(()=>[e("div",null,C(s.tplName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])])]),_:1}),o(v,{label:"属性名称列表"},{default:a(({row:s})=>[e("div",vt,[(p(!0),r(I,null,x(s.tplData,y=>(p(),r(I,null,[(p(!0),r(I,null,x(y,L=>(p(),r("span",null,[u(C(L.attrName),1),t[9]||(t[9]=e("em",null,"，",-1))]))),256))],64))),256))])]),_:1}),o(v,{width:150,fixed:"right",label:"操作"},{default:a(({row:s})=>[o(c(A),{params:{act:"detail",id:s.tplId},isDrawer:"",path:"product/productAttributesTpl/Info",title:"编辑属性模板",width:"600px",onOkCallback:i},{default:a(()=>t[10]||(t[10]=[e("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(q,{direction:"vertical"}),o(c(j),{params:{id:s.tplId},requestApi:c(W),onAfterDelete:i},{default:a(()=>t[11]||(t[11]=[u("删除")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),f.value>0?(p(),r("div",ht,[o(c(H),{page:n.page,"onUpdate:page":t[2]||(t[2]=s=>n.page=s),size:n.size,"onUpdate:size":t[3]||(t[3]=s=>n.size=s),total:f.value,onCallback:i},null,8,["page","size","total"])])):w("",!0)])])])])}}}),Pt=K(yt,[["__scopeId","data-v-25eba633"]]);export{Pt as default};
