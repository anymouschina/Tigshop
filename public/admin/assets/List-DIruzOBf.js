import{d as P,i as _,G as $,q as G,c as C,e as t,f as z,b as l,w as o,g as n,I as D,r as c,o as k,L as I,E as a,D as i,bd as v}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";/* empty css                                                                    */import{P as K}from"./Pagination-yOfjsBuR.js";import{p as b}from"./format-DFT-VJzO.js";import{u as M}from"./config-DNllFJyR.js";import{a as T,e as X}from"./promoter-qSS9u1u2.js";import{r as j}from"./export-Bb89fUlC.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as A,a as H}from"./SelectPromoteMode.vue_vue_type_script_setup_true_lang-BMur74x8.js";import{_ as J}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";import"./time-ClyPenjC.js";import"./subgroup-UdERYvwq.js";import"./promoteMode-BC1ek4yp.js";const Q={class:"container"},R={class:"content_wrapper"},W={class:"lyecs-table-list-warp"},Y={class:"list-table-tool lyecs-search-warp"},Z={class:"advanced-search-warp list-table-tool-row"},ee={class:"simple-form-warp"},te={class:"simple-form-field"},oe={class:"form-group"},le={class:"control-container"},se={class:"simple-form-field"},ae={class:"form-group"},ne={class:"control-container"},ie={class:"simple-form-field"},re={class:"form-group"},de={class:"control-container"},pe={class:"simple-form-field"},ce={class:"advanced-search-warp list-table-tool-row"},_e={class:"simple-form-warp"},ue={class:"simple-form-field"},fe={class:"table-container"},me={class:"flex flex-align-center"},ge={class:"flex flex-align-center"},ve={class:"flex flex-align-center"},be={class:"flex flex-align-center"},he={class:"flex flex-align-center"},ye={class:"btn-link"},we={class:"empty-warp"},xe={key:0,class:"empty-bg"},Ce={key:0,class:"pagination-con"},ke={key:0,class:"selected-action-warp"},ze={class:"selected-action"},je=P({__name:"List",setup(Ee){const h=M(),E=_([]),y=_(!0),w=_(0);_(0);const S=_([]),r=$({page:1,sort_field:"",sort_order:"",mobile:"",group_id:"",level:""});_(-1);const u=async()=>{y.value=!0;try{const p=await T({...r,size:h.pageSize});E.value=p.filter_result,w.value=p.total}catch(p){D.error(p.message)}finally{y.value=!1}},x=_(!1),U=async()=>{x.value=!0;try{const p=await X({...r,is_export:"1",size:-1});x.value=!1,j(p,"分销员明细导出")}catch(p){D.error(p.message)}finally{x.value=!1}};G(()=>{u()});const f=()=>{u()},N=({prop:p,order:e})=>{r.sort_field=p,r.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",u()};return(p,e)=>{const q=c("el-input"),V=c("el-button"),B=c("el-form"),d=c("el-table-column"),m=c("el-icon"),g=c("el-tooltip"),F=c("el-table"),L=c("a-spin"),O=c("el-space");return k(),C("div",Q,[t("div",R,[t("div",W,[t("div",Y,[l(B,{model:r,name:"form"},{default:o(()=>[t("div",Z,[t("div",ee,[t("div",te,[t("div",oe,[e[5]||(e[5]=t("label",{class:"control-label"},[t("span",null,"分销员：")],-1)),t("div",le,[l(q,{modelValue:r.mobile,"onUpdate:modelValue":e[0]||(e[0]=s=>r.mobile=s),name:"mobile",placeholder:"请输入手机号",onKeyup:I(f,["enter"]),clearable:"",onClear:f},null,8,["modelValue"])])])]),t("div",se,[t("div",ae,[e[6]||(e[6]=t("label",{class:"control-label"},[t("span",null,"分组：")],-1)),t("div",ne,[l(n(A),{group_id:r.group_id,"onUpdate:group_id":e[1]||(e[1]=s=>r.group_id=s),onOnChange:f},null,8,["group_id"])])])]),t("div",ie,[t("div",re,[e[7]||(e[7]=t("label",{class:"control-label"},[t("span",null,"等级：")],-1)),t("div",de,[l(n(H),{level:r.level,"onUpdate:level":e[2]||(e[2]=s=>r.level=s),onOnChange:f},null,8,["level"])])])]),t("div",pe,[l(V,{type:"primary",onClick:f},{default:o(()=>e[8]||(e[8]=[a("搜索")])),_:1})])])]),t("div",ce,[t("div",_e,[t("div",ue,[l(V,{type:"primary",onClick:U,loading:x.value},{default:o(()=>e[9]||(e[9]=[a("导出EXCEL")])),_:1},8,["loading"])])])])]),_:1},8,["model"])]),t("div",fe,[l(L,{spinning:y.value},{default:o(()=>[l(F,{data:E.value,total:w.value,"row-key":"product_id",onSortChange:N},{empty:o(()=>[t("div",we,[y.value?z("",!0):(k(),C("div",xe,"暂无数据"))])]),default:o(()=>[l(d,{label:"手机号",prop:"product_id",width:130,fixed:"left"},{default:o(({row:s})=>[a(i(s.base_user_info.mobile),1)]),_:1}),l(d,{label:"昵称",prop:"product_id",width:100},{default:o(({row:s})=>[a(i(s.base_user_info.nickname||s.base_user_info.username),1)]),_:1}),l(d,{label:"等级",prop:"product_id",width:100},{default:o(({row:s})=>[a(i(s.level_text),1)]),_:1}),l(d,{label:"分组",prop:"product_id",width:100},{default:o(({row:s})=>[a(i(s.group_info.group_name),1)]),_:1}),l(d,{prop:"product_id",align:"left"},{header:o(()=>[t("div",me,[t("p",null,"累计销售金额("+i(n(h).config.amount_unit)+")",1),l(g,{placement:"top",effect:"light"},{content:o(()=>e[10]||(e[10]=[a(" 累计业绩为实际有效业绩，剔除了退款金额。 ")])),default:o(()=>[l(m,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:o(()=>[l(n(v))]),_:1})]),_:1})])]),default:o(({row:s})=>[a(i(n(b)(s.sale_amount)),1)]),_:1}),l(d,{prop:"product_id",align:"left"},{header:o(()=>[t("div",ge,[t("p",null,"支付金额("+i(n(h).config.amount_unit)+")",1),l(g,{placement:"top",effect:"light"},{content:o(()=>e[11]||(e[11]=[a(" 所选时间内，分销员客户的支付成功金额（含退款）。目前仅支持展示2023.11后的数据。 ")])),default:o(()=>[l(m,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:o(()=>[l(n(v))]),_:1})]),_:1})])]),default:o(({row:s})=>[a(i(n(b)(s.pay_money)),1)]),_:1}),l(d,{prop:"product_id",align:"left"},{header:o(()=>[t("div",ve,[t("p",null,"退款金额("+i(n(h).config.amount_unit)+")",1),l(g,{placement:"top",effect:"light"},{content:o(()=>e[12]||(e[12]=[a(" 所选时间内，分销员客户的全额退款和部分退款的退款成功金额。目前仅支持展示2023.11后的数据。 ")])),default:o(()=>[l(m,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:o(()=>[l(n(v))]),_:1})]),_:1})])]),default:o(({row:s})=>[a(i(n(b)(s.refund_amount)),1)]),_:1}),l(d,{prop:"product_id",width:140,align:"left"},{header:o(()=>[t("div",be,[e[14]||(e[14]=t("p",null,"支付订单数",-1)),l(g,{placement:"top",effect:"light"},{content:o(()=>e[13]||(e[13]=[a(" 所选时间内，分销员客户的所有已支付的订单。目前仅支持展示2023.11后的数据。 ")])),default:o(()=>[l(m,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:o(()=>[l(n(v))]),_:1})]),_:1})])]),default:o(({row:s})=>[a(i(s.order_count),1)]),_:1}),l(d,{prop:"product_id",width:140,align:"left"},{header:o(()=>[t("div",he,[e[16]||(e[16]=t("p",null,"退款订单数",-1)),l(g,{placement:"top",effect:"light"},{content:o(()=>e[15]||(e[15]=[a(" 所选时间内，分销员客户的全额退款和部分退款的订单总数。目前仅支持展示2023.11后的数据。 ")])),default:o(()=>[l(m,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:o(()=>[l(n(v))]),_:1})]),_:1})])]),default:o(({row:s})=>[a(i(s.refund_count),1)]),_:1}),l(d,{label:"已结算收益",prop:"product_id",width:100},{default:o(({row:s})=>[a(i(n(b)(s.total_commission)),1)]),_:1}),l(d,{label:"累计收益",prop:"product_id",width:100},{default:o(({row:s})=>[l(n(J),{params:{act:"detail",id:s.salesman_id},isDrawer:!1,showFooter:!1,path:"salesman/salesmanDetailed/src/cumulativeGain",title:"佣金详情",width:"600px",onOkCallback:u},{default:o(()=>[t("a",ye,i(n(b)(s.total_amount_commission)),1)]),_:2},1032,["params"])]),_:1}),l(d,{label:"累计客户数",prop:"product_id",width:100},{default:o(({row:s})=>[a(i(s.total_customer),1)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),w.value>0?(k(),C("div",Ce,[l(n(K),{page:r.page,"onUpdate:page":e[3]||(e[3]=s=>r.page=s),size:r.size,"onUpdate:size":e[4]||(e[4]=s=>r.size=s),total:w.value,onCallback:u},null,8,["page","size","total"])])):z("",!0)]),S.value.length>0?(k(),C("div",ke,[t("div",ze,[l(O,null,{default:o(()=>[t("span",null,[e[17]||(e[17]=a("已选择：")),t("b",null,i(S.value.length),1),e[18]||(e[18]=a(" 项"))])]),_:1})])])):z("",!0)])])])}}});export{je as default};
