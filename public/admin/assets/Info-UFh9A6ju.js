import{d as x,i as n,C as D,s as R,q,I as f,r as u,c as L,o as y,e as w,j,f as E,w as l,b as o,a0 as F,E as I,a1 as U}from"./index-CGYuOau0.js";import{a as G,u as M}from"./category-COJmNN7y.js";const O={class:"container"},T={class:"content_wrapper"},z={class:"lyecs-form-table"},K=x({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:"add"},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:k,emit:C}){const r=C,s=V,i=n(!0),p=D().currentRoute.value.query,c=n(s.isDialog?s.act:String(p.act)),_=n(s.isDialog?s.id:Number(p.id)),S=c.value==="add"?"create":"update",v=R(),a=n({sort_order:50});q(()=>{c.value==="detail"?h():i.value=!1});const h=async()=>{try{const e=await G(c.value,{id:_.value});Object.assign(a.value,e.item)}catch(e){f.error(e.message),r("close")}finally{i.value=!1}},b=async()=>{await v.value.validate();try{r("update:confirmLoading",!0);const e=await M(S,{id:_.value,...a.value});r("submitCallback",e),f.success(e.message)}catch(e){f.error(e.message)}finally{r("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{b()}}),(e,t)=>{const g=u("el-input"),m=u("el-form-item"),B=u("el-button"),N=u("el-form");return y(),L("div",O,[w("div",T,[w("div",z,[i.value?E("",!0):(y(),j(N,{key:0,ref_key:"formRef",ref:v,model:a.value,"label-width":"auto"},{default:l(()=>[o(m,{prop:"category_name",label:"分类名称：",rules:[{required:!0,message:"分类名称不能为空!"}]},{default:l(()=>[o(g,{modelValue:a.value.category_name,"onUpdate:modelValue":t[0]||(t[0]=d=>a.value.category_name=d),clearable:""},null,8,["modelValue"])]),_:1}),o(m,{prop:"sort_order",label:"排序："},{default:l(()=>[o(g,{modelValue:a.value.sort_order,"onUpdate:modelValue":t[1]||(t[1]=d=>a.value.sort_order=d),clearable:""},null,8,["modelValue"])]),_:1}),F(o(m,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[o(B,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:b},{default:l(()=>t[2]||(t[2]=[I("提交")])),_:1},512)]),_:1},512),[[U,!s.isDialog]])]),_:1},8,["model"]))])])])}}});export{K as default};
