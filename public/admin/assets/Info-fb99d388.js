import{d as F,j as d,E as L,s as q,x as P,K as p,r as s,o as x,c as j,e as f,k as E,w as a,b as e,f as $,H as _,$ as A,a0 as G,h as H}from"./index-7c2d2aef.js";import{F as I}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-9b6073fb.js";import{a as K,c as M}from"./productServices-bfbdfd18.js";import"./index-6c62cf9b.js";import"./vuedraggable.umd-75ad0f8f.js";import"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import"./format-4e0206d3.js";import"./config-9548fa9b.js";import"./config-e2aa16d1.js";import"./util-1ee03ed8.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";const O={class:"container"},T={class:"content_wrapper"},z={class:"lyecs-form-table"},J=f("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1),ue=F({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(S,{expose:k,emit:C}){const i=C,n=S,m=d(!0),v=L().currentRoute.value.query,c=d(n.isDialog?n.act:String(v.act)),b=d(n.isDialog?n.id:Number(v.id)),h=c.value==="add"?"create":"update",g=q(),t=d({sort_order:50,default_on:1});P(()=>{c.value==="detail"?B():m.value=!1});const B=async()=>{try{const r=await K(c.value,{id:b.value});Object.assign(t.value,r.item)}catch(r){p.error(r.message),i("close")}finally{m.value=!1}},y=async()=>{await g.value.validate();try{i("update:confirmLoading",!0);const r=await M(h,{id:b.value,...t.value});i("submitCallback",r),p.success(r.message)}catch(r){p.error(r.message)}finally{i("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{y()}}),(r,o)=>{const V=s("el-input"),u=s("el-form-item"),N=s("a-input"),w=s("el-radio"),D=s("el-radio-group"),R=s("el-button"),U=s("el-form");return x(),j("div",O,[f("div",T,[f("div",z,[m.value?H("",!0):(x(),E(U,{key:0,ref_key:"formRef",ref:g,model:t.value,"label-width":"auto"},{default:a(()=>[e(u,{rules:[{required:!0,message:"名称不能为空!"}],label:"名称",prop:"product_service_name"},{default:a(()=>[e(V,{modelValue:t.value.product_service_name,"onUpdate:modelValue":o[0]||(o[0]=l=>t.value.product_service_name=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"简介"},{default:a(()=>[e(V,{modelValue:t.value.product_service_desc,"onUpdate:modelValue":o[1]||(o[1]=l=>t.value.product_service_desc=l),rows:2,placeholder:"请输入简介",type:"textarea"},null,8,["modelValue"])]),_:1}),e(u,{label:"图标"},{default:a(()=>[e($(I),{photo:t.value.ico_img,"onUpdate:photo":o[2]||(o[2]=l=>t.value.ico_img=l)},null,8,["photo"]),J]),_:1}),e(u,{label:"排序"},{default:a(()=>[e(N,{value:t.value.sort_order,"onUpdate:value":o[3]||(o[3]=l=>t.value.sort_order=l)},null,8,["value"])]),_:1}),e(u,{label:"是否默认"},{default:a(()=>[e(D,{modelValue:t.value.default_on,"onUpdate:modelValue":o[4]||(o[4]=l=>t.value.default_on=l)},{default:a(()=>[e(w,{value:1},{default:a(()=>[_("是")]),_:1}),e(w,{value:0},{default:a(()=>[_("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),A(e(u,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[e(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:o[5]||(o[5]=l=>y())},{default:a(()=>[_("提交")]),_:1},512)]),_:1},512),[[G,!n.isDialog]])]),_:1},8,["model"]))])])])}}});export{ue as default};
