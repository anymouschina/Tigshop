import{d as P,K as b,i as p,G as F,q as O,c as f,e,b as o,w as a,N as T,f as w,g as d,I as q,r,o as g,E as k,D as A,_ as B}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{D as L}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as U}from"./Pagination-wR9huHyl.js";import{i as E}from"./format-CRgx78oe.js";import{g as M,d as K}from"./productGift-BZlu9Uns.js";import{_ as y}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const R={class:"container"},$={class:"content_wrapper"},j={class:"lyecs-table-list-warp"},H={class:"list-table-tool lyecs-search-warp"},J={class:"advanced-search-warp list-table-tool-row"},Q={class:"simple-form-warp"},W={class:"simple-form-field"},X={class:"form-group"},Y={class:"control-container"},Z={class:"simple-form-field"},tt={class:"form-group"},et={class:"control-container"},ot={class:"table-container"},at={class:"product-info"},st=["src"],it={class:"empty-warp"},nt={key:0,class:"empty-bg"},lt={key:0,class:"pagination-con"},rt=P({__name:"List",setup(dt){const C=b();p(b().domain);const v=p(),c=p(!0),m=p(0),I=p([]),i=F({page:1,size:C.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),l=async()=>{c.value=!0;try{const n=await M({...i});v.value=n.records,m.value=n.total}catch(n){q.error(n.message)}finally{c.value=!1}};O(()=>{l()});const u=()=>{l()},S=({prop:n,order:t})=>{i.sortField=n,i.sortOrder=t=="ascending"?"asc":t=="descending"?"desc":"",l()},x=n=>{I.value=n.map(t=>t.giftId)};return(n,t)=>{const h=r("el-button"),N=r("TigInput"),z=r("el-form"),_=r("el-table-column"),D=r("el-divider"),V=r("el-table"),G=r("a-spin");return g(),f("div",R,[e("div",$,[e("div",j,[e("div",H,[o(z,{model:i,onSubmit:T(u,["prevent"])},{default:a(()=>[e("div",J,[e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[o(N,{modelValue:i.keyword,"onUpdate:modelValue":t[0]||(t[0]=s=>i.keyword=s),name:"keyword",placeholder:"输入赠品名称",clearable:"",onClear:u},{append:a(()=>[o(h,{onClick:u},{default:a(()=>t[3]||(t[3]=[e("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),e("div",Z,[e("div",tt,[e("div",et,[o(d(y),{isDrawer:"",onOkCallback:l,title:"添加赠品",width:"900px",path:"promotion/productGift/Info",params:{act:"add"}},{default:a(()=>[o(h,{type:"primary"},{default:a(()=>t[4]||(t[4]=[k("添加赠品")])),_:1})]),_:1})])])])])])]),_:1},8,["model"])]),e("div",ot,[o(G,{spinning:c.value},{default:a(()=>[o(V,{data:v.value,"row-key":"id",onSelectionChange:x,total:m.value,onSortChange:S,loading:c.value},{empty:a(()=>[e("div",it,[c.value?w("",!0):(g(),f("div",nt,"暂无数据"))])]),default:a(()=>[o(_,{label:"赠品名称",prop:"giftName",width:"120"}),o(_,{label:"商品信息",prop:"productName"},{default:a(({row:s})=>[e("div",at,[e("img",{src:d(E)(s.productInfo.picThumb),height:"50",width:"50"},null,8,st),e("p",null,A(s.productInfo.productName),1)])]),_:1}),o(_,{label:"赠品库存",prop:"giftStock",sortable:"custom"}),o(_,{label:"操作",fixed:"right",width:150},{default:a(({row:s})=>[o(d(y),{isDrawer:"",onOkCallback:l,title:"编辑赠品",width:"900px",path:"promotion/productGift/Info",params:{act:"detail",id:s.giftId}},{default:a(()=>t[5]||(t[5]=[e("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(D,{direction:"vertical"}),o(d(L),{onAfterDelete:l,requestApi:d(K),params:{id:s.giftId}},{default:a(()=>t[6]||(t[6]=[k("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),m.value>0?(g(),f("div",lt,[o(d(U),{page:i.page,"onUpdate:page":t[1]||(t[1]=s=>i.page=s),size:i.size,"onUpdate:size":t[2]||(t[2]=s=>i.size=s),total:m.value,onCallback:l},null,8,["page","size","total"])])):w("",!0)])])])])}}}),bt=B(rt,[["__scopeId","data-v-e1c82c2f"]]);export{bt as default};
