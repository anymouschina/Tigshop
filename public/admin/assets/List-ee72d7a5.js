import{d as A,j as _,I as B,x as K,r as d,o as f,c as g,e as t,b as e,w as o,f as r,h as w,K as U,L as q,H as y,G as F,p as O,i as $,_ as j}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{_ as E}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as H}from"./Pagination-8eb7b6b1.js";import{i as M}from"./format-4e0206d3.js";import{g as T,d as J}from"./productGift-d470dc63.js";import{u as k}from"./config-9548fa9b.js";import{_ as C}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";const S=p=>(O("data-v-753d9a6d"),p=p(),$(),p),Q={class:"container"},R={class:"content_wrapper"},W={class:"lyecs-table-list-warp"},X={class:"list-table-tool lyecs-search-warp"},Y={class:"advanced-search-warp list-table-tool-row"},Z={class:"simple-form-warp"},tt={class:"simple-form-field"},et={class:"form-group"},ot={class:"control-container"},at=S(()=>t("span",{class:"iconfont icon-chakan1"},null,-1)),st={class:"simple-form-field"},it={class:"form-group"},nt={class:"control-container"},lt={class:"table-container"},dt={class:"product-info"},rt=["src"],ct=S(()=>t("a",{class:"btn-link"},"编辑",-1)),_t={class:"empty-warp"},pt={key:0,class:"empty-bg"},mt={key:0,class:"pagination-con"},ut=A({__name:"List",setup(p){const x=k();_(k().domain);const h=_(),c=_(!0),m=_(0),I=_([]),i=B({page:1,size:x.get("page_size"),sort_field:"",sort_order:"",keyword:""}),l=async()=>{c.value=!0;try{const n=await T({...i});h.value=n.filter_result,m.value=n.total}catch(n){U.error(n.message)}finally{c.value=!1}};K(()=>{l()});const v=()=>{l()},z=({prop:n,order:a})=>{i.sort_field=n,i.sort_order=a=="ascending"?"asc":a=="descending"?"desc":"",l()},V=n=>{I.value=n.map(a=>a.gift_id)};return(n,a)=>{const b=d("el-button"),G=d("el-input"),L=d("el-form"),u=d("el-table-column"),P=d("el-divider"),D=d("el-table"),N=d("a-spin");return f(),g("div",Q,[t("div",R,[t("div",W,[t("div",X,[e(L,{model:i},{default:o(()=>[t("div",Y,[t("div",Z,[t("div",tt,[t("div",et,[t("div",ot,[e(G,{modelValue:i.keyword,"onUpdate:modelValue":a[0]||(a[0]=s=>i.keyword=s),name:"keyword",placeholder:"输入赠品名称",onKeyup:q(v,["enter"])},{append:o(()=>[e(b,{onClick:v},{default:o(()=>[at]),_:1})]),_:1},8,["modelValue"])])])]),t("div",st,[t("div",it,[t("div",nt,[e(r(C),{isDrawer:"",onOkCallback:l,title:"添加赠品",width:"900px",path:"promotion/productGift/Info",params:{act:"add"}},{default:o(()=>[e(b,{type:"primary"},{default:o(()=>[y("添加赠品")]),_:1})]),_:1})])])])])])]),_:1},8,["model"])]),t("div",lt,[e(N,{spinning:c.value},{default:o(()=>[e(D,{data:h.value,"row-key":"id",onSelectionChange:V,total:m.value,onSortChange:z,loading:c.value},{empty:o(()=>[t("div",_t,[c.value?w("",!0):(f(),g("div",pt,"暂无数据"))])]),default:o(()=>[e(u,{label:"赠品名称",prop:"gift_name",width:"120"}),e(u,{label:"商品信息",prop:"product_name"},{default:o(({row:s})=>[t("div",dt,[t("img",{src:r(M)(s.product_info.pic_thumb),height:"50",width:"50"},null,8,rt),t("p",null,F(s.product_info.product_name),1)])]),_:1}),e(u,{label:"赠品库存",prop:"gift_stock",sortable:"custom"}),e(u,{label:"操作",fixed:"right",width:150},{default:o(({row:s})=>[e(r(C),{isDrawer:"",onOkCallback:l,title:"编辑赠品",width:"900px",path:"promotion/productGift/Info",params:{act:"detail",id:s.gift_id}},{default:o(()=>[ct]),_:2},1032,["params"]),e(P,{direction:"vertical"}),e(r(E),{onAfterDelete:l,requestApi:r(J),params:{gift_id:s.gift_id}},{default:o(()=>[y("删除")]),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),m.value>0?(f(),g("div",mt,[e(r(H),{page:i.page,"onUpdate:page":a[1]||(a[1]=s=>i.page=s),size:i.size,"onUpdate:size":a[2]||(a[2]=s=>i.size=s),total:m.value,onCallback:l},null,8,["page","size","total"])])):w("",!0)])])])])}}});const zt=j(ut,[["__scopeId","data-v-753d9a6d"]]);export{zt as default};
