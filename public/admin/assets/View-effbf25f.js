import{d as D,j as x,E as X,bf as Y,dm as A,dk as N,a9 as E,x as Z,r as k,o as t,c as o,e,f as s,h as _,G as y,$ as H,dh as ie,b as v,dN as le,F as m,a as q,a0 as ce,k as d,w as a,df as ue,K as J,du as re,p as O,i as R,_ as K,de as _e,n as B,P as de,C as pe}from"./index-7c2d2aef.js";import{u as he}from"./config-9548fa9b.js";import{i as j,u as Q,r as me}from"./format-4e0206d3.js";import{g as ve}from"./adminMsg-11a92805.js";import{e as fe}from"./util-1ee03ed8.js";import{l as ge,M as ye,c as ke,p as we,_ as be,a as Se}from"./pageTabs-417bbf61.js";import{S as xe}from"./SelectShop-1ec19599.js";import{u as Ce}from"./menus-a5eaec1a.js";import{l as $e}from"./logo_blue2-e6122341.js";import{u as G}from"./theme-cc18c5b2.js";import"./config-e2aa16d1.js";import"./index-6c62cf9b.js";import"./version-f7bce787.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-9b6073fb.js";import"./vuedraggable.umd-75ad0f8f.js";import"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import"./authority-44614dad.js";const u=c=>(O("data-v-27a8bda5"),c=c(),R(),c),Me={class:"page-top"},Ie={class:"page-top-warp"},Te={class:"top-bar-left"},Ve={key:0,class:"head_logo"},ze=["src"],Be=["src"],Le=u(()=>e("span",{class:"open-menu-btn icon-zhankai iconfont"},null,-1)),Pe=[Le],qe=u(()=>e("div",{class:"top-bar-item wap-show"},[e("a",{class:"wap-refresh-btn icon-shuaxin iconfont",href:"javascript:;",onclick:"location.reload();"})],-1)),Ae={class:"top-bar-item wap-show",style:{display:"none"}},De=["href"],Ue={key:1,class:"shop-tit"},Fe={key:0,class:"label"},Ne={key:1,class:"label green"},je={key:2},Ee={class:"top-bar-item top-bar-search-warp"},Oe={class:"top-bar-search"},Re={class:"search-menu-con"},Ke=u(()=>e("div",{class:"search-menu-title"},"搜索结果",-1)),Ge={class:"search-menu-list"},We=["onClick"],He={key:0,class:"empty"},Je={class:"top-bar-right"},Qe={class:"top-bar-item mr10"},Xe={class:"auth-img"},Ye=["src"],Ze={class:"top-bar-item openShop-btn"},et=["href"],tt=u(()=>e("i",{class:"iconfont icon-guanli"},null,-1)),st=u(()=>e("span",null,"查看店铺",-1)),ot=[tt,st],nt={class:"top-bar-item top-bar-user",id:"dropdown-memu"},at={class:"admin-user-warp"},it={class:"top-bar-btn",href:"javascript:;"},lt={class:"admin-user-photo"},ct=["src"],ut=["src"],rt={class:"admin-user-name"},_t=u(()=>e("i",{class:"iconfont icon-xiala"},null,-1)),dt={class:"dropdown-memu top-bar-memu"},pt={class:"entrance-list"},ht=u(()=>e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-gerenshezhi",style:{"font-size":"22px"}}),e("span",null,"管理账号")],-1)),mt=u(()=>e("i",{class:"iconfont icon-qingchuhuancun",style:{"font-size":"22px"}},null,-1)),vt=u(()=>e("span",null,"清除缓存",-1)),ft=[mt,vt],gt=u(()=>e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-quanxian",style:{"font-size":"22px"}}),e("span",null,"店铺设置")],-1)),yt=u(()=>e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-quanxian",style:{"font-size":"22px"}}),e("span",null,"后台设置")],-1)),kt={class:"admin_exit"},wt=u(()=>e("span",null,"切换店铺",-1)),bt=[wt],St=u(()=>e("span",{style:{color:"#f0f2f5"}},"｜",-1)),xt=u(()=>e("span",null,"退出登录",-1)),Ct=[xt],$t=D({__name:"pageTopBar",setup(c){const{themeInfo:C}=G(),w=x(localStorage.getItem("adminType")),i=X(),h=Y(),$=h.licensedData,f=A(),b=x(""),S=x([]),r=x(!1),I=async T=>{try{const p=await ve({keyword:b.value});S.value=p.item,b.value&&(r.value=!0)}catch(p){J.error(p.message)}},V=T=>{r.value=!1,b.value="",S.value=[],i.push({path:"/"+T})},L=()=>{b.value==""&&(r.value=!1)},U=()=>{r.value=!1},{logout:F,updateUserInfo:l}=N(),n=E(()=>N().userInfo),g=E(()=>N().shopInfo);x(0);const W=async()=>{try{const T=await ke(),p=he();l(),p.updateConfig(),f.mainMenu=await Ce(),re.success({message:"缓存已清除",description:"缓存清除后可刷新页面更新效果"})}catch(T){J.error(T.message)}},ee=async()=>{F()},z=x(!1),te=()=>{z.value=!0},se=()=>{z.value=!1};return Z(()=>{h._getLicensed()}),(T,p)=>{const oe=k("el-input"),P=k("router-link"),ne=k("a-dropdown"),ae=k("el-dialog");return t(),o(m,null,[e("div",Me,[e("div",Ie,[e("div",Te,[s(f).childMenuShow?(t(),o("div",Ve,[s(C).navTheme==="light"?(t(),o("img",{key:0,class:"logo_img",src:s($).admin_light_logo?s(j)(s($).admin_light_logo):s($e)},null,8,ze)):_("",!0),s(C).navTheme==="dark"?(t(),o("img",{key:1,class:"logo_img",src:s($).admin_light_logo?s(j)(s($).admin_light_logo):s(ge)},null,8,Be)):_("",!0)])):_("",!0),e("div",{class:"top-bar-item wap-show",onClick:p[0]||(p[0]=M=>s(f).menuActive=!s(f).menuActive)},Pe),qe,e("div",Ae,[e("a",{class:"wap-openShop-btn icon-wangdianwaibao iconfont",href:s(Q)("/"),target:"_blank"},null,8,De)]),w.value==="shop"?(t(),o("div",Ue,[e("h2",null,"当前店铺: "+y(g.value.shop_title),1),g.value.status===0?(t(),o("div",Fe,y(g.value.status_text),1)):(t(),o("div",Ne,y(g.value.status_text),1))])):H((t(),o("div",je,[e("div",Ee,[e("div",Oe,[v(oe,{modelValue:b.value,"onUpdate:modelValue":p[1]||(p[1]=M=>b.value=M),style:{width:"300px"},placeholder:"在这里查找功能，一键直达","prefix-icon":s(le),onInput:I,onBlur:L},null,8,["modelValue","prefix-icon"])])]),H(e("div",Re,[Ke,e("div",Ge,[(t(!0),o(m,null,q(S.value,M=>(t(),o("div",{class:"menu-item",onClick:Ft=>V(M.route_link)},[e("p",null,y(M.authority_name),1)],8,We))),256)),S.value.length<1?(t(),o("div",He,"没有搜索到栏目！")):_("",!0)])],512),[[ce,r.value]])])),[[s(ie),U]])]),e("div",Je,[e("div",Qe,[e("div",Xe,[w.value!=="shop"?(t(),d(P,{key:0,to:{path:"/setting/licensed/index"}},{default:a(()=>[e("img",{src:s(ue)(),style:{height:"25px","margin-top":"2px"}},null,8,Ye)]),_:1})):_("",!0)])]),v(ye),e("div",Ze,[e("a",{class:"top-bar-btn",href:s(Q)("/"),target:"_blank"},ot,8,et)]),e("div",nt,[v(ne,null,{overlay:a(()=>[e("div",dt,[e("div",pt,[v(P,{to:{path:"/authority/account_editing/index"}},{default:a(()=>[ht]),_:1}),e("p",{class:"entrance",onClick:W},ft),w.value==="shop"?(t(),d(P,{key:0,to:{path:"/merchant_setting/shop_team"}},{default:a(()=>[gt]),_:1})):(t(),d(P,{key:1,to:{path:"/setting/config/base"}},{default:a(()=>[yt]),_:1}))]),e("div",null,[e("div",kt,[w.value==="shop"?(t(),o(m,{key:0},[e("a",{onClick:te},bt),St],64)):_("",!0),e("a",{onClick:ee},Ct)])])])]),default:a(()=>[e("div",at,[e("a",it,[e("span",lt,[s(fe)(String(n.value.avatar))=="def"?(t(),o("img",{key:0,src:s(me)(n.value.avatar)},null,8,ct)):(t(),o("img",{key:1,src:s(j)(n.value.avatar)},null,8,ut))]),e("div",rt,y(/^1[3-9]\d{9}$/.test(n.value.username)?n.value.username.replace(/(\d{3})\d{4}/,"$1****"):n.value.username),1),_t])])]),_:1})])])])]),v(ae,{class:"page-top","show-close":!1,"z-index":"12",modelValue:z.value,"onUpdate:modelValue":p[2]||(p[2]=M=>z.value=M),width:"500px"},{default:a(()=>[z.value?(t(),d(xe,{key:0,onClosePopup:se,isIndex:!0,username:n.value.username},null,8,["username"])):_("",!0)]),_:1},8,["modelValue"])],64)}}});const Mt=K($t,[["__scopeId","data-v-27a8bda5"]]),It=c=>(O("data-v-4d9682e3"),c=c(),R(),c),Tt=It(()=>e("div",{class:"body-menu-mask"},null,-1)),Vt=D({__name:"pageContainer",setup(c){const C=_e();x(localStorage.getItem("adminType"));const w=A(),{themeInfo:i}=G();return(h,$)=>{const f=k("router-view");return t(),o(m,null,[Tt,e("div",{class:B(["main-warp",[s(w).childMenuShow?"child-menu-show":"child-menu-hide"]])},[e("div",{class:B(["page-grid-content",`admin-${s(i).navTheme}`])},[!h.$route.meta.is404&&s(i).isMultiLabel?(t(),d(we,{key:0})):_("",!0),h.$route.meta.is404?_("",!0):(t(),d(be,{key:1})),(t(),d(f,{key:s(C).routerKey})),h.$route.meta.is404?_("",!0):(t(),d(Se,{key:2}))],2)],2)],64)}}});const zt=K(Vt,[["__scopeId","data-v-4d9682e3"]]),Bt=c=>(O("data-v-4dead473"),c=c(),R(),c),Lt={class:"page_left_menu_content"},Pt={class:"menu_list",ref:"menu"},qt=Bt(()=>e("i",{class:"open-menu-btn icon-zhankai iconfont"},null,-1)),At=[qt],Dt=D({__name:"pageLeftMenu",setup(c){const{themeInfo:C}=G();Y().licensedData;const i=A(),h=X(),$=A(),f=x(""),b=E(()=>$.mainMenu);Z(()=>{f.value=h.currentRoute.value.name});const S=r=>{window.innerWidth<=756?(r.blank?window.open("/"+r.route_link,"_blank"):h.push("/"+r.route_link),i.menuActive=!1):(r.blank?window.open("/"+r.route_link,"_blank"):h.push("/"+r.route_link),pe(),i.childMenuShow=!0)};return de(()=>{f.value=h.currentRoute.value.name}),(r,I)=>{const V=k("el-menu-item"),L=k("el-sub-menu"),U=k("el-menu"),F=k("perfect-scrollbar");return t(),o(m,null,[s(i).childMenuShow?(t(),o("div",{key:0,class:"body-menu-mask",onClick:I[0]||(I[0]=l=>s(i).childMenuShow=!s(i).childMenuShow)})):_("",!0),e("div",{class:B(["page_left_menu",[s(i).childMenuShow?"child-menu-show":"child-menu-hide"]])},[e("div",Lt,[v(F,{class:"main-menu"},{default:a(()=>[e("div",Pt,[v(U,{"default-active":f.value,collapse:!s(i).childMenuShow,"unique-opened":s(C).uniqueOpened},{default:a(()=>[(t(!0),o(m,null,q(b.value,l=>(t(),o(m,{key:l.authority_id},[l.children.length&&l.is_show?(t(),d(L,{key:0,index:l.authority_sn},{title:a(()=>[e("i",{class:B(l.authority_ico)},null,2),e("span",null,y(l.authority_name),1)]),default:a(()=>[(t(!0),o(m,null,q(l.children,n=>(t(),o(m,null,[n.children&&n.children.length&&n.is_show?(t(),d(L,{key:0,index:n.authority_sn},{title:a(()=>[e("span",null,y(n.authority_name),1)]),default:a(()=>[(t(!0),o(m,null,q(n.children,g=>(t(),d(V,{key:g.authority_id,index:g.authority_sn,onClick:W=>S(g)},{title:a(()=>[e("span",null,y(g.authority_name),1)]),_:2},1032,["index","onClick"]))),128))]),_:2},1032,["index"])):n.is_show?(t(),d(V,{key:1,index:n.authority_sn,onClick:g=>S(n)},{title:a(()=>[e("span",null,y(n.authority_name),1)]),_:2},1032,["index","onClick"])):_("",!0)],64))),256))]),_:2},1032,["index"])):l.is_show?(t(),d(V,{key:1,index:l.authority_sn,onClick:n=>S(l)},{title:a(()=>[e("i",{class:B(l.authority_ico)},null,2),e("span",null,y(l.authority_name),1)]),_:2},1032,["index","onClick"])):_("",!0)],64))),128))]),_:1},8,["default-active","collapse","unique-opened"])],512)]),_:1}),e("div",{class:"icon_menu",onClick:I[1]||(I[1]=l=>s(i).childMenuShow=!s(i).childMenuShow)},At)])],2)],64)}}});const Ut=K(Dt,[["__scopeId","data-v-4dead473"]]),ns=D({__name:"View",setup(c){return(C,w)=>{const i=k("router-view");return t(),o(m,null,[v(Mt),v(Ut),v(zt,null,{default:a(()=>[v(i)]),_:1})],64)}}});export{ns as default};
