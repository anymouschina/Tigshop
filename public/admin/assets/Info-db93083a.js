import{d as U,j as m,E as j,s as q,x as E,r as u,o as d,c as y,e as _,k as $,w as o,b as e,H as l,G as n,F as S,f as G,$ as H,a0 as K,h as M,K as b}from"./index-7c2d2aef.js";import{a as T,u as z}from"./orderInvoice-5f5f2943.js";import"./index-6c62cf9b.js";import{_ as A}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";const J={class:"container"},P={class:"content_wrapper"},Q={class:"lyecs-form-table"},W=_("a",{class:"btn-link"},"[查看]",-1),X=_("div",{class:"extra"},"若通过可不写",-1),te=U({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(C,{expose:D,emit:B}){const c=B,p=C,f=m(!0),g=j().currentRoute.value.query,w=m(p.isDialog?p.act:String(g.act)),h=m(p.isDialog?p.id:Number(g.id)),I=w.value==="add"?"create":"update",k=q(),a=m({}),N=async()=>{try{const s=await T(w.value,{id:h.value});Object.assign(a.value,s.item)}catch(s){b.error(s.message),c("close")}finally{f.value=!1}};E(()=>{N()});const V=async()=>{await k.value.validate();try{c("update:confirmLoading",!0);const s=await z(I,{id:h.value,...a.value});c("submitCallback",s),b.success(s.message)}catch(s){b.error(s.message)}finally{c("update:confirmLoading",!1)}};return D({onFormSubmit:()=>{V()}}),(s,r)=>{const t=u("el-form-item"),v=u("el-radio"),O=u("el-radio-group"),x=u("el-input"),R=u("el-button"),F=u("el-form"),L=u("a-spin");return d(),y("div",J,[_("div",P,[_("div",Q,[f.value?M("",!0):(d(),$(F,{key:0,ref_key:"formRef",ref:k,model:a.value,"label-width":"auto"},{default:o(()=>[e(t,{label:"申请会员",prop:"username"},{default:o(()=>[l(n(a.value.username),1)]),_:1}),e(t,{label:"发票类型",prop:"invoice_type_name"},{default:o(()=>[l(n(a.value.invoice_type_name),1)]),_:1}),a.value.invoice_type===2&&a.value.user_invoice?(d(),y(S,{key:0},[e(t,{label:"增票资质状态",prop:"company_name"},{default:o(()=>[e(G(A),{showOnOk:!1,params:{act:"detail",id:a.value.user_invoice.invoice_id},isDrawer:"",path:"finance/userInvoice/Info",title:"编辑增票资质申请",width:"600px"},{default:o(()=>[l(n(a.value.user_invoice.status_name)+" ",1),W]),_:1},8,["params"])]),_:1}),e(t,{label:"公司名称",prop:"company_name"},{default:o(()=>[l(n(a.value.company_name),1)]),_:1}),e(t,{label:"纳税人识别码",prop:"company_code"},{default:o(()=>[l(n(a.value.company_code),1)]),_:1}),e(t,{label:"注册地址",prop:"company_address"},{default:o(()=>[l(n(a.value.company_address),1)]),_:1}),e(t,{label:"注册电话",prop:"company_phone"},{default:o(()=>[l(n(a.value.company_phone),1)]),_:1}),e(t,{label:"开户银行",prop:"company_bank"},{default:o(()=>[l(n(a.value.company_bank),1)]),_:1}),e(t,{label:"银行账户",prop:"company_account"},{default:o(()=>[l(n(a.value.company_account),1)]),_:1})],64)):(d(),y(S,{key:1},[e(t,{label:"发票抬头",prop:"title_type"},{default:o(()=>[l(n(a.value.title_type==1?"个人":"企业"),1)]),_:1}),e(t,{label:"企业税号",prop:"company_code"},{default:o(()=>[l(n(a.value.company_code),1)]),_:1}),e(t,{label:"发票内容",prop:"invoice_content"},{default:o(()=>[l(n(a.value.invoice_content),1)]),_:1})],64)),e(t,{label:"收票人姓名",prop:"company_name"},{default:o(()=>[l(n(a.value.company_name),1)]),_:1}),e(t,{label:"收票人电话",prop:"mobile"},{default:o(()=>[l(n(a.value.mobile),1)]),_:1}),e(t,{label:"收票人邮箱",prop:"email"},{default:o(()=>[l(n(a.value.email),1)]),_:1}),e(t,{label:"收票人地址",prop:"company_address"},{default:o(()=>[l(n(a.value.company_address),1)]),_:1}),e(t,{label:"申请状态",prop:"status"},{default:o(()=>[e(O,{modelValue:a.value.status,"onUpdate:modelValue":r[0]||(r[0]=i=>a.value.status=i)},{default:o(()=>[e(v,{value:0},{default:o(()=>[l("待处理")]),_:1}),e(v,{value:1},{default:o(()=>[l("已开")]),_:1}),e(v,{value:2},{default:o(()=>[l("失败/作废")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(t,{label:"发票金额",prop:"amount"},{default:o(()=>[e(x,{modelValue:a.value.amount,"onUpdate:modelValue":r[1]||(r[1]=i=>a.value.amount=i),type:"text"},null,8,["modelValue"])]),_:1}),e(t,{label:"申请未通过原因",prop:"apply_reply"},{default:o(()=>[e(x,{modelValue:a.value.apply_reply,"onUpdate:modelValue":r[2]||(r[2]=i=>a.value.apply_reply=i),row:"2",type:"textarea"},null,8,["modelValue"]),X]),_:1}),H(e(t,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[e(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:V},{default:o(()=>[l("提交")]),_:1},512)]),_:1},512),[[K,!p.isDialog]])]),_:1},8,["model"])),e(L,{spinning:f.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{te as default};
