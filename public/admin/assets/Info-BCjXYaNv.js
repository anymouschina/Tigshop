import{d as j,i as m,C as I,s as G,q as M,I as y,r as s,c as O,o as f,e as v,b as l,w as a,j as g,a0 as P,g as c,E as i,a1 as T,f as $}from"./index-CGYuOau0.js";import{F as z}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-CjXfTDg5.js";import{a as H,c as J}from"./article-C6BidpBq.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";import{S as Q}from"./SelectProduct-Dqera5O0.js";/* empty css                                                                    */import{S as W}from"./SelectArticleCategory-DfRIn8M4.js";/* empty css             */import{_ as X}from"./Editor.vue_vue_type_script_setup_true_lang-BBcTD5Hp.js";import{B as Y}from"./BusinessData-CIJvb5fj.js";import"./vuedraggable.umd-_1km55l4.js";import"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./time-ClyPenjC.js";import"./product-CxWf3yyB.js";import"./Pagination-yOfjsBuR.js";import"./SelectSku-DpuXlI1z.js";/* empty css                                                                  */import"./articleCategory-BYgmIQPq.js";/* empty css                                                                              */import"./index.esm-WCz80Rui.js";import"./currencyManagement-Ctv3q6kF.js";import"./version-CpBOsX2d.js";const Z={class:"container"},h={class:"content_wrapper"},ee={class:"lyecs-form-table"},Ne=j({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(D,{expose:N,emit:q}){const _=q,p=D,x=m(1),b=m(!0),S=I().currentRoute.value.query,w=m(p.isDialog?p.act:String(S.act)),k=m(p.isDialog?p.id:Number(S.id)),A=w.value==="add"?"create":"update",C=G(),t=m({is_show:1,is_hot:0,is_top:0,article_type:1,article_category_id:[],product_ids:[]}),R=(u,e,r)=>{if(e.length>10){y.error("最多添加10个商品"),r(new Error("最多添加10个商品"));return}r()};M(()=>{w.value==="detail"?F():b.value=!1});const F=async()=>{try{b.value=!0;const u=await H(w.value,{id:k.value});Object.assign(t.value,u.item)}catch(u){y.error(u.message),_("close")}finally{b.value=!1}},B=async()=>{await C.value.validate();try{_("update:confirmLoading",!0);const u=await J(A,{id:k.value,...t.value});_("submitCallback",u),y.success(u.message)}catch(u){y.error(u.message)}finally{_("update:confirmLoading",!1)}};return N({onFormSubmit:()=>{B()}}),(u,e)=>{const r=s("el-form-item"),n=s("el-input"),d=s("el-radio"),V=s("el-radio-group"),K=s("el-button"),U=s("el-tab-pane"),E=s("el-tabs"),L=s("el-form");return f(),O("div",Z,[v("div",h,[v("div",ee,[l(L,{ref_key:"formRef",ref:C,model:t.value,"label-width":"auto"},{default:a(()=>[l(E,{activeKey:x.value,"onUpdate:activeKey":e[15]||(e[15]=o=>x.value=o),class:"lyecs-tabs","tab-position":"top"},{default:a(()=>[(f(),g(U,{key:1,label:"基本信息"},{default:a(()=>[l(r,{rules:[{required:!0,message:"文章标题不能为空!"}],extra:"sfs",label:"文章标题",prop:"article_title"},{default:a(()=>[l(Y,{modelValue:t.value.article_title,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.article_title=o),placeholder:"请输入文章标题",data_type:6,data_id:k.value},null,8,["modelValue","data_id"])]),_:1}),l(r,{label:"文章编号",prop:"article_sn"},{default:a(()=>[l(n,{modelValue:t.value.article_sn,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.article_sn=o)},null,8,["modelValue"]),e[16]||(e[16]=v("div",{class:"extra"},"编号用于前台调用某些指定的文章",-1))]),_:1}),l(r,{label:"文章分类",prop:"article_category_id"},{default:a(()=>[l(c(W),{modelValue:t.value.article_category_id,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.article_category_id=o),"min-width":"100%"},null,8,["modelValue"])]),_:1}),l(r,{label:"缩略图",prop:"article_thumb"},{default:a(()=>[l(c(z),{photo:t.value.article_thumb,"onUpdate:photo":e[3]||(e[3]=o=>t.value.article_thumb=o)},null,8,["photo"]),e[17]||(e[17]=v("div",{class:"extra"},"请统一上传比例为1:2的图片，宽100px，高200px（高清）",-1))]),_:1}),l(r,{label:"文章作者",prop:"article_author"},{default:a(()=>[l(n,{modelValue:t.value.article_author,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.article_author=o)},null,8,["modelValue"])]),_:1}),l(r,{label:"关键字",prop:"keywords"},{default:a(()=>[l(n,{modelValue:t.value.keywords,"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.keywords=o)},null,8,["modelValue"])]),_:1}),l(r,{label:"标签",prop:"article_tag"},{default:a(()=>[l(n,{modelValue:t.value.article_tag,"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.article_tag=o)},null,8,["modelValue"])]),_:1}),l(r,{label:"描述",prop:"description"},{default:a(()=>[l(n,{modelValue:t.value.description,"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.description=o),row:"2",type:"textarea"},null,8,["modelValue"])]),_:1}),l(r,{label:"相关链接",prop:"link"},{default:a(()=>[l(n,{modelValue:t.value.link,"onUpdate:modelValue":e[8]||(e[8]=o=>t.value.link=o)},null,8,["modelValue"])]),_:1}),l(r,{label:"文章类型",prop:"article_type"},{default:a(()=>[l(V,{modelValue:t.value.article_type,"onUpdate:modelValue":e[9]||(e[9]=o=>t.value.article_type=o)},{default:a(()=>[l(d,{value:1},{default:a(()=>e[18]||(e[18]=[i("普通文章")])),_:1}),l(d,{value:2},{default:a(()=>e[19]||(e[19]=[i("帮助文章")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"是否置顶",prop:"is_top"},{default:a(()=>[l(V,{modelValue:t.value.is_top,"onUpdate:modelValue":e[10]||(e[10]=o=>t.value.is_top=o)},{default:a(()=>[l(d,{value:1},{default:a(()=>e[20]||(e[20]=[i("是")])),_:1}),l(d,{value:0},{default:a(()=>e[21]||(e[21]=[i("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"是否热门",prop:"is_hot"},{default:a(()=>[l(V,{modelValue:t.value.is_hot,"onUpdate:modelValue":e[11]||(e[11]=o=>t.value.is_hot=o)},{default:a(()=>[l(d,{value:1},{default:a(()=>e[22]||(e[22]=[i("是")])),_:1}),l(d,{value:0},{default:a(()=>e[23]||(e[23]=[i("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"是否显示",prop:"is_show"},{default:a(()=>[l(V,{modelValue:t.value.is_show,"onUpdate:modelValue":e[12]||(e[12]=o=>t.value.is_show=o)},{default:a(()=>[l(d,{value:1},{default:a(()=>e[24]||(e[24]=[i("是")])),_:1}),l(d,{value:0},{default:a(()=>e[25]||(e[25]=[i("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),P(l(r,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[l(K,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:B},{default:a(()=>e[26]||(e[26]=[i("提交 ")])),_:1},512)]),_:1},512),[[T,!p.isDialog]])]),_:1})),(f(),g(U,{key:2,label:"文章内容"},{default:a(()=>[l(c(X),{html:t.value.content,"onUpdate:html":e[13]||(e[13]=o=>t.value.content=o)},null,8,["html"])]),_:1})),(f(),g(U,{key:3,label:"关联商品"},{default:a(()=>[l(r,{label:"",prop:"product_ids",rules:[{required:!0,validator:R}]},{default:a(()=>[b.value?$("",!0):(f(),g(c(Q),{key:0,ids:t.value.product_ids,"onUpdate:ids":e[14]||(e[14]=o=>t.value.product_ids=o),max:10},null,8,["ids"])),e[27]||(e[27]=v("div",{class:"extra"},"最多添加10个商品，添加的商品会在结算后自动加入订单（不会计价格）",-1))]),_:1},8,["rules"])]),_:1}))]),_:1},8,["activeKey"])]),_:1},8,["model"])])])])}}});export{Ne as default};
