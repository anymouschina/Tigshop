/* empty css             */import"./index-CeQDmMxd.js";import{P as z}from"./PopFormElm-BZp1_Wme.js";import{_ as L}from"./Switch.vue_vue_type_script_setup_true_lang-C5nzofSO.js";import{D as T}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as j}from"./Pagination-wR9huHyl.js";import{d as G,bp as K,K as M,i as d,G as J,q as Q,c as k,e as s,b as a,w as o,f as I,g as i,I as C,r as p,o as v,j as X,E as m,D as S}from"./index-DrbzVNl6.js";import{a as Y,u as A,d as Z,b as ee}from"./region-p-p629KP.js";import{_ as D}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const te={class:"container"},ae={class:"content_wrapper"},oe={class:"lyecs-table-list-warp"},se={class:"list-table-tool lyecs-search-warp"},ne={class:"list-table-tool-row"},le={class:"list-table-tool-col"},ie={key:1},re={class:"table-container"},de={style:{position:"relative"}},pe=["onClick"],ce={class:"empty-warp"},ue={key:0,class:"empty-bg"},me={key:0,class:"pagination-con"},Ae=G({__name:"List",setup(ge){K();const U=M(),N=d([]),g=d(!0),b=d(0),_=d([]);d(!1);const n=J({page:1,size:U.get("pageSize"),sortField:"",sortOrder:"",keyword:"",parentId:0}),h=d([]),y=d([]),V=()=>{r()},r=async l=>{g.value=!0;try{l&&typeof l=="number"&&(n.parentId=l);const e=await Y({...n});N.value=e.records,b.value=e.total}catch(e){C.error(e.message)}finally{g.value=!1}};Q(()=>{r()});const x=d(""),P=(l,e,u)=>{h.value.push(l),y.value.push(u),n.parentId=e,x.value=u,r()},w=()=>{n.parentId=h.value[h.value.length-1],x.value=y.value[y.value.length-1],h.value.pop(),y.value.pop(),r()},B=({prop:l,order:e})=>{n.sortField=l,n.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",r()},F=async l=>{try{const e=await ee(l,{ids:_.value});C.success("操作成功"),r()}catch(e){C.error(e.message)}},$=l=>{_.value=l.map(e=>e.regionId)};return(l,e)=>{const u=p("el-button"),O=p("el-popconfirm"),R=p("el-space"),W=p("el-form"),f=p("el-table-column"),q=p("el-divider"),H=p("el-table"),E=p("a-spin");return v(),k("div",te,[s("div",ae,[s("div",oe,[s("div",se,[a(W,{model:n},{default:o(()=>[s("div",ne,[s("div",le,[a(R,null,{default:o(()=>[n.parentId>0?(v(),X(u,{key:0,onClick:w},{default:o(()=>e[3]||(e[3]=[s("i",{class:"iconfont icon-fanhui",style:{"font-size":"14px","padding-right":"5px"}},null,-1),m(" 返回上一级 ")])),_:1})):I("",!0),a(i(D),{params:{act:"add",regionId:n.parentId},isDrawer:"",path:"setting/region/Info",title:"添加地区",width:"580px",onOkCallback:r},{default:o(()=>[a(u,{type:"primary"},{default:o(()=>e[4]||(e[4]=[m("添加地区")])),_:1})]),_:1},8,["params"]),a(O,{title:"您确认要批量删除所选数据吗？",onConfirm:e[0]||(e[0]=t=>F("del"))},{reference:o(()=>[a(u,{disabled:_.value.length===0},{default:o(()=>e[5]||(e[5]=[m("批量删除")])),_:1},8,["disabled"])]),_:1}),_.value.length>0?(v(),k("span",ie,[e[6]||(e[6]=m(" 已选择：")),s("b",null,S(_.value.length),1),e[7]||(e[7]=m(" 项 "))])):I("",!0)]),_:1})])])]),_:1},8,["model"])]),s("div",re,[a(E,{spinning:g.value},{default:o(()=>[a(H,{data:N.value,loading:g.value,total:b.value,"row-key":"regionId",onSelectionChange:$,onSortChange:B},{empty:o(()=>[s("div",ce,[g.value?I("",!0):(v(),k("div",ue,"暂无数据"))])]),default:o(()=>[a(f,{type:"selection",width:"32"}),a(f,{width:200,label:"地区名称",prop:"regionId",sortable:"custom"},{default:o(({row:t})=>[s("div",de,[a(i(z),{"org-value":t.regionName,"onUpdate:orgValue":c=>t.regionName=c,max:10,params:{id:t.regionId,field:"regionName"},requestApi:i(A),label:"地区名称",type:"textarea"},{default:o(()=>[s("div",null,S(t.regionName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])])]),_:1}),a(f,{label:"首字母"},{default:o(({row:t})=>[a(i(z),{"org-value":t.firstWord,"onUpdate:orgValue":c=>t.firstWord=c,len:1,params:{id:t.regionId,field:"firstWord"},requestApi:i(A),label:"首字母",type:"input"},{default:o(()=>[s("div",null,S(t.firstWord||"-"),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),a(f,{label:"是否热门"},{default:o(({row:t})=>[a(i(L),{checked:t.isHot,"onUpdate:checked":c=>t.isHot=c,params:{id:t.regionId,field:"isHot"},requestApi:i(A)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),a(f,{width:200,fixed:"right",label:"操作"},{default:o(({row:t})=>[s("a",{class:"btn-link",onClick:c=>P(t.parentId,t.regionId,t.regionName)},"子地区",8,pe),a(q,{direction:"vertical"}),a(i(D),{params:{act:"add",regionId:t.regionId},isDrawer:"",path:"setting/region/Info",title:"添加子地区",width:"600",onOkCallback:r},{default:o(()=>e[8]||(e[8]=[s("a",{class:"btn-link"},"添加子地区",-1)])),_:2},1032,["params"]),a(q,{direction:"vertical"}),a(i(T),{params:{id:t.regionId},requestApi:i(Z),onAfterDelete:c=>r(t.parentId)},{default:o(()=>e[9]||(e[9]=[m("删除 ")])),_:2},1032,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),b.value>0?(v(),k("div",me,[a(i(j),{page:n.page,"onUpdate:page":e[1]||(e[1]=t=>n.page=t),size:n.size,"onUpdate:size":e[2]||(e[2]=t=>n.size=t),total:b.value,onCallback:V},null,8,["page","size","total"])])):I("",!0)])])])])}}});export{Ae as default};
