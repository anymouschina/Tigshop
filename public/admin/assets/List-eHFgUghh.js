/* empty css             */import"./index-B-GURfkM.js";import{y as V,d as j,G as C,i as w,q as A,c as u,e as t,F as I,a as L,b as p,f as c,w as o,g as _,I as U,C as E,r as m,o as a,n as G,D as x,j as y,_ as M}from"./index-CGYuOau0.js";/* empty css                                                                    */import{P as R}from"./Pagination-yOfjsBuR.js";import{u as H}from"./config-DNllFJyR.js";import{_ as g}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const J=$=>V({url:"promotion/promotion/list",method:"get",params:$}),K={class:"container"},Q={class:"content_wrapper"},W={class:"row"},X={class:"col activity"},Y={class:"tabs flex"},Z=["onClick"],tt={class:"num"},it={class:"txt"},et={class:"col"},st={class:"app-wrapper cursor-pointer"},lt={class:"col"},at={style:{position:"relative"}},ot=["onClick"],nt={class:"empty-warp"},pt={key:0,class:"empty-bg"},rt={key:0,class:"pagination-con"},dt=j({__name:"List",setup($){const r=E(),h=H(),b=C([{value:1,label:"进行中的活动",num:"-"},{value:2,label:"7天内到期活动",num:"-"},{value:3,label:"未开始活动",num:"-"}]),z=C([{value:0,label:"全部"},{value:1,label:"秒杀"},{value:2,label:"优惠券"},{value:6,label:"限时折扣"},{value:3,label:"满减"},{value:5,label:"满赠"}]),s=C({page:1,size:h.get("page_size"),sort_field:"",sort_order:"",time_type:1,types:0}),D=w([]),v=w(!0),k=w(0),d=async()=>{v.value=!0;let l=[];s.types===0?l=[]:s.types===3?l=[3,4]:l=[s.types];try{const i=await J({...s,type:l.join(",")});D.value=i.filter_result,b[0].num=i.time_type_count.time_type1_count,b[1].num=i.time_type_count.time_type2_count,b[2].num=i.time_type_count.time_type3_count,k.value=i.total}catch(i){U.error(i.message)}finally{v.value=!1}};A(()=>{d()});const P=l=>{s.time_type=l,d()},q=l=>{s.types=z[l].value,d()},n=l=>{switch(l){case 1:r.push({path:"/promotion/seckill/list"});break;case 2:r.push({path:"/promotion/coupon/list"});break;case 6:r.push({path:"/promotion/limitdiscount_gift/list"});break;case 3:r.push({path:"/promotion/full_reduction/list"});break;case 5:r.push({path:"/promotion/reward_gift/list"});break;case 9:r.push({path:"/promotion/sign_in_setting/list"});break;case 7:r.push({path:"/promotion/recharge_setting/list"});break;case 10:r.push({path:"/promotion/product_gift/list"});break}};return(l,i)=>{const B=m("el-tab-pane"),O=m("el-tabs"),f=m("el-table-column"),S=m("el-divider"),T=m("el-table"),F=m("a-spin");return a(),u("div",K,[t("div",Q,[t("div",W,[t("div",X,[t("div",null,[i[10]||(i[10]=t("div",{class:"tip"},"仅统计优惠券、满减/送、限时折扣、秒杀、多人拼团、赠品 活动",-1)),t("div",Y,[(a(!0),u(I,null,L(b,e=>(a(),u("div",{class:G(["item",{active:e.value==s.time_type}]),onClick:N=>P(e.value)},[t("div",tt,x(e.num),1),t("div",it,x(e.label),1)],10,Z))),256))])])]),t("div",et,[t("div",null,[i[19]||(i[19]=t("h2",null,"商家常用",-1)),t("div",st,[t("div",{class:"app-wrapper-item",onClick:i[0]||(i[0]=e=>n(2))},i[11]||(i[11]=[t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-youhuiquan"})],-1),t("div",null,[t("div",{class:"name"},"优惠券"),t("div",{class:"tip"},"向客户发放店铺优惠券")],-1)])),t("div",{class:"app-wrapper-item",onClick:i[1]||(i[1]=e=>n(6))},i[12]||(i[12]=[t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-time-limit"})],-1),t("div",null,[t("div",{class:"name"},"限时折扣"),t("div",{class:"tip"},"设置商品限时打折促销")],-1)])),t("div",{class:"app-wrapper-item",onClick:i[2]||(i[2]=e=>n(3))},i[13]||(i[13]=[t("div",{class:"icon-col"},[t("p",null,"减")],-1),t("div",null,[t("div",{class:"name"},"满减"),t("div",{class:"tip"},"购满一定金额或件数享受优惠")],-1)])),t("div",{class:"app-wrapper-item",onClick:i[3]||(i[3]=e=>n(5))},i[14]||(i[14]=[t("div",{class:"icon-col"},[t("p",null,"送")],-1),t("div",null,[t("div",{class:"name"},"满送"),t("div",{class:"tip"},"购满一定金额或件数享受优惠")],-1)])),t("div",{class:"app-wrapper-item",onClick:i[4]||(i[4]=e=>n(9))},i[15]||(i[15]=[t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-qiandao"})],-1),t("div",null,[t("div",{class:"name"},"日历签到"),t("div",{class:"tip"},"每日签到领取积分或奖励")],-1)])),t("div",{class:"app-wrapper-item",onClick:i[5]||(i[5]=e=>n(1))},i[16]||(i[16]=[t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-miaosha"})],-1),t("div",null,[t("div",{class:"name"},"秒杀"),t("div",{class:"tip"},"快速抢购引导顾客更多消费")],-1)])),t("div",{class:"app-wrapper-item",onClick:i[6]||(i[6]=e=>n(10))},i[17]||(i[17]=[t("div",{class:"icon-col"},[t("p",null,"赠")],-1),t("div",null,[t("div",{class:"name"},"赠品"),t("div",{class:"tip"},"设置赠品, 回馈客户")],-1)])),t("div",{class:"app-wrapper-item",onClick:i[7]||(i[7]=e=>n(7))},i[18]||(i[18]=[t("div",{class:"icon-col"},[t("p",null,"充")],-1),t("div",null,[t("div",{class:"name"},"余额充值"),t("div",{class:"tip"},"充值店铺余额")],-1)]))])])]),t("div",lt,[i[24]||(i[24]=t("h2",null,"活动记录",-1)),p(O,{type:"card",onTabChange:q},{default:o(()=>[(a(!0),u(I,null,L(z,e=>(a(),y(B,{label:e.label,value:e.value},null,8,["label","value"]))),256))]),_:1}),p(F,{spinning:v.value},{default:o(()=>[p(T,{data:D.value,"row-key":"coupon_id",total:k.value,loading:v.value},{empty:o(()=>[t("div",nt,[v.value?c("",!0):(a(),u("div",pt,"暂无数据"))])]),default:o(()=>[p(f,{label:"活动名称",prop:"promotion_name",width:"300"},{default:o(({row:e})=>[t("div",at,[t("div",null,x(e.promotion_name||"--"),1)])]),_:1}),p(f,{label:"活动类型",prop:"type_text",width:"300"}),p(f,{label:"活动时间",prop:"time_text"}),p(f,{label:"操作",width:"110"},{default:o(({row:e})=>[t("a",{class:"btn-link",onClick:N=>n(e.type)},"查看",8,ot),p(S,{direction:"vertical"}),e.type==1?(a(),y(_(g),{key:0,params:{act:"detail",id:e.relation_id},isDrawer:"",title:"编辑限时秒杀",width:"800px",path:"promotion/seckill/Info",onOkCallback:d},{default:o(()=>i[20]||(i[20]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])):c("",!0),e.type==2?(a(),y(_(g),{key:1,isDrawer:"",onOkCallback:d,title:"编辑优惠券",width:"800px",path:"promotion/coupon/Info",params:{act:"detail",id:e.relation_id}},{default:o(()=>i[21]||(i[21]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])):c("",!0),e.type==6?(a(),y(_(g),{key:2,isDrawer:"",onOkCallback:d,title:"编辑限时折扣",width:"900px",path:"promotion/productActivity/limitdiscount/Info",params:{act:"detail",id:e.relation_id}},{default:o(()=>i[22]||(i[22]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])):c("",!0),e.type==3||e.type==5||e.type==4?(a(),y(_(g),{key:3,isDrawer:"",onOkCallback:d,title:"编辑优惠活动",width:"800px",path:"promotion/productActivity/Info",params:{act:"detail",id:e.relation_id,promotion_type:e.type==4?2:e.type==3?1:3}},{default:o(()=>i[23]||(i[23]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])):c("",!0)]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),k.value>0?(a(),u("div",rt,[p(_(R),{page:s.page,"onUpdate:page":i[8]||(i[8]=e=>s.page=e),size:s.size,"onUpdate:size":i[9]||(i[9]=e=>s.size=e),total:k.value,onCallback:d},null,8,["page","size","total"])])):c("",!0)])])])])}}}),ft=M(dt,[["__scopeId","data-v-1e1c74ed"]]);export{ft as default};
