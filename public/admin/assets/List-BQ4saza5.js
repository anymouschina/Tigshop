import{d as W,i as p,G as J,q as Q,c as _,e as s,f,b as l,w as a,g as u,I as q,r as d,o as r,L as X,F as Z,a as tt,j as y,E as n,D as Y,K as D,_ as et}from"./index-CGYuOau0.js";/* empty css             */import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";import{u as st}from"./config-DNllFJyR.js";import{_ as V}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as lt}from"./Pagination-yOfjsBuR.js";/* empty css                                                                  *//* empty css                                                                              */import{S as at}from"./SelectTimeInterval-BYQIPzkk.js";import{f as c}from"./time-ClyPenjC.js";import{g as ot,a as it,u as U,d as nt}from"./notice-xwbAxRL0.js";import{_ as I}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const dt={class:"container"},rt={class:"content_wrapper"},mt={class:"lyecs-table-list-warp"},ut={class:"list-table-tool lyecs-search-warp"},pt={class:"advanced-search-warp list-table-tool-row"},_t={class:"simple-form-warp"},ft={class:"simple-form-field"},ct={class:"form-group"},vt={class:"control-container"},gt={key:0,class:"simple-form-field"},bt={class:"form-group"},yt={class:"control-container"},Yt={class:"simple-form-field"},Dt={class:"form-group"},wt={class:"control-container flex flex-align-center"},kt={style:{"margin-left":"10px"}},Ct={class:"simple-form-field"},xt={class:"advanced-search-warp list-table-tool-row"},Mt={class:"simple-form-warp"},Ht={class:"simple-form-field"},Vt={class:"table-container"},St={class:"tit-row flex flex-align-center"},At={key:0,class:"label"},zt={class:"txt"},ht={class:"empty-warp"},qt={key:0,class:"empty-bg"},Ut={key:0,class:"pagination-con"},It={key:0,class:"selected-action-warp"},Lt={class:"selected-action"},Bt=W({__name:"List",setup(Ft){const L=st(),S=p([]),v=p(!0),w=p(0);p(0);const x=p([]),o=J({page:1,size:L.pageSize,sort_field:"",sort_order:"",title:"",end_time:"",start_time:""}),M=p(-1),A=i=>{if(i===-1){M.value=i;return}o.start_time=c(new Date,"YYYY-MM-DD HH:mm:ss"),i===0&&(o.end_time=c(new Date,"YYYY-MM-DD HH:mm:ss")),i===1&&(o.start_time=c(D(1,"sub"),"YYYY-MM-DD HH:mm:ss"),o.end_time=c(D(1,"sub"),"YYYY-MM-DD HH:mm:ss")),i===2&&(o.end_time=c(D(7,"add"),"YYYY-MM-DD HH:mm:ss")),i===3&&(o.end_time=c(D(30,"add"),"YYYY-MM-DD HH:mm:ss")),i===4&&(o.end_time=c(D(180,"add"),"YYYY-MM-DD HH:mm:ss")),m()},m=async()=>{v.value=!0;try{const i=await ot({...o});S.value=i.filter_result,w.value=i.total}catch(i){q.error(i.message)}finally{v.value=!1}},H=p(),B=async()=>{v.value=!0;try{const i=await it();H.value=i}catch(i){q.error(i.message)}finally{v.value=!1}};Q(()=>{m(),B()});const k=()=>{m()},F=()=>{o.status=-1,o.title="",o.end_time="",o.start_time="",m()},N=({prop:i,order:t})=>{o.sort_field=i,o.sort_order=t=="ascending"?"asc":t=="descending"?"desc":"",m()},K=i=>{x.value=i.map(t=>t.product_id)};return(i,t)=>{const P=d("el-input"),T=d("el-option"),$=d("el-select"),C=d("el-radio-button"),E=d("el-radio-group"),g=d("el-button"),O=d("el-form"),b=d("el-table-column"),z=d("el-divider"),h=d("el-space"),j=d("el-table"),G=d("a-spin");return r(),_("div",dt,[s("div",rt,[s("div",mt,[s("div",ut,[l(O,{model:o,name:"form"},{default:a(()=>[s("div",pt,[s("div",_t,[s("div",ft,[s("div",ct,[t[8]||(t[8]=s("label",{class:"control-label"},[s("span",null,"标题：")],-1)),s("div",vt,[l(P,{modelValue:o.title,"onUpdate:modelValue":t[0]||(t[0]=e=>o.title=e),name:"keyword",placeholder:"请输入内容标题",onKeyup:X(k,["enter"]),clearable:"",onClear:k},null,8,["modelValue"])])])]),H.value?(r(),_("div",gt,[s("div",bt,[t[9]||(t[9]=s("label",{class:"control-label"},[s("span",null,"状态：")],-1)),s("div",yt,[l($,{modelValue:o.status,"onUpdate:modelValue":t[1]||(t[1]=e=>o.status=e),placeholder:"请选择文章状态",style:{width:"180px","margin-right":"10px"},onChange:k,clearable:""},{default:a(()=>[(r(!0),_(Z,null,tt(H.value.status_map,(e,R)=>(r(),y(T,{label:e,value:R},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])])):f("",!0),s("div",Yt,[s("div",Dt,[t[14]||(t[14]=s("label",{class:"control-label"},[s("span",null,"推送时间：")],-1)),s("div",wt,[l(u(at),{"start-date":o.start_time,"onUpdate:startDate":t[2]||(t[2]=e=>o.start_time=e),"end-date":o.end_time,"onUpdate:endDate":t[3]||(t[3]=e=>o.end_time=e),"value-format":"YYYY-MM-DD HH:mm:ss",onCallback:t[4]||(t[4]=e=>A(-1))},null,8,["start-date","end-date"]),s("div",kt,[l(E,{class:"itemWidth",modelValue:M.value,"onUpdate:modelValue":t[5]||(t[5]=e=>M.value=e),onChange:A},{default:a(()=>[l(C,{value:0},{default:a(()=>t[10]||(t[10]=[n("今天")])),_:1}),l(C,{value:1},{default:a(()=>t[11]||(t[11]=[n("昨天")])),_:1}),l(C,{value:2},{default:a(()=>t[12]||(t[12]=[n("近7天")])),_:1}),l(C,{value:3},{default:a(()=>t[13]||(t[13]=[n("近30天")])),_:1})]),_:1},8,["modelValue"])])])])]),s("div",Ct,[l(g,{type:"primary",onClick:k},{default:a(()=>t[15]||(t[15]=[n("搜索")])),_:1})])])]),s("div",xt,[s("div",Mt,[s("div",Ht,[l(u(I),{isDrawer:"",onOkCallback:m,title:"添加活动通知",width:"700px",path:"salesman/notice/Info",params:{act:"add"}},{default:a(()=>[l(g,{type:"primary"},{default:a(()=>t[16]||(t[16]=[n("立即新建")])),_:1})]),_:1}),l(g,{class:"ml10",onClick:F},{default:a(()=>t[17]||(t[17]=[n("清空筛选条件")])),_:1})])])])]),_:1},8,["model"])]),s("div",Vt,[l(G,{spinning:v.value},{default:a(()=>[l(j,{data:S.value,total:w.value,"row-key":"product_id",onSelectionChange:K,onSortChange:N},{empty:a(()=>[s("div",ht,[v.value?f("",!0):(r(),_("div",qt,"暂无数据"))])]),default:a(()=>[l(b,{label:"标题",prop:"product_id",width:250,fixed:"left","show-overflow-tooltip":""},{default:a(({row:e})=>[s("div",St,[e.is_top!=0?(r(),_("div",At,"置顶")):f("",!0),s("div",zt,Y(e.title),1)])]),_:1}),l(b,{label:"推送时间",width:200,sortable:"custom"},{default:a(({row:e})=>[n(Y(e.start_time),1)]),_:1}),l(b,{label:"失效时间",width:200,sortable:"custom"},{default:a(({row:e})=>[n(Y(e.end_time||"--"),1)]),_:1}),l(b,{label:"状态"},{default:a(({row:e})=>[n(Y(e.status_text),1)]),_:1}),l(b,{width:160,fixed:"right",label:"操作"},{default:a(({row:e})=>[l(h,{size:0},{default:a(()=>[e.is_top!=0?(r(),y(u(V),{key:0,onAfterDelete:m,requestApi:u(U),params:{id:e.id,field:"is_top",val:0},title:"确定取消置顶吗？"},{default:a(()=>t[18]||(t[18]=[n("取消置顶")])),_:2},1032,["requestApi","params"])):f("",!0),e.is_top!=0?(r(),y(z,{key:1,direction:"vertical"})):f("",!0),l(u(I),{params:{act:"detail",id:e.id},isDrawer:"",path:"salesman/notice/Info",title:"编辑内容",width:"700px",onOkCallback:m},{default:a(()=>t[19]||(t[19]=[s("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),l(z,{direction:"vertical"}),e.is_available==1?(r(),y(u(V),{key:2,onAfterDelete:m,requestApi:u(U),params:{id:e.id,field:"is_available",val:0},title:"失效后将不可恢复，确认失效？"},{default:a(()=>t[20]||(t[20]=[n("失效")])),_:2},1032,["requestApi","params"])):(r(),y(u(V),{key:3,onAfterDelete:m,requestApi:u(nt),params:{id:e.id}},{default:a(()=>t[21]||(t[21]=[n("删除")])),_:2},1032,["requestApi","params"]))]),_:2},1024)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),w.value>0?(r(),_("div",Ut,[l(u(lt),{page:o.page,"onUpdate:page":t[6]||(t[6]=e=>o.page=e),size:o.size,"onUpdate:size":t[7]||(t[7]=e=>o.size=e),total:w.value,onCallback:m},null,8,["page","size","total"])])):f("",!0)]),x.value.length>0?(r(),_("div",It,[s("div",Lt,[l(h,null,{default:a(()=>[s("span",null,[t[22]||(t[22]=n("已选择：")),s("b",null,Y(x.value.length),1),t[23]||(t[23]=n(" 项"))]),l(g,null,{default:a(()=>t[24]||(t[24]=[n("设置等级")])),_:1}),l(g,null,{default:a(()=>t[25]||(t[25]=[n("分组")])),_:1}),l(g,null,{default:a(()=>t[26]||(t[26]=[n("清退")])),_:1})]),_:1})])])):f("",!0)])])])}}}),te=et(Bt,[["__scopeId","data-v-750f35c5"]]);export{te as default};
