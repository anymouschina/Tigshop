import{d as I,i as n,C as q,s as L,q as j,r as i,c as g,o as d,e as a,b as u,f as h,D as o,j as U,w as k,I as m,_ as E}from"./index-CGYuOau0.js";import{a as M,u as O}from"./feedback-Cs35kFoj.js";const z={class:"container"},A={class:"lyecs-form-table"},G={key:0},H={class:"lyecs-form-table"},J={style:{"text-align":"end"}},K={class:"content_wrapper"},P={class:"lyecs-form-table"},Q=I({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:x,emit:C}){const l=C,c=w,p=n(!0),_=q().currentRoute.value.query,f=n(c.isDialog?c.act:String(_.act)),v=n(c.isDialog?c.id:Number(_.id)),S=f.value==="add"?"create":"update",y=L(),e=n({product:{product_id:0,product_name:""}}),r=n({product:{product_id:0,product_name:""}}),D=async()=>{try{const t=await M(f.value,{id:v.value});Object.assign(e.value,t.item)}catch(t){m.error(t.message),l("close")}finally{p.value=!1}};j(()=>{D()});const R=async()=>{await y.value.validate();try{l("update:confirmLoading",!0);let t=0;e.value.status==1&&(t=e.value.id);const s=await O(S,{id:v.value,parent_id:t,...r.value});l("submitCallback",s),m.success(s.message)}catch(t){m.error(t.message)}finally{l("update:confirmLoading",!1)}};return x({onFormSubmit:()=>{R()}}),(t,s)=>{const b=i("el-divider"),V=i("el-input"),B=i("el-form-item"),N=i("el-form");return d(),g("div",z,[a("div",A,[a("h2",null,[a("span",null,"类型:"+o(e.value.type_name),1),e.value.product_id?(d(),g("span",G,"【 "+o(e.value.product.product_name)+" 】",1)):h("",!0)])]),u(b),a("div",H,[a("p",null,"主题:"+o(e.value.title),1),a("p",null,"内容: "+o(e.value.content),1),a("p",J,"【 留言板 】"+o(e.value.username)+" @ "+o(e.value.add_time),1)]),u(b),a("div",K,[a("div",P,[p.value?h("",!0):(d(),U(N,{key:0,ref_key:"formRef",ref:y,model:r.value,"label-width":"auto"},{default:k(()=>[u(B,{label:"回复内容",prop:"content"},{default:k(()=>[u(V,{type:"textarea",rows:5,modelValue:r.value.content,"onUpdate:modelValue":s[0]||(s[0]=F=>r.value.content=F)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]))])])])}}}),Y=E(Q,[["__scopeId","data-v-db804922"]]);export{Y as default};
