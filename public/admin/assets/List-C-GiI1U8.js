import{d as ie,i as y,G as de,q as re,c as p,e as s,F as M,a as ue,b as o,w as l,f as n,g as d,I as P,r as _,o as a,j as c,n as $,D as m,L as pe,E as k,_ as ce}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{P as I}from"./PopFormElm-DSof3F4x.js";import{_ as _e}from"./Switch.vue_vue_type_script_setup_true_lang-CKSPWIQL.js";import{_ as R}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as me}from"./Pagination-yOfjsBuR.js";import{u as G,i as ve}from"./format-DFT-VJzO.js";import{u as fe}from"./config-DNllFJyR.js";import{g as ke,u as V,r as be,a as ge,b as ye}from"./product-CxWf3yyB.js";import{S as he}from"./SelectBrand-DsStZmqh.js";import{_ as Ce}from"./SelectCategory.vue_vue_type_script_setup_true_lang-D0pGcDY-.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as Se}from"./SelectShop.vue_vue_type_script_setup_true_lang-BoPU8Xwc.js";import Ve from"./ProductStockPop-Dnm6zaT8.js";import{a as F,c as H}from"./version-CpBOsX2d.js";import{_ as w}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";import"./brand-BWQ0xslz.js";import"./category-BQcUsnE8.js";import"./category-DpIl2IOo.js";import"./time-ClyPenjC.js";import"./shop-Daw3OFCx.js";const xe={class:"container"},qe={class:"content_wrapper"},Ae={class:"tabs flex"},Ue=["onClick"],Pe=["onClick"],$e=["onClick"],we=["onClick"],Oe=["onClick"],ze={class:"lyecs-table-list-warp"},De={class:"list-table-tool lyecs-search-warp"},Ie={class:"advanced-search-warp list-table-tool-row"},Fe={class:"simple-form-warp"},Be={class:"simple-form-field"},Le={class:"form-group"},Ee={class:"control-container"},Ne={key:0,class:"simple-form-field"},Te={class:"form-group"},Ke={class:"control-container"},je={class:"simple-form-field"},Me={class:"form-group"},Re={class:"control-container"},Ge={class:"simple-form-field"},He={class:"form-group"},Je={class:"control-container"},Qe={class:"simple-form-field"},We={class:"form-group"},Xe={class:"control-container"},Ye={class:"simple-form-field"},Ze={class:"list-table-tool-row"},et={class:"list-table-tool-col"},tt={key:6},st={class:"table-container"},lt={class:"flex"},at={key:0,class:"span-pic"},ot=["href"],nt=["src"],it={class:"span-product-con"},dt={class:"span-product-name"},rt={key:0,class:"span-product-brand"},ut={class:"span-con"},pt={key:1,class:"span-product-brand"},ct={class:"span-con green"},_t={key:2,class:"span-product-brand"},mt={class:"span-con green"},vt={key:3},ft={class:"span-con"},kt={class:"span-con"},bt={class:"status-switch"},gt={key:0},yt=["title"],ht=["title"],Ct={key:0},St={key:1},Vt=["href"],xt={class:"empty-warp"},qt={key:0,class:"empty-bg"},At={key:0,class:"pagination-con"},Ut=ie({__name:"List",setup(Pt){const J=fe(),E=y([]),x=y(!0),O=y(0),B=y(0),h=y([]),u=de({page:1,size:J.pageSize,sort_field:"",sort_order:"",keyword:"",intro_type:"",is_delete:0,search_shop:0}),C=y(localStorage.getItem("adminType")),i=y(1),q=r=>{i.value=r,u.product_status=r>=1&&r<=3?1:r>=4&&r<=6?0:void 0,u.check_status=r>=1&&r<=4?1:r===5?0:r===6?2:void 0,u.shop_id=r===2?0:-1,u.is_delete=r===7?1:0,u.search_shop=r===3?1:0,Object.keys(u).forEach(e=>{u[e]===void 0&&delete u[e]}),v()},Q=async(r,e)=>{try{const A=await ge(r,{product_id:e});P.success(A.message),v()}catch(A){P.error(A.message)}},W=y([{label:"出售中的商品",value:1},{label:"自营商品",value:2},{label:"店铺商品",value:3},{label:"已下架商品",value:4},{label:"商品回收站",value:7},{label:"待审核商品",value:5},{label:"审核失败商品",value:6}]),N=y(),X=r=>{N.value.SelectShopChange(r),S()},v=async()=>{x.value=!0;try{i.value===1&&(u.product_status=1,u.check_status=1);const r=await ke({...u});E.value=r.filter_result,O.value=r.total,B.value=r.waiting_checked_count}catch(r){P.error(r.message)}finally{x.value=!1}};re(()=>{v()});const S=()=>{v()},Y=({prop:r,order:e})=>{u.sort_field=r,u.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",v()},z=async r=>{try{const e=await ye(r,{ids:h.value});P.success(e.message),await v()}catch(e){P.error(e.message)}},Z=r=>{h.value=r.map(e=>e.product_id)};return(r,e)=>{const A=_("el-badge"),b=_("el-button"),ee=_("el-input"),D=_("el-option"),te=_("el-select"),T=_("router-link"),U=_("el-popconfirm"),K=_("el-space"),se=_("el-form"),g=_("el-table-column"),L=_("el-divider"),j=_("el-dropdown-item"),le=_("el-dropdown-menu"),ae=_("el-dropdown"),oe=_("el-table"),ne=_("a-spin");return a(),p("div",xe,[s("div",qe,[s("div",Ae,[(a(!0),p(M,null,ue(W.value,t=>(a(),p(M,null,[t.value==2&&C.value!="shop"&&d(F)()?(a(),p("div",{key:0,class:$(["item",i.value==t.value?"active":""]),onClick:f=>q(t.value)},m(t.label),11,Ue)):n("",!0),t.value==3&&C.value!="shop"&&d(F)()?(a(),p("div",{key:1,class:$(["item",i.value==t.value?"active":""]),onClick:f=>q(t.value)},m(t.label),11,Pe)):n("",!0),t.value==5&&C.value==="admin"&&d(F)()?(a(),c(A,{key:2,value:B.value,color:"#f33",offset:[-5,5],hidden:B.value===0},{default:l(()=>[s("div",{class:$(["item",i.value==t.value?"active":""]),onClick:f=>q(t.value)},m(t.label),11,$e)]),_:2},1032,["value","hidden"])):n("",!0),t.value==6&&C.value==="shop"?(a(),p("div",{key:3,class:$(["item",i.value==t.value?"active":""]),onClick:f=>q(t.value)},m(t.label),11,we)):t.value!=2&&t.value!=3&&t.value!=5&&t.value!=6?(a(),p("div",{key:4,class:$(["item",i.value==t.value?"active":""]),onClick:f=>q(t.value)},m(t.label),11,Oe)):n("",!0)],64))),256))]),s("div",ze,[s("div",De,[o(se,{model:u,name:"form"},{default:l(()=>[s("div",Ie,[s("div",Fe,[s("div",Be,[s("div",Le,[s("div",Ee,[o(ee,{modelValue:u.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>u.keyword=t),name:"keyword",placeholder:"输入商品名称/货号",onKeyup:pe(S,["enter"]),clearable:"",onClear:S},{append:l(()=>[o(b,{onClick:S},{default:l(()=>e[11]||(e[11]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),i.value!==2&&C.value!="shop"&&d(F)()?(a(),p("div",Ne,[s("div",Te,[e[12]||(e[12]=s("label",{class:"control-label"},[s("span",null,"店铺：")],-1)),s("div",Ke,[o(d(Se),{modelValue:u.shop_id,"onUpdate:modelValue":e[1]||(e[1]=t=>u.shop_id=t),onOnChange:X},null,8,["modelValue"])])])])):n("",!0),s("div",je,[s("div",Me,[e[13]||(e[13]=s("label",{class:"control-label"},[s("span",null,"分类：")],-1)),s("div",Re,[o(d(Ce),{ref_key:"selectCategoryRef",ref:N,category_id:u.category_id,"onUpdate:category_id":e[2]||(e[2]=t=>u.category_id=t)},null,8,["category_id"])])])]),s("div",Ge,[s("div",He,[e[14]||(e[14]=s("label",{class:"control-label"},[s("span",null,"品牌：")],-1)),s("div",Je,[o(d(he),{brand_id:u.brand_id,"onUpdate:brand_id":e[3]||(e[3]=t=>u.brand_id=t),onOnChange:S},null,8,["brand_id"])])])]),s("div",Qe,[s("div",We,[e[15]||(e[15]=s("label",{class:"control-label"},[s("span",null,"类型 ：")],-1)),s("div",Xe,[o(te,{modelValue:u.intro_type,"onUpdate:modelValue":e[4]||(e[4]=t=>u.intro_type=t),clearable:"",onChange:S},{default:l(()=>[o(D,{label:"精品",value:"is_best"}),o(D,{label:"热销",value:"is_hot"}),o(D,{label:"新品",value:"is_new"}),o(D,{label:"秒杀",value:"is_promote"})]),_:1},8,["modelValue"])])])]),s("div",Ye,[o(b,{type:"primary",onClick:S},{default:l(()=>e[16]||(e[16]=[k("搜索")])),_:1})])])]),s("div",Ze,[s("div",et,[o(K,null,{default:l(()=>[o(d(w),{params:{act:"add"},isDrawer:"",delayed:2e4,path:"product/product/Info",title:"添加商品",width:"900px",onOkCallback:v},{default:l(()=>[o(b,{type:"primary"},{default:l(()=>e[17]||(e[17]=[k("添加商品")])),_:1})]),_:1}),d(H)()&&C.value==="admin"?(a(),c(T,{key:0,to:{path:"/setting/multilingual/translationContent/list",query:{type:"product"}}},{default:l(()=>[o(b,null,{default:l(()=>e[18]||(e[18]=[k("批量翻译商品")])),_:1})]),_:1})):n("",!0),d(H)()&&C.value==="shop"?(a(),c(T,{key:1,to:{path:"/merchant_setting/shop_multilingual/shop_translationContent/list",query:{type:"product"}}},{default:l(()=>[o(b,null,{default:l(()=>e[19]||(e[19]=[k("批量翻译商品")])),_:1})]),_:1})):n("",!0),i.value==4||i.value==1?(a(),c(U,{key:2,title:"您确认要批量移入回收站吗？",onConfirm:e[5]||(e[5]=t=>z("recycle"))},{reference:l(()=>[o(b,{disabled:h.value.length===0},{default:l(()=>e[20]||(e[20]=[k("批量移入回收站")])),_:1},8,["disabled"])]),_:1})):n("",!0),i.value==7?(a(),c(U,{key:3,title:"您确认要批量还原吗？",onConfirm:e[6]||(e[6]=t=>z("restore"))},{reference:l(()=>[o(b,{disabled:h.value.length===0},{default:l(()=>e[21]||(e[21]=[k("批量还原")])),_:1},8,["disabled"])]),_:1})):n("",!0),i.value==4?(a(),c(U,{key:4,title:"您确认要批量上架吗？",onConfirm:e[7]||(e[7]=t=>z("up"))},{reference:l(()=>[o(b,{disabled:h.value.length===0},{default:l(()=>e[22]||(e[22]=[k("批量上架")])),_:1},8,["disabled"])]),_:1})):n("",!0),i.value==1?(a(),c(U,{key:5,title:"您确认要批量下架吗？",onConfirm:e[8]||(e[8]=t=>z("down"))},{reference:l(()=>[o(b,{disabled:h.value.length===0},{default:l(()=>e[23]||(e[23]=[k("批量下架")])),_:1},8,["disabled"])]),_:1})):n("",!0),h.value.length>0?(a(),p("span",tt,[e[24]||(e[24]=k(" 已选择：")),s("b",null,m(h.value.length),1),e[25]||(e[25]=k(" 项 "))])):n("",!0)]),_:1})]),e[26]||(e[26]=s("div",{class:"list-table-tool-col"},null,-1))])]),_:1},8,["model"])]),s("div",st,[o(ne,{spinning:x.value},{default:l(()=>[o(oe,{data:E.value,total:O.value,"row-key":"product_id",onSelectionChange:Z,onSortChange:Y},{empty:l(()=>[s("div",xt,[x.value?n("",!0):(a(),p("div",qt,"暂无数据"))])]),default:l(()=>[o(g,{type:"selection",width:"32"}),o(g,{label:"商品名称",prop:"product_id",sortable:"custom","min-width":320},{default:l(({row:t})=>[s("div",lt,[t.pic_thumb?(a(),p("div",at,[s("a",{href:d(G)({path:"product",sn:t.product_sn}),target:"_blank"},[s("img",{src:d(ve)(t.pic_thumb),height:"50",width:"50",alt:""},null,8,nt)],8,ot)])):n("",!0),s("div",it,[s("div",dt,[o(d(I),{max:100,"org-value":t.product_name,"onUpdate:orgValue":f=>t.product_name=f,params:{id:t.product_id,field:"product_name"},requestApi:d(V),label:"商品名称",type:"textarea"},{default:l(()=>[s("div",null,m(t.product_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),t.brand_name?(a(),p("p",rt,[e[27]||(e[27]=s("span",{class:"span-tit"},"商品：",-1)),s("span",ut,m(t.brand_name),1)])):n("",!0),t.shopSimple?(a(),p("p",pt,[e[28]||(e[28]=s("span",{class:"span-tit"},"店铺：",-1)),s("span",ct,m(t.shopSimple.shop_title),1)])):n("",!0),t.suppliers_name?(a(),p("p",_t,[e[29]||(e[29]=s("span",{class:"span-tit"},"供应商：",-1)),s("span",mt,m(t.suppliers_name),1)])):n("",!0),t.type===2?(a(),p("p",vt,e[30]||(e[30]=[s("span",{class:"span-con green"},"【虚拟商品】",-1)]))):n("",!0)])])]),_:1}),o(g,{width:200,label:"商品信息"},{default:l(({row:t})=>[e[31]||(e[31]=s("span",{class:"span-tit"},"货号：",-1)),s("div",ft,[o(d(I),{"org-value":t.product_sn,"onUpdate:orgValue":f=>t.product_sn=f,params:{id:t.product_id,field:"product_sn"},requestApi:d(V),label:"货号",max:20},{default:l(()=>[s("div",null,m(t.product_sn||"--"),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),e[32]||(e[32]=s("br",null,null,-1)),e[33]||(e[33]=s("span",{class:"span-tit"},"售价：",-1)),s("div",kt,[o(d(I),{extra:"请输入商品价格","org-value":t.product_price,"onUpdate:orgValue":f=>t.product_price=f,params:{id:t.product_id,field:"product_price"},requestApi:d(V),label:"售价"},{default:l(()=>[s("div",null,m(t.product_price||0),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])])]),_:1}),i.value!=7&&i.value!=5&&i.value!=6?(a(),c(g,{key:0,width:100,label:"是否上架"},{default:l(({row:t})=>[s("div",bt,[t.check_status==1?(a(),p("div",gt,[o(d(_e),{checked:t.product_status,"onUpdate:checked":f=>t.product_status=f,params:{id:t.product_id,field:"product_status"},requestApi:d(V)},null,8,["checked","onUpdate:checked","params","requestApi"])])):n("",!0)])]),_:1})):n("",!0),i.value===5||i.value===6?(a(),c(g,{key:1,width:100,label:"审核状态"},{default:l(({row:t})=>[t.check_status===2?(a(),p("span",{key:0,class:"red tips-hover",title:t.check_reason},e[34]||(e[34]=[k("审核失败 "),s("i",{class:"ico-font"},"",-1)]),8,yt)):n("",!0),t.check_status===0?(a(),p("span",{key:1,class:"tips-hover gray",title:t.check_reason},"审核中",8,ht)):n("",!0),e[35]||(e[35]=s("br",null,null,-1))]),_:1})):n("",!0),i.value===6?(a(),c(g,{key:2,width:120,label:"失败原因","show-overflow-tooltip":""},{default:l(({row:t})=>[k(m(t.check_reason),1)]),_:1})):n("",!0),i.value!=7?(a(),c(g,{key:3,width:100,label:"库存",prop:"product_stock",sortable:"custom"},{default:l(({row:t})=>[t.product_exist?(a(),p("a",Ct,m(t.product_stock),1)):(a(),p("div",St,[x.value?n("",!0):(a(),c(Ve,{key:0,params:{id:t.product_id,product_info:t},requestApi:d(V),onCallback:v},{default:l(()=>[s("div",null,m(t.product_stock),1)]),_:2},1032,["params","requestApi"]))]))]),_:1})):n("",!0),i.value!=7?(a(),c(g,{key:4,width:100,label:"排序",prop:"sort_order",sortable:"custom"},{default:l(({row:t})=>[o(d(I),{"org-value":t.sort_order,"onUpdate:orgValue":f=>t.sort_order=f,params:{id:t.product_id,field:"sort_order"},requestApi:d(V),label:"排序",type:"input"},{default:l(()=>[s("div",null,m(t.sort_order),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1})):n("",!0),o(g,{width:150,fixed:"right",label:"操作"},{default:l(({row:t})=>[o(K,{size:0},{default:l(()=>[i.value==5&&t.check_status===0?(a(),c(d(w),{key:0,maskClose:!1,params:{act:"detail",id:t.product_id,examine:1},showClose:!1,showOnOk:!1,dialogClass:"noPadding",isDrawer:"",path:"product/product/Info",title:"商品详情",width:"900px",onOkCallback:v},{default:l(()=>e[36]||(e[36]=[s("a",{class:"btn-link"},"详情",-1)])),_:2},1032,["params"])):n("",!0),i.value==5&&t.check_status===0?(a(),c(L,{key:1,direction:"vertical"})):n("",!0),i.value==6&&t.check_status===2?(a(),c(d(w),{key:2,maskClose:!1,params:{act:"again",id:t.product_id},dialogClass:"noPadding",isDrawer:"",path:"product/product/Info",title:"修改商品（重新审核）",width:"600px",onOkCallback:v},{default:l(()=>e[37]||(e[37]=[s("a",{class:"btn-link"},"重新审核",-1)])),_:2},1032,["params"])):n("",!0),i.value==5&&t.check_status===0?(a(),c(d(w),{key:3,maskClose:!1,params:{act:"detail",id:t.product_id},dialogClass:"noPadding",isDrawer:"",path:"product/product/Examine",title:"商品审核",width:"600px",onOkCallback:v},{default:l(()=>e[38]||(e[38]=[s("a",{class:"btn-link"},"去处理",-1)])),_:2},1032,["params"])):n("",!0),i.value!=7&&i.value!=5&&i.value!=6?(a(),c(d(w),{key:4,maskClose:!1,params:{act:"detail",id:t.product_id},dialogClass:"noPadding",isDrawer:"",path:"product/product/Info",title:"编辑商品",width:"900px",onOkCallback:v},{default:l(()=>e[39]||(e[39]=[s("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])):n("",!0),i.value!=7?(a(),c(L,{key:5,direction:"vertical"})):n("",!0),i.value!=7&&i.value!=5&&i.value!=6?(a(),p("a",{key:6,class:"btn-link",href:d(G)({path:"product",sn:t.product_sn}),target:"_blank"},"查看",8,Vt)):n("",!0),i.value!=7&&i.value!=5&&i.value!=6?(a(),c(L,{key:7,direction:"vertical"})):n("",!0),i.value===7?(a(),c(d(R),{key:8,params:{id:t.product_id,field:"is_delete",val:0},requestApi:d(V),title:"确定还原该商品吗？",onAfterDelete:v},{default:l(()=>e[40]||(e[40]=[k(" 还原 ")])),_:2},1032,["params","requestApi"])):n("",!0),i.value!=7?(a(),c(ae,{key:9,trigger:"hover","hide-on-click":!1},{dropdown:l(()=>[o(le,null,{default:l(()=>[o(j,null,{default:l(()=>[o(d(R),{params:{id:t.product_id,is_delete:1},requestApi:d(be),title:"确定把该商品移入回收站吗？",onAfterDelete:v},{default:l(()=>e[41]||(e[41]=[k(" 移入回收站 ")])),_:2},1032,["params","requestApi"])]),_:2},1024),o(j,null,{default:l(()=>[o(U,{title:"确定复制?",onConfirm:f=>Q("copy",t.product_id)},{reference:l(()=>[o(b,{style:{width:"100%"},link:"",type:"primary"},{default:l(()=>e[42]||(e[42]=[k("复制")])),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:l(()=>[e[43]||(e[43]=s("span",{class:"iconfont-admin icon-gengduo1 btn-link"},null,-1))]),_:2},1024)):n("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),O.value>0?(a(),p("div",At,[o(d(me),{page:u.page,"onUpdate:page":e[9]||(e[9]=t=>u.page=t),size:u.size,"onUpdate:size":e[10]||(e[10]=t=>u.size=t),total:O.value,onCallback:v},null,8,["page","size","total"])])):n("",!0)])])])])}}}),ss=ce(Ut,[["__scopeId","data-v-32b20140"]]);export{ss as default};
