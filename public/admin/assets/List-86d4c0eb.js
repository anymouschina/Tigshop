import{d as O,j as f,I as $,x as K,r as d,o as g,c as v,e as o,b as t,w as a,f as n,h as y,K as w,L as G,H as u,G as h}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{P as V}from"./PopFormElm-61cd9b7d.js";import{_ as j}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as E}from"./Pagination-8eb7b6b1.js";import{u as H}from"./config-9548fa9b.js";import{g as M,u as S,d as T,b as J}from"./friendLinks-cf065fff.js";import{_ as Q}from"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import{_ as L}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";import"./format-4e0206d3.js";import"./util-1ee03ed8.js";const R={class:"container"},W={class:"content_wrapper"},X={class:"lyecs-table-list-warp"},Y={class:"list-table-tool lyecs-search-warp"},Z={class:"advanced-search-warp list-table-tool-row"},ee={class:"simple-form-warp"},te={class:"simple-form-field"},oe={class:"form-group"},ae={class:"control-container"},se=o("span",{class:"iconfont icon-chakan1"},null,-1),le={class:"simple-form-field"},ie={class:"form-group"},ne={class:"control-container"},re={class:"simple-form-field"},de={class:"form-group"},ce={class:"control-container"},_e={key:0},pe={class:"table-container"},ue=["href"],me=o("a",{class:"btn-link"},"编辑",-1),fe={class:"empty-warp"},ge={key:0,class:"empty-bg"},ve={key:0,class:"pagination-con"},Pe=O({__name:"List",setup(he){const z=H(),C=f([]),_=f(!0),m=f(0),p=f([]),i=$({page:1,size:z.get("page_size"),sort_field:"",sort_order:"",keyword:""}),r=async()=>{_.value=!0;try{const l=await M({...i});C.value=l.filter_result,m.value=l.total}catch(l){w.error(l.message)}finally{_.value=!1}};K(()=>{r()});const x=()=>{r()},A=({prop:l,order:s})=>{i.sort_field=l,i.sort_order=s=="ascending"?"asc":s=="descending"?"desc":"",r()},U=async l=>{try{const s=await J(l,{ids:p.value});w.success(s.message),r()}catch(s){w.error(s.message)}},q=l=>{p.value=l.map(s=>s.link_id)};return(l,s)=>{const k=d("el-button"),F=d("el-input"),P=d("el-popconfirm"),B=d("el-form"),c=d("el-table-column"),D=d("el-divider"),I=d("el-table"),N=d("a-spin");return g(),v("div",R,[o("div",W,[o("div",X,[o("div",Y,[t(B,{model:i},{default:a(()=>[o("div",Z,[o("div",ee,[o("div",te,[o("div",oe,[o("div",ae,[t(F,{modelValue:i.keyword,"onUpdate:modelValue":s[0]||(s[0]=e=>i.keyword=e),name:"keyword",placeholder:"输入链接名称",onKeyup:G(x,["enter"])},{append:a(()=>[t(k,{onClick:x},{default:a(()=>[se]),_:1})]),_:1},8,["modelValue"])])])]),o("div",le,[o("div",ie,[o("div",ne,[t(n(L),{params:{act:"add"},isDrawer:"",path:"setting/friendLinks/Info",title:"添加友情链接",width:"600px",onOkCallback:r},{default:a(()=>[t(k,{type:"primary"},{default:a(()=>[u("添加友情链接")]),_:1})]),_:1})])])]),o("div",re,[o("div",de,[o("div",ce,[t(P,{title:"您确认要批量删除所选数据吗？",onConfirm:s[1]||(s[1]=e=>U("del"))},{reference:a(()=>[t(k,{disabled:p.value.length===0},{default:a(()=>[u("批量删除")]),_:1},8,["disabled"])]),_:1}),p.value.length>0?(g(),v("span",_e,[u(" 已选择："),o("b",null,h(p.value.length),1),u(" 项 ")])):y("",!0)])])])])])]),_:1},8,["model"])]),o("div",pe,[t(N,{spinning:_.value},{default:a(()=>[t(I,{data:C.value,loading:_.value,total:m.value,"row-key":"link_id",onSelectionChange:q,onSortChange:A},{empty:a(()=>[o("div",fe,[_.value?y("",!0):(g(),v("div",ge,"暂无数据"))])]),default:a(()=>[t(c,{type:"selection",width:"32"}),t(c,{label:"链接名称"},{default:a(({row:e})=>[t(n(V),{"org-value":e.link_title,"onUpdate:orgValue":b=>e.link_title=b,max:10,params:{id:e.link_id,field:"link_title"},requestApi:n(S),label:"链接名称",type:"input"},{default:a(()=>[o("div",null,h(e.link_title),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),t(c,{label:"链接地址",prop:"link_url"},{default:a(({row:e})=>[o("a",{href:e.link_url,target:"_blank"},h(e.link_url),9,ue)]),_:1}),t(c,{label:"链接LOGO"},{default:a(({row:e})=>[t(n(Q),{src:e.link_logo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),t(c,{label:"排序",prop:"sort_order",sortable:"custom"},{default:a(({row:e})=>[t(n(V),{"org-value":e.sort_order,"onUpdate:orgValue":b=>e.sort_order=b,params:{id:e.link_id,field:"sort_order"},requestApi:n(S),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"input"},{default:a(()=>[o("div",null,h(e.sort_order),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),t(c,{width:150,fixed:"right",label:"操作"},{default:a(({row:e})=>[t(n(L),{params:{act:"detail",id:e.link_id},isDrawer:"",path:"setting/friendLinks/Info",title:"编辑配送方式",width:"600px",onOkCallback:r},{default:a(()=>[me]),_:2},1032,["params"]),t(D,{direction:"vertical"}),t(n(j),{params:{id:e.link_id},requestApi:n(T),onAfterDelete:r},{default:a(()=>[u("删除 ")]),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),m.value>0?(g(),v("div",ve,[t(n(E),{page:i.page,"onUpdate:page":s[2]||(s[2]=e=>i.page=e),size:i.size,"onUpdate:size":s[3]||(s[3]=e=>i.size=e),total:m.value,onCallback:r},null,8,["page","size","total"])])):y("",!0)])])])])}}});export{Pe as default};
