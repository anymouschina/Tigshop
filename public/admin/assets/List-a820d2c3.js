import{u as L}from"./config-9548fa9b.js";import{A as C,d as N,j as g,I as B,x as G,r as i,o as v,c as h,e as l,b as e,w as n,f as c,h as y,K as S,H as b,G as w,p as P,i as q,_ as j}from"./index-7c2d2aef.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import{u as A,i as H,p as K}from"./format-4e0206d3.js";/* empty css                                                                    */import{P as X}from"./Pagination-8eb7b6b1.js";/* empty css                                                                  *//* empty css                                                                              */import"./region-e0d291a6.js";import{S as J}from"./SelectTimeInterval-7da287f8.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import{g as O}from"./util-1ee03ed8.js";import{f as D}from"./time-290942a2.js";import{r as Q}from"./export-59d12e73.js";import"./config-e2aa16d1.js";import"./region-05802f67.js";const R=r=>C({url:"panel/sales_statistics/sales_ranking",method:"get",params:r}),W=r=>C({url:"panel/sales_statistics/sales_ranking",method:"get",responseType:"arraybuffer",params:r}),Z=r=>(P("data-v-83090e2c"),r=r(),q(),r),$={class:"container"},tt={class:"content_wrapper"},et=Z(()=>l("div",{class:"notice-warp"},"提示：查询的时间间隔上限默认为一月，如果数据量过大导至查询时间过久或者超时报错，请尝试缩小查询的时间间隔！",-1)),at={class:"filtrate-menu"},ot={class:"table-container"},st={class:"flex"},nt={key:0,class:"span-pic"},lt=["href"],rt=["src"],it={class:"span-product-con"},ct={class:"span-product-name"},pt={class:"empty-warp"},dt={key:0,class:"empty-bg"},_t={key:0,class:"pagination-con"},mt=N({__name:"List",setup(r){const Y=L(),p=g(!1),k=g(),d=g(0),a=B({page:1,size:Y.pageSize,keyword:"",start_time:D(O(30,"sub"),"YYYY-MM-DD"),end_time:D(new Date,"YYYY-MM-DD")}),_=async()=>{p.value=!0;try{const o=await R(a);o.errcode===0&&(k.value=o.filter_result,d.value=o.total)}catch(o){S.error(o.message),console.error(o)}p.value=!1},z=()=>{_()},m=g(!1),V=async()=>{m.value=!0;try{const o=await W({...a,is_export:"1"});m.value=!1,Q(o,"销售排行导出")}catch(o){S.error(o.message)}finally{m.value=!1}},E=({prop:o,order:s})=>{console.log(o,s),a.sort_field=o,a.sort_order=s=="ascending"?"asc":s=="descending"?"desc":"",_()},I=()=>{_()};return G(()=>{_()}),(o,s)=>{const u=i("el-form-item"),M=i("el-input"),x=i("el-button"),T=i("el-form"),f=i("el-table-column"),U=i("el-table"),F=i("a-spin");return v(),h("div",$,[l("div",tt,[et,e(T,{model:a},{default:n(()=>[l("div",at,[e(u,{class:"mr-10"},{default:n(()=>[e(c(J),{type:"date","start-date":a.start_time,"onUpdate:startDate":s[0]||(s[0]=t=>a.start_time=t),"end-date":a.end_time,"onUpdate:endDate":s[1]||(s[1]=t=>a.end_time=t)},null,8,["start-date","end-date"])]),_:1}),e(u,{class:"mr-10"},{default:n(()=>[e(M,{modelValue:a.keyword,"onUpdate:modelValue":s[2]||(s[2]=t=>a.keyword=t),placeholder:"输入商品名称或者商品编号"},null,8,["modelValue"])]),_:1}),e(u,{class:"mr-10"},{default:n(()=>[e(x,{plain:"",onClick:z},{default:n(()=>[b("搜索")]),_:1})]),_:1}),e(u,{class:"mr-10"},{default:n(()=>[e(x,{plain:"",onClick:V,loading:m.value},{default:n(()=>[b("导出EXCEL")]),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"]),l("div",ot,[e(F,{spinning:p.value},{default:n(()=>[e(U,{data:k.value,total:d.value,"row-key":"product_id",onSortChange:E},{empty:n(()=>[l("div",pt,[p.value?y("",!0):(v(),h("div",dt,"暂无数据"))])]),default:n(()=>[e(f,{label:"商品名称",prop:"product_name"},{default:n(({row:t})=>[l("div",st,[t.pic_thumb?(v(),h("div",nt,[l("a",{href:c(A)({path:"product",id:t.product_id}),target:"_blank"},[l("img",{src:c(H)(t.pic_thumb),height:"50",width:"50"},null,8,rt)],8,lt)])):y("",!0),l("div",it,[l("div",ct,w(t.product_name),1)])])]),_:1}),e(f,{label:"商品编号",prop:"product_sn"}),e(f,{label:"总销量",prop:"total_sales_num",sortable:"custom"}),e(f,{label:"总销售额",prop:"total_sales_amount",sortable:"custom"},{default:n(({row:t})=>[b(w(c(K)(t.total_sales_amount)),1)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),d.value>0?(v(),h("div",_t,[e(c(X),{page:a.page,"onUpdate:page":s[3]||(s[3]=t=>a.page=t),size:a.size,"onUpdate:size":s[4]||(s[4]=t=>a.size=t),total:d.value,onCallback:I},null,8,["page","size","total"])])):y("",!0)])])])}}});const Tt=j(mt,[["__scopeId","data-v-83090e2c"]]);export{Tt as default};
