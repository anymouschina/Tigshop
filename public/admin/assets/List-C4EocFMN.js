import{d as ae,i as h,G as A,C as le,q as oe,c as m,e as s,b as o,w as a,f,j as v,g as _,I as L,r as d,o as i,F as I,a as N,E as y,L as se,D as w}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{_ as ne}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P}from"./Pagination-yOfjsBuR.js";import{u as ie}from"./config-DNllFJyR.js";import{g as re,d as de,b as pe}from"./translationContent-C0Nq8agy.js";import{g as ue}from"./product-CxWf3yyB.js";import{g as _e}from"./brand-BWQ0xslz.js";import{g as ce}from"./category-BQcUsnE8.js";import{g as me}from"./article-C6BidpBq.js";import{c as fe}from"./version-CpBOsX2d.js";import{_ as V}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const ve={class:"container"},ye={class:"content_wrapper"},ge={class:"lyecs-table-list-warp"},be={class:"list-table-tool lyecs-search-warp"},ke={class:"advanced-search-warp list-table-tool-row"},he={class:"simple-form-warp"},we={key:0,class:"simple-form-field"},Ce={key:0,class:"form-group"},xe={class:"control-container"},ze={class:"form-group"},Ve={class:"control-container"},De={key:1,class:"simple-form-field"},Oe={class:"form-group"},Se={class:"control-container"},Le={class:"simple-form-field"},Be={key:3},Ue={class:"table-container"},Te={class:"empty-warp"},qe={key:0,class:"empty-bg"},Ae={class:"empty-warp"},Ie={key:0,class:"empty-bg"},Ne={key:0,class:"pagination-con"},tt=ae({__name:"List",props:{promotion_type:{type:Number,default:1}},setup(Pe,{expose:F}){const M=h(localStorage.getItem("adminType")),U=ie(),n=h(2),$=h([{label:"商品",value:2},{label:"分类",value:3},{label:"品牌",value:4},{label:"文章",value:6}]),O=h(),g=h(!0),b=h(0),c=h([]),l=A({page:1,size:U.get("page_size"),sort_field:"",sort_order:"",translation_name:"",locale_code:"",data_type:0}),C=A({page:1,size:U.get("page_size"),sort_field:"",sort_order:""}),E=(r,e)=>{const u=e.find(B=>B.locale_id===r);return u?u.translation_value:""},K=(r,e)=>{l.data_type=r.index,l.data_type<2?p():(C.page=1,D())},D=async()=>{const e={2:ue,3:ce,4:_e,6:me}[n.value];g.value=!0;try{if(typeof e=="function"){const u=await e({...C});O.value=u.filter_result,console.log(u),b.value=u.total}else console.error("fn 不是一个有效的函数")}catch(u){L.error(u.message)}finally{g.value=!1}},T=h([]),p=async()=>{g.value=!0;try{const r=await re({...l});O.value=r.filter_result,T.value=r.locales,b.value=r.total}catch(r){L.error(r.message)}finally{g.value=!1}},x=le().currentRoute.value.query;oe(()=>{x.type&&x.type!==""?(l.data_type=2,x.type==="product"&&(n.value=2),x.type==="category"&&(n.value=3),x.type==="brand"&&(n.value=4),x.type==="article"&&(n.value=6),D()):p()});const S=()=>{l.data_type<2?p():D()},Q=({prop:r,order:e})=>{l.sort_field=r,l.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",p()},R=async r=>{try{const e=await pe(r,{ids:c.value});L.success(e.message),p()}catch(e){L.error(e.message)}},j=r=>{c.value=r.map(e=>e.id)};return F({loadFilter:p}),(r,e)=>{const u=d("el-tab-pane"),B=d("el-tabs"),G=d("el-option"),H=d("el-select"),z=d("el-button"),J=d("el-input"),W=d("el-popconfirm"),X=d("el-space"),Y=d("el-form"),k=d("el-table-column"),Z=d("el-divider"),q=d("el-table"),ee=d("a-spin");return i(),m("div",ve,[s("div",ye,[s("div",ge,[o(B,{modelValue:l.data_type,"onUpdate:modelValue":e[0]||(e[0]=t=>l.data_type=t),class:"demo-tabs",onTabClick:K},{default:a(()=>[o(u,{label:"页面文字",name:0}),o(u,{label:"接口文字",name:1}),o(u,{label:"数据维护",name:2})]),_:1},8,["modelValue"]),s("div",be,[o(Y,{model:l},{default:a(()=>[s("div",ke,[s("div",he,[l.data_type==2&&_(fe)()?(i(),m("div",we,[M.value=="admin"?(i(),m("div",Ce,[s("div",xe,[o(H,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=t=>n.value=t),placeholder:"请选择数据类型",style:{width:"240px"},onChange:S},{default:a(()=>[(i(!0),m(I,null,N($.value,t=>(i(),v(G,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])):f("",!0),s("div",ze,[s("div",Ve,[o(_(V),{params:{act:"add",data_type:n.value,total:b.value},isDrawer:"",showClose:!1,showOnOk:!1,path:"setting/multilingual/translationContent/Quick",title:"一键翻译",width:"700px",onOkCallback:D},{default:a(()=>[o(z,{type:"success"},{default:a(()=>e[8]||(e[8]=[y("一键翻译")])),_:1})]),_:1},8,["params"])])])])):l.data_type!=2?(i(),m("div",De,[s("div",Oe,[s("div",Se,[o(J,{modelValue:l.translation_name,"onUpdate:modelValue":e[2]||(e[2]=t=>l.translation_name=t),name:"translation_name",placeholder:"请输入原句",onKeyup:se(S,["enter"])},{append:a(()=>[o(z,{onClick:S},{default:a(()=>e[9]||(e[9]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])])):f("",!0),s("div",Le,[o(X,null,{default:a(()=>[l.data_type<2?(i(),v(_(V),{key:0,params:{act:"add",data_type:l.data_type},isDrawer:"",path:"setting/multilingual/translationContent/Info",title:"添加"+(l.data_type==0?"页面文字":"接口文字"),width:"700px",onOkCallback:p},{default:a(()=>[o(z,{type:"primary"},{default:a(()=>e[10]||(e[10]=[y("添加语句")])),_:1})]),_:1},8,["params","title"])):f("",!0),l.data_type<2?(i(),v(_(V),{key:1,params:{act:"add",data_type:l.data_type},isDrawer:"",path:"setting/multilingual/translationContent/Add",title:"添加"+(l.data_type==0?"页面文字":"接口文字"),width:"700px",onOkCallback:p},{default:a(()=>[o(z,{type:"primary"},{default:a(()=>e[11]||(e[11]=[y("批量添加语句")])),_:1})]),_:1},8,["params","title"])):f("",!0),l.data_type<2?(i(),v(_(V),{key:2,params:{act:"add",data_type:l.data_type,total:c.value.length>0?c.value.length:b.value,ids:c.value},isDrawer:"",showClose:!1,showOnOk:!1,path:"setting/multilingual/translationContent/Quick",title:c.value.length?"批量翻译":"一键翻译",width:"700px",onOkCallback:p},{default:a(()=>[o(z,{type:"success"},{default:a(()=>[y(w(c.value.length?"批量翻译":"一键翻译"),1)]),_:1})]),_:1},8,["params","title"])):f("",!0),o(W,{title:"您确认要批量删除所选数据吗？",onConfirm:e[3]||(e[3]=t=>R("del"))},{reference:a(()=>[l.data_type<2?(i(),v(z,{key:0,disabled:c.value.length===0},{default:a(()=>e[12]||(e[12]=[y("批量删除")])),_:1},8,["disabled"])):f("",!0)]),_:1}),c.value.length>0?(i(),m("span",Be,[e[13]||(e[13]=y(" 已选择：")),s("b",null,w(c.value.length),1),e[14]||(e[14]=y(" 项 "))])):f("",!0)]),_:1})])])])]),_:1},8,["model"])]),s("div",Ue,[o(ee,{spinning:g.value},{default:a(()=>[l.data_type<2?(i(),v(q,{key:0,data:O.value,"row-key":"id",onSelectionChange:j,total:b.value,onSortChange:Q,loading:g.value},{empty:a(()=>[s("div",Te,[g.value?f("",!0):(i(),m("div",qe,"暂无数据"))])]),default:a(()=>[o(k,{type:"selection",width:"32"}),o(k,{label:"原句",prop:"translation_name",sortable:"custom","show-overflow-tooltip":"",fixed:"left"},{default:a(({row:t})=>[y(w(t.translation_name||"--"),1)]),_:1}),(i(!0),m(I,null,N(T.value,(t,Fe)=>(i(),v(k,{label:t.language,prop:t.locale_code,"show-overflow-tooltip":""},{default:a(({row:te})=>[y(w(E(t.id,te.tdata)),1)]),_:2},1032,["label","prop"]))),256)),o(k,{label:"翻译类型",prop:"data_type",width:150},{default:a(({row:t})=>[s("div",null,w(t.data_type==0?"页面文字":"接口文字"),1)]),_:1}),o(k,{label:"操作",fixed:"right",width:150},{default:a(({row:t})=>[o(_(V),{isDrawer:"",onOkCallback:p,title:"编辑"+(t.data_type==0?"页面文字":"接口文字"),width:"800px",path:"setting/multilingual/translationContent/Info",params:{act:"detail",id:t.id,data_type:l.data_type}},{default:a(()=>e[15]||(e[15]=[s("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["title","params"]),o(Z,{direction:"vertical"}),o(_(ne),{onAfterDelete:p,requestApi:_(de),params:{id:t.id}},{default:a(()=>e[16]||(e[16]=[y("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])):(i(),v(q,{key:1,data:O.value,"row-key":"id",total:b.value,loading:g.value},{empty:a(()=>[s("div",Ae,[g.value?f("",!0):(i(),m("div",Ie,"暂无数据"))])]),default:a(()=>[o(k,{label:"原句",prop:"name"},{default:a(({row:t})=>[s("div",null,w(n.value==2?t.product_name:n.value==3?t.category_name:n.value==4?t.brand_name:t.article_title),1)]),_:1}),o(k,{label:"翻译类型",prop:"data_type",width:150},{default:a(({row:t})=>[s("div",null,w(n.value==2?"商品名称":n.value==3?"分类名称":"品牌名称"),1)]),_:1}),o(k,{label:"操作",fixed:"right",width:150},{default:a(({row:t})=>[o(_(V),{isDrawer:"",onOkCallback:S,title:"查看",width:"800px",path:"setting/multilingual/translationContent/BusinessDialog",params:{act:"detail",id:n.value==2?t.product_id:n.value==3?t.category_id:n.value==4?t.brand_id:t.article_id,data_type:n.value,translation_name:n.value==2?t.product_name:n.value==3?t.category_name:n.value==4?t.brand_name:t.article_title}},{default:a(()=>e[17]||(e[17]=[s("a",{class:"btn-link"},"翻译",-1)])),_:2},1032,["params"])]),_:1})]),_:1},8,["data","total","loading"]))]),_:1},8,["spinning"]),b.value>0?(i(),m("div",Ne,[l.data_type<2?(i(),v(_(P),{key:0,page:l.page,"onUpdate:page":e[4]||(e[4]=t=>l.page=t),size:l.size,"onUpdate:size":e[5]||(e[5]=t=>l.size=t),total:b.value,onCallback:p},null,8,["page","size","total"])):(i(),v(_(P),{key:1,page:C.page,"onUpdate:page":e[6]||(e[6]=t=>C.page=t),size:C.size,"onUpdate:size":e[7]||(e[7]=t=>C.size=t),total:b.value,onCallback:D},null,8,["page","size","total"]))])):f("",!0)])])])])}}});export{tt as default};
