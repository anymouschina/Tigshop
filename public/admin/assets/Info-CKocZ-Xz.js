import{d as T,i as c,C as R,s as q,q as P,r as i,c as U,o as f,e as w,j as V,f as G,b as t,w as l,a3 as h,g as L,E as j,a4 as E,I as v}from"./index-DrbzVNl6.js";import{a as F,u as M}from"./productGroup-BlnNtZy_.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import"./index-CeQDmMxd.js";import{S as O}from"./SelectProduct-BHvR_Ddk.js";/* empty css                                                                    *//* empty css                                                                              *//* empty css             */import"./time-Bh5UhrfW.js";import"./format-CRgx78oe.js";import"./product-DEi2MlvQ.js";import"./Pagination-wR9huHyl.js";import"./SelectSku--IXQGnUO.js";/* empty css                                                                  */import"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const z={class:"container"},A={class:"content_wrapper"},H={class:"lyecs-form-table"},ne=T({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(S,{expose:k,emit:N}){const p=N,s=S,u=c(!0),_=R().currentRoute.value.query,d=c(s.isDialog?s.act:String(_.act)),g=c(s.isDialog?s.id:Number(_.id)),C=d.value==="add"?"create":"update",b=q(),e=c({productIds:[]}),D=async()=>{try{const a=await F(d.value,{id:g.value});Object.assign(e.value,a)}catch(a){v.error(a.message),p("close")}finally{u.value=!1}};P(()=>{console.log(d.value),d.value==="detail"?D():u.value=!1});const y=async()=>{await b.value.validate();try{p("update:confirmLoading",!0);const a=await M(C,{id:g.value,...e.value});p("submitCallback",a),v.success("操作成功")}catch(a){v.error(a.message)}finally{p("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{y()}}),(a,o)=>{const m=i("TigInput"),n=i("el-form-item"),I=i("el-button"),x=i("el-form"),B=i("a-spin");return f(),U("div",z,[w("div",A,[w("div",H,[u.value?G("",!0):(f(),V(x,{key:0,ref_key:"formRef",ref:b,model:e.value,"label-width":"auto"},{default:l(()=>[t(n,{rules:[{required:!0,message:"分组名称不能为空!"}],label:"分组名称",prop:"productGroupName"},{default:l(()=>[t(m,{classType:"tig-form-input",modelValue:e.value.productGroupName,"onUpdate:modelValue":o[0]||(o[0]=r=>e.value.productGroupName=r)},null,8,["modelValue"])]),_:1}),t(n,{label:"分组别名",prop:"productGroupSn"},{default:l(()=>[t(m,{classType:"tig-form-input",modelValue:e.value.productGroupSn,"onUpdate:modelValue":o[1]||(o[1]=r=>e.value.productGroupSn=r)},null,8,["modelValue"])]),_:1}),t(n,{label:"分组描述",prop:"productGroupDescription"},{default:l(()=>[t(m,{classType:"tig-form-input",modelValue:e.value.productGroupDescription,"onUpdate:modelValue":o[2]||(o[2]=r=>e.value.productGroupDescription=r),row:2,type:"textarea"},null,8,["modelValue"])]),_:1}),t(n,{label:"分组商品",prop:"productIds"},{default:l(()=>[u.value?G("",!0):(f(),V(L(O),{key:0,ids:e.value.productIds,"onUpdate:ids":o[3]||(o[3]=r=>e.value.productIds=r)},null,8,["ids"]))]),_:1}),h(t(n,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(I,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:y},{default:l(()=>o[4]||(o[4]=[j("提交")])),_:1},512)]),_:1},512),[[E,!s.isDialog]])]),_:1},8,["model"])),t(B,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ne as default};
