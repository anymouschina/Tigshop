import{d as _e,I as N,j as w,E as ue,x as pe,a9 as me,r as g,o,c as i,e as t,b as a,w as r,f as _,h as d,K as z,aV as he,F as U,a as L,n as T,G as f,L as fe,k as m,H as c,p as ve,i as be,_ as ge}from"./index-7c2d2aef.js";/* empty css             *//* empty css                                                                    */import{S as q}from"./SortButton-6e849e8e.js";import{P as ye}from"./Pagination-8eb7b6b1.js";import{P as ke}from"./ProductCard-5b1dbc4c.js";import{u as we}from"./config-9548fa9b.js";import{g as xe,o as A}from"./order-5e1a3c9e.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import{M as Y}from"./index-6c62cf9b.js";import{p as K}from"./format-4e0206d3.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as Ce}from"./SelectShop.vue_vue_type_script_setup_true_lang-a1d04369.js";import"./region-e0d291a6.js";import{S as Ve}from"./SelectLogisticsCompany-9a4f016c.js";import{S as Oe}from"./SelectTimeInterval-7da287f8.js";import"./shopProductCategory-792e0c23.js";/* empty css                                               */import"./zh-cn-8c8b9709.js";import{T as R}from"./Tag-e65e7405.js";import{a as Se}from"./version-f7bce787.js";import{M as De}from"./MobileCard-6c6c2c27.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";import"./time-290942a2.js";import"./util-1ee03ed8.js";import"./shop-b8a8699a.js";import"./region-05802f67.js";import"./logisticsCompany-fd0ba0a2.js";const v=V=>(ve("data-v-a3cf1c7c"),V=V(),be(),V),ze={class:"container"},Ue={class:"content_wrapper"},Le={class:"lyecs-table-list-warp"},Be={class:"list-table-tool lyecs-search-warp"},Ie={class:"advanced-search-warp list-table-tool-row"},Ne={class:"simple-form-warp"},Re={class:"simple-form-field"},Fe={class:"form-group"},$e={class:"control-container"},Pe={class:"tabs flex"},Me=["onClick"],Ee={class:"advanced-search-warp list-table-tool-row"},Te={class:"simple-form-warp"},qe={class:"simple-form-field"},Ae={class:"form-group"},Ye={class:"control-container"},Ke=v(()=>t("span",{class:"iconfont icon-chakan1"},null,-1)),je={key:0,class:"simple-form-field"},Ge={class:"form-group"},He=v(()=>t("label",{class:"control-label"},[t("span",null,"选择店铺：")],-1)),Je={class:"control-container"},Qe={class:"simple-form-field"},We={class:"form-group"},Xe=v(()=>t("label",{class:"control-label"},[t("span",null,"支付状态：")],-1)),Ze={class:"control-container"},et={class:"simple-form-field"},tt={class:"form-group"},st=v(()=>t("label",{class:"control-label"},[t("span",null,"发货状态：")],-1)),lt={class:"control-container"},ot={class:"simple-form-field"},at={class:"form-group"},rt=v(()=>t("label",{class:"control-label"},[t("span",null," 详细地址：")],-1)),nt={class:"control-container"},dt={class:"simple-form-field"},it={class:"form-group"},ct=v(()=>t("label",{class:"control-label"},[t("span",null,"Email：")],-1)),_t={class:"control-container"},ut={class:"simple-form-field"},pt={class:"form-group"},mt=v(()=>t("label",{class:"control-label"},[t("span",null,"手机号：")],-1)),ht={class:"control-container"},ft={class:"simple-form-field"},vt={class:"form-group"},bt=v(()=>t("label",{class:"control-label"},[t("span",null,"配送物流：")],-1)),gt={class:"control-container"},yt={class:"simple-form-field"},kt={class:"form-group"},wt=v(()=>t("label",{class:"control-label"},[t("span",null,"下单时间：")],-1)),xt={class:"control-container"},Ct={class:"simple-form-field"},Vt={class:"list-table-tool-row"},Ot={class:"list-table-tool-col"},St={key:4},Dt={class:"table-container"},zt={class:"custom-table"},Ut=v(()=>t("th",null,"收货人信息",-1)),Lt=v(()=>t("th",null,"物流/支付信息",-1)),Bt=v(()=>t("th",null,"订单状态",-1)),It=v(()=>t("th",{class:"textR"},"操作",-1)),Nt={class:"custom-table"},Rt={class:"data-tr"},Ft={colspan:"5"},$t={class:"check-box"},Pt={class:"check-box"},Mt={class:"textR"},Et={style:{gap:"8px",display:"flex","justify-content":"right"}},Tt={class:"displayRow"},qt={class:"displayColumn textR whiteSN widthAuto"},At=["rowspan"],Yt={class:"displayColumn textR fz14"},Kt={class:"gray fz12"},jt={key:0,class:"fz12"},Gt=["href"],Ht=v(()=>t("div",null,[t("p",null,[c("佣金："),t("span",{class:"gray"},"未结算")])],-1)),Jt=["rowspan"],Qt={class:"displayColumn fz12 textL"},Wt={class:"gray"},Xt={class:"gray"},Zt={class:"black"},es={class:"ml5"},ts=["rowspan"],ss={class:"displayColumn fz12 textL"},ls={key:0},os={class:"gray"},as=["rowspan"],rs=["rowspan"],ns={class:"buttonStyle"},ds={key:0},is={colspan:"6"},cs=v(()=>t("span",{class:"orange"},"商家备注：",-1)),_s={key:0,class:"empty-warp"},us={key:0,class:"empty-bg"},ps={key:0,class:"pagination-con"},ms=_e({__name:"List",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},setup(V){const j=we(),G=N([{value:-1,label:"全部"},{value:0,label:"待支付"},{value:1,label:"待发货"},{value:2,label:"已发货"},{value:3,label:"已取消"},{value:4,label:"无效"},{value:5,label:"已完成"},{value:-2,label:"已删除"}]),H=N([{value:0,label:"待发货"},{value:1,label:"已发货"},{value:2,label:"已收货"},{value:3,label:"配送中"},{value:4,label:"配送失败"}]),J=N([{value:0,label:"未付款"},{value:1,label:"支付中"},{value:2,label:"已付款"},{value:3,label:"退款中"},{value:4,label:"已退款"}]),Q=n=>{l.order_status=n,h()},x=w([]),C=w(!0),B=w(0),p=w([]),F=w(!1);w(!1);const l=N({page:1,size:j.get("page_size"),sort_field:"order_id",sort_order:"desc",keyword:"",order_status:-1,address:"",email:"",mobile:"",add_time:[],add_end_time:"",add_start_time:""}),h=async()=>{C.value=!0;try{const n=await xe({...l}),s=n.filter_result.map(u=>({...u,checkBox:!1}));x.value=s,B.value=n.total}catch(n){z.error(n.message)}finally{C.value=!1}},I=V,W=he(),O=ue().currentRoute.value.query,X=w(I.isDialog?I.act:String(O.act)),Z=w(I.isDialog?I.id:Number(O.id));pe(()=>{W.meta.queryParam==="is_exchange_order"&&(l.is_exchange_order=1),X.value&&(l.user_id=Z.value),O&&O.status&&(l.order_status=Number(O.status)),h()});const S=()=>{h()},ee=n=>{window.open(n,"_blank")},te=n=>{Y.confirm({title:"确认删除订单吗？",content:"被删除的订单可以通过筛选查找并恢复",onOk:async()=>{try{const s=await A("del_order",{id:n});z.success(s.message),h()}catch(s){z.error(s.message)}finally{C.value=!1}}})},se=n=>{Y.confirm({title:"确认订单已收货吗？",onOk:async()=>{try{const s=await A("confirm_receipt",{id:n});z.success(s.message),h()}catch(s){z.error(s.message)}finally{C.value=!1}}})},le=me(()=>{var n,s;return F.value=p.value.length>0&&((n=p.value)==null?void 0:n.length)===((s=x.value)==null?void 0:s.length),p.value.length>0&&p.value.length<x.value.length}),oe=n=>{var s,u;n?(p.value.length=0,(s=x.value)==null||s.forEach(y=>{y.checkBox=!0,p.value.push(y.order_id)})):(u=x.value)==null||u.forEach(y=>{y.checkBox=!1,p.value.length=0})},ae=n=>{if(n.checkBox)p.value.indexOf(n.order_id)===-1&&p.value.push(n.order_id);else{let s=p.value.indexOf(n.order_id);s!==-1&&p.value.splice(s,1)}};return(n,s)=>{const u=g("el-button"),y=g("el-input"),P=g("el-option"),M=g("el-select"),re=g("el-space"),ne=g("el-form"),E=g("el-checkbox"),de=g("el-divider"),$=g("el-tooltip"),ie=g("a-spin");return o(),i("div",ze,[t("div",Ue,[t("div",Le,[t("div",Be,[a(ne,{model:l},{default:r(()=>[t("div",Ie,[t("div",Ne,[t("div",Re,[t("div",Fe,[t("div",$e,[t("div",Pe,[(o(!0),i(U,null,L(G,e=>(o(),i("div",{class:T(["item",l.order_status==e.value?"active":""]),onClick:b=>Q(e.value)},f(e.label),11,Me))),256))])])])])])]),t("div",Ee,[t("div",Te,[t("div",qe,[t("div",Ae,[t("div",Ye,[a(y,{modelValue:l.keyword,"onUpdate:modelValue":s[0]||(s[0]=e=>l.keyword=e),style:{width:"280px"},name:"keyword",placeholder:"订单号/收货人姓名/订单ID",onKeyup:fe(S,["enter"])},{append:r(()=>[a(u,{onClick:S},{default:r(()=>[Ke]),_:1})]),_:1},8,["modelValue"])])])]),_(Se)()?(o(),i("div",je,[t("div",Ge,[He,t("div",Je,[a(_(Ce),{modelValue:l.shop_id,"onUpdate:modelValue":s[1]||(s[1]=e=>l.shop_id=e)},null,8,["modelValue"])])])])):d("",!0),t("div",Qe,[t("div",We,[Xe,t("div",Ze,[a(M,{modelValue:l.pay_status,"onUpdate:modelValue":s[2]||(s[2]=e=>l.pay_status=e),clearable:""},{default:r(()=>[(o(!0),i(U,null,L(J,e=>(o(),m(P,{label:e.label,value:e.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])]),t("div",et,[t("div",tt,[st,t("div",lt,[a(M,{modelValue:l.shipping_status,"onUpdate:modelValue":s[3]||(s[3]=e=>l.shipping_status=e),clearable:""},{default:r(()=>[(o(!0),i(U,null,L(H,e=>(o(),m(P,{label:e.label,value:e.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])]),t("div",ot,[t("div",at,[rt,t("div",nt,[a(y,{modelValue:l.address,"onUpdate:modelValue":s[4]||(s[4]=e=>l.address=e)},null,8,["modelValue"])])])]),t("div",dt,[t("div",it,[ct,t("div",_t,[a(y,{modelValue:l.email,"onUpdate:modelValue":s[5]||(s[5]=e=>l.email=e)},null,8,["modelValue"])])])]),t("div",ut,[t("div",pt,[mt,t("div",ht,[a(y,{modelValue:l.mobile,"onUpdate:modelValue":s[6]||(s[6]=e=>l.mobile=e)},null,8,["modelValue"])])])]),t("div",ft,[t("div",vt,[bt,t("div",gt,[a(_(Ve),{id:l.logistics_id,"onUpdate:id":s[7]||(s[7]=e=>l.logistics_id=e)},null,8,["id"])])])]),t("div",yt,[t("div",kt,[wt,t("div",xt,[a(_(Oe),{"end-date":l.add_end_time,"onUpdate:endDate":s[8]||(s[8]=e=>l.add_end_time=e),"start-date":l.add_start_time,"onUpdate:startDate":s[9]||(s[9]=e=>l.add_start_time=e),clearable:!1,type:"date","value-format":"YYYY-MM-DD"},null,8,["end-date","start-date"])])])]),t("div",Ct,[a(u,{type:"primary",onClick:S},{default:r(()=>[c("搜索")]),_:1})])])]),t("div",Vt,[t("div",Ot,[a(re,null,{default:r(()=>[p.value.length>0?(o(),m(_(k),{key:0,params:{act:"several_detail",ids:p.value},title:"订单批量发货",isDrawer:"",path:"order/order/src/BatchShip",width:"880px",onOkCallback:h},{default:r(()=>[a(u,null,{default:r(()=>[c(" 批量发货 ")]),_:1})]),_:1},8,["params"])):(o(),m(u,{key:1,disabled:!0},{default:r(()=>[c(" 批量发货 ")]),_:1})),p.value.length>0?(o(),m(u,{key:2,onClick:s[10]||(s[10]=e=>ee(`/admin/print/orderPrint?ids=${p.value}`))},{default:r(()=>[c(" 批量打印 ")]),_:1})):(o(),m(u,{key:3,disabled:!0},{default:r(()=>[c(" 批量打印 ")]),_:1})),p.value.length>0?(o(),i("span",St,[c(" 已选择："),t("b",null,f(p.value.length),1),c(" 项 ")])):d("",!0)]),_:1})])])]),_:1},8,["model"])]),t("div",Dt,[a(ie,{spinning:C.value},{default:r(()=>[t("table",zt,[t("thead",null,[t("tr",null,[t("th",null,[a(E,{modelValue:F.value,"onUpdate:modelValue":s[11]||(s[11]=e=>F.value=e),indeterminate:le.value,class:"check-box mr10",onChange:oe},null,8,["modelValue","indeterminate"]),a(q,{sortField:l.sort_field,"onUpdate:sortField":s[12]||(s[12]=e=>l.sort_field=e),sortOrder:l.sort_order,"onUpdate:sortOrder":s[13]||(s[13]=e=>l.sort_order=e),sortName:"order_id",text:"订单信息(下单时间排序)",onLoadData:s[14]||(s[14]=e=>S())},null,8,["sortField","sortOrder"])]),t("th",null,[a(q,{sortField:l.sort_field,"onUpdate:sortField":s[15]||(s[15]=e=>l.sort_field=e),sortOrder:l.sort_order,"onUpdate:sortOrder":s[16]||(s[16]=e=>l.sort_order=e),sortName:"total_amount",text:"订单金额",onLoadData:s[17]||(s[17]=e=>S())},null,8,["sortField","sortOrder"])]),Ut,Lt,Bt,It])])]),(o(!0),i(U,null,L(x.value,e=>(o(),i("table",Nt,[t("thead",null,[t("tr",Rt,[t("th",Ft,[a(E,{modelValue:e.checkBox,"onUpdate:modelValue":b=>e.checkBox=b,class:"check-box mr10",onChange:b=>ae(e)},null,8,["modelValue","onUpdate:modelValue","onChange"]),t("span",$t,"订单编号："+f(e.order_sn),1),a(de,{direction:"vertical"}),t("span",Pt,"下单时间："+f(e.add_time),1),e.parent_order_id>0?(o(),m(_(k),{key:0,params:{act:"parent_detail",id:e.order_id,isParent:!0},showClose:!1,showOnOk:!1,title:"订单详情 "+e.order_sn,isDrawer:"",style:{display:"inline-block"},path:"order/order/Info",width:"880px",onCallback:h},{default:r(()=>[e.parent_order_id>0?(o(),m($,{key:0,content:"该订单已拆分，点击可查看父订单",effect:"light",placement:"top"},{default:r(()=>[a(_(R),{text:"子订单"})]),_:1})):d("",!0)]),_:2},1032,["params","title"])):d("",!0),e.shop_id>0?(o(),m($,{key:1,content:"订单来自店铺："+e.store_title,effect:"light",placement:"top"},{default:r(()=>[a(_(R),{transparent:!1,text:"店铺"})]),_:2},1032,["content"])):d("",!0),e.order_source?(o(),m($,{key:2,content:"订单来自"+e.order_source+"下单",effect:"light",placement:"top"},{default:r(()=>[a(_(R),{text:e.order_source,transparent:!0,style:{"text-transform":"uppercase"}},null,8,["text"])]),_:2},1032,["content"])):d("",!0),l.is_exchange_order?(o(),m(_(R),{key:3,transparent:!0,color:"red",text:"积分兑换"})):d("",!0)]),t("th",Mt,[t("div",Et,[a(_(k),{params:{act:"detail",id:e.order_id},showClose:!1,showOnOk:!1,title:"订单详情 "+e.order_sn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:h},{default:r(()=>[a(u,{bg:"",class:"buttonColor mr10",size:"small",text:"",type:"primary"},{default:r(()=>[c(" 查看详情")]),_:1})]),_:2},1032,["params","title"]),a(_(k),{params:{act:"detail",id:e.order_id,valueName:"admin_note"},isDrawer:"",path:"order/order/src/EditRemark",title:"编辑备注",width:"600px",onOkCallback:h},{default:r(()=>[a(u,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>[c(" 备注 ")]),_:1})]),_:2},1032,["params"])])])])]),t("tbody",null,[(o(!0),i(U,null,L(e.items,(b,D)=>(o(),i("tr",null,[t("td",null,[t("div",Tt,[a(_(ke),{pic_thumb:b.pic_thumb,product_id:b.product_id,product_name:b.product_name,product_type:b.product_type,url:b.url},null,8,["pic_thumb","product_id","product_name","product_type","url"]),t("div",qt,[t("div",null,f(_(K)(b.price)),1),t("div",null,"× "+f(b.quantity),1)])])]),D==0?(o(),i("td",{key:0,rowspan:e.items.length},[t("div",Yt,[t("div",null,f(_(K)(e.total_amount)),1),t("div",Kt,"(含运费："+f(e.shipping_fee)+")",1),e.shop_id>0?(o(),i("div",jt,[t("div",null,[t("p",null,[c(" 佣金："),t("a",{href:"store_commission_log.html?act=list&shop_id="+e.shop_id,class:"green",target:"_blank"},"已结算",8,Gt)])]),Ht])):d("",!0),t("div",null,[e.status===6||e.status===7?(o(),m(_(k),{key:0,params:{act:"detail",id:e.aftersale_id},isDrawer:"",path:"order/aftersales/Info",title:"售后详情 "+e.aftersales_sn,width:"800px",onOkCallback:h,showClose:!1,showOnOk:!1},{default:r(()=>[a(u,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>[c(" 售后详情 ")]),_:1})]),_:2},1032,["params","title"])):d("",!0)])])],8,At)):d("",!0),D==0?(o(),i("td",{key:1,rowspan:e.items.length},[t("div",Qt,[t("div",Wt,[c(" 会员名： "),a(_(k),{params:{act:"detail",id:e.user_id},isDrawer:"",path:"user/user/Detail",title:"用户信息",width:"800px",onOkCallback:h,showOnOk:!1},{default:r(()=>[t("a",null,f(e.user.nickname),1)]),_:2},1032,["params"])]),t("div",Xt,[c(" 收货人： "),t("span",Zt,[c(f(e.consignee)+" ",1),t("span",es,[a(De,{mobile:e.mobile},null,8,["mobile"])])])])])],8,Jt)):d("",!0),D==0?(o(),i("td",{key:2,rowspan:e.items.length},[t("div",ss,[t("div",null,[t("span",null,f(e.pay_type_id===1?"在线支付":e.pay_type_id===2?"货到付款":"线下支付"),1)]),e.logistics_name?(o(),i("div",ls,[c(f(e.shipping_type_name)+" ",1),t("span",os,f(""+e.logistics_name),1)])):d("",!0)])],8,ts)):d("",!0),D==0?(o(),i("td",{key:3,rowspan:e.items.length},[t("span",{class:T({orange:e.order_status===0,black:e.order_status===1||e.order_status===2||e.order_status===4,gray:e.order_status===3,green:e.order_status===5})},f(e.order_status_name),3)],8,as)):d("",!0),D==0?(o(),i("td",{key:4,rowspan:e.items.length},[t("div",ns,[e.available_actions.cancel_order?(o(),m(_(k),{key:0,params:{act:"cancel_order",id:e.order_id},isDrawer:"",path:"order/order/src/Operation",title:"取消订单",width:"600px",onOkCallback:h},{default:r(()=>[a(u,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>[c(" 取消订单 ")]),_:1})]),_:2},1032,["params"])):d("",!0),e.available_actions.del_order?(o(),m(u,{key:1,bg:"",size:"small",text:"",type:"primary",onClick:ce=>te(e.order_id)},{default:r(()=>[c(" 删除订单 ")]),_:2},1032,["onClick"])):d("",!0),e.available_actions.deliver?(o(),m(_(k),{key:2,params:{act:"detail",id:e.order_id},title:"订单发货 "+e.order_sn,isDrawer:"",path:"order/order/src/ToShip",width:"900px",onOkCallback:h},{default:r(()=>[a(u,{bg:"",size:"small",text:"",type:"danger"},{default:r(()=>[c(" 去发货 ")]),_:1})]),_:2},1032,["params","title"])):d("",!0),e.available_actions.confirm_receipt?(o(),m(u,{key:3,bg:"",size:"small",text:"",type:"danger",onClick:ce=>se(e.order_id)},{default:r(()=>[c(" 确认收货 ")]),_:2},1032,["onClick"])):d("",!0)])],8,rs)):d("",!0)]))),256)),e.admin_note?(o(),i("tr",ds,[t("td",is,[cs,c(f(e.admin_note)+" ",1),a(_(k),{params:{act:"detail",id:e.order_id,valueName:"admin_note"},isDrawer:"",path:"order/order/src/EditRemark",title:"编辑备注",width:"600px",onOkCallback:h},{default:r(()=>[a(u,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>[c(" 修改 ")]),_:1})]),_:2},1032,["params"])])])):d("",!0)])]))),256)),B.value==0?(o(),i("div",_s,[C.value?d("",!0):(o(),i("div",us,"暂无数据"))])):d("",!0)]),_:1},8,["spinning"])]),B.value>0?(o(),i("div",ps,[a(_(ye),{page:l.page,"onUpdate:page":s[18]||(s[18]=e=>l.page=e),size:l.size,"onUpdate:size":s[19]||(s[19]=e=>l.size=e),total:B.value,onCallback:h},null,8,["page","size","total"])])):d("",!0)])])])}}});const js=ge(ms,[["__scopeId","data-v-a3cf1c7c"]]);export{js as default};
