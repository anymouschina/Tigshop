import{d as N,j as v,I as B,x as I,r,o as y,c as h,b as e,w as o,e as n,f as d,H as p,h as b,G as c,K as k,_ as P}from"./index-7c2d2aef.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import{u as T,i as j,p as C}from"./format-4e0206d3.js";import{u as H}from"./config-9548fa9b.js";/* empty css                                                                    */import{P as K}from"./Pagination-8eb7b6b1.js";/* empty css                                                                  *//* empty css                                                                              */import"./region-e0d291a6.js";import{S as L}from"./SelectTimeInterval-7da287f8.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import{g as X}from"./util-1ee03ed8.js";import{f as w}from"./time-290942a2.js";import{a as A,e as J}from"./statisticsSale-8d037c03.js";import{r as O}from"./export-59d12e73.js";import"./config-e2aa16d1.js";import"./region-05802f67.js";const Q={class:"DetailsGoodsSold"},R={class:"filtrate-menu"},W={class:"table-container"},Z={class:"flex"},$={key:0,class:"span-pic"},tt=["href"],et=["src"],at={class:"span-product-con"},ot={class:"span-product-name"},st={class:"empty-warp"},lt={key:0,class:"empty-bg"},nt={key:0,class:"pagination-con"},rt=N({__name:"DetailsGoodsSold",setup(it){const Y=H(),_=v(!1),D=v(),m=v(0),a=B({page:1,size:Y.pageSize,keyword:"",start_time:w(X(30,"sub"),"YYYY-MM-DD"),end_time:w(new Date,"YYYY-MM-DD")}),u=async()=>{_.value=!0;try{const s=await A(a);s.errcode===0&&(D.value=s.filter_result,m.value=s.total)}catch(s){k.error(s.message),console.error(s)}finally{_.value=!1}},z=()=>{u()},f=v(!1),V=async()=>{f.value=!0;try{const s=await J({...a,is_export:"1"});f.value=!1,O(s,"销售明细导出")}catch(s){k.error(s.message)}finally{f.value=!1}};I(()=>{u()});const E=({prop:s,order:l})=>{a.sort_field=s,a.sort_order=l=="ascending"?"asc":l=="descending"?"desc":"",u()},G=()=>{u()};return(s,l)=>{const g=r("el-form-item"),M=r("el-input"),S=r("el-button"),U=r("el-form"),i=r("el-table-column"),q=r("el-table"),F=r("a-spin");return y(),h("div",Q,[e(U,{model:a},{default:o(()=>[n("div",R,[e(g,{class:"mr-10"},{default:o(()=>[e(d(L),{type:"date","start-date":a.start_time,"onUpdate:startDate":l[0]||(l[0]=t=>a.start_time=t),"end-date":a.end_time,"onUpdate:endDate":l[1]||(l[1]=t=>a.end_time=t)},null,8,["start-date","end-date"])]),_:1}),e(g,{class:"mr-10"},{default:o(()=>[e(M,{modelValue:a.keyword,"onUpdate:modelValue":l[2]||(l[2]=t=>a.keyword=t),placeholder:"输入商品名称或商品编号"},null,8,["modelValue"])]),_:1}),e(g,{class:"mr-10"},{default:o(()=>[e(S,{plain:"",onClick:z},{default:o(()=>[p("搜索")]),_:1})]),_:1}),e(g,{class:"mr-10"},{default:o(()=>[e(S,{plain:"",onClick:V,loading:f.value},{default:o(()=>[p("导出EXCEL")]),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"]),n("div",W,[e(F,{spinning:_.value},{default:o(()=>[e(q,{data:D.value,total:m.value,onSortChange:E},{empty:o(()=>[n("div",st,[_.value?b("",!0):(y(),h("div",lt,"暂无数据"))])]),default:o(()=>[e(i,{label:"商品名称",prop:"product_id","min-width":320},{default:o(({row:t})=>[n("div",Z,[t.pic_thumb?(y(),h("div",$,[n("a",{href:d(T)({path:"product",id:t.product_id}),target:"_blank"},[n("img",{src:d(j)(t.pic_thumb),height:"50",width:"50"},null,8,et)],8,tt)])):b("",!0),n("div",at,[n("div",ot,c(t.product_name),1)])])]),_:1}),e(i,{prop:"product_sn",label:"商品编号"}),e(i,{porp:"quantity",label:"购买数量"},{default:o(({row:t})=>[p(c(t.quantity),1)]),_:1}),e(i,{label:"单价"},{default:o(({row:t})=>[p(c(d(C)(t.price)),1)]),_:1}),e(i,{label:"小计"},{default:o(({row:t})=>[p(c(d(C)(t.price*t.quantity)),1)]),_:1}),e(i,{prop:"add_time",width:"200",sortable:"custom",label:"下单时间"},{default:o(({row:t})=>{var x;return[p(c((x=t.orders)==null?void 0:x.add_time),1)]}),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),m.value>0?(y(),h("div",nt,[e(d(K),{page:a.page,"onUpdate:page":l[3]||(l[3]=t=>a.page=t),size:a.size,"onUpdate:size":l[4]||(l[4]=t=>a.size=t),total:m.value,onCallback:G},null,8,["page","size","total"])])):b("",!0)])])}}});const Vt=P(rt,[["__scopeId","data-v-27115cc5"]]);export{Vt as default};
