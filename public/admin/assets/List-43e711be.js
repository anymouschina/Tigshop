/* empty css             */import"./index-6c62cf9b.js";import{d as H,j as h,I as K,x as M,r as p,o as _,c as u,e as t,b as s,w as o,f as b,h as m,K as P,F as O,a as q,k as A,H as r,G as i,p as J,i as Q,_ as R}from"./index-7c2d2aef.js";/* empty css                                                                    */import{P as W}from"./Pagination-8eb7b6b1.js";import{u as X,i as Y,p as Z}from"./format-4e0206d3.js";import{u as ee}from"./config-9548fa9b.js";import{g as te,a as se,b as ae}from"./product-1d22e307.js";import{_ as oe}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";const f=g=>(J("data-v-7cad7a99"),g=g(),Q(),g),le={class:"container"},ne={class:"content_wrapper"},ce={class:"lyecs-table-list-warp"},ie={class:"list-table-tool lyecs-search-warp"},de={class:"advanced-search-warp list-table-tool-row"},_e={class:"simple-form-warp"},re={class:"simple-form-field"},pe={class:"form-group"},ue=f(()=>t("label",{class:"control-label"},[t("span",null,"商品名称：")],-1)),me={class:"control-container"},fe={class:"simple-form-field"},he={class:"form-group"},ve=f(()=>t("label",{class:"control-label"},[t("span",null,"商品状态：")],-1)),be={class:"control-container"},ge={class:"simple-form-field"},ye={class:"form-group"},ke=f(()=>t("label",{class:"control-label"},[t("span",null,"推广类型：")],-1)),Se={class:"control-container"},Ce={class:"simple-form-field"},Pe={class:"table-container"},Ve={class:"flex"},xe={key:0,class:"span-pic"},we=["href"],ze=["src"],Ie={class:"span-product-con"},Fe={class:"span-product-name"},Be={key:0,class:"span-product-brand"},Le=f(()=>t("span",{class:"span-tit"},"商品：",-1)),Ue={class:"span-con"},Ne={key:1,class:"span-product-brand"},je=f(()=>t("span",{class:"span-tit"},"店铺：",-1)),De={class:"span-con green"},Te={key:2,class:"span-product-brand"},$e=f(()=>t("span",{class:"span-tit"},"供应商：",-1)),Ee={class:"span-con green"},Ge={key:3},He=f(()=>t("span",{class:"span-con green"},"【虚拟商品】",-1)),Ke=[He],Me=f(()=>t("a",{class:"btn-link"},"设置佣金",-1)),Oe={class:"empty-warp"},qe={key:0,class:"empty-bg"},Ae={key:0,class:"pagination-con"},Je={key:0,class:"selected-action-warp"},Qe={class:"selected-action"},Re=H({__name:"List",setup(g){const I=ee(),V=h([]),y=h(!0),k=h(0);h(0);const S=h([]),n=K({page:1,size:I.pageSize,sort_field:"",sort_order:"",product_name:"",status:"",salesman_product_type:-1});h(localStorage.getItem("adminType"));const v=async()=>{y.value=!0;try{const l=await te({...n});V.value=l.filter_result,k.value=l.total}catch(l){P.error(l.message)}finally{y.value=!1}},x=h(),F=async()=>{try{const l=await se();x.value=l.item}catch(l){P.error(l.message)}};M(()=>{v(),F()});const B=()=>{v()},L=({prop:l,order:a})=>{n.sort_field=l,n.sort_order=a=="ascending"?"asc":a=="descending"?"desc":"",v()},U=async l=>{try{const a=await ae(l,{ids:S.value});P.success(a.message),v()}catch(a){P.error(a.message)}},N=l=>{S.value=l.map(a=>a.product_id)};return(l,a)=>{const j=p("el-input"),C=p("el-option"),w=p("el-select"),D=p("el-button"),T=p("el-form"),d=p("el-table-column"),z=p("el-space"),$=p("el-table"),E=p("a-spin"),G=p("el-popconfirm");return _(),u("div",le,[t("div",ne,[t("div",ce,[t("div",ie,[s(T,{model:n,name:"form"},{default:o(()=>[t("div",de,[t("div",_e,[t("div",re,[t("div",pe,[ue,t("div",me,[s(j,{modelValue:n.product_name,"onUpdate:modelValue":a[0]||(a[0]=e=>n.product_name=e),name:"product_name",placeholder:"输入商品名称/货号"},null,8,["modelValue"])])])]),t("div",fe,[t("div",he,[ve,t("div",be,[s(w,{modelValue:n.status,"onUpdate:modelValue":a[1]||(a[1]=e=>n.status=e),clearable:""},{default:o(()=>[s(C,{label:"上架",value:1}),s(C,{label:"下架",value:0})]),_:1},8,["modelValue"])])])]),t("div",ge,[t("div",ye,[ke,t("div",Se,[s(w,{modelValue:n.salesman_product_type,"onUpdate:modelValue":a[2]||(a[2]=e=>n.salesman_product_type=e),clearable:""},{default:o(()=>[s(C,{label:"全部",value:-1}),(_(!0),u(O,null,q(x.value,(e,c)=>(_(),A(C,{label:e,value:c},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])]),t("div",Ce,[s(D,{type:"primary",onClick:B},{default:o(()=>[r("搜索")]),_:1})])])])]),_:1},8,["model"])]),t("div",Pe,[s(E,{spinning:y.value},{default:o(()=>[s($,{data:V.value,total:k.value,"row-key":"product_id",onSelectionChange:N,onSortChange:L},{empty:o(()=>[t("div",Oe,[y.value?m("",!0):(_(),u("div",qe,"暂无数据"))])]),default:o(()=>[s(d,{type:"selection",width:"32"}),s(d,{label:"商品",prop:"product_id","min-width":150},{default:o(({row:e})=>[t("div",Ve,[e.pic_thumb?(_(),u("div",xe,[t("a",{href:b(X)({path:"product",sn:e.product_sn}),target:"_blank"},[t("img",{src:b(Y)(e.pic_thumb),height:"50",width:"50"},null,8,ze)],8,we)])):m("",!0),t("div",Ie,[t("div",Fe,[t("div",null,i(e.product_name),1)]),e.brand_name?(_(),u("p",Be,[Le,t("span",Ue,i(e.brand_name),1)])):m("",!0),e.store_title?(_(),u("p",Ne,[je,t("span",De,i(e.store_title),1)])):m("",!0),e.suppliers_name?(_(),u("p",Te,[$e,t("span",Ee,i(e.suppliers_name),1)])):m("",!0),e.type===2?(_(),u("p",Ge,Ke)):m("",!0)])])]),_:1}),s(d,{label:"金额(元)"},{default:o(({row:e})=>[r(i(b(Z)(e.product_price)),1)]),_:1}),s(d,{label:"库存"},{default:o(({row:e})=>[r(i(e.product_stock),1)]),_:1}),s(d,{label:"是否参与推广"},{default:o(({row:e})=>[r(i(e.salesmanProduct&&e.salesmanProduct.is_join==1?"参与":"不参与"),1)]),_:1}),s(d,{label:"佣金"},{default:o(({row:e})=>[r(" 默认比例 ")]),_:1}),s(d,{label:"商品佣金"},{default:o(({row:e})=>{var c;return[r(i(((c=e.salesmanProduct)==null?void 0:c.product_commission.product_commission)||"--"),1)]}),_:1}),s(d,{label:"下级分销员卖货提成"},{default:o(({row:e})=>{var c;return[r(i(((c=e.salesmanProduct)==null?void 0:c.product_commission.sub_commission)||"--"),1)]}),_:1}),s(d,{label:"商品状态"},{default:o(({row:e})=>[r(i(e.product_status===1?"上架":"下架"),1)]),_:1}),s(d,{label:"操作时间"},{default:o(({row:e})=>{var c;return[r(i((c=e.salesmanProduct)==null?void 0:c.update_time),1)]}),_:1}),s(d,{width:120,fixed:"right",label:"操作"},{default:o(({row:e})=>[s(z,{size:0},{default:o(()=>{var c;return[s(b(oe),{maskClose:!1,params:{act:(c=e.salesmanProduct)!=null&&c.salesman_product_id?"detail":"add",id:e.product_id,salesmanProduct:e.salesmanProduct},isDrawer:"",path:"salesman/product/Info",title:"设置商品佣金",width:"800px",onOkCallback:v},{default:o(()=>[Me]),_:2},1032,["params"])]}),_:2},1024)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),k.value>0?(_(),u("div",Ae,[s(b(W),{page:n.page,"onUpdate:page":a[3]||(a[3]=e=>n.page=e),size:n.size,"onUpdate:size":a[4]||(a[4]=e=>n.size=e),total:k.value,onCallback:v},null,8,["page","size","total"])])):m("",!0)]),S.value.length>0?(_(),u("div",Je,[t("div",Qe,[s(z,null,{default:o(()=>[t("span",null,[r("已选择："),t("b",null,i(S.value.length),1),r(" 项")]),s(G,{title:"您确认要批量删除所选数据吗？",onConfirm:a[5]||(a[5]=e=>U("del"))},{reference:o(()=>[]),_:1})]),_:1})])])):m("",!0)])])])}}});const ct=R(Re,[["__scopeId","data-v-7cad7a99"]]);export{ct as default};
