import{d as F,j as f,I as K,x as L,r,o as h,c as v,e as s,b as t,w as a,f as i,h as C,K as S,L as O,H as m,G as y}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{P as V}from"./PopFormElm-61cd9b7d.js";import{_ as j}from"./Switch.vue_vue_type_script_setup_true_lang-95245cd7.js";import{_ as E}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as G}from"./Pagination-8eb7b6b1.js";import{u as H}from"./config-9548fa9b.js";import{g as M,u as b,d as J,b as Q}from"./shippingType-048b9d8a.js";import{_ as A}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const R={class:"container"},W={class:"content_wrapper"},X={class:"lyecs-table-list-warp"},Y={class:"list-table-tool lyecs-search-warp"},Z={class:"advanced-search-warp list-table-tool-row"},ee={class:"simple-form-warp"},te={class:"simple-form-field"},se={class:"form-group"},ae={class:"control-container"},oe=s("span",{class:"iconfont icon-chakan1"},null,-1),ie={class:"simple-form-field"},ne={class:"form-group"},le={class:"control-container"},pe={class:"simple-form-field"},re={class:"form-group"},de={class:"control-container"},_e={key:0},ce={class:"table-container"},ue=s("a",{class:"btn-link"},"编辑",-1),me={class:"empty-warp"},ge={key:0,class:"empty-bg"},fe={key:0,class:"pagination-con"},ze=F({__name:"List",setup(he){const U=H(),w=f([]),c=f(!0),g=f(0),u=f([]),l=K({page:1,size:U.get("page_size"),sort_field:"",sort_order:"",keyword:""}),p=async()=>{c.value=!0;try{const n=await M({...l});w.value=n.filter_result,g.value=n.total}catch(n){S.error(n.message)}finally{c.value=!1}};L(()=>{p()});const x=()=>{p()},q=({prop:n,order:o})=>{l.sort_field=n,l.sort_order=o=="ascending"?"asc":o=="descending"?"desc":"",p()},z=async n=>{try{const o=await Q(n,{ids:u.value});S.success(o.message),p()}catch(o){S.error(o.message)}},T=n=>{u.value=n.map(o=>o.shipping_type_id)};return(n,o)=>{const k=r("el-button"),P=r("el-input"),B=r("el-popconfirm"),D=r("el-form"),d=r("el-table-column"),I=r("el-divider"),N=r("el-table"),$=r("a-spin");return h(),v("div",R,[s("div",W,[s("div",X,[s("div",Y,[t(D,{model:l},{default:a(()=>[s("div",Z,[s("div",ee,[s("div",te,[s("div",se,[s("div",ae,[t(P,{modelValue:l.keyword,"onUpdate:modelValue":o[0]||(o[0]=e=>l.keyword=e),name:"keyword",placeholder:"输入配送类型",onKeyup:O(x,["enter"])},{append:a(()=>[t(k,{onClick:x},{default:a(()=>[oe]),_:1})]),_:1},8,["modelValue"])])])]),s("div",ie,[s("div",ne,[s("div",le,[t(i(A),{params:{act:"add"},isDrawer:"",path:"setting/shippingType/Info",title:"添加配送类型",width:"600px",onOkCallback:p},{default:a(()=>[t(k,{type:"primary"},{default:a(()=>[m("添加配送方式")]),_:1})]),_:1})])])]),s("div",pe,[s("div",re,[s("div",de,[t(B,{title:"您确认要批量删除所选数据吗？",onConfirm:o[1]||(o[1]=e=>z("del"))},{reference:a(()=>[t(k,{disabled:u.value.length===0},{default:a(()=>[m("批量删除")]),_:1},8,["disabled"])]),_:1}),u.value.length>0?(h(),v("span",_e,[m(" 已选择："),s("b",null,y(u.value.length),1),m(" 项 ")])):C("",!0)])])])])])]),_:1},8,["model"])]),s("div",ce,[t($,{spinning:c.value},{default:a(()=>[t(N,{data:w.value,loading:c.value,total:g.value,"row-key":"shipping_type_id",onSelectionChange:T,onSortChange:q},{empty:a(()=>[s("div",me,[c.value?C("",!0):(h(),v("div",ge,"暂无数据"))])]),default:a(()=>[t(d,{type:"selection",width:"32"}),t(d,{label:"分类名称"},{default:a(({row:e})=>[t(i(V),{"org-value":e.shipping_type_name,"onUpdate:orgValue":_=>e.shipping_type_name=_,max:10,params:{id:e.shipping_type_id,field:"shipping_type_name"},requestApi:i(b),label:"分类名称",type:"input"},{default:a(()=>[s("div",null,y(e.shipping_type_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),t(d,{label:"分类描述",prop:"shipping_type_desc"},{default:a(({row:e})=>[t(i(V),{"org-value":e.shipping_type_desc,"onUpdate:orgValue":_=>e.shipping_type_desc=_,max:10,params:{id:e.shipping_type_id,field:"shipping_type_desc"},requestApi:i(b),label:"分类描述",type:"input"},{default:a(()=>[s("div",null,y(e.shipping_type_desc),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),t(d,{label:"默认物流",prop:"logistics_name"}),t(d,{label:"货到付款",prop:"is_support_cod",sortable:"custom"},{default:a(({row:e})=>[t(i(j),{checked:e.is_support_cod,"onUpdate:checked":_=>e.is_support_cod=_,params:{id:e.shipping_type_id,field:"is_support_cod"},requestApi:i(b)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),t(d,{label:"排序",prop:"sort_order",sortable:"custom"},{default:a(({row:e})=>[t(i(V),{"org-value":e.sort_order,"onUpdate:orgValue":_=>e.sort_order=_,params:{id:e.shipping_type_id,field:"sort_order"},requestApi:i(b),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"input"},{default:a(()=>[s("div",null,y(e.sort_order),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),t(d,{width:150,fixed:"right",label:"操作"},{default:a(({row:e})=>[t(i(A),{params:{act:"detail",id:e.shipping_type_id},isDrawer:"",path:"setting/shippingType/Info",title:"编辑配送类型",width:"600px",onOkCallback:p},{default:a(()=>[ue]),_:2},1032,["params"]),t(I,{direction:"vertical"}),t(i(E),{params:{id:e.shipping_type_id},requestApi:i(J),onAfterDelete:p},{default:a(()=>[m("删除 ")]),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),g.value>0?(h(),v("div",fe,[t(i(G),{page:l.page,"onUpdate:page":o[2]||(o[2]=e=>l.page=e),size:l.size,"onUpdate:size":o[3]||(o[3]=e=>l.size=e),total:g.value,onCallback:p},null,8,["page","size","total"])])):C("",!0)])])])])}}});export{ze as default};
