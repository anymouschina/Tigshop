import{_ as R}from"./Image.vue_vue_type_script_setup_true_lang-BWzCs9jv.js";import{i as D}from"./format-CRgx78oe.js";import{d as A}from"./adminMsg-DO0gQXrn.js";import{d as N,cb as S,et as T,i as u,C as F,r as L,c as o,o as l,f as _,e,b as m,g as f,D as r,n as p,F as O,a as V,E as B,I as h,_ as M}from"./index-DrbzVNl6.js";import{a as $}from"./order-DqMQuu0g.js";import{_ as g}from"./DetailBtn.vue_vue_type_script_setup_true_lang-DaLWXrN7.js";import{c as z}from"./aftersales-0KSvwj7B.js";import"./index-CeQDmMxd.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const E={key:0,class:"loading-box"},H={class:"loading-inner"},j={class:"left"},q={class:"text"},U={class:"right"},G={class:"time"},J={style:{margin:"10px"}},K={key:0},P={key:0,class:"item"},Q={class:"product_info"},W={class:"info"},X={class:"txt"},Y={key:1,class:"money_box"},Z={class:"more"},ee={key:1},te=["innerHTML"],se={class:"more"},ae=N({__name:"Collapse",props:{item:{type:Object,default:{}}},emits:["setReadedCallback","close"],setup(n,{emit:y}){const x=S(T,{spin:!0}),d=u(!1);F();const v=y,i=u(!1),b=u(!0),a=u(),k=async s=>{if(s.isReaded||(await A({msgId:s.msgId}),s.isReaded=1,v("setReadedCallback",!0)),!i.value&&s.relatedData.aftersaleId){await w(s.relatedData.aftersaleId);return}if(!i.value&&s.relatedData.orderId){await C(s.relatedData.orderId);return}i.value=!i.value,b.value=!1},C=async s=>{d.value=!0;try{const t=await $("detail",{id:s});a.value=t,i.value=!0}catch(t){h.error(t.message),v("close")}finally{d.value=!1}},w=async s=>{d.value=!0;try{const t=await z("detail",{id:s});a.value=t,i.value=!0}catch(t){h.error(t.message),v("close")}finally{d.value=!1}};return(s,t)=>{const I=L("a-spin");return l(),o("div",{class:p(["collapse",i.value?"show":"hide"])},[d.value?(l(),o("div",E,[e("div",H,[m(I,{size:"small",indicator:f(x)},null,8,["indicator"])])])):_("",!0),e("div",{class:p(["cell",n.item.isReaded==0?"unread":""]),onClick:t[0]||(t[0]=c=>k(n.item))},[e("div",j,[t[1]||(t[1]=e("div",{class:"badge"},null,-1)),e("div",q,r(n.item.title),1)]),e("div",U,[e("div",G,r(n.item.sendTime),1),t[2]||(t[2]=e("div",{class:"icon"},[e("i",{class:"nav-icon iconfont icon-xiala"})],-1))])],2),e("div",{class:p(["content_box",i.value?"show":"hide"])},[e("div",J,[a.value?(l(),o("div",K,["items"in a.value?(l(),o("div",P,[(l(!0),o(O,null,V(a.value.items,c=>(l(),o("div",Q,[e("div",W,[m(f(R),{width:"60",src:f(D)(c.picThumb),fit:"contain"},null,8,["src"]),e("p",null,r(c.productName),1)]),e("div",X,[e("p",null,"¥"+r(c.price),1),e("p",null,"x "+r(c.quantity),1)])]))),256))])):_("",!0),"totalAmount"in a.value?(l(),o("div",Y,[e("div",null,[B(" 订单金额：¥"+r(a.value.totalAmount)+" ",1),e("span",null,"(含运费："+r(a.value.shippingFee)+")",1)])])):_("",!0),e("div",Z,[m(g,{item:n.item,orderSn:a.value.orderSn},null,8,["item","orderSn"])])])):(l(),o("div",ee,[e("div",{class:"item",innerHTML:n.item.content},null,8,te),e("div",se,[m(g,{item:n.item},null,8,["item"])])]))])],2)],2)}}}),ve=M(ae,[["__scopeId","data-v-e4e02ffa"]]);export{ve as default};
