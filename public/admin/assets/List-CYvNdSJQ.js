import{d as ae,i as T,K as te,G as U,C as le,q as oe,c,e as i,b as o,w as l,f as p,g as v,M as se,j as y,I as V,r as m,o as s,F,a as q,E as g,D as h}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{D as ne}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as A}from"./Pagination-wR9huHyl.js";import{g as ie,a as de,d as re,b as pe}from"./translationContent-Dpq5bYUM.js";import{g as ue}from"./product-DEi2MlvQ.js";import{g as ce}from"./brand-C64i7ZtK.js";import{g as me}from"./category-B3nMG9Bb.js";import{g as ve}from"./article-D9QgJXUQ.js";import{b as ye}from"./version-CL9k3sYf.js";import{_ as x}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const fe={class:"container"},ge={class:"content_wrapper"},_e={class:"lyecs-table-list-warp"},be={class:"list-table-tool lyecs-search-warp"},ke={class:"advanced-search-warp list-table-tool-row"},Te={class:"simple-form-warp"},he={key:0,class:"simple-form-field"},Ce={key:0,class:"form-group"},we={class:"control-container"},Ne={class:"form-group"},xe={class:"control-container"},ze={key:1,class:"simple-form-field"},De={class:"form-group"},Oe={class:"control-container"},Ve={class:"simple-form-field"},Ie={key:3},Se={class:"table-container"},Le={class:"empty-warp"},Be={key:0,class:"empty-bg"},Ue={key:0},Fe={key:0},qe={class:"empty-warp"},Ae={key:0,class:"empty-bg"},Pe={key:0,class:"pagination-con"},aa=ae({__name:"List",props:{promotionType:{type:Number,default:1}},setup(Me,{expose:P}){const M=T(localStorage.getItem("adminType")),L=te(),n=T(2),K=T([{label:"商品",value:2},{label:"分类",value:3},{label:"品牌",value:4},{label:"文章",value:6}]),z=T(),_=T(!0),b=T(0),f=T([]),t=U({page:1,size:L.get("pageSize"),sortField:"",sortOrder:"",translationName:"",localeCode:"",dataType:0}),C=U({page:1,size:L.get("pageSize"),sortField:"",sortOrder:""}),R=(d,e)=>{const r=e.find(S=>S.localeId===d);return r?r.translationValue:""},j=(d,e)=>{z.value=[],t.dataType<2?u():(C.page=1,D())},D=async()=>{const e={2:ue,3:me,4:ce,6:ve}[n.value];_.value=!0;try{if(typeof e=="function"){const r=await e({...C});z.value=r.records,b.value=r.total}else console.error("fn 不是一个有效的函数")}catch(r){V.error(r.message)}finally{_.value=!1}},I=T([]),u=async()=>{_.value=!0;try{const d=await ie();I.value=d;const e=await de({...t,localeIds:I.value.map(r=>r.id).join(",")});z.value=e.records,b.value=e.total}catch(d){V.error(d.message)}finally{_.value=!1}},w=le().currentRoute.value.query;oe(()=>{w.type&&w.type!==""?(t.dataType=2,w.type==="product"&&(n.value=2),w.type==="category"&&(n.value=3),w.type==="brand"&&(n.value=4),w.type==="article"&&(n.value=6),D()):u()});const O=()=>{t.dataType<2?u():D()},E=({prop:d,order:e})=>{t.sortField=d,t.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",u()},Q=async d=>{try{const e=await pe(d,{ids:f.value});V.success("操作成功"),u()}catch(e){V.error(e.message)}},$=d=>{f.value=d.map(e=>e.id)};return P({loadFilter:u}),(d,e)=>{const r=m("el-tab-pane"),S=m("el-tabs"),G=m("el-option"),H=m("el-select"),N=m("el-button"),J=m("TigInput"),W=m("el-popconfirm"),X=m("el-space"),k=m("el-table-column"),Y=m("el-divider"),B=m("el-table"),Z=m("a-spin");return s(),c("div",fe,[i("div",ge,[i("div",_e,[o(S,{modelValue:t.dataType,"onUpdate:modelValue":e[0]||(e[0]=a=>t.dataType=a),class:"demo-tabs",onTabClick:j},{default:l(()=>[o(r,{label:"页面文字",name:0}),o(r,{label:"接口文字",name:1}),o(r,{label:"数据维护",name:2})]),_:1},8,["modelValue"]),i("div",be,[i("div",ke,[i("div",Te,[t.dataType==2&&v(ye)()?(s(),c("div",he,[M.value=="admin"?(s(),c("div",Ce,[i("div",we,[o(H,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a),placeholder:"请选择数据类型",style:{width:"240px"},onChange:O},{default:l(()=>[(s(!0),c(F,null,q(K.value,a=>(s(),y(G,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])):p("",!0),i("div",Ne,[i("div",xe,[o(v(x),{params:{act:"add",dataType:n.value,total:b.value},isDrawer:"",showClose:!1,showOnOk:!1,path:"setting/multilingual/translationContent/Quick",title:"一键翻译",width:"700px",onOkCallback:D},{default:l(()=>[o(N,{type:"success"},{default:l(()=>e[8]||(e[8]=[g("一键翻译")])),_:1})]),_:1},8,["params"])])])])):t.dataType!=2?(s(),c("div",ze,[i("div",De,[i("div",Oe,[o(J,{modelValue:t.translationName,"onUpdate:modelValue":e[2]||(e[2]=a=>t.translationName=a),name:"translationName",placeholder:"请输入原句",onKeyup:se(O,["enter"])},{append:l(()=>[o(N,{onClick:O},{default:l(()=>e[9]||(e[9]=[i("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])])):p("",!0),i("div",Ve,[o(X,null,{default:l(()=>[t.dataType<2?(s(),y(v(x),{key:0,params:{act:"add",dataType:t.dataType},isDrawer:"",path:"setting/multilingual/translationContent/Info",title:"添加"+(t.dataType==0?"页面文字":"接口文字"),width:"700px",onOkCallback:u},{default:l(()=>[o(N,{type:"primary"},{default:l(()=>e[10]||(e[10]=[g("添加语句")])),_:1})]),_:1},8,["params","title"])):p("",!0),t.dataType<2?(s(),y(v(x),{key:1,params:{act:"add",dataType:t.dataType},isDrawer:"",path:"setting/multilingual/translationContent/Add",title:"添加"+(t.dataType==0?"页面文字":"接口文字"),width:"700px",onOkCallback:u},{default:l(()=>[o(N,{type:"primary"},{default:l(()=>e[11]||(e[11]=[g("批量添加语句")])),_:1})]),_:1},8,["params","title"])):p("",!0),t.dataType<2?(s(),y(v(x),{key:2,params:{act:"add",dataType:t.dataType,total:f.value.length>0?f.value.length:b.value,ids:f.value},isDrawer:"",showClose:!1,showOnOk:!1,path:"setting/multilingual/translationContent/Quick",title:f.value.length?"批量翻译":"一键翻译",width:"700px",onOkCallback:u},{default:l(()=>[o(N,{type:"success"},{default:l(()=>[g(h(f.value.length?"批量翻译":"一键翻译"),1)]),_:1})]),_:1},8,["params","title"])):p("",!0),o(W,{title:"您确认要批量删除所选数据吗？",onConfirm:e[3]||(e[3]=a=>Q("del"))},{reference:l(()=>[t.dataType<2?(s(),y(N,{key:0,disabled:f.value.length===0},{default:l(()=>e[12]||(e[12]=[g("批量删除")])),_:1},8,["disabled"])):p("",!0)]),_:1}),f.value.length>0?(s(),c("span",Ie,[e[13]||(e[13]=g(" 已选择：")),i("b",null,h(f.value.length),1),e[14]||(e[14]=g(" 项 "))])):p("",!0)]),_:1})])])])]),i("div",Se,[o(Z,{spinning:_.value},{default:l(()=>[t.dataType<2?(s(),y(B,{key:0,data:z.value,"row-key":"id",onSelectionChange:$,total:b.value,onSortChange:E,loading:_.value},{empty:l(()=>[i("div",Le,[_.value?p("",!0):(s(),c("div",Be,"暂无数据"))])]),default:l(()=>[o(k,{type:"selection",width:"32"}),o(k,{label:"原句",prop:"translationName",sortable:"custom","show-overflow-tooltip":"",fixed:"left"},{default:l(({row:a})=>[g(h(a.translationName||"--"),1)]),_:1}),(s(!0),c(F,null,q(I.value,(a,Ke)=>(s(),y(k,{label:a.language,prop:a.localeCode,"show-overflow-tooltip":""},{default:l(({row:ee})=>[g(h(R(a.id,ee.tdata)),1)]),_:2},1032,["label","prop"]))),256)),o(k,{label:"翻译类型",prop:"dataType",width:150},{default:l(({row:a})=>[i("div",null,h(a.dataType==0?"页面文字":"接口文字"),1)]),_:1}),o(k,{label:"操作",fixed:"right",width:150},{default:l(({row:a})=>[o(v(x),{isDrawer:"",onOkCallback:u,title:"编辑"+(a.dataType==0?"页面文字":"接口文字"),width:"700px",path:"setting/multilingual/translationContent/Info",params:{act:"detail",id:a.id,dataType:t.dataType}},{default:l(()=>e[15]||(e[15]=[i("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["title","params"]),o(Y,{direction:"vertical"}),o(v(ne),{onAfterDelete:u,requestApi:v(re),params:{id:a.id}},{default:l(()=>e[16]||(e[16]=[g("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])):(s(),y(B,{key:1,data:z.value,"row-key":"id",total:b.value,loading:_.value},{empty:l(()=>[i("div",qe,[_.value?p("",!0):(s(),c("div",Ae,"暂无数据"))])]),default:l(()=>[o(k,{label:"原句",prop:"name"},{default:l(({row:a})=>[t.dataType==2?(s(),c("div",Ue,h(n.value==2?a.productName:n.value==3?a.categoryName:n.value==4?a.brandName:a.articleTitle),1)):p("",!0)]),_:1}),o(k,{label:"翻译类型",prop:"dataType",width:150},{default:l(({row:a})=>[t.dataType==2?(s(),c("div",Fe,h(n.value==2?"商品名称":n.value==3?"分类名称":"品牌名称"),1)):p("",!0)]),_:1}),o(k,{label:"操作",fixed:"right",width:150},{default:l(({row:a})=>[t.dataType==2?(s(),y(v(x),{key:0,isDrawer:"",onOkCallback:O,title:"查看",width:"800px",path:"setting/multilingual/translationContent/BusinessDialog",params:{act:"detail",id:n.value==2?a.productId:n.value==3?a.categoryId:n.value==4?a.brandId:a.articleId,dataType:n.value,translationName:n.value==2?a.productName:n.value==3?a.categoryName:n.value==4?a.brandName:a.articleTitle}},{default:l(()=>e[17]||(e[17]=[i("a",{class:"btn-link"},"翻译",-1)])),_:2},1032,["params"])):p("",!0)]),_:1})]),_:1},8,["data","total","loading"]))]),_:1},8,["spinning"]),b.value>0?(s(),c("div",Pe,[t.dataType<2?(s(),y(v(A),{key:0,page:t.page,"onUpdate:page":e[4]||(e[4]=a=>t.page=a),size:t.size,"onUpdate:size":e[5]||(e[5]=a=>t.size=a),total:b.value,onCallback:u},null,8,["page","size","total"])):(s(),y(v(A),{key:1,page:C.page,"onUpdate:page":e[6]||(e[6]=a=>C.page=a),size:C.size,"onUpdate:size":e[7]||(e[7]=a=>C.size=a),total:b.value,onCallback:D},null,8,["page","size","total"]))])):p("",!0)])])])])}}});export{aa as default};
