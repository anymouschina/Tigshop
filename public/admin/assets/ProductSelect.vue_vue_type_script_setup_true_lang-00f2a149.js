import"./index-6c62cf9b.js";import{d as h}from"./vuedraggable.umd-75ad0f8f.js";import{u as M,i as k}from"./format-4e0206d3.js";import{d as x,m,j as r,aP as y,u as C,x as b,A as w,o as A,c as B,b as _,w as u,e as s,f as d}from"./index-7c2d2aef.js";import{_ as L}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";const j={class:"dec-goods-group-item dec-tip dec-goods-group-item-goods"},P={class:"dec-goods-group-item-con"},S={class:"item-goods-con"},E=["href","title"],F=["src"],N=["onClick"],V=s("i",{class:"ico-decorate icon-dec-cha"},null,-1),$=[V],q=s("div",{class:"dec-goods-group-item dec-goods-group-add dec-tip","data-title":"添加商品"},[s("div",{class:"dec-goods-group-item-con"},[s("div",{class:"item-goods-con"},[s("a",{href:"javascript:;"},[s("i",{class:"ico-decorate icon-dec-jia"})])])])],-1),J=x({__name:"ProductSelect",props:m({ids:{type:Array,default:[]},productList:{type:Array,default:[]},isMultiple:{type:Boolean,default:!1}},{ids:{},idsModifiers:{}}),emits:m(["update:ids"],["update:ids"]),setup(n,{emit:z}){r(null);const i=n;y(i);const a=r(i.productList),e=C(n,"ids");b(async()=>{e.value&&p()});const l=r(0);function p(){e.value.length>0?w({url:"product/product/list",method:"get",params:{ids:e.value,size:100,page:1}}).then(t=>{a.value=t.filter_result,l.value=t.total}):(a.value=[],l.value=0)}const g=t=>{console.log(t),i.isMultiple==!1&&(e.value=[]);for(let o in t)e.value.push(t[o]);l.value=e.value.length,p()},f=t=>{e.value.splice(t,1),a.value.splice(t,1)};return(t,o)=>(A(),B("div",null,[_(d(h),{class:"dec-goods-group-list","item-key":"prodcut_id",list:a.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:o[0]||(o[0]=()=>{}),onEnd:o[1]||(o[1]=()=>{})},{item:u(({element:c,index:v})=>[s("div",j,[s("div",P,[s("div",S,[s("a",{href:d(M)({path:"product",id:c.product_id}),target:"_blank",title:c.product_name},[s("img",{class:"item-goods-img",src:d(k)(c.pic_thumb)},null,8,F)],8,E)]),s("div",{class:"del-item",onClick:D=>f(v)},$,8,N)])])]),footer:u(()=>[_(d(L),{isDrawer:"",onOkCallback:g,title:"选择商品",width:"600px",path:"product/product/src/SelectProduct",params:{selected_ids:e.value,isMultiple:i.isMultiple}},{default:u(()=>[q]),_:1},8,["params"])]),_:1},8,["list"])]))}});export{J as _};
