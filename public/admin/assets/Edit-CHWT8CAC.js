import{d as H,i as k,r as y,c as m,o as r,e as t,b as i,F as V,a as U,f as S,g as v,l as q,D as O,w as s,j as L,E as f,_ as G,u as J}from"./index-DrbzVNl6.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import{M as K}from"./index-CeQDmMxd.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              *//* empty css             */import"./vuedraggable.umd-DAKh-e3Q.js";import{s as Q}from"./ProductGroupSelect.vue_vue_type_style_index_0_scoped_7559934f_lang-BEuf7bhy.js";import{l as X}from"./lodash-Cilobaqo.js";import{i as A}from"./format-CRgx78oe.js";import{_ as D}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import{_ as Y}from"./Edit.vue_vue_type_script_setup_true_lang-CQgg4uJ3.js";import{_ as Z}from"./Edit.vue_vue_type_script_setup_true_lang-DGf5ECiW.js";import"./time-Bh5UhrfW.js";import"./SelectLink-y94Q6MqZ.js";import"./SelectColor.vue_vue_type_script_setup_true_lang-CHTH-RVH.js";import"./PicSelect-DKoWBuo3.js";import"./index-Dp14ZkTu.js";/* empty css                                                             */const ee={class:"dec-pic-group dec-pic-hotarea-group"},te={class:"dec-pic-group-list"},oe={class:"dec-pic-group-item","data-index":"{$smarty.foreach.picList.index}"},ae={class:"dec-pic-group-item-con"},se={class:"item-image"},le={class:"item-image-con"},ie=["onClick","src"],ne=["onClick"],de={class:"area_box_con_text"},re=["onClick"],ce={class:"hotarea-edit-dialog-warp"},ue={class:"hotarea-edit-dialog-con"},pe={class:"hotarea-edit-box-wrap"},me={class:"hotarea-edit-box"},ve=["src"],_e={class:"hotarea-edit-box-area"},ge={class:"area-bg"},he={class:"area_box_con_text"},fe={class:"input-with-clear"},ke={class:"dec-pic-add-con"},ye=328,xe=H({__name:"ImageHotarea",props:{photos:{type:Array,default:[]},defaultValue:{type:Object}},setup(w){const u=w,g=k(!1),o=k(u.photos),C=(a,e)=>{Object.assign(o.value[e.index],a[0])},_=a=>{o.value.push(...a)},P=a=>{o.value.splice(a,1)},h=k(0),E=a=>{g.value=!0,h.value=a,l.value=X.cloneDeep(o.value[h.value].hotarea)||[],console.log(l.value)},l=k([]),c=k(0),j=()=>{l.value.push({height:100,width:100,left:10,top:10})},B=a=>{c.value=a},N=(a,e)=>{l.value[c.value].left=parseInt(a),l.value[c.value].top=parseInt(e)},T=(a,e,b,I)=>{l.value[c.value].left=parseInt(a),l.value[c.value].top=parseInt(e),l.value[c.value].width=parseInt(b),l.value[c.value].height=parseInt(I)},z=a=>{l.value.splice(a,1)},F=()=>{g.value=!1,o.value[h.value].hotarea=l.value,console.log("editPicIndex.value",h.value),console.log("photos.value",o.value)},x=a=>a/500*ye,R=(a,e)=>{c.value=e.index,l.value[c.value].link=a,console.log(l.value)};return(a,e)=>{const b=y("a-menu-item"),I=y("a-menu"),W=y("a-dropdown"),$=y("a-button");return r(),m("div",ee,[t("div",te,[(r(!0),m(V,null,U(o.value,(n,p)=>(r(),m("div",oe,[t("div",ae,[t("div",se,[t("div",le,[n.picUrl?(r(),m("img",{key:0,onClick:d=>E(p),class:"item-image-src",src:v(A)(n.picUrl)},null,8,ie)):S("",!0),n.hotarea?(r(!0),m(V,{key:1},U(n.hotarea,(d,Ie)=>{var M;return r(),m("div",{onClick:$e=>E(p),class:"image-hotarea-link",style:q({width:x(d.width)+"px",height:x(d.height)+"px",top:x(d.top)+"px",left:x(d.left)+"px"})},[t("span",de,O((M=d.link)==null?void 0:M.name),1)],12,ne)}),256)):S("",!0),i(v(D),{type:"gallery",class:"",onOkCallback:C,params:{isMultiple:!1},data:{index:p},style:{width:"100%"}},{default:s(()=>e[2]||(e[2]=[t("span",{class:"change-image"},"更换图片",-1)])),_:2},1032,["data"])])]),t("div",{class:"del-item",onClick:d=>P(p)},e[3]||(e[3]=[t("i",{class:"ico-decorate icon-dec-cha"},null,-1)]),8,re)])]))),256))]),i(v(K),{open:g.value,"onUpdate:open":e[1]||(e[1]=n=>g.value=n),width:"500px",destroyOnClose:!0,title:"绘制热区",class:"noPadding"},{footer:s(()=>[i($,{style:{"margin-right":"8px"},onClick:j},{default:s(()=>e[6]||(e[6]=[f("添加区域")])),_:1}),i($,{style:{"margin-right":"8px"},type:"primary",onClick:F},{default:s(()=>e[7]||(e[7]=[f("保存")])),_:1}),i($,{onClick:e[0]||(e[0]=n=>g.value=!1)},{default:s(()=>e[8]||(e[8]=[f("取消")])),_:1})]),default:s(()=>[t("div",ce,[t("div",ue,[t("div",pe,[t("div",me,[o.value[h.value].picUrl?(r(),m("img",{key:0,class:"bgImg",src:v(A)(o.value[h.value].picUrl)},null,8,ve)):S("",!0),t("div",_e,[(r(!0),m(V,null,U(l.value,(n,p)=>(r(),L(v(Q),{class:"",parent:!0,"min-width":30,"min-height":30,w:n.width,h:n.height,x:n.left,y:n.top,onResizing:T,onActivated:d=>B(p),onDragstop:N},{default:s(()=>[i(W,{trigger:["contextmenu"],style:{width:"100%",height:"100%"}},{overlay:s(()=>[i(I,null,{default:s(()=>[i(v(D),{params:{act:"edit",id:1,type:"mobile"},data:{index:p},isDrawer:"",path:"link/LinkSelect",style:{width:"100%"},title:"选择链接",width:"700px",onOkCallback:R},{default:s(()=>[t("div",fe,[i(b,null,{default:s(()=>e[4]||(e[4]=[f("编辑链接")])),_:1})])]),_:2},1032,["data"]),i(b,{onClick:d=>z(p)},{default:s(()=>e[5]||(e[5]=[f("删除区域")])),_:2},1032,["onClick"])]),_:2},1024)]),default:s(()=>{var d;return[t("div",ge,[t("span",he,O(((d=n.link)==null?void 0:d.name)||"右键编辑"),1)])]}),_:2},1024)]),_:2},1032,["w","h","x","y","onActivated"]))),256))])])])])])]),_:1},8,["open"]),t("div",ke,[i(v(D),{type:"gallery",class:"",onOkCallback:_,params:{isMultiple:!0},style:{width:"100%"}},{default:s(()=>e[9]||(e[9]=[t("div",{class:"dec-pic-add-btn"},[t("i",{class:"ico-decorate icon-dec-jia"}),f("添加新热图")],-1)])),_:1})])])}}}),be=G(xe,[["__scopeId","data-v-b8aa4539"]]),we={class:"dec-edit-group dec-edit-group-block"},Ce={class:"dec-edit-group-con"},Ge=H({__name:"Edit",props:{module:{default:()=>({})},moduleModifiers:{}},emits:["update:module"],setup(w){k({picType:{1:"一行一个",2:"轮播",3:"横向滑动-大图",4:"横向滑动-小图",5:"一行两个",6:"一行三个",7:"一行四个"},picPageType:{1:"样式一",2:"样式二",3:"样式三 "}});const u=J(w,"module");return(g,o)=>{const C=y("perfect-scrollbar");return r(),L(C,{class:"decorate-edit-con"},{default:s(()=>[o[4]||(o[4]=t("div",{class:"dec-edit-title"},[t("h3",null,"绘制热区")],-1)),t("div",we,[o[3]||(o[3]=t("div",{class:"dec-edit-group-desc"},[t("div",{class:"pic-change-desc"},"提示：添加图片后，点击图片进入绘制")],-1)),t("div",Ce,[i(v(be),{photos:u.value.picList,"onUpdate:photos":o[0]||(o[0]=_=>u.value.picList=_)},null,8,["photos"])])]),i(Z,{modelValue:u.value.frame,"onUpdate:modelValue":o[1]||(o[1]=_=>u.value.frame=_)},null,8,["modelValue"]),i(Y,{modelValue:u.value.title,"onUpdate:modelValue":o[2]||(o[2]=_=>u.value.title=_),decorateType:"mobile"},null,8,["modelValue"])]),_:1})}}});export{Ge as default};
