import{u as C,c as I}from"./shopProductCategory-BXIUO5BE.js";import{d as N,m as P,u as i,i as l,q as S,I as k,j as M,o as L,g as V,dF as b}from"./index-DrbzVNl6.js";const T=N({__name:"SelectShopProductCategory",props:P({multiple:{type:Boolean,default:!1},categoryList:{type:Array,default:()=>[]}},{categoryId:{},categoryIdModifiers:{},categoryName:{},categoryNameModifiers:{}}),emits:["update:categoryId","update:categoryName"],setup(c){const o=c,t=i(c,"categoryId"),u=i(c,"categoryName"),y={label:"categoryName",value:"categoryId",children:"children",multiple:o.multiple,checkStrictly:!0},s=C(),r=l([]),n=l(!1),g=l(!1);l(!1),S(()=>{o.categoryList.length>1?r.value=o.categoryList:d()});const d=async()=>{if(g.value!==!0){if(n.value=!0,s.shopProductCategoryTree!==null){r.value=s.shopProductCategoryTree;return}try{const e=await I();r.value=e,s.shopProductCategoryTree=e}catch(e){k.error(e.message)}finally{n.value=!1,g.value=!0}}},p=l(),m=e=>{if(o.multiple==!0)t.value=e==null?void 0:e.map(a=>a[a.length-1]);else{const a=p.value.getCheckedNodes();u.value=a[0]?a[0].text:"",console.log(e?e[e.length-1]:0),t.value=e?e[e.length-1]:0}},f=e=>{e&&d()},v=()=>{o.multiple==!0?t.value=[]:(t.value=0,u.value="")};return(e,a)=>(L(),M(V(b),{ref_key:"cascaderRef",ref:p,modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=h=>t.value=h),options:r.value,props:y,class:"cascader",clearable:"",placeholder:"选择分类",onChange:m,onClear:v,onVisibleChange:f},null,8,["modelValue","options"]))}});export{T as _};
