import{d as R,j as i,E as q,s as L,x as U,K as p,r,o as V,c as j,e as C,k as F,w as o,b as e,H as _,$ as H,a0 as I,h as K}from"./index-7c2d2aef.js";import{c as M,e as O}from"./eCard-04a22698.js";const T={class:"container"},$={class:"content_wrapper"},z={class:"lyecs-form-table"},P=R({__name:"Info",props:{id:{type:Number,default:0},group_id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(k,{expose:h,emit:N}){const n=N,l=k,c=i(!0),f=q().currentRoute.value.query,m=i(l.isDialog?l.act:String(f.act)),v=i(l.isDialog?l.id:Number(f.id)),S=m.value==="add"?"create":"update",b=L(),a=i({group_id:l.group_id,is_use:0});U(()=>{m.value==="detail"?x():c.value=!1});const x=async()=>{try{const t=await M(m.value,{id:v.value});Object.assign(a.value,t.item)}catch(t){p.error(t.message),n("close")}finally{c.value=!1}},g=async()=>{await b.value.validate();try{n("update:confirmLoading",!0);const t=await O(S,{id:v.value,...a.value});n("submitCallback",t),p.success(t.message)}catch(t){p.error(t.message)}finally{n("update:confirmLoading",!1)}};return h({onFormSubmit:()=>{g()}}),(t,s)=>{const y=r("el-input"),d=r("el-form-item"),w=r("el-radio"),B=r("el-radio-group"),D=r("el-button"),E=r("el-form");return V(),j("div",T,[C("div",$,[C("div",z,[c.value?K("",!0):(V(),F(E,{key:0,ref_key:"formRef",ref:b,model:a.value,"label-width":"auto"},{default:o(()=>[e(d,{prop:"card_number",label:"卡券名称",rules:[{required:!0,message:"电子卡券名称不能为空!"}]},{default:o(()=>[e(y,{modelValue:a.value.card_number,"onUpdate:modelValue":s[0]||(s[0]=u=>a.value.card_number=u)},null,8,["modelValue"])]),_:1}),e(d,{prop:"card_pwd",label:"卡券密码",rules:[{required:!0,message:"电子卡券密码不能为空!"}]},{default:o(()=>[e(y,{modelValue:a.value.card_pwd,"onUpdate:modelValue":s[1]||(s[1]=u=>a.value.card_pwd=u)},null,8,["modelValue"])]),_:1}),e(d,{label:"是否使用",prop:"is_use"},{default:o(()=>[e(B,{style:{width:"100%"},modelValue:a.value.is_use,"onUpdate:modelValue":s[2]||(s[2]=u=>a.value.is_use=u)},{default:o(()=>[e(w,{value:1},{default:o(()=>[_("是")]),_:1}),e(w,{value:0},{default:o(()=>[_("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),H(e(d,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[e(D,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:g},{default:o(()=>[_("提交")]),_:1},512)]),_:1},512),[[I,!l.isDialog]])]),_:1},8,["model"]))])])])}}});export{P as default};
