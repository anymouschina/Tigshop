import{u as I}from"./config-9548fa9b.js";import{d as $,j as b,I as w,x as B,C as O,v as A,r as d,o as N,k as R,w as u,b as i,aM as q,e as a,H as _,G as h,c as z,h as K,p as M,i as T,_ as D}from"./index-7c2d2aef.js";import"./config-e2aa16d1.js";const f=r=>(M("data-v-431865f7"),r=r(),T(),r),G=f(()=>a("div",{class:"tips mb10"},"以下条件至少选择一个，选择多个需同时满足才可升级。自购金额、推广金额需交易完成后才会统计。",-1)),H={class:"check-list"},P={class:"item flex flex-align-center flex-justify-between"},F={class:"check"},J={class:"inp flex flex-align-center"},L=f(()=>a("p",{class:"mr10"},"满",-1)),Q={class:"item flex flex-align-center flex-justify-between"},W={class:"check"},X={class:"inp flex flex-align-center"},Y=f(()=>a("p",{class:"mr10"},"满",-1)),Z={class:"item flex flex-align-center flex-justify-between"},ee={class:"check"},se={class:"inp flex flex-align-center"},te=f(()=>a("p",{class:"mr10"},"满",-1)),le={class:"btn-box"},ae={class:"tips"},oe={key:0,class:"red"},ie=$({__name:"popover",props:{conditions_data:{type:Object,default:{}},superior_data:{type:Object,default:{}},index:{type:Number,default:0}},emits:["submitCallback"],setup(r,{emit:S}){const C=S,y=I(),o=r,k=b(null),p=b(null),s=w({self_buy_amount:{checked:!1,disabled:!1,value:0,title:"自购金额",unit:`${y.get("amount_unit")??"元"}`},sales_amount:{checked:!1,disabled:!1,value:0,title:"推广金额",unit:`${y.get("amount_unit")??"元"}`},sales_invite_users:{checked:!1,disabled:!1,value:0,title:"发展客户数",unit:"人"}}),x=b(!1),U=async()=>{await k.value.validate();let l=!0;for(let e in s)if(s[e].checked){l=!1;break}if(l){console.log("No conditions selected. Verification failed.");return}x.value=!0,C("submitCallback",{conditionsOpts:s,index:o.index}),p.value.hide()},c=w({self_buy_amount:[{required:!0,validator:(l,e,t)=>{if(console.log(o.superior_data==null),e.checked&&Number(e.value)<=0){t(new Error("请输入自购金额"));return}o.superior_data!=null&&e.checked&&Number(e.value)<=Number(o.superior_data.self_buy_amount.value)?t(new Error(`需大于上一等级金额(${o.superior_data.self_buy_amount.value})`)):t()},trigger:"blur"}],sales_amount:[{required:!0,validator:(l,e,t)=>{if(e.checked&&Number(e.value)<=0){t(new Error("请输入推广金额"));return}o.superior_data!=null&&e.checked&&Number(e.value)<=Number(o.superior_data.sales_amount.value)?t(new Error(`需大于上一等级金额(${o.superior_data.sales_amount.value})`)):t(),t()},trigger:"blur"}],sales_invite_users:[{required:!0,validator:(l,e,t)=>{if(e.checked&&Number(e.value)<=0){t(new Error("请输入发展客户数"));return}o.superior_data!=null&&e.checked&&Number(e.value)<=Number(o.superior_data.sales_invite_users.value)?t(new Error(`需大于上一等级金额(${o.superior_data.sales_invite_users.value})`)):t(),t()},trigger:"blur"}]}),g=()=>{let l=o.conditions_data,e=o.superior_data;e.self_buy_amount.checked?(l.self_buy_amount.checked=!0,l.self_buy_amount.disabled=!0):l.self_buy_amount.disabled=!1,e.sales_amount.checked?(l.sales_amount.checked=!0,l.sales_amount.disabled=!0):l.sales_amount.disabled=!1,e.sales_invite_users.checked?(l.sales_invite_users.checked=!0,l.sales_invite_users.disabled=!0):l.sales_invite_users.disabled=!1,Object.assign(s,l)};return B(()=>{o.superior_data!==null?O(()=>{g()}):Object.assign(s,o.conditions_data)}),A(o.superior_data,(l,e)=>{g()}),(l,e)=>{const t=d("el-checkbox"),v=d("el-input"),m=d("el-form-item"),V=d("el-button"),j=d("el-popover"),E=d("el-form");return N(),R(E,{ref_key:"formRef",ref:k,rules:c,model:s,"label-width":"auto"},{default:u(()=>[i(m,{prop:"conditions_data"},{default:u(()=>[i(j,{ref_key:"popoverRef",ref:p,placement:"right",title:"升级设置",width:350,trigger:"click"},{reference:u(()=>[q(l.$slots,"default",{},void 0,!0)]),default:u(()=>[G,a("div",H,[i(m,{prop:"self_buy_amount",rules:c.self_buy_amount},{default:u(()=>[a("div",P,[a("div",F,[i(t,{modelValue:s.self_buy_amount.checked,"onUpdate:modelValue":e[0]||(e[0]=n=>s.self_buy_amount.checked=n),label:s.self_buy_amount.title,disabled:s.self_buy_amount.disabled,size:"large"},null,8,["modelValue","label","disabled"])]),a("div",J,[L,i(v,{type:"number",modelValue:s.self_buy_amount.value,"onUpdate:modelValue":e[1]||(e[1]=n=>s.self_buy_amount.value=n),disabled:!s.self_buy_amount.checked,style:{width:"130px"},min:0},{append:u(()=>[_(h(s.self_buy_amount.unit),1)]),_:1},8,["modelValue","disabled"])])])]),_:1},8,["rules"]),i(m,{prop:"sales_amount",rules:c.sales_amount},{default:u(()=>[a("div",Q,[a("div",W,[i(t,{modelValue:s.sales_amount.checked,"onUpdate:modelValue":e[2]||(e[2]=n=>s.sales_amount.checked=n),label:s.sales_amount.title,disabled:s.sales_amount.disabled,size:"large"},null,8,["modelValue","label","disabled"])]),a("div",X,[Y,i(v,{type:"number",modelValue:s.sales_amount.value,"onUpdate:modelValue":e[3]||(e[3]=n=>s.sales_amount.value=n),disabled:!s.sales_amount.checked,style:{width:"130px"},min:0},{append:u(()=>[_(h(s.sales_amount.unit),1)]),_:1},8,["modelValue","disabled"])])])]),_:1},8,["rules"]),i(m,{prop:"sales_invite_users",rules:c.sales_invite_users},{default:u(()=>[a("div",Z,[a("div",ee,[i(t,{modelValue:s.sales_invite_users.checked,"onUpdate:modelValue":e[4]||(e[4]=n=>s.sales_invite_users.checked=n),label:s.sales_invite_users.title,disabled:s.sales_invite_users.disabled,size:"large"},null,8,["modelValue","label","disabled"])]),a("div",se,[te,i(v,{type:"number",modelValue:s.sales_invite_users.value,"onUpdate:modelValue":e[5]||(e[5]=n=>s.sales_invite_users.value=n),disabled:!s.sales_invite_users.checked,style:{width:"130px"},min:0},{append:u(()=>[_(h(s.sales_invite_users.unit),1)]),_:1},8,["modelValue","disabled"])])])]),_:1},8,["rules"])]),a("div",le,[a("div",ae,[x.value?K("",!0):(N(),z("span",oe,"请设置升级条件"))]),a("div",null,[i(V,{onClick:e[6]||(e[6]=n=>p.value.hide())},{default:u(()=>[_("取消")]),_:1}),i(V,{type:"primary",onClick:U},{default:u(()=>[_("确认")]),_:1})])])]),_:3},512)]),_:3})]),_:3},8,["rules","model"])}}});const me=D(ie,[["__scopeId","data-v-431865f7"]]);export{me as default};
