import{d as W,K as J,i as p,G as Q,q as X,c as f,e as s,f as c,b as l,w as a,g as u,I as z,r as d,o as r,M as Z,F as ee,a as te,j as y,E as n,D,L as Y,_ as se}from"./index-DrbzVNl6.js";/* empty css             */import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import"./index-CeQDmMxd.js";import{D as H}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as le}from"./Pagination-wR9huHyl.js";/* empty css                                                                  *//* empty css                                                                              */import{S as ae}from"./SelectTimeInterval-C-WvSG46.js";import{f as _}from"./time-Bh5UhrfW.js";import{g as oe,a as ie,u as h,d as ne}from"./notice-DcabRvyV.js";import{_ as q}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const de={class:"container"},re={class:"content_wrapper"},me={class:"lyecs-table-list-warp"},ue={class:"list-table-tool lyecs-search-warp"},pe={class:"advanced-search-warp list-table-tool-row"},fe={class:"simple-form-warp"},ce={class:"simple-form-field"},_e={class:"form-group"},ve={class:"control-container"},ge={key:0,class:"simple-form-field"},be={class:"form-group"},ye={class:"control-container"},De={class:"simple-form-field"},Ye={class:"form-group"},Te={class:"control-container flex flex-align-center"},we={style:{"margin-left":"10px"}},ke={class:"simple-form-field"},Ce={class:"advanced-search-warp list-table-tool-row"},xe={class:"simple-form-warp"},Me={class:"simple-form-field"},He={class:"table-container"},Ve={class:"tit-row flex flex-align-center"},Ae={key:0,class:"label"},Ie={class:"txt"},Se={class:"empty-warp"},ze={key:0,class:"empty-bg"},he={key:0,class:"pagination-con"},qe={key:0,class:"selected-action-warp"},Ue={class:"selected-action"},Fe=W({__name:"List",setup(Le){const U=J(),V=p([]),v=p(!0),T=p(0);p(0);const C=p([]),o=Q({page:1,size:U.pageSize,sortField:"",sortOrder:"",title:"",endTime:"",startTime:""}),x=p(-1),A=i=>{if(i===-1){x.value=i;return}o.startTime=_(new Date,"YYYY-MM-DD HH:mm:ss"),i===0&&(o.endTime=_(new Date,"YYYY-MM-DD HH:mm:ss")),i===1&&(o.startTime=_(Y(1,"sub"),"YYYY-MM-DD HH:mm:ss"),o.endTime=_(Y(1,"sub"),"YYYY-MM-DD HH:mm:ss")),i===2&&(o.endTime=_(Y(7,"add"),"YYYY-MM-DD HH:mm:ss")),i===3&&(o.endTime=_(Y(30,"add"),"YYYY-MM-DD HH:mm:ss")),i===4&&(o.endTime=_(Y(180,"add"),"YYYY-MM-DD HH:mm:ss")),m()},m=async()=>{v.value=!0;try{const i=await oe({...o});V.value=i.records,T.value=i.total}catch(i){z.error(i.message)}finally{v.value=!1}},M=p(),F=async()=>{v.value=!0;try{const i=await ie();M.value=i}catch(i){z.error(i.message)}finally{v.value=!1}};X(()=>{m(),F()});const w=()=>{m()},L=()=>{o.status=-1,o.title="",o.endTime="",o.startTime="",m()},B=({prop:i,order:e})=>{o.sortField=i,o.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",m()},N=i=>{C.value=i.map(e=>e.productId)};return(i,e)=>{const O=d("TigInput"),K=d("el-option"),P=d("el-select"),k=d("el-radio-button"),E=d("el-radio-group"),g=d("el-button"),R=d("el-form"),b=d("el-table-column"),I=d("el-divider"),S=d("el-space"),$=d("el-table"),j=d("a-spin");return r(),f("div",de,[s("div",re,[s("div",me,[s("div",ue,[l(R,{model:o,name:"form"},{default:a(()=>[s("div",pe,[s("div",fe,[s("div",ce,[s("div",_e,[e[8]||(e[8]=s("label",{class:"control-label"},[s("span",null,"标题：")],-1)),s("div",ve,[l(O,{modelValue:o.title,"onUpdate:modelValue":e[0]||(e[0]=t=>o.title=t),name:"keyword",placeholder:"请输入内容标题",onKeyup:Z(w,["enter"]),clearable:"",onClear:w},null,8,["modelValue"])])])]),M.value?(r(),f("div",ge,[s("div",be,[e[9]||(e[9]=s("label",{class:"control-label"},[s("span",null,"状态：")],-1)),s("div",ye,[l(P,{modelValue:o.status,"onUpdate:modelValue":e[1]||(e[1]=t=>o.status=t),placeholder:"请选择文章状态",style:{width:"180px","margin-right":"10px"},onChange:w,clearable:""},{default:a(()=>[(r(!0),f(ee,null,te(M.value,(t,G)=>(r(),y(K,{label:t,value:G},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])])):c("",!0),s("div",De,[s("div",Ye,[e[14]||(e[14]=s("label",{class:"control-label"},[s("span",null,"推送时间：")],-1)),s("div",Te,[l(u(ae),{"start-date":o.startTime,"onUpdate:startDate":e[2]||(e[2]=t=>o.startTime=t),"end-date":o.endTime,"onUpdate:endDate":e[3]||(e[3]=t=>o.endTime=t),"value-format":"YYYY-MM-DD HH:mm:ss",onCallback:e[4]||(e[4]=t=>A(-1))},null,8,["start-date","end-date"]),s("div",we,[l(E,{class:"itemWidth",modelValue:x.value,"onUpdate:modelValue":e[5]||(e[5]=t=>x.value=t),onChange:A},{default:a(()=>[l(k,{value:0},{default:a(()=>e[10]||(e[10]=[n("今天")])),_:1}),l(k,{value:1},{default:a(()=>e[11]||(e[11]=[n("昨天")])),_:1}),l(k,{value:2},{default:a(()=>e[12]||(e[12]=[n("近7天")])),_:1}),l(k,{value:3},{default:a(()=>e[13]||(e[13]=[n("近30天")])),_:1})]),_:1},8,["modelValue"])])])])]),s("div",ke,[l(g,{type:"primary",onClick:w},{default:a(()=>e[15]||(e[15]=[n("搜索")])),_:1})])])]),s("div",Ce,[s("div",xe,[s("div",Me,[l(u(q),{isDrawer:"",onOkCallback:m,title:"添加活动通知",width:"700px",path:"salesman/notice/Info",params:{act:"add"}},{default:a(()=>[l(g,{type:"primary"},{default:a(()=>e[16]||(e[16]=[n("立即新建")])),_:1})]),_:1}),l(g,{class:"ml10",onClick:L},{default:a(()=>e[17]||(e[17]=[n("清空筛选条件")])),_:1})])])])]),_:1},8,["model"])]),s("div",He,[l(j,{spinning:v.value},{default:a(()=>[l($,{data:V.value,total:T.value,"row-key":"productId",onSelectionChange:N,onSortChange:B},{empty:a(()=>[s("div",Se,[v.value?c("",!0):(r(),f("div",ze,"暂无数据"))])]),default:a(()=>[l(b,{label:"标题",prop:"productId",width:250,fixed:"left","show-overflow-tooltip":""},{default:a(({row:t})=>[s("div",Ve,[t.isTop!=0?(r(),f("div",Ae,"置顶")):c("",!0),s("div",Ie,D(t.title),1)])]),_:1}),l(b,{label:"推送时间",width:200,sortable:"custom"},{default:a(({row:t})=>[n(D(t.startTime),1)]),_:1}),l(b,{label:"失效时间",width:200,sortable:"custom"},{default:a(({row:t})=>[n(D(t.endTime||"--"),1)]),_:1}),l(b,{label:"状态"},{default:a(({row:t})=>[n(D(t.statusText),1)]),_:1}),l(b,{width:160,fixed:"right",label:"操作"},{default:a(({row:t})=>[l(S,{size:0},{default:a(()=>[t.isTop!=0?(r(),y(u(H),{key:0,onAfterDelete:m,requestApi:u(h),params:{id:t.id,field:"isTop",val:0},title:"确定取消置顶吗？"},{default:a(()=>e[18]||(e[18]=[n("取消置顶")])),_:2},1032,["requestApi","params"])):c("",!0),t.isTop!=0?(r(),y(I,{key:1,direction:"vertical"})):c("",!0),l(u(q),{params:{act:"detail",id:t.id},isDrawer:"",path:"salesman/notice/Info",title:"编辑内容",width:"700px",onOkCallback:m},{default:a(()=>e[19]||(e[19]=[s("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),l(I,{direction:"vertical"}),t.isAvailable==1?(r(),y(u(H),{key:2,onAfterDelete:m,requestApi:u(h),params:{id:t.id,field:"isAvailable",val:0},title:"失效后将不可恢复，确认失效？"},{default:a(()=>e[20]||(e[20]=[n("失效")])),_:2},1032,["requestApi","params"])):(r(),y(u(H),{key:3,onAfterDelete:m,requestApi:u(ne),params:{id:t.id}},{default:a(()=>e[21]||(e[21]=[n("删除")])),_:2},1032,["requestApi","params"]))]),_:2},1024)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),T.value>0?(r(),f("div",he,[l(u(le),{page:o.page,"onUpdate:page":e[6]||(e[6]=t=>o.page=t),size:o.size,"onUpdate:size":e[7]||(e[7]=t=>o.size=t),total:T.value,onCallback:m},null,8,["page","size","total"])])):c("",!0)]),C.value.length>0?(r(),f("div",qe,[s("div",Ue,[l(S,null,{default:a(()=>[s("span",null,[e[22]||(e[22]=n("已选择：")),s("b",null,D(C.value.length),1),e[23]||(e[23]=n(" 项"))]),l(g,null,{default:a(()=>e[24]||(e[24]=[n("设置等级")])),_:1}),l(g,null,{default:a(()=>e[25]||(e[25]=[n("分组")])),_:1}),l(g,null,{default:a(()=>e[26]||(e[26]=[n("清退")])),_:1})]),_:1})])])):c("",!0)])])])}}}),Xe=se(Fe,[["__scopeId","data-v-f5db6368"]]);export{Xe as default};
