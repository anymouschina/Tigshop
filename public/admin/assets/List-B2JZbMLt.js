import{d as N,i as f,G as O,q as $,c as g,e as o,b as s,w as a,L as E,g as i,f as w,E as u,D as v,I as C,r as d,o as k}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{P as V}from"./PopFormElm-DSof3F4x.js";import{_ as G}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as K}from"./Pagination-yOfjsBuR.js";import{u as M}from"./config-DNllFJyR.js";import{g as T,b as j,u as S,d as H}from"./friendLinks-C5MQcpQ9.js";import{_ as J}from"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import{_ as L}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";import"./format-DFT-VJzO.js";const Q={class:"container"},R={class:"content_wrapper"},W={class:"lyecs-table-list-warp"},X={class:"list-table-tool lyecs-search-warp"},Y={class:"advanced-search-warp list-table-tool-row"},Z={class:"simple-form-warp"},ee={class:"simple-form-field"},te={class:"form-group"},oe={class:"control-container"},se={class:"simple-form-field"},ae={class:"form-group"},le={class:"control-container"},ie={class:"simple-form-field"},ne={class:"form-group"},re={class:"control-container"},de={key:0},pe={class:"table-container"},_e=["href"],ce={class:"empty-warp"},ue={key:0,class:"empty-bg"},me={key:0,class:"pagination-con"},ze=N({__name:"List",setup(fe){const q=M(),x=f([]),_=f(!0),m=f(0),c=f([]),n=O({page:1,size:q.get("page_size"),sort_field:"",sort_order:"",keyword:""}),r=async()=>{_.value=!0;try{const l=await T({...n});x.value=l.filter_result,m.value=l.total}catch(l){C.error(l.message)}finally{_.value=!1}};$(()=>{r()});const b=()=>{r()},z=({prop:l,order:e})=>{n.sort_field=l,n.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",r()},A=async l=>{try{const e=await j(l,{ids:c.value});C.success(e.message),r()}catch(e){C.error(e.message)}},U=l=>{c.value=l.map(e=>e.link_id)};return(l,e)=>{const h=d("el-button"),F=d("el-input"),D=d("el-popconfirm"),p=d("el-table-column"),P=d("el-divider"),B=d("el-table"),I=d("a-spin");return k(),g("div",Q,[o("div",R,[o("div",W,[o("div",X,[o("div",Y,[o("div",Z,[o("div",ee,[o("div",te,[o("div",oe,[s(F,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>n.keyword=t),name:"keyword",placeholder:"输入链接名称",onKeyup:E(b,["enter"]),clearable:"",onClear:b},{append:a(()=>[s(h,{onClick:b},{default:a(()=>e[4]||(e[4]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),o("div",se,[o("div",ae,[o("div",le,[s(i(L),{params:{act:"add"},isDrawer:"",path:"setting/friendLinks/Info",title:"添加友情链接",width:"600px",onOkCallback:r},{default:a(()=>[s(h,{type:"primary"},{default:a(()=>e[5]||(e[5]=[u("添加友情链接")])),_:1})]),_:1})])])]),o("div",ie,[o("div",ne,[o("div",re,[s(D,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=t=>A("del"))},{reference:a(()=>[s(h,{disabled:c.value.length===0},{default:a(()=>e[6]||(e[6]=[u("批量删除")])),_:1},8,["disabled"])]),_:1}),c.value.length>0?(k(),g("span",de,[e[7]||(e[7]=u(" 已选择：")),o("b",null,v(c.value.length),1),e[8]||(e[8]=u(" 项 "))])):w("",!0)])])])])])]),o("div",pe,[s(I,{spinning:_.value},{default:a(()=>[s(B,{data:x.value,loading:_.value,total:m.value,"row-key":"link_id",onSelectionChange:U,onSortChange:z},{empty:a(()=>[o("div",ce,[_.value?w("",!0):(k(),g("div",ue,"暂无数据"))])]),default:a(()=>[s(p,{type:"selection",width:"32"}),s(p,{label:"链接名称"},{default:a(({row:t})=>[s(i(V),{"org-value":t.link_title,"onUpdate:orgValue":y=>t.link_title=y,max:10,params:{id:t.link_id,field:"link_title"},requestApi:i(S),label:"链接名称",type:"input"},{default:a(()=>[o("div",null,v(t.link_title),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),s(p,{label:"链接地址",prop:"link_url"},{default:a(({row:t})=>[o("a",{href:t.link_url,target:"_blank"},v(t.link_url),9,_e)]),_:1}),s(p,{label:"链接LOGO"},{default:a(({row:t})=>[s(i(J),{src:t.link_logo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),s(p,{label:"排序",prop:"sort_order",sortable:"custom"},{default:a(({row:t})=>[s(i(V),{"org-value":t.sort_order,"onUpdate:orgValue":y=>t.sort_order=y,params:{id:t.link_id,field:"sort_order"},requestApi:i(S),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"input"},{default:a(()=>[o("div",null,v(t.sort_order),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),s(p,{width:150,fixed:"right",label:"操作"},{default:a(({row:t})=>[s(i(L),{params:{act:"detail",id:t.link_id},isDrawer:"",path:"setting/friendLinks/Info",title:"编辑配送方式",width:"600px",onOkCallback:r},{default:a(()=>e[9]||(e[9]=[o("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),s(P,{direction:"vertical"}),s(i(G),{params:{id:t.link_id},requestApi:i(H),onAfterDelete:r},{default:a(()=>e[10]||(e[10]=[u("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),m.value>0?(k(),g("div",me,[s(i(K),{page:n.page,"onUpdate:page":e[2]||(e[2]=t=>n.page=t),size:n.size,"onUpdate:size":e[3]||(e[3]=t=>n.size=t),total:m.value,onCallback:r},null,8,["page","size","total"])])):w("",!0)])])])])}}});export{ze as default};
