import{d as J,E as Q,j as p,I as W,x as X,aO as Y,r,o as n,c,e as t,b as s,w as a,f as m,h as _,K as Z,L as ee,n as w,H as z,G as h,k as I,p as te,i as se,_ as oe}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";/* empty css                                                                    */import{P as ae}from"./Pagination-8eb7b6b1.js";import{u as le}from"./config-9548fa9b.js";import{a as ne}from"./util-1ee03ed8.js";import{_ as ie}from"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import{g as ce}from"./shop-b8a8699a.js";import{S as L}from"./StatusDot-19af4eec.js";import{_ as B}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";import"./format-4e0206d3.js";const x=v=>(te("data-v-26bc38fa"),v=v(),se(),v),re={class:"container"},de={class:"content_wrapper"},_e={class:"container"},pe={class:"lyecs-table-list-warp"},ue={class:"list-table-tool lyecs-search-warp"},me={class:"advanced-search-warp list-table-tool-row"},fe={class:"simple-form-warp"},he={class:"simple-form-field"},ve={class:"form-group"},ke={class:"control-container"},ge=x(()=>t("span",{class:"iconfont icon-chakan1"},null,-1)),be={class:"simple-form-field"},ye={class:"form-group"},Ce={class:"tabs flex"},we={key:0},xe={class:"simple-form-field"},Se={class:"form-group"},Oe=x(()=>t("label",{class:"control-label"},[t("span",null,"店铺状态：")],-1)),Ve={class:"control-container"},ze={class:"simple-form-field"},Ie={class:"list-table-tool-row"},Le={class:"list-table-tool-col"},Be=x(()=>t("div",{class:"list-table-tool-col"},null,-1)),Ue={class:"table-container"},$e={key:0},De={key:0,class:"btn-link green"},Ne={key:1,class:"btn-link grey"},Me={key:3,style:{color:"red"}},Pe={key:4,style:{color:"green"}},Ee={key:0},Fe={key:1},Ke=x(()=>t("a",{class:"btn-link"},"编辑",-1)),Re=["href"],Te={class:"empty-warp"},je={key:0,class:"empty-bg"},qe={key:0,class:"pagination-con"},Ge=J({__name:"List",setup(v){const k=Q().currentRoute.value.query,D=le(),U=p([]),f=p(!1),g=p(0),N=p([]),M=p(!1),l=W({page:1,size:D.get("page_size"),sort_field:"",sort_order:"",keyword:"",status:0}),b=i=>{l.status=i,d()},d=async()=>{f.value=!0;try{const i=await ce({...l});U.value=i.filter_result,g.value=i.total}catch(i){Z.error(i.message)}finally{f.value=!1}},P=()=>{S(),d()},S=()=>{let i=window.location.href,o=new URL(i);o.search="",window.history.replaceState({},document.title,o.toString())},$=p(),y=p(0);X(()=>{d(),console.log(k),k.id&&Y.confirm(`为[${k.company_name||"--"}]立即创建店铺?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{y.value=Number(k.id),$.value.show()}).catch(()=>{y.value=0,S()})});const E=()=>{y.value=0,S()},O=()=>{d()},F=({prop:i,order:o})=>{l.sort_field=i,l.sort_order=o=="ascending"?"asc":o=="descending"?"desc":"",d()},K=i=>{N.value=i.map(o=>o.shop_id)};return(i,o)=>{const V=r("el-button"),R=r("el-input"),C=r("el-option"),T=r("el-select"),j=r("el-space"),q=r("el-form"),u=r("el-table-column"),G=r("el-divider"),A=r("el-table"),H=r("a-spin");return n(),c("div",re,[t("div",de,[t("div",_e,[t("div",pe,[t("div",ue,[s(q,{model:l},{default:a(()=>[t("div",me,[t("div",fe,[t("div",he,[t("div",ve,[t("div",ke,[s(R,{modelValue:l.keyword,"onUpdate:modelValue":o[0]||(o[0]=e=>l.keyword=e),name:"keyword",placeholder:"输入店铺/会员名称",onKeyup:ee(O,["enter"])},{append:a(()=>[s(V,{onClick:O},{default:a(()=>[ge]),_:1})]),_:1},8,["modelValue"])])])]),t("div",be,[t("div",ye,[t("div",Ce,[t("div",{class:w(["item",l.status==0?"active":""]),onClick:o[1]||(o[1]=e=>b(0))},"全部",2),t("div",{class:w(["item",l.status==1?"active":""]),onClick:o[2]||(o[2]=e=>b(1))},"开业",2),t("div",{class:w(["item",l.status==4?"active":""]),onClick:o[3]||(o[3]=e=>b(4))},"暂停运营",2),t("div",{class:w(["item",l.status==10?"active":""]),onClick:o[4]||(o[4]=e=>b(10))},"打烊",2)])])]),M.value?(n(),c("div",we,[t("div",xe,[t("div",Se,[Oe,t("div",Ve,[s(T,{modelValue:l.status,"onUpdate:modelValue":o[5]||(o[5]=e=>l.status=e),clearable:""},{default:a(()=>[s(C,{value:0,label:"全部"}),s(C,{value:1,label:"运营中"}),s(C,{value:4,label:"暂停运营"}),s(C,{value:10,label:"打烊"})]),_:1},8,["modelValue"])])])]),t("div",ze,[s(V,{type:"primary",onClick:O},{default:a(()=>[z("搜索")]),_:1})])])):_("",!0)])]),t("div",Ie,[t("div",Le,[s(j,null,{default:a(()=>[s(m(B),{ref_key:"dialogForm",ref:$,params:{act:"add",id:y.value},isDrawer:"",path:"shop/shop/Add",title:"新增店铺",width:"800px",onCloseCallback:E,onOkCallback:P},{default:a(()=>[s(V,{type:"primary"},{default:a(()=>[z("新增店铺")]),_:1})]),_:1},8,["params"])]),_:1})]),Be])]),_:1},8,["model"])]),t("div",Ue,[s(H,{spinning:f.value},{default:a(()=>[s(A,{data:U.value,loading:f.value,total:g.value,"row-key":"shop_id",onSelectionChange:K,onSortChange:F},{empty:a(()=>[t("div",Te,[f.value?_("",!0):(n(),c("div",je,"暂无数据"))])]),default:a(()=>[s(u,{label:"店铺名称"},{default:a(({row:e})=>[z(h(e.shop_title||"--"),1)]),_:1}),s(u,{label:"店铺LOGO"},{default:a(({row:e})=>[s(m(ie),{src:e.shop_logo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),s(u,{label:"商户名称",width:200},{default:a(({row:e})=>[e.merchant?(n(),c("div",$e,[t("span",null,h(e.merchant.corporate_name||"--"),1),s(m(B),{params:{act:"detail",id:e.merchant.merchant_id},isDrawer:"",path:"adminMerchant/merchant/Info",title:"商户详情",width:"600px",showClose:!1,showOnOk:!1,onOkCallback:d},{default:a(()=>[e.merchant.status==1?(n(),c("a",De,"(已认证)")):(n(),c("a",Ne,"(未认证)"))]),_:2},1032,["params"])])):_("",!0)]),_:1}),s(u,{label:"店铺状态",sortable:"custom"},{default:a(({row:e})=>[e.status==10?(n(),I(L,{key:0,color:"red",flicker:!0})):_("",!0),e.status==4?(n(),I(L,{key:1,color:"red",flicker:!0})):_("",!0),e.status==1?(n(),I(L,{key:2,color:"green",flicker:!0})):_("",!0),e.status===10||e.status===4?(n(),c("span",Me,h(e.status_text),1)):e.status===1?(n(),c("span",Pe,h(e.status_text),1)):_("",!0)]),_:1}),s(u,{label:"店铺管理员",align:"center"},{default:a(({row:e})=>[e.admin?(n(),c("div",Ee,[t("p",null,h(e.admin.username),1)])):(n(),c("div",Fe,"--"))]),_:1}),s(u,{width:120,fixed:"right",label:"操作"},{default:a(({row:e})=>[s(m(B),{params:{act:"detail",id:e.shop_id},isDrawer:"",path:"shop/shop/Info",title:"编辑店铺",width:"700px",onOkCallback:d},{default:a(()=>[Ke]),_:2},1032,["params"]),s(G,{direction:"vertical"}),t("a",{href:m(ne)("shop",e.shop_id),target:"_blank",class:"btn-link"},"查看店铺",8,Re)]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),g.value>0?(n(),c("div",qe,[s(m(ae),{page:l.page,"onUpdate:page":o[6]||(o[6]=e=>l.page=e),size:l.size,"onUpdate:size":o[7]||(o[7]=e=>l.size=e),total:g.value,onCallback:d},null,8,["page","size","total"])])):_("",!0)])])])])])}}});const lt=oe(Ge,[["__scopeId","data-v-26bc38fa"]]);export{lt as default};
