import{d as q,C as E,i as c,G as R,q as F,aQ as K,c as l,e as o,f,b as s,w as a,L as O,g as S,I as w,r as p,o as i,E as _,D as d,_ as $}from"./index-CGYuOau0.js";/* empty css             *//* empty css                                                                    */import{P as j}from"./Pagination-yOfjsBuR.js";import{u as A}from"./config-DNllFJyR.js";import{d as G,c as Q}from"./shop-Daw3OFCx.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";/* empty css                                                                  *//* empty css                                                                              */import{S as H}from"./SelectTimeInterval-BYQIPzkk.js";import"./config-DU8_t5BN.js";import"./time-ClyPenjC.js";const J={class:"container"},W={class:"content_wrapper"},X={class:"container"},Z={class:"lyecs-table-list-warp"},ee={class:"list-table-tool lyecs-search-warp"},te={class:"advanced-search-warp list-table-tool-row"},oe={class:"simple-form-warp"},se={class:"simple-form-field"},ne={class:"form-group"},ae={class:"control-container"},le={class:"simple-form-field"},ie={class:"form-group"},re={class:"control-container"},de={class:"simple-form-field"},ce={class:"table-container"},pe={key:0,style:{color:"#0000ff"}},_e={key:1,style:{color:"#ff0000"}},me={key:2},ue={key:3,style:{color:"#999","font-size":"12px"}},fe={key:0,style:{color:"#0000ff"}},ye={key:1,style:{color:"#ff0000"}},ve={key:2},he={key:3,style:{color:"#999","font-size":"12px"}},ge={class:"empty-warp"},be={key:0,class:"empty-bg"},ke={key:0,class:"pagination-con"},we={key:0,class:"selected-action-warp"},ze={class:"selected-action"},Ce=q({__name:"List",props:{shop_id:{type:Number,default:0}},setup(x){const y=E().currentRoute.value.query,U=x,B=A(),z=c([]),m=c(!1),v=c(0),b=c([]);c(!1);const n=R({page:1,size:B.get("page_size"),sort_field:"",sort_order:"",keyword:"",shop_id:U.shop_id||-1,end_time:"",start_time:""}),u=async()=>{m.value=!0;try{const r=await G({...n});z.value=r.filter_result,v.value=r.total}catch(r){w.error(r.message)}finally{m.value=!1}},V=()=>{let r=window.location.href,e=new URL(r);e.search="",window.history.replaceState({},document.title,e.toString())},D=c(),C=c(0);F(()=>{u(),console.log(y),y.id&&K.confirm(`为[${y.company_name||"--"}]立即创建店铺?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{C.value=Number(y.id),D.value.show()}).catch(()=>{C.value=0,V()})});const h=()=>{u()},N=({prop:r,order:e})=>{n.sort_field=r,n.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",u()},L=async r=>{try{const e=await Q(r,{ids:b.value});w.success(e.message),u()}catch(e){w.error(e.message)}};return(r,e)=>{const k=p("el-button"),M=p("el-input"),g=p("el-table-column"),I=p("el-table"),P=p("a-spin"),T=p("el-popconfirm"),Y=p("el-space");return i(),l("div",J,[o("div",W,[o("div",X,[o("div",Z,[o("div",ee,[o("div",te,[o("div",oe,[o("div",se,[o("div",ne,[o("div",ae,[s(M,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>n.keyword=t),name:"keyword",placeholder:"输入店铺名称",onKeyup:O(h,["enter"]),clearable:"",onClear:h},{append:a(()=>[s(k,{onClick:h},{default:a(()=>e[6]||(e[6]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),o("div",le,[o("div",ie,[e[7]||(e[7]=o("label",{class:"control-label"},[o("span",null,"时间范围：")],-1)),o("div",re,[s(S(H),{"end-date":n.end_time,"onUpdate:endDate":e[1]||(e[1]=t=>n.end_time=t),"start-date":n.start_time,"onUpdate:startDate":e[2]||(e[2]=t=>n.start_time=t),clearable:!1,type:"date","value-format":"YYYY-MM-DD"},null,8,["end-date","start-date"])])])]),o("div",de,[s(k,{type:"primary",onClick:h},{default:a(()=>e[8]||(e[8]=[_("搜索")])),_:1})])])])]),o("div",ce,[s(P,{spinning:m.value},{default:a(()=>[s(I,{data:z.value,loading:m.value,total:v.value,"row-key":"shop_id",onSortChange:N},{empty:a(()=>[o("div",ge,[m.value?f("",!0):(i(),l("div",be,"暂无数据"))])]),default:a(()=>[s(g,{label:"账户变动时间"},{default:a(({row:t})=>[_(d(t.add_time||"--"),1)]),_:1}),s(g,{label:"店铺名称"},{default:a(({row:t})=>[_(d(t.shop_title||"--"),1)]),_:1}),s(g,{label:"变动资金账户"},{default:a(({row:t})=>[t.type==1?(i(),l("span",pe,"+"+d(t.shop_money),1)):t.type==2?(i(),l("span",_e,"-"+d(t.shop_money),1)):(i(),l("span",me,d(t.shop_money),1)),t.new_shop_money?(i(),l("span",ue,"（变更后金额:"+d(t.new_shop_money)+"）",1)):f("",!0)]),_:1}),s(g,{label:"冻结资金账户",width:"250"},{default:a(({row:t})=>[t.type==1?(i(),l("span",fe,"+"+d(t.frozen_money),1)):t.type==2?(i(),l("span",ye,"-"+d(t.frozen_money),1)):(i(),l("span",ve,d(t.frozen_money),1)),t.new_frozen_money?(i(),l("span",he,"（变更后金额:"+d(t.new_frozen_money)+"）",1)):f("",!0)]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),v.value>0?(i(),l("div",ke,[s(S(j),{page:n.page,"onUpdate:page":e[3]||(e[3]=t=>n.page=t),size:n.size,"onUpdate:size":e[4]||(e[4]=t=>n.size=t),total:v.value,onCallback:u},null,8,["page","size","total"])])):f("",!0)]),b.value.length>0?(i(),l("div",we,[o("div",ze,[s(Y,null,{default:a(()=>[o("span",null,[e[9]||(e[9]=_("已选择：")),o("b",null,d(b.value.length),1),e[10]||(e[10]=_(" 项"))]),s(T,{title:"您确认要批量删除所选数据吗？",onConfirm:e[5]||(e[5]=t=>L("del"))},{reference:a(()=>[s(k,null,{default:a(()=>e[11]||(e[11]=[_("批量删除")])),_:1})]),_:1})]),_:1})])])):f("",!0)])])])])}}}),qe=$(Ce,[["__scopeId","data-v-8468e75c"]]);export{qe as default};
