import{d as F,K as B,i as f,G as K,q as L,c as v,e as t,b as s,w as o,M as T,g as i,f as k,E as m,D as N,I as w,r as p,o as g}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{P as $}from"./PopFormElm-BZp1_Wme.js";import{_ as E}from"./Switch.vue_vue_type_script_setup_true_lang-C5nzofSO.js";import{D as M}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as G}from"./Pagination-wR9huHyl.js";import{g as R,b as j,u as x,d as H}from"./suppliers-3WgS75E0.js";import{_ as C}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const J={class:"container"},Q={class:"content_wrapper"},W={class:"lyecs-table-list-warp"},X={class:"list-table-tool lyecs-search-warp"},Y={class:"advanced-search-warp list-table-tool-row"},Z={class:"simple-form-warp"},ee={class:"simple-form-field"},te={class:"form-group"},se={class:"control-container"},ae={class:"simple-form-field"},oe={class:"form-group"},le={class:"control-container"},ie={class:"simple-form-field"},ne={class:"form-group"},re={class:"control-container"},pe={key:0},de={class:"table-container"},ce={class:"empty-warp"},ue={key:0,class:"empty-bg"},me={key:0,class:"pagination-con"},Ie=F({__name:"List",setup(_e){const V=B(),S=f([]),c=f(!0),_=f(0),u=f([]),n=K({page:1,size:V.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),r=async()=>{c.value=!0;try{const l=await R({...n});S.value=l.records,_.value=l.total}catch(l){w.error(l.message)}finally{c.value=!1}};L(()=>{r()});const h=()=>{r()},D=({prop:l,order:e})=>{n.sortField=l,n.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",r()},U=async l=>{try{const e=await j(l,{ids:u.value});w.success("操作成功"),r()}catch(e){w.error(e.message)}},q=l=>{u.value=l.map(e=>e.suppliersId)};return(l,e)=>{const b=p("el-button"),z=p("TigInput"),A=p("el-popconfirm"),d=p("el-table-column"),I=p("el-divider"),O=p("el-table"),P=p("a-spin");return g(),v("div",J,[t("div",Q,[t("div",W,[t("div",X,[e[9]||(e[9]=t("div",{class:"notice-warp"},[t("p",null,"- 添加供应商后，您可以在商品编辑中，设置商品所属供应商"),t("p",null,"- 供应商可通过其管理员账号，登录管理员后台，权限默认为处理订单和退货"),t("p",null,"- 供应商只能看到有自己所属商品的订单，且只能对其所属商品进行发货操作")],-1)),t("div",Y,[t("div",Z,[t("div",ee,[t("div",te,[t("div",se,[s(z,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>n.keyword=a),name:"keyword",placeholder:"输入关键词",onKeyup:T(h,["enter"]),clearable:"",onClear:h},{append:o(()=>[s(b,{onClick:h},{default:o(()=>e[4]||(e[4]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",ae,[t("div",oe,[t("div",le,[s(i(C),{params:{act:"add"},isDrawer:"",path:"authority/suppliers/Info",title:"添加供应商",width:"580px",onOkCallback:r},{default:o(()=>[s(b,{type:"primary"},{default:o(()=>e[5]||(e[5]=[m("添加供应商")])),_:1})]),_:1})])])]),t("div",ie,[t("div",ne,[t("div",re,[s(A,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=a=>U("del"))},{reference:o(()=>[s(b,{disabled:u.value.length===0},{default:o(()=>e[6]||(e[6]=[m("批量删除")])),_:1},8,["disabled"])]),_:1}),u.value.length>0?(g(),v("span",pe,[e[7]||(e[7]=m(" 已选择：")),t("b",null,N(u.value.length),1),e[8]||(e[8]=m(" 项 "))])):k("",!0)])])])])])]),t("div",de,[s(P,{spinning:c.value},{default:o(()=>[s(O,{data:S.value,loading:c.value,total:_.value,"row-key":"suppliersId",onSelectionChange:q,onSortChange:D},{empty:o(()=>[t("div",ce,[c.value?k("",!0):(g(),v("div",ue,"暂无数据"))])]),default:o(()=>[s(d,{type:"selection",width:"32"}),s(d,{label:"供应商名称",width:"200"},{default:o(({row:a})=>[s(i($),{"org-value":a.suppliersName,"onUpdate:orgValue":y=>a.suppliersName=y,max:10,params:{id:a.suppliersId,field:"suppliersName"},requestApi:i(x),label:"权限组名称",type:"input"},{default:o(()=>[t("div",null,N(a.suppliersName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),s(d,{label:"负责人姓名",prop:"contactName"}),s(d,{label:"负责人联系方式",prop:"contactPhone"}),s(d,{label:"供应商状态"},{default:o(({row:a})=>[s(i(E),{checked:a.isCheck,"onUpdate:checked":y=>a.isCheck=y,params:{id:a.suppliersId,field:"isCheck"},requestApi:i(x)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),s(d,{width:180,fixed:"right",label:"操作"},{default:o(({row:a})=>[s(i(C),{params:{act:"detail",id:a.suppliersId},isDrawer:"",path:"authority/suppliers/Info",title:"编辑供应商",width:"580px",onOkCallback:r},{default:o(()=>e[10]||(e[10]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),s(I,{direction:"vertical"}),s(i(C),{params:{act:"suppliers",id:a.suppliersId},showOnOk:!1,isDrawer:"",path:"authority/adminUser/List",title:a.suppliersName+" - 账号管理",width:"1000px"},{default:o(()=>e[11]||(e[11]=[t("a",{class:"btn-link"},"账号管理",-1)])),_:2},1032,["params","title"]),s(I,{direction:"vertical"}),s(i(M),{params:{id:a.suppliersId},requestApi:i(H),onAfterDelete:r},{default:o(()=>e[12]||(e[12]=[m("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),_.value>0?(g(),v("div",me,[s(i(G),{page:n.page,"onUpdate:page":e[2]||(e[2]=a=>n.page=a),size:n.size,"onUpdate:size":e[3]||(e[3]=a=>n.size=a),total:_.value,onCallback:r},null,8,["page","size","total"])])):k("",!0)])])])])}}});export{Ie as default};
