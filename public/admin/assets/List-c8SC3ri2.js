import{d as B,K as q,i as b,G as A,q as G,c as y,e as t,f as M,b as a,w as o,g as f,I as W,r as i,o as C,M as O,E as n,D as _,L as w,_ as j}from"./index-DrbzVNl6.js";/* empty css             */import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import"./index-CeQDmMxd.js";import{p as H}from"./format-CRgx78oe.js";/* empty css                                                                    */import{P as J}from"./Pagination-wR9huHyl.js";/* empty css                                                                  *//* empty css                                                                              */import{S as Q}from"./SelectTimeInterval-C-WvSG46.js";import{_ as R,a as X}from"./SelectPromoteMode.vue_vue_type_script_setup_true_lang-Dh0LT81A.js";import{g as Z}from"./promoter-Ccr6u1Ol.js";import{f as c}from"./time-Bh5UhrfW.js";import{_ as T}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./subgroup-OjPHbSXS.js";import"./promoteMode-DGHbX5Kd.js";const ee={class:"container"},te={class:"content_wrapper"},le={class:"lyecs-table-list-warp"},ae={class:"list-table-tool lyecs-search-warp"},oe={class:"advanced-search-warp list-table-tool-row"},se={class:"simple-form-warp"},ne={class:"simple-form-field",style:{"margin-right":"10px"}},de={class:"form-group"},ie={class:"simple-form-field"},re={class:"form-group"},me={class:"control-container flex flex-align-center"},pe={style:{"margin-left":"10px"}},ue={class:"simple-form-field"},fe={class:"form-group"},_e={class:"control-container"},ce={class:"simple-form-field"},ve={class:"form-group"},be={class:"control-container"},ge={class:"simple-form-field"},we={class:"form-group"},Ye={class:"control-container"},De={class:"simple-form-field"},ye={class:"advanced-search-warp list-table-tool-row"},Ce={class:"simple-form-warp"},ke={class:"simple-form-field"},Ie={class:"table-container"},Me={class:"empty-warp"},Te={key:0,class:"empty-bg"},xe={key:0,class:"pagination-con"},Se={key:0,class:"selected-action-warp"},Ve={class:"selected-action"},Ue=B({__name:"List",setup(Ee){const h=q(),x=b([]),Y=b(!0),D=b(0);b(0);const k=b([]),s=A({page:1,size:h.pageSize,sortField:"",sortOrder:"",mobile:"",pidMobile:"",level:"",groupId:"",addTimeStart:"",addTimeEnd:""}),I=b(-1),S=d=>{if(d===-1){I.value=d;return}s.addTimeStart=c(new Date,"YYYY-MM-DD"),d===0&&(s.addTimeEnd=c(new Date,"YYYY-MM-DD")),d===1&&(s.addTimeStart=c(w(1,"sub"),"YYYY-MM-DD"),s.addTimeEnd=c(w(1,"sub"),"YYYY-MM-DD")),d===2&&(s.addTimeEnd=c(w(7,"add"),"YYYY-MM-DD")),d===3&&(s.addTimeEnd=c(w(30,"add"),"YYYY-MM-DD")),d===4&&(s.addTimeEnd=c(w(180,"add"),"YYYY-MM-DD")),r()},r=async()=>{Y.value=!0;try{const d=await Z({...s});x.value=d.records,D.value=d.total}catch(d){W.error(d.message)}finally{Y.value=!1}};G(()=>{r()});const m=()=>{r()},z=({prop:d,order:e})=>{s.sortField=d,s.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",r()},N=d=>{k.value=d.map(e=>e.salesmanId)};return(d,e)=>{const v=i("el-button"),V=i("TigInput"),g=i("el-radio-button"),F=i("el-radio-group"),K=i("el-form"),p=i("el-table-column"),L=i("el-divider"),U=i("el-space"),P=i("el-table"),$=i("a-spin");return C(),y("div",ee,[t("div",te,[t("div",le,[t("div",ae,[a(K,{model:s,name:"form"},{default:o(()=>[t("div",oe,[t("div",se,[t("div",ne,[t("div",de,[a(V,{modelValue:s.mobile,"onUpdate:modelValue":e[0]||(e[0]=l=>s.mobile=l),name:"mobile",placeholder:"输入分销员手机号或昵称",onKeyup:O(m,["enter"]),clearable:"",onClear:m},{append:o(()=>[a(v,{onClick:m},{default:o(()=>e[10]||(e[10]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])]),t("div",ie,[t("div",re,[e[16]||(e[16]=t("label",{class:"control-label"},[t("span",null,"加入时间：")],-1)),t("div",me,[a(f(Q),{type:"date","start-date":s.addTimeStart,"onUpdate:startDate":e[1]||(e[1]=l=>s.addTimeStart=l),"end-date":s.addTimeEnd,"onUpdate:endDate":e[2]||(e[2]=l=>s.addTimeEnd=l),onCallback:e[3]||(e[3]=l=>S(-1))},null,8,["start-date","end-date"]),t("div",pe,[a(F,{class:"itemWidth",modelValue:I.value,"onUpdate:modelValue":e[4]||(e[4]=l=>I.value=l),onChange:S},{default:o(()=>[a(g,{value:0},{default:o(()=>e[11]||(e[11]=[n("今天")])),_:1}),a(g,{value:1},{default:o(()=>e[12]||(e[12]=[n("昨天")])),_:1}),a(g,{value:2},{default:o(()=>e[13]||(e[13]=[n("近7天")])),_:1}),a(g,{value:3},{default:o(()=>e[14]||(e[14]=[n("近30天")])),_:1}),a(g,{value:4},{default:o(()=>e[15]||(e[15]=[n("近半年")])),_:1})]),_:1},8,["modelValue"])])])])]),t("div",ue,[t("div",fe,[e[17]||(e[17]=t("label",{class:"control-label"},[t("span",null,"邀请方：")],-1)),t("div",_e,[a(V,{modelValue:s.pidMobile,"onUpdate:modelValue":e[5]||(e[5]=l=>s.pidMobile=l),name:"pidMobile",placeholder:"请输入手机号",onKeyup:O(m,["enter"]),clearable:"",onClear:m},null,8,["modelValue"])])])]),t("div",ce,[t("div",ve,[e[18]||(e[18]=t("label",{class:"control-label"},[t("span",null,"分组：")],-1)),t("div",be,[a(f(R),{groupId:s.groupId,"onUpdate:groupId":e[6]||(e[6]=l=>s.groupId=l),onOnChange:m},null,8,["groupId"])])])]),t("div",ge,[t("div",we,[e[19]||(e[19]=t("label",{class:"control-label"},[t("span",null,"等级：")],-1)),t("div",Ye,[a(f(X),{level:s.level,"onUpdate:level":e[7]||(e[7]=l=>s.level=l),onOnChange:m},null,8,["level"])])])]),t("div",De,[a(v,{type:"primary",onClick:m},{default:o(()=>e[20]||(e[20]=[n("搜索")])),_:1})])])]),t("div",ye,[t("div",Ce,[t("div",ke,[a(f(T),{params:{act:"add"},isDrawer:"",path:"salesman/promoter/Info",title:"添加分销员",width:"550px",onOkCallback:r},{default:o(()=>[a(v,{type:"primary"},{default:o(()=>e[21]||(e[21]=[n("添加分销员")])),_:1})]),_:1})])])])]),_:1},8,["model"])]),t("div",Ie,[a($,{spinning:Y.value},{default:o(()=>[a(P,{data:x.value,total:D.value,"row-key":"salesmanId",onSelectionChange:N,onSortChange:z},{empty:o(()=>[t("div",Me,[Y.value?M("",!0):(C(),y("div",Te,"暂无数据"))])]),default:o(()=>[a(p,{label:"昵称",prop:"salesmanId",width:140,fixed:"left"},{default:o(({row:l})=>{var u,E;return[n(_(((u=l.baseUserInfo)==null?void 0:u.nickname)||((E=l.baseUserInfo)==null?void 0:E.username)),1)]}),_:1}),a(p,{label:"手机号",width:140,fixed:"left"},{default:o(({row:l})=>{var u;return[n(_(((u=l.baseUserInfo)==null?void 0:u.mobile)||"--"),1)]}),_:1}),a(p,{label:"等级"},{default:o(({row:l})=>[n(_(l.levelText||"--"),1)]),_:1}),a(p,{label:"分组"},{default:o(({row:l})=>{var u;return[n(_(((u=l.groupInfo)==null?void 0:u.groupName)||"--"),1)]}),_:1}),a(p,{label:"邀请方"},{default:o(({row:l})=>[n(_(l.pidMobile||"--"),1)]),_:1}),a(p,{label:"累计销售额(元)",sortable:"custom",width:160},{default:o(({row:l})=>[n(_(f(H)(l.saleAmount)),1)]),_:1}),a(p,{label:"加入时间",sortable:"custom"},{default:o(({row:l})=>[n(_(l.addTime),1)]),_:1}),a(p,{width:120,fixed:"right",label:"操作"},{default:o(({row:l})=>[a(U,{size:0},{default:o(()=>[a(f(T),{maskClose:!1,showClose:!1,showOnOk:!1,params:{act:"detail",id:l.salesmanId},dialogClass:"noPadding",isDrawer:"",path:"salesman/promoter/Detail",title:"分销员详情",width:"900px",onOkCallback:r},{default:o(()=>e[22]||(e[22]=[t("a",{class:"btn-link"},"详情",-1)])),_:2},1032,["params"]),a(L,{direction:"vertical"}),a(f(T),{maskClose:!1,params:{act:"detail",id:l.salesmanId},isDrawer:"",path:"salesman/promoter/Info",title:"编辑分销员",width:"550px",onOkCallback:r},{default:o(()=>e[23]||(e[23]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])]),_:2},1024)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),D.value>0?(C(),y("div",xe,[a(f(J),{page:s.page,"onUpdate:page":e[8]||(e[8]=l=>s.page=l),size:s.size,"onUpdate:size":e[9]||(e[9]=l=>s.size=l),total:D.value,onCallback:r},null,8,["page","size","total"])])):M("",!0)]),k.value.length>0?(C(),y("div",Se,[t("div",Ve,[a(U,null,{default:o(()=>[t("span",null,[e[24]||(e[24]=n("已选择：")),t("b",null,_(k.value.length),1),e[25]||(e[25]=n(" 项"))]),a(v,null,{default:o(()=>e[26]||(e[26]=[n("设置等级")])),_:1}),a(v,null,{default:o(()=>e[27]||(e[27]=[n("分组")])),_:1}),a(v,null,{default:o(()=>e[28]||(e[28]=[n("清退")])),_:1})]),_:1})])])):M("",!0)])])])}}}),Je=j(Ue,[["__scopeId","data-v-66e1e136"]]);export{Je as default};
