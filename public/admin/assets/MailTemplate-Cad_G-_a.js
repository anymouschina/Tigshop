/* empty css             */import{y as h,d as M,i as m,s as S,p as B,q as N,c as _,e as f,b as o,w as s,I as v,r as n,o as r,f as R,F as U,a as q,j as E,g as I,E as z,_ as O}from"./index-CGYuOau0.js";import{_ as $}from"./Editor.vue_vue_type_script_setup_true_lang-BBcTD5Hp.js";import"./index.esm-WCz80Rui.js";import"./index-B-GURfkM.js";import"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";const A=()=>h({url:"setting/mail_templates/list",method:"get"}),D=b=>h({url:"setting/mail_templates/update",method:"post",data:b}),G={class:"container"},H={class:"content_wrapper"},J={class:"lyecs-form-table"},K={key:0,class:"selected-action-warp"},P={class:"selected-action",style:{"padding-left":"80px"}},Q=M({__name:"MailTemplate",emits:["submitCallback","update:confirmLoading","close"],setup(b,{expose:w,emit:V}){const p=V,k=m(!1),u=m(!0),g=S(),t=m({template_name:"",template_id:0}),i=m([]),x=async()=>{var a;try{const e=await A();i.value=e.filter_result,i.value&&((a=i.value)==null?void 0:a.length)>0&&(t.value.template_id=i.value[0].template_id)}catch(e){v.error(e.message)}finally{u.value=!1}};B(()=>t.value.template_id,a=>{const e=i.value.find(c=>c.template_id==a);e&&Object.assign(t.value,e)}),N(()=>{x()});const y=async()=>{await g.value.validate();try{p("update:confirmLoading",!0);const a=await D({id:t.value.template_id,...t.value});p("submitCallback",a),v.success(a.message)}catch(a){v.error(a.message)}finally{p("update:confirmLoading",!1)}};return w({onFormSubmit:()=>{y()}}),(a,e)=>{const c=n("el-option"),C=n("el-select"),d=n("el-form-item"),L=n("el-input"),T=n("el-form"),j=n("el-button"),F=n("a-spin");return r(),_("div",G,[f("div",H,[f("div",J,[o(F,{spinning:u.value},{default:s(()=>[o(T,{ref_key:"formRef",ref:g,model:t.value,"label-width":"auto"},{default:s(()=>[o(d,{label:"邮件模板",prop:"selTemplate"},{default:s(()=>[o(C,{modelValue:t.value.template_id,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.template_id=l),style:{width:"100%"}},{default:s(()=>[(r(!0),_(U,null,q(i.value,l=>(r(),E(c,{key:l.template_id,label:l.template_name,value:l.template_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"邮件主题",prop:"template_subject"},{default:s(()=>[o(L,{modelValue:t.value.template_subject,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.template_subject=l),type:"text"},null,8,["modelValue"])]),_:1}),o(d,{label:"邮件内容",prop:"template_content"},{default:s(()=>[o(I($),{html:t.value.template_content,"onUpdate:html":e[2]||(e[2]=l=>t.value.template_content=l)},null,8,["html"])]),_:1})]),_:1},8,["model"]),u.value?R("",!0):(r(),_("div",K,[f("div",P,[o(j,{loading:k.value,class:"form-submit-btn",size:"large",type:"primary",onClick:y},{default:s(()=>e[3]||(e[3]=[z("提 交")])),_:1},8,["loading"])])]))]),_:1},8,["spinning"])])])])}}}),ne=O(Q,[["__scopeId","data-v-1d79413e"]]);export{ne as default};
