/* empty css             */import"./index-B-GURfkM.js";import{P as U}from"./PopFormElm-DSof3F4x.js";import{_ as j}from"./Switch.vue_vue_type_script_setup_true_lang-CKSPWIQL.js";import{_ as G}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as M}from"./Pagination-yOfjsBuR.js";import{u as H}from"./config-DNllFJyR.js";import{a as J,u as A,d as K,b as Q}from"./region-dYomvalu.js";import{d as W,dt as X,i as d,G as Y,q as Z,c as k,e as n,b as a,w as o,f as C,g as l,I as S,r as p,o as v,j as ee,E as c,D as x}from"./index-CGYuOau0.js";import{_ as V}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const te={class:"container"},ae={class:"content_wrapper"},oe={class:"lyecs-table-list-warp"},ne={class:"list-table-tool lyecs-search-warp"},se={class:"list-table-tool-row"},ie={class:"list-table-tool-col"},le={key:1},re={class:"table-container"},de={style:{position:"relative"}},pe=["onClick"],_e={class:"empty-warp"},ue={key:0,class:"empty-bg"},ce={key:0,class:"pagination-con"},we=W({__name:"List",setup(me){X();const P=H(),q=d([]),m=d(!0),b=d(0),g=d([]);d(!1);const s=Y({page:1,size:P.get("page_size"),sort_field:"",sort_order:"",keyword:"",parent_id:0}),h=d([]),y=d([]),D=()=>{r()},r=async i=>{m.value=!0;try{i&&typeof i=="number"&&(s.parent_id=i);const e=await J({...s});q.value=e.filter_result,b.value=e.total}catch(e){S.error(e.message)}finally{m.value=!1}};Z(()=>{r()});const w=d(""),$=(i,e,u)=>{h.value.push(i),y.value.push(u),s.parent_id=e,w.value=u,r()},B=()=>{s.parent_id=h.value[h.value.length-1],w.value=y.value[y.value.length-1],h.value.pop(),y.value.pop(),r()},I=({prop:i,order:e})=>{s.sort_field=i,s.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",r()},N=async i=>{try{const e=await Q(i,{ids:g.value});S.success(e.message),r()}catch(e){S.error(e.message)}},F=i=>{g.value=i.map(e=>e.region_id)};return(i,e)=>{const u=p("el-button"),R=p("el-popconfirm"),E=p("el-space"),L=p("el-form"),f=p("el-table-column"),z=p("el-divider"),O=p("el-table"),T=p("a-spin");return v(),k("div",te,[n("div",ae,[n("div",oe,[n("div",ne,[a(L,{model:s},{default:o(()=>[n("div",se,[n("div",ie,[a(E,null,{default:o(()=>[s.parent_id>0?(v(),ee(u,{key:0,onClick:B},{default:o(()=>e[3]||(e[3]=[n("i",{class:"iconfont icon-fanhui",style:{"font-size":"14px","padding-right":"5px"}},null,-1),c(" 返回上一级 ")])),_:1})):C("",!0),a(l(V),{params:{act:"add",region_id:s.parent_id},isDrawer:"",path:"setting/region/Info",title:"添加地区",width:"600px",onOkCallback:r},{default:o(()=>[a(u,{type:"primary"},{default:o(()=>e[4]||(e[4]=[c("添加地区")])),_:1})]),_:1},8,["params"]),a(R,{title:"您确认要批量删除所选数据吗？",onConfirm:e[0]||(e[0]=t=>N("del"))},{reference:o(()=>[a(u,{disabled:g.value.length===0},{default:o(()=>e[5]||(e[5]=[c("批量删除")])),_:1},8,["disabled"])]),_:1}),g.value.length>0?(v(),k("span",le,[e[6]||(e[6]=c(" 已选择：")),n("b",null,x(g.value.length),1),e[7]||(e[7]=c(" 项 "))])):C("",!0)]),_:1})])])]),_:1},8,["model"])]),n("div",re,[a(T,{spinning:m.value},{default:o(()=>[a(O,{data:q.value,loading:m.value,total:b.value,"row-key":"region_id",onSelectionChange:F,onSortChange:I},{empty:o(()=>[n("div",_e,[m.value?C("",!0):(v(),k("div",ue,"暂无数据"))])]),default:o(()=>[a(f,{type:"selection",width:"32"}),a(f,{width:200,label:"地区名称",prop:"region_id",sortable:"custom"},{default:o(({row:t})=>[n("div",de,[a(l(U),{"org-value":t.region_name,"onUpdate:orgValue":_=>t.region_name=_,max:10,params:{id:t.region_id,field:"region_name"},requestApi:l(A),label:"地区名称",type:"textarea"},{default:o(()=>[n("div",null,x(t.region_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])])]),_:1}),a(f,{label:"首字母"},{default:o(({row:t})=>[a(l(U),{"org-value":t.first_word,"onUpdate:orgValue":_=>t.first_word=_,len:1,params:{id:t.region_id,field:"first_word"},requestApi:l(A),label:"首字母",type:"input"},{default:o(()=>[n("div",null,x(t.first_word||"-"),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),a(f,{label:"是否热门"},{default:o(({row:t})=>[a(l(j),{checked:t.is_hot,"onUpdate:checked":_=>t.is_hot=_,params:{id:t.region_id,field:"is_hot"},requestApi:l(A)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),a(f,{width:200,fixed:"right",label:"操作"},{default:o(({row:t})=>[n("a",{class:"btn-link",onClick:_=>$(t.parent_id,t.region_id,t.region_name)},"子地区",8,pe),a(z,{direction:"vertical"}),a(l(V),{params:{act:"add",region_id:t.region_id},isDrawer:"",path:"setting/region/Info",title:"添加子地区",width:"600",onOkCallback:r},{default:o(()=>e[8]||(e[8]=[n("a",{class:"btn-link"},"添加子地区",-1)])),_:2},1032,["params"]),a(z,{direction:"vertical"}),a(l(G),{params:{id:t.region_id},requestApi:l(K),onAfterDelete:_=>r(t.parent_id)},{default:o(()=>e[9]||(e[9]=[c("删除 ")])),_:2},1032,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),b.value>0?(v(),k("div",ce,[a(l(M),{page:s.page,"onUpdate:page":e[1]||(e[1]=t=>s.page=t),size:s.size,"onUpdate:size":e[2]||(e[2]=t=>s.size=t),total:b.value,onCallback:D},null,8,["page","size","total"])])):C("",!0)])])])])}}});export{we as default};
