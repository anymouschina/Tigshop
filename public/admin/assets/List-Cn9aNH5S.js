/* empty css             */import"./index-CeQDmMxd.js";import{_ as ee}from"./ProductBatch.vue_vue_type_script_setup_true_lang-CloKXoAG.js";import{S as te}from"./SelectBrand-DNAqPzAl.js";import{_ as le}from"./SelectCategory.vue_vue_type_script_setup_true_lang-DKnpU9uO.js";import{d as ae,s as oe,K as se,G as re,i,q as ne,c as u,e as c,b as l,w as a,I as v,r as m,o as r,F as h,a as L,j as I,E as V,D as R,g as T,f as b,_ as de}from"./index-DrbzVNl6.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import{d as ie,g as ue,B as pe}from"./product-DEi2MlvQ.js";/* empty css                                                                    */import{P as ce}from"./ProductCard-DkH9tOY5.js";/* empty css                                                                  *//* empty css                                                                              */import{a as me}from"./category-B3nMG9Bb.js";import{a as ye}from"./brand-C64i7ZtK.js";import{_ as _e}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./category-BQLd1cDS.js";import"./time-Bh5UhrfW.js";import"./format-CRgx78oe.js";const fe={class:"container"},ve={class:"content_wrapper"},be={class:"wrapper_title"},ge={style:{width:"100%"}},ke={class:"list-table-tool-row"},he={class:"list-table-tool-col"},Le={class:"wrapper_table"},Ie={class:"flex"},Ve={class:"flex-column-center"},Te={key:0},Be={key:1},xe={key:2},Se={key:3},Ce={key:4},Ue={key:5},Ne=ae({__name:"List",setup(Pe){const j=oe();se();const E=re({page:1,size:100,sortField:"",sortOrder:"",keyword:""}),_=i({type:[]}),K=i([{lable:"商品上下架状态",key:"productStatus",type:"status"},{lable:"商品名称",key:"productName",type:"input"},{lable:"商品分类",key:"categoryId",type:"category"},{lable:"商品品牌",key:"brandId",type:"brand"},{lable:"商品货号",key:"productSn",type:"input"},{lable:"条形编码",key:"productTsn",type:"input"},{lable:"商品售价",key:"productPrice",type:"input"},{lable:"市场价",key:"marketPrice",type:"input"},{lable:"运费模板",key:"shippingTplId",type:"shippingTpl"},{lable:"是否包邮",key:"freeShipping",type:"select"},{lable:"是否新品",key:"isNew",type:"select"},{lable:"是否精品",key:"isBest",type:"select"},{lable:"是否热销",key:"isHot",type:"select"},{lable:"排序",key:"sortOrder",type:"input"}]),F=i([{label:"上架",value:1},{label:"下架",value:0}]),$=i([{label:"是",value:1},{label:"否",value:0}]),y=i([]),z=i(0),D=i(!0),g=i([]),A=async s=>{try{s&&g.value.push(...s);const e=await ue({ids:g.value.join(","),...E});e.records.map(n=>{n.shippingTplId==0&&(n.shippingTplId="")}),y.value=e.records,z.value=e.total}catch(e){v.error(e.message)}finally{D.value=!1}},M=s=>{y.value.map(e=>{Object.assign(e,s)})},q=s=>{y.value=y.value.filter(n=>n.productId!==s);let e=[];y.value.map(n=>{e.push(n.productId)}),g.value=e},B=i([]),x=i([]),S=i([]),C=i([]),U=i([]),G=async()=>{try{const s=await ie();B.value=s.shippingTplList;const e=await me();x.value=e;const n=await ye();S.value=n.firstwordList,C.value=n.brandList,U.value=n.brandList}catch(s){v.error(s.message)}finally{D.value=!1}};ne(()=>{G()});const H=async()=>{if(y.value.length<1){v.error("未选择商品");return}if(_.value.type.length<1){v.error("未选择修改项");return}let s=Q();if(J(s))try{const e=await pe({editItems:s});v.success("操作成功"),W()}catch(e){v.error(e.message)}},W=()=>{y.value=[],_.value.type=[],g.value=[]},J=s=>{for(let e of s)if(e.productName==""||e.productSn=="")return v.error("商品名称或商品货号不能为空"),!1;return!0},Q=()=>{const s=["productId"],n=[..._.value.type.map(p=>p.key),...s];return y.value.map(p=>{const f={};return n.forEach(k=>{p[k]!==void 0&&(f[k]=p[k])}),f})};return(s,e)=>{const n=m("el-checkbox"),O=m("el-checkbox-group"),p=m("el-form-item"),f=m("el-button"),k=m("el-space"),N=m("el-table-column"),P=m("el-option"),w=m("el-select"),X=m("TigInput"),Y=m("el-table"),Z=m("el-form");return r(),u("div",fe,[c("div",ve,[c("div",be,[l(Z,{ref_key:"formRef",ref:j,model:_.value,"label-width":"auto"},{default:a(()=>[l(p,{label:"选择修改："},{default:a(()=>[l(O,{modelValue:_.value.type,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value.type=t)},{default:a(()=>[(r(!0),u(h,null,L(K.value,t=>(r(),I(n,{value:t,style:{"margin-bottom":"10px"}},{default:a(()=>[V(R(t.lable),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"商品信息："},{default:a(()=>[c("div",ge,[c("div",ke,[c("div",he,[l(k,null,{default:a(()=>[l(T(_e),{params:{selectedIds:g.value,isMultiple:!0},isDrawer:"",path:"product/product/src/SelectProduct",title:"选择商品",width:"600px",onOkCallback:A},{default:a(()=>[l(f,{type:"primary"},{default:a(()=>e[3]||(e[3]=[V("添加商品")])),_:1})]),_:1},8,["params"])]),_:1})]),e[4]||(e[4]=c("div",{class:"list-table-tool-col"},null,-1))]),c("div",Le,[l(ee,{types:_.value.type,productStatusList:F.value,selectList:$.value,onCallback:M,categoryList:x.value,firstWordList:S.value,brandList:C.value,allBrandList:U.value,shippingTplList:B.value},null,8,["types","productStatusList","selectList","categoryList","firstWordList","brandList","allBrandList","shippingTplList"]),l(Y,{data:y.value,border:"",style:{width:"100%"},loading:""},{default:a(()=>[l(N,{label:"商品信息"},{default:a(({row:t})=>[c("div",Ie,[l(T(ce),{picThumb:t.picThumb,productId:t.productId,productName:t.productName},null,8,["picThumb","productId","productName"])])]),_:1}),(r(!0),u(h,null,L(_.value.type,t=>(r(),I(N,{width:"180",align:"center"},{header:a(()=>[c("div",Ve,[c("div",null,R(t.lable),1)])]),default:a(({row:d})=>[t.type=="status"?(r(),u("div",Te,[l(w,{modelValue:d[t.key],"onUpdate:modelValue":o=>d[t.key]=o},{default:a(()=>[(r(!0),u(h,null,L(F.value,o=>(r(),I(P,{label:o.label,value:o.value},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):b("",!0),t.type=="shippingTpl"?(r(),u("div",Be,[l(w,{modelValue:d.shippingTplId,"onUpdate:modelValue":o=>d.shippingTplId=o},{default:a(()=>[(r(!0),u(h,null,L(B.value,o=>(r(),I(P,{label:o.shippingTplName,value:o.shippingTplId},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):b("",!0),t.type=="select"?(r(),u("div",xe,[l(w,{modelValue:d[t.key],"onUpdate:modelValue":o=>d[t.key]=o},{default:a(()=>[(r(!0),u(h,null,L($.value,o=>(r(),I(P,{label:o.label,value:o.value},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):b("",!0),t.type=="input"?(r(),u("div",Se,[l(p,null,{default:a(()=>[l(X,{modelValue:d[t.key],"onUpdate:modelValue":o=>d[t.key]=o,placeholder:t.lable},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024)])):b("",!0),t.key=="categoryId"?(r(),u("div",Ce,[l(p,null,{default:a(()=>[l(T(le),{categoryId:d.categoryId,"onUpdate:categoryId":o=>d.categoryId=o,categoryList:x.value},null,8,["categoryId","onUpdate:categoryId","categoryList"])]),_:2},1024)])):b("",!0),t.key=="brandId"?(r(),u("div",Ue,[l(p,null,{default:a(()=>[l(T(te),{brandId:d.brandId,"onUpdate:brandId":o=>d.brandId=o,firstWordList:S.value,brandList:C.value,allBrandList:U.value},null,8,["brandId","onUpdate:brandId","firstWordList","brandList","allBrandList"])]),_:2},1024)])):b("",!0)]),_:2},1024))),256)),l(N,{fixed:"right",label:"操作",width:"90",align:"center"},{default:a(({row:t})=>[l(f,{link:"",type:"primary",size:"small",onClick:d=>q(t.productId)},{default:a(()=>e[5]||(e[5]=[V(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e[6]||(e[6]=c("div",{class:"extra"},"一次最多添加100个商品",-1))])])]),_:1}),l(p,{label:" "},{default:a(()=>[l(f,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[1]||(e[1]=t=>H())},{default:a(()=>e[7]||(e[7]=[V("提交 ")])),_:1},512),l(f,{ref:"submitBtn",class:"form-submit-btn",onClick:e[2]||(e[2]=t=>W())},{default:a(()=>e[8]||(e[8]=[V("重置")])),_:1},512)]),_:1})]),_:1},8,["model"])])])])}}}),Xe=de(Ne,[["__scopeId","data-v-617ae305"]]);export{Xe as default};
