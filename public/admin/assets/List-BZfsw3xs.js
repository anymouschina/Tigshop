import{d as N,i as g,G as F,q as L,c as y,e as t,b as a,w as s,L as $,g as r,f as c,E as u,D as S,I as k,r as d,o as p,j as w}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{P as E}from"./PopFormElm-DSof3F4x.js";import{_ as K}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as O}from"./Pagination-yOfjsBuR.js";import{u as j}from"./config-DNllFJyR.js";import{g as G,b as M,u as T,d as H}from"./adminRole-Bv-dw8SG.js";import{_ as V}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const J={class:"container"},Q={class:"content_wrapper"},W={class:"lyecs-table-list-warp"},X={class:"list-table-tool lyecs-search-warp"},Y={class:"advanced-search-warp list-table-tool-row"},Z={class:"simple-form-warp"},ee={class:"simple-form-field"},te={class:"form-group"},oe={class:"control-container"},ae={class:"simple-form-field"},se={class:"form-group"},le={class:"control-container"},ne={class:"simple-form-field"},ie={class:"form-group"},re={class:"control-container"},de={key:0},pe={class:"table-container"},ce={class:"empty-warp"},_e={key:0,class:"empty-bg"},me={key:0,class:"pagination-con"},xe=N({__name:"List",setup(ue){const x=j(),C=g([]),_=g(!0),f=g(0),m=g([]),n=F({page:1,size:x.get("page_size"),sort_field:"",sort_order:"",keyword:""}),i=async()=>{_.value=!0;try{const l=await G({...n});C.value=l.filter_result,f.value=l.total}catch(l){k.error(l.message)}finally{_.value=!1}};L(()=>{i()});const b=()=>{i()},A=({prop:l,order:e})=>{n.sort_field=l,n.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",i()},z=async l=>{try{const e=await M(l,{ids:m.value});k.success(e.message),i()}catch(e){k.error(e.message)}},q=l=>{m.value=l.map(e=>e.role_id)};return(l,e)=>{const h=d("el-button"),B=d("el-input"),D=d("el-popconfirm"),v=d("el-table-column"),P=d("el-divider"),R=d("el-table"),U=d("a-spin");return p(),y("div",J,[t("div",Q,[t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[t("div",ee,[t("div",te,[t("div",oe,[a(B,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=o=>n.keyword=o),name:"keyword",placeholder:"输入权限组名称",onKeyup:$(b,["enter"]),clearable:"",onClear:b},{append:s(()=>[a(h,{onClick:b},{default:s(()=>e[4]||(e[4]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",ae,[t("div",se,[t("div",le,[a(r(V),{params:{act:"add"},isDrawer:"",path:"authority/adminRole/Info",title:"添加管理员权限组",width:"800px",onOkCallback:i},{default:s(()=>[a(h,{type:"primary"},{default:s(()=>e[5]||(e[5]=[u("添加管理员权限组")])),_:1})]),_:1})])])]),t("div",ne,[t("div",ie,[t("div",re,[a(D,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=o=>z("del"))},{reference:s(()=>[a(h,{disabled:m.value.length===0},{default:s(()=>e[6]||(e[6]=[u("批量删除")])),_:1},8,["disabled"])]),_:1}),m.value.length>0?(p(),y("span",de,[e[7]||(e[7]=u(" 已选择：")),t("b",null,S(m.value.length),1),e[8]||(e[8]=u(" 项 "))])):c("",!0)])])])])])]),t("div",pe,[a(U,{spinning:_.value},{default:s(()=>[a(R,{data:C.value,loading:_.value,total:f.value,"row-key":"role_id",onSelectionChange:q,onSortChange:A},{empty:s(()=>[t("div",ce,[_.value?c("",!0):(p(),y("div",_e,"暂无数据"))])]),default:s(()=>[a(v,{type:"selection",width:"32"}),a(v,{label:"权限组名称",width:"200"},{default:s(({row:o})=>[a(r(E),{"org-value":o.role_name,"onUpdate:orgValue":I=>o.role_name=I,max:10,params:{id:o.role_id,field:"role_name"},requestApi:r(T),label:"权限组名称",type:"input"},{default:s(()=>[t("div",null,S(o.role_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),a(v,{label:"描述",prop:"role_desc"}),a(v,{width:120,fixed:"right",label:"操作"},{default:s(({row:o})=>[o.role_id>1?(p(),w(r(V),{key:0,params:{act:"detail",id:o.role_id},isDrawer:"",path:"authority/adminRole/Info",title:"编辑管理员权限组",width:"800px",onOkCallback:i},{default:s(()=>e[9]||(e[9]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])):c("",!0),o.role_id>2?(p(),w(P,{key:1,direction:"vertical"})):c("",!0),o.role_id>2?(p(),w(r(K),{key:2,params:{id:o.role_id},requestApi:r(H),onAfterDelete:i},{default:s(()=>e[10]||(e[10]=[u("删除 ")])),_:2},1032,["params","requestApi"])):c("",!0)]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),f.value>0?(p(),y("div",me,[a(r(O),{page:n.page,"onUpdate:page":e[2]||(e[2]=o=>n.page=o),size:n.size,"onUpdate:size":e[3]||(e[3]=o=>n.size=o),total:f.value,onCallback:i},null,8,["page","size","total"])])):c("",!0)])])])])}}});export{xe as default};
