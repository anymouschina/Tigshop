import{d as ae,j as b,I,E as le,x as oe,r,o as i,c as y,e as s,b as o,w as a,k as _,f as m,h as g,K as L,F as N,a as P,H as k,L as se,G as w}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{_ as ne}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as q}from"./Pagination-8eb7b6b1.js";import{u as ie}from"./config-9548fa9b.js";import{g as de,d as re,b as pe}from"./translationContent-0ce76c05.js";import{g as ue}from"./product-689c7c1e.js";import{g as ce}from"./brand-995f2ca4.js";import{g as _e}from"./category-7b076a22.js";import{g as me}from"./article-8e3ede66.js";import{_ as V}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const fe={class:"container"},ve={class:"content_wrapper"},ye={class:"lyecs-table-list-warp"},ge={class:"list-table-tool lyecs-search-warp"},he={class:"advanced-search-warp list-table-tool-row"},be={class:"simple-form-warp"},ke={key:0,class:"simple-form-field"},we={class:"form-group"},Ce={class:"control-container"},xe={class:"form-group"},ze={class:"control-container"},Ve={key:1,class:"simple-form-field"},De={class:"form-group"},Se={class:"control-container"},Oe=s("span",{class:"iconfont icon-chakan1"},null,-1),Le={class:"simple-form-field"},Be={key:3},Ue={class:"table-container"},Te=s("a",{class:"btn-link"},"编辑",-1),Ae={class:"empty-warp"},Ie={key:0,class:"empty-bg"},Ne=s("a",{class:"btn-link"},"翻译",-1),Pe={class:"empty-warp"},qe={key:0,class:"empty-bg"},Fe={key:0,class:"pagination-con"},at=ae({__name:"List",props:{promotion_type:{type:Number,default:1}},setup(Ke,{expose:F}){const K=b(localStorage.getItem("adminType")),U=ie(),n=b(2),M=b([{label:"商品",value:2},{label:"分类",value:3},{label:"品牌",value:4},{label:"文章",value:6}]),S=b(),f=b(!0),v=b(0),c=b([]),l=I({page:1,size:U.get("page_size"),sort_field:"",sort_order:"",translation_name:"",locale_code:"",data_type:0}),C=I({page:1,size:U.get("page_size"),sort_field:"",sort_order:""}),$=(d,t)=>{const u=t.find(B=>B.locale_id===d);return u?u.translation_value:""},E=(d,t)=>{l.data_type=d.index,l.data_type<2?p():(C.page=1,D())},D=async()=>{const t={2:ue,3:_e,4:ce,6:me}[n.value];f.value=!0;try{if(typeof t=="function"){const u=await t({...C});S.value=u.filter_result,console.log(u),v.value=u.total}else console.error("fn 不是一个有效的函数")}catch(u){L.error(u.message)}finally{f.value=!1}},T=b([]),p=async()=>{f.value=!0;try{const d=await de({...l});S.value=d.filter_result,T.value=d.locales,v.value=d.total}catch(d){L.error(d.message)}finally{f.value=!1}},x=le().currentRoute.value.query;oe(()=>{x.type&&x.type!==""?(l.data_type=2,x.type==="product"&&(n.value=2),x.type==="category"&&(n.value=3),x.type==="brand"&&(n.value=4),x.type==="article"&&(n.value=6),D()):p()});const O=()=>{l.data_type<2?p():D()},Q=({prop:d,order:t})=>{l.sort_field=d,l.sort_order=t=="ascending"?"asc":t=="descending"?"desc":"",p()},R=async d=>{try{const t=await pe(d,{ids:c.value});L.success(t.message),p()}catch(t){L.error(t.message)}},j=d=>{c.value=d.map(t=>t.id)};return F({loadFilter:p}),(d,t)=>{const u=r("el-tab-pane"),B=r("el-tabs"),G=r("el-option"),H=r("el-select"),z=r("el-button"),J=r("el-input"),W=r("el-popconfirm"),X=r("el-space"),Y=r("el-form"),h=r("el-table-column"),Z=r("el-divider"),A=r("el-table"),ee=r("a-spin");return i(),y("div",fe,[s("div",ve,[s("div",ye,[o(B,{modelValue:l.data_type,"onUpdate:modelValue":t[0]||(t[0]=e=>l.data_type=e),class:"demo-tabs",onTabClick:E},{default:a(()=>[o(u,{label:"页面文字",name:0}),o(u,{label:"接口文字",name:1}),o(u,{label:"数据维护",name:2})]),_:1},8,["modelValue"]),s("div",ge,[o(Y,{model:l},{default:a(()=>[s("div",he,[s("div",be,[l.data_type==2&&K.value=="admin"?(i(),y("div",ke,[s("div",we,[s("div",Ce,[o(H,{modelValue:n.value,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value=e),placeholder:"请选择数据类型",style:{width:"240px"},onChange:O},{default:a(()=>[(i(!0),y(N,null,P(M.value,e=>(i(),_(G,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),s("div",xe,[s("div",ze,[o(m(V),{params:{act:"add",data_type:n.value,total:v.value},isDrawer:"",showClose:!1,showOnOk:!1,path:"setting/multilingual/translationContent/Quick",title:"一键翻译",width:"700px",onOkCallback:D},{default:a(()=>[o(z,{type:"success"},{default:a(()=>[k("一键翻译")]),_:1})]),_:1},8,["params"])])])])):l.data_type!=2?(i(),y("div",Ve,[s("div",De,[s("div",Se,[o(J,{modelValue:l.translation_name,"onUpdate:modelValue":t[2]||(t[2]=e=>l.translation_name=e),name:"translation_name",placeholder:"请输入原句",onKeyup:se(O,["enter"])},{append:a(()=>[o(z,{onClick:O},{default:a(()=>[Oe]),_:1})]),_:1},8,["modelValue"])])])])):g("",!0),s("div",Le,[o(X,null,{default:a(()=>[l.data_type<2?(i(),_(m(V),{key:0,params:{act:"add",data_type:l.data_type},isDrawer:"",path:"setting/multilingual/translationContent/Info",title:"添加"+(l.data_type==0?"页面文字":"接口文字"),width:"700px",onOkCallback:p},{default:a(()=>[o(z,{type:"primary"},{default:a(()=>[k("添加语句")]),_:1})]),_:1},8,["params","title"])):g("",!0),l.data_type<2?(i(),_(m(V),{key:1,params:{act:"add",data_type:l.data_type},isDrawer:"",path:"setting/multilingual/translationContent/Add",title:"添加"+(l.data_type==0?"页面文字":"接口文字"),width:"700px",onOkCallback:p},{default:a(()=>[o(z,{type:"primary"},{default:a(()=>[k("批量添加语句")]),_:1})]),_:1},8,["params","title"])):g("",!0),l.data_type<2?(i(),_(m(V),{key:2,params:{act:"add",data_type:l.data_type,total:c.value.length>0?c.value.length:v.value,ids:c.value},isDrawer:"",showClose:!1,showOnOk:!1,path:"setting/multilingual/translationContent/Quick",title:c.value.length?"批量翻译":"一键翻译",width:"700px",onOkCallback:p},{default:a(()=>[o(z,{type:"success"},{default:a(()=>[k(w(c.value.length?"批量翻译":"一键翻译"),1)]),_:1})]),_:1},8,["params","title"])):g("",!0),o(W,{title:"您确认要批量删除所选数据吗？",onConfirm:t[3]||(t[3]=e=>R("del"))},{reference:a(()=>[l.data_type<2?(i(),_(z,{key:0,disabled:c.value.length===0},{default:a(()=>[k("批量删除")]),_:1},8,["disabled"])):g("",!0)]),_:1}),c.value.length>0?(i(),y("span",Be,[k(" 已选择："),s("b",null,w(c.value.length),1),k(" 项 ")])):g("",!0)]),_:1})])])])]),_:1},8,["model"])]),s("div",Ue,[o(ee,{spinning:f.value},{default:a(()=>[l.data_type<2?(i(),_(A,{key:0,data:S.value,"row-key":"id",onSelectionChange:j,total:v.value,onSortChange:Q,loading:f.value},{empty:a(()=>[s("div",Ae,[f.value?g("",!0):(i(),y("div",Ie,"暂无数据"))])]),default:a(()=>[o(h,{type:"selection",width:"32"}),o(h,{label:"原句",prop:"translation_name",sortable:"custom","show-overflow-tooltip":"",fixed:"left"},{default:a(({row:e})=>[s("div",null,w(e.translation_name||"--"),1)]),_:1}),(i(!0),y(N,null,P(T.value,(e,Me)=>(i(),_(h,{label:e.language,prop:e.locale_code,"show-overflow-tooltip":""},{default:a(({row:te})=>[s("div",null,w($(e.id,te.tdata)),1)]),_:2},1032,["label","prop"]))),256)),o(h,{label:"翻译类型",prop:"data_type",width:150},{default:a(({row:e})=>[s("div",null,w(e.data_type==0?"页面文字":"接口文字"),1)]),_:1}),o(h,{label:"操作",fixed:"right",width:150},{default:a(({row:e})=>[o(m(V),{isDrawer:"",onOkCallback:p,title:"编辑"+(e.data_type==0?"页面文字":"接口文字"),width:"800px",path:"setting/multilingual/translationContent/Info",params:{act:"detail",id:e.id,data_type:l.data_type}},{default:a(()=>[Te]),_:2},1032,["title","params"]),o(Z,{direction:"vertical"}),o(m(ne),{onAfterDelete:p,requestApi:m(re),params:{id:e.id}},{default:a(()=>[k("删除")]),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])):(i(),_(A,{key:1,data:S.value,"row-key":"id",total:v.value,loading:f.value},{empty:a(()=>[s("div",Pe,[f.value?g("",!0):(i(),y("div",qe,"暂无数据"))])]),default:a(()=>[o(h,{label:"原句",prop:"name"},{default:a(({row:e})=>[s("div",null,w(n.value==2?e.product_name:n.value==3?e.category_name:n.value==4?e.brand_name:e.article_title),1)]),_:1}),o(h,{label:"翻译类型",prop:"data_type",width:150},{default:a(({row:e})=>[s("div",null,w(n.value==2?"商品名称":n.value==3?"分类名称":"品牌名称"),1)]),_:1}),o(h,{label:"操作",fixed:"right",width:150},{default:a(({row:e})=>[o(m(V),{isDrawer:"",onOkCallback:O,title:"查看",width:"800px",path:"setting/multilingual/translationContent/BusinessDialog",params:{act:"detail",id:n.value==2?e.product_id:n.value==3?e.category_id:n.value==4?e.brand_id:e.article_id,data_type:n.value,translation_name:n.value==2?e.product_name:n.value==3?e.category_name:n.value==4?e.brand_name:e.article_title}},{default:a(()=>[Ne]),_:2},1032,["params"])]),_:1})]),_:1},8,["data","total","loading"]))]),_:1},8,["spinning"]),v.value>0?(i(),y("div",Fe,[l.data_type<2?(i(),_(m(q),{key:0,page:l.page,"onUpdate:page":t[4]||(t[4]=e=>l.page=e),size:l.size,"onUpdate:size":t[5]||(t[5]=e=>l.size=e),total:v.value,onCallback:p},null,8,["page","size","total"])):(i(),_(m(q),{key:1,page:C.page,"onUpdate:page":t[6]||(t[6]=e=>C.page=e),size:C.size,"onUpdate:size":t[7]||(t[7]=e=>C.size=e),total:v.value,onCallback:D},null,8,["page","size","total"]))])):g("",!0)])])])])}}});export{at as default};
