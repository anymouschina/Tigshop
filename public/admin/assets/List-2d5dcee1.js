import{d as K,j as v,I as L,x as O,r as n,o as g,c as h,e as o,b as t,w as s,f as r,h as S,K as x,L as j,H as m,G as b}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{P as C}from"./PopFormElm-61cd9b7d.js";import{_ as E}from"./Switch.vue_vue_type_script_setup_true_lang-95245cd7.js";import{_ as G}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as H}from"./Pagination-8eb7b6b1.js";import{u as M}from"./config-9548fa9b.js";import{_ as T}from"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import{g as J,u as y,d as Q,b as R}from"./productServices-bfbdfd18.js";import{_ as A}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";import"./format-4e0206d3.js";import"./util-1ee03ed8.js";const W={class:"container"},X={class:"content_wrapper"},Y={class:"lyecs-table-list-warp"},Z={class:"list-table-tool lyecs-search-warp"},ee={class:"advanced-search-warp list-table-tool-row"},te={class:"simple-form-warp"},oe={class:"simple-form-field"},se={class:"form-group"},ae={class:"control-container"},re=o("span",{class:"iconfont icon-chakan1"},null,-1),ie={class:"simple-form-field"},le={class:"form-group"},de={class:"control-container"},ne={class:"simple-form-field"},ce={class:"form-group"},_e={class:"control-container"},pe={key:0},ue={class:"table-container"},me={style:{position:"relative"}},fe=o("a",{class:"btn-link"},"编辑",-1),ve={class:"empty-warp"},ge={key:0,class:"empty-bg"},he={key:0,class:"pagination-con"},Ie=K({__name:"List",setup(be){const U=M(),V=v(),p=v(!0),f=v(0),u=v([]),l=L({page:1,size:U.get("page_size"),sort_field:"",sort_order:"",keyword:""}),d=async()=>{p.value=!0;try{const i=await J({...l});V.value=i.filter_result,f.value=i.total}catch(i){x.error(i.message)}finally{p.value=!1}};O(()=>{d()});const w=()=>{d()},q=({prop:i,order:a})=>{l.sort_field=i,l.sort_order=a=="ascending"?"asc":a=="descending"?"desc":"",d()},P=async i=>{try{const a=await R(i,{ids:u.value});x.success(a.message),d()}catch(a){x.error(a.message)}},z=i=>{u.value=i.map(a=>a.product_service_id)};return(i,a)=>{const k=n("el-button"),$=n("el-input"),B=n("el-popconfirm"),D=n("el-form"),c=n("el-table-column"),I=n("el-divider"),N=n("el-table"),F=n("a-spin");return g(),h("div",W,[o("div",X,[o("div",Y,[o("div",Z,[t(D,{model:l},{default:s(()=>[o("div",ee,[o("div",te,[o("div",oe,[o("div",se,[o("div",ae,[t($,{modelValue:l.keyword,"onUpdate:modelValue":a[0]||(a[0]=e=>l.keyword=e),name:"keyword",placeholder:"输入服务名称",onKeyup:j(w,["enter"])},{append:s(()=>[t(k,{onClick:w},{default:s(()=>[re]),_:1})]),_:1},8,["modelValue"])])])]),o("div",ie,[o("div",le,[o("div",de,[t(r(A),{params:{act:"add"},isDrawer:"",path:"product/productServices/Info",title:"添加商品服务",width:"600px",onOkCallback:d},{default:s(()=>[t(k,{type:"primary"},{default:s(()=>[m("添加商品服务")]),_:1})]),_:1})])])]),o("div",ne,[o("div",ce,[o("div",_e,[t(B,{title:"您确认要批量删除所选数据吗？",onConfirm:a[1]||(a[1]=e=>P("del"))},{reference:s(()=>[t(k,{disabled:u.value.length===0},{default:s(()=>[m("批量删除")]),_:1},8,["disabled"])]),_:1}),u.value.length>0?(g(),h("span",pe,[m(" 已选择："),o("b",null,b(u.value.length),1),m(" 项 ")])):S("",!0)])])])])])]),_:1},8,["model"])]),o("div",ue,[t(F,{spinning:p.value},{default:s(()=>[t(N,{data:V.value,loading:p.value,total:f.value,"row-key":"product_service_id",onSelectionChange:z,onSortChange:q},{empty:s(()=>[o("div",ve,[p.value?S("",!0):(g(),h("div",ge,"暂无数据"))])]),default:s(()=>[t(c,{type:"selection",width:"32"}),t(c,{width:300,label:"服务名称",prop:"product_service_id",sortable:"custom"},{default:s(({row:e})=>[o("div",me,[t(r(C),{label:"服务名称",type:"textarea",requestApi:r(y),"org-value":e.product_service_name,"onUpdate:orgValue":_=>e.product_service_name=_,params:{id:e.product_service_id,field:"product_service_name"},max:100},{default:s(()=>[o("div",null,b(e.product_service_name),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])])]),_:1}),t(c,{label:"图标"},{default:s(({row:e})=>[t(r(T),{src:e.ico_img,fit:"contain",style:{height:"25px"}},null,8,["src"])]),_:1}),t(c,{label:"简介",prop:"product_service_desc"},{default:s(({row:e})=>[t(r(C),{max:100,label:"简介",type:"input",requestApi:r(y),"org-value":e.product_service_desc,"onUpdate:orgValue":_=>e.product_service_desc=_,params:{id:e.product_service_id,field:"product_service_desc"}},{default:s(()=>[o("div",null,b(e.product_service_desc),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])]),_:1}),t(c,{label:"默认显示",prop:"default_on",sortable:"custom"},{default:s(({row:e})=>[t(r(E),{checked:e.default_on,"onUpdate:checked":_=>e.default_on=_,requestApi:r(y),params:{id:e.product_service_id,field:"default_on"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),t(c,{label:"排序",prop:"sort_order",sortable:"custom"},{default:s(({row:e})=>[t(r(C),{label:"排序",type:"input",requestApi:r(y),"org-value":e.sort_order,"onUpdate:orgValue":_=>e.sort_order=_,params:{id:e.product_service_id,field:"sort_order"},extra:"默认值为50，数值越小，排序越靠前"},{default:s(()=>[o("div",null,b(e.sort_order),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])]),_:1}),t(c,{width:150,fixed:"right",label:"操作"},{default:s(({row:e})=>[t(r(A),{params:{act:"detail",id:e.product_service_id},isDrawer:"",path:"product/productServices/Info",title:"编辑商品服务",width:"600px",onOkCallback:d},{default:s(()=>[fe]),_:2},1032,["params"]),t(I,{direction:"vertical"}),t(r(G),{params:{id:e.product_service_id},requestApi:r(Q),onAfterDelete:d},{default:s(()=>[m("删除 ")]),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),f.value>0?(g(),h("div",he,[t(r(H),{page:l.page,"onUpdate:page":a[2]||(a[2]=e=>l.page=e),size:l.size,"onUpdate:size":a[3]||(a[3]=e=>l.size=e),total:f.value,onCallback:d},null,8,["page","size","total"])])):S("",!0)])])])])}}});export{Ie as default};
