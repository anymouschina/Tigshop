import{d as R,i as f,C as T,s as M,q as j,I as v,r as d,c as q,o as S,e as b,j as E,f as I,b as t,w as o,a3 as L,E as n,D as r,g as s,a4 as U}from"./index-DrbzVNl6.js";import{a as h,f as $}from"./order-DqMQuu0g.js";import{p as i}from"./format-CRgx78oe.js";/* empty css                                                                  */import{_ as z}from"./Checkbox.vue_vue_type_script_setup_true_lang-B1TQ86Kt.js";const G={class:"container"},H={class:"content_wrapper"},J={class:"lyecs-form-table"},Z=R({__name:"EditMoney",props:{id:{type:Number,default:0},act:{type:String,default:""},form:{type:Object,default:()=>({})},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(k,{expose:C,emit:O}){const c=O,p=k,_=f(!0),g=T().currentRoute.value.query,x=f(p.isDialog?p.act:String(g.act)),y=f(p.isDialog?p.id:Number(g.id)),A=M(),e=f(p.form);j(()=>{D()});const D=async()=>{try{const u=await h(x.value,{id:y.value});Object.assign(e.value,u)}catch(u){v.error(u.message),c("close")}finally{_.value=!1}},V=async()=>{await A.value.validate();try{c("update:confirmLoading",!0);const u=await $({id:y.value,...e.value});c("submitCallback",u),v.success("操作成功")}catch(u){v.error(u.message)}finally{c("update:confirmLoading",!1)}};return C({onFormSubmit:()=>{V()}}),(u,a)=>{const l=d("el-form-item"),w=d("TigInput"),B=d("el-button"),F=d("el-form"),N=d("a-spin");return S(),q("div",G,[b("div",H,[b("div",J,[_.value?I("",!0):(S(),E(F,{key:0,ref_key:"formRef",ref:A,model:e.value,"label-width":"auto"},{default:o(()=>[t(l,{label:"商品总金额",prop:"productAmount"},{default:o(()=>[n(r(s(i)(e.value.productAmount)),1)]),_:1}),t(l,{label:"优惠券",prop:"couponAmount"},{default:o(()=>[n(r(s(i)(e.value.couponAmount)),1)]),_:1}),t(l,{label:"积分抵扣",prop:"pointsAmount"},{default:o(()=>[n(r(s(i)(e.value.pointsAmount)),1)]),_:1}),t(l,{label:"使用余额",prop:"balance"},{default:o(()=>[n(r(s(i)(e.value.balance)),1)]),_:1}),t(l,{label:"配送费用",prop:"shippingFee"},{default:o(()=>[t(w,{classType:"tig-form-input",modelValue:e.value.shippingFee,"onUpdate:modelValue":a[0]||(a[0]=m=>e.value.shippingFee=m),type:"decimal"},null,8,["modelValue"])]),_:1}),t(l,{label:"折扣优惠",prop:"discountAmount"},{default:o(()=>[t(w,{classType:"tig-form-input",modelValue:e.value.discountAmount,"onUpdate:modelValue":a[1]||(a[1]=m=>e.value.discountAmount=m),type:"decimal"},{prefix:o(()=>a[4]||(a[4]=[b("span",null,"-",-1)])),_:1},8,["modelValue"])]),_:1}),t(l,{label:"订单号",prop:"updateOrderSn"},{default:o(()=>[t(s(z),{modelValue:e.value.updateOrderSn,"onUpdate:modelValue":a[2]||(a[2]=m=>e.value.updateOrderSn=m),modelModifiers:{modelValue:!0}},{default:o(()=>a[5]||(a[5]=[n(" 变更订单号 ")])),_:1},8,["modelValue"])]),_:1}),t(l,{label:"订单总金额",prop:"totalAmount"},{default:o(()=>[n(r(s(i)(e.value.totalAmount)),1)]),_:1}),t(l,{label:"已付款金额",prop:"paidAmount"},{default:o(()=>[n(r(s(i)(e.value.paidAmount)),1)]),_:1}),t(l,{label:"未付款金额",prop:"unpaidAmount"},{default:o(()=>[n(r(s(i)(e.value.unpaidAmount)),1)]),_:1}),L(t(l,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[t(B,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:a[3]||(a[3]=m=>V())},{default:o(()=>a[6]||(a[6]=[n("提交 ")])),_:1},512)]),_:1},512),[[U,!p.isDialog]])]),_:1},8,["model"])),t(N,{spinning:_.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{Z as default};
