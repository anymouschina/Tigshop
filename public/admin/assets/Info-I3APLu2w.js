import{d as E,i as d,C as M,s as z,q as A,r as u,c as U,o as i,e as p,j as y,f as T,b as l,w as o,a3 as G,g as H,F as J,a as K,E as m,a4 as Q,I as V}from"./index-DrbzVNl6.js";import{a as W,c as X,e as Y}from"./pcNavigation-YlzjlM0Y.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import"./index-CeQDmMxd.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{S as Z}from"./SelectLink-y94Q6MqZ.js";/* empty css             */import{S as $}from"./SelectIco-CHo0EoOQ.js";import"./time-Bh5UhrfW.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const h={class:"container"},ee={class:"content_wrapper"},te={class:"lyecs-form-table"},ce=E({__name:"Info",props:{id:{type:Number,default:0},type:{type:Number,default:0},typeName:{type:String,default:""},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(_,{expose:O,emit:D}){const f=D,r=_,v=d(!0),k=M().currentRoute.value.query,g=d(r.isDialog?r.act:String(k.act)),w=d(r.isDialog?r.id:Number(k.id)),N=g.value==="add"?"create":"update",S=z(),t=d({type:r.type,isShow:1,isBlank:0}),L=async()=>{try{const n=await W(g.value,{id:w.value});Object.assign(t.value,n),N==="create"&&(t.value.type=r.type,t.value.typeName=r.typeName)}catch(n){V.error(n.message),f("close")}finally{v.value=!1}},I=d([]),R=async n=>{const e=await X({type:n});I.value.push(...e)};A(()=>{g.value==="detail"?L():v.value=!1,R(t.value.type)});const B=async()=>{await S.value.validate();try{f("update:confirmLoading",!0);const n=await Y(N,{id:w.value,...t.value});f("submitCallback",{parentId:t.value.parentId}),V.success("操作成功")}catch(n){V.error(n.message)}finally{f("update:confirmLoading",!1)}};return O({onFormSubmit:()=>{B()}}),(n,e)=>{const b=u("TigInput"),s=u("el-form-item"),x=u("el-option"),q=u("el-select"),c=u("el-radio"),C=u("el-radio-group"),F=u("el-button"),P=u("el-form"),j=u("a-spin");return i(),U("div",h,[p("div",ee,[p("div",te,[v.value?T("",!0):(i(),y(P,{key:0,ref_key:"formRef",ref:S,model:t.value,"label-width":"auto"},{default:o(()=>[l(s,{rules:[{required:!0,message:"名称不能为空!"}],label:"名称",prop:"title"},{default:o(()=>[l(b,{classType:"tig-form-input",modelValue:t.value.title,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.title=a)},null,8,["modelValue"])]),_:1}),l(s,{label:"链接地址",prop:"link"},{default:o(()=>[l(H(Z),{modelValue:t.value.link,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.link=a)},null,8,["modelValue"])]),_:1}),l(s,{label:"ICO编码",prop:"icon"},{default:o(()=>[l($,{modelValue:t.value.icon,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.icon=a)},null,8,["modelValue"]),e[8]||(e[8]=p("div",{class:"extra"},'请先在Tigshop设置中的"接口设置"中设置"ico图标库地址"',-1))]),_:1}),_.type===2?(i(),y(s,{key:0,label:"上级导航",prop:"parentId"},{default:o(()=>[l(q,{style:{width:"100%"},modelValue:t.value.parentId,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.parentId=a)},{default:o(()=>[(i(),y(x,{label:"顶级导航",value:0,key:0})),(i(!0),U(J,null,K(I.value,a=>(i(),y(x,{label:a.title,value:a.id,key:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[9]||(e[9]=p("div",{class:"extra"},"请选择相对应位置的导航，如果父导航为中间导航，那该导航必须同样设置为中间导航才会生效；",-1)),e[10]||(e[10]=p("div",{class:"extra"},"默认不选则表示为顶级导航",-1))]),_:1})):T("",!0),l(s,{label:"位置",prop:"typeName"},{default:o(()=>[l(b,{classType:"tig-form-input",disabled:"",modelValue:t.value.typeName,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.typeName=a)},null,8,["modelValue"])]),_:1}),l(s,{label:"排序",prop:"sortOrder"},{default:o(()=>[l(b,{classType:"tig-form-input",type:"integer",modelValue:t.value.sortOrder,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.sortOrder=a)},null,8,["modelValue"])]),_:1}),l(s,{label:"是否显示",prop:"isShow"},{default:o(()=>[l(C,{modelValue:t.value.isShow,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.isShow=a)},{default:o(()=>[l(c,{value:1},{default:o(()=>e[11]||(e[11]=[m("是")])),_:1}),l(c,{value:0},{default:o(()=>e[12]||(e[12]=[m("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"是否新窗口",prop:"isBlank"},{default:o(()=>[l(C,{modelValue:t.value.isBlank,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.isBlank=a)},{default:o(()=>[l(c,{value:1},{default:o(()=>e[13]||(e[13]=[m("是")])),_:1}),l(c,{value:0},{default:o(()=>e[14]||(e[14]=[m("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),G(l(s,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[l(F,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:B},{default:o(()=>e[15]||(e[15]=[m("提交")])),_:1},512)]),_:1},512),[[Q,!r.isDialog]])]),_:1},8,["model"])),l(j,{spinning:v.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ce as default};
