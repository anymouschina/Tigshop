import{d as E,dA as K,i as b,G as O,q as G,c as m,e as t,f as h,b as s,w as a,L as M,g as i,E as d,D as y,I as C,r as c,o as f,n as T}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{P as j}from"./PopFormElm-DSof3F4x.js";import{_ as H}from"./Switch.vue_vue_type_script_setup_true_lang-CKSPWIQL.js";import{_ as J}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as Q}from"./Pagination-yOfjsBuR.js";import{u as A}from"./config-DNllFJyR.js";import{g as R,b as W,u as F,d as X}from"./pcCatFloor-BM4hEN4m.js";import{_ as P}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const Y={class:"container"},Z={class:"content_wrapper"},ee={class:"lyecs-table-list-warp"},te={class:"list-table-tool lyecs-search-warp"},oe={class:"advanced-search-warp list-table-tool-row"},se={class:"simple-form-warp"},ae={class:"simple-form-field"},le={class:"form-group"},ne={class:"control-container"},ie={class:"simple-form-field"},re={class:"form-group"},de={class:"control-container"},ce={class:"simple-form-field"},pe={class:"form-group"},_e={class:"control-container"},ue={key:0},me={class:"table-container"},fe={class:"empty-warp"},ve={key:0,class:"empty-bg"},ge={key:0,class:"pagination-con"},be={key:0,class:"selected-action-warp"},he={class:"selected-action"},De=E({__name:"List",setup(ye){const S=A();S.config.ico_defined_css&&K(S.config.ico_defined_css);const q=A(),V=b([]),u=b(!0),v=b(0),p=b([]),n=O({page:1,size:q.get("page_size"),sort_field:"",sort_order:"",keyword:""}),r=async()=>{u.value=!0;try{const l=await R({...n});V.value=l.filter_result,v.value=l.total}catch(l){C.error(l.message)}finally{u.value=!1}};G(()=>{r()});const w=()=>{r()},U=({prop:l,order:e})=>{n.sort_field=l,n.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",r()},x=async l=>{try{const e=await W(l,{ids:p.value});C.success(e.message),await r()}catch(e){C.error(e.message)}},D=l=>{p.value=l.map(e=>e.cat_floor_id)};return(l,e)=>{const g=c("el-button"),$=c("el-input"),z=c("el-popconfirm"),_=c("el-table-column"),B=c("el-divider"),I=c("el-table"),L=c("a-spin"),N=c("el-space");return f(),m("div",Y,[t("div",Z,[t("div",ee,[t("div",te,[t("div",oe,[t("div",se,[t("div",ae,[t("div",le,[t("div",ne,[s($,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=o=>n.keyword=o),name:"keyword",placeholder:"输入楼层名称",onKeyup:M(w,["enter"]),clearable:"",onClear:w},{append:a(()=>[s(g,{onClick:w},{default:a(()=>e[5]||(e[5]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",ie,[t("div",re,[t("div",de,[s(i(P),{params:{act:"add"},isDrawer:"",path:"decorate/pcCatFloor/Info",title:"添加抽屉楼层",width:"800px",onOkCallback:r},{default:a(()=>[s(g,{type:"primary"},{default:a(()=>e[6]||(e[6]=[d("添加抽屉楼层")])),_:1})]),_:1})])])]),t("div",ce,[t("div",pe,[t("div",_e,[s(z,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=o=>x("del"))},{reference:a(()=>[s(g,{disabled:p.value.length===0},{default:a(()=>e[7]||(e[7]=[d("批量删除")])),_:1},8,["disabled"])]),_:1}),p.value.length>0?(f(),m("span",ue,[e[8]||(e[8]=d(" 已选择：")),t("b",null,y(p.value.length),1),e[9]||(e[9]=d(" 项 "))])):h("",!0)])])])])])]),t("div",me,[s(L,{spinning:u.value},{default:a(()=>[s(I,{data:V.value,loading:u.value,total:v.value,"row-key":"cat_floor_id",onSelectionChange:D,onSortChange:U},{empty:a(()=>[t("div",fe,[u.value?h("",!0):(f(),m("div",ve,"暂无数据"))])]),default:a(()=>[s(_,{type:"selection",width:"32"}),s(_,{width:100,label:"楼层图标"},{default:a(({row:o})=>[t("em",{class:T([o.floor_ico_font,"main_pel_m"])},null,2)]),_:1}),s(_,{label:"楼层名称",prop:"cat_floor_name"},{default:a(({row:o})=>[t("span",null,y(o.cat_floor_name?o.cat_floor_name:"--"),1)]),_:1}),s(_,{width:120,label:"是否显示",sortable:"custom"},{default:a(({row:o})=>[s(i(H),{checked:o.is_show,"onUpdate:checked":k=>o.is_show=k,params:{id:o.cat_floor_id,field:"is_show"},requestApi:i(F)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),s(_,{width:120,label:"排序",prop:"sort_order",sortable:"custom"},{default:a(({row:o})=>[s(i(j),{"org-value":o.sort_order,"onUpdate:orgValue":k=>o.sort_order=k,params:{id:o.cat_floor_id,field:"sort_order"},requestApi:i(F),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"input"},{default:a(()=>[t("div",null,y(o.sort_order),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),s(_,{width:150,fixed:"right",label:"操作"},{default:a(({row:o})=>[s(i(P),{params:{act:"detail",id:o.cat_floor_id},isDrawer:"",path:"decorate/pcCatFloor/Info",title:"编辑抽屉楼层",width:"800px",onOkCallback:r},{default:a(()=>e[10]||(e[10]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),s(B,{direction:"vertical"}),s(i(J),{params:{id:o.cat_floor_id},requestApi:i(X),onAfterDelete:r},{default:a(()=>e[11]||(e[11]=[d("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),v.value>0?(f(),m("div",ge,[s(i(Q),{page:n.page,"onUpdate:page":e[2]||(e[2]=o=>n.page=o),size:n.size,"onUpdate:size":e[3]||(e[3]=o=>n.size=o),total:v.value,onCallback:r},null,8,["page","size","total"])])):h("",!0)]),p.value.length>0?(f(),m("div",be,[t("div",he,[s(N,null,{default:a(()=>[t("span",null,[e[12]||(e[12]=d("已选择：")),t("b",null,y(p.value.length),1),e[13]||(e[13]=d(" 项"))]),s(z,{title:"您确认要批量删除所选数据吗？",onConfirm:e[4]||(e[4]=o=>x("del"))},{reference:a(()=>[s(g,null,{default:a(()=>e[14]||(e[14]=[d("批量删除")])),_:1})]),_:1})]),_:1})])])):h("",!0)])])])}}});export{De as default};
