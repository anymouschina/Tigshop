/* empty css             */import{d as E,m as S,u as j,i as c,G as q,q as A,r as a,c as g,o as h,e as n,b as o,f as w,w as i,E as G,n as L,g as H,I as J,_ as K}from"./index-CGYuOau0.js";/* empty css                                                                    */import{P as O}from"./Pagination-yOfjsBuR.js";import{u as Q}from"./config-DNllFJyR.js";import{a as W}from"./shop-Daw3OFCx.js";import"./config-DU8_t5BN.js";const X={class:"container",style:{position:"relative",height:"100%"}},Y={class:"content_wrapper"},Z={class:"",style:{position:"absolute",top:"0",bottom:"0","overflow-y":"auto",width:"100%"}},$={class:"list-table-tool lyecs-search-warp",style:{position:"absolute",top:"0"}},ee={class:"list-table-tool-row",style:{"margin-bottom":"5px"}},te={class:"list-table-tool-col"},oe={style:{"padding-right":"15px","box-sizing":"border-box"}},le={class:"empty-warp"},se={key:0,class:"empty-bg"},ae={key:0,class:"pagination-con",style:{position:"absolute",bottom:"0","justify-content":"right",display:"flex",width:"100%",margin:"0"}},ne=E({__name:"SelectShop",props:S({selected_ids:{type:Array,default:[]},isMultiple:{type:Boolean,default:!0}},{linkSelectData:{},linkSelectDataModifiers:{}}),emits:S(["submitCallback","okType"],["update:linkSelectData"]),setup(_,{expose:x,emit:C}){const m=_,z=j(_,"linkSelectData"),d=C;d("okType",!1),c(1);const r=c(!0),l=c([]),u=c(0),M=Q(),v=c([]),s=q({page:1,size:M.get("page_size"),sort_field:"",sort_order:"",keyword:""}),f=async()=>{r.value=!0;try{const t=await W({...s});v.value=t.filter_result,u.value=t.total}catch(t){J.error(t.message)}finally{r.value=!1}};A(()=>{f()});const y=t=>{f()},V=t=>{m.isMultiple&&(l.value=t.map(e=>e.shop_id),d("okType",l.value.length>0))},b=c(),D=(t,e)=>{if(!m.isMultiple){if(b.value.clearSelection(),t.length==0){l.value=[];return}b.value.toggleRowSelection(e,!0),l.value.length=0,l.value.push(e.shop_id),d("okType",l.value.length>0),z.value={path:"shop",label:"店铺",id:e.shop_id,name:e.shop_title,data:{id:e.shop_id,name:e.shop_title}}}},T=t=>!m.selected_ids.includes(t.shop_id);return x({onFormSubmit:()=>{console.log(l.value),d("submitCallback",l.value)}}),(t,e)=>{const B=a("el-input"),F=a("el-button"),N=a("el-space"),R=a("el-form"),k=a("el-table-column"),I=a("el-table"),P=a("a-spin"),U=a("perfect-scrollbar");return h(),g("div",X,[n("div",Y,[n("div",Z,[n("div",$,[o(R,{model:s,name:"form",onFinish:y},{default:i(()=>[n("div",ee,[n("div",te,[o(N,null,{default:i(()=>[o(B,{modelValue:s.keyword,"onUpdate:modelValue":e[0]||(e[0]=p=>s.keyword=p),placeholder:"请输入搜索关键字"},null,8,["modelValue"]),o(F,{onClick:y},{default:i(()=>e[3]||(e[3]=[G("搜索")])),_:1})]),_:1})]),e[4]||(e[4]=n("div",{class:"list-table-tool-col"},null,-1))])]),_:1},8,["model"])]),o(U,{class:"table-container",style:{position:"absolute",top:"50px",bottom:"50px","overflow-y":"auto",width:"100%"}},{default:i(()=>[o(P,{spinning:r.value},{default:i(()=>[n("div",oe,[o(I,{class:L([_.isMultiple?"":"hide-checkbox","result-table"]),ref_key:"tableRef",ref:b,data:v.value,"row-key":"shop_id",onSelect:D,onSelectionChange:V,total:u.value,loading:r.value},{empty:i(()=>[n("div",le,[r.value?w("",!0):(h(),g("div",se,"暂无数据"))])]),default:i(()=>[o(k,{selectable:T,type:"selection",width:"32"}),o(k,{label:"店铺名称",prop:"shop_title"})]),_:1},8,["class","data","total","loading"])])]),_:1},8,["spinning"])]),_:1}),u.value>0?(h(),g("div",ae,[o(H(O),{page:s.page,"onUpdate:page":e[1]||(e[1]=p=>s.page=p),size:s.size,"onUpdate:size":e[2]||(e[2]=p=>s.size=p),total:u.value,onCallback:f},null,8,["page","size","total"])])):w("",!0)])])])}}}),fe=K(ne,[["__scopeId","data-v-e937a0ab"]]);export{fe as default};
