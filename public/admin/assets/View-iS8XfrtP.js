import{d as N,bj as J,i as k,dF as L,C as Y,aa as R,q as Z,Q as ae,r as V,c as n,o as t,F as c,e,b as y,w as g,f as d,g as o,a as U,n as f,M as j,D as w,j as S,aW as oe,A as le,_ as O,dC as q,a0 as K,dw as ie,e4 as re,a1 as ue,du as ce,aN as Q,I as X,dN as de,dt as pe}from"./index-CGYuOau0.js";import{i as E,u as G,r as H}from"./format-DFT-VJzO.js";import{l as _e,M as me,c as ve,p as he,_ as fe,a as ge}from"./pageTabs-DhFiazHe.js";import{l as ke}from"./logo_blue2-CgAHBmsI.js";import{u as ee}from"./theme-pPmOEjl9.js";import{u as ye}from"./config-DNllFJyR.js";import{g as we}from"./adminMsg-B0ORefAQ.js";import{S as be}from"./SelectShop-CfOn5Q7n.js";import{u as Se}from"./menus-twiYEIYr.js";import"./index-B-GURfkM.js";import"./version-CpBOsX2d.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";import"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-CjXfTDg5.js";import"./vuedraggable.umd-_1km55l4.js";import"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import"./authority-PNyDJWKD.js";const $e={class:"main-menu-logo"},Ce={class:"lyecs-openPage","data-href":"index.html","data-tag":"default",title:"起始页",style:{padding:"0 3px"}},xe=["src"],Me=["src"],Te={key:0},Ve=["onClick","href"],Ae={class:"nav-tit"},ze={class:"child-tit"},Ie=["onClick"],Pe={class:"nav-title"},Ue={key:0,class:"menu-chider"},Be=["onClick"],Le={class:"nav-title"},Ee=["target","onClick"],Ne={class:"nav-title"},De=N({__name:"pageLeftMenu",setup(D){const{themeInfo:p}=ee(),v=J().licensedData,h=k(localStorage.getItem("adminType")),i=L(),m=Y(),x=L(),$=k([]);k([]),$.value=m.currentRoute.value.matched;const b=R(()=>x.mainMenu);Z(()=>{I(b.value)});const I=(_,l=1,r=!1)=>{_.forEach(a=>{r==!0&&l==2?$.value[l].name===a.authority_sn&&(a.current=!0):a.current=$.value[l]?$.value[l].name===a.authority_sn:!1,l==2&&a.children&&a.children.length>0&&(a.current=!0),a.children&&I(a.children,l+1,r)})},P=(_,l=!1)=>{window.innerWidth<=756?l?(b.value.forEach(r=>{r.current=!1}),_.current=!0):(_.blank?window.open("/"+_.route_link,"_blank"):m.push("/"+_.route_link),i.menuActive=!1):(l&&b.value.forEach(r=>{r.children&&r.children.length>0&&r.children.forEach(a=>{a.current=!0})}),_.blank?window.open("/"+_.route_link,"_blank"):m.push("/"+_.route_link),le(),i.childMenuShow=!0)};return ae(()=>{$.value=m.currentRoute.value.matched,I(b.value,1,!0)}),(_,l)=>{const r=V("perfect-scrollbar");return t(),n(c,null,[e("div",{class:f(["body-menu",{active:o(i).menuActive,shop_admin:h.value==="shop",dark:o(p).navTheme==="dark"}])},[y(r,{class:"main-menu"},{default:g(()=>[e("div",$e,[e("a",Ce,[h.value==="shop"||o(p).navTheme==="dark"?(t(),n("img",{key:0,src:o(v).admin_dark_logo?o(E)(o(v).admin_dark_logo):o(_e)},null,8,xe)):(t(),n("img",{key:1,src:o(v).admin_light_logo?o(E)(o(v).admin_light_logo):o(ke)},null,8,Me))])]),b.value?(t(),n("ul",Te,[(t(!0),n(c,null,U(b.value,(a,F)=>(t(),n(c,null,[a.is_show?(t(),n("li",{key:0,class:f("main-menu-item menu_"+a.authority_sn+" "+(a.current?"current":""))},[e("a",{onClick:j(u=>P(a,!0),["prevent"]),class:"menu-tit",href:"/"+a.route_link},[e("i",{class:f(a.authority_ico)},null,2),e("span",Ae,w(a.authority_name),1)],8,Ve)],2)):d("",!0)],64))),256)),l[2]||(l[2]=e("li",{style:{height:"80px"}},null,-1))])):d("",!0)]),_:1}),e("div",{class:f("child-menu "+(o(i).childMenuShow?"child-menu-show":"child-menu-hide"))},[(t(!0),n(c,null,U(b.value,(a,F)=>(t(),n(c,null,[a.current&&a.is_show?(t(),S(r,{key:0,class:"child_warp",options:{suppressScrollX:!0}},{default:g(()=>[e("div",ze,w(a.authority_name),1),e("ul",null,[(t(!0),n(c,null,U(a.children,(u,A)=>(t(),n(c,null,[u.children?(t(),n(c,{key:0},[u.is_show?(t(),n("li",{key:0,class:f("menu-item "+(u.current?"cur":""))},[e("a",{class:"menu-item-a",onClick:C=>u.current=!u.current},[l[3]||(l[3]=e("i",{class:"nav-icon iconfont icon-xiala"},null,-1)),e("span",Pe,w(u.authority_name),1)],8,Ie),u.current?(t(),n("div",Ue,[e("ul",null,[(t(!0),n(c,null,U(u.children,(C,W)=>(t(),n(c,null,[C.is_show?(t(),n("li",{key:0,class:f("menu-item menu-chider-item "+(C.current?"current":""))},[e("a",{class:"",onClick:j(M=>P(C),["prevent"])},[l[4]||(l[4]=e("i",{class:"nav-icon iconfont"},null,-1)),e("span",Le,w(C.authority_name),1)],8,Be)],2)):d("",!0)],64))),256))])])):d("",!0)],2)):d("",!0)],64)):(t(),n(c,{key:1},[u.is_show?(t(),n("li",{key:0,class:f("menu-item "+($.value[2].name==`${u.authority_sn}`?"current":""))},[e("a",{class:"menu-item-a",target:u.blank?"_blank":"",onClick:j(C=>P(u),["prevent"])},[e("span",Ne,w(u.authority_name),1)],8,Ee)],2)):d("",!0)],64))],64))),256)),l[5]||(l[5]=e("li",{style:{height:"80px"}},null,-1))])]),_:2},1024)):d("",!0)],64))),256)),e("div",{class:"menu-bar-btn ng-scope",id:"menu-bar-btn",onClick:l[0]||(l[0]=a=>o(i).childMenuShow=!o(i).childMenuShow)},l[6]||(l[6]=[oe('<div class="menu-bar-inner" data-v-edd53248><div class="menu-bar-bg" data-v-edd53248></div><div class="product-navbar-collapse" data-v-edd53248><span class="icon-collapse-left iconfont" data-v-edd53248></span><span class="icon-collapse-right iconfont" data-v-edd53248></span></div></div>',1)]))],2)],2),e("div",{class:f(["body-menu-mask",{active:o(i).menuActive}]),onClick:l[1]||(l[1]=a=>o(i).menuActive=!o(i).menuActive)},null,2)],64)}}}),Fe=O(De,[["__scopeId","data-v-edd53248"]]),je={class:"page-top-warp"},qe={class:"top-bar-left"},Re={class:"top-bar-item wap-show",style:{display:"none"}},Oe=["href"],We={key:0,class:"shop-tit"},Ke={key:0,class:"label"},Qe={key:1,class:"label green"},Xe={key:1},Ge={class:"top-bar-item top-bar-search-warp"},He={class:"top-bar-search"},Je={class:"search-menu-con"},Ye={class:"search-menu-list"},Ze=["onClick"],et={key:0,class:"empty"},tt={class:"top-bar-right"},st={class:"top-bar-item mr10"},nt={class:"auth-img"},at=["src"],ot={class:"top-bar-item openShop-btn"},lt=["href"],it={class:"top-bar-item top-bar-user",id:"dropdown-memu"},rt={class:"admin-user-warp"},ut={class:"top-bar-btn",href:"javascript:;"},ct={key:0,class:"admin-user-photo"},dt=["src"],pt=["src"],_t={key:1,class:"admin-user-photo"},mt=["src"],vt=["src"],ht={class:"admin-user-name"},ft={class:"dropdown-memu top-bar-memu"},gt={class:"entrance-list"},kt={class:"admin_exit"},yt=N({__name:"pageTopBar",setup(D){const p=k(localStorage.getItem("adminType")),z=Y(),v=J(),h=L(),i=k(""),m=k([]),x=k(!1),$=async M=>{try{const s=await we({keyword:i.value});m.value=s.item,i.value&&(x.value=!0)}catch(s){X.error(s.message)}},b=M=>{x.value=!1,i.value="",m.value=[],z.push({path:"/"+M})},I=()=>{i.value==""&&(x.value=!1)},P=()=>{x.value=!1},{logout:_,updateUserInfo:l}=q(),r=R(()=>q().userInfo),a=R(()=>q().shopInfo);k(0);const F=async()=>{try{const M=await ve(),s=ye();l(),s.updateConfig(),h.mainMenu=await Se(),de.success({message:"缓存已清除",description:"缓存清除后可刷新页面更新效果"})}catch(M){X.error(M.message)}},u=async()=>{_()},A=k(!1),C=()=>{A.value=!0},W=()=>{A.value=!1};return Z(()=>{v._getLicensed()}),(M,s)=>{const te=V("el-input"),B=V("router-link"),se=V("a-dropdown"),ne=V("el-dialog");return t(),n(c,null,[e("div",{class:f(["page-top",{shop_admin:p.value==="merchant"}])},[e("div",je,[e("div",qe,[e("div",{class:"top-bar-item wap-show",onClick:s[0]||(s[0]=T=>o(h).menuActive=!o(h).menuActive)},s[3]||(s[3]=[e("span",{class:"open-menu-btn icon-zhankai iconfont"},null,-1)])),s[5]||(s[5]=e("div",{class:"top-bar-item wap-show"},[e("a",{class:"wap-refresh-btn icon-shuaxin iconfont",href:"javascript:;",onclick:"location.reload();"})],-1)),e("div",Re,[e("a",{class:"wap-openShop-btn icon-wangdianwaibao iconfont",href:o(G)("/"),target:"_blank"},null,8,Oe)]),p.value==="shop"?(t(),n("div",We,[e("h2",null," 当前店铺: "+w(a.value.shop_title),1),a.value.status===0?(t(),n("div",Ke,w(a.value.status_text),1)):(t(),n("div",Qe,w(a.value.status_text),1))])):K((t(),n("div",Xe,[e("div",Ge,[e("div",He,[y(te,{modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=T=>i.value=T),style:{width:"300px"},placeholder:"在这里查找功能，一键直达","prefix-icon":o(re),onInput:$,onBlur:I},null,8,["modelValue","prefix-icon"])])]),K(e("div",Je,[s[4]||(s[4]=e("div",{class:"search-menu-title"},"搜索结果",-1)),e("div",Ye,[(t(!0),n(c,null,U(m.value,T=>(t(),n("div",{class:"menu-item",onClick:Ct=>b(T.route_link)},[e("p",null,w(T.authority_name),1)],8,Ze))),256)),m.value.length<1?(t(),n("div",et,"没有搜索到栏目！")):d("",!0)])],512),[[ue,x.value]])])),[[o(ie),P]])]),e("div",tt,[e("div",st,[e("div",nt,[p.value!=="shop"?(t(),S(B,{key:0,to:{path:"/setting/licensed/index"}},{default:g(()=>[e("img",{src:o(ce)(),style:{height:"25px","margin-top":"2px"}},null,8,at)]),_:1})):d("",!0)])]),y(me),e("div",ot,[e("a",{class:"top-bar-btn",href:o(G)("/"),target:"_blank"},s[6]||(s[6]=[e("i",{class:"iconfont icon-guanli"},null,-1),e("span",null,"查看店铺",-1)]),8,lt)]),e("div",it,[y(se,null,{overlay:g(()=>[e("div",ft,[e("div",gt,[y(B,{to:{path:"/authority/account_editing/index"}},{default:g(()=>s[8]||(s[8]=[e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-gerenshezhi",style:{"font-size":"22px"}}),e("span",null,"管理账号")],-1)])),_:1}),e("p",{class:"entrance",onClick:F},s[9]||(s[9]=[e("i",{class:"iconfont icon-qingchuhuancun",style:{"font-size":"22px"}},null,-1),e("span",null,"清除缓存",-1)])),p.value==="shop"?(t(),S(B,{key:0,to:{path:"/merchant_setting/shop_team"}},{default:g(()=>s[10]||(s[10]=[e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-quanxian",style:{"font-size":"22px"}}),e("span",null,"店铺设置")],-1)])),_:1})):(t(),S(B,{key:1,to:{path:"/setting/config/base"}},{default:g(()=>s[11]||(s[11]=[e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-quanxian",style:{"font-size":"22px"}}),e("span",null,"后台设置")],-1)])),_:1}))]),e("div",null,[e("div",kt,[p.value==="shop"?(t(),n(c,{key:0},[e("a",{onClick:C},s[12]||(s[12]=[e("span",null,"切换店铺",-1)])),s[13]||(s[13]=e("span",{style:{color:"#f0f2f5"}},"｜",-1))],64)):d("",!0),e("a",{onClick:u},s[14]||(s[14]=[e("span",null,"退出登录",-1)]))])])])]),default:g(()=>[e("div",rt,[e("a",ut,[p.value!=="shop"?(t(),n("span",ct,[o(Q)(String(r.value.avatar))=="def"?(t(),n("img",{key:0,src:o(H)(r.value.avatar)},null,8,dt)):(t(),n("img",{key:1,src:o(E)(r.value.avatar)},null,8,pt))])):d("",!0),p.value=="shop"?(t(),n("span",_t,[o(Q)(String(a.value.adminUserShop.avatar))=="def"?(t(),n("img",{key:0,src:o(H)(a.value.adminUserShop.avatar)},null,8,mt)):(t(),n("img",{key:1,src:o(E)(a.value.adminUserShop.avatar)},null,8,vt))])):d("",!0),e("div",ht,w(/^1[3-9]\d{9}$/.test(r.value.username)?r.value.username.replace(/(\d{3})\d{4}/,"$1****"):r.value.username),1),s[7]||(s[7]=e("i",{class:"iconfont icon-xiala"},null,-1))])])]),_:1})])])])],2),y(ne,{class:"page-top","show-close":!1,"z-index":"12",modelValue:A.value,"onUpdate:modelValue":s[2]||(s[2]=T=>A.value=T),width:"500px"},{default:g(()=>[A.value?(t(),S(be,{key:0,onClosePopup:W,isIndex:!0,username:r.value.username},null,8,["username"])):d("",!0)]),_:1},8,["modelValue"])],64)}}}),wt=O(yt,[["__scopeId","data-v-f8239a98"]]),bt={class:"page-grid-content"},St=N({__name:"pageContainer",setup(D){const p=pe(),{themeInfo:z}=ee();k(localStorage.getItem("adminType"));const v=L();return(h,i)=>{const m=V("router-view");return t(),n(c,null,[i[0]||(i[0]=e("div",{class:"body-menu-mask"},null,-1)),e("div",{class:f(["main-warp",[o(v).childMenuShow?"child-menu-show":"child-menu-hide"]])},[e("div",bt,[!h.$route.meta.is404&&o(z).isMultiLabel?(t(),S(he,{key:0})):d("",!0),h.$route.meta.is404?d("",!0):(t(),S(fe,{key:1})),(t(),S(m,{key:o(p).routerKey})),h.$route.meta.is404?d("",!0):(t(),S(ge,{key:2}))])],2)],64)}}}),$t=O(St,[["__scopeId","data-v-c861c18d"]]),Rt=N({__name:"View",setup(D){return(p,z)=>{const v=V("router-view");return t(),n(c,null,[y(wt),y(Fe),y($t,null,{default:g(()=>[y(v)]),_:1})],64)}}});export{Rt as default};
