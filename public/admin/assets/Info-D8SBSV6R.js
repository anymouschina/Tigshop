import{d as N,i as d,C as D,s as O,q as R,r as i,c as q,o as y,e as p,j as U,f as G,b as o,w as s,a0 as h,g as j,E,a1 as I,I as _}from"./index-CGYuOau0.js";import{F as A}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-CjXfTDg5.js";import{a as M,c as T}from"./friendLinks-C5MQcpQ9.js";import"./index-B-GURfkM.js";import"./vuedraggable.umd-_1km55l4.js";import"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";const z={class:"container"},H={class:"content_wrapper"},J={class:"lyecs-form-table"},le=N({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:w,emit:x}){const u=x,r=V,m=d(!0),v=D().currentRoute.value.query,c=d(r.isDialog?r.act:String(v.act)),g=d(r.isDialog?r.id:Number(v.id)),C=c.value==="add"?"create":"update",b=O(),t=d({sort_order:50}),L=async()=>{try{const l=await M(c.value,{id:g.value});Object.assign(t.value,l.item)}catch(l){_.error(l.message),u("close")}finally{m.value=!1}};R(()=>{c.value==="detail"?L():m.value=!1});const k=async()=>{await b.value.validate();try{u("update:confirmLoading",!0);const l=await T(C,{id:g.value,...t.value});u("submitCallback",l),_.success(l.message)}catch(l){_.error(l.message)}finally{u("update:confirmLoading",!1)}};return w({onFormSubmit:()=>{k()}}),(l,e)=>{const f=i("el-input"),n=i("el-form-item"),F=i("el-button"),S=i("el-form"),B=i("a-spin");return y(),q("div",z,[p("div",H,[p("div",J,[m.value?G("",!0):(y(),U(S,{key:0,ref_key:"formRef",ref:b,model:t.value,"label-width":"auto"},{default:s(()=>[o(n,{rules:[{required:!0,message:"链接名称不能为空!"}],label:"链接名称",prop:"link_title"},{default:s(()=>[o(f,{modelValue:t.value.link_title,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.link_title=a)},null,8,["modelValue"]),e[4]||(e[4]=p("div",{class:"extra"},"当你添加文字链接时, 链接LOGO为你的链接名称",-1))]),_:1}),o(n,{label:"链接地址",prop:"link_url"},{default:s(()=>[o(f,{modelValue:t.value.link_url,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.link_url=a),type:"text"},null,8,["modelValue"])]),_:1}),o(n,{label:"链接LOGO",prop:"link_logo"},{default:s(()=>[o(j(A),{photo:t.value.link_logo,"onUpdate:photo":e[2]||(e[2]=a=>t.value.link_logo=a)},null,8,["photo"]),e[5]||(e[5]=p("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1))]),_:1}),o(n,{label:"排序",prop:"sort_order"},{default:s(()=>[o(f,{modelValue:t.value.sort_order,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.sort_order=a)},null,8,["modelValue"])]),_:1}),h(o(n,{"wrapper-col":{offset:4,span:16}},{default:s(()=>[o(F,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:k},{default:s(()=>e[6]||(e[6]=[E("提交")])),_:1},512)]),_:1},512),[[I,!r.isDialog]])]),_:1},8,["model"])),o(B,{spinning:m.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{le as default};
