import{d as B,K as O,i as f,G as q,q as A,c as v,e,b as o,w as s,N as F,f as h,g as u,I as y,r as i,o as g,E as m,D as U}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{D as E}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as L}from"./Pagination-wR9huHyl.js";import{g as M,d as $,b as K}from"./productGroup-BlnNtZy_.js";import{_ as G}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const R={class:"container"},j={class:"content_wrapper"},H={class:"lyecs-table-list-warp"},J={class:"list-table-tool lyecs-search-warp"},Q={class:"advanced-search-warp list-table-tool-row"},W={class:"simple-form-warp"},X={class:"simple-form-field"},Y={class:"form-group"},Z={class:"control-container"},tt={class:"simple-form-field"},et={class:"form-group"},ot={class:"control-container"},st={class:"simple-form-field"},at={class:"form-group"},nt={class:"control-container"},lt={key:0},rt={class:"table-container"},it={style:{position:"relative"}},dt={class:"empty-warp"},pt={key:0,class:"empty-bg"},ct={key:0,class:"pagination-con"},yt=B({__name:"List",setup(ut){const C=O(),k=f([{productGroupName:"最新商品",productGroupSn:"",productGroupDescription:"",addTime:"-",introType:"new"}]),p=f(!0),_=f(0),c=f([]),n=q({page:1,size:C.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),r=async()=>{p.value=!0;try{const a=await M({...n});k.value=a.records,_.value=a.total}catch(a){y.error(a.message)}finally{p.value=!1}};A(()=>{r()});const b=()=>{r()},S=({prop:a,order:t})=>{n.sortField=a,n.sortOrder=t=="ascending"?"asc":t=="descending"?"desc":"",r()},I=async a=>{try{const t=await K(a,{ids:c.value});y.success("操作成功"),await r()}catch(t){y.error(t.message)}},D=a=>{c.value=a.map(t=>t.productGroupId)};return(a,t)=>{const w=i("el-button"),x=i("TigInput"),z=i("el-popconfirm"),N=i("el-form"),d=i("el-table-column"),V=i("el-divider"),T=i("el-table"),P=i("a-spin");return g(),v("div",R,[e("div",j,[e("div",H,[e("div",J,[o(N,{model:n,onSubmit:F(b,["prevent"])},{default:s(()=>[e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[o(x,{modelValue:n.keyword,"onUpdate:modelValue":t[0]||(t[0]=l=>n.keyword=l),name:"keyword",placeholder:"输入分组名称",clearable:"",onClear:b},{append:s(()=>[o(w,{onClick:b},{default:s(()=>t[4]||(t[4]=[e("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),e("div",tt,[e("div",et,[e("div",ot,[o(u(G),{params:{act:"add"},isDrawer:"",path:"product/productGroup/Info",title:"添加分组",width:"600px",onOkCallback:r},{default:s(()=>[o(w,{type:"primary"},{default:s(()=>t[5]||(t[5]=[m("添加分组")])),_:1})]),_:1})])])]),e("div",st,[e("div",at,[e("div",nt,[o(z,{title:"您确认要批量删除所选数据吗？",onConfirm:t[1]||(t[1]=l=>I("del"))},{reference:s(()=>[o(w,{disabled:c.value.length===0},{default:s(()=>t[6]||(t[6]=[m("批量删除")])),_:1},8,["disabled"])]),_:1}),c.value.length>0?(g(),v("span",lt,[t[7]||(t[7]=m(" 已选择：")),e("b",null,U(c.value.length),1),t[8]||(t[8]=m(" 项 "))])):h("",!0)])])])])])]),_:1},8,["model"])]),e("div",rt,[o(P,{spinning:p.value},{default:s(()=>[o(T,{data:k.value,loading:p.value,total:_.value,"row-key":"productGroupId",onSelectionChange:D,"show-overflow-tooltip":"",onSortChange:S},{empty:s(()=>[e("div",dt,[p.value?h("",!0):(g(),v("div",pt,"暂无数据"))])]),default:s(()=>[o(d,{type:"selection",width:"32"}),o(d,{label:"分组名称",prop:"productGroupName"}),o(d,{label:"分组别名",prop:"productGroupSn"}),o(d,{prop:"productGroupDescription",label:"分组描述"}),o(d,{label:"添加时间",prop:"addTime",sortable:"custom"}),o(d,{width:150,fixed:"right",label:"操作"},{default:s(({row:l})=>[e("div",it,[o(u(G),{params:{act:"detail",id:l.productGroupId},isDrawer:"",path:"product/productGroup/Info",title:"编辑分组",width:"600px",onOkCallback:r},{default:s(()=>t[9]||(t[9]=[e("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(V,{direction:"vertical"}),o(u(E),{params:{id:l.productGroupId},requestApi:u($),onAfterDelete:r},{default:s(()=>t[10]||(t[10]=[m("删除")])),_:2},1032,["params","requestApi"])])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),_.value>0?(g(),v("div",ct,[o(u(L),{page:n.page,"onUpdate:page":t[2]||(t[2]=l=>n.page=l),size:n.size,"onUpdate:size":t[3]||(t[3]=l=>n.size=l),total:_.value,onCallback:r},null,8,["page","size","total"])])):h("",!0)])])])])}}});export{yt as default};
