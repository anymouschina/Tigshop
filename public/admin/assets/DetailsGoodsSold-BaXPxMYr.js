import{d as N,K as U,i as v,G,L as B,q as P,r,c as b,o as y,b as t,e as n,w as s,g as d,E as p,f as h,D as c,I as k,_ as L}from"./index-DrbzVNl6.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import"./index-CeQDmMxd.js";import{u as K,i as O,p as x}from"./format-CRgx78oe.js";/* empty css                                                                    */import{P as X}from"./Pagination-wR9huHyl.js";/* empty css                                                                  *//* empty css                                                                              */import{S as j}from"./SelectTimeInterval-C-WvSG46.js";/* empty css             */import{f as C}from"./time-Bh5UhrfW.js";import{a as A,e as H}from"./statisticsSale-ZbsvwGua.js";import{r as J}from"./export-D_WXJj3y.js";const Q={class:"DetailsGoodsSold"},R={class:"filtrate-menu"},W={class:"table-container"},Z={class:"flex"},$={key:0,class:"span-pic"},ee=["href"],te=["src"],ae={class:"span-product-con"},oe={class:"span-product-name"},se={class:"empty-warp"},le={key:0,class:"empty-bg"},ne={key:0,class:"pagination-con"},re=N({__name:"DetailsGoodsSold",setup(ie){const w=U(),m=v(!1),D=v(),u=v(0),o=G({page:1,size:w.pageSize,keyword:"",startTime:C(B(30,"sub"),"YYYY-MM-DD"),endTime:C(new Date,"YYYY-MM-DD")}),_=async()=>{m.value=!0;try{const l=await A(o);D.value=l.records,u.value=l.total}catch(l){k.error(l.message),console.error(l)}finally{m.value=!1}},E=()=>{_()},f=v(!1),Y=async()=>{f.value=!0;try{const l=await H({...o,isExport:"1"});f.value=!1,J(l,"销售明细导出")}catch(l){k.error(l.message)}finally{f.value=!1}};P(()=>{_()});const z=({prop:l,order:a})=>{o.sortField=l,o.sortOrder=a=="ascending"?"asc":a=="descending"?"desc":"",_()},I=()=>{_()};return(l,a)=>{const g=r("el-form-item"),V=r("TigInput"),S=r("el-button"),q=r("el-form"),i=r("el-table-column"),F=r("el-table"),M=r("a-spin");return y(),b("div",Q,[t(q,{model:o},{default:s(()=>[n("div",R,[t(g,{class:"mr-10"},{default:s(()=>[t(d(j),{type:"date","start-date":o.startTime,"onUpdate:startDate":a[0]||(a[0]=e=>o.startTime=e),"end-date":o.endTime,"onUpdate:endDate":a[1]||(a[1]=e=>o.endTime=e)},null,8,["start-date","end-date"])]),_:1}),t(g,{class:"mr-10"},{default:s(()=>[t(V,{modelValue:o.keyword,"onUpdate:modelValue":a[2]||(a[2]=e=>o.keyword=e),placeholder:"输入商品名称或商品编号"},null,8,["modelValue"])]),_:1}),t(g,{class:"mr-10"},{default:s(()=>[t(S,{plain:"",onClick:E},{default:s(()=>a[5]||(a[5]=[p("搜索")])),_:1})]),_:1}),t(g,{class:"mr-10"},{default:s(()=>[t(S,{plain:"",onClick:Y,loading:f.value},{default:s(()=>a[6]||(a[6]=[p("导出EXCEL")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"]),n("div",W,[t(M,{spinning:m.value},{default:s(()=>[t(F,{data:D.value,total:u.value,onSortChange:z},{empty:s(()=>[n("div",se,[m.value?h("",!0):(y(),b("div",le,"暂无数据"))])]),default:s(()=>[t(i,{label:"商品名称",prop:"productId","min-width":320},{default:s(({row:e})=>[n("div",Z,[e.picThumb?(y(),b("div",$,[n("a",{href:d(K)({path:"product",id:e.productId}),target:"_blank"},[n("img",{src:d(O)(e.picThumb),height:"50",width:"50"},null,8,te)],8,ee)])):h("",!0),n("div",ae,[n("div",oe,c(e.productName),1)])])]),_:1}),t(i,{prop:"productSn",label:"商品编号"}),t(i,{porp:"quantity",label:"购买数量"},{default:s(({row:e})=>[p(c(e.quantity),1)]),_:1}),t(i,{label:"单价"},{default:s(({row:e})=>[p(c(d(x)(e.price)),1)]),_:1}),t(i,{label:"小计"},{default:s(({row:e})=>[p(c(d(x)(e.price*e.quantity)),1)]),_:1}),t(i,{prop:"addTime",width:"200",sortable:"custom",label:"下单时间"},{default:s(({row:e})=>{var T;return[p(c((T=e.orders)==null?void 0:T.addTime),1)]}),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),u.value>0?(y(),b("div",ne,[t(d(X),{page:o.page,"onUpdate:page":a[3]||(a[3]=e=>o.page=e),size:o.size,"onUpdate:size":a[4]||(a[4]=e=>o.size=e),total:u.value,onCallback:I},null,8,["page","size","total"])])):h("",!0)])])}}}),Se=L(re,[["__scopeId","data-v-79088e49"]]);export{Se as default};
