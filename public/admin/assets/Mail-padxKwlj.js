/* empty css             */import{y as V,d as B,i as g,s as k,q as C,c as F,e as d,b as l,w as t,I as f,r as m,o as E,E as u,_ as G}from"./index-CGYuOau0.js";const I=i=>V({url:"setting/config/get_base",method:"get",params:i}),L=i=>V({url:"setting/config/save_mail",method:"post",data:i}),N=i=>V({url:"setting/config/send_test_email",method:"post",data:i}),P={class:"container"},R={class:"content_wrapper"},q={class:"lyecs-form-table"},Q={class:"selected-action-warp"},W={class:"selected-action",style:{"padding-left":"80px"}},j=B({__name:"Mail",emits:["submitCallback","update:confirmLoading","close"],setup(i,{expose:w,emit:z}){const p=g(!1),b=g(!0),U=k(),a=g({}),c=async()=>{try{const o=await I({code:"mail_server"});Object.assign(a.value,o.item)}catch(o){f.error(o.message)}finally{b.value=!1}};C(()=>{c()});const S=async()=>{p.value=!0;try{const o=await N({code:"mail_server",test_mail_address:a.value.test_mail_address});f.success(o.message)}catch(o){f.error(o.message)}finally{p.value=!1}},y=async()=>{p.value=!0;try{const o=await L({code:"mail_server",...a.value});f.success(o.message)}catch(o){f.error(o.message)}finally{p.value=!1}};return w({onFormSubmit:()=>{y()}}),(o,e)=>{const r=m("el-radio"),v=m("el-radio-group"),n=m("el-form-item"),_=m("el-input"),x=m("el-button"),M=m("el-form"),T=m("a-spin");return E(),F("div",P,[d("div",R,[d("div",q,[e[22]||(e[22]=d("div",{class:"notice-warp"},[d("p",null," 提示：推荐使用QQ的域名邮箱（免费），设置流程请看Tigshop教程，另外请确保服务器防火墙未拦截邮箱发送，且对应的端口开放。")],-1)),l(T,{spinning:b.value,style:{width:"100%","margin-top":"100px"}},{default:t(()=>[l(M,{ref_key:"formRef",ref:U,model:a.value,"label-width":"auto"},{default:t(()=>[l(n,{label:"邮件服务",prop:"mail_service"},{default:t(()=>[l(v,{modelValue:a.value.mail_service,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.mail_service=s),class:"itemWidth"},{default:t(()=>[l(r,{value:0},{default:t(()=>e[9]||(e[9]=[u("本地邮件服务器")])),_:1}),l(r,{value:1},{default:t(()=>e[10]||(e[10]=[u("SMTP服务")])),_:1})]),_:1},8,["modelValue"]),e[11]||(e[11]=d("div",{class:"extra"},"如果您选择了采用服务器内置的 Mail 服务，您不需要填写下面的内容。",-1))]),_:1}),l(n,{label:"是否加密连接(SSL)",prop:"smtp_ssl"},{default:t(()=>[l(v,{modelValue:a.value.smtp_ssl,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.smtp_ssl=s),class:"itemWidth"},{default:t(()=>[l(r,{value:1},{default:t(()=>e[12]||(e[12]=[u("是")])),_:1}),l(r,{value:0},{default:t(()=>e[13]||(e[13]=[u("否")])),_:1})]),_:1},8,["modelValue"]),e[14]||(e[14]=d("div",{class:"extra"},"SMTP一般要求加密",-1))]),_:1}),l(n,{label:"发送邮件服务器地址(SMTP)",prop:"smtp_host"},{default:t(()=>[l(_,{modelValue:a.value.smtp_host,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.smtp_host=s),type:"text"},null,8,["modelValue"]),e[15]||(e[15]=d("div",{class:"extra"},"邮件服务器主机地址。如果本机可以发送邮件则设置为localhost",-1))]),_:1}),l(n,{label:"服务器端口",prop:"smtp_port"},{default:t(()=>[l(_,{modelValue:a.value.smtp_port,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.smtp_port=s),type:"text"},null,8,["modelValue"])]),_:1}),l(n,{label:"邮件发送帐号",prop:"smtp_user"},{default:t(()=>[l(_,{modelValue:a.value.smtp_user,"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.smtp_user=s),type:"text"},null,8,["modelValue"]),e[16]||(e[16]=d("div",{class:"extra"},"发送邮件所需的认证帐号，如果没有就为空着",-1))]),_:1}),l(n,{label:"帐号密码",prop:"smtp_pass"},{default:t(()=>[l(_,{modelValue:a.value.smtp_pass,"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.smtp_pass=s),type:"password"},null,8,["modelValue"])]),_:1}),l(n,{label:"邮件回复地址",prop:"smtp_mail"},{default:t(()=>[l(_,{modelValue:a.value.smtp_mail,"onUpdate:modelValue":e[6]||(e[6]=s=>a.value.smtp_mail=s),type:"text"},null,8,["modelValue"])]),_:1}),l(n,{label:"邮件编码",prop:"mail_charset"},{default:t(()=>[l(v,{modelValue:a.value.mail_charset,"onUpdate:modelValue":e[7]||(e[7]=s=>a.value.mail_charset=s)},{default:t(()=>[l(r,{label:"UTF8"},{default:t(()=>e[17]||(e[17]=[u("国际编码(UTF8)")])),_:1}),l(r,{label:"GB2312"},{default:t(()=>e[18]||(e[18]=[u("简体中文(GB2312)")])),_:1}),l(r,{label:"BIG5"},{default:t(()=>e[19]||(e[19]=[u("繁体中文(BIG5)")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"测试邮件地址",prop:"test_mail_address"},{default:t(()=>[l(_,{modelValue:a.value.test_mail_address,"onUpdate:modelValue":e[8]||(e[8]=s=>a.value.test_mail_address=s),type:"text"},{append:t(()=>[l(x,{loading:p.value,onClick:S},{default:t(()=>e[20]||(e[20]=[u("发送测试邮件 ")])),_:1},8,["loading"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),d("div",Q,[d("div",W,[l(x,{loading:p.value,class:"form-submit-btn",size:"large",type:"primary",onClick:y},{default:t(()=>e[21]||(e[21]=[u("提 交")])),_:1},8,["loading"])])])]),_:1},8,["spinning"])])])])}}}),H=G(j,[["__scopeId","data-v-bf0602e9"]]);export{H as default};
