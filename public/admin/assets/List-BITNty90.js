import{d as ce,i as h,K as me,G as z,C as fe,q as ve,b1 as be,ad as _e,c as m,e as l,f as d,b as o,w as r,M as U,g as i,I,r as y,o as a,F,a as B,j as v,E as u,D as _,n as ge,_ as ye}from"./index-DrbzVNl6.js";/* empty css             *//* empty css                                                                    */import{S as q}from"./SortButton-DoQNSDum.js";import{P as he}from"./Pagination-wR9huHyl.js";import{P as ke}from"./ProductCard-DkH9tOY5.js";import{g as we,o as Y}from"./order-DqMQuu0g.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import{M as j}from"./index-CeQDmMxd.js";import{p as G}from"./format-CRgx78oe.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as Se}from"./SelectShop.vue_vue_type_script_setup_true_lang-FZKjv82Z.js";import{S as xe}from"./SelectLogisticsCompany-D6TqCoRE.js";import{S as Ce}from"./SelectTimeInterval-C-WvSG46.js";import"./Verify.vue_vue_type_style_index_0_lang-B5aTvMR3.js";import"./zh-cn-W45FenWv.js";import{T as E}from"./Tag-GwM_ruJO.js";import{a as Oe}from"./version-CL9k3sYf.js";import{M as Ie}from"./MobileCard-BSBggTtf.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./time-Bh5UhrfW.js";import"./shop-DM8_bN_f.js";import"./logisticsCompany-BiUbX96X.js";const Ve={class:"container"},Te={class:"content_wrapper"},De={class:"lyecs-table-list-warp"},Ne={class:"list-table-tool lyecs-search-warp"},ze={class:"advanced-search-warp list-table-tool-row"},Ue={class:"simple-form-warp"},Fe={class:"simple-form-field"},Be={class:"form-group"},Ee={class:"control-container"},Re={class:"advanced-search-warp list-table-tool-row"},Le={class:"simple-form-warp"},Ae={class:"simple-form-field"},Me={class:"form-group"},Pe={class:"control-container"},$e={key:0,class:"simple-form-field"},Ke={class:"form-group"},qe={class:"control-container"},Ye={class:"simple-form-field"},je={class:"form-group"},Ge={class:"control-container"},He={class:"simple-form-field"},Je={class:"form-group"},Qe={class:"control-container"},We={class:"simple-form-field"},Xe={class:"form-group"},Ze={class:"control-container"},et={class:"simple-form-field"},tt={class:"form-group"},lt={class:"control-container"},st={class:"simple-form-field"},ot={class:"form-group"},at={class:"control-container"},rt={class:"simple-form-field"},nt={class:"form-group"},dt={class:"control-container"},it={class:"simple-form-field"},ut={class:"form-group"},pt={class:"control-container"},ct={class:"simple-form-field"},mt={class:"list-table-tool-row"},ft={class:"list-table-tool-col"},vt={key:4},bt={class:"table-container"},_t={class:"custom-table"},gt={class:"custom-table"},yt={class:"data-tr"},ht={colspan:"5"},kt={class:"check-box"},wt={class:"check-box"},St={class:"textR"},xt={style:{gap:"8px",display:"flex","justify-content":"right"}},Ct={class:"displayRow flex flex-align-center flex-justify-between"},Ot={class:"displayColumn textR whiteSN widthAuto"},It=["rowspan"],Vt={class:"displayColumn textR fz14"},Tt={class:"gray fz12"},Dt=["rowspan"],Nt={class:"displayColumn fz12 textL"},zt={class:"gray"},Ut={class:"gray"},Ft={class:"black"},Bt={class:"ml5"},Et=["rowspan"],Rt={class:"displayColumn fz12 textL"},Lt={key:0},At={class:"gray"},Mt=["rowspan"],Pt=["rowspan"],$t={class:"buttonStyle"},Kt={key:0},qt={colspan:"6"},Yt={key:0,class:"empty-warp"},jt={key:0,class:"empty-bg"},Gt={key:0,class:"pagination-con"},Ht=ce({__name:"List",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},setup(H){const J=h(localStorage.getItem("adminType")),Q=me(),W=z([{value:-1,label:"全部",isShow:!0},{value:0,label:"待支付",isShow:!0},{value:1,label:"待发货",isShow:!0},{value:2,label:"已发货",isShow:!0},{value:3,label:"已取消",isShow:!0},{value:4,label:"无效",isShow:!0},{value:5,label:"已完成",isShow:!0},{value:-2,label:"已删除",isShow:!0}]),X=z([{value:0,label:"待发货"},{value:1,label:"已发货"},{value:2,label:"已收货"},{value:3,label:"配送中"},{value:4,label:"配送失败"}]),Z=z([{value:0,label:"未付款"},{value:1,label:"支付中"},{value:2,label:"已付款"},{value:3,label:"退款中"},{value:4,label:"已退款"}]),ee=n=>{s.orderStatus=n,p.value=[],b()},w=h([]),S=h(!0),V=h(0),p=h([]),R=h(!1);h(!1);const s=z({page:1,size:Q.get("pageSize"),sortField:"orderId",sortOrder:"desc",keyword:"",orderStatus:-1,address:"",email:"",mobile:"",addTime:[],addEndTime:"",addStartTime:""}),b=async()=>{S.value=!0,p.value=[];try{const n=await we({...s});if(n.records!==null){const e=n.records.map(x=>({...x,checkBox:!1}));w.value=e}else w.value=[];V.value=n.total}catch(n){I.error(n.message)}finally{S.value=!1}},T=H,te=be(),C=fe().currentRoute.value.query,A=h(T.isDialog?T.act:String(C.act)),le=h(T.isDialog?T.id:Number(C.id));ve(()=>{te.meta.queryParam==="isExchangeOrder"&&(s.isExchangeOrder=1),A.value&&A.value!=="undefined"&&(s.userId=le.value),C&&C.status&&(s.orderStatus=Number(C.status)),b()});const f=()=>{b()},se=n=>{window.open(n,"_blank")},oe=n=>{j.confirm({title:"确认删除订单吗？",content:"被删除的订单可以通过筛选查找并恢复",onOk:async()=>{try{const e=await Y("delOrder",{id:n});I.success("操作成功"),b()}catch(e){I.error(e.message)}finally{S.value=!1}}})},ae=n=>{j.confirm({title:"确认订单已收货吗？",onOk:async()=>{try{const e=await Y("confirmReceipt",{id:n});I.success("操作成功"),b()}catch(e){I.error(e.message)}finally{S.value=!1}}})},re=_e(()=>{var n,e;return R.value=p.value.length>0&&((n=p.value)==null?void 0:n.length)===((e=w.value)==null?void 0:e.length),p.value.length>0&&p.value.length<w.value.length}),ne=n=>{var e,x;n?(p.value.length=0,(e=w.value)==null||e.forEach(c=>{c.checkBox=!0,p.value.push(c.orderId)})):(x=w.value)==null||x.forEach(c=>{c.checkBox=!1,p.value.length=0})},de=n=>{if(n.checkBox)p.value.indexOf(n.orderId)===-1&&p.value.push(n.orderId);else{let e=p.value.indexOf(n.orderId);e!==-1&&p.value.splice(e,1)}};return(n,e)=>{const x=y("TigTabs"),c=y("el-button"),D=y("TigInput"),M=y("el-option"),P=y("el-select"),ie=y("el-space"),$=y("el-checkbox"),ue=y("el-divider"),L=y("el-tooltip"),pe=y("a-spin");return a(),m("div",Ve,[l("div",Te,[l("div",De,[l("div",Ne,[l("div",ze,[l("div",Ue,[l("div",Fe,[l("div",Be,[l("div",Ee,[o(x,{modelValue:s.orderStatus,"onUpdate:modelValue":e[0]||(e[0]=t=>s.orderStatus=t),tabs:W,onOnTabChange:ee},null,8,["modelValue","tabs"])])])])])]),l("div",Re,[l("div",Le,[l("div",Ae,[l("div",Me,[l("div",Pe,[o(D,{modelValue:s.keyword,"onUpdate:modelValue":e[1]||(e[1]=t=>s.keyword=t),style:{width:"280px"},name:"keyword",placeholder:"订单号/收货人姓名",onKeyup:U(f,["enter"]),clearable:"",onClear:f},{append:r(()=>[o(c,{onClick:f},{default:r(()=>e[21]||(e[21]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),i(Oe)()&&J.value!=="shop"?(a(),m("div",$e,[l("div",Ke,[e[22]||(e[22]=l("label",{class:"control-label"},[l("span",null,"选择店铺：")],-1)),l("div",qe,[o(i(Se),{modelValue:s.shopId,"onUpdate:modelValue":e[2]||(e[2]=t=>s.shopId=t),onOnChange:f},null,8,["modelValue"])])])])):d("",!0),l("div",Ye,[l("div",je,[e[23]||(e[23]=l("label",{class:"control-label"},[l("span",null,"支付状态：")],-1)),l("div",Ge,[o(P,{modelValue:s.payStatus,"onUpdate:modelValue":e[3]||(e[3]=t=>s.payStatus=t),clearable:"",onChange:f},{default:r(()=>[(a(!0),m(F,null,B(Z,t=>(a(),v(M,{label:t.label,value:t.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])]),l("div",He,[l("div",Je,[e[24]||(e[24]=l("label",{class:"control-label"},[l("span",null,"发货状态：")],-1)),l("div",Qe,[o(P,{modelValue:s.shippingStatus,"onUpdate:modelValue":e[4]||(e[4]=t=>s.shippingStatus=t),clearable:"",onChange:f},{default:r(()=>[(a(!0),m(F,null,B(X,t=>(a(),v(M,{label:t.label,value:t.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])]),l("div",We,[l("div",Xe,[e[25]||(e[25]=l("label",{class:"control-label"},[l("span",null," 详细地址：")],-1)),l("div",Ze,[o(D,{modelValue:s.address,"onUpdate:modelValue":e[5]||(e[5]=t=>s.address=t),onKeyup:U(f,["enter"]),clearable:"",onClear:f},null,8,["modelValue"])])])]),l("div",et,[l("div",tt,[e[26]||(e[26]=l("label",{class:"control-label"},[l("span",null,"Email：")],-1)),l("div",lt,[o(D,{modelValue:s.email,"onUpdate:modelValue":e[6]||(e[6]=t=>s.email=t),onKeyup:U(f,["enter"]),clearable:"",onClear:f},null,8,["modelValue"])])])]),l("div",st,[l("div",ot,[e[27]||(e[27]=l("label",{class:"control-label"},[l("span",null,"手机号：")],-1)),l("div",at,[o(D,{modelValue:s.mobile,"onUpdate:modelValue":e[7]||(e[7]=t=>s.mobile=t),onKeyup:U(f,["enter"]),clearable:"",onClear:f},null,8,["modelValue"])])])]),l("div",rt,[l("div",nt,[e[28]||(e[28]=l("label",{class:"control-label"},[l("span",null,"配送物流：")],-1)),l("div",dt,[o(i(xe),{id:s.logisticsId,"onUpdate:id":e[8]||(e[8]=t=>s.logisticsId=t),onOnChange:f},null,8,["id"])])])]),l("div",it,[l("div",ut,[e[29]||(e[29]=l("label",{class:"control-label"},[l("span",null,"下单时间：")],-1)),l("div",pt,[o(i(Ce),{"end-date":s.addEndTime,"onUpdate:endDate":e[9]||(e[9]=t=>s.addEndTime=t),"start-date":s.addStartTime,"onUpdate:startDate":e[10]||(e[10]=t=>s.addStartTime=t),clearable:!1,type:"date","value-format":"YYYY-MM-DD"},null,8,["end-date","start-date"])])])]),l("div",ct,[o(c,{type:"primary",onClick:f},{default:r(()=>e[30]||(e[30]=[u("搜索")])),_:1})])])]),l("div",mt,[l("div",ft,[o(ie,null,{default:r(()=>[p.value.length>0?(a(),v(i(k),{key:0,params:{act:"severalDetail",ids:p.value},title:"订单批量发货",isDrawer:"",path:"order/order/src/BatchShip",width:"880px",onOkCallback:b},{default:r(()=>[o(c,null,{default:r(()=>e[31]||(e[31]=[u(" 批量发货 ")])),_:1})]),_:1},8,["params"])):(a(),v(c,{key:1,disabled:!0},{default:r(()=>e[32]||(e[32]=[u(" 批量发货 ")])),_:1})),p.value.length>0?(a(),v(c,{key:2,onClick:e[11]||(e[11]=t=>se(`/admin/print/orderPrint?ids=${p.value}`))},{default:r(()=>e[33]||(e[33]=[u(" 批量打印 ")])),_:1})):(a(),v(c,{key:3,disabled:!0},{default:r(()=>e[34]||(e[34]=[u(" 批量打印 ")])),_:1})),p.value.length>0?(a(),m("span",vt,[e[35]||(e[35]=u(" 已选择：")),l("b",null,_(p.value.length),1),e[36]||(e[36]=u(" 项 "))])):d("",!0)]),_:1})])])]),l("div",bt,[o(pe,{spinning:S.value},{default:r(()=>[l("table",_t,[l("thead",null,[l("tr",null,[l("th",null,[o($,{modelValue:R.value,"onUpdate:modelValue":e[12]||(e[12]=t=>R.value=t),indeterminate:re.value,class:"check-box mr10",onChange:ne},null,8,["modelValue","indeterminate"]),o(q,{sortField:s.sortField,"onUpdate:sortField":e[13]||(e[13]=t=>s.sortField=t),sortOrder:s.sortOrder,"onUpdate:sortOrder":e[14]||(e[14]=t=>s.sortOrder=t),sortName:"orderId",text:"订单信息(下单时间排序)",onLoadData:e[15]||(e[15]=t=>f())},null,8,["sortField","sortOrder"])]),l("th",null,[o(q,{sortField:s.sortField,"onUpdate:sortField":e[16]||(e[16]=t=>s.sortField=t),sortOrder:s.sortOrder,"onUpdate:sortOrder":e[17]||(e[17]=t=>s.sortOrder=t),sortName:"totalAmount",text:"订单金额",onLoadData:e[18]||(e[18]=t=>f())},null,8,["sortField","sortOrder"])]),e[37]||(e[37]=l("th",null,"收货人信息",-1)),e[38]||(e[38]=l("th",null,"物流/支付信息",-1)),e[39]||(e[39]=l("th",null,"订单状态",-1)),e[40]||(e[40]=l("th",{class:"textR"},"操作",-1))])])]),(a(!0),m(F,null,B(w.value,t=>(a(),m("table",gt,[l("thead",null,[l("tr",yt,[l("th",ht,[o($,{modelValue:t.checkBox,"onUpdate:modelValue":g=>t.checkBox=g,class:"check-box mr10",onChange:g=>de(t)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l("span",kt,"订单编号："+_(t.orderSn),1),o(ue,{direction:"vertical"}),l("span",wt,"下单时间："+_(t.addTime),1),t.parentOrderId>0?(a(),v(i(k),{key:0,params:{act:"parentDetail",id:t.orderId,isParent:!0},showClose:!1,showOnOk:!1,title:"订单详情 "+t.orderSn,isDrawer:"",style:{display:"inline-block"},path:"order/order/Info",width:"880px",onCallback:b},{default:r(()=>[t.parentOrderId>0?(a(),v(L,{key:0,content:"该订单已拆分，点击可查看父订单",effect:"light",placement:"top"},{default:r(()=>[o(i(E),{text:"子订单"})]),_:1})):d("",!0)]),_:2},1032,["params","title"])):d("",!0),t.shopId>0?(a(),v(L,{key:1,content:"订单来自店铺："+t.shop.shopTitle,effect:"light",placement:"top"},{default:r(()=>[o(i(E),{transparent:!1,text:"店铺"})]),_:2},1032,["content"])):d("",!0),t.orderSource?(a(),v(L,{key:2,content:"订单来自"+t.orderSource+"下单",effect:"light",placement:"top"},{default:r(()=>[o(i(E),{text:t.orderSource,transparent:!0,style:{"text-transform":"uppercase"}},null,8,["text"])]),_:2},1032,["content"])):d("",!0),t.isExchangeOrder?(a(),v(i(E),{key:3,transparent:!0,color:"red",text:"积分兑换"})):d("",!0)]),l("th",St,[l("div",xt,[o(i(k),{params:{act:"detail",id:t.orderId},showClose:!1,showOnOk:!1,title:"订单详情 "+t.orderSn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:b},{default:r(()=>[o(c,{bg:"",class:"buttonColor mr10",size:"small",text:"",type:"primary"},{default:r(()=>e[41]||(e[41]=[u(" 查看详情")])),_:1})]),_:2},1032,["params","title"]),o(i(k),{params:{act:"detail",id:t.orderId,valueName:"adminNote"},isDrawer:"",path:"order/order/src/EditRemark",title:"编辑备注",width:"600px",onOkCallback:b},{default:r(()=>[o(c,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>e[42]||(e[42]=[u(" 备注 ")])),_:1})]),_:2},1032,["params"])])])])]),l("tbody",null,[(a(!0),m(F,null,B(t.items,(g,O)=>(a(),m("tr",null,[l("td",null,[l("div",Ct,[o(i(ke),{picThumb:g.picThumb,productId:g.productId,productName:g.productName,productType:g.productType,url:g.url},null,8,["picThumb","productId","productName","productType","url"]),l("div",Ot,[l("div",null,_(i(G)(g.price)),1),l("div",null,"× "+_(g.quantity),1)])])]),O==0?(a(),m("td",{key:0,rowspan:t.items.length},[l("div",Vt,[l("div",null,_(i(G)(t.totalAmount)),1),l("div",Tt,"(含运费："+_(t.shippingFee)+")",1),l("div",null,[t.status===6||t.status===7?(a(),v(i(k),{key:0,params:{act:"detail",id:t.aftersaleId},isDrawer:"",path:"order/aftersales/Info",title:"售后详情 "+t.aftersalesSn,width:"800px",onOkCallback:b,showClose:!1,showOnOk:!1},{default:r(()=>[o(c,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>e[43]||(e[43]=[u(" 售后详情 ")])),_:1})]),_:2},1032,["params","title"])):d("",!0)])])],8,It)):d("",!0),O==0?(a(),m("td",{key:1,rowspan:t.items.length},[l("div",Nt,[l("div",zt,[e[44]||(e[44]=u(" 会员名： ")),o(i(k),{params:{act:"detail",id:t.userId},isDrawer:"",path:"user/user/Detail",title:"用户信息",width:"800px",onOkCallback:b,showOnOk:!1},{default:r(()=>{var N,K;return[l("a",null,_(((N=t.user)==null?void 0:N.nickname)||((K=t.user)==null?void 0:K.username)||"--"),1)]}),_:2},1032,["params"])]),l("div",Ut,[e[45]||(e[45]=u(" 收货人： ")),l("span",Ft,[u(_(t.consignee)+" ",1),l("span",Bt,[o(Ie,{mobile:t.mobile},null,8,["mobile"])])])])])],8,Dt)):d("",!0),O==0?(a(),m("td",{key:2,rowspan:t.items.length},[l("div",Rt,[l("div",null,[l("span",null,_(t.payTypeId===1?"在线支付":t.payTypeId===2?"货到付款":"线下支付"),1)]),t.logisticsName?(a(),m("div",Lt,[u(_(t.shippingTypeName)+" ",1),l("span",At,_(""+t.logisticsName),1)])):d("",!0)])],8,Et)):d("",!0),O==0?(a(),m("td",{key:3,rowspan:t.items.length},[l("span",{class:ge({orange:t.orderStatus===0,black:t.orderStatus===1||t.orderStatus===2||t.orderStatus===4,gray:t.orderStatus===3,green:t.orderStatus===5})},_(t.orderStatusName),3)],8,Mt)):d("",!0),O==0?(a(),m("td",{key:4,rowspan:t.items.length},[l("div",$t,[t.availableActions.cancelOrder?(a(),v(i(k),{key:0,params:{act:"cancelOrder",id:t.orderId},isDrawer:"",path:"order/order/src/Operation",title:"取消订单",width:"600px",onOkCallback:b},{default:r(()=>[o(c,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>e[46]||(e[46]=[u(" 取消订单 ")])),_:1})]),_:2},1032,["params"])):d("",!0),t.availableActions.delOrder?(a(),v(c,{key:1,bg:"",size:"small",text:"",type:"primary",onClick:N=>oe(t.orderId)},{default:r(()=>e[47]||(e[47]=[u(" 删除订单 ")])),_:2},1032,["onClick"])):d("",!0),t.availableActions.deliver?(a(),v(i(k),{key:2,params:{act:"detail",id:t.orderId},title:"订单发货 "+t.orderSn,isDrawer:"",path:"order/order/src/ToShip",width:"900px",onOkCallback:b},{default:r(()=>[o(c,{bg:"",size:"small",text:"",type:"danger"},{default:r(()=>e[48]||(e[48]=[u(" 去发货 ")])),_:1})]),_:2},1032,["params","title"])):d("",!0),t.availableActions.confirmReceipt?(a(),v(c,{key:3,bg:"",size:"small",text:"",type:"danger",onClick:N=>ae(t.orderId)},{default:r(()=>e[49]||(e[49]=[u(" 确认收货 ")])),_:2},1032,["onClick"])):d("",!0)])],8,Pt)):d("",!0)]))),256)),t.adminNote?(a(),m("tr",Kt,[l("td",qt,[e[51]||(e[51]=l("span",{class:"orange"},"商家备注：",-1)),u(_(t.adminNote)+" ",1),o(i(k),{params:{act:"detail",id:t.orderId,valueName:"adminNote"},isDrawer:"",path:"order/order/src/EditRemark",title:"编辑备注",width:"600px",onOkCallback:b},{default:r(()=>[o(c,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>e[50]||(e[50]=[u(" 修改 ")])),_:1})]),_:2},1032,["params"])])])):d("",!0)])]))),256)),V.value==0?(a(),m("div",Yt,[S.value?d("",!0):(a(),m("div",jt,"暂无数据"))])):d("",!0)]),_:1},8,["spinning"])]),V.value>0?(a(),m("div",Gt,[o(i(he),{page:s.page,"onUpdate:page":e[19]||(e[19]=t=>s.page=t),size:s.size,"onUpdate:size":e[20]||(e[20]=t=>s.size=t),total:V.value,onCallback:b},null,8,["page","size","total"])])):d("",!0)])])])}}}),yl=ye(Ht,[["__scopeId","data-v-98a0b140"]]);export{yl as default};
