/* empty css             */import"./index-B-GURfkM.js";import{_ as q}from"./Switch.vue_vue_type_script_setup_true_lang-CKSPWIQL.js";import{_ as T}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as j}from"./Pagination-yOfjsBuR.js";import{u as z}from"./config-DNllFJyR.js";import{g as H,u as A,d as J,b as K}from"./pointsExchange-Sba1zWQ3.js";import{d as Q,i as m,G as R,q as W,c as h,e as o,D as k,b as t,w as s,f as C,g as d,I as x,r as i,o as y,E as c}from"./index-CGYuOau0.js";import{_ as E}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const X={class:"container"},Y={class:"content_wrapper"},Z={class:"notice-warp"},ee={class:"lyecs-table-list-warp"},te={class:"list-table-tool lyecs-search-warp"},oe={class:"advanced-search-warp list-table-tool-row"},le={class:"simple-form-warp"},se={class:"simple-form-field"},ae={class:"form-group"},ne={class:"control-container"},ie={class:"simple-form-field"},de={class:"form-group"},re={class:"control-container"},ce={class:"simple-form-field"},pe={class:"form-group"},_e={class:"control-container"},me={class:"simple-form-field"},ue={class:"list-table-tool-row"},fe={class:"list-table-tool-col"},be={key:0},ve={class:"table-container"},ge={class:"empty-warp"},he={key:0,class:"empty-bg"},ke={key:0,class:"pagination-con"},De=Q({__name:"List",setup(ye){const P=z(),D=m(z().domain),V=m(),u=m(!0),b=m(0),f=m([]);m(!1);const a=R({page:1,size:P.get("page_size"),sort_field:"",sort_order:"",keyword:""}),r=async()=>{u.value=!0;try{const n=await H({...a});V.value=n.filter_result,b.value=n.total}catch(n){x.error(n.message)}finally{u.value=!1}};W(()=>{r()});const p=()=>{r()},B=({prop:n,order:e})=>{a.sort_field=n,a.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",r()},I=async n=>{try{const e=await K(n,{ids:f.value});x.success(e.message),r()}catch(e){x.error(e.message)}},N=n=>{f.value=n.map(e=>e.id)};return(n,e)=>{const v=i("el-button"),$=i("el-input"),g=i("el-option"),S=i("el-select"),F=i("el-popconfirm"),L=i("el-space"),O=i("el-form"),_=i("el-table-column"),U=i("el-divider"),G=i("el-table"),M=i("a-spin");return y(),h("div",X,[o("div",Y,[o("div",Z,[o("p",null," 积分兑换列表前台地址为："+k(D.value)+"/exchange/list/（支持手机版自动跳转） ",1)]),o("div",ee,[o("div",te,[t(O,{model:a},{default:s(()=>[o("div",oe,[o("div",le,[o("div",se,[o("div",ae,[o("div",ne,[t($,{modelValue:a.keyword,"onUpdate:modelValue":e[0]||(e[0]=l=>a.keyword=l),name:"keyword",placeholder:"输入积分兑换商品名称",clearable:"",onClear:p},{append:s(()=>[t(v,{onClick:p},{default:s(()=>e[6]||(e[6]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),o("div",ie,[o("div",de,[e[7]||(e[7]=o("label",{class:"control-label"},[o("span",null,"是否可兑换：")],-1)),o("div",re,[t(S,{modelValue:a.is_enabled,"onUpdate:modelValue":e[1]||(e[1]=l=>a.is_enabled=l),clearable:"",onClear:p,onChange:p},{default:s(()=>[t(g,{value:0,label:"不可兑换"}),t(g,{value:1,label:"可兑换"})]),_:1},8,["modelValue"])])])]),o("div",ce,[o("div",pe,[e[8]||(e[8]=o("label",{class:"control-label"},[o("span",null,"是否热销：")],-1)),o("div",_e,[t(S,{modelValue:a.is_hot,"onUpdate:modelValue":e[2]||(e[2]=l=>a.is_hot=l),clearable:"",onClear:p,onChange:p},{default:s(()=>[t(g,{value:0,label:"不热销"}),t(g,{value:1,label:"热销"})]),_:1},8,["modelValue"])])])]),o("div",me,[t(v,{type:"primary",onClick:p},{default:s(()=>e[9]||(e[9]=[c("搜索")])),_:1})])])]),o("div",ue,[o("div",fe,[t(L,null,{default:s(()=>[t(d(E),{isDrawer:"",onOkCallback:r,title:"添加积分商品",width:"600px",path:"promotion/pointsExchange/Info",params:{act:"add"}},{default:s(()=>[t(v,{type:"primary"},{default:s(()=>e[10]||(e[10]=[c("添加积分商品")])),_:1})]),_:1}),t(F,{title:"您确认要批量删除所选数据吗？",onConfirm:e[3]||(e[3]=l=>I("del"))},{reference:s(()=>[t(v,{disabled:f.value.length===0},{default:s(()=>e[11]||(e[11]=[c("批量删除")])),_:1},8,["disabled"])]),_:1}),f.value.length>0?(y(),h("span",be,[e[12]||(e[12]=c(" 已选择：")),o("b",null,k(f.value.length),1),e[13]||(e[13]=c(" 项 "))])):C("",!0)]),_:1})])])]),_:1},8,["model"])]),o("div",ve,[t(M,{spinning:u.value},{default:s(()=>[t(G,{data:V.value,"row-key":"id",onSelectionChange:N,total:b.value,onSortChange:B,loading:u.value},{empty:s(()=>[o("div",ge,[u.value?C("",!0):(y(),h("div",he,"暂无数据"))])]),default:s(()=>[t(_,{type:"selection",width:"32"}),t(_,{label:"积分商品名称",prop:"product_name",sortable:"custom",width:350}),t(_,{label:"使用积分值",prop:"exchange_integral",sortable:"custom"},{default:s(({row:l})=>[c(k(l.exchange_integral),1)]),_:1}),t(_,{label:"减免金额",prop:"points_deducted_amount",sortable:"custom"},{default:s(({row:l})=>[c(k(l.points_deducted_amount),1)]),_:1}),t(_,{label:"是否可兑换",sortable:"custom"},{default:s(({row:l})=>[t(d(q),{checked:l.is_enabled,"onUpdate:checked":w=>l.is_enabled=w,requestApi:d(A),params:{id:l.id,field:"is_enabled"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),t(_,{label:"是否热销",sortable:"custom"},{default:s(({row:l})=>[t(d(q),{checked:l.is_hot,"onUpdate:checked":w=>l.is_hot=w,requestApi:d(A),params:{id:l.id,field:"is_hot"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),t(_,{label:"操作",fixed:"right",width:150},{default:s(({row:l})=>[t(d(E),{isDrawer:"",onOkCallback:r,title:"编辑积分商品",width:"600px",path:"promotion/pointsExchange/Info",params:{act:"detail",id:l.id}},{default:s(()=>e[14]||(e[14]=[o("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),t(U,{direction:"vertical"}),e[16]||(e[16]=o("a",null,"查看",-1)),t(U,{direction:"vertical"}),t(d(T),{onAfterDelete:r,requestApi:d(J),params:{id:l.id}},{default:s(()=>e[15]||(e[15]=[c("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),b.value>0?(y(),h("div",ke,[t(d(j),{page:a.page,"onUpdate:page":e[4]||(e[4]=l=>a.page=l),size:a.size,"onUpdate:size":e[5]||(e[5]=l=>a.size=l),total:b.value,onCallback:r},null,8,["page","size","total"])])):C("",!0)])])])])}}});export{De as default};
