import{d as F,i as d,C as L,s as P,q as j,I as c,r as s,c as E,o as S,e as f,j as I,f as A,w as a,b as t,a0 as G,g as M,E as _,a1 as O}from"./index-CGYuOau0.js";import{F as T}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-CjXfTDg5.js";import{a as $,c as z}from"./productServices-io8pn2tf.js";import"./index-B-GURfkM.js";import"./vuedraggable.umd-_1km55l4.js";import"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";const H={class:"container"},J={class:"content_wrapper"},K={class:"lyecs-form-table"},re=F({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:k,emit:C}){const i=C,n=x,m=d(!0),v=L().currentRoute.value.query,p=d(n.isDialog?n.act:String(v.act)),b=d(n.isDialog?n.id:Number(v.id)),B=p.value==="add"?"create":"update",g=P(),o=d({sort_order:50,default_on:1});j(()=>{p.value==="detail"?N():m.value=!1});const N=async()=>{try{const r=await $(p.value,{id:b.value});Object.assign(o.value,r.item)}catch(r){c.error(r.message),i("close")}finally{m.value=!1}},y=async()=>{await g.value.validate();try{i("update:confirmLoading",!0);const r=await z(B,{id:b.value,...o.value});i("submitCallback",r),c.success(r.message)}catch(r){c.error(r.message)}finally{i("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{y()}}),(r,e)=>{const V=s("el-input"),u=s("el-form-item"),D=s("a-input"),w=s("el-radio"),R=s("el-radio-group"),U=s("el-button"),q=s("el-form");return S(),E("div",H,[f("div",J,[f("div",K,[m.value?A("",!0):(S(),I(q,{key:0,ref_key:"formRef",ref:g,model:o.value,"label-width":"auto"},{default:a(()=>[t(u,{rules:[{required:!0,message:"名称不能为空!"}],label:"名称",prop:"product_service_name"},{default:a(()=>[t(V,{modelValue:o.value.product_service_name,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.product_service_name=l)},null,8,["modelValue"])]),_:1}),t(u,{label:"简介"},{default:a(()=>[t(V,{modelValue:o.value.product_service_desc,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.product_service_desc=l),rows:2,placeholder:"请输入简介",type:"textarea"},null,8,["modelValue"])]),_:1}),t(u,{label:"图标"},{default:a(()=>[t(M(T),{photo:o.value.ico_img,"onUpdate:photo":e[2]||(e[2]=l=>o.value.ico_img=l)},null,8,["photo"]),e[6]||(e[6]=f("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1))]),_:1}),t(u,{label:"排序"},{default:a(()=>[t(D,{value:o.value.sort_order,"onUpdate:value":e[3]||(e[3]=l=>o.value.sort_order=l)},null,8,["value"])]),_:1}),t(u,{label:"是否默认"},{default:a(()=>[t(R,{modelValue:o.value.default_on,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.default_on=l)},{default:a(()=>[t(w,{value:1},{default:a(()=>e[7]||(e[7]=[_("是")])),_:1}),t(w,{value:0},{default:a(()=>e[8]||(e[8]=[_("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),G(t(u,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[t(U,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[5]||(e[5]=l=>y())},{default:a(()=>e[9]||(e[9]=[_("提交")])),_:1},512)]),_:1},512),[[O,!n.isDialog]])]),_:1},8,["model"]))])])])}}});export{re as default};
