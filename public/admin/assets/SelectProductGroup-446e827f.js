/* empty css             */import{d as U,j as _,I as j,x as E,r as s,o as y,c as h,e as n,b as o,w as a,H as S,n as A,h as w,G as D,f as H,K,p as L,i as O,_ as q}from"./index-7c2d2aef.js";/* empty css                                                                    */import{P as J}from"./Pagination-8eb7b6b1.js";import{u as Q}from"./config-9548fa9b.js";import{g as W}from"./productGroup-d12e271e.js";import"./config-e2aa16d1.js";const X=r=>(L("data-v-fa874865"),r=r(),O(),r),Y={class:"container",style:{position:"relative",height:"100%"}},Z={class:"content_wrapper"},$={class:"",style:{display:"flex","flex-direction":"column",width:"100%",height:"100%",position:"absolute"}},ee={class:"list-table-tool lyecs-search-warp",style:{flex:"0"}},te={class:"list-table-tool-row",style:{"margin-bottom":"5px"}},oe={class:"list-table-tool-col"},le=X(()=>n("div",{class:"list-table-tool-col"},null,-1)),se={style:{"padding-right":"15px","box-sizing":"border-box"}},ae={class:"empty-warp"},ne={key:0,class:"empty-bg"},ie={key:0,class:"pagination-con",style:{"flex-shrink":"0"}},ce=U({__name:"SelectProductGroup",props:{selected_ids:{type:Array,default:[]},modelValue:{type:Object,default:{}},isMultiple:{type:Boolean,default:!0},index:{type:Number,default:0}},emits:["submitCallback","okType","update:modelValue"],setup(r,{expose:C,emit:V}){const m=r,p=V;p("okType",!1);const i=_([]),u=_(!0),f=_(0),z=Q(),x=_([]),l=j({page:1,size:z.get("page_size"),sort_field:"",sort_order:"",keyword:""}),g=async()=>{u.value=!0;try{const t=await W({...l});x.value=t.filter_result,f.value=t.total}catch(t){K.error(t.message)}finally{u.value=!1}};E(()=>{g()});const k=()=>{g()},b=_(),P=t=>{if(m.isMultiple){let e=[];t.forEach(d=>{e.push(d.product_group_id)}),i.value=e,p("okType",i.value.length>0)}},I=(t,e)=>{if(!m.isMultiple){if(b.value.clearSelection(),t.length==0){i.value=[];return}b.value.toggleRowSelection(e,!0),i.value.length=0,i.value.push(e.product_group_id),p("okType",i.value.length>0)}p("update:modelValue",e)},G=(t,e)=>{var d;return!((d=m.selected_ids)!=null&&d.includes(t.product_group_id))};return C({onFormSubmit:()=>{p("submitCallback",{ids:i.value,index:m.index})}}),(t,e)=>{const d=s("el-input"),M=s("el-button"),N=s("el-space"),T=s("el-form"),v=s("el-table-column"),B=s("el-table"),F=s("a-spin"),R=s("perfect-scrollbar");return y(),h("div",Y,[n("div",Z,[n("div",$,[n("div",ee,[o(T,{model:l,name:"form",onFinish:k},{default:a(()=>[n("div",te,[n("div",oe,[o(N,null,{default:a(()=>[o(d,{modelValue:l.keyword,"onUpdate:modelValue":e[0]||(e[0]=c=>l.keyword=c),placeholder:"商品分组名称"},null,8,["modelValue"]),o(M,{onClick:k},{default:a(()=>[S("搜索")]),_:1})]),_:1})]),le])]),_:1},8,["model"])]),o(R,{class:"table-container",style:{flex:"1"}},{default:a(()=>[o(F,{spinning:u.value},{default:a(()=>[n("div",se,[o(B,{ref_key:"tableRef",ref:b,class:A([r.isMultiple?"":"hide-checkbox","result-table"]),data:x.value,loading:u.value,total:f.value,"row-key":"product_group_id",onSelect:I,onSelectionChange:P},{empty:a(()=>[n("div",ae,[u.value?w("",!0):(y(),h("div",ne,"暂无数据"))])]),default:a(()=>[o(v,{selectable:G,type:"selection",width:"32"}),o(v,{label:"分组名称",prop:"product_group_name"}),o(v,{label:"分组商品数量",prop:"product_ids",align:"center"},{default:a(({row:c})=>[S(D(c.product_ids.length)+"个 ",1)]),_:1})]),_:1},8,["class","data","loading","total"])])]),_:1},8,["spinning"])]),_:1}),f.value>0?(y(),h("div",ie,[o(H(J),{page:l.page,"onUpdate:page":e[1]||(e[1]=c=>l.page=c),size:l.size,"onUpdate:size":e[2]||(e[2]=c=>l.size=c),total:f.value,onCallback:g,layout:"slot ,prev, pager, next",background:!1},null,8,["page","size","total"])])):w("",!0)])])])}}});const be=q(ce,[["__scopeId","data-v-fa874865"]]);export{be as default};
