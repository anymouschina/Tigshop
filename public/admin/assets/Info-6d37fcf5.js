import{d as J,j as m,E as P,s as Q,x as W,r as p,o as i,c as v,e as o,b as a,w as t,k as u,h as r,f as c,H as f,G as n,F as k,eb as X,$ as Y,a0 as Z,K as V,_ as ee}from"./index-7c2d2aef.js";import{a as ae,A as te}from"./userCertification-939d5c10.js";import{S as I}from"./StatusDot-19af4eec.js";import{M as le}from"./MobileCard-6c6c2c27.js";/* empty css                                               */import"./zh-cn-8c8b9709.js";import{T as z}from"./Tag-e65e7405.js";import{i as y}from"./format-4e0206d3.js";import"./config-9548fa9b.js";import"./config-e2aa16d1.js";import"./util-1ee03ed8.js";const oe={class:"container"},se={class:"content_wrapper"},ie={class:"lyecs-form-table"},ne={key:0},de={class:"width100"},_e={class:"width100"},ue={class:"width100"},re={class:"width100"},ce={class:"width100"},me={class:"width100"},pe={class:"width100"},ve={class:"width100"},fe={class:"width100"},ye={class:"width100"},be={class:"width100"},ge={key:1},he={class:"width100"},ke={class:"width100"},we={class:"width100"},Ce={class:"width100"},Ve={class:"width100"},xe={class:"width100"},Be={class:"image"},Se=J({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(L,{emit:M}){const w=M,b=L,j=m([{value:1,label:"大陆身份证"},{value:2,label:"护照（限境外人士）"},{value:3,label:"来往内地通行证（中国香港居民）"},{value:4,label:"来往内地通行证（中国澳门居民）"},{value:5,label:"来往大陆通行证（中国台湾居民）"}]),g=m("sm"),q=_=>{g.value=_},h=m(!0),U=P().currentRoute.value.query,x=m(b.isDialog?b.act:String(U.act)),N=m(b.isDialog?b.id:Number(U.id));x.value;const F=Q(),e=m({company_data:{certificate_validity_period_date:[],front_of_photo:[],back_of_photo:[],business_license_img:[],operating_term_type_date:[]}}),A=async()=>{var _;try{h.value=!0;const l=await ae(x.value,{id:N.value});Object.assign(e.value,l.item),e.value.contact_mobile=(_=e.value.contact_mobile)==null?void 0:_.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")}catch(l){V.error(l.message),w("close")}finally{h.value=!1}};W(()=>{x.value==="detail"?A():h.value=!1});const B=async _=>{await F.value.validate();try{if(_==3&&!e.value.audit_remark){V.error("请输入审核备注");return}w("update:confirmLoading",!0);const l=await te({id:N.value,status:_,audit_remark:e.value.audit_remark});w("submitCallback",l),V.success(l.message)}catch(l){V.error(l.message)}finally{w("update:confirmLoading",!1)}},R=m(""),S=m(!1),$=_=>{R.value=_,S.value=!0};return(_,l)=>{const T=p("el-tab-pane"),K=p("el-tabs"),s=p("el-form-item"),C=p("el-image"),D=p("el-button"),O=p("el-form"),G=p("a-spin"),H=p("el-dialog");return i(),v("div",oe,[o("div",se,[o("div",ie,[a(K,{modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=d=>g.value=d),class:"lyecs-tabs","tab-position":"top",onTabChange:q},{default:t(()=>[(i(),u(T,{key:1,label:"基础信息",name:"sm"})),e.value.type==2?(i(),u(T,{key:2,label:"企业信息",name:"company"})):r("",!0)]),_:1},8,["modelValue"]),h.value?r("",!0):(i(),u(O,{key:0,ref_key:"formRef",ref:F,model:e.value,"label-width":"auto"},{default:t(()=>[g.value=="sm"?(i(),v("div",ne,[a(s,{label:"认证资质"},{default:t(()=>[e.value.type==1?(i(),u(c(z),{key:0,transparent:!0,text:"个人"})):(i(),u(c(z),{key:1,color:"#409EFF",transparent:!1,text:"企业"}))]),_:1}),a(s,{label:"审核结果"},{default:t(()=>[o("div",de,[o("div",null,[e.value.status==1?(i(),u(I,{key:0,flicker:!0})):r("",!0),e.value.status==2?(i(),u(I,{key:1,color:"#52c41a",flicker:!0})):r("",!0),e.value.status==3?(i(),u(I,{key:2,color:"#f5222d",flicker:!1})):r("",!0),f(" "+n(e.value.status_text),1)])])]),_:1}),e.value.audit_remark&&e.value.status!=1?(i(),u(s,{key:0,label:"审核备注"},{default:t(()=>[o("div",_e,[o("div",null,n(e.value.audit_remark),1)])]),_:1})):r("",!0),a(s,{label:"姓名"},{default:t(()=>[o("div",ue,n(e.value.company_data.corporate_name),1)]),_:1}),a(s,{label:"联系人手机"},{default:t(()=>[o("div",re,[a(le,{mobile:e.value.company_data.contact_phone},null,8,["mobile"])])]),_:1}),a(s,{class:"form-item",label:"证件类型"},{default:t(()=>{var d;return[o("div",ce,n(((d=j.value.find(E=>E.value===e.value.company_data.document_type))==null?void 0:d.label)||""),1)]}),_:1}),a(s,{label:"证件号码"},{default:t(()=>[o("div",me,n(e.value.company_data.document_number),1)]),_:1}),a(s,{label:"居住地址"},{default:t(()=>[o("div",pe,n(e.value.company_data.residential_address),1)]),_:1}),a(s,{label:"出生日期"},{default:t(()=>[o("div",ve,n(e.value.company_data.birthday),1)]),_:1}),a(s,{label:"证件有效期"},{default:t(()=>[o("div",fe,[e.value.company_data.certificate_validity_period==1?(i(),v(k,{key:0},[f(n(e.value.company_data.certificate_validity_period_date[0]+" ～ "+e.value.company_data.certificate_validity_period_date[1]),1)],64)):(i(),v(k,{key:1},[f(n(e.value.company_data.certificate_validity_period_end)+" ～ 长期 ",1)],64))])]),_:1}),a(s,{label:"证件照正面"},{default:t(()=>[o("div",ye,[a(C,{src:c(y)(e.value.company_data.front_of_photo[0].pic_url),class:"image-size",fit:"cover",onClick:l[1]||(l[1]=d=>$(c(y)(e.value.company_data.front_of_photo[0].pic_url)))},null,8,["src"])])]),_:1}),a(s,{label:"证件照反面"},{default:t(()=>[o("div",be,[a(C,{src:c(y)(e.value.company_data.back_of_photo[0].pic_url),class:"image-size",fit:"cover",onClick:l[2]||(l[2]=d=>$(c(y)(e.value.company_data.back_of_photo[0].pic_url)))},null,8,["src"])])]),_:1}),e.value.status==1?(i(),v(k,{key:1},[a(s,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[a(D,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:l[3]||(l[3]=d=>B(2))},{default:t(()=>[f("审核通过")]),_:1},512),a(D,{ref:"submitBtn",class:"form-submit-btn",onClick:l[4]||(l[4]=d=>B(3))},{default:t(()=>[f("审核不通过")]),_:1},512)]),_:1}),a(c(X),{rows:"4",modelValue:e.value.audit_remark,"onUpdate:modelValue":l[5]||(l[5]=d=>e.value.audit_remark=d),placeholder:"请输入审核备注（审核不通过将必填）",type:"textarea"},null,8,["modelValue"])],64)):r("",!0),Y(a(s,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[a(D,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:B},{default:t(()=>[f("提交")]),_:1},512)]),_:1},512),[[Z,!b.isDialog]])])):r("",!0),g.value=="company"?(i(),v("div",ge,[a(s,{label:"企业名称"},{default:t(()=>[o("div",he,n(e.value.company_data.company_name),1)]),_:1}),a(s,{label:"注册地址"},{default:t(()=>[o("div",ke,n(e.value.company_data.license_addr_province_name)+" "+n(e.value.company_data.business_license_address),1)]),_:1}),a(s,{label:"经营范围"},{default:t(()=>[o("div",we,n(e.value.company_data.business_scope),1)]),_:1}),a(s,{label:"统一社会信用代码"},{default:t(()=>[o("div",Ce,n(e.value.company_data.business_license_id),1)]),_:1}),a(s,{label:"营业期限"},{default:t(()=>[o("div",Ve,[e.value.company_data.operating_term_type==1?(i(),v(k,{key:0},[f(n(e.value.company_data.operating_term_type_date[0]+" ～  "+e.value.company_data.operating_term_type_date[1]),1)],64)):(i(),v(k,{key:1},[f(n(e.value.company_data.operating_term_type_end)+" ～长期 ",1)],64))])]),_:1}),a(s,{label:"营业执照"},{default:t(()=>{var d;return[o("div",xe,[((d=e.value.company_data.business_license_img)==null?void 0:d.length)>0?(i(),u(C,{key:0,src:c(y)(e.value.company_data.business_license_img[0].pic_url),class:"image-size",fit:"cover",onClick:l[6]||(l[6]=E=>$(c(y)(e.value.company_data.business_license_img[0].pic_url)))},null,8,["src"])):r("",!0)])]}),_:1})])):r("",!0)]),_:1},8,["model"])),a(G,{spinning:h.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])]),a(H,{modelValue:S.value,"onUpdate:modelValue":l[7]||(l[7]=d=>S.value=d)},{default:t(()=>[o("div",Be,[a(C,{src:R.value,alt:"",fit:"cover"},null,8,["src"])])]),_:1},8,["modelValue"])])}}});const Me=ee(Se,[["__scopeId","data-v-ed9607b6"]]);export{Me as default};
