import{d as D,bf as Z,j as w,dm as N,E as ee,a9 as K,x as te,P as ie,r as A,o as t,c as s,e,b,w as k,f as n,F as r,a as E,n as y,cX as q,G as $,h as _,k as x,C as ce,p as X,i as G,aU as le,_ as W,dk as R,$ as J,dh as re,dN as ue,a0 as _e,df as de,K as Q,du as pe,de as he}from"./index-7c2d2aef.js";import{i as O,u as Y,r as me}from"./format-4e0206d3.js";import{l as ve,M as fe,c as ge,p as ye,_ as ke,a as we}from"./pageTabs-417bbf61.js";import{l as be}from"./logo_blue2-e6122341.js";import{u as se}from"./theme-cc18c5b2.js";import{u as $e}from"./config-9548fa9b.js";import{g as Se}from"./adminMsg-11a92805.js";import{e as xe}from"./util-1ee03ed8.js";import{S as Ce}from"./SelectShop-1ec19599.js";import{u as Me}from"./menus-a5eaec1a.js";import"./index-6c62cf9b.js";import"./version-f7bce787.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";import"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-9b6073fb.js";import"./vuedraggable.umd-75ad0f8f.js";import"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import"./authority-44614dad.js";const F=u=>(X("data-v-edd53248"),u=u(),G(),u),Te={class:"main-menu-logo"},Ie={class:"lyecs-openPage","data-href":"index.html","data-tag":"default",title:"起始页",style:{padding:"0 3px"}},Ve=["src"],Ae=["src"],Be={key:0},Pe=["onClick","href"],ze={class:"nav-tit"},Le=F(()=>e("li",{style:{height:"80px"}},null,-1)),Ee={class:"child-tit"},Ue=["onClick"],Ne=F(()=>e("i",{class:"nav-icon iconfont icon-xiala"},null,-1)),De={class:"nav-title"},Fe={key:0,class:"menu-chider"},je=["onClick"],qe=F(()=>e("i",{class:"nav-icon iconfont"},null,-1)),Re={class:"nav-title"},Ke=["target","onClick"],Oe={class:"nav-title"},Xe=F(()=>e("li",{style:{height:"80px"}},null,-1)),Ge=le('<div class="menu-bar-inner" data-v-edd53248><div class="menu-bar-bg" data-v-edd53248></div><div class="product-navbar-collapse" data-v-edd53248><span class="icon-collapse-left iconfont" data-v-edd53248></span><span class="icon-collapse-right iconfont" data-v-edd53248></span></div></div>',1),We=[Ge],He=D({__name:"pageLeftMenu",setup(u){const{themeInfo:m}=se(),f=Z().licensedData,g=w(localStorage.getItem("adminType")),i=N(),v=ee(),T=N(),C=w([]);w([]),C.value=v.currentRoute.value.matched;const S=K(()=>T.mainMenu);te(()=>{z(S.value)});const z=(p,c=1,a=!1)=>{p.forEach(o=>{a==!0&&c==2?C.value[c].name===o.authority_sn&&(o.current=!0):o.current=C.value[c]?C.value[c].name===o.authority_sn:!1,c==2&&o.children&&o.children.length>0&&(o.current=!0),o.children&&z(o.children,c+1,a)})},L=(p,c=!1)=>{window.innerWidth<=756?c?(S.value.forEach(a=>{a.current=!1}),p.current=!0):(p.blank?window.open("/"+p.route_link,"_blank"):v.push("/"+p.route_link),i.menuActive=!1):(c&&S.value.forEach(a=>{a.children&&a.children.length>0&&a.children.forEach(o=>{o.current=!0})}),p.blank?window.open("/"+p.route_link,"_blank"):v.push("/"+p.route_link),ce(),i.childMenuShow=!0)};return ie(()=>{C.value=v.currentRoute.value.matched,z(S.value,1,!0)}),(p,c)=>{const a=A("perfect-scrollbar");return t(),s(r,null,[e("div",{class:y(["body-menu",{active:n(i).menuActive,shop_admin:g.value==="shop",dark:n(m).navTheme==="dark"}])},[b(a,{class:"main-menu"},{default:k(()=>[e("div",Te,[e("a",Ie,[g.value==="shop"||n(m).navTheme==="dark"?(t(),s("img",{key:0,src:n(f).admin_dark_logo?n(O)(n(f).admin_dark_logo):n(ve)},null,8,Ve)):(t(),s("img",{key:1,src:n(f).admin_light_logo?n(O)(n(f).admin_light_logo):n(be)},null,8,Ae))])]),S.value?(t(),s("ul",Be,[(t(!0),s(r,null,E(S.value,(o,j)=>(t(),s(r,null,[o.is_show?(t(),s("li",{key:0,class:y("main-menu-item menu_"+o.authority_sn+" "+(o.current?"current":""))},[e("a",{onClick:q(l=>L(o,!0),["prevent"]),class:"menu-tit",href:"/"+o.route_link},[e("i",{class:y(o.authority_ico)},null,2),e("span",ze,$(o.authority_name),1)],8,Pe)],2)):_("",!0)],64))),256)),Le])):_("",!0)]),_:1}),e("div",{class:y("child-menu "+(n(i).childMenuShow?"child-menu-show":"child-menu-hide"))},[(t(!0),s(r,null,E(S.value,(o,j)=>(t(),s(r,null,[o.current&&o.is_show?(t(),x(a,{key:0,class:"child_warp",options:{suppressScrollX:!0}},{default:k(()=>[e("div",Ee,$(o.authority_name),1),e("ul",null,[(t(!0),s(r,null,E(o.children,(l,B)=>(t(),s(r,null,[l.children?(t(),s(r,{key:0},[l.is_show?(t(),s("li",{key:0,class:y("menu-item "+(l.current?"cur":""))},[e("a",{class:"menu-item-a",onClick:M=>l.current=!l.current},[Ne,e("span",De,$(l.authority_name),1)],8,Ue),l.current?(t(),s("div",Fe,[e("ul",null,[(t(!0),s(r,null,E(l.children,(M,H)=>(t(),s(r,null,[M.is_show?(t(),s("li",{key:0,class:y("menu-item menu-chider-item "+(M.current?"current":""))},[e("a",{class:"",onClick:q(I=>L(M),["prevent"])},[qe,e("span",Re,$(M.authority_name),1)],8,je)],2)):_("",!0)],64))),256))])])):_("",!0)],2)):_("",!0)],64)):(t(),s(r,{key:1},[l.is_show?(t(),s("li",{key:0,class:y("menu-item "+(C.value[2].name==`${l.authority_sn}`?"current":""))},[e("a",{class:"menu-item-a",target:l.blank?"_blank":"",onClick:q(M=>L(l),["prevent"])},[e("span",Oe,$(l.authority_name),1)],8,Ke)],2)):_("",!0)],64))],64))),256)),Xe])]),_:2},1024)):_("",!0)],64))),256)),e("div",{class:"menu-bar-btn ng-scope",id:"menu-bar-btn",onClick:c[0]||(c[0]=o=>n(i).childMenuShow=!n(i).childMenuShow)},We)],2)],2),e("div",{class:y(["body-menu-mask",{active:n(i).menuActive}]),onClick:c[1]||(c[1]=o=>n(i).menuActive=!n(i).menuActive)},null,2)],64)}}});const Je=W(He,[["__scopeId","data-v-edd53248"]]),d=u=>(X("data-v-7f853825"),u=u(),G(),u),Qe={class:"page-top-warp"},Ye={class:"top-bar-left"},Ze=d(()=>e("span",{class:"open-menu-btn icon-zhankai iconfont"},null,-1)),et=[Ze],tt=d(()=>e("div",{class:"top-bar-item wap-show"},[e("a",{class:"wap-refresh-btn icon-shuaxin iconfont",href:"javascript:;",onclick:"location.reload();"})],-1)),st={class:"top-bar-item wap-show",style:{display:"none"}},ot=["href"],nt={key:0,class:"shop-tit"},at={key:0,class:"label"},it={key:1,class:"label green"},ct={key:1},lt={class:"top-bar-item top-bar-search-warp"},rt={class:"top-bar-search"},ut={class:"search-menu-con"},_t=d(()=>e("div",{class:"search-menu-title"},"搜索结果",-1)),dt={class:"search-menu-list"},pt=["onClick"],ht={key:0,class:"empty"},mt={class:"top-bar-right"},vt={class:"top-bar-item mr10"},ft={class:"auth-img"},gt=["src"],yt={class:"top-bar-item openShop-btn"},kt=["href"],wt=d(()=>e("i",{class:"iconfont icon-guanli"},null,-1)),bt=d(()=>e("span",null,"查看店铺",-1)),$t=[wt,bt],St={class:"top-bar-item top-bar-user",id:"dropdown-memu"},xt={class:"admin-user-warp"},Ct={class:"top-bar-btn",href:"javascript:;"},Mt={class:"admin-user-photo"},Tt=["src"],It=["src"],Vt={class:"admin-user-name"},At=d(()=>e("i",{class:"iconfont icon-xiala"},null,-1)),Bt={class:"dropdown-memu top-bar-memu"},Pt={class:"entrance-list"},zt=d(()=>e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-gerenshezhi",style:{"font-size":"22px"}}),e("span",null,"管理账号")],-1)),Lt=d(()=>e("i",{class:"iconfont icon-qingchuhuancun",style:{"font-size":"22px"}},null,-1)),Et=d(()=>e("span",null,"清除缓存",-1)),Ut=[Lt,Et],Nt=d(()=>e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-quanxian",style:{"font-size":"22px"}}),e("span",null,"店铺设置")],-1)),Dt=d(()=>e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-quanxian",style:{"font-size":"22px"}}),e("span",null,"后台设置")],-1)),Ft={class:"admin_exit"},jt=d(()=>e("span",null,"切换店铺",-1)),qt=[jt],Rt=d(()=>e("span",{style:{color:"#f0f2f5"}},"｜",-1)),Kt=d(()=>e("span",null,"退出登录",-1)),Ot=[Kt],Xt=D({__name:"pageTopBar",setup(u){const m=w(localStorage.getItem("adminType")),P=ee(),f=Z(),g=N(),i=w(""),v=w([]),T=w(!1),C=async I=>{try{const h=await Se({keyword:i.value});v.value=h.item,i.value&&(T.value=!0)}catch(h){Q.error(h.message)}},S=I=>{T.value=!1,i.value="",v.value=[],P.push({path:"/"+I})},z=()=>{i.value==""&&(T.value=!1)},L=()=>{T.value=!1},{logout:p,updateUserInfo:c}=R(),a=K(()=>R().userInfo),o=K(()=>R().shopInfo);w(0);const j=async()=>{try{const I=await ge(),h=$e();c(),h.updateConfig(),g.mainMenu=await Me(),pe.success({message:"缓存已清除",description:"缓存清除后可刷新页面更新效果"})}catch(I){Q.error(I.message)}},l=async()=>{p()},B=w(!1),M=()=>{B.value=!0},H=()=>{B.value=!1};return te(()=>{f._getLicensed()}),(I,h)=>{const oe=A("el-input"),U=A("router-link"),ne=A("a-dropdown"),ae=A("el-dialog");return t(),s(r,null,[e("div",{class:y(["page-top",{shop_admin:m.value==="merchant"}])},[e("div",Qe,[e("div",Ye,[e("div",{class:"top-bar-item wap-show",onClick:h[0]||(h[0]=V=>n(g).menuActive=!n(g).menuActive)},et),tt,e("div",st,[e("a",{class:"wap-openShop-btn icon-wangdianwaibao iconfont",href:n(Y)("/"),target:"_blank"},null,8,ot)]),m.value==="shop"?(t(),s("div",nt,[e("h2",null," 当前店铺: "+$(o.value.shop_title),1),o.value.status===0?(t(),s("div",at,$(o.value.status_text),1)):(t(),s("div",it,$(o.value.status_text),1))])):J((t(),s("div",ct,[e("div",lt,[e("div",rt,[b(oe,{modelValue:i.value,"onUpdate:modelValue":h[1]||(h[1]=V=>i.value=V),style:{width:"300px"},placeholder:"在这里查找功能，一键直达","prefix-icon":n(ue),onInput:C,onBlur:z},null,8,["modelValue","prefix-icon"])])]),J(e("div",ut,[_t,e("div",dt,[(t(!0),s(r,null,E(v.value,V=>(t(),s("div",{class:"menu-item",onClick:Zt=>S(V.route_link)},[e("p",null,$(V.authority_name),1)],8,pt))),256)),v.value.length<1?(t(),s("div",ht,"没有搜索到栏目！")):_("",!0)])],512),[[_e,T.value]])])),[[n(re),L]])]),e("div",mt,[e("div",vt,[e("div",ft,[m.value!=="shop"?(t(),x(U,{key:0,to:{path:"/setting/licensed/index"}},{default:k(()=>[e("img",{src:n(de)(),style:{height:"25px","margin-top":"2px"}},null,8,gt)]),_:1})):_("",!0)])]),b(fe),e("div",yt,[e("a",{class:"top-bar-btn",href:n(Y)("/"),target:"_blank"},$t,8,kt)]),e("div",St,[b(ne,null,{overlay:k(()=>[e("div",Bt,[e("div",Pt,[b(U,{to:{path:"/authority/account_editing/index"}},{default:k(()=>[zt]),_:1}),e("p",{class:"entrance",onClick:j},Ut),m.value==="shop"?(t(),x(U,{key:0,to:{path:"/merchant_setting/shop_team"}},{default:k(()=>[Nt]),_:1})):(t(),x(U,{key:1,to:{path:"/setting/config/base"}},{default:k(()=>[Dt]),_:1}))]),e("div",null,[e("div",Ft,[m.value==="shop"?(t(),s(r,{key:0},[e("a",{onClick:M},qt),Rt],64)):_("",!0),e("a",{onClick:l},Ot)])])])]),default:k(()=>[e("div",xt,[e("a",Ct,[e("span",Mt,[n(xe)(String(a.value.avatar))=="def"?(t(),s("img",{key:0,src:n(me)(a.value.avatar)},null,8,Tt)):(t(),s("img",{key:1,src:n(O)(a.value.avatar)},null,8,It))]),e("div",Vt,$(/^1[3-9]\d{9}$/.test(a.value.username)?a.value.username.replace(/(\d{3})\d{4}/,"$1****"):a.value.username),1),At])])]),_:1})])])])],2),b(ae,{class:"page-top","show-close":!1,"z-index":"12",modelValue:B.value,"onUpdate:modelValue":h[2]||(h[2]=V=>B.value=V),width:"500px"},{default:k(()=>[B.value?(t(),x(Ce,{key:0,onClosePopup:H,isIndex:!0,username:a.value.username},null,8,["username"])):_("",!0)]),_:1},8,["modelValue"])],64)}}});const Gt=W(Xt,[["__scopeId","data-v-7f853825"]]),Wt=u=>(X("data-v-c861c18d"),u=u(),G(),u),Ht=Wt(()=>e("div",{class:"body-menu-mask"},null,-1)),Jt={class:"page-grid-content"},Qt=D({__name:"pageContainer",setup(u){const m=he(),{themeInfo:P}=se();w(localStorage.getItem("adminType"));const f=N();return(g,i)=>{const v=A("router-view");return t(),s(r,null,[Ht,e("div",{class:y(["main-warp",[n(f).childMenuShow?"child-menu-show":"child-menu-hide"]])},[e("div",Jt,[!g.$route.meta.is404&&n(P).isMultiLabel?(t(),x(ye,{key:0})):_("",!0),g.$route.meta.is404?_("",!0):(t(),x(ke,{key:1})),(t(),x(v,{key:n(m).routerKey})),g.$route.meta.is404?_("",!0):(t(),x(we,{key:2}))])],2)],64)}}});const Yt=W(Qt,[["__scopeId","data-v-c861c18d"]]),gs=D({__name:"View",setup(u){return(m,P)=>{const f=A("router-view");return t(),s(r,null,[b(Gt),b(Je),b(Yt,null,{default:k(()=>[b(f)]),_:1})],64)}}});export{gs as default};
