import{u as B}from"./aftersales-393a32d4.js";import{p as H}from"./format-4e0206d3.js";import{d as L,j as x,s as q,r as f,o as n,c as V,e as u,b as d,w as t,G as m,k as i,f as U,h as c,F as j,a as A,H as p,K as h,_ as E}from"./index-7c2d2aef.js";import"./config-9548fa9b.js";import"./config-e2aa16d1.js";import"./util-1ee03ed8.js";const T={class:"container"},G={class:"content_wrapper"},I={class:"lyecs-form-table"},K={class:"negotiation-box"},O={class:"extra"},z={class:"btn-box"},J=L({__name:"Handle",props:{formData:{type:Object,default:0},status:{type:Number,default:2}},emits:["submitCallback","update:confirmLoading","close"],setup(e,{expose:C,emit:D}){const _=D,y=e;x(!0);const k=q(),a=x({status:y.status,refund_amount:null,reply:"",return_address:""}),w=(s,o,l)=>{Number(o)>Number(y.formData.suggest_refund_amount)?l(new Error("退款金额不能大于最大退款金额")):l()},N=()=>{_("close")},F=s=>{a.value.reply=s.target.innerText},b=async()=>{await k.value.validate();try{_("update:confirmLoading",!0);const s=await B({id:y.formData.aftersale_id,...a.value});_("submitCallback",s),h.success(s.message)}catch(s){h.error(s.message)}finally{_("update:confirmLoading",!1)}};return C({onFormSubmit:()=>{b()}}),(s,o)=>{const l=f("el-form-item"),g=f("el-input"),R=f("el-tag"),v=f("el-button"),S=f("el-form");return n(),V("div",T,[u("div",G,[u("div",I,[u("div",K,[d(S,{ref_key:"formRef",ref:k,model:a.value,"label-width":"auto"},{default:t(()=>[d(l,{label:"售后方式："},{default:t(()=>[u("p",null,m(e.formData.aftersales_type_name),1)]),_:1}),d(l,{label:"售后状态："},{default:t(()=>[u("p",null,m(e.formData.status_name),1)]),_:1}),e.status==2?(n(),i(l,{key:0,label:"退款金额：",prop:"refund_amount",rules:[{required:!0,message:"退款金额不能为空"},{validator:w,trigger:"blur"}]},{default:t(()=>[d(g,{modelValue:a.value.refund_amount,"onUpdate:modelValue":o[0]||(o[0]=r=>a.value.refund_amount=r),type:"number",placeholder:"请输入退款金额"},null,8,["modelValue"]),u("div",O,"最大退款金额"+m(U(H)(e.formData.suggest_refund_amount)||"0"),1)]),_:1},8,["rules"])):c("",!0),e.formData.aftersale_type==1&&e.status==2?(n(),i(l,{key:1,label:"退货地址：",prop:"return_address",rules:[{required:e.status==2,message:"退货地址不能为空"}]},{default:t(()=>[d(g,{modelValue:a.value.return_address,"onUpdate:modelValue":o[1]||(o[1]=r=>a.value.return_address=r),rows:6,type:"textarea",placeholder:"请输入退货地址"},null,8,["modelValue"])]),_:1},8,["rules"])):c("",!0),e.status==3?(n(),i(l,{key:2,label:"拒绝说明：",prop:"reply",rules:[{required:e.status==3,message:"拒绝说明不能为空"}]},{default:t(()=>[d(g,{modelValue:a.value.reply,"onUpdate:modelValue":o[2]||(o[2]=r=>a.value.reply=r),rows:6,type:"textarea",placeholder:"请输入拒绝说明"},null,8,["modelValue"]),u("div",null,[(n(!0),V(j,null,A(e.formData.refuse_reason,r=>(n(),i(R,{key:r,type:"info",style:{"margin-right":"5px"},onClick:F},{default:t(()=>[p(m(r),1)]),_:2},1024))),128))])]),_:1},8,["rules"])):c("",!0),d(l,null,{default:t(()=>[u("div",z,[e.formData.aftersale_type==1?(n(),i(v,{key:0,type:"primary",onClick:b},{default:t(()=>[p(m(e.status==2?"同意并发送退货地址":"拒绝退款"),1)]),_:1})):c("",!0),e.formData.aftersale_type==2?(n(),i(v,{key:1,type:"primary",onClick:b},{default:t(()=>[p(m(e.status==2?"同意仅退款":"拒绝仅退款"),1)]),_:1})):c("",!0),d(v,{onClick:N},{default:t(()=>[p("取消")]),_:1})])]),_:1})]),_:1},8,["model"])])])])])}}});const $=E(J,[["__scopeId","data-v-c87a5d78"]]);export{$ as default};
