import{d as G,i as v,G as T,q as H,c as C,e as a,b as t,w as o,f as x,g as i,I as S,r as d,o as b,L as J,E as n,j as B,D as y}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{P as I}from"./PopFormElm-DSof3F4x.js";import{_ as P}from"./Switch.vue_vue_type_script_setup_true_lang-CKSPWIQL.js";import{_ as Q}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as R}from"./Pagination-yOfjsBuR.js";import{u as W}from"./config-DNllFJyR.js";import{g as X,u as V,d as Y,b as Z}from"./article-C6BidpBq.js";import{S as ee}from"./SelectArticleCategory-DfRIn8M4.js";import{_ as q}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";import"./articleCategory-BYgmIQPq.js";/* empty css                                                                              */const te={class:"container"},le={class:"content_wrapper"},ae={class:"lyecs-table-list-warp"},oe={class:"list-table-tool lyecs-search-warp"},se={class:"advanced-search-warp list-table-tool-row"},ie={class:"simple-form-warp"},ne={class:"simple-form-field"},re={class:"form-group"},de={class:"control-container"},pe={class:"simple-form-field"},ue={class:"form-group"},ce={class:"control-container"},_e={class:"simple-form-field"},me={class:"form-group"},fe={class:"control-container"},ve={class:"simple-form-field"},be={class:"form-group"},ge={class:"control-container"},ye={class:"simple-form-field"},he={class:"list-table-tool-row"},ke={class:"list-table-tool-col"},we={key:2},Ce={class:"table-container"},Ve={style:{position:"relative"}},Ae={class:"empty-warp"},Ue={key:0,class:"empty-bg"},xe={key:0,class:"pagination-con"},Ge=G({__name:"List",setup(Se){const N=W(),z=v(),g=v(!0),h=v(0),p=v([]);v(!1);const s=T({page:1,size:N.get("page_size"),sort_field:"",sort_order:"",keyword:"",article_category_id:""}),k=v([]),c=async()=>{g.value=!0;try{s.article_category_id=Array.isArray(k.value)?k.value.join(","):"";const r=await X({...s});z.value=r.filter_result,h.value=r.total}catch(r){S.error(r.message)}finally{g.value=!1}};H(()=>{c()});const f=()=>{c()},F=({prop:r,order:e})=>{s.sort_field=r,s.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",c()},A=async r=>{try{const e=await Z(r,{ids:p.value});S.success(e.message),c()}catch(e){S.error(e.message)}},L=r=>{p.value=r.map(e=>e.article_id)};return(r,e)=>{const _=d("el-button"),O=d("el-input"),w=d("el-option"),D=d("el-select"),U=d("el-popconfirm"),j=d("el-space"),E=d("el-form"),u=d("el-table-column"),$=d("el-divider"),K=d("el-table"),M=d("a-spin");return b(),C("div",te,[a("div",le,[a("div",ae,[a("div",oe,[t(E,{model:s},{default:o(()=>[a("div",se,[a("div",ie,[a("div",ne,[a("div",re,[a("div",de,[t(O,{modelValue:s.keyword,"onUpdate:modelValue":e[0]||(e[0]=l=>s.keyword=l),name:"keyword",placeholder:"输入文章名称",onKeyup:J(f,["enter"]),clearable:"",onClear:f},{append:o(()=>[t(_,{onClick:f},{default:o(()=>e[9]||(e[9]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),a("div",pe,[a("div",ue,[e[10]||(e[10]=a("label",{class:"control-label"},[a("span",null,"全部分类：")],-1)),a("div",ce,[t(ee,{modelValue:k.value,"onUpdate:modelValue":e[1]||(e[1]=l=>k.value=l)},null,8,["modelValue"])])])]),a("div",_e,[a("div",me,[e[11]||(e[11]=a("label",{class:"control-label"},[a("span",null,"是否显示：")],-1)),a("div",fe,[t(D,{modelValue:s.is_show,"onUpdate:modelValue":e[2]||(e[2]=l=>s.is_show=l),clearable:"",onChange:f},{default:o(()=>[t(w,{value:0,label:"不显示"}),t(w,{value:1,label:"显示"})]),_:1},8,["modelValue"])])])]),a("div",ve,[a("div",be,[e[12]||(e[12]=a("label",{class:"control-label"},[a("span",null,"是否热门：")],-1)),a("div",ge,[t(D,{"fit-input-width":!1,modelValue:s.is_hot,"onUpdate:modelValue":e[3]||(e[3]=l=>s.is_hot=l),clearable:"",onChange:f},{default:o(()=>[t(w,{value:0,label:"不热门"}),t(w,{value:1,label:"热门"})]),_:1},8,["modelValue"])])])]),a("div",ye,[t(_,{type:"primary",onClick:f},{default:o(()=>e[13]||(e[13]=[n("搜索")])),_:1})])])]),a("div",he,[a("div",ke,[t(j,null,{default:o(()=>[t(i(q),{isDrawer:"",onOkCallback:c,title:"添加文章",width:"600px",path:"content/article/Info",params:{act:"add"}},{default:o(()=>[t(_,{type:"primary"},{default:o(()=>e[14]||(e[14]=[n("添加文章")])),_:1})]),_:1}),t(U,{title:"您确认要批量删除所选数据吗？",onConfirm:e[4]||(e[4]=l=>A("del"))},{reference:o(()=>[t(_,{disabled:p.value.length===0},{default:o(()=>e[15]||(e[15]=[n("批量删除")])),_:1},8,["disabled"])]),_:1}),t(U,{title:"您确认要批量显示所选数据吗？",onConfirm:e[5]||(e[5]=l=>A("show"))},{reference:o(()=>[t(_,{disabled:p.value.length===0},{default:o(()=>e[16]||(e[16]=[n("批量显示")])),_:1},8,["disabled"])]),_:1}),t(U,{title:"您确认要批量隐藏所选数据吗？",onConfirm:e[6]||(e[6]=l=>A("hide"))},{reference:o(()=>[t(_,{disabled:p.value.length===0},{default:o(()=>e[17]||(e[17]=[n("批量隐藏")])),_:1},8,["disabled"])]),_:1}),p.value.length==0?(b(),B(_,{key:0,disabled:p.value.length===0},{default:o(()=>e[18]||(e[18]=[n("批量转移分类")])),_:1},8,["disabled"])):(b(),B(i(q),{key:1,isDrawer:"",onOkCallback:c,title:"批量转移分类",width:"600px",path:"content/article/Move",params:{ids:p.value}},{default:o(()=>[t(_,null,{default:o(()=>e[19]||(e[19]=[n("批量转移分类")])),_:1})]),_:1},8,["params"])),p.value.length>0?(b(),C("span",we,[e[20]||(e[20]=n(" 已选择：")),a("b",null,y(p.value.length),1),e[21]||(e[21]=n(" 项 "))])):x("",!0)]),_:1})]),e[22]||(e[22]=a("div",{class:"list-table-tool-col"},null,-1))])]),_:1},8,["model"])]),a("div",Ce,[t(M,{spinning:g.value},{default:o(()=>[t(K,{data:z.value,"row-key":"article_id",onSelectionChange:L,total:h.value,onSortChange:F,loading:g.value},{empty:o(()=>[a("div",Ae,[g.value?x("",!0):(b(),C("div",Ue,"暂无数据"))])]),default:o(()=>[t(u,{type:"selection",width:"32"}),t(u,{label:"文章标题",prop:"article_id",sortable:"custom",width:300},{default:o(({row:l})=>[a("div",Ve,[t(i(I),{label:"文章标题",type:"textarea",requestApi:i(V),"org-value":l.article_title,"onUpdate:orgValue":m=>l.article_title=m,params:{id:l.article_id,field:"article_title"},max:50},{default:o(()=>[a("div",null,y(l.article_title),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])])]),_:1}),t(u,{label:"文章编号"},{default:o(({row:l})=>[t(i(I),{label:"文章编号",type:"input",requestApi:i(V),"org-value":l.article_sn,"onUpdate:orgValue":m=>l.article_sn=m,params:{id:l.article_id,field:"article_sn"},max:10},{default:o(()=>[a("div",null,y(l.article_sn||"-"),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])]),_:1}),t(u,{label:"文章分类",prop:"article_category_name"}),t(u,{label:"文章类型",prop:"article_type_text"}),t(u,{width:"90",label:"文章重要性"},{default:o(({row:l})=>[n(y(l.is_top==0?"普通":"置顶"),1)]),_:1}),t(u,{width:"160",label:"发布时间"},{default:o(({row:l})=>[n(y(l.add_time),1)]),_:1}),t(u,{label:"是否热门",prop:"is_hot",sortable:"custom",width:120},{default:o(({row:l})=>[t(i(P),{checked:l.is_hot,"onUpdate:checked":m=>l.is_hot=m,requestApi:i(V),params:{id:l.article_id,field:"is_hot"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),t(u,{label:"是否显示",prop:"is_show",sortable:"custom",width:120},{default:o(({row:l})=>[t(i(P),{checked:l.is_show,"onUpdate:checked":m=>l.is_show=m,requestApi:i(V),params:{id:l.article_id,field:"is_show"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),t(u,{label:"操作",fixed:"right",width:150},{default:o(({row:l})=>[t(i(q),{isDrawer:"",onOkCallback:c,title:"编辑文章",width:"600px",path:"content/article/Info",params:{act:"detail",id:l.article_id}},{default:o(()=>e[23]||(e[23]=[a("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),t($,{direction:"vertical"}),e[25]||(e[25]=a("a",{class:"btn-link"},"查看",-1)),t($,{direction:"vertical"}),t(i(Q),{onAfterDelete:c,requestApi:i(Y),params:{id:l.article_id}},{default:o(()=>e[24]||(e[24]=[n("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),h.value>0?(b(),C("div",xe,[t(i(R),{page:s.page,"onUpdate:page":e[7]||(e[7]=l=>s.page=l),size:s.size,"onUpdate:size":e[8]||(e[8]=l=>s.size=l),total:h.value,onCallback:c},null,8,["page","size","total"])])):x("",!0)])])])])}}});export{Ge as default};
