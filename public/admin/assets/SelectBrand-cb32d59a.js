import{a as O}from"./brand-995f2ca4.js";import{d as j,m as B,j as n,u as D,x as E,K as G,r as c,o,k as L,w as b,e as r,c as _,n as C,F as x,a as k,G as w,b as V,h as K,H as R,f as T,aH as U,_ as q}from"./index-7c2d2aef.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";const J={class:"option"},P={key:0,class:"all_brand"},Q=["onClick"],X={class:"right"},Y={class:"scroll-container"},Z=j({__name:"SelectBrand",props:B({brand_id:{type:[Number],default:0},multiple:{type:Boolean,default:!1},firstWordList:{type:Array,default:()=>[]},brandList:{type:Array,default:()=>[]},allBrandList:{type:Array,default:()=>[]}},{brand_form:{},brand_formModifiers:{}}),emits:B(["update:brand_id","update:brand_ids","update:brand_form"],["update:brand_form"]),setup(p,{emit:N}){const l=p,v=N,f=!l.brand_id||l.brand_id==0?n(""):n(l.brand_id),W=D(p,"brand_form"),S={label:"brand_name",value:"brand_id"},M=(e,a)=>a.brand_name.toLowerCase().indexOf(e.toLowerCase())>=0,z=e=>{s.value.map(a=>{a.brand_id==e&&(W.value=a)}),l.multiple?v("update:brand_ids",e):v("update:brand_id",e),d.value="全部"};E(()=>{l.brandList.length>1&&l.firstWordList.length>1&&l.allBrandList.length>1?(s.value=l.brandList,i.value=l.firstWordList,u.value=l.allBrandList):h()});const g=n(!1),d=n("全部"),i=n([]),s=n([]),u=n([]),h=async()=>{try{const e=await O();i.value=e.firstword_list,s.value=e.brand_list,u.value=e.brand_list}catch(e){G.error(e.message)}finally{g.value=!0}},y=(e,a)=>{if(d.value=a,a=="全部"){s.value=u.value;return}s.value=u.value.filter(m=>m.first_word==a)};return(e,a)=>{const m=c("el-divider"),A=c("el-option"),F=c("a-spin"),H=c("el-select");return o(),L(H,{multiple:p.multiple,modelValue:T(f),"onUpdate:modelValue":a[1]||(a[1]=t=>U(f)?f.value=t:null),allowClear:!0,fieldNames:S,"filter-option":M,clearable:"",filterable:"",placeholder:"选择品牌","popper-class":"brand-select","show-search":"",onChange:z,onVisibleChange:h},{default:b(()=>[r("div",J,[i.value?(o(),_("div",P,[r("ul",null,[r("li",{class:C(d.value=="全部"?"current":"")},[r("a",{onClick:a[0]||(a[0]=t=>y(t,"全部"))},"全部")],2),(o(!0),_(x,null,k(i.value,(t,$)=>(o(),_("li",{class:C(d.value==t?"current":"")},[r("a",{onClick:I=>y(I,t)},w(t),9,Q)],2))),256))]),V(m,{style:{margin:"4px 0 12px"}})])):K("",!0),r("div",X,[r("div",Y,[(o(!0),_(x,null,k(s.value,t=>(o(),L(A,{key:t.brand_id,label:t.brand_name,value:t.brand_id},{default:b(()=>[R(w(t.brand_name),1)]),_:2},1032,["label","value"]))),128))])])])]),empty:b(()=>[V(F,{spinning:!g.value,size:"small",style:{width:"100%","padding-top":"150px"}},null,8,["spinning"])]),_:1},8,["multiple","modelValue"])}}}),le=q(Z,[["__scopeId","data-v-c7322efd"]]);export{le as S};
