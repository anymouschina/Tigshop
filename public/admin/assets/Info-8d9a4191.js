import{d as A,j as _,E as P,s as W,x as J,K as U,r as d,o as n,c as g,e as c,k as f,w as o,b as t,f as m,h as x,eb as w,H as s,F as Q,a as X,G as h,L as Z,$ as ee,a0 as te,C as ae,p as oe,i as le,_ as se}from"./index-7c2d2aef.js";import"./index-6c62cf9b.js";import{F as N}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-9b6073fb.js";import{a as ue,c as re}from"./comment-801dbc97.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./config-9548fa9b.js";import{S as ne}from"./SelectProduct-5f7c1e31.js";/* empty css                                                                    *//* empty css                                                                              */import"./region-e0d291a6.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import{_ as ie}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./vuedraggable.umd-75ad0f8f.js";import"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import"./format-4e0206d3.js";import"./util-1ee03ed8.js";import"./time-290942a2.js";import"./config-e2aa16d1.js";import"./product-689c7c1e.js";import"./Pagination-8eb7b6b1.js";import"./SelectSku-94aa3072.js";/* empty css                                                                  */import"./region-05802f67.js";const de=v=>(oe("data-v-914b22ca"),v=v(),le(),v),me={class:"container"},pe={class:"content_wrapper"},_e={class:"lyecs-form-table"},ce=de(()=>c("div",{class:"extra"},"请统一上传比例为1:1的图片，宽100px，高100px（高清））",-1)),fe={class:"flex flex-wrap"},ve={key:0,class:"container-card"},ye={class:"title"},be={key:0},ge={key:1},Ve={style:{"text-align":"end","margin-top":"10px"}},ke=A({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(v,{expose:H,emit:q}){const V=q,y=v,p=_(!0),R=P().currentRoute.value.query,k=_(y.isDialog?y.act:String(R.act)),C=_(y.isDialog?y.id:Number(R.id)),E=k.value==="add"?"create":"update",Y=W(),e=_({comment_rank:5,is_recommend:1,is_top:0,sort_order:50,product_ids:[],comment_tag:[]}),b=_(""),S=_(!1),B=_(),$=u=>{e.value.comment_tag.splice(e.value.comment_tag.indexOf(u),1)},z=()=>{S.value=!0,ae(()=>{B.value.input.focus()})},M=()=>{b.value&&e.value.comment_tag.push(b.value),S.value=!1,b.value=""};J(()=>{k.value==="detail"?F():p.value=!1});const F=async()=>{try{const u=await ue(k.value,{id:C.value});let a=[];u.item.product_id&&(a=[u.item.product_id]),Object.assign(e.value,u.item,{product_ids:a})}catch(u){U.error(u.message),V("close")}finally{p.value=!1}},K=()=>{F()},L=async()=>{await Y.value.validate();try{V("update:confirmLoading",!0);let u=0;e.value.product_ids.length>0&&(u=e.value.product_ids[0]);const a=await re(E,{id:C.value,...e.value,product_id:u});V("submitCallback",a),U.success(a.message)}catch(u){U.error(u.message)}finally{V("update:confirmLoading",!1)}};return H({onFormSubmit:()=>{L()}}),(u,a)=>{const r=d("el-form-item"),i=d("el-radio"),D=d("el-radio-group"),O=d("el-tag"),I=d("el-button"),j=d("el-date-picker"),G=d("el-form"),T=d("a-spin");return n(),g("div",me,[c("div",pe,[c("div",_e,[p.value?x("",!0):(n(),f(G,{key:0,ref_key:"formRef",ref:Y,model:e.value,"label-width":"auto"},{default:o(()=>[t(r,{label:"评论商品",prop:"product_ids"},{default:o(()=>[p.value?x("",!0):(n(),f(m(ne),{key:0,isMultiple:!1,ids:e.value.product_ids,"onUpdate:ids":a[0]||(a[0]=l=>e.value.product_ids=l)},null,8,["ids"]))]),_:1}),t(r,{rules:[{required:!0,message:"会员名称不能为空!"}],label:"会员名称",prop:"username"},{default:o(()=>[t(m(w),{modelValue:e.value.username,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.username=l)},null,8,["modelValue"])]),_:1}),t(r,{label:"会员头像",prop:"avatar"},{default:o(()=>[t(m(N),{photo:e.value.avatar,"onUpdate:photo":a[2]||(a[2]=l=>e.value.avatar=l)},null,8,["photo"]),ce]),_:1}),t(r,{label:"评论星级",prop:"comment_rank"},{default:o(()=>[t(D,{modelValue:e.value.comment_rank,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.comment_rank=l)},{default:o(()=>[t(i,{value:1},{default:o(()=>[s("一星")]),_:1}),t(i,{value:2},{default:o(()=>[s("二星")]),_:1}),t(i,{value:3},{default:o(()=>[s("三星")]),_:1}),t(i,{value:4},{default:o(()=>[s("四星")]),_:1}),t(i,{value:5},{default:o(()=>[s("五星")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"标签",prop:"comment_tag"},{default:o(()=>[c("div",fe,[(n(!0),g(Q,null,X(e.value.comment_tag,l=>(n(),f(O,{style:{margin:"5px"},key:l,closable:"","disable-transitions":!1,onClose:we=>$(l)},{default:o(()=>[s(h(l),1)]),_:2},1032,["onClose"]))),128)),S.value?(n(),f(m(w),{key:0,style:{margin:"5px"},ref_key:"InputRef",ref:B,modelValue:b.value,"onUpdate:modelValue":a[4]||(a[4]=l=>b.value=l),class:"w-20",size:"small",onKeyup:Z(M,["enter"]),onBlur:M},null,8,["modelValue"])):(n(),f(I,{key:1,style:{margin:"5px"},class:"button-new-tag",size:"small",onClick:z},{default:o(()=>[s(" + 新增标签 ")]),_:1}))])]),_:1}),t(r,{rules:[{required:!0,message:"评论内容不能为空!"}],label:"评论内容",prop:"content"},{default:o(()=>[t(m(w),{modelValue:e.value.content,"onUpdate:modelValue":a[5]||(a[5]=l=>e.value.content=l),type:"textarea"},null,8,["modelValue"])]),_:1}),t(r,{label:"评论日期",prop:"add_time"},{default:o(()=>[t(j,{modelValue:e.value.add_time,"onUpdate:modelValue":a[6]||(a[6]=l=>e.value.add_time=l),format:"YYYY-MM-DD HH:mm:ss",placeholder:"请选择日期",type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),t(r,{label:"晒单",prop:"show_pics"},{default:o(()=>[p.value?x("",!0):(n(),f(m(N),{key:0,photos:e.value.show_pics,"onUpdate:photos":a[7]||(a[7]=l=>e.value.show_pics=l),isMultiple:!0},null,8,["photos"]))]),_:1}),t(r,{label:"排序",prop:"sort_order"},{default:o(()=>[t(m(w),{modelValue:e.value.sort_order,"onUpdate:modelValue":a[8]||(a[8]=l=>e.value.sort_order=l)},null,8,["modelValue"])]),_:1}),t(r,{label:"是否推荐",prop:"is_recommend"},{default:o(()=>[t(D,{modelValue:e.value.is_recommend,"onUpdate:modelValue":a[9]||(a[9]=l=>e.value.is_recommend=l)},{default:o(()=>[t(i,{value:1},{default:o(()=>[s("是")]),_:1}),t(i,{value:0},{default:o(()=>[s("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(r,{label:"是否置顶",prop:"is_top"},{default:o(()=>[t(D,{modelValue:e.value.is_top,"onUpdate:modelValue":a[10]||(a[10]=l=>e.value.is_top=l)},{default:o(()=>[t(i,{value:1},{default:o(()=>[s("是")]),_:1}),t(i,{value:0},{default:o(()=>[s("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),ee(t(r,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[t(I,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:a[11]||(a[11]=l=>L())},{default:o(()=>[s("提交 ")]),_:1},512)]),_:1},512),[[te,!y.isDialog]])]),_:1},8,["model"])),t(T,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])]),!p.value&&k.value!=="add"?(n(),g("div",ve,[c("div",ye,[s(" 管理员回复 "),t(m(ie),{params:{id:C.value},isDrawer:"",path:"product/comment/src/EditRemark",title:"回复评论",width:"600px",onOkCallback:K},{default:o(()=>[t(I,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:o(()=>[s(" 回复评论 ")]),_:1})]),_:1},8,["params"])]),e.value.reply?(n(),g("div",ge,[c("p",null,"内容："+h(e.value.reply.content),1),c("p",Ve,h(e.value.reply.username)+"@"+h(e.value.reply.add_time),1)])):(n(),g("div",be,"暂无回复！"))])):x("",!0)])])}}});const We=se(ke,[["__scopeId","data-v-914b22ca"]]);export{We as default};
