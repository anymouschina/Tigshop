import{d as pe,i as h,G as L,C as _e,q as ce,aX as me,aa as fe,c as i,e as l,f as d,F as S,a as D,b as a,w as r,L as N,g as u,I as z,r as k,o,n as E,D as b,j as f,E as p,_ as ve}from"./index-CGYuOau0.js";/* empty css             *//* empty css                                                                    */import{S as q}from"./SortButton-Dod5kej3.js";import{P as be}from"./Pagination-yOfjsBuR.js";import{P as ge}from"./ProductCard-DnyTbnB8.js";import{u as ye}from"./config-DNllFJyR.js";import{g as he,o as K}from"./order-CoX6hLeE.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import{M as A}from"./index-B-GURfkM.js";import{p as Y}from"./format-DFT-VJzO.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as ke}from"./SelectShop.vue_vue_type_script_setup_true_lang-BoPU8Xwc.js";import{S as we}from"./SelectLogisticsCompany-CjvtX9cs.js";import{S as xe}from"./SelectTimeInterval-BYQIPzkk.js";/* empty css                                               */import"./zh-cn-BAb8a1B9.js";import{T as R}from"./Tag-DHW499gP.js";import{a as Ce}from"./version-CpBOsX2d.js";import{M as Ve}from"./MobileCard-CkxM62lR.js";import{_ as w}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";import"./time-ClyPenjC.js";import"./shop-Daw3OFCx.js";import"./logisticsCompany-BhiSneCE.js";const Oe={class:"container"},Se={class:"content_wrapper"},De={class:"lyecs-table-list-warp"},ze={class:"list-table-tool lyecs-search-warp"},Ue={class:"advanced-search-warp list-table-tool-row"},Be={class:"simple-form-warp"},Le={class:"simple-form-field"},Ne={class:"form-group"},Re={class:"control-container"},Fe={class:"tabs flex"},$e=["onClick"],Ie={class:"advanced-search-warp list-table-tool-row"},Pe={class:"simple-form-warp"},Me={class:"simple-form-field"},Te={class:"form-group"},Ee={class:"control-container"},qe={key:0,class:"simple-form-field"},Ke={class:"form-group"},Ae={class:"control-container"},Ye={class:"simple-form-field"},je={class:"form-group"},Ge={class:"control-container"},Xe={class:"simple-form-field"},He={class:"form-group"},Je={class:"control-container"},Qe={class:"simple-form-field"},We={class:"form-group"},Ze={class:"control-container"},et={class:"simple-form-field"},tt={class:"form-group"},lt={class:"control-container"},st={class:"simple-form-field"},ot={class:"form-group"},at={class:"control-container"},rt={class:"simple-form-field"},nt={class:"form-group"},dt={class:"control-container"},it={class:"simple-form-field"},ut={class:"form-group"},pt={class:"control-container"},_t={class:"simple-form-field"},ct={class:"list-table-tool-row"},mt={class:"list-table-tool-col"},ft={key:4},vt={class:"table-container"},bt={class:"custom-table"},gt={class:"custom-table"},yt={class:"data-tr"},ht={colspan:"5"},kt={class:"check-box"},wt={class:"check-box"},xt={class:"textR"},Ct={style:{gap:"8px",display:"flex","justify-content":"right"}},Vt={class:"displayRow flex flex-align-center flex-justify-between"},Ot={class:"displayColumn textR whiteSN widthAuto"},St=["rowspan"],Dt={class:"displayColumn textR fz14"},zt={class:"gray fz12"},Ut=["rowspan"],Bt={class:"displayColumn fz12 textL"},Lt={class:"gray"},Nt={class:"gray"},Rt={class:"black"},Ft={class:"ml5"},$t=["rowspan"],It={class:"displayColumn fz12 textL"},Pt={key:0},Mt={class:"gray"},Tt=["rowspan"],Et=["rowspan"],qt={class:"buttonStyle"},Kt={key:0},At={colspan:"6"},Yt={key:0,class:"empty-warp"},jt={key:0,class:"empty-bg"},Gt={key:0,class:"pagination-con"},Xt=pe({__name:"List",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},setup(j){const G=h(localStorage.getItem("adminType")),X=ye(),H=L([{value:-1,label:"全部"},{value:0,label:"待支付"},{value:1,label:"待发货"},{value:2,label:"已发货"},{value:3,label:"已取消"},{value:4,label:"无效"},{value:5,label:"已完成"},{value:-2,label:"已删除"}]),J=L([{value:0,label:"待发货"},{value:1,label:"已发货"},{value:2,label:"已收货"},{value:3,label:"配送中"},{value:4,label:"配送失败"}]),Q=L([{value:0,label:"未付款"},{value:1,label:"支付中"},{value:2,label:"已付款"},{value:3,label:"退款中"},{value:4,label:"已退款"}]),W=n=>{s.order_status=n,c.value=[],v()},x=h([]),C=h(!0),U=h(0),c=h([]),F=h(!1);h(!1);const s=L({page:1,size:X.get("page_size"),sort_field:"order_id",sort_order:"desc",keyword:"",order_status:-1,address:"",email:"",mobile:"",add_time:[],add_end_time:"",add_start_time:""}),v=async()=>{C.value=!0;try{const n=await he({...s});if(n.filter_result!==null){const e=n.filter_result.map(_=>({..._,checkBox:!1}));x.value=e}else x.value=[];U.value=n.total}catch(n){z.error(n.message)}finally{C.value=!1}},B=j,Z=me(),V=_e().currentRoute.value.query,I=h(B.isDialog?B.act:String(V.act)),ee=h(B.isDialog?B.id:Number(V.id));ce(()=>{Z.meta.queryParam==="is_exchange_order"&&(s.is_exchange_order=1),I.value&&I.value!=="undefined"&&(s.user_id=ee.value),V&&V.status&&(s.order_status=Number(V.status)),v()});const m=()=>{v()},te=n=>{window.open(n,"_blank")},le=n=>{A.confirm({title:"确认删除订单吗？",content:"被删除的订单可以通过筛选查找并恢复",onOk:async()=>{try{const e=await K("del_order",{id:n});z.success(e.message),v()}catch(e){z.error(e.message)}finally{C.value=!1}}})},se=n=>{A.confirm({title:"确认订单已收货吗？",onOk:async()=>{try{const e=await K("confirm_receipt",{id:n});z.success(e.message),v()}catch(e){z.error(e.message)}finally{C.value=!1}}})},oe=fe(()=>{var n,e;return F.value=c.value.length>0&&((n=c.value)==null?void 0:n.length)===((e=x.value)==null?void 0:e.length),c.value.length>0&&c.value.length<x.value.length}),ae=n=>{var e,_;n?(c.value.length=0,(e=x.value)==null||e.forEach(y=>{y.checkBox=!0,c.value.push(y.order_id)})):(_=x.value)==null||_.forEach(y=>{y.checkBox=!1,c.value.length=0})},re=n=>{if(n.checkBox)c.value.indexOf(n.order_id)===-1&&c.value.push(n.order_id);else{let e=c.value.indexOf(n.order_id);e!==-1&&c.value.splice(e,1)}};return(n,e)=>{const _=k("el-button"),y=k("el-input"),P=k("el-option"),M=k("el-select"),ne=k("el-space"),T=k("el-checkbox"),de=k("el-divider"),$=k("el-tooltip"),ie=k("a-spin");return o(),i("div",Oe,[l("div",Se,[l("div",De,[l("div",ze,[l("div",Ue,[l("div",Be,[l("div",Le,[l("div",Ne,[l("div",Re,[l("div",Fe,[(o(!0),i(S,null,D(H,t=>(o(),i("div",{class:E(["item",s.order_status==t.value?"active":""]),onClick:g=>W(t.value)},b(t.label),11,$e))),256))])])])])])]),l("div",Ie,[l("div",Pe,[l("div",Me,[l("div",Te,[l("div",Ee,[a(y,{modelValue:s.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>s.keyword=t),style:{width:"280px"},name:"keyword",placeholder:"订单号/收货人姓名",onKeyup:N(m,["enter"]),clearable:"",onClear:m},{append:r(()=>[a(_,{onClick:m},{default:r(()=>e[20]||(e[20]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),u(Ce)()&&G.value!=="shop"?(o(),i("div",qe,[l("div",Ke,[e[21]||(e[21]=l("label",{class:"control-label"},[l("span",null,"选择店铺：")],-1)),l("div",Ae,[a(u(ke),{modelValue:s.shop_id,"onUpdate:modelValue":e[1]||(e[1]=t=>s.shop_id=t),onOnChange:m},null,8,["modelValue"])])])])):d("",!0),l("div",Ye,[l("div",je,[e[22]||(e[22]=l("label",{class:"control-label"},[l("span",null,"支付状态：")],-1)),l("div",Ge,[a(M,{modelValue:s.pay_status,"onUpdate:modelValue":e[2]||(e[2]=t=>s.pay_status=t),clearable:"",onChange:m},{default:r(()=>[(o(!0),i(S,null,D(Q,t=>(o(),f(P,{label:t.label,value:t.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])]),l("div",Xe,[l("div",He,[e[23]||(e[23]=l("label",{class:"control-label"},[l("span",null,"发货状态：")],-1)),l("div",Je,[a(M,{modelValue:s.shipping_status,"onUpdate:modelValue":e[3]||(e[3]=t=>s.shipping_status=t),clearable:"",onChange:m},{default:r(()=>[(o(!0),i(S,null,D(J,t=>(o(),f(P,{label:t.label,value:t.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])]),l("div",Qe,[l("div",We,[e[24]||(e[24]=l("label",{class:"control-label"},[l("span",null," 详细地址：")],-1)),l("div",Ze,[a(y,{modelValue:s.address,"onUpdate:modelValue":e[4]||(e[4]=t=>s.address=t),onKeyup:N(m,["enter"]),clearable:"",onClear:m},null,8,["modelValue"])])])]),l("div",et,[l("div",tt,[e[25]||(e[25]=l("label",{class:"control-label"},[l("span",null,"Email：")],-1)),l("div",lt,[a(y,{modelValue:s.email,"onUpdate:modelValue":e[5]||(e[5]=t=>s.email=t),onKeyup:N(m,["enter"]),clearable:"",onClear:m},null,8,["modelValue"])])])]),l("div",st,[l("div",ot,[e[26]||(e[26]=l("label",{class:"control-label"},[l("span",null,"手机号：")],-1)),l("div",at,[a(y,{modelValue:s.mobile,"onUpdate:modelValue":e[6]||(e[6]=t=>s.mobile=t),onKeyup:N(m,["enter"]),clearable:"",onClear:m},null,8,["modelValue"])])])]),l("div",rt,[l("div",nt,[e[27]||(e[27]=l("label",{class:"control-label"},[l("span",null,"配送物流：")],-1)),l("div",dt,[a(u(we),{id:s.logistics_id,"onUpdate:id":e[7]||(e[7]=t=>s.logistics_id=t),onOnChange:m},null,8,["id"])])])]),l("div",it,[l("div",ut,[e[28]||(e[28]=l("label",{class:"control-label"},[l("span",null,"下单时间：")],-1)),l("div",pt,[a(u(xe),{"end-date":s.add_end_time,"onUpdate:endDate":e[8]||(e[8]=t=>s.add_end_time=t),"start-date":s.add_start_time,"onUpdate:startDate":e[9]||(e[9]=t=>s.add_start_time=t),clearable:!1,type:"date","value-format":"YYYY-MM-DD"},null,8,["end-date","start-date"])])])]),l("div",_t,[a(_,{type:"primary",onClick:m},{default:r(()=>e[29]||(e[29]=[p("搜索")])),_:1})])])]),l("div",ct,[l("div",mt,[a(ne,null,{default:r(()=>[c.value.length>0?(o(),f(u(w),{key:0,params:{act:"several_detail",ids:c.value},title:"订单批量发货",isDrawer:"",path:"order/order/src/BatchShip",width:"880px",onOkCallback:v},{default:r(()=>[a(_,null,{default:r(()=>e[30]||(e[30]=[p(" 批量发货 ")])),_:1})]),_:1},8,["params"])):(o(),f(_,{key:1,disabled:!0},{default:r(()=>e[31]||(e[31]=[p(" 批量发货 ")])),_:1})),c.value.length>0?(o(),f(_,{key:2,onClick:e[10]||(e[10]=t=>te(`/admin/print/orderPrint?ids=${c.value}`))},{default:r(()=>e[32]||(e[32]=[p(" 批量打印 ")])),_:1})):(o(),f(_,{key:3,disabled:!0},{default:r(()=>e[33]||(e[33]=[p(" 批量打印 ")])),_:1})),c.value.length>0?(o(),i("span",ft,[e[34]||(e[34]=p(" 已选择：")),l("b",null,b(c.value.length),1),e[35]||(e[35]=p(" 项 "))])):d("",!0)]),_:1})])])]),l("div",vt,[a(ie,{spinning:C.value},{default:r(()=>[l("table",bt,[l("thead",null,[l("tr",null,[l("th",null,[a(T,{modelValue:F.value,"onUpdate:modelValue":e[11]||(e[11]=t=>F.value=t),indeterminate:oe.value,class:"check-box mr10",onChange:ae},null,8,["modelValue","indeterminate"]),a(q,{sortField:s.sort_field,"onUpdate:sortField":e[12]||(e[12]=t=>s.sort_field=t),sortOrder:s.sort_order,"onUpdate:sortOrder":e[13]||(e[13]=t=>s.sort_order=t),sortName:"order_id",text:"订单信息(下单时间排序)",onLoadData:e[14]||(e[14]=t=>m())},null,8,["sortField","sortOrder"])]),l("th",null,[a(q,{sortField:s.sort_field,"onUpdate:sortField":e[15]||(e[15]=t=>s.sort_field=t),sortOrder:s.sort_order,"onUpdate:sortOrder":e[16]||(e[16]=t=>s.sort_order=t),sortName:"total_amount",text:"订单金额",onLoadData:e[17]||(e[17]=t=>m())},null,8,["sortField","sortOrder"])]),e[36]||(e[36]=l("th",null,"收货人信息",-1)),e[37]||(e[37]=l("th",null,"物流/支付信息",-1)),e[38]||(e[38]=l("th",null,"订单状态",-1)),e[39]||(e[39]=l("th",{class:"textR"},"操作",-1))])])]),(o(!0),i(S,null,D(x.value,t=>(o(),i("table",gt,[l("thead",null,[l("tr",yt,[l("th",ht,[a(T,{modelValue:t.checkBox,"onUpdate:modelValue":g=>t.checkBox=g,class:"check-box mr10",onChange:g=>re(t)},null,8,["modelValue","onUpdate:modelValue","onChange"]),l("span",kt,"订单编号："+b(t.order_sn),1),a(de,{direction:"vertical"}),l("span",wt,"下单时间："+b(t.add_time),1),t.parent_order_id>0?(o(),f(u(w),{key:0,params:{act:"parent_detail",id:t.order_id,isParent:!0},showClose:!1,showOnOk:!1,title:"订单详情 "+t.order_sn,isDrawer:"",style:{display:"inline-block"},path:"order/order/Info",width:"880px",onCallback:v},{default:r(()=>[t.parent_order_id>0?(o(),f($,{key:0,content:"该订单已拆分，点击可查看父订单",effect:"light",placement:"top"},{default:r(()=>[a(u(R),{text:"子订单"})]),_:1})):d("",!0)]),_:2},1032,["params","title"])):d("",!0),t.shop_id>0?(o(),f($,{key:1,content:"订单来自店铺："+t.shop.shop_title,effect:"light",placement:"top"},{default:r(()=>[a(u(R),{transparent:!1,text:"店铺"})]),_:2},1032,["content"])):d("",!0),t.order_source?(o(),f($,{key:2,content:"订单来自"+t.order_source+"下单",effect:"light",placement:"top"},{default:r(()=>[a(u(R),{text:t.order_source,transparent:!0,style:{"text-transform":"uppercase"}},null,8,["text"])]),_:2},1032,["content"])):d("",!0),t.is_exchange_order?(o(),f(u(R),{key:3,transparent:!0,color:"red",text:"积分兑换"})):d("",!0)]),l("th",xt,[l("div",Ct,[a(u(w),{params:{act:"detail",id:t.order_id},showClose:!1,showOnOk:!1,title:"订单详情 "+t.order_sn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:v},{default:r(()=>[a(_,{bg:"",class:"buttonColor mr10",size:"small",text:"",type:"primary"},{default:r(()=>e[40]||(e[40]=[p(" 查看详情")])),_:1})]),_:2},1032,["params","title"]),a(u(w),{params:{act:"detail",id:t.order_id,valueName:"admin_note"},isDrawer:"",path:"order/order/src/EditRemark",title:"编辑备注",width:"600px",onOkCallback:v},{default:r(()=>[a(_,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>e[41]||(e[41]=[p(" 备注 ")])),_:1})]),_:2},1032,["params"])])])])]),l("tbody",null,[(o(!0),i(S,null,D(t.items,(g,O)=>(o(),i("tr",null,[l("td",null,[l("div",Vt,[a(u(ge),{pic_thumb:g.pic_thumb,product_id:g.product_id,product_name:g.product_name,product_type:g.product_type,url:g.url},null,8,["pic_thumb","product_id","product_name","product_type","url"]),l("div",Ot,[l("div",null,b(u(Y)(g.price)),1),l("div",null,"× "+b(g.quantity),1)])])]),O==0?(o(),i("td",{key:0,rowspan:t.items.length},[l("div",Dt,[l("div",null,b(u(Y)(t.total_amount)),1),l("div",zt,"(含运费："+b(t.shipping_fee)+")",1),l("div",null,[t.status===6||t.status===7?(o(),f(u(w),{key:0,params:{act:"detail",id:t.aftersale_id},isDrawer:"",path:"order/aftersales/Info",title:"售后详情 "+t.aftersales_sn,width:"800px",onOkCallback:v,showClose:!1,showOnOk:!1},{default:r(()=>[a(_,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>e[42]||(e[42]=[p(" 售后详情 ")])),_:1})]),_:2},1032,["params","title"])):d("",!0)])])],8,St)):d("",!0),O==0?(o(),i("td",{key:1,rowspan:t.items.length},[l("div",Bt,[l("div",Lt,[e[43]||(e[43]=p(" 会员名： ")),a(u(w),{params:{act:"detail",id:t.user_id},isDrawer:"",path:"user/user/Detail",title:"用户信息",width:"800px",onOkCallback:v,showOnOk:!1},{default:r(()=>[l("a",null,b(t.user.nickname),1)]),_:2},1032,["params"])]),l("div",Nt,[e[44]||(e[44]=p(" 收货人： ")),l("span",Rt,[p(b(t.consignee)+" ",1),l("span",Ft,[a(Ve,{mobile:t.mobile},null,8,["mobile"])])])])])],8,Ut)):d("",!0),O==0?(o(),i("td",{key:2,rowspan:t.items.length},[l("div",It,[l("div",null,[l("span",null,b(t.pay_type_id===1?"在线支付":t.pay_type_id===2?"货到付款":"线下支付"),1)]),t.logistics_name?(o(),i("div",Pt,[p(b(t.shipping_type_name)+" ",1),l("span",Mt,b(""+t.logistics_name),1)])):d("",!0)])],8,$t)):d("",!0),O==0?(o(),i("td",{key:3,rowspan:t.items.length},[l("span",{class:E({orange:t.order_status===0,black:t.order_status===1||t.order_status===2||t.order_status===4,gray:t.order_status===3,green:t.order_status===5})},b(t.order_status_name),3)],8,Tt)):d("",!0),O==0?(o(),i("td",{key:4,rowspan:t.items.length},[l("div",qt,[t.available_actions.cancel_order?(o(),f(u(w),{key:0,params:{act:"cancel_order",id:t.order_id},isDrawer:"",path:"order/order/src/Operation",title:"取消订单",width:"600px",onOkCallback:v},{default:r(()=>[a(_,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>e[45]||(e[45]=[p(" 取消订单 ")])),_:1})]),_:2},1032,["params"])):d("",!0),t.available_actions.del_order?(o(),f(_,{key:1,bg:"",size:"small",text:"",type:"primary",onClick:ue=>le(t.order_id)},{default:r(()=>e[46]||(e[46]=[p(" 删除订单 ")])),_:2},1032,["onClick"])):d("",!0),t.available_actions.deliver?(o(),f(u(w),{key:2,params:{act:"detail",id:t.order_id},title:"订单发货 "+t.order_sn,isDrawer:"",path:"order/order/src/ToShip",width:"900px",onOkCallback:v},{default:r(()=>[a(_,{bg:"",size:"small",text:"",type:"danger"},{default:r(()=>e[47]||(e[47]=[p(" 去发货 ")])),_:1})]),_:2},1032,["params","title"])):d("",!0),t.available_actions.confirm_receipt?(o(),f(_,{key:3,bg:"",size:"small",text:"",type:"danger",onClick:ue=>se(t.order_id)},{default:r(()=>e[48]||(e[48]=[p(" 确认收货 ")])),_:2},1032,["onClick"])):d("",!0)])],8,Et)):d("",!0)]))),256)),t.admin_note?(o(),i("tr",Kt,[l("td",At,[e[50]||(e[50]=l("span",{class:"orange"},"商家备注：",-1)),p(b(t.admin_note)+" ",1),a(u(w),{params:{act:"detail",id:t.order_id,valueName:"admin_note"},isDrawer:"",path:"order/order/src/EditRemark",title:"编辑备注",width:"600px",onOkCallback:v},{default:r(()=>[a(_,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>e[49]||(e[49]=[p(" 修改 ")])),_:1})]),_:2},1032,["params"])])])):d("",!0)])]))),256)),U.value==0?(o(),i("div",Yt,[C.value?d("",!0):(o(),i("div",jt,"暂无数据"))])):d("",!0)]),_:1},8,["spinning"])]),U.value>0?(o(),i("div",Gt,[a(u(be),{page:s.page,"onUpdate:page":e[18]||(e[18]=t=>s.page=t),size:s.size,"onUpdate:size":e[19]||(e[19]=t=>s.size=t),total:U.value,onCallback:v},null,8,["page","size","total"])])):d("",!0)])])])}}}),kl=ve(Xt,[["__scopeId","data-v-831f03ef"]]);export{kl as default};
