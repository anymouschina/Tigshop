import{d as O,j as g,I as j,x as E,r,o as d,c,e,b as t,w as a,f as _,h as w,K as k,L as G,H as p,G as C,F as S,a as I,p as H,i as M,_ as J}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{P as Q}from"./PopFormElm-61cd9b7d.js";import{_ as R}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as W}from"./Pagination-8eb7b6b1.js";import{u as X}from"./config-9548fa9b.js";import{g as Y,u as Z,d as ee,b as te}from"./productAttributesTpl-24fae2a8.js";import{_ as P}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const x=f=>(H("data-v-61505f69"),f=f(),M(),f),oe={class:"container"},se={class:"content_wrapper"},ae={class:"lyecs-table-list-warp"},le={class:"list-table-tool lyecs-search-warp"},ne={class:"advanced-search-warp list-table-tool-row"},ie={class:"simple-form-warp"},re={class:"simple-form-field"},de={class:"form-group"},ce={class:"control-container"},_e=x(()=>e("span",{class:"iconfont icon-chakan1"},null,-1)),pe={class:"simple-form-field"},ue={class:"form-group"},me={class:"control-container"},fe={class:"simple-form-field"},ve={class:"form-group"},he={class:"control-container"},ge={key:0},be={class:"table-container"},ye={style:{position:"relative"}},we={class:"tpl-data-con"},ke=x(()=>e("em",null,"，",-1)),Ce=x(()=>e("a",{class:"btn-link"},"编辑",-1)),Se={class:"empty-warp"},xe={key:0,class:"empty-bg"},Ae={key:0,class:"pagination-con"},Ve=O({__name:"List",setup(f){const z=X(),A=g(),u=g(!0),v=g(0),m=g([]),n=j({page:1,size:z.get("page_size"),sort_field:"",sort_order:"",keyword:""}),i=async()=>{u.value=!0;try{const l=await Y({...n});A.value=l.filter_result,v.value=l.total}catch(l){k.error(l.message)}finally{u.value=!1}};E(()=>{i()});const V=()=>{i()},L=({prop:l,order:o})=>{n.sort_field=l,n.sort_order=o=="ascending"?"asc":o=="descending"?"desc":"",i()},T=async l=>{try{const o=await te(l,{ids:m.value});k.success(o.message),i()}catch(o){k.error(o.message)}},F=l=>{m.value=l.map(o=>o.tpl_id)};return(l,o)=>{const b=r("el-button"),U=r("el-input"),q=r("el-popconfirm"),B=r("el-form"),h=r("el-table-column"),D=r("el-divider"),N=r("el-table"),K=r("a-spin");return d(),c("div",oe,[e("div",se,[e("div",ae,[e("div",le,[t(B,{model:n},{default:a(()=>[e("div",ne,[e("div",ie,[e("div",re,[e("div",de,[e("div",ce,[t(U,{modelValue:n.keyword,"onUpdate:modelValue":o[0]||(o[0]=s=>n.keyword=s),name:"keyword",placeholder:"输入品牌名称",onKeyup:G(V,["enter"])},{append:a(()=>[t(b,{onClick:V},{default:a(()=>[_e]),_:1})]),_:1},8,["modelValue"])])])]),e("div",pe,[e("div",ue,[e("div",me,[t(_(P),{params:{act:"add"},isDrawer:"",path:"product/productAttributesTpl/Info",title:"添加属性模板",width:"600px",onOkCallback:i},{default:a(()=>[t(b,{type:"primary"},{default:a(()=>[p("添加属性模板")]),_:1})]),_:1})])])]),e("div",fe,[e("div",ve,[e("div",he,[t(q,{title:"您确认要批量删除所选数据吗？",onConfirm:o[1]||(o[1]=s=>T("del"))},{reference:a(()=>[t(b,{disabled:m.value.length===0},{default:a(()=>[p("批量删除")]),_:1},8,["disabled"])]),_:1}),m.value.length>0?(d(),c("span",ge,[p(" 已选择："),e("b",null,C(m.value.length),1),p(" 项 ")])):w("",!0)])])])])])]),_:1},8,["model"])]),e("div",be,[t(K,{spinning:u.value},{default:a(()=>[t(N,{data:A.value,loading:u.value,total:v.value,"row-key":"tpl_id",onSelectionChange:F,onSortChange:L},{empty:a(()=>[e("div",Se,[u.value?w("",!0):(d(),c("div",xe,"暂无数据"))])]),default:a(()=>[t(h,{type:"selection",width:"32"}),t(h,{label:"属性模板名称",sortable:"custom",width:"200"},{default:a(({row:s})=>[e("div",ye,[t(_(Q),{"org-value":s.tpl_name,"onUpdate:orgValue":y=>s.tpl_name=y,max:50,params:{id:s.tpl_id,field:"tpl_name"},requestApi:_(Z),label:"属性模板名称",type:"textarea"},{default:a(()=>[e("div",null,C(s.tpl_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])])]),_:1}),t(h,{label:"属性名称列表"},{default:a(({row:s})=>[e("div",we,[(d(!0),c(S,null,I(s.tpl_data,y=>(d(),c(S,null,[(d(!0),c(S,null,I(y,$=>(d(),c("span",null,[p(C($.attr_name),1),ke]))),256))],64))),256))])]),_:1}),t(h,{width:150,fixed:"right",label:"操作"},{default:a(({row:s})=>[t(_(P),{params:{act:"detail",id:s.tpl_id},isDrawer:"",path:"product/productAttributesTpl/Info",title:"编辑属性模板",width:"600px",onOkCallback:i},{default:a(()=>[Ce]),_:2},1032,["params"]),t(D,{direction:"vertical"}),t(_(R),{params:{id:s.tpl_id},requestApi:_(ee),onAfterDelete:i},{default:a(()=>[p("删除")]),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),v.value>0?(d(),c("div",Ae,[t(_(W),{page:n.page,"onUpdate:page":o[2]||(o[2]=s=>n.page=s),size:n.size,"onUpdate:size":o[3]||(o[3]=s=>n.size=s),total:v.value,onCallback:i},null,8,["page","size","total"])])):w("",!0)])])])])}}});const Ke=J(Ve,[["__scopeId","data-v-61505f69"]]);export{Ke as default};
