import{d as L,K as M,i as f,G as j,ad as G,q as R,c as g,e as o,b as t,j as H,w as s,M as J,g as n,f as S,E as b,D as N,I as V,r as c,o as u}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{P as Q}from"./PopFormElm-BZp1_Wme.js";import{_ as A}from"./Switch.vue_vue_type_script_setup_true_lang-C5nzofSO.js";import{D as W}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as X}from"./Pagination-wR9huHyl.js";import{g as Y,b as Z,u as U,d as ee}from"./pcNavigation-YlzjlM0Y.js";import{_ as te}from"./Tree.vue_vue_type_style_index_0_lang-0cLTcEng.js";import{_ as O}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const ae={class:"container"},oe={class:"content_wrapper"},se={key:0,class:"container"},le={class:"lyecs-table-list-warp"},ne={class:"list-table-tool lyecs-search-warp"},ie={class:"advanced-search-warp list-table-tool-row"},re={class:"simple-form-warp"},de={class:"simple-form-field"},ce={class:"form-group"},pe={class:"control-container"},ue={class:"simple-form-field"},me={class:"form-group"},_e={class:"control-container"},ve={class:"simple-form-field"},fe={class:"form-group"},ge={class:"control-container"},be={key:0},he={class:"table-container"},ye={class:"empty-warp"},ke={key:0,class:"empty-bg"},we={key:0,class:"pagination-con"},De=L({__name:"List",setup(Ce){const x=M(),q=f([]),m=f(!0),h=f(0),_=f([]),i=j({page:1,size:x.get("pageSize"),sortField:"",sortOrder:"",keyword:"",type:1}),r=f(1),y=G(()=>r.value===1?"主导航":r.value===2?"顶部小导航":r.value===3?"底部导航":"侧边导航"),B=l=>{i.type=l,l!=2&&d()},d=async()=>{m.value=!0;try{const l=await Y({...i});q.value=l.records,h.value=l.total}catch(l){V.error(l.message)}finally{m.value=!1}};R(()=>{d()});const w=()=>{d()},P=({prop:l,order:e})=>{i.sortField=l,i.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",d()},z=async l=>{try{const e=await Z(l,{ids:_.value});V.success("操作成功"),d()}catch(e){V.error(e.message)}},D=l=>{_.value=l.map(e=>e.id)};return(l,e)=>{const k=c("el-tab-pane"),I=c("el-tabs"),C=c("el-button"),F=c("TigInput"),K=c("el-popconfirm"),p=c("el-table-column"),T=c("el-divider"),$=c("el-table"),E=c("a-spin");return u(),g("div",ae,[o("div",oe,[t(I,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value=a),class:"lyecs-tabs","tab-position":"top",onTabChange:B},{default:s(()=>[t(k,{name:1,label:"主导航"}),t(k,{name:2,label:"顶部小导航"}),t(k,{name:3,label:"底部导航"}),t(k,{name:4,label:"侧边导航"})]),_:1},8,["modelValue"]),r.value!=null&&r.value!=2?(u(),g("div",se,[o("div",le,[o("div",ne,[o("div",ie,[o("div",re,[o("div",de,[o("div",ce,[o("div",pe,[t(F,{modelValue:i.keyword,"onUpdate:modelValue":e[1]||(e[1]=a=>i.keyword=a),name:"keyword",placeholder:"输入导航栏名称",onKeyup:J(w,["enter"]),clearable:"",onClear:w},{append:s(()=>[t(C,{onClick:w},{default:s(()=>e[5]||(e[5]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),o("div",ue,[o("div",me,[o("div",_e,[t(n(O),{params:{act:"add",type:r.value,typeName:y.value},title:"添加"+y.value,isDrawer:"",path:"decorate/pcNavigation/Info",width:"560px",onOkCallback:d},{default:s(()=>[t(C,{type:"primary"},{default:s(()=>[b(N("添加"+y.value),1)]),_:1})]),_:1},8,["params","title"])])])]),o("div",ve,[o("div",fe,[o("div",ge,[t(K,{title:"您确认要批量删除所选数据吗？",onConfirm:e[2]||(e[2]=a=>z("del"))},{reference:s(()=>[t(C,{disabled:_.value.length===0},{default:s(()=>e[6]||(e[6]=[b("批量删除")])),_:1},8,["disabled"])]),_:1}),_.value.length>0?(u(),g("span",be,[e[7]||(e[7]=b(" 已选择：")),o("b",null,N(_.value.length),1),e[8]||(e[8]=b(" 项 "))])):S("",!0)])])])])])]),o("div",he,[t(E,{spinning:m.value},{default:s(()=>[t($,{data:q.value,loading:m.value,total:h.value,"row-key":"id",onSelectionChange:D,onSortChange:P},{empty:s(()=>[o("div",ye,[m.value?S("",!0):(u(),g("div",ke,"暂无数据"))])]),default:s(()=>[t(p,{type:"selection",width:"32"}),t(p,{width:200,label:"名称",prop:"title"}),t(p,{width:100,label:"位置",prop:"typeName"}),t(p,{label:"是否显示",prop:"isShow"},{default:s(({row:a})=>[t(n(A),{checked:a.isShow,"onUpdate:checked":v=>a.isShow=v,params:{id:a.id,field:"isShow"},requestApi:n(U)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),t(p,{label:"是否新窗口"},{default:s(({row:a})=>[t(n(A),{checked:a.isBlank,"onUpdate:checked":v=>a.isBlank=v,params:{id:a.id,field:"isBlank"},requestApi:n(U)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),t(p,{label:"排序",prop:"sortOrder",sortable:"custom"},{default:s(({row:a})=>[t(n(Q),{"org-value":a.sortOrder,"onUpdate:orgValue":v=>a.sortOrder=v,params:{id:a.id,field:"sortOrder"},requestApi:n(U),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"integer"},{default:s(()=>[o("div",null,N(a.sortOrder),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),t(p,{width:150,fixed:"right",label:"操作"},{default:s(({row:a})=>[t(n(O),{params:{act:"detail",type:r.value,id:a.id},title:"编辑商城"+y.value+"导航栏",isDrawer:"",path:"decorate/pcNavigation/Info",width:"560px",onOkCallback:d},{default:s(()=>e[9]||(e[9]=[o("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params","title"]),t(T,{direction:"vertical"}),t(n(W),{params:{id:a.id},requestApi:n(ee),onAfterDelete:d},{default:s(()=>e[10]||(e[10]=[b("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),h.value>0?(u(),g("div",we,[t(n(X),{page:i.page,"onUpdate:page":e[3]||(e[3]=a=>i.page=a),size:i.size,"onUpdate:size":e[4]||(e[4]=a=>i.size=a),total:h.value,onCallback:d},null,8,["page","size","total"])])):S("",!0)])])])):(u(),H(te,{key:1}))])])}}});export{De as default};
