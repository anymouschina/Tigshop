import{d as A,j as c,E as H,s as O,x as $,r,o as d,c as _,e as g,b as e,w as o,F as R,a as h,k as N,h as v,f as G,H as u,$ as J,a0 as Q,K as I,p as W,i as X,_ as Y}from"./index-7c2d2aef.js";import{a as Z,b as ee}from"./messageType-2d4d1833.js";const U=b=>(W("data-v-2cabd077"),b=b(),X(),b),ae={class:"container"},le={class:"content_wrapper"},te={class:"lyecs-form-table"},oe={key:0},se={class:"tznr"},me={class:"fl1 right-div"},de=U(()=>g("p",null,"请输入模板消息详细内容对应的变量，关键字个数需与添加的模板一致。可以使用如下变量：",-1)),ue=U(()=>g("p",null,"{order_sn}订单编号",-1)),ne=U(()=>g("p",null,"{logistics_name}物流公司",-1)),pe=U(()=>g("p",null,"{tracking_no}物流单号",-1)),_e={key:1},ie={key:1},re={key:2},ve={key:3},ge={key:4},fe={key:5},ce=A({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(b,{expose:T,emit:F}){const y=F,V=b,w=c(!0),S=H().currentRoute.value.query,k=c(V.isDialog?V.act:String(S.act)),C=c(V.isDialog?V.id:Number(S.id)),L=k.value==="add"?"create":"update",D=O(),a=c({template_message:{wechat_data:{},app_data:{},ding_data:{},message_data:{},mini_program_data:{},msg_data:{}}}),i=c("站内信"),M=p=>{console.log(p)};let z=c([{prop:"is_message",label:"站内信"},{prop:"is_msg",label:"短信通知"},{prop:"is_wechat",label:"微信模板消息"},{prop:"is_mini_program",label:"小程序订阅消息"}]);const j=async()=>{try{const p=await Z(k.value,{id:C.value});Object.assign(a.value,p.item);for(const l of z.value){const x=a.value[l.prop];if(typeof x=="number"&&x>-1){i.value=l.label;break}}}catch(p){I.error(p.message),y("close")}finally{w.value=!1}};$(()=>{k.value==="detail"?j():w.value=!1});const B=async()=>{await D.value.validate();try{y("update:confirmLoading",!0);const p=await ee(L,{id:C.value,...a.value});y("submitCallback",p),I.success(p.message)}catch(p){I.error(p.message)}finally{y("update:confirmLoading",!1)}};return T({onFormSubmit:()=>{B()}}),(p,l)=>{const x=r("el-tab-pane"),q=r("el-tabs"),m=r("el-input"),s=r("el-form-item"),n=r("el-radio"),f=r("el-radio-group"),E=r("el-button"),K=r("el-form"),P=r("a-spin");return d(),_("div",ae,[g("div",le,[g("div",te,[e(q,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=t=>i.value=t),class:"lyecs-tabs","tab-position":"top",onTabChange:M},{default:o(()=>[(d(!0),_(R,null,h(G(z),t=>(d(),_(R,null,[a.value[t.prop]>-1?(d(),N(x,{key:0,label:t.label,name:t.label},null,8,["label","name"])):v("",!0)],64))),256))]),_:1},8,["modelValue"]),w.value?v("",!0):(d(),N(K,{key:0,ref_key:"formRef",ref:D,model:a.value,"label-width":"auto"},{default:o(()=>[i.value==="站内信"?(d(),_("div",oe,[e(s,{label:"通知标题",prop:"template_name"},{default:o(()=>[e(m,{modelValue:a.value.template_message.message_data.template_name,"onUpdate:modelValue":l[1]||(l[1]=t=>a.value.template_message.message_data.template_name=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"通知内容",prop:"content"},{default:o(()=>[g("div",se,[e(m,{modelValue:a.value.template_message.message_data.content,"onUpdate:modelValue":l[2]||(l[2]=t=>a.value.template_message.message_data.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",type:"textarea"},null,8,["modelValue"]),g("div",me,[de,a.value.template_message.message_data.message_id==3?(d(),_(R,{key:0},[ue,ne,pe],64)):(d(),_("p",_e," {order_sn}订单编号"))])])]),_:1}),e(s,{label:"是否开启",prop:"is_message"},{default:o(()=>[e(f,{modelValue:a.value.is_message,"onUpdate:modelValue":l[3]||(l[3]=t=>a.value.is_message=t)},{default:o(()=>[e(n,{value:1},{default:o(()=>[u("是")]),_:1}),e(n,{value:0},{default:o(()=>[u("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})])):v("",!0),i.value==="短信通知"?(d(),_("div",ie,[e(s,{label:"短信模板ID",prop:"template_id"},{default:o(()=>[e(m,{modelValue:a.value.template_message.msg_data.template_id,"onUpdate:modelValue":l[4]||(l[4]=t=>a.value.template_message.msg_data.template_id=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"通知内容",prop:"content"},{default:o(()=>[e(m,{modelValue:a.value.template_message.msg_data.content,"onUpdate:modelValue":l[5]||(l[5]=t=>a.value.template_message.msg_data.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",disabled:"",type:"textarea"},null,8,["modelValue"])]),_:1}),e(s,{label:"是否开启",prop:"is_msg"},{default:o(()=>[e(f,{modelValue:a.value.is_msg,"onUpdate:modelValue":l[6]||(l[6]=t=>a.value.is_msg=t)},{default:o(()=>[e(n,{value:1},{default:o(()=>[u("是")]),_:1}),e(n,{value:0},{default:o(()=>[u("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})])):v("",!0),i.value==="微信模板消息"?(d(),_("div",re,[e(s,{label:"通知标题",prop:"template_name"},{default:o(()=>[e(m,{modelValue:a.value.template_message.wechat_data.template_name,"onUpdate:modelValue":l[7]||(l[7]=t=>a.value.template_message.wechat_data.template_name=t),disabled:""},null,8,["modelValue"])]),_:1}),e(s,{label:"模板ID",prop:"template_id"},{default:o(()=>[e(m,{modelValue:a.value.template_message.wechat_data.template_id,"onUpdate:modelValue":l[8]||(l[8]=t=>a.value.template_message.wechat_data.template_id=t),disabled:""},null,8,["modelValue"])]),_:1}),e(s,{label:"模板",prop:"content"},{default:o(()=>[e(m,{modelValue:a.value.template_message.wechat_data.content,"onUpdate:modelValue":l[9]||(l[9]=t=>a.value.template_message.wechat_data.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",disabled:"",type:"textarea"},null,8,["modelValue"])]),_:1}),e(s,{label:"是否开启",prop:"is_wechat"},{default:o(()=>[e(f,{modelValue:a.value.is_wechat,"onUpdate:modelValue":l[10]||(l[10]=t=>a.value.is_wechat=t)},{default:o(()=>[e(n,{value:1},{default:o(()=>[u("是")]),_:1}),e(n,{value:0},{default:o(()=>[u("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})])):v("",!0),i.value==="小程序订阅消息"?(d(),_("div",ve,[e(s,{label:"通知标题",prop:"template_name"},{default:o(()=>[e(m,{modelValue:a.value.template_message.mini_program_data.template_name,"onUpdate:modelValue":l[11]||(l[11]=t=>a.value.template_message.mini_program_data.template_name=t),disabled:""},null,8,["modelValue"])]),_:1}),e(s,{label:"模板ID",prop:"template_id"},{default:o(()=>[e(m,{modelValue:a.value.template_message.mini_program_data.template_id,"onUpdate:modelValue":l[12]||(l[12]=t=>a.value.template_message.mini_program_data.template_id=t),disabled:""},null,8,["modelValue"])]),_:1}),e(s,{label:"模板",prop:"content"},{default:o(()=>[e(m,{modelValue:a.value.template_message.mini_program_data.content,"onUpdate:modelValue":l[13]||(l[13]=t=>a.value.template_message.mini_program_data.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",disabled:"",type:"textarea"},null,8,["modelValue"])]),_:1}),e(s,{label:"是否开启",prop:"is_mini_program"},{default:o(()=>[e(f,{modelValue:a.value.is_mini_program,"onUpdate:modelValue":l[14]||(l[14]=t=>a.value.is_mini_program=t)},{default:o(()=>[e(n,{value:1},{default:o(()=>[u("是")]),_:1}),e(n,{value:0},{default:o(()=>[u("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})])):v("",!0),i.value==="APP"?(d(),_("div",ge,[e(s,{label:"通知标题",prop:"template_name"},{default:o(()=>[e(m,{modelValue:a.value.template_message.app_data.template_name,"onUpdate:modelValue":l[15]||(l[15]=t=>a.value.template_message.app_data.template_name=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"通知内容",prop:"content"},{default:o(()=>[e(m,{modelValue:a.value.template_message.app_data.content,"onUpdate:modelValue":l[16]||(l[16]=t=>a.value.template_message.app_data.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",type:"textarea"},null,8,["modelValue"])]),_:1}),e(s,{label:"是否开启",prop:"is_app"},{default:o(()=>[e(f,{modelValue:a.value.is_app,"onUpdate:modelValue":l[17]||(l[17]=t=>a.value.is_app=t)},{default:o(()=>[e(n,{value:1},{default:o(()=>[u("是")]),_:1}),e(n,{value:0},{default:o(()=>[u("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})])):v("",!0),i.value==="钉钉"?(d(),_("div",fe,[e(s,{label:"选择钉钉成员",prop:"template_name"},{default:o(()=>[e(m,{modelValue:a.value.template_message.ding_data.template_name,"onUpdate:modelValue":l[18]||(l[18]=t=>a.value.template_message.ding_data.template_name=t)},null,8,["modelValue"])]),_:1}),e(s,{label:"通知内容",prop:"content"},{default:o(()=>[e(m,{modelValue:a.value.template_message.ding_data.content,"onUpdate:modelValue":l[19]||(l[19]=t=>a.value.template_message.ding_data.content=t),autosize:{minRows:9,maxRows:60},class:"fl1",type:"textarea"},null,8,["modelValue"])]),_:1}),e(s,{label:"是否开启",prop:"is_app"},{default:o(()=>[e(f,{modelValue:a.value.is_ding,"onUpdate:modelValue":l[20]||(l[20]=t=>a.value.is_ding=t)},{default:o(()=>[e(n,{value:1},{default:o(()=>[u("是")]),_:1}),e(n,{value:0},{default:o(()=>[u("否")]),_:1})]),_:1},8,["modelValue"])]),_:1})])):v("",!0),J(e(s,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[e(E,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:B},{default:o(()=>[u("提交")]),_:1},512)]),_:1},512),[[Q,!V.isDialog]])]),_:1},8,["model"])),e(P,{spinning:w.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});const we=Y(ce,[["__scopeId","data-v-2cabd077"]]);export{we as default};
