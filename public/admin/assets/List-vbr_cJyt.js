/* empty css             */import"./index-CeQDmMxd.js";import{P as O}from"./PopFormElm-BZp1_Wme.js";import{d as T,K as E,i as v,G as L,q as $,r as i,c as y,o as d,e as l,f as c,b as o,w as a,g as p,E as m,D as C,j as k,I as h}from"./index-DrbzVNl6.js";import{D as j}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as G}from"./Pagination-wR9huHyl.js";import{u as K,d as M,g as H,b as J}from"./adminRole-DDtgoY2E.js";import{_ as S}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const Q={class:"container"},W={class:"content_wrapper"},X={class:"lyecs-table-list-warp"},Y={class:"list-table-tool lyecs-search-warp"},Z={class:"list-table-tool-row"},ee={class:"list-table-tool-col"},te={class:"table-container"},oe={class:"empty-warp"},ae={key:0,class:"empty-bg"},le={key:0,class:"pagination-con"},se={key:0,class:"selected-action-warp"},ne={class:"selected-action"},ve=T({__name:"List",setup(ie){const V=E(),w=v([]),u=v(!0),_=v(0),f=v([]),n=L({page:1,size:V.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),r=async()=>{u.value=!0;try{const s=await H({...n});w.value=s.records,_.value=s.total}catch(s){h.error(s.message)}finally{u.value=!1}};$(()=>{r()});const x=()=>{r()},A=({prop:s,order:e})=>{n.sortField=s,n.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",r()},D=async s=>{try{const e=await J(s,{ids:f.value});h.success("操作成功"),r()}catch(e){h.error(e.message)}},N=s=>{f.value=s.map(e=>e.roleId)};return(s,e)=>{const b=i("el-button"),z=i("TigInput"),I=i("el-space"),R=i("el-form"),g=i("el-table-column"),q=i("el-divider"),B=i("el-table"),F=i("a-spin"),P=i("el-popconfirm");return d(),y("div",Q,[l("div",W,[l("div",X,[l("div",Y,[o(R,{model:n},{default:a(()=>[l("div",Z,[l("div",ee,[o(I,null,{default:a(()=>[o(p(S),{params:{act:"add"},isDrawer:"",path:"authority/adminRole/Info",title:"添加管理员权限组",width:"800px",onOkCallback:r},{default:a(()=>[o(b,{type:"primary"},{default:a(()=>e[4]||(e[4]=[m("添加管理员权限组")])),_:1})]),_:1}),o(z,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>n.keyword=t),class:"width240",name:"keyword",placeholder:"输入权限组名称"},{append:a(()=>[o(b,{onClick:x},{default:a(()=>e[5]||(e[5]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1},8,["model"])]),l("div",te,[o(F,{spinning:u.value},{default:a(()=>[o(B,{data:w.value,loading:u.value,total:_.value,"row-key":"roleId",onSelectionChange:N,onSortChange:A},{empty:a(()=>[l("div",oe,[u.value?c("",!0):(d(),y("div",ae,"暂无数据"))])]),default:a(()=>[o(g,{type:"selection",width:"32"}),o(g,{label:"权限组名称",width:"200"},{default:a(({row:t})=>[o(p(O),{"org-value":t.roleName,"onUpdate:orgValue":U=>t.roleName=U,max:10,params:{id:t.roleId,field:"roleName"},requestApi:p(K),label:"权限组名称",type:"input"},{default:a(()=>[l("div",null,C(t.roleName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(g,{label:"描述",prop:"roleDesc"}),o(g,{width:120,fixed:"right",label:"操作"},{default:a(({row:t})=>[t.roleId>1?(d(),k(p(S),{key:0,params:{act:"detail",id:t.roleId},isDrawer:"",path:"authority/adminRole/Info",title:"编辑管理员权限组",width:"800px",onOkCallback:r},{default:a(()=>e[6]||(e[6]=[l("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])):c("",!0),t.roleId>2?(d(),k(q,{key:1,direction:"vertical"})):c("",!0),t.roleId>2?(d(),k(p(j),{key:2,params:{id:t.roleId},requestApi:p(M),onAfterDelete:r},{default:a(()=>e[7]||(e[7]=[m("删除 ")])),_:2},1032,["params","requestApi"])):c("",!0)]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),_.value>0?(d(),y("div",le,[o(p(G),{page:n.page,"onUpdate:page":e[1]||(e[1]=t=>n.page=t),size:n.size,"onUpdate:size":e[2]||(e[2]=t=>n.size=t),total:_.value,onCallback:r},null,8,["page","size","total"])])):c("",!0)]),f.value.length>0?(d(),y("div",se,[l("div",ne,[o(I,null,{default:a(()=>[l("span",null,[e[8]||(e[8]=m("已选择：")),l("b",null,C(f.value.length),1),e[9]||(e[9]=m(" 项"))]),o(P,{title:"您确认要批量删除所选数据吗？",onConfirm:e[3]||(e[3]=t=>D("del"))},{reference:a(()=>[o(b,null,{default:a(()=>e[10]||(e[10]=[m("批量删除")])),_:1})]),_:1})]),_:1})])])):c("",!0)])])])}}});export{ve as default};
