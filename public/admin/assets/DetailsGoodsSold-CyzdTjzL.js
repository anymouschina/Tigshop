import{d as N,i as v,G as B,K as I,q as P,r,c as b,o as y,b as e,e as n,w as s,g as d,E as p,f as h,D as c,I as x,_ as T}from"./index-CGYuOau0.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";import{u as K,i as L,p as C}from"./format-DFT-VJzO.js";import{u as X}from"./config-DNllFJyR.js";/* empty css                                                                    */import{P as j}from"./Pagination-yOfjsBuR.js";/* empty css                                                                  *//* empty css                                                                              */import{S as A}from"./SelectTimeInterval-BYQIPzkk.js";/* empty css             */import{f as w}from"./time-ClyPenjC.js";import{a as H,e as J}from"./statisticsSale-Cl-gZY0A.js";import{r as O}from"./export-Bb89fUlC.js";import"./config-DU8_t5BN.js";const Q={class:"DetailsGoodsSold"},R={class:"filtrate-menu"},W={class:"table-container"},Z={class:"flex"},$={key:0,class:"span-pic"},tt=["href"],et=["src"],at={class:"span-product-con"},ot={class:"span-product-name"},st={class:"empty-warp"},lt={key:0,class:"empty-bg"},nt={key:0,class:"pagination-con"},rt=N({__name:"DetailsGoodsSold",setup(it){const Y=X(),m=v(!1),D=v(),_=v(0),o=B({page:1,size:Y.pageSize,keyword:"",start_time:w(I(30,"sub"),"YYYY-MM-DD"),end_time:w(new Date,"YYYY-MM-DD")}),u=async()=>{m.value=!0;try{const l=await H(o);l.errcode===0&&(D.value=l.filter_result,_.value=l.total)}catch(l){x.error(l.message),console.error(l)}finally{m.value=!1}},z=()=>{u()},f=v(!1),E=async()=>{f.value=!0;try{const l=await J({...o,is_export:"1"});f.value=!1,O(l,"销售明细导出")}catch(l){x.error(l.message)}finally{f.value=!1}};P(()=>{u()});const V=({prop:l,order:a})=>{o.sort_field=l,o.sort_order=a=="ascending"?"asc":a=="descending"?"desc":"",u()},q=()=>{u()};return(l,a)=>{const g=r("el-form-item"),M=r("el-input"),S=r("el-button"),U=r("el-form"),i=r("el-table-column"),F=r("el-table"),G=r("a-spin");return y(),b("div",Q,[e(U,{model:o},{default:s(()=>[n("div",R,[e(g,{class:"mr-10"},{default:s(()=>[e(d(A),{type:"date","start-date":o.start_time,"onUpdate:startDate":a[0]||(a[0]=t=>o.start_time=t),"end-date":o.end_time,"onUpdate:endDate":a[1]||(a[1]=t=>o.end_time=t)},null,8,["start-date","end-date"])]),_:1}),e(g,{class:"mr-10"},{default:s(()=>[e(M,{modelValue:o.keyword,"onUpdate:modelValue":a[2]||(a[2]=t=>o.keyword=t),placeholder:"输入商品名称或商品编号"},null,8,["modelValue"])]),_:1}),e(g,{class:"mr-10"},{default:s(()=>[e(S,{plain:"",onClick:z},{default:s(()=>a[5]||(a[5]=[p("搜索")])),_:1})]),_:1}),e(g,{class:"mr-10"},{default:s(()=>[e(S,{plain:"",onClick:E,loading:f.value},{default:s(()=>a[6]||(a[6]=[p("导出EXCEL")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"]),n("div",W,[e(G,{spinning:m.value},{default:s(()=>[e(F,{data:D.value,total:_.value,onSortChange:V},{empty:s(()=>[n("div",st,[m.value?h("",!0):(y(),b("div",lt,"暂无数据"))])]),default:s(()=>[e(i,{label:"商品名称",prop:"product_id","min-width":320},{default:s(({row:t})=>[n("div",Z,[t.pic_thumb?(y(),b("div",$,[n("a",{href:d(K)({path:"product",id:t.product_id}),target:"_blank"},[n("img",{src:d(L)(t.pic_thumb),height:"50",width:"50"},null,8,et)],8,tt)])):h("",!0),n("div",at,[n("div",ot,c(t.product_name),1)])])]),_:1}),e(i,{prop:"product_sn",label:"商品编号"}),e(i,{porp:"quantity",label:"购买数量"},{default:s(({row:t})=>[p(c(t.quantity),1)]),_:1}),e(i,{label:"单价"},{default:s(({row:t})=>[p(c(d(C)(t.price)),1)]),_:1}),e(i,{label:"小计"},{default:s(({row:t})=>[p(c(d(C)(t.price*t.quantity)),1)]),_:1}),e(i,{prop:"add_time",width:"200",sortable:"custom",label:"下单时间"},{default:s(({row:t})=>{var k;return[p(c((k=t.orders)==null?void 0:k.add_time),1)]}),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),_.value>0?(y(),b("div",nt,[e(d(j),{page:o.page,"onUpdate:page":a[3]||(a[3]=t=>o.page=t),size:o.size,"onUpdate:size":a[4]||(a[4]=t=>o.size=t),total:_.value,onCallback:q},null,8,["page","size","total"])])):h("",!0)])])}}}),xt=T(rt,[["__scopeId","data-v-27115cc5"]]);export{xt as default};
