import{d as F,i as f,C as L,s as $,q as j,r as m,c as b,o as d,e as k,j as U,f as T,b as l,w as t,a3 as E,g,F as B,E as z,a4 as M,I as V}from"./index-DrbzVNl6.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import"./index-CeQDmMxd.js";/* empty css                                                                    *//* empty css                                                                  */import{_ as O}from"./SelectRankList.vue_vue_type_script_setup_true_lang-DzjPE1aZ.js";/* empty css                                                                              */import{c as A,f as G}from"./user-Zgy4YOmN.js";/* empty css             */import"./time-Bh5UhrfW.js";import"./userRank-Cwfy5SLP.js";const H={class:"container"},J={class:"content_wrapper"},K={class:"lyecs-form-table"},se=F({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(I,{expose:S,emit:q}){const p=q,n=I,i=f(!0),y=L().currentRoute.value.query,c=f(n.isDialog?n.act:String(y.act)),w=f(n.isDialog?n.id:Number(y.id)),v=c.value==="add"?"create":"update",_=$(),a=f({balance:0,frozenBalance:0,avatar:"",password:"",pwdConfirm:""}),x=async()=>{var r;try{i.value=!0;const e=await A(c.value,{id:w.value});Object.assign(a.value,e),a.value.mobile=(r=a.value.mobile)==null?void 0:r.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")}catch(e){V.error(e.message),p("close")}finally{i.value=!1}};j(()=>{c.value==="detail"?x():i.value=!1});const C=async()=>{await _.value.validate();try{p("update:confirmLoading",!0);const r=await G(v,{id:w.value,...a.value});p("submitCallback",r),V.success("操作成功")}catch(r){V.error(r.message)}finally{p("update:confirmLoading",!1)}};return S({onFormSubmit:()=>{C()}}),(r,e)=>{const u=m("TigInput"),s=m("el-form-item"),N=m("el-button"),D=m("el-form"),R=m("a-spin");return d(),b("div",H,[k("div",J,[k("div",K,[i.value?T("",!0):(d(),U(D,{key:0,ref_key:"formRef",ref:_,model:a.value,"label-width":"auto"},{default:t(()=>[g(v)==="create"?(d(),U(s,{key:0,rules:[{required:!0,message:"会员名称不能为空!"}],label:"会员名称",prop:"username"},{default:t(()=>[l(u,{classType:"tig-form-input",modelValue:a.value.username,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.username=o)},null,8,["modelValue"])]),_:1})):T("",!0),l(s,{label:"手机号码",prop:"mobile"},{default:t(()=>[l(u,{classType:"tig-form-input",type:"integer",modelValue:a.value.mobile,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.mobile=o)},null,8,["modelValue"])]),_:1}),l(s,{label:"邮箱地址",prop:"email"},{default:t(()=>[l(u,{classType:"tig-form-input",modelValue:a.value.email,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.email=o)},null,8,["modelValue"])]),_:1}),g(v)==="create"?(d(),b(B,{key:1},[l(s,{rules:[{required:!0,message:"新密码不能为空!"}],label:"新密码",prop:"password"},{default:t(()=>[l(u,{classType:"tig-form-input",modelValue:a.value.password,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.password=o)},null,8,["modelValue"])]),_:1}),l(s,{rules:[{required:!0,message:"确认密码不能为空!"}],label:"确认密码",prop:"pwdConfirm"},{default:t(()=>[l(u,{classType:"tig-form-input",modelValue:a.value.pwdConfirm,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.pwdConfirm=o)},null,8,["modelValue"])]),_:1})],64)):(d(),b(B,{key:2},[l(s,{label:"新密码",prop:"password"},{default:t(()=>[l(u,{classType:"tig-form-input",modelValue:a.value.password,"onUpdate:modelValue":e[5]||(e[5]=o=>a.value.password=o)},null,8,["modelValue"])]),_:1}),l(s,{label:"确认密码",prop:"pwdConfirm"},{default:t(()=>[l(u,{classType:"tig-form-input",modelValue:a.value.pwdConfirm,"onUpdate:modelValue":e[6]||(e[6]=o=>a.value.pwdConfirm=o)},null,8,["modelValue"])]),_:1})],64)),l(s,{label:"会员等级",prop:"rankId"},{default:t(()=>[l(g(O),{modelValue:a.value.rankId,"onUpdate:modelValue":e[7]||(e[7]=o=>a.value.rankId=o)},null,8,["modelValue"])]),_:1}),E(l(s,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[l(N,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:C},{default:t(()=>e[8]||(e[8]=[z("提交")])),_:1},512)]),_:1},512),[[M,!n.isDialog]])]),_:1},8,["model"])),l(R,{spinning:i.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{se as default};
