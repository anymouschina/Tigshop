import{d as S,j as p,I as U,x as q,r as d,o as u,c as f,e as t,b as e,w as o,f as l,h as C,K as E,H as h,L as G,G as I}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{_ as N}from"./Switch.vue_vue_type_script_setup_true_lang-95245cd7.js";import{_ as $}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as B}from"./Pagination-8eb7b6b1.js";import{u as x}from"./config-9548fa9b.js";import{g as K,u as O,d as P}from"./eCard-04a22698.js";import{_ as v}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const F={class:"container"},j={class:"content_wrapper"},H={class:"lyecs-table-list-warp"},M={class:"list-table-tool lyecs-search-warp"},T={class:"advanced-search-warp list-table-tool-row"},J={class:"simple-form-warp"},Q={class:"simple-form-field"},R={class:"form-group"},W={class:"control-container"},X={class:"simple-form-field"},Y={class:"form-group"},Z={class:"control-container"},ee=t("span",{class:"iconfont icon-chakan1"},null,-1),te={class:"table-container"},ae=t("a",{class:"btn-link"},"查看卡列表",-1),oe=t("a",{class:"btn-link"},"编辑",-1),se={class:"empty-warp"},ie={key:0,class:"empty-bg"},le={key:0,class:"pagination-con"},be=S({__name:"List",setup(re){const z=x();p(x().domain);const g=p(),_=p(!0),m=p(0);p([]),p(!1);const s=U({page:1,size:z.get("page_size"),sort_field:"",sort_order:"",keyword:""}),r=async()=>{_.value=!0;try{const c=await K({...s});g.value=c.filter_result,m.value=c.total}catch(c){E.error(c.message)}finally{_.value=!1}};q(()=>{r()});const b=()=>{r()};return(c,i)=>{const k=d("el-button"),V=d("el-input"),D=d("el-form"),n=d("el-table-column"),w=d("el-divider"),A=d("el-table"),L=d("a-spin");return u(),f("div",F,[t("div",j,[t("div",H,[t("div",M,[e(D,{model:s},{default:o(()=>[t("div",T,[t("div",J,[t("div",Q,[t("div",R,[t("div",W,[e(l(v),{params:{act:"add"},isDrawer:"",delayed:2e4,path:"promotion/eCard/Info",title:"添加电子卡券组",width:"600px",onOkCallback:r},{default:o(()=>[e(k,{type:"primary"},{default:o(()=>[h("添加电子卡券组")]),_:1})]),_:1})])])]),t("div",X,[t("div",Y,[t("div",Z,[e(V,{modelValue:s.keyword,"onUpdate:modelValue":i[0]||(i[0]=a=>s.keyword=a),name:"wechat_live_title",placeholder:"输入电子卡券组名称",onKeyup:G(b,["enter"])},{append:o(()=>[e(k,{onClick:b},{default:o(()=>[ee]),_:1})]),_:1},8,["modelValue"])])])])])])]),_:1},8,["model"])]),t("div",te,[e(L,{spinning:_.value},{default:o(()=>[e(A,{data:g.value,"row-key":"group_id",total:m.value},{empty:o(()=>[t("div",se,[_.value?C("",!0):(u(),f("div",ie,"暂无数据"))])]),default:o(()=>[e(n,{label:"分组ID",prop:"group_id",width:80}),e(n,{label:"分组名称",prop:"group_name",width:200}),e(n,{label:"是否使用",prop:"is_use",width:80},{default:o(({row:a})=>[e(l(N),{checked:a.is_use,"onUpdate:checked":y=>a.is_use=y,params:{id:a.group_id,field:"is_use"},requestApi:l(O)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),e(n,{label:"备注",prop:"remark"},{default:o(({row:a})=>[h(I(a.remark||"暂无备注"),1)]),_:1}),e(n,{label:"创建时间",prop:"add_time",width:180}),e(n,{label:"修改时间",prop:"up_time",width:180}),e(n,{label:"操作",fixed:"right",width:200},{default:o(({row:a})=>[e(l(v),{isDrawer:"",onOkCallback:r,title:"查看卡列表",width:"800px",path:"promotion/eCard/eCardList/List",params:{group_id:a.group_id}},{default:o(()=>[ae]),_:2},1032,["params"]),e(w,{direction:"vertical"}),e(l(v),{isDrawer:"",onOkCallback:r,title:"编辑电子卡券组",width:"600px",path:"promotion/eCard/Info",params:{act:"detail",id:a.group_id}},{default:o(()=>[oe]),_:2},1032,["params"]),e(w,{direction:"vertical"}),e(l($),{params:{id:a.group_id},requestApi:l(P),onAfterDelete:i[1]||(i[1]=y=>r())},{default:o(()=>[h("删除 ")]),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),m.value>0?(u(),f("div",le,[e(l(B),{page:s.page,"onUpdate:page":i[2]||(i[2]=a=>s.page=a),size:s.size,"onUpdate:size":i[3]||(i[3]=a=>s.size=a),total:m.value,onCallback:r},null,8,["page","size","total"])])):C("",!0)])])])])}}});export{be as default};
