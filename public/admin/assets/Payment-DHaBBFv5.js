import{d as G,dc as g,s as H,i as U,q as J,I as V,c as Y,e as s,b as l,w as a,r as m,o as i,j as r,a0 as w,E as p,a1 as k,f as P,g as f,D as B,F,a as R,_ as Q}from"./index-CGYuOau0.js";/* empty css             */import{_ as q}from"./Editor.vue_vue_type_script_setup_true_lang-BBcTD5Hp.js";import{g as X,c as Z,d as c}from"./config-DU8_t5BN.js";import{U as D}from"./index-BplITdIN.js";import"./index.esm-WCz80Rui.js";import"./index-B-GURfkM.js";import"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./index-smJsLN1o.js";const h={class:"container"},ee={class:"content_wrapper"},le={class:"content"},ae={class:"content"},te={style:{width:"100%"}},ue={style:{width:"100%"}},se={style:{width:"100%"}},de={style:{width:"100%"}},oe={class:"content"},pe={class:"content"},ne={class:"content"},ie={class:"content"},ye={class:"content"},re={class:"selected-action-warp"},_e={class:"selected-action",style:{"padding-left":"80px"}},me=G({__name:"Payment",setup(fe){console.log("请求参数：",g);const E=H(),v=U("base"),S=U(1),C=U(!1),t=U({use_wechat:1,use_alipay:1,use_surplus:1,use_offline:1,use_yabanpay:0,use_yabanpay_wechat:0,use_yabanpay_alipay:0,wechat_pay_key:"",wechat_mchid_type:1,yabanpay_currency:"",use_paypal:0,paypal_client_id:"",paypal_secret:"",paypal_currency:"",use_yunpay:0,wechat_pay_check_type:1,wechat_pay_public_key:0,wechat_pay_public_key_id:""}),K=o=>{v.value=o},O=U([]);J(async()=>{L()});const W=U(!0),T=async()=>{try{const o=await Z();V.success(o.message),L()}catch(o){V.error(o.message)}finally{W.value=!1}},L=async()=>{try{const o=await X({code:"payment"});console.log(o),Object.assign(t.value,o.item),O.value=o.countrys}catch(o){V.error(o.message)}finally{W.value=!1}},$=async()=>{C.value=!0;try{const o=await c({code:"payment",...t.value});V.success(o.message)}catch(o){V.error(o.message)}finally{C.value=!1}},A=o=>{if(o.file.status=="uploading",o.file.status,o.file.status==="done")if(o.file.response.data.errcode!==0)o.file.status="error",V.error(o.file.response.data.message);else{for(let e in o.fileList)o.file.uid==o.fileList[e].uid&&(o.fileList[e]=Object.assign(o.fileList[e],o.fileList[e].response.data));V.success("文件上传成功！"),L()}else o.file.status==="error"&&V.error(`${o.file.name} 文件上传失败！`)};return(o,e)=>{const b=m("el-tab-pane"),N=m("el-tabs"),n=m("el-radio"),_=m("el-radio-group"),d=m("el-form-item"),y=m("el-input"),x=m("el-button"),I=m("el-option"),j=m("el-select"),z=m("el-form"),M=m("a-spin");return i(),Y("div",h,[s("div",ee,[l(N,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=u=>v.value=u),class:"lyecs-tabs","tab-position":"top",onTabChange:K},{default:a(()=>[(i(),r(b,{key:1,label:"基础设置",name:"base"})),(i(),r(b,{key:2,label:"微信支付",name:"wechat"})),(i(),r(b,{key:3,label:"支付宝",name:"alipay"})),(i(),r(b,{key:4,label:"YaBandPay",name:"yabanpay"})),(i(),r(b,{key:5,label:"线下支付",name:"offline"})),(i(),r(b,{key:6,label:"PayPal",name:"PayPal"})),(i(),r(b,{key:7,label:"云支付",name:"cloudPay"}))]),_:1},8,["modelValue"]),l(M,{spinning:W.value},{default:a(()=>[l(z,{ref_key:"formRef",ref:E,model:t.value,"label-width":"160px"},{default:a(()=>[w(s("div",le,[l(d,{label:"余额支付",prop:"use_surplus"},{default:a(()=>[l(_,{modelValue:t.value.use_surplus,"onUpdate:modelValue":e[1]||(e[1]=u=>t.value.use_surplus=u),class:"itemWidth"},{default:a(()=>[l(n,{value:1},{default:a(()=>e[33]||(e[33]=[p("支持")])),_:1}),l(n,{value:0},{default:a(()=>e[34]||(e[34]=[p("不支持")])),_:1})]),_:1},8,["modelValue"]),e[35]||(e[35]=s("div",{class:"extra"},"订单结算页面是否支持余额支付功能，不支持则不显示",-1))]),_:1}),l(d,{label:"积分抵扣",prop:"use_points"},{default:a(()=>[l(_,{modelValue:t.value.use_points,"onUpdate:modelValue":e[2]||(e[2]=u=>t.value.use_points=u),class:"itemWidth"},{default:a(()=>[l(n,{value:1},{default:a(()=>e[36]||(e[36]=[p("支持")])),_:1}),l(n,{value:0},{default:a(()=>e[37]||(e[37]=[p("不支持")])),_:1})]),_:1},8,["modelValue"]),e[38]||(e[38]=s("div",{class:"extra"},"订单结算页面是否支持积分抵扣功能，不支持则不显示",-1))]),_:1}),l(d,{label:"优惠券",prop:"use_coupon"},{default:a(()=>[l(_,{modelValue:t.value.use_coupon,"onUpdate:modelValue":e[3]||(e[3]=u=>t.value.use_coupon=u),class:"itemWidth"},{default:a(()=>[l(n,{value:1},{default:a(()=>e[39]||(e[39]=[p("支持")])),_:1}),l(n,{value:0},{default:a(()=>e[40]||(e[40]=[p("不支持")])),_:1})]),_:1},8,["modelValue"]),e[41]||(e[41]=s("div",{class:"extra"},"订单结算页面是否支持优惠券功能，不支持则不显示",-1))]),_:1})],512),[[k,v.value==="base"]]),w(s("div",ae,[l(d,{label:"是否开启",prop:"use_wechat"},{default:a(()=>[l(_,{modelValue:t.value.use_wechat,"onUpdate:modelValue":e[4]||(e[4]=u=>t.value.use_wechat=u),class:"itemWidth"},{default:a(()=>[l(n,{value:1},{default:a(()=>e[42]||(e[42]=[p("开启")])),_:1}),l(n,{value:0},{default:a(()=>e[43]||(e[43]=[p("关闭")])),_:1})]),_:1},8,["modelValue"]),e[44]||(e[44]=s("div",{class:"extra"},"是否开启微信支付，如关闭则不显示微信支付选项",-1))]),_:1}),w(s("div",null,[l(d,{label:"微信商户类型",prop:"wechat_mchid_type"},{default:a(()=>[l(_,{modelValue:t.value.wechat_mchid_type,"onUpdate:modelValue":e[5]||(e[5]=u=>t.value.wechat_mchid_type=u),class:"itemWidth"},{default:a(()=>[l(n,{value:1},{default:a(()=>e[45]||(e[45]=[p("普通商户模式")])),_:1}),l(n,{value:2},{default:a(()=>e[46]||(e[46]=[p("服务商模式")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(d,{label:"微信商户号",prop:"wechat_pay_mchid"},{default:a(()=>[l(y,{modelValue:t.value.wechat_pay_mchid,"onUpdate:modelValue":e[6]||(e[6]=u=>t.value.wechat_pay_mchid=u)},null,8,["modelValue"])]),_:1}),t.value.wechat_mchid_type===2?(i(),r(d,{key:0,label:"微信子商户号",prop:"wechat_pay_sub_mchid"},{default:a(()=>[l(y,{modelValue:t.value.wechat_pay_sub_mchid,"onUpdate:modelValue":e[7]||(e[7]=u=>t.value.wechat_pay_sub_mchid=u)},null,8,["modelValue"]),e[47]||(e[47]=s("div",{class:"extra"},"请填写由服务商提供的子商户号",-1))]),_:1})):P("",!0),l(d,{label:"商户API密钥",prop:"wechat_pay_key"},{default:a(()=>[l(y,{modelValue:t.value.wechat_pay_key,"onUpdate:modelValue":e[8]||(e[8]=u=>t.value.wechat_pay_key=u)},null,8,["modelValue"]),e[48]||(e[48]=s("div",{class:"extra"},"请使用APIv3密钥",-1))]),_:1}),t.value.wechat_pay_check_type===1?(i(),r(d,{key:1,label:"商户证书序列号",prop:"wechat_pay_serial_no"},{default:a(()=>[l(y,{modelValue:t.value.wechat_pay_serial_no,"onUpdate:modelValue":e[9]||(e[9]=u=>t.value.wechat_pay_serial_no=u)},null,8,["modelValue"]),e[49]||(e[49]=s("div",{class:"extra"},"请使用API证书序列号",-1))]),_:1})):P("",!0),l(d,{label:"商户API证书",prop:"wechat_pay_certificate"},{default:a(()=>[s("div",te,[l(f(D),{name:"file",action:f(g).prefix+"/setting/config/upload_file?type=1",headers:f(g).headers,onChange:A,showUploadList:!1,multiple:!1},{default:a(()=>[l(x,null,{default:a(()=>[p(B(t.value.wechat_pay_certificate?"重新上传":"点击上传"),1)]),_:1}),e[50]||(e[50]=s("span",{class:"ml10"},"apiclient_cert.pem",-1))]),_:1},8,["action","headers"])]),e[51]||(e[51]=s("div",{class:"extra"},"调用微信商户接口时需要用到的API证书，文件名称一般为apiclient_cert.pem，具体操作请参考教程",-1))]),_:1}),l(d,{label:"商户API证书密钥",prop:"wechat_pay_private_key"},{default:a(()=>[s("div",ue,[l(f(D),{name:"file",action:f(g).prefix+"/setting/config/upload_file?type=2",headers:f(g).headers,onChange:A,showUploadList:!1,multiple:!1},{default:a(()=>[l(x,null,{default:a(()=>[p(B(t.value.wechat_pay_private_key?"重新上传":"点击上传"),1)]),_:1}),e[52]||(e[52]=s("span",{class:"ml10"},"apiclient_key.pem",-1))]),_:1},8,["action","headers"])]),e[53]||(e[53]=s("div",{class:"extra"},"调用微信商户接口时需要用到的API证书密钥，文件名称一般为apiclient_key.pem，具体操作请参考教程",-1))]),_:1}),l(d,{label:"验证微信支付方式",prop:"wechat_mchid_type"},{default:a(()=>[l(_,{modelValue:t.value.wechat_pay_check_type,"onUpdate:modelValue":e[10]||(e[10]=u=>t.value.wechat_pay_check_type=u),class:"itemWidth"},{default:a(()=>[l(n,{value:1},{default:a(()=>e[54]||(e[54]=[p("平台证书")])),_:1}),l(n,{value:2},{default:a(()=>e[55]||(e[55]=[p("微信支付公钥")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t.value.wechat_pay_check_type===1?(i(),r(d,{key:2,label:"平台证书",prop:""},{default:a(()=>[s("div",se,[l(x,{loading:C.value,class:"form-submit-btn",type:"success",onClick:T},{default:a(()=>[p(B(t.value.wechat_pay_platform_certificate?"更新证书":"生成证书"),1)]),_:1},8,["loading"])]),e[56]||(e[56]=s("div",{class:"extra"},"调用微信商户接口时需要用到的平台证书,上传API证书后需要更新平台证书，具体操作请参考教程",-1))]),_:1})):P("",!0),t.value.wechat_pay_check_type===2?(i(),r(d,{key:3,label:"微信支付公钥ID",prop:"wechat_pay_public_key_id"},{default:a(()=>[l(y,{modelValue:t.value.wechat_pay_public_key_id,"onUpdate:modelValue":e[11]||(e[11]=u=>t.value.wechat_pay_public_key_id=u)},null,8,["modelValue"]),e[57]||(e[57]=s("div",{class:"extra"},"请使用微信支付公钥ID",-1))]),_:1})):P("",!0),t.value.wechat_pay_check_type===2?(i(),r(d,{key:4,label:"微信支付公钥文件",prop:"wechat_pay_public_key"},{default:a(()=>[s("div",de,[l(f(D),{name:"file",action:f(g).prefix+"/setting/config/upload_file?type=3",headers:f(g).headers,onChange:A,showUploadList:!1,multiple:!1},{default:a(()=>[l(x,null,{default:a(()=>[p(B(t.value.wechat_pay_public_key?"重新上传":"点击上传"),1)]),_:1}),e[58]||(e[58]=s("span",{class:"ml10"},"微信支付公钥文件（如：pub_key.pem）",-1))]),_:1},8,["action","headers"])]),e[59]||(e[59]=s("div",{class:"extra"},"调用微信商户接口时需要用到的公钥证书，文件名称一般为public.pem，具体操作请参考教程",-1))]),_:1})):P("",!0)],512),[[k,t.value.use_wechat===1]])],512),[[k,v.value==="wechat"]]),w(s("div",oe,[l(d,{label:"是否开启",prop:"use_alipay"},{default:a(()=>[l(_,{modelValue:t.value.use_alipay,"onUpdate:modelValue":e[12]||(e[12]=u=>t.value.use_alipay=u),class:"itemWidth"},{default:a(()=>[l(n,{value:1},{default:a(()=>e[60]||(e[60]=[p("开启")])),_:1}),l(n,{value:0},{default:a(()=>e[61]||(e[61]=[p("关闭")])),_:1})]),_:1},8,["modelValue"]),e[62]||(e[62]=s("div",{class:"extra"},"是否开启支付宝支付，如关闭则不显示支付宝支付选项",-1))]),_:1}),l(d,{label:"支付宝APPID",prop:"alipay_appid"},{default:a(()=>[l(y,{modelValue:t.value.alipay_appid,"onUpdate:modelValue":e[13]||(e[13]=u=>t.value.alipay_appid=u)},null,8,["modelValue"])]),_:1}),l(d,{label:"应用私钥",prop:"alipay_rsa_private_key"},{default:a(()=>[l(y,{type:"textarea",modelValue:t.value.alipay_rsa_private_key,"onUpdate:modelValue":e[14]||(e[14]=u=>t.value.alipay_rsa_private_key=u),rows:10},null,8,["modelValue"])]),_:1}),l(d,{label:"支付宝公钥",prop:"alipay_rsa_public_key"},{default:a(()=>[l(y,{type:"textarea",modelValue:t.value.alipay_rsa_public_key,"onUpdate:modelValue":e[15]||(e[15]=u=>t.value.alipay_rsa_public_key=u),rows:5},null,8,["modelValue"])]),_:1})],512),[[k,v.value==="alipay"]]),w(s("div",pe,[l(d,{label:"是否开启",prop:"use_yabanpay"},{default:a(()=>[l(_,{modelValue:t.value.use_yabanpay,"onUpdate:modelValue":e[16]||(e[16]=u=>t.value.use_yabanpay=u),class:"itemWidth"},{default:a(()=>[l(n,{value:1},{default:a(()=>e[63]||(e[63]=[p("开启")])),_:1}),l(n,{value:0},{default:a(()=>e[64]||(e[64]=[p("关闭")])),_:1})]),_:1},8,["modelValue"]),e[65]||(e[65]=s("div",{class:"extra"},"是否开启YaBandPay支付，如关闭则不显示YaBandPay支付选项",-1))]),_:1}),l(d,{label:"微信开启",prop:"use_yabanpay_wechat"},{default:a(()=>[l(_,{modelValue:t.value.use_yabanpay_wechat,"onUpdate:modelValue":e[17]||(e[17]=u=>t.value.use_yabanpay_wechat=u),class:"itemWidth"},{default:a(()=>[l(n,{value:1},{default:a(()=>e[66]||(e[66]=[p("开启")])),_:1}),l(n,{value:0},{default:a(()=>e[67]||(e[67]=[p("关闭")])),_:1})]),_:1},8,["modelValue"]),e[68]||(e[68]=s("div",{class:"extra"},"是否开启YaBandPay微信支付，如关闭则不显示YaBandPay微信支付选项",-1))]),_:1}),l(d,{label:"支付宝开启",prop:"use_yabanpay_alipay"},{default:a(()=>[l(_,{modelValue:t.value.use_yabanpay_alipay,"onUpdate:modelValue":e[18]||(e[18]=u=>t.value.use_yabanpay_alipay=u),class:"itemWidth"},{default:a(()=>[l(n,{value:1},{default:a(()=>e[69]||(e[69]=[p("开启")])),_:1}),l(n,{value:0},{default:a(()=>e[70]||(e[70]=[p("关闭")])),_:1})]),_:1},8,["modelValue"]),e[71]||(e[71]=s("div",{class:"extra"},"是否开启YaBandPay支付宝支付，如关闭则不显示YaBandPay支付宝支付选项",-1))]),_:1}),l(d,{label:"货币",prop:"yabanpay_currency"},{default:a(()=>[l(j,{modelValue:t.value.yabanpay_currency,"onUpdate:modelValue":e[19]||(e[19]=u=>t.value.yabanpay_currency=u),style:{width:"100%"}},{default:a(()=>[l(I,{value:"0",label:"不选择"}),(i(!0),Y(F,null,R(t.value.yabanpay_currency_list,u=>(i(),r(I,{key:u.id,value:u.value,label:u.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),e[72]||(e[72]=s("div",{class:"extra"}," 如果选择了默认国家，则会员在选择地址时默认会显示该国家下的省份或地区，不再显示国家选择（修改设置对已经添加的会员地址不生效） ",-1))]),_:1}),l(d,{label:"YaBandPay UID",prop:"yabandpay_uid"},{default:a(()=>[l(y,{modelValue:t.value.yabandpay_uid,"onUpdate:modelValue":e[20]||(e[20]=u=>t.value.yabandpay_uid=u)},null,8,["modelValue"])]),_:1}),l(d,{label:"YaBandPay Secret Key",prop:"yabandpay_secret_key"},{default:a(()=>[l(y,{modelValue:t.value.yabandpay_secret_key,"onUpdate:modelValue":e[21]||(e[21]=u=>t.value.yabandpay_secret_key=u)},null,8,["modelValue"])]),_:1})],512),[[k,v.value==="yabanpay"]]),w(s("div",ne,[l(d,{label:"是否开启",prop:"use_offline"},{default:a(()=>[l(_,{modelValue:t.value.use_offline,"onUpdate:modelValue":e[22]||(e[22]=u=>t.value.use_offline=u),class:"itemWidth"},{default:a(()=>[l(n,{value:1},{default:a(()=>e[73]||(e[73]=[p("开启")])),_:1}),l(n,{value:0},{default:a(()=>e[74]||(e[74]=[p("关闭")])),_:1})]),_:1},8,["modelValue"]),e[75]||(e[75]=s("div",{class:"extra"},"是否开启线下支付，如关闭则不显示线下支付选项",-1))]),_:1}),l(d,{label:"汇款说明"},{default:a(()=>[l(N,{type:"border-card",modelValue:S.value,"onUpdate:modelValue":e[25]||(e[25]=u=>S.value=u)},{default:a(()=>[l(b,{label:"银行汇款",name:1},{default:a(()=>[l(f(q),{html:t.value.offline_pay_bank,"onUpdate:html":e[23]||(e[23]=u=>t.value.offline_pay_bank=u),border:!1},null,8,["html"])]),_:1}),l(b,{label:"企业汇款",name:2},{default:a(()=>[l(f(q),{html:t.value.offline_pay_company,"onUpdate:html":e[24]||(e[24]=u=>t.value.offline_pay_company=u),border:!1},null,8,["html"])]),_:1})]),_:1},8,["modelValue"])]),_:1})],512),[[k,v.value==="offline"]]),w(s("div",ie,[l(d,{label:"是否开启",prop:"use_paypal"},{default:a(()=>[l(_,{modelValue:t.value.use_paypal,"onUpdate:modelValue":e[26]||(e[26]=u=>t.value.use_paypal=u),class:"itemWidth"},{default:a(()=>[l(n,{value:1},{default:a(()=>e[76]||(e[76]=[p("开启")])),_:1}),l(n,{value:0},{default:a(()=>e[77]||(e[77]=[p("关闭")])),_:1})]),_:1},8,["modelValue"]),e[78]||(e[78]=s("div",{class:"extra"},"是否开启PayPal支付，如关闭则不显示PayPal支付选项",-1))]),_:1}),l(d,{label:"货币",prop:"paypal_currency"},{default:a(()=>[l(j,{modelValue:t.value.paypal_currency,"onUpdate:modelValue":e[27]||(e[27]=u=>t.value.paypal_currency=u),style:{width:"100%"}},{default:a(()=>[l(I,{value:"0",label:"不选择"}),(i(!0),Y(F,null,R(t.value.paypal_currency_list,u=>(i(),r(I,{key:u.id,value:u.value,label:u.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),e[79]||(e[79]=s("div",{class:"extra"}," 如果选择了默认国家，则会员在选择地址时默认会显示该国家下的省份或地区，不再显示国家选择（修改设置对已经添加的会员地址不生效） ",-1))]),_:1}),l(d,{label:"Client ID",prop:"paypal_client_id"},{default:a(()=>[l(y,{modelValue:t.value.paypal_client_id,"onUpdate:modelValue":e[28]||(e[28]=u=>t.value.paypal_client_id=u)},null,8,["modelValue"])]),_:1}),l(d,{label:"Secret",prop:"paypal_secret"},{default:a(()=>[l(y,{modelValue:t.value.paypal_secret,"onUpdate:modelValue":e[29]||(e[29]=u=>t.value.paypal_secret=u)},null,8,["modelValue"])]),_:1})],512),[[k,v.value==="PayPal"]]),w(s("div",ye,[l(d,{label:"是否开启",prop:"use_yunpay"},{default:a(()=>[l(_,{modelValue:t.value.use_yunpay,"onUpdate:modelValue":e[30]||(e[30]=u=>t.value.use_yunpay=u),class:"itemWidth"},{default:a(()=>[l(n,{value:1},{default:a(()=>e[80]||(e[80]=[p("开启")])),_:1}),l(n,{value:0},{default:a(()=>e[81]||(e[81]=[p("关闭")])),_:1})]),_:1},8,["modelValue"]),e[82]||(e[82]=s("div",{class:"extra"},"是否开启云支付，如关闭则不显示云支付选项",-1))]),_:1}),l(d,{label:"商户号",prop:"yunpay_uid"},{default:a(()=>[l(y,{modelValue:t.value.yunpay_uid,"onUpdate:modelValue":e[31]||(e[31]=u=>t.value.yunpay_uid=u)},null,8,["modelValue"])]),_:1}),l(d,{label:"商户秘钥",prop:"yunpay_secret_key"},{default:a(()=>[l(y,{modelValue:t.value.yunpay_secret_key,"onUpdate:modelValue":e[32]||(e[32]=u=>t.value.yunpay_secret_key=u)},null,8,["modelValue"])]),_:1})],512),[[k,v.value==="cloudPay"]])]),_:1},8,["model"]),e[84]||(e[84]=s("div",{style:{height:"20px"}},null,-1)),s("div",re,[s("div",_e,[l(x,{loading:C.value,class:"form-submit-btn",size:"large",type:"primary",onClick:$},{default:a(()=>e[83]||(e[83]=[p("提 交")])),_:1},8,["loading"])])])]),_:1},8,["spinning"])])])}}}),Be=Q(me,[["__scopeId","data-v-d72b6b63"]]);export{Be as default};
