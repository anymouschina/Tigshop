import{d as N,j as r,E as D,s as R,x as q,K as m,r as i,o as y,c as I,e as S,k as L,w as s,b as a,$ as j,a0 as E,H as F,h as U}from"./index-7c2d2aef.js";import{a as H,u as K}from"./signInSetting-b5197945.js";const M={class:"container"},O={class:"content_wrapper"},T={class:"lyecs-form-table"},G=N({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:V,emit:h}){const n=h,o=w,d=r(!0),p=D().currentRoute.value.query,f=r(o.isDialog?o.act:String(p.act)),_=r(o.isDialog?o.id:Number(p.id)),k=f.value==="add"?"create":"update",g=R(),t=r({});q(()=>{C()});const C=async()=>{try{const e=await H(f.value,{id:_.value});Object.assign(t.value,e.item)}catch(e){m.error(e.message),n("close")}finally{d.value=!1}},v=async()=>{await g.value.validate();try{n("update:confirmLoading",!0);const e=await K(k,{id:_.value,...t.value});n("submitCallback",e),m.success(e.message)}catch(e){m.error(e.message)}finally{n("update:confirmLoading",!1)}};return V({onFormSubmit:()=>{v()}}),(e,l)=>{const b=i("el-input"),u=i("el-form-item"),x=i("el-button"),B=i("el-form");return y(),I("div",M,[S("div",O,[S("div",T,[d.value?U("",!0):(y(),L(B,{key:0,ref_key:"formRef",ref:g,model:t.value,"label-width":"auto"},{default:s(()=>[a(u,{prop:"name",label:"名称",rules:[{required:!0,message:"名称不能为空!"}]},{default:s(()=>[a(b,{modelValue:t.value.name,"onUpdate:modelValue":l[0]||(l[0]=c=>t.value.name=c)},null,8,["modelValue"])]),_:1}),a(u,{prop:"points",label:"赠送积分",rules:[{required:!0,message:"赠送积分不能为空!"}]},{default:s(()=>[a(b,{type:"number",modelValue:t.value.points,"onUpdate:modelValue":l[1]||(l[1]=c=>t.value.points=c)},null,8,["modelValue"])]),_:1}),j(a(u,{"wrapper-col":{offset:4,span:16}},{default:s(()=>[a(x,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:v},{default:s(()=>[F("提交")]),_:1},512)]),_:1},512),[[E,!o.isDialog]])]),_:1},8,["model"]))])])])}}});export{G as default};
