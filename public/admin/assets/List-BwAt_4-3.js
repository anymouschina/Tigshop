import{d as E,K as L,i as v,G,q as R,c as C,e as a,b as t,w as o,f as A,g as i,I as U,r,o as b,M as J,E as n,j as D,D as y}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{P as z}from"./PopFormElm-BZp1_Wme.js";import{_ as H}from"./Switch.vue_vue_type_script_setup_true_lang-C5nzofSO.js";import{D as Q}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as W}from"./Pagination-wR9huHyl.js";import{g as X,u as S,d as Y,b as Z}from"./article-D9QgJXUQ.js";import{S as ee}from"./SelectArticleCategory-Deygq-qZ.js";import{_ as x}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./articleCategory-J2OKGEPd.js";/* empty css                                                                              */const te={class:"container"},le={class:"content_wrapper"},ae={class:"lyecs-table-list-warp"},oe={class:"list-table-tool lyecs-search-warp"},se={class:"advanced-search-warp list-table-tool-row"},ie={class:"simple-form-warp"},ne={class:"simple-form-field"},de={class:"form-group"},re={class:"control-container"},pe={class:"simple-form-field"},ce={class:"form-group"},ue={class:"control-container"},me={class:"simple-form-field"},fe={class:"form-group"},_e={class:"control-container"},ve={class:"simple-form-field"},be={class:"form-group"},ge={class:"control-container"},ye={class:"simple-form-field"},he={class:"list-table-tool-row"},ke={class:"list-table-tool-col"},we={key:2},Ce={class:"table-container"},Se={style:{position:"relative"}},Ve={class:"empty-warp"},Ie={key:0,class:"empty-bg"},Ae={key:0,class:"pagination-con"},Me=E({__name:"List",setup(Ue){const B=L(),q=v(),g=v(!0),h=v(0),p=v([]);v(!1);const s=G({page:1,size:B.get("pageSize"),sortField:"",sortOrder:"",keyword:"",articleCategoryId:""}),k=v([]),u=async()=>{g.value=!0;try{s.articleCategoryId=Array.isArray(k.value)?k.value.join(","):"";const d=await X({...s});q.value=d.records,h.value=d.total}catch(d){U.error(d.message)}finally{g.value=!1}};R(()=>{u()});const _=()=>{u()},F=({prop:d,order:e})=>{s.sortField=d,s.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",u()},V=async d=>{try{const e=await Z(d,{ids:p.value});U.success("操作成功"),u()}catch(e){U.error(e.message)}},N=d=>{p.value=d.map(e=>e.articleId)};return(d,e)=>{const m=r("el-button"),O=r("TigInput"),w=r("el-option"),T=r("el-select"),I=r("el-popconfirm"),P=r("el-space"),$=r("el-form"),c=r("el-table-column"),K=r("el-divider"),M=r("el-table"),j=r("a-spin");return b(),C("div",te,[a("div",le,[a("div",ae,[a("div",oe,[t($,{model:s},{default:o(()=>[a("div",se,[a("div",ie,[a("div",ne,[a("div",de,[a("div",re,[t(O,{modelValue:s.keyword,"onUpdate:modelValue":e[0]||(e[0]=l=>s.keyword=l),name:"keyword",placeholder:"输入文章名称",onKeyup:J(_,["enter"]),clearable:"",onClear:_},{append:o(()=>[t(m,{onClick:_},{default:o(()=>e[9]||(e[9]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),a("div",pe,[a("div",ce,[e[10]||(e[10]=a("label",{class:"control-label"},[a("span",null,"全部分类：")],-1)),a("div",ue,[t(ee,{modelValue:k.value,"onUpdate:modelValue":e[1]||(e[1]=l=>k.value=l)},null,8,["modelValue"])])])]),a("div",me,[a("div",fe,[e[11]||(e[11]=a("label",{class:"control-label"},[a("span",null,"是否显示：")],-1)),a("div",_e,[t(T,{modelValue:s.isShow,"onUpdate:modelValue":e[2]||(e[2]=l=>s.isShow=l),clearable:"",onChange:_},{default:o(()=>[t(w,{value:0,label:"不显示"}),t(w,{value:1,label:"显示"})]),_:1},8,["modelValue"])])])]),a("div",ve,[a("div",be,[e[12]||(e[12]=a("label",{class:"control-label"},[a("span",null,"是否热门：")],-1)),a("div",ge,[t(T,{"fit-input-width":!1,modelValue:s.isHot,"onUpdate:modelValue":e[3]||(e[3]=l=>s.isHot=l),clearable:"",onChange:_},{default:o(()=>[t(w,{value:0,label:"不热门"}),t(w,{value:1,label:"热门"})]),_:1},8,["modelValue"])])])]),a("div",ye,[t(m,{type:"primary",onClick:_},{default:o(()=>e[13]||(e[13]=[n("搜索")])),_:1})])])]),a("div",he,[a("div",ke,[t(P,null,{default:o(()=>[t(i(x),{isDrawer:"",onOkCallback:u,title:"添加文章",width:"580px",path:"content/article/Info",params:{act:"add"}},{default:o(()=>[t(m,{type:"primary"},{default:o(()=>e[14]||(e[14]=[n("添加文章")])),_:1})]),_:1}),t(I,{title:"您确认要批量删除所选数据吗？",onConfirm:e[4]||(e[4]=l=>V("del"))},{reference:o(()=>[t(m,{disabled:p.value.length===0},{default:o(()=>e[15]||(e[15]=[n("批量删除")])),_:1},8,["disabled"])]),_:1}),t(I,{title:"您确认要批量显示所选数据吗？",onConfirm:e[5]||(e[5]=l=>V("show"))},{reference:o(()=>[t(m,{disabled:p.value.length===0},{default:o(()=>e[16]||(e[16]=[n("批量显示")])),_:1},8,["disabled"])]),_:1}),t(I,{title:"您确认要批量隐藏所选数据吗？",onConfirm:e[6]||(e[6]=l=>V("hide"))},{reference:o(()=>[t(m,{disabled:p.value.length===0},{default:o(()=>e[17]||(e[17]=[n("批量隐藏")])),_:1},8,["disabled"])]),_:1}),p.value.length==0?(b(),D(m,{key:0,disabled:p.value.length===0},{default:o(()=>e[18]||(e[18]=[n("批量转移分类")])),_:1},8,["disabled"])):(b(),D(i(x),{key:1,isDrawer:"",onOkCallback:u,title:"批量转移分类",width:"600px",path:"content/article/Move",params:{ids:p.value}},{default:o(()=>[t(m,null,{default:o(()=>e[19]||(e[19]=[n("批量转移分类")])),_:1})]),_:1},8,["params"])),p.value.length>0?(b(),C("span",we,[e[20]||(e[20]=n(" 已选择：")),a("b",null,y(p.value.length),1),e[21]||(e[21]=n(" 项 "))])):A("",!0)]),_:1})]),e[22]||(e[22]=a("div",{class:"list-table-tool-col"},null,-1))])]),_:1},8,["model"])]),a("div",Ce,[t(j,{spinning:g.value},{default:o(()=>[t(M,{data:q.value,"row-key":"articleId",onSelectionChange:N,total:h.value,onSortChange:F,loading:g.value},{empty:o(()=>[a("div",Ve,[g.value?A("",!0):(b(),C("div",Ie,"暂无数据"))])]),default:o(()=>[t(c,{type:"selection",width:"32"}),t(c,{label:"文章标题",prop:"articleId",sortable:"custom",width:300},{default:o(({row:l})=>[a("div",Se,[t(i(z),{label:"文章标题",type:"textarea",requestApi:i(S),"org-value":l.articleTitle,"onUpdate:orgValue":f=>l.articleTitle=f,params:{id:l.articleId,field:"articleTitle"},max:50},{default:o(()=>[a("div",null,y(l.articleTitle),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])])]),_:1}),t(c,{label:"文章编号"},{default:o(({row:l})=>[t(i(z),{label:"文章编号",type:"input",requestApi:i(S),"org-value":l.articleSn,"onUpdate:orgValue":f=>l.articleSn=f,params:{id:l.articleId,field:"articleSn"},max:10},{default:o(()=>[a("div",null,y(l.articleSn||"-"),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])]),_:1}),t(c,{label:"文章分类",prop:"articleCategoryName"}),t(c,{label:"文章类型",prop:"articleTypeText"}),t(c,{width:"90",label:"文章重要性"},{default:o(({row:l})=>[n(y(l.isTop==0?"普通":"置顶"),1)]),_:1}),t(c,{width:"160",label:"发布时间"},{default:o(({row:l})=>[n(y(l.addTime),1)]),_:1}),t(c,{label:"是否热门",prop:"isHot",sortable:"custom",width:120},{default:o(({row:l})=>[t(i(H),{checked:l.isHot,"onUpdate:checked":f=>l.isHot=f,requestApi:i(S),params:{id:l.articleId,field:"isHot"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),t(c,{label:"是否显示",prop:"isShow",sortable:"custom",width:120},{default:o(({row:l})=>[t(i(H),{checked:l.isShow,"onUpdate:checked":f=>l.isShow=f,requestApi:i(S),params:{id:l.articleId,field:"isShow"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),t(c,{label:"操作",fixed:"right",width:110},{default:o(({row:l})=>[t(i(x),{isDrawer:"",onOkCallback:u,title:"编辑文章",width:"580px",path:"content/article/Info",params:{act:"detail",id:l.articleId}},{default:o(()=>e[23]||(e[23]=[a("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),t(K,{direction:"vertical"}),t(i(Q),{onAfterDelete:u,requestApi:i(Y),params:{id:l.articleId}},{default:o(()=>e[24]||(e[24]=[n("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),h.value>0?(b(),C("div",Ae,[t(i(W),{page:s.page,"onUpdate:page":e[7]||(e[7]=l=>s.page=l),size:s.size,"onUpdate:size":e[8]||(e[8]=l=>s.size=l),total:h.value,onCallback:u},null,8,["page","size","total"])])):A("",!0)])])])])}}});export{Me as default};
