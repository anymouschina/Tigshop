import{d as H,s as M,j as k,x as J,K as h,r as m,o as i,c as S,e as s,b as e,w as a,k as r,$ as V,a0 as w,H as _,h as x,f as v,c_ as g,G as B,F,a as K,p as Q,i as X,_ as Z}from"./index-7c2d2aef.js";/* empty css             */import{_ as R}from"./Editor.vue_vue_type_script_setup_true_lang-4519c339.js";import{g as ee,c as ae,d as le}from"./config-e2aa16d1.js";import{U as Y}from"./index-afc4fb40.js";import"./index.esm-0534e563.js";import"./index-6c62cf9b.js";import"./format-4e0206d3.js";import"./config-9548fa9b.js";import"./util-1ee03ed8.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./index-57209e55.js";const n=P=>(Q("data-v-ab7e0bde"),P=P(),X(),P),te={class:"container"},ue={class:"content_wrapper"},se={class:"content"},oe=n(()=>s("div",{class:"extra"},"订单结算页面是否支持余额支付功能，不支持则不显示",-1)),de=n(()=>s("div",{class:"extra"},"订单结算页面是否支持积分抵扣功能，不支持则不显示",-1)),_e=n(()=>s("div",{class:"extra"},"订单结算页面是否支持优惠券功能，不支持则不显示",-1)),pe={class:"content"},ne=n(()=>s("div",{class:"extra"},"是否开启微信支付，如关闭则不显示微信支付选项",-1)),ie=n(()=>s("div",{class:"extra"},"请填写由服务商提供的子商户号",-1)),ye=n(()=>s("div",{class:"extra"},"请使用APIv3密钥",-1)),re=n(()=>s("div",{class:"extra"},"请使用API证书序列号",-1)),ce={style:{width:"100%"}},me=n(()=>s("span",{class:"ml10"},"apiclient_cert.pem",-1)),ve=n(()=>s("div",{class:"extra"},"调用微信商户接口时需要用到的API证书，文件名称一般为apiclient_cert.pem，具体操作请参考教程",-1)),fe={style:{width:"100%"}},be=n(()=>s("span",{class:"ml10"},"apiclient_key.pem",-1)),he=n(()=>s("div",{class:"extra"},"调用微信商户接口时需要用到的API证书密钥，文件名称一般为apiclient_key.pem，具体操作请参考教程",-1)),Ve={style:{width:"100%"}},we=n(()=>s("div",{class:"extra"},"调用微信商户接口时需要用到的平台证书,上传API证书后需要更新平台证书，具体操作请参考教程",-1)),ke=n(()=>s("div",{class:"extra"},"请使用微信支付公钥ID",-1)),ge={style:{width:"100%"}},Ue=n(()=>s("span",{class:"ml10"},"微信支付公钥文件（如：pub_key.pem）",-1)),xe=n(()=>s("div",{class:"extra"},"调用微信商户接口时需要用到的公钥证书，文件名称一般为public.pem，具体操作请参考教程",-1)),Pe={class:"content"},Ie=n(()=>s("div",{class:"extra"},"是否开启支付宝支付，如关闭则不显示支付宝支付选项",-1)),Ce={class:"content"},Be=n(()=>s("div",{class:"extra"},"是否开启YaBandPay支付，如关闭则不显示YaBandPay支付选项",-1)),We=n(()=>s("div",{class:"extra"},"是否开启YaBandPay微信支付，如关闭则不显示YaBandPay微信支付选项",-1)),Le=n(()=>s("div",{class:"extra"},"是否开启YaBandPay支付宝支付，如关闭则不显示YaBandPay支付宝支付选项",-1)),Ae=n(()=>s("div",{class:"extra"}," 如果选择了默认国家，则会员在选择地址时默认会显示该国家下的省份或地区，不再显示国家选择（修改设置对已经添加的会员地址不生效） ",-1)),Se={class:"content"},Ye=n(()=>s("div",{class:"extra"},"是否开启线下支付，如关闭则不显示线下支付选项",-1)),De={class:"content"},Ne=n(()=>s("div",{class:"extra"},"是否开启PayPal支付，如关闭则不显示PayPal支付选项",-1)),je=n(()=>s("div",{class:"extra"}," 如果选择了默认国家，则会员在选择地址时默认会显示该国家下的省份或地区，不再显示国家选择（修改设置对已经添加的会员地址不生效） ",-1)),Fe={class:"content"},Ke=n(()=>s("div",{class:"extra"},"是否开启云支付，如关闭则不显示云支付选项",-1)),Re=n(()=>s("div",{style:{height:"20px"}},null,-1)),$e={class:"selected-action-warp"},Oe={class:"selected-action",style:{"padding-left":"80px"}},Te=H({__name:"Payment",setup(P){const $=M(),f=k("base"),D=k(1),I=k(!1),l=k({use_wechat:1,use_alipay:1,use_surplus:1,use_offline:1,use_yabanpay:0,use_yabanpay_wechat:0,use_yabanpay_alipay:0,wechat_pay_key:"",wechat_mchid_type:1,yabanpay_currency:"",use_paypal:0,paypal_client_id:"",paypal_secret:"",paypal_currency:"",use_yunpay:0,wechat_pay_check_type:1,wechat_pay_public_key:0,wechat_pay_public_key_id:""}),O=d=>{f.value=d},T=k([]);J(async()=>{L()});const W=k(!0),q=async()=>{try{const d=await ae();h.success(d.message),L()}catch(d){h.error(d.message)}finally{W.value=!1}},L=async()=>{try{const d=await ee({code:"payment"});console.log(d),Object.assign(l.value,d.item),T.value=d.countrys}catch(d){h.error(d.message)}finally{W.value=!1}},z=async()=>{I.value=!0;try{const d=await le({code:"payment",...l.value});h.success(d.message)}catch(d){h.error(d.message)}finally{I.value=!1}},A=d=>{if(d.file.status=="uploading",d.file.status,d.file.status==="done")if(d.file.response.data.errcode!==0)d.file.status="error",h.error(d.file.response.data.message);else{for(let u in d.fileList)d.file.uid==d.fileList[u].uid&&(d.fileList[u]=Object.assign(d.fileList[u],d.fileList[u].response.data));h.success("文件上传成功！"),L()}else d.file.status==="error"&&h.error(`${d.file.name} 文件上传失败！`)};return(d,u)=>{const b=m("el-tab-pane"),N=m("el-tabs"),p=m("el-radio"),c=m("el-radio-group"),o=m("el-form-item"),y=m("el-input"),U=m("el-button"),C=m("el-option"),j=m("el-select"),E=m("el-form"),G=m("a-spin");return i(),S("div",te,[s("div",ue,[e(N,{modelValue:f.value,"onUpdate:modelValue":u[0]||(u[0]=t=>f.value=t),class:"lyecs-tabs","tab-position":"top",onTabChange:O},{default:a(()=>[(i(),r(b,{key:1,label:"基础设置",name:"base"})),(i(),r(b,{key:2,label:"微信支付",name:"wechat"})),(i(),r(b,{key:3,label:"支付宝",name:"alipay"})),(i(),r(b,{key:4,label:"YaBandPay",name:"yabanpay"})),(i(),r(b,{key:5,label:"线下支付",name:"offline"})),(i(),r(b,{key:6,label:"PayPal",name:"PayPal"})),(i(),r(b,{key:7,label:"云支付",name:"cloudPay"}))]),_:1},8,["modelValue"]),e(G,{spinning:W.value},{default:a(()=>[e(E,{ref_key:"formRef",ref:$,model:l.value,"label-width":"160px"},{default:a(()=>[V(s("div",se,[e(o,{label:"余额支付",prop:"use_surplus"},{default:a(()=>[e(c,{modelValue:l.value.use_surplus,"onUpdate:modelValue":u[1]||(u[1]=t=>l.value.use_surplus=t),class:"itemWidth"},{default:a(()=>[e(p,{value:1},{default:a(()=>[_("支持")]),_:1}),e(p,{value:0},{default:a(()=>[_("不支持")]),_:1})]),_:1},8,["modelValue"]),oe]),_:1}),e(o,{label:"积分抵扣",prop:"use_points"},{default:a(()=>[e(c,{modelValue:l.value.use_points,"onUpdate:modelValue":u[2]||(u[2]=t=>l.value.use_points=t),class:"itemWidth"},{default:a(()=>[e(p,{value:1},{default:a(()=>[_("支持")]),_:1}),e(p,{value:0},{default:a(()=>[_("不支持")]),_:1})]),_:1},8,["modelValue"]),de]),_:1}),e(o,{label:"优惠券",prop:"use_coupon"},{default:a(()=>[e(c,{modelValue:l.value.use_coupon,"onUpdate:modelValue":u[3]||(u[3]=t=>l.value.use_coupon=t),class:"itemWidth"},{default:a(()=>[e(p,{value:1},{default:a(()=>[_("支持")]),_:1}),e(p,{value:0},{default:a(()=>[_("不支持")]),_:1})]),_:1},8,["modelValue"]),_e]),_:1})],512),[[w,f.value==="base"]]),V(s("div",pe,[e(o,{label:"是否开启",prop:"use_wechat"},{default:a(()=>[e(c,{modelValue:l.value.use_wechat,"onUpdate:modelValue":u[4]||(u[4]=t=>l.value.use_wechat=t),class:"itemWidth"},{default:a(()=>[e(p,{value:1},{default:a(()=>[_("开启")]),_:1}),e(p,{value:0},{default:a(()=>[_("关闭")]),_:1})]),_:1},8,["modelValue"]),ne]),_:1}),V(s("div",null,[e(o,{label:"微信商户类型",prop:"wechat_mchid_type"},{default:a(()=>[e(c,{modelValue:l.value.wechat_mchid_type,"onUpdate:modelValue":u[5]||(u[5]=t=>l.value.wechat_mchid_type=t),class:"itemWidth"},{default:a(()=>[e(p,{value:1},{default:a(()=>[_("普通商户模式")]),_:1}),e(p,{value:2},{default:a(()=>[_("服务商模式")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"微信商户号",prop:"wechat_pay_mchid"},{default:a(()=>[e(y,{modelValue:l.value.wechat_pay_mchid,"onUpdate:modelValue":u[6]||(u[6]=t=>l.value.wechat_pay_mchid=t)},null,8,["modelValue"])]),_:1}),l.value.wechat_mchid_type===2?(i(),r(o,{key:0,label:"微信子商户号",prop:"wechat_pay_sub_mchid"},{default:a(()=>[e(y,{modelValue:l.value.wechat_pay_sub_mchid,"onUpdate:modelValue":u[7]||(u[7]=t=>l.value.wechat_pay_sub_mchid=t)},null,8,["modelValue"]),ie]),_:1})):x("",!0),e(o,{label:"商户API密钥",prop:"wechat_pay_key"},{default:a(()=>[e(y,{modelValue:l.value.wechat_pay_key,"onUpdate:modelValue":u[8]||(u[8]=t=>l.value.wechat_pay_key=t)},null,8,["modelValue"]),ye]),_:1}),l.value.wechat_pay_check_type===1?(i(),r(o,{key:1,label:"商户证书序列号",prop:"wechat_pay_serial_no"},{default:a(()=>[e(y,{modelValue:l.value.wechat_pay_serial_no,"onUpdate:modelValue":u[9]||(u[9]=t=>l.value.wechat_pay_serial_no=t)},null,8,["modelValue"]),re]),_:1})):x("",!0),e(o,{label:"商户API证书",prop:"wechat_pay_certificate"},{default:a(()=>[s("div",ce,[e(v(Y),{name:"file",action:v(g).prefix+"/setting/config/upload_file?type=1",headers:v(g).headers,onChange:A,showUploadList:!1,multiple:!1},{default:a(()=>[e(U,null,{default:a(()=>[_(B(l.value.wechat_pay_certificate?"重新上传":"点击上传"),1)]),_:1}),me]),_:1},8,["action","headers"])]),ve]),_:1}),e(o,{label:"商户API证书密钥",prop:"wechat_pay_private_key"},{default:a(()=>[s("div",fe,[e(v(Y),{name:"file",action:v(g).prefix+"/setting/config/upload_file?type=2",headers:v(g).headers,onChange:A,showUploadList:!1,multiple:!1},{default:a(()=>[e(U,null,{default:a(()=>[_(B(l.value.wechat_pay_private_key?"重新上传":"点击上传"),1)]),_:1}),be]),_:1},8,["action","headers"])]),he]),_:1}),e(o,{label:"验证微信支付方式",prop:"wechat_mchid_type"},{default:a(()=>[e(c,{modelValue:l.value.wechat_pay_check_type,"onUpdate:modelValue":u[10]||(u[10]=t=>l.value.wechat_pay_check_type=t),class:"itemWidth"},{default:a(()=>[e(p,{value:1},{default:a(()=>[_("平台证书")]),_:1}),e(p,{value:2},{default:a(()=>[_("微信支付公钥")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l.value.wechat_pay_check_type===1?(i(),r(o,{key:2,label:"平台证书",prop:""},{default:a(()=>[s("div",Ve,[e(U,{loading:I.value,class:"form-submit-btn",type:"success",onClick:q},{default:a(()=>[_(B(l.value.wechat_pay_platform_certificate?"更新证书":"生成证书"),1)]),_:1},8,["loading"])]),we]),_:1})):x("",!0),l.value.wechat_pay_check_type===2?(i(),r(o,{key:3,label:"微信支付公钥ID",prop:"wechat_pay_public_key_id"},{default:a(()=>[e(y,{modelValue:l.value.wechat_pay_public_key_id,"onUpdate:modelValue":u[11]||(u[11]=t=>l.value.wechat_pay_public_key_id=t)},null,8,["modelValue"]),ke]),_:1})):x("",!0),l.value.wechat_pay_check_type===2?(i(),r(o,{key:4,label:"微信支付公钥文件",prop:"wechat_pay_public_key"},{default:a(()=>[s("div",ge,[e(v(Y),{name:"file",action:v(g).prefix+"/setting/config/upload_file?type=3",headers:v(g).headers,onChange:A,showUploadList:!1,multiple:!1},{default:a(()=>[e(U,null,{default:a(()=>[_(B(l.value.wechat_pay_public_key?"重新上传":"点击上传"),1)]),_:1}),Ue]),_:1},8,["action","headers"])]),xe]),_:1})):x("",!0)],512),[[w,l.value.use_wechat===1]])],512),[[w,f.value==="wechat"]]),V(s("div",Pe,[e(o,{label:"是否开启",prop:"use_alipay"},{default:a(()=>[e(c,{modelValue:l.value.use_alipay,"onUpdate:modelValue":u[12]||(u[12]=t=>l.value.use_alipay=t),class:"itemWidth"},{default:a(()=>[e(p,{value:1},{default:a(()=>[_("开启")]),_:1}),e(p,{value:0},{default:a(()=>[_("关闭")]),_:1})]),_:1},8,["modelValue"]),Ie]),_:1}),e(o,{label:"支付宝APPID",prop:"alipay_appid"},{default:a(()=>[e(y,{modelValue:l.value.alipay_appid,"onUpdate:modelValue":u[13]||(u[13]=t=>l.value.alipay_appid=t)},null,8,["modelValue"])]),_:1}),e(o,{label:"应用私钥",prop:"alipay_rsa_private_key"},{default:a(()=>[e(y,{type:"textarea",modelValue:l.value.alipay_rsa_private_key,"onUpdate:modelValue":u[14]||(u[14]=t=>l.value.alipay_rsa_private_key=t),rows:10},null,8,["modelValue"])]),_:1}),e(o,{label:"支付宝公钥",prop:"alipay_rsa_public_key"},{default:a(()=>[e(y,{type:"textarea",modelValue:l.value.alipay_rsa_public_key,"onUpdate:modelValue":u[15]||(u[15]=t=>l.value.alipay_rsa_public_key=t),rows:5},null,8,["modelValue"])]),_:1})],512),[[w,f.value==="alipay"]]),V(s("div",Ce,[e(o,{label:"是否开启",prop:"use_yabanpay"},{default:a(()=>[e(c,{modelValue:l.value.use_yabanpay,"onUpdate:modelValue":u[16]||(u[16]=t=>l.value.use_yabanpay=t),class:"itemWidth"},{default:a(()=>[e(p,{value:1},{default:a(()=>[_("开启")]),_:1}),e(p,{value:0},{default:a(()=>[_("关闭")]),_:1})]),_:1},8,["modelValue"]),Be]),_:1}),e(o,{label:"微信开启",prop:"use_yabanpay_wechat"},{default:a(()=>[e(c,{modelValue:l.value.use_yabanpay_wechat,"onUpdate:modelValue":u[17]||(u[17]=t=>l.value.use_yabanpay_wechat=t),class:"itemWidth"},{default:a(()=>[e(p,{value:1},{default:a(()=>[_("开启")]),_:1}),e(p,{value:0},{default:a(()=>[_("关闭")]),_:1})]),_:1},8,["modelValue"]),We]),_:1}),e(o,{label:"支付宝开启",prop:"use_yabanpay_alipay"},{default:a(()=>[e(c,{modelValue:l.value.use_yabanpay_alipay,"onUpdate:modelValue":u[18]||(u[18]=t=>l.value.use_yabanpay_alipay=t),class:"itemWidth"},{default:a(()=>[e(p,{value:1},{default:a(()=>[_("开启")]),_:1}),e(p,{value:0},{default:a(()=>[_("关闭")]),_:1})]),_:1},8,["modelValue"]),Le]),_:1}),e(o,{label:"货币",prop:"yabanpay_currency"},{default:a(()=>[e(j,{modelValue:l.value.yabanpay_currency,"onUpdate:modelValue":u[19]||(u[19]=t=>l.value.yabanpay_currency=t),style:{width:"100%"}},{default:a(()=>[e(C,{value:"0",label:"不选择"}),(i(!0),S(F,null,K(l.value.yabanpay_currency_list,t=>(i(),r(C,{key:t.id,value:t.value,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),Ae]),_:1}),e(o,{label:"YaBandPay UID",prop:"yabandpay_uid"},{default:a(()=>[e(y,{modelValue:l.value.yabandpay_uid,"onUpdate:modelValue":u[20]||(u[20]=t=>l.value.yabandpay_uid=t)},null,8,["modelValue"])]),_:1}),e(o,{label:"YaBandPay Secret Key",prop:"yabandpay_secret_key"},{default:a(()=>[e(y,{modelValue:l.value.yabandpay_secret_key,"onUpdate:modelValue":u[21]||(u[21]=t=>l.value.yabandpay_secret_key=t)},null,8,["modelValue"])]),_:1})],512),[[w,f.value==="yabanpay"]]),V(s("div",Se,[e(o,{label:"是否开启",prop:"use_offline"},{default:a(()=>[e(c,{modelValue:l.value.use_offline,"onUpdate:modelValue":u[22]||(u[22]=t=>l.value.use_offline=t),class:"itemWidth"},{default:a(()=>[e(p,{value:1},{default:a(()=>[_("开启")]),_:1}),e(p,{value:0},{default:a(()=>[_("关闭")]),_:1})]),_:1},8,["modelValue"]),Ye]),_:1}),e(o,{label:"汇款说明"},{default:a(()=>[e(N,{type:"border-card",modelValue:D.value,"onUpdate:modelValue":u[25]||(u[25]=t=>D.value=t)},{default:a(()=>[e(b,{label:"银行汇款",name:1},{default:a(()=>[e(v(R),{html:l.value.offline_pay_bank,"onUpdate:html":u[23]||(u[23]=t=>l.value.offline_pay_bank=t),border:!1},null,8,["html"])]),_:1}),e(b,{label:"企业汇款",name:2},{default:a(()=>[e(v(R),{html:l.value.offline_pay_company,"onUpdate:html":u[24]||(u[24]=t=>l.value.offline_pay_company=t),border:!1},null,8,["html"])]),_:1})]),_:1},8,["modelValue"])]),_:1})],512),[[w,f.value==="offline"]]),V(s("div",De,[e(o,{label:"是否开启",prop:"use_paypal"},{default:a(()=>[e(c,{modelValue:l.value.use_paypal,"onUpdate:modelValue":u[26]||(u[26]=t=>l.value.use_paypal=t),class:"itemWidth"},{default:a(()=>[e(p,{value:1},{default:a(()=>[_("开启")]),_:1}),e(p,{value:0},{default:a(()=>[_("关闭")]),_:1})]),_:1},8,["modelValue"]),Ne]),_:1}),e(o,{label:"货币",prop:"paypal_currency"},{default:a(()=>[e(j,{modelValue:l.value.paypal_currency,"onUpdate:modelValue":u[27]||(u[27]=t=>l.value.paypal_currency=t),style:{width:"100%"}},{default:a(()=>[e(C,{value:"0",label:"不选择"}),(i(!0),S(F,null,K(l.value.paypal_currency_list,t=>(i(),r(C,{key:t.id,value:t.value,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),je]),_:1}),e(o,{label:"Client ID",prop:"paypal_client_id"},{default:a(()=>[e(y,{modelValue:l.value.paypal_client_id,"onUpdate:modelValue":u[28]||(u[28]=t=>l.value.paypal_client_id=t)},null,8,["modelValue"])]),_:1}),e(o,{label:"Secret",prop:"paypal_secret"},{default:a(()=>[e(y,{modelValue:l.value.paypal_secret,"onUpdate:modelValue":u[29]||(u[29]=t=>l.value.paypal_secret=t)},null,8,["modelValue"])]),_:1})],512),[[w,f.value==="PayPal"]]),V(s("div",Fe,[e(o,{label:"是否开启",prop:"use_yunpay"},{default:a(()=>[e(c,{modelValue:l.value.use_yunpay,"onUpdate:modelValue":u[30]||(u[30]=t=>l.value.use_yunpay=t),class:"itemWidth"},{default:a(()=>[e(p,{value:1},{default:a(()=>[_("开启")]),_:1}),e(p,{value:0},{default:a(()=>[_("关闭")]),_:1})]),_:1},8,["modelValue"]),Ke]),_:1}),e(o,{label:"商户号",prop:"yunpay_uid"},{default:a(()=>[e(y,{modelValue:l.value.yunpay_uid,"onUpdate:modelValue":u[31]||(u[31]=t=>l.value.yunpay_uid=t)},null,8,["modelValue"])]),_:1}),e(o,{label:"商户秘钥",prop:"yunpay_secret_key"},{default:a(()=>[e(y,{modelValue:l.value.yunpay_secret_key,"onUpdate:modelValue":u[32]||(u[32]=t=>l.value.yunpay_secret_key=t)},null,8,["modelValue"])]),_:1})],512),[[w,f.value==="cloudPay"]])]),_:1},8,["model"]),Re,s("div",$e,[s("div",Oe,[e(U,{loading:I.value,class:"form-submit-btn",size:"large",type:"primary",onClick:z},{default:a(()=>[_("提 交")]),_:1},8,["loading"])])])]),_:1},8,["spinning"])])])}}});const la=Z(Te,[["__scopeId","data-v-ab7e0bde"]]);export{la as default};
