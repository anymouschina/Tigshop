import{d as E,i as m,C as U,s as L,q as j,I as f,r as n,c as F,o as S,e as C,j as I,f as M,w as l,b as o,a0 as O,E as _,a1 as T}from"./index-CGYuOau0.js";import{a as z,c as A}from"./rechargeSetting-CRsAiMhY.js";const G={class:"container"},H={class:"content_wrapper"},J={class:"lyecs-form-table"},W=E({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(N,{expose:R,emit:k}){const d=k,u=N,c=m(!0),v=U().currentRoute.value.query,p=m(u.isDialog?u.act:String(v.act)),g=m(u.isDialog?u.id:Number(v.id)),B=p.value==="add"?"create":"update",b=L(),t=m({discount_money:"",money:"",sort_order:1,is_show:1});j(()=>{p.value==="detail"?h():c.value=!1});const h=async()=>{try{const a=await z(p.value,{id:g.value});Object.assign(t.value,a.item)}catch(a){f.error(a.message),d("close")}finally{c.value=!1}},y=(a,e,r)=>{if(console.log(e),Number(e)===0||e===""){r(new Error("金额不能为0或者为空！"));return}else if(Number(e)<0){r(new Error("金额必须大于0！"));return}else r()},w=async()=>{await b.value.validate();try{d("update:confirmLoading",!0);const a=await A(B,{id:g.value,...t.value});d("submitCallback",a),f.success(a.message)}catch(a){f.error(a.message)}finally{d("update:confirmLoading",!1)}};return R({onFormSubmit:()=>{w()}}),(a,e)=>{const r=n("el-input"),i=n("el-form-item"),V=n("el-radio"),q=n("el-radio-group"),x=n("el-button"),D=n("el-form");return S(),F("div",G,[C("div",H,[C("div",J,[c.value?M("",!0):(S(),I(D,{key:0,ref_key:"formRef",ref:b,model:t.value,"label-width":"auto"},{default:l(()=>[o(i,{prop:"money",label:"充值金额",rules:[{required:!0,validator:y,trigger:"blur"}]},{default:l(()=>[o(r,{type:"number",modelValue:t.value.money,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.money=s),min:0},null,8,["modelValue"])]),_:1},8,["rules"]),o(i,{prop:"discount_money",label:"赠送金额",rules:[{required:!0,validator:y,trigger:"blur"}]},{default:l(()=>[o(r,{type:"number",modelValue:t.value.discount_money,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.discount_money=s),min:0},null,8,["modelValue"])]),_:1},8,["rules"]),o(i,{prop:"sort_order",label:"排序"},{default:l(()=>[o(r,{modelValue:t.value.sort_order,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.sort_order=s)},null,8,["modelValue"])]),_:1}),o(i,{prop:"is_show",label:"是否显示"},{default:l(()=>[o(q,{modelValue:t.value.is_show,"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.is_show=s)},{default:l(()=>[o(V,{value:1},{default:l(()=>e[4]||(e[4]=[_("是")])),_:1}),o(V,{value:0},{default:l(()=>e[5]||(e[5]=[_("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),O(o(i,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[o(x,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:w},{default:l(()=>e[6]||(e[6]=[_("提交")])),_:1},512)]),_:1},512),[[T,!u.isDialog]])]),_:1},8,["model"]))])])])}}});export{W as default};
