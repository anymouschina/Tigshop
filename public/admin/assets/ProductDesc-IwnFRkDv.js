import{M as j}from"./index-CeQDmMxd.js";import{_ as H}from"./Editor.vue_vue_type_script_setup_true_lang-DYKF5akI.js";import{d as I}from"./vuedraggable.umd-DAKh-e3Q.js";import{i as g}from"./format-CRgx78oe.js";import{_ as b}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import{d as P,i as y,q as U,ad as E,r as q,j as D,o as a,w as r,e as t,c as d,f as m,b as c,g as o,E as k,_ as L}from"./index-DrbzVNl6.js";import"./index.esm-bNAKkq0_.js";const S={class:"goods-info-edit-row",style:{width:"100%"}},z={key:0,class:"goods-info-edit-warp"},F={class:"goods-info-edit-act flex"},G={class:"goods-info-edit-con"},J={class:"info-edit-list-item",draggable:"false",style:{}},K={key:0,class:"edit-list-item-img"},Q={class:"lyecs-dialogImage",draggable:"false"},R=["src"],W={key:1,class:"edit-list-item-img"},X={class:"lyecs-dialogImage",draggable:"false"},Y=["src"],Z={key:2,class:"edit-list-item-text"},ee=["onClick"],te=["onClick"],se=["innerHTML"],le={key:2,class:"goods-detail-preview-warp"},ie={key:0,class:"extra"},ae=P({__name:"ProductDesc",props:{descArr:{type:[Object,Array],default:[]},disabled:{type:Boolean,default:!1},productType:{type:Number,default:1},label:{type:String,default:"商品详情"}},emits:["update:descArr"],setup(u,{emit:h}){const l=y(u.descArr||[]),p=y(!1),n=y({html:""}),v=y(0),w=h;U(()=>{w("update:descArr",l)});const x=s=>{for(let e in s)l.value.push({pic:s[e].picUrl,type:"pic"})},C=(s,e)=>{l.value[v.value]={pic:s[0].picUrl,type:"pic"}},T=(s,e)=>{l.value[v.value]={cover:s[0].videoCover,type:"video"}},M=s=>{console.log(s)},_=E(()=>{let s=[];for(let e in l.value)l.value[e].type=="pic"?s.push('<div class="desc-pic-item"><img src="'+g(l.value[e].pic)+'"></div>'):l.value[e].type=="video"?s.push(`
                <div class="desc-video-item" @click="${M(l.value[e])}">
                    <div class="desc-video-item-wrap">
                        <i class="iconfont-admin icon-shipin"></i>
                    </div>
                    <img src="${g(l.value[e].cover)}">
                </div>
            `):s.push(l.value[e].html);return s.join("<div data-division=1></div>")}),A=()=>{p.value=!0,n.value.html=""},O=s=>{n.value.html=l.value[s].html,v.value=s,p.value=!0},V=s=>{l.value.splice(s,1)},$=()=>{v.value>0?l.value[v.value]={html:n.value.html,type:"text"}:l.value.push({html:n.value.html,type:"text"}),p.value=!1};return(s,e)=>{const B=q("el-form-item");return a(),D(B,{label:u.label,rules:[{required:u.productType==4}]},{default:r(()=>[t("div",S,[u.disabled?m("",!0):(a(),d("div",z,[t("div",F,[c(o(b),{type:"gallery",class:"item-bg",onOkCallback:x,params:{isMultiple:!0}},{default:r(()=>e[5]||(e[5]=[t("a",{class:"add-item info-pic-add"},[t("i",{class:"iconfont icon-tianjiatupian"}),k("添加图片")],-1)])),_:1}),t("a",{class:"add-item info-text-add",onClick:A},e[6]||(e[6]=[t("i",{class:"iconfont icon-wenben",style:{"font-size":"14px"}},null,-1),k("添加文本")])),e[7]||(e[7]=t("span",null,"点击按钮添加图片或者文本，您还可以通过拖拽进行排序",-1))]),t("div",G,[c(o(I),{class:"info-edit-con-list","item-key":"",list:l.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:e[0]||(e[0]=()=>{}),onEnd:e[1]||(e[1]=()=>{})},{item:r(({element:i,index:f})=>[t("div",J,[i.type=="pic"?(a(),d("div",K,[t("a",Q,[t("img",{src:o(g)(i.pic),draggable:"false"},null,8,R)]),c(o(b),{type:"gallery",class:"item-bg",onOkCallback:C,params:{isMultiple:!1},data:{index:f}},{default:r(()=>e[8]||(e[8]=[t("div",{class:"btn-edit"},"修改",-1)])),_:2},1032,["data"])])):m("",!0),i.type=="video"?(a(),d("div",W,[t("a",X,[t("img",{src:o(g)(i.cover),draggable:"false"},null,8,Y)]),c(o(b),{type:"galleryVideo",class:"item-bg",onOkCallback:T,params:{isMultiple:!1},data:{index:f}},{default:r(()=>e[9]||(e[9]=[t("div",{class:"btn-edit"},"修改",-1)])),_:2},1032,["data"])])):m("",!0),i.type=="text"?(a(),d("div",Z,[e[10]||(e[10]=t("p",null,[t("i",{class:"iconfont icon-1fuwenben"})],-1)),e[11]||(e[11]=t("p",null,"文本",-1)),t("div",{class:"btn-edit",onClick:N=>O(f)},"修改",8,ee)])):m("",!0),t("i",{class:"btn-del iconfont icon-cha",onClick:N=>V(f)},null,8,te)])]),_:1},8,["list"])]),c(o(j),{open:p.value,"onUpdate:open":e[3]||(e[3]=i=>p.value=i),title:"添加文本",onOk:e[4]||(e[4]=i=>$()),destroyOnClose:!0,width:800},{default:r(()=>[c(o(H),{html:n.value.html,"onUpdate:html":e[2]||(e[2]=i=>n.value.html=i),height:"300px"},null,8,["html"])]),_:1},8,["open"])])),_.value?(a(),d("div",{key:1,class:"goods-detail-preview-warp",innerHTML:_.value},null,8,se)):(a(),d("div",le,e[12]||(e[12]=[t("div",{class:"preview-warp"},"商品描述预览区域",-1)])))]),u.productType==4?(a(),d("div",ie,"此处填写内容，将在商品付费后展示")):m("",!0)]),_:1},8,["label","rules"])}}}),me=L(ae,[["__scopeId","data-v-9f6b3e1f"]]);export{me as default};
