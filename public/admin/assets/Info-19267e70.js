import{d as q,j as c,E as L,s as U,x as j,K as _,r as u,o as x,c as A,e as k,k as E,w as a,b as e,H as d,$ as F,a0 as $,h as H}from"./index-7c2d2aef.js";import{a as I,c as K}from"./areaCode-9247cea1.js";const M={class:"container"},O={class:"content_wrapper"},T={class:"lyecs-form-table"},P=q({__name:"Info",props:{id:{type:Number,default:0},promotion_type:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(C,{expose:N,emit:S}){const i=S,n=C,f=c(!0),v=L().currentRoute.value.query,p=c(n.isDialog?n.act:String(v.act)),b=c(n.isDialog?n.id:Number(v.id)),B=p.value==="add"?"create":"update",g=U(),t=c({name:"",code:"",is_default:0,is_available:1});j(()=>{p.value==="detail"?D():f.value=!1});const D=async()=>{try{const o=await I(p.value,{id:b.value});Object.assign(t.value,o.item)}catch(o){_.error(o.message),i("close")}finally{f.value=!1}},y=async()=>{await g.value.validate();try{i("update:confirmLoading",!0);const o=await K(B,{id:b.value,...t.value});i("submitCallback",o),_.success(o.message)}catch(o){_.error(o.message)}finally{i("update:confirmLoading",!1)}};return N({onFormSubmit:()=>{y()}}),(o,l)=>{const V=u("el-input"),r=u("el-form-item"),m=u("el-radio"),w=u("el-radio-group"),R=u("el-button"),h=u("el-form");return x(),A("div",M,[k("div",O,[k("div",T,[f.value?H("",!0):(x(),E(h,{key:0,ref_key:"formRef",ref:g,model:t.value,"label-width":"auto"},{default:a(()=>[e(r,{prop:"name",label:"区号地区：",rules:[{required:!0,message:"区号地区不能为空!"}]},{default:a(()=>[e(V,{type:"text",maxlength:"60",modelValue:t.value.name,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value.name=s)},null,8,["modelValue"])]),_:1}),e(r,{prop:"code",label:"区号：",rules:[{required:!0,message:"区号不能为空!"}]},{default:a(()=>[e(V,{type:"text",maxlength:"60",modelValue:t.value.code,"onUpdate:modelValue":l[1]||(l[1]=s=>t.value.code=s)},null,8,["modelValue"])]),_:1}),e(r,{prop:"is_default",label:"是否默认："},{default:a(()=>[e(w,{modelValue:t.value.is_default,"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.is_default=s)},{default:a(()=>[e(m,{value:1},{default:a(()=>[d("是")]),_:1}),e(m,{value:0},{default:a(()=>[d("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{prop:"is_default",label:"是否启用："},{default:a(()=>[e(w,{modelValue:t.value.is_available,"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.is_available=s)},{default:a(()=>[e(m,{value:1},{default:a(()=>[d("是")]),_:1}),e(m,{value:0},{default:a(()=>[d("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),F(e(r,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[e(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:l[4]||(l[4]=s=>y())},{default:a(()=>[d("提交")]),_:1},512)]),_:1},512),[[$,!n.isDialog]])]),_:1},8,["model"]))])])])}}});export{P as default};
