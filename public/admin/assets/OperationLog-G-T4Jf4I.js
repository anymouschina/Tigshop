import"./index-B-GURfkM.js";import{d as y,G as C,i as r,q as L,c as z,e as u,a0 as N,E as g,b as t,w as d,g as f,aY as B,j as O,r as p,I as h,o as v,_ as D}from"./index-CGYuOau0.js";/* empty css                                                                    */import{P as E}from"./Pagination-yOfjsBuR.js";import{b as P}from"./order-CoX6hLeE.js";import{_ as V}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";const I={class:"container-card"},U={class:"title"},j={class:"pagination-con"},q=y({__name:"OperationLog",props:{order_id:{type:Number,default:0}},setup(b){const o=C({page:1,order_id:b.order_id,parent_order_id:0}),s=r(!0),c=r(10),_=r(0),m=r([]),l=async()=>{try{s.value=!0;const a=await P(o);m.value=a.filter_result,_.value=a.total}catch(a){h.error(a.message)}finally{s.value=!1}};return L(()=>{l()}),(a,e)=>{const x=p("el-button"),i=p("el-table-column"),w=p("el-table"),k=B("loading");return v(),z("div",I,[u("div",U,[e[3]||(e[3]=g(" 操作日志 ")),t(f(V),{params:{act:"detail",id:o.order_id,valueName:"add_note"},isDrawer:"",path:"order/order/src/EditRemark",title:"添加日志",width:"600px",onOkCallback:l},{default:d(()=>[t(x,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:d(()=>e[2]||(e[2]=[g(" 添加日志 ")])),_:1})]),_:1},8,["params"])]),N((v(),O(w,{data:m.value},{default:d(()=>[t(i,{label:"操作者",prop:"operator",width:"120px"}),t(i,{label:"操作时间",prop:"log_time",width:"160px"}),t(i,{label:"备注",prop:"description"})]),_:1},8,["data"])),[[k,s.value]]),u("div",j,[t(f(E),{page:o.page,"onUpdate:page":e[0]||(e[0]=n=>o.page=n),size:c.value,"onUpdate:size":e[1]||(e[1]=n=>c.value=n),total:_.value,onCallback:l},null,8,["page","size","total"])])])}}}),$=D(q,[["__scopeId","data-v-3e0986f8"]]);export{$ as default};
