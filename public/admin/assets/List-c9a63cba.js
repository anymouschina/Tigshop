/* empty css             */import"./index-6c62cf9b.js";import{P as E}from"./PopFormElm-61cd9b7d.js";import{_ as G}from"./Switch.vue_vue_type_script_setup_true_lang-95245cd7.js";import{_ as H}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as K}from"./Pagination-8eb7b6b1.js";import{u as M}from"./config-9548fa9b.js";import{u as V,d as T,g as J,a as Q,b as R}from"./productActivity-05219334.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import{d as W,j as b,I as X,x as Y,r,o as p,c as h,e as t,b as e,w as s,H as l,f as d,F as Z,a as tt,k as et,h as w,G as u,K as C}from"./index-7c2d2aef.js";import"./config-e2aa16d1.js";const ot={class:"container"},st={class:"content_wrapper"},at={class:"bonus-wrap"},lt=t("p",{class:"subtitle"},"按优惠方式快速创建",-1),it={class:"card-wrap"},nt={class:"card-wrap__container"},rt={class:"item-bg coupon-cards-item"},dt=t("div",null,[t("div",{class:"title"},"满减"),t("div",{class:"desc"},[t("p",null,[l("例：100元减20元"),t("br"),l("便于合理控制活动成本")])])],-1),ct={class:"item-bg coupon-cards-item"},_t=t("div",null,[t("div",{class:"title"},"折扣"),t("div",{class:"desc"},[t("p",null,[l("例：100元打9折"),t("br"),l("提高店铺销量和客单价")])])],-1),pt={class:"item-bg coupon-cards-item item-bg2"},ut=t("div",null,[t("div",{class:"title"},"赠品"),t("div",{class:"desc"},[t("p",null,[l("据会员等级可领的赠品，丰富会"),t("br"),l("员权益，凸显会员身份价值")])])],-1),mt={class:"lyecs-table-list-warp"},vt={class:"list-table-tool lyecs-search-warp"},ft={class:"advanced-search-warp list-table-tool-row"},bt={class:"simple-form-warp"},ht={class:"simple-form-field"},gt={class:"form-group"},yt=t("label",{class:"control-label"},[t("span",null,"活动名称：")],-1),kt={class:"control-container"},wt={class:"simple-form-field"},Ct={class:"form-group"},At=t("label",{class:"control-label"},[t("span",null,"是否显示：")],-1),xt={class:"control-container"},Vt={class:"simple-form-field"},St={class:"table-container"},Pt={style:{position:"relative"}},Ut={class:"order-tips-p"},zt={class:"green"},qt=t("a",{class:"btn-link"},"编辑",-1),Dt={class:"empty-warp"},It={key:0,class:"empty-bg"},Bt={key:0,class:"pagination-con"},Ft={key:0,class:"selected-action-warp"},Lt={class:"selected-action"},Wt=W({__name:"List",setup(Nt){const S=M(),A=b(),m=b(!0),g=b(0),y=b([]),i=X({page:1,size:S.get("page_size"),sort_field:"",sort_order:"",keyword:""}),x=b([]),c=async()=>{m.value=!0;try{const n=await J({...i});A.value=n.filter_result,g.value=n.total;const a=await Q();x.value=a.promotion_status}catch(n){C.error(n.message)}finally{m.value=!1}};Y(()=>{c()});const P=()=>{c()},U=({prop:n,order:a})=>{i.sort_field=n,i.sort_order=a=="ascending"?"asc":a=="descending"?"desc":"",c()},z=async n=>{try{const a=await R(n,{ids:y.value});C.success(a.message),c()}catch(a){C.error(a.message)}},q=n=>{y.value=n.map(a=>a.promotion_id)};return(n,a)=>{const v=r("el-button"),D=r("el-input"),I=r("el-option"),B=r("el-select"),F=r("el-form"),_=r("el-table-column"),L=r("el-divider"),N=r("el-table"),O=r("a-spin"),$=r("el-popconfirm"),j=r("el-space");return p(),h("div",ot,[t("div",st,[t("div",at,[lt,t("div",it,[t("div",nt,[t("div",rt,[dt,e(d(k),{isDrawer:"",onOkCallback:c,title:"添加减免优惠活动",width:"800px",path:"promotion/productActivity/Info",params:{act:"add",promotion_type:1}},{default:s(()=>[e(v,{type:"primary"},{default:s(()=>[l("立即新建")]),_:1})]),_:1})]),t("div",ct,[_t,e(d(k),{isDrawer:"",onOkCallback:c,title:"添加折扣优惠活动",width:"800px",path:"promotion/productActivity/Info",params:{act:"add",promotion_type:2}},{default:s(()=>[e(v,{type:"primary"},{default:s(()=>[l("立即新建")]),_:1})]),_:1})]),t("div",pt,[ut,e(d(k),{isDrawer:"",onOkCallback:c,title:"添加赠品优惠活动",width:"800px",path:"promotion/productActivity/Info",params:{act:"add",promotion_type:0}},{default:s(()=>[e(v,{type:"primary"},{default:s(()=>[l("立即新建")]),_:1})]),_:1})])])])]),t("div",mt,[t("div",vt,[e(F,{model:i},{default:s(()=>[t("div",ft,[t("div",bt,[t("div",ht,[t("div",gt,[yt,t("div",kt,[e(D,{name:"keyword",modelValue:i.keyword,"onUpdate:modelValue":a[0]||(a[0]=o=>i.keyword=o),placeholder:"输入活动名称"},null,8,["modelValue"])])])]),t("div",wt,[t("div",Ct,[At,t("div",xt,[e(B,{modelValue:i.is_going,"onUpdate:modelValue":a[1]||(a[1]=o=>i.is_going=o),clearable:""},{default:s(()=>[(p(!0),h(Z,null,tt(x.value,(o,f)=>(p(),et(I,{value:f+1,label:o},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])])])]),t("div",Vt,[e(v,{type:"primary",onClick:P},{default:s(()=>[l("搜索")]),_:1})])])])]),_:1},8,["model"])]),t("div",St,[e(O,{spinning:m.value},{default:s(()=>[e(N,{data:A.value,"row-key":"coupon_id",onSelectionChange:q,total:g.value,onSortChange:U,loading:m.value},{empty:s(()=>[t("div",Dt,[m.value?w("",!0):(p(),h("div",It,"暂无数据"))])]),default:s(()=>[e(_,{type:"selection",width:"32"}),e(_,{label:"活动名称",prop:"promotion_name",width:150},{default:s(({row:o})=>[t("div",Pt,[t("div",null,u(o.promotion_name||"--"),1)]),t("p",Ut,[t("span",zt,u(o.promotion_type==1?"减免":o.promotion_type==2?"折扣":"赠品"),1)])]),_:1}),e(_,{label:"起始日期",prop:"start_time",width:"150",sortable:"custom"}),e(_,{label:"截止日期",prop:"end_time",width:"150",sortable:"custom"}),e(_,{label:"金额下限",prop:"min_order_amount",sortable:"custom"},{default:s(({row:o})=>[t("div",null,u(o.min_order_amount),1)]),_:1}),e(_,{label:"金额上限",prop:"max_order_amount",sortable:"custom"},{default:s(({row:o})=>[t("div",null,u(o.max_order_amount),1)]),_:1}),e(_,{label:"排序",prop:"sort_order",sortable:"custom"},{default:s(({row:o})=>[e(d(E),{label:"排序",type:"input",requestApi:d(V),"org-value":o.sort_order,"onUpdate:orgValue":f=>o.sort_order=f,params:{id:o.promotion_id,field:"sort_order"},extra:"默认值为50，数值越小，排序越靠前"},{default:s(()=>[t("div",null,u(o.sort_order),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])]),_:1}),e(_,{label:"状态",prop:"product_status"}),e(_,{label:"是否启用",prop:"is_show",sortable:"custom"},{default:s(({row:o})=>[e(d(G),{checked:o.is_available,"onUpdate:checked":f=>o.is_available=f,requestApi:d(V),params:{id:o.promotion_id,field:"is_available"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),e(_,{label:"操作",fixed:"right"},{default:s(({row:o})=>[e(d(k),{isDrawer:"",onOkCallback:c,title:"编辑优惠活动",width:"800px",path:"promotion/productActivity/Info",params:{act:"detail",id:o.promotion_id}},{default:s(()=>[qt]),_:2},1032,["params"]),e(L,{direction:"vertical"}),e(d(H),{onAfterDelete:c,requestApi:d(T),params:{id:o.promotion_id}},{default:s(()=>[l("删除")]),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),g.value>0?(p(),h("div",Bt,[e(d(K),{page:i.page,"onUpdate:page":a[2]||(a[2]=o=>i.page=o),size:i.size,"onUpdate:size":a[3]||(a[3]=o=>i.size=o),total:g.value,onCallback:c},null,8,["page","size","total"])])):w("",!0)]),y.value.length>0?(p(),h("div",Ft,[t("div",Lt,[e(j,null,{default:s(()=>[t("span",null,[l("已选择："),t("b",null,u(y.value.length),1),l(" 项")]),e($,{title:"您确认要批量删除所选数据吗？",onConfirm:a[4]||(a[4]=o=>z("del"))},{reference:s(()=>[e(v,null,{default:s(()=>[l("批量删除")]),_:1})]),_:1})]),_:1})])])):w("",!0)])])])}}});export{Wt as default};
