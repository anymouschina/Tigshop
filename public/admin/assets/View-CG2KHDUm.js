import{d as L,i as x,C as J,bj as X,dF as B,dC as N,aa as j,q as Y,r as y,c as o,o as t,F as m,e,b as h,f as r,a0 as K,g as n,D as g,dw as ae,e4 as le,a as A,a1 as ie,j as p,w as l,du as ue,aN as Q,I as W,dN as re,_ as O,dt as ce,n as V,Q as de,A as pe}from"./index-CGYuOau0.js";import{u as _e}from"./config-DNllFJyR.js";import{i as q,u as G,r as H}from"./format-DFT-VJzO.js";import{g as me}from"./adminMsg-B0ORefAQ.js";import{l as he,M as ve,c as fe,p as ge,_ as ye,a as ke}from"./pageTabs-DhFiazHe.js";import{S as we}from"./SelectShop-CfOn5Q7n.js";import{u as be}from"./menus-twiYEIYr.js";import{l as Se}from"./logo_blue2-CgAHBmsI.js";import{u as R}from"./theme-pPmOEjl9.js";import"./config-DU8_t5BN.js";import"./index-B-GURfkM.js";import"./version-CpBOsX2d.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-CjXfTDg5.js";import"./vuedraggable.umd-_1km55l4.js";import"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import"./authority-PNyDJWKD.js";const xe={class:"page-top"},Ce={class:"page-top-warp"},Me={class:"top-bar-left"},$e={key:0,class:"head_logo"},Ie=["src"],Te=["src"],Ve={class:"top-bar-item wap-show",style:{display:"none"}},ze=["href"],Ue={key:1,class:"shop-tit"},qe={key:0,class:"label"},Ae={key:1,class:"label green"},Be={key:2},Le={class:"top-bar-item top-bar-search-warp"},Pe={class:"top-bar-search"},De={class:"search-menu-con"},Fe={class:"search-menu-list"},Ne=["onClick"],je={key:0,class:"empty"},Oe={class:"top-bar-right"},Re={class:"top-bar-item mr10"},Ee={class:"auth-img"},Ke=["src"],Qe={class:"top-bar-item openShop-btn"},We=["href"],Ge={class:"top-bar-item top-bar-user",id:"dropdown-memu"},He={class:"admin-user-warp"},Je={class:"top-bar-btn",href:"javascript:;"},Xe={key:0,class:"admin-user-photo"},Ye=["src"],Ze=["src"],et={key:1,class:"admin-user-photo"},tt=["src"],st=["src"],nt={class:"admin-user-name"},ot={class:"dropdown-memu top-bar-memu"},at={class:"entrance-list"},lt={class:"admin_exit"},it=L({__name:"pageTopBar",setup(P){const{themeInfo:C}=R(),v=x(localStorage.getItem("adminType")),i=J(),_=X(),k=_.licensedData,f=B(),w=x(""),b=x([]),c=x(!1),S=async $=>{try{const s=await me({keyword:w.value});b.value=s.item,w.value&&(c.value=!0)}catch(s){W.error(s.message)}},I=$=>{c.value=!1,w.value="",b.value=[],i.push({path:"/"+$})},z=()=>{w.value==""&&(c.value=!1)},D=()=>{c.value=!1},{logout:F,updateUserInfo:u}=N(),a=j(()=>N().userInfo),d=j(()=>N().shopInfo);x(0);const E=async()=>{try{const $=await fe(),s=_e();u(),s.updateConfig(),f.mainMenu=await be(),re.success({message:"缓存已清除",description:"缓存清除后可刷新页面更新效果"})}catch($){W.error($.message)}},Z=async()=>{F()},T=x(!1),ee=()=>{T.value=!0},te=()=>{T.value=!1};return Y(()=>{_._getLicensed()}),($,s)=>{const se=y("el-input"),U=y("router-link"),ne=y("a-dropdown"),oe=y("el-dialog");return t(),o(m,null,[e("div",xe,[e("div",Ce,[e("div",Me,[n(f).childMenuShow?(t(),o("div",$e,[n(C).navTheme==="light"?(t(),o("img",{key:0,class:"logo_img",src:n(k).admin_light_logo?n(q)(n(k).admin_light_logo):n(Se)},null,8,Ie)):r("",!0),n(C).navTheme==="dark"?(t(),o("img",{key:1,class:"logo_img",src:n(k).admin_light_logo?n(q)(n(k).admin_light_logo):n(he)},null,8,Te)):r("",!0)])):r("",!0),e("div",{class:"top-bar-item wap-show",onClick:s[0]||(s[0]=M=>n(f).menuActive=!n(f).menuActive)},s[3]||(s[3]=[e("span",{class:"open-menu-btn icon-zhankai iconfont"},null,-1)])),s[5]||(s[5]=e("div",{class:"top-bar-item wap-show"},[e("a",{class:"wap-refresh-btn icon-shuaxin iconfont",href:"javascript:;",onclick:"location.reload();"})],-1)),e("div",Ve,[e("a",{class:"wap-openShop-btn icon-wangdianwaibao iconfont",href:n(G)("/"),target:"_blank"},null,8,ze)]),v.value==="shop"?(t(),o("div",Ue,[e("h2",null,"当前店铺: "+g(d.value.shop_title),1),d.value.status===0?(t(),o("div",qe,g(d.value.status_text),1)):(t(),o("div",Ae,g(d.value.status_text),1))])):K((t(),o("div",Be,[e("div",Le,[e("div",Pe,[h(se,{modelValue:w.value,"onUpdate:modelValue":s[1]||(s[1]=M=>w.value=M),style:{width:"300px"},placeholder:"在这里查找功能，一键直达","prefix-icon":n(le),onInput:S,onBlur:z},null,8,["modelValue","prefix-icon"])])]),K(e("div",De,[s[4]||(s[4]=e("div",{class:"search-menu-title"},"搜索结果",-1)),e("div",Fe,[(t(!0),o(m,null,A(b.value,M=>(t(),o("div",{class:"menu-item",onClick:ht=>I(M.route_link)},[e("p",null,g(M.authority_name),1)],8,Ne))),256)),b.value.length<1?(t(),o("div",je,"没有搜索到栏目！")):r("",!0)])],512),[[ie,c.value]])])),[[n(ae),D]])]),e("div",Oe,[e("div",Re,[e("div",Ee,[v.value!=="shop"?(t(),p(U,{key:0,to:{path:"/setting/licensed/index"}},{default:l(()=>[e("img",{src:n(ue)(),style:{height:"25px","margin-top":"2px"}},null,8,Ke)]),_:1})):r("",!0)])]),h(ve),e("div",Qe,[e("a",{class:"top-bar-btn",href:n(G)("/"),target:"_blank"},s[6]||(s[6]=[e("i",{class:"iconfont icon-guanli"},null,-1),e("span",null,"查看店铺",-1)]),8,We)]),e("div",Ge,[h(ne,null,{overlay:l(()=>[e("div",ot,[e("div",at,[h(U,{to:{path:"/authority/account_editing/index"}},{default:l(()=>s[8]||(s[8]=[e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-gerenshezhi",style:{"font-size":"22px"}}),e("span",null,"管理账号")],-1)])),_:1}),e("p",{class:"entrance",onClick:E},s[9]||(s[9]=[e("i",{class:"iconfont icon-qingchuhuancun",style:{"font-size":"22px"}},null,-1),e("span",null,"清除缓存",-1)])),v.value==="shop"?(t(),p(U,{key:0,to:{path:"/merchant_setting/shop_team"}},{default:l(()=>s[10]||(s[10]=[e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-quanxian",style:{"font-size":"22px"}}),e("span",null,"店铺设置")],-1)])),_:1})):(t(),p(U,{key:1,to:{path:"/setting/config/base"}},{default:l(()=>s[11]||(s[11]=[e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-quanxian",style:{"font-size":"22px"}}),e("span",null,"后台设置")],-1)])),_:1}))]),e("div",null,[e("div",lt,[v.value==="shop"?(t(),o(m,{key:0},[e("a",{onClick:ee},s[12]||(s[12]=[e("span",null,"切换店铺",-1)])),s[13]||(s[13]=e("span",{style:{color:"#f0f2f5"}},"｜",-1))],64)):r("",!0),e("a",{onClick:Z},s[14]||(s[14]=[e("span",null,"退出登录",-1)]))])])])]),default:l(()=>[e("div",He,[e("a",Je,[v.value!=="shop"?(t(),o("span",Xe,[n(Q)(String(a.value.avatar))=="def"?(t(),o("img",{key:0,src:n(H)(a.value.avatar)},null,8,Ye)):(t(),o("img",{key:1,src:n(q)(a.value.avatar)},null,8,Ze))])):r("",!0),v.value=="shop"?(t(),o("span",et,[n(Q)(String(d.value.adminUserShop.avatar))=="def"?(t(),o("img",{key:0,src:n(H)(d.value.adminUserShop.avatar)},null,8,tt)):(t(),o("img",{key:1,src:n(q)(d.value.adminUserShop.avatar)},null,8,st))])):r("",!0),e("div",nt,g(/^1[3-9]\d{9}$/.test(a.value.username)?a.value.username.replace(/(\d{3})\d{4}/,"$1****"):a.value.username),1),s[7]||(s[7]=e("i",{class:"iconfont icon-xiala"},null,-1))])])]),_:1})])])])]),h(oe,{class:"page-top","show-close":!1,"z-index":"12",modelValue:T.value,"onUpdate:modelValue":s[2]||(s[2]=M=>T.value=M),width:"500px"},{default:l(()=>[T.value?(t(),p(we,{key:0,onClosePopup:te,isIndex:!0,username:a.value.username},null,8,["username"])):r("",!0)]),_:1},8,["modelValue"])],64)}}}),ut=O(it,[["__scopeId","data-v-f10a2e1f"]]),rt=L({__name:"pageContainer",setup(P){const C=ce();x(localStorage.getItem("adminType"));const v=B(),{themeInfo:i}=R();return(_,k)=>{const f=y("router-view");return t(),o(m,null,[k[0]||(k[0]=e("div",{class:"body-menu-mask"},null,-1)),e("div",{class:V(["main-warp",[n(v).childMenuShow?"child-menu-show":"child-menu-hide"]])},[e("div",{class:V(["page-grid-content",`admin-${n(i).navTheme}`])},[!_.$route.meta.is404&&n(i).isMultiLabel?(t(),p(ge,{key:0})):r("",!0),_.$route.meta.is404?r("",!0):(t(),p(ye,{key:1})),(t(),p(f,{key:n(C).routerKey})),_.$route.meta.is404?r("",!0):(t(),p(ke,{key:2}))],2)],2)],64)}}}),ct=O(rt,[["__scopeId","data-v-4d9682e3"]]),dt={class:"page_left_menu_content"},pt={class:"menu_list",ref:"menu"},_t=L({__name:"pageLeftMenu",setup(P){const{themeInfo:C}=R();X().licensedData;const i=B(),_=J(),k=B(),f=x(""),w=j(()=>k.mainMenu);Y(()=>{f.value=_.currentRoute.value.name});const b=c=>{window.innerWidth<=756?(c.blank?window.open("/"+c.route_link,"_blank"):_.push("/"+c.route_link),i.menuActive=!1):(c.blank?window.open("/"+c.route_link,"_blank"):_.push("/"+c.route_link),pe(),i.childMenuShow=!0)};return de(()=>{f.value=_.currentRoute.value.name}),(c,S)=>{const I=y("el-menu-item"),z=y("el-sub-menu"),D=y("el-menu"),F=y("perfect-scrollbar");return t(),o(m,null,[n(i).childMenuShow?(t(),o("div",{key:0,class:"body-menu-mask",onClick:S[0]||(S[0]=u=>n(i).childMenuShow=!n(i).childMenuShow)})):r("",!0),e("div",{class:V(["page_left_menu",[n(i).childMenuShow?"child-menu-show":"child-menu-hide"]])},[e("div",dt,[h(F,{class:"main-menu"},{default:l(()=>[e("div",pt,[h(D,{"default-active":f.value,collapse:!n(i).childMenuShow,"unique-opened":n(C).uniqueOpened},{default:l(()=>[(t(!0),o(m,null,A(w.value,u=>(t(),o(m,{key:u.authority_id},[u.children.length&&u.is_show?(t(),p(z,{key:0,index:u.authority_sn},{title:l(()=>[e("i",{class:V(u.authority_ico)},null,2),e("span",null,g(u.authority_name),1)]),default:l(()=>[(t(!0),o(m,null,A(u.children,a=>(t(),o(m,null,[a.children&&a.children.length&&a.is_show?(t(),p(z,{key:0,index:a.authority_sn},{title:l(()=>[e("span",null,g(a.authority_name),1)]),default:l(()=>[(t(!0),o(m,null,A(a.children,d=>(t(),p(I,{key:d.authority_id,index:d.authority_sn,onClick:E=>b(d)},{title:l(()=>[e("span",null,g(d.authority_name),1)]),_:2},1032,["index","onClick"]))),128))]),_:2},1032,["index"])):a.is_show?(t(),p(I,{key:1,index:a.authority_sn,onClick:d=>b(a)},{title:l(()=>[e("span",null,g(a.authority_name),1)]),_:2},1032,["index","onClick"])):r("",!0)],64))),256))]),_:2},1032,["index"])):u.is_show?(t(),p(I,{key:1,index:u.authority_sn,onClick:a=>b(u)},{title:l(()=>[e("i",{class:V(u.authority_ico)},null,2),e("span",null,g(u.authority_name),1)]),_:2},1032,["index","onClick"])):r("",!0)],64))),128))]),_:1},8,["default-active","collapse","unique-opened"])],512)]),_:1}),e("div",{class:"icon_menu",onClick:S[1]||(S[1]=u=>n(i).childMenuShow=!n(i).childMenuShow)},S[2]||(S[2]=[e("i",{class:"open-menu-btn icon-zhankai iconfont"},null,-1)]))])],2)],64)}}}),mt=O(_t,[["__scopeId","data-v-4dead473"]]),qt=L({__name:"View",setup(P){return(C,v)=>{const i=y("router-view");return t(),o(m,null,[h(ut),h(mt),h(ct,null,{default:l(()=>[h(i)]),_:1})],64)}}});export{qt as default};
