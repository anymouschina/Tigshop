/* empty css             */import"./index-6c62cf9b.js";import{P as D}from"./PopFormElm-61cd9b7d.js";import{_ as ce}from"./Switch.vue_vue_type_script_setup_true_lang-95245cd7.js";import{_ as G}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as re}from"./Pagination-8eb7b6b1.js";import{u as H,i as ue}from"./format-4e0206d3.js";import{u as _e}from"./config-9548fa9b.js";import{g as pe,u as x,r as me,a as ve,b as he}from"./product-689c7c1e.js";import{S as fe}from"./SelectBrand-cb32d59a.js";import{_ as ke}from"./SelectCategory.vue_vue_type_script_setup_true_lang-a47fadcd.js";import{d as be,j as g,I as ge,x as ye,r as m,o as a,c as u,e as t,F as J,a as Ce,b as o,w as s,f as d,h as n,K as $,n as P,G as h,k as _,H as k,p as Se,i as xe,_ as Ve}from"./index-7c2d2aef.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as qe}from"./SelectShop.vue_vue_type_script_setup_true_lang-a1d04369.js";import"./region-e0d291a6.js";import"./shopProductCategory-792e0c23.js";import Ae from"./ProductStockPop-66da8429.js";import{a as F,c as Q}from"./version-f7bce787.js";import{_ as B}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";import"./brand-995f2ca4.js";import"./category-7b076a22.js";import"./category-a8bd4d11.js";import"./time-290942a2.js";import"./shop-b8a8699a.js";import"./region-05802f67.js";const p=w=>(Se("data-v-ba19d231"),w=w(),xe(),w),Ue={class:"container"},$e={class:"content_wrapper"},Pe={class:"tabs flex"},we=["onClick"],Ie=["onClick"],ze=["onClick"],Oe=["onClick"],De=["onClick"],Fe={class:"lyecs-table-list-warp"},Be={class:"list-table-tool lyecs-search-warp"},Le={class:"advanced-search-warp list-table-tool-row"},Ee={class:"simple-form-warp"},Ne={class:"simple-form-field"},Te={class:"form-group"},je={class:"control-container"},Ke=p(()=>t("span",{class:"iconfont icon-chakan1"},null,-1)),Me={key:0,class:"simple-form-field"},Re={class:"form-group"},Ge=p(()=>t("label",{class:"control-label"},[t("span",null,"店铺：")],-1)),He={class:"control-container"},Je={class:"simple-form-field"},Qe={class:"form-group"},We=p(()=>t("label",{class:"control-label"},[t("span",null,"分类：")],-1)),Xe={class:"control-container"},Ye={class:"simple-form-field"},Ze={class:"form-group"},et=p(()=>t("label",{class:"control-label"},[t("span",null,"品牌：")],-1)),tt={class:"control-container"},st={class:"simple-form-field"},at={class:"form-group"},ot=p(()=>t("label",{class:"control-label"},[t("span",null,"类型：")],-1)),lt={class:"control-container"},nt={class:"simple-form-field"},it={class:"list-table-tool-row"},dt={class:"list-table-tool-col"},ct={key:6},rt=p(()=>t("div",{class:"list-table-tool-col"},null,-1)),ut={class:"table-container"},_t={class:"flex"},pt={key:0,class:"span-pic"},mt=["href"],vt=["src"],ht={class:"span-product-con"},ft={class:"span-product-name"},kt={key:0,class:"span-product-brand"},bt=p(()=>t("span",{class:"span-tit"},"商品：",-1)),gt={class:"span-con"},yt={key:1,class:"span-product-brand"},Ct=p(()=>t("span",{class:"span-tit"},"店铺：",-1)),St={class:"span-con green"},xt={key:2,class:"span-product-brand"},Vt=p(()=>t("span",{class:"span-tit"},"供应商：",-1)),qt={class:"span-con green"},At={key:3},Ut=p(()=>t("span",{class:"span-con green"},"【虚拟商品】",-1)),$t=[Ut],Pt=p(()=>t("span",{class:"span-tit"},"货号：",-1)),wt={class:"span-con"},It=p(()=>t("br",null,null,-1)),zt=p(()=>t("span",{class:"span-tit"},"售价：",-1)),Ot={class:"span-con"},Dt={class:"status-switch"},Ft={key:0},Bt={key:0,class:"red tips-hover",title:"{$goods.check_reason}"},Lt=p(()=>t("i",{class:"ico-font"},"",-1)),Et={key:1,class:"tips-hover gray",title:"{$goods.check_reason}"},Nt=p(()=>t("br",null,null,-1)),Tt={key:0},jt={key:1},Kt=p(()=>t("a",{class:"btn-link"},"详情",-1)),Mt=p(()=>t("a",{class:"btn-link"},"去处理",-1)),Rt=p(()=>t("a",{class:"btn-link"},"编辑",-1)),Gt=["href"],Ht=p(()=>t("span",{class:"iconfont-admin icon-gengduo1 btn-link"},null,-1)),Jt={class:"empty-warp"},Qt={key:0,class:"empty-bg"},Wt={key:0,class:"pagination-con"},Xt=be({__name:"List",setup(w){const W=_e(),N=g([]),V=g(!0),I=g(0),L=g(0),y=g([]),r=ge({page:1,size:W.pageSize,sort_field:"",sort_order:"",keyword:"",intro_type:"",is_delete:0,shop_id:-1,search_shop:0}),S=g(localStorage.getItem("adminType")),i=g(1),q=c=>{i.value=c,r.product_status=c>=1&&c<=3?1:c>=4&&c<=6?0:void 0,r.check_status=c>=1&&c<=4?1:c===5?0:c===6?2:void 0,r.shop_id=c===2?0:-1,r.is_delete=c===7?1:0,r.search_shop=c===3?1:0,Object.keys(r).forEach(l=>{r[l]===void 0&&delete r[l]}),f()},X=async(c,l)=>{try{const A=await ve(c,{product_id:l});$.success(A.message),f()}catch(A){$.error(A.message)}},Y=g([{label:"出售中的商品",value:1},{label:"自营商品",value:2},{label:"店铺商品",value:3},{label:"已下架商品",value:4},{label:"商品回收站",value:7},{label:"待审核商品",value:5},{label:"审核失败商品",value:6}]),T=g(),Z=c=>{T.value.SelectShopChange(c)},f=async()=>{V.value=!0;try{i.value===1&&(r.product_status=1,r.check_status=1);const c=await pe({...r});N.value=c.filter_result,I.value=c.total,L.value=c.waiting_checked_count}catch(c){$.error(c.message)}finally{V.value=!1}};ye(()=>{f()});const j=()=>{f()},ee=({prop:c,order:l})=>{r.sort_field=c,r.sort_order=l=="ascending"?"asc":l=="descending"?"desc":"",f()},z=async c=>{try{const l=await he(c,{ids:y.value});$.success(l.message),await f()}catch(l){$.error(l.message)}},te=c=>{y.value=c.map(l=>l.product_id)};return(c,l)=>{const A=m("el-badge"),b=m("el-button"),se=m("el-input"),O=m("el-option"),ae=m("el-select"),K=m("router-link"),U=m("el-popconfirm"),M=m("el-space"),oe=m("el-form"),C=m("el-table-column"),E=m("el-divider"),R=m("el-dropdown-item"),le=m("el-dropdown-menu"),ne=m("el-dropdown"),ie=m("el-table"),de=m("a-spin");return a(),u("div",Ue,[t("div",$e,[t("div",Pe,[(a(!0),u(J,null,Ce(Y.value,e=>(a(),u(J,null,[e.value==2&&S.value!="shop"&&d(F)()?(a(),u("div",{key:0,class:P(["item",i.value==e.value?"active":""]),onClick:v=>q(e.value)},h(e.label),11,we)):n("",!0),e.value==3&&S.value!="shop"&&d(F)()?(a(),u("div",{key:1,class:P(["item",i.value==e.value?"active":""]),onClick:v=>q(e.value)},h(e.label),11,Ie)):n("",!0),e.value==5&&S.value==="admin"&&d(F)()?(a(),_(A,{key:2,value:L.value,color:"#f33",offset:[-5,5],hidden:L.value===0},{default:s(()=>[t("div",{class:P(["item",i.value==e.value?"active":""]),onClick:v=>q(e.value)},h(e.label),11,ze)]),_:2},1032,["value","hidden"])):n("",!0),e.value==6&&S.value==="shop"?(a(),u("div",{key:3,class:P(["item",i.value==e.value?"active":""]),onClick:v=>q(e.value)},h(e.label),11,Oe)):e.value!=2&&e.value!=3&&e.value!=5&&e.value!=6?(a(),u("div",{key:4,class:P(["item",i.value==e.value?"active":""]),onClick:v=>q(e.value)},h(e.label),11,De)):n("",!0)],64))),256))]),t("div",Fe,[t("div",Be,[o(oe,{model:r,name:"form"},{default:s(()=>[t("div",Le,[t("div",Ee,[t("div",Ne,[t("div",Te,[t("div",je,[o(se,{modelValue:r.keyword,"onUpdate:modelValue":l[0]||(l[0]=e=>r.keyword=e),name:"keyword",placeholder:"输入商品名称/货号"},{append:s(()=>[o(b,{onClick:j},{default:s(()=>[Ke]),_:1})]),_:1},8,["modelValue"])])])]),i.value!==2&&S.value!="shop"&&d(F)()?(a(),u("div",Me,[t("div",Re,[Ge,t("div",He,[o(d(qe),{modelValue:r.shop_id,"onUpdate:modelValue":l[1]||(l[1]=e=>r.shop_id=e),onOnChange:Z},null,8,["modelValue"])])])])):n("",!0),t("div",Je,[t("div",Qe,[We,t("div",Xe,[o(d(ke),{ref_key:"selectCategoryRef",ref:T,category_id:r.category_id,"onUpdate:category_id":l[2]||(l[2]=e=>r.category_id=e)},null,8,["category_id"])])])]),t("div",Ye,[t("div",Ze,[et,t("div",tt,[o(d(fe),{brand_id:r.brand_id,"onUpdate:brand_id":l[3]||(l[3]=e=>r.brand_id=e)},null,8,["brand_id"])])])]),t("div",st,[t("div",at,[ot,t("div",lt,[o(ae,{modelValue:r.intro_type,"onUpdate:modelValue":l[4]||(l[4]=e=>r.intro_type=e),clearable:""},{default:s(()=>[o(O,{label:"精品",value:"is_best"}),o(O,{label:"热销",value:"is_hot"}),o(O,{label:"新品",value:"is_new"}),o(O,{label:"秒杀",value:"is_promote"})]),_:1},8,["modelValue"])])])]),t("div",nt,[o(b,{type:"primary",onClick:j},{default:s(()=>[k("搜索")]),_:1})])])]),t("div",it,[t("div",dt,[o(M,null,{default:s(()=>[o(d(B),{params:{act:"add"},isDrawer:"",delayed:2e4,path:"product/product/Info",title:"添加商品",width:"900px",onOkCallback:f},{default:s(()=>[o(b,{type:"primary"},{default:s(()=>[k("添加商品")]),_:1})]),_:1}),d(Q)()&&S.value==="admin"?(a(),_(K,{key:0,to:{path:"/setting/multilingual/translationContent/list",query:{type:"product"}}},{default:s(()=>[o(b,null,{default:s(()=>[k("批量翻译商品")]),_:1})]),_:1})):n("",!0),d(Q)()&&S.value==="shop"?(a(),_(K,{key:1,to:{path:"/merchant_setting/multilingual/translationContent/list",query:{type:"product"}}},{default:s(()=>[o(b,null,{default:s(()=>[k("批量翻译商品")]),_:1})]),_:1})):n("",!0),i.value==4||i.value==1?(a(),_(U,{key:2,title:"您确认要批量移入回收站吗？",onConfirm:l[5]||(l[5]=e=>z("recycle"))},{reference:s(()=>[o(b,{disabled:y.value.length===0},{default:s(()=>[k("批量移入回收站")]),_:1},8,["disabled"])]),_:1})):n("",!0),i.value==7?(a(),_(U,{key:3,title:"您确认要批量还原吗？",onConfirm:l[6]||(l[6]=e=>z("restore"))},{reference:s(()=>[o(b,{disabled:y.value.length===0},{default:s(()=>[k("批量还原")]),_:1},8,["disabled"])]),_:1})):n("",!0),i.value==4?(a(),_(U,{key:4,title:"您确认要批量上架吗？",onConfirm:l[7]||(l[7]=e=>z("up"))},{reference:s(()=>[o(b,{disabled:y.value.length===0},{default:s(()=>[k("批量上架")]),_:1},8,["disabled"])]),_:1})):n("",!0),i.value==1?(a(),_(U,{key:5,title:"您确认要批量下架吗？",onConfirm:l[8]||(l[8]=e=>z("down"))},{reference:s(()=>[o(b,{disabled:y.value.length===0},{default:s(()=>[k("批量下架")]),_:1},8,["disabled"])]),_:1})):n("",!0),y.value.length>0?(a(),u("span",ct,[k(" 已选择："),t("b",null,h(y.value.length),1),k(" 项 ")])):n("",!0)]),_:1})]),rt])]),_:1},8,["model"])]),t("div",ut,[o(de,{spinning:V.value},{default:s(()=>[o(ie,{data:N.value,total:I.value,"row-key":"product_id",onSelectionChange:te,onSortChange:ee},{empty:s(()=>[t("div",Jt,[V.value?n("",!0):(a(),u("div",Qt,"暂无数据"))])]),default:s(()=>[o(C,{type:"selection",width:"32"}),o(C,{label:"商品名称",prop:"product_id",sortable:"custom","min-width":320},{default:s(({row:e})=>[t("div",_t,[e.pic_thumb?(a(),u("div",pt,[t("a",{href:d(H)({path:"product",sn:e.product_sn}),target:"_blank"},[t("img",{src:d(ue)(e.pic_thumb),height:"50",width:"50",alt:""},null,8,vt)],8,mt)])):n("",!0),t("div",ht,[t("div",ft,[o(d(D),{max:100,"org-value":e.product_name,"onUpdate:orgValue":v=>e.product_name=v,params:{id:e.product_id,field:"product_name"},requestApi:d(x),label:"商品名称",type:"textarea"},{default:s(()=>[t("div",null,h(e.product_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),e.brand_name?(a(),u("p",kt,[bt,t("span",gt,h(e.brand_name),1)])):n("",!0),e.shopSimple?(a(),u("p",yt,[Ct,t("span",St,h(e.shopSimple.shop_title),1)])):n("",!0),e.suppliers_name?(a(),u("p",xt,[Vt,t("span",qt,h(e.suppliers_name),1)])):n("",!0),e.type===2?(a(),u("p",At,$t)):n("",!0)])])]),_:1}),o(C,{width:200,label:"商品信息"},{default:s(({row:e})=>[Pt,t("div",wt,[o(d(D),{"org-value":e.product_sn,"onUpdate:orgValue":v=>e.product_sn=v,params:{id:e.product_id,field:"product_sn"},requestApi:d(x),label:"货号",max:20},{default:s(()=>[t("div",null,h(e.product_sn||"--"),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),It,zt,t("div",Ot,[o(d(D),{extra:"请输入商品价格","org-value":e.product_price,"onUpdate:orgValue":v=>e.product_price=v,params:{id:e.product_id,field:"product_price"},requestApi:d(x),label:"售价"},{default:s(()=>[t("div",null,h(e.product_price||0),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])])]),_:1}),i.value!=7?(a(),_(C,{key:0,width:100,label:"是否上架"},{default:s(({row:e})=>[t("div",Dt,[e.check_status==1?(a(),u("div",Ft,[o(d(ce),{checked:e.product_status,"onUpdate:checked":v=>e.product_status=v,params:{id:e.product_id,field:"product_status"},requestApi:d(x)},null,8,["checked","onUpdate:checked","params","requestApi"])])):n("",!0)])]),_:1})):n("",!0),i.value===5||i.value===6?(a(),_(C,{key:1,width:100,label:"审核状态"},{default:s(({row:e})=>[e.check_status===2?(a(),u("span",Bt,[k("审核失败 "),Lt])):n("",!0),e.check_status===0?(a(),u("span",Et,"审核中")):n("",!0),Nt]),_:1})):n("",!0),i.value!=7?(a(),_(C,{key:2,width:100,label:"库存",prop:"product_stock",sortable:"custom"},{default:s(({row:e})=>[e.product_exist?(a(),u("a",Tt,h(e.product_stock),1)):(a(),u("div",jt,[V.value?n("",!0):(a(),_(Ae,{key:0,params:{id:e.product_id,product_info:e},requestApi:d(x),onCallback:f},{default:s(()=>[t("div",null,h(e.product_stock),1)]),_:2},1032,["params","requestApi"]))]))]),_:1})):n("",!0),i.value!=7?(a(),_(C,{key:3,width:100,label:"排序",prop:"sort_order",sortable:"custom"},{default:s(({row:e})=>[o(d(D),{"org-value":e.sort_order,"onUpdate:orgValue":v=>e.sort_order=v,params:{id:e.product_id,field:"sort_order"},requestApi:d(x),label:"排序",type:"input"},{default:s(()=>[t("div",null,h(e.sort_order),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1})):n("",!0),o(C,{width:140,fixed:"right",label:"操作"},{default:s(({row:e})=>[o(M,{size:0},{default:s(()=>[i.value==5&&e.check_status===0?(a(),_(d(B),{key:0,maskClose:!1,params:{act:"detail",id:e.product_id,examine:1},showClose:!1,showOnOk:!1,dialogClass:"noPadding",isDrawer:"",path:"product/product/Info",title:"商品详情",width:"900px",onOkCallback:f},{default:s(()=>[Kt]),_:2},1032,["params"])):n("",!0),i.value==5&&e.check_status===0?(a(),_(E,{key:1,direction:"vertical"})):n("",!0),i.value==5&&e.check_status===0?(a(),_(d(B),{key:2,maskClose:!1,params:{act:"detail",id:e.product_id},dialogClass:"noPadding",isDrawer:"",path:"product/product/Examine",title:"商品审核",width:"600px",onOkCallback:f},{default:s(()=>[Mt]),_:2},1032,["params"])):n("",!0),i.value!=7&&i.value!=5&&i.value!=6?(a(),_(d(B),{key:3,maskClose:!1,params:{act:"detail",id:e.product_id},dialogClass:"noPadding",isDrawer:"",path:"product/product/Info",title:"编辑商品",width:"900px",onOkCallback:f},{default:s(()=>[Rt]),_:2},1032,["params"])):n("",!0),i.value!=7&&i.value!=5&&i.value!=6?(a(),_(E,{key:4,direction:"vertical"})):n("",!0),i.value!=7&&i.value!=5&&i.value!=6?(a(),u("a",{key:5,class:"btn-link",href:d(H)({path:"product",sn:e.product_sn}),target:"_blank"},"查看",8,Gt)):n("",!0),i.value!=7&&i.value!=5&&i.value!=6?(a(),_(E,{key:6,direction:"vertical"})):n("",!0),i.value===7?(a(),_(d(G),{key:7,params:{id:e.product_id,field:"is_delete",val:0},requestApi:d(x),title:"确定还原该商品吗？",onAfterDelete:f},{default:s(()=>[k(" 还原 ")]),_:2},1032,["params","requestApi"])):n("",!0),i.value!=7?(a(),_(ne,{key:8,trigger:"hover","hide-on-click":!1},{dropdown:s(()=>[o(le,null,{default:s(()=>[o(R,null,{default:s(()=>[o(d(G),{params:{id:e.product_id,is_delete:1},requestApi:d(me),title:"确定把该商品移入回收站吗？",onAfterDelete:f},{default:s(()=>[k(" 移入回收站 ")]),_:2},1032,["params","requestApi"])]),_:2},1024),o(R,null,{default:s(()=>[o(U,{title:"确定复制?",onConfirm:v=>X("copy",e.product_id)},{reference:s(()=>[o(b,{style:{width:"100%"},link:"",type:"primary"},{default:s(()=>[k("复制")]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:s(()=>[Ht]),_:2},1024)):n("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),I.value>0?(a(),u("div",Wt,[o(d(re),{page:r.page,"onUpdate:page":l[9]||(l[9]=e=>r.page=e),size:r.size,"onUpdate:size":l[10]||(l[10]=e=>r.size=e),total:I.value,onCallback:f},null,8,["page","size","total"])])):n("",!0)])])])])}}});const Us=Ve(Xt,[["__scopeId","data-v-ba19d231"]]);export{Us as default};
