import{d as I,i as g,G as N,q as F,c as v,e as s,b as o,w as a,L,g as d,f as w,E as p,D as m,I as k,r as _,o as h}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{P as $}from"./PopFormElm-DSof3F4x.js";import{_ as E}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as K}from"./Pagination-yOfjsBuR.js";import{u as O}from"./config-DNllFJyR.js";import{g as G,b as M,u as j,d as H}from"./shippingTpl-CX3c57UO.js";import{_ as S}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const J={class:"container"},Q={class:"content_wrapper"},R={class:"lyecs-table-list-warp"},W={class:"list-table-tool lyecs-search-warp"},X={class:"advanced-search-warp list-table-tool-row"},Y={class:"simple-form-warp"},Z={class:"simple-form-field"},ee={class:"form-group"},te={class:"control-container"},se={class:"simple-form-field"},oe={class:"form-group"},ae={class:"control-container"},ie={class:"simple-form-field"},le={class:"form-group"},ne={class:"control-container"},pe={key:0},re={class:"table-container"},de={class:"empty-warp"},_e={key:0,class:"empty-bg"},ce={key:0,class:"pagination-con"},Ve=I({__name:"List",setup(ue){const V=O(),C=g([]),c=g(!0),f=g(0),u=g([]),l=N({page:1,size:V.get("page_size"),sort_field:"",sort_order:"",keyword:""}),n=async()=>{c.value=!0;try{const i=await G({...l});C.value=i.filter_result,f.value=i.total}catch(i){k.error(i.message)}finally{c.value=!1}};F(()=>{n()});const b=()=>{n()},x=({prop:i,order:e})=>{l.sort_field=i,l.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",n()},z=async i=>{try{const e=await M(i,{ids:u.value});k.success(e.message),n()}catch(e){k.error(e.message)}},T=i=>{u.value=i.map(e=>e.shipping_tpl_id)};return(i,e)=>{const y=_("el-button"),q=_("el-input"),A=_("el-popconfirm"),r=_("el-table-column"),D=_("el-divider"),P=_("el-table"),U=_("a-spin");return h(),v("div",J,[s("div",Q,[s("div",R,[s("div",W,[s("div",X,[s("div",Y,[s("div",Z,[s("div",ee,[s("div",te,[o(q,{modelValue:l.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>l.keyword=t),name:"keyword",placeholder:"输入模板名称",onKeyup:L(b,["enter"]),clearable:"",onClear:b},{append:a(()=>[o(y,{onClick:b},{default:a(()=>e[4]||(e[4]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),s("div",se,[s("div",oe,[s("div",ae,[o(d(S),{params:{act:"add"},isDrawer:"",path:"setting/shippingTpl/Info",title:"添加运费模板",width:"900px",onOkCallback:n},{default:a(()=>[o(y,{type:"primary"},{default:a(()=>e[5]||(e[5]=[p("添加运费模板")])),_:1})]),_:1})])])]),s("div",ie,[s("div",le,[s("div",ne,[o(A,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=t=>z("del"))},{reference:a(()=>[o(y,{disabled:u.value.length===0},{default:a(()=>e[6]||(e[6]=[p("批量删除")])),_:1},8,["disabled"])]),_:1}),u.value.length>0?(h(),v("span",pe,[e[7]||(e[7]=p(" 已选择：")),s("b",null,m(u.value.length),1),e[8]||(e[8]=p(" 项 "))])):w("",!0)])])])])])]),s("div",re,[o(U,{spinning:c.value},{default:a(()=>[o(P,{data:C.value,loading:c.value,total:f.value,"row-key":"shipping_tpl_id",onSelectionChange:T,onSortChange:x},{empty:a(()=>[s("div",de,[c.value?w("",!0):(h(),v("div",_e,"暂无数据"))])]),default:a(()=>[o(r,{type:"selection",width:"32"}),o(r,{label:"模板名称"},{default:a(({row:t})=>[o(d($),{"org-value":t.shipping_tpl_name,"onUpdate:orgValue":B=>t.shipping_tpl_name=B,max:10,params:{id:t.shipping_tpl_id,field:"shipping_tpl_name"},requestApi:d(j),label:"模板名称",type:"input"},{default:a(()=>[s("div",null,m(t.shipping_tpl_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(r,{label:"是否包邮",prop:"is_free"},{default:a(({row:t})=>[p(m(t.is_free===0?"自定义运费":"卖家承担运费"),1)]),_:1}),o(r,{label:"计价方式",prop:"is_support_cod"},{default:a(({row:t})=>[p(m(t.pricing_type===1?"按件数":"按重量"),1)]),_:1}),o(r,{label:"发货时间",prop:"shipping_time",sortable:"custom"}),o(r,{label:"是否默认",prop:"is_support_cod"},{default:a(({row:t})=>[p(m(t.is_default===1?"是":"--"),1)]),_:1}),o(r,{width:150,fixed:"right",label:"操作"},{default:a(({row:t})=>[o(d(S),{params:{act:"detail",id:t.shipping_tpl_id},isDrawer:"",path:"setting/shippingTpl/Info",title:"编辑运费模板",width:"900px",onOkCallback:n},{default:a(()=>e[9]||(e[9]=[s("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(D,{direction:"vertical"}),o(d(E),{params:{id:t.shipping_tpl_id},requestApi:d(H),onAfterDelete:n},{default:a(()=>e[10]||(e[10]=[p("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),f.value>0?(h(),v("div",ce,[o(d(K),{page:l.page,"onUpdate:page":e[2]||(e[2]=t=>l.page=t),size:l.size,"onUpdate:size":e[3]||(e[3]=t=>l.size=t),total:f.value,onCallback:n},null,8,["page","size","total"])])):w("",!0)])])])])}}});export{Ve as default};
