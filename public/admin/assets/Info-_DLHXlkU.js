import{d as N,i as c,C as D,s as q,q as A,r,c as L,o as g,e as w,j as U,f as j,b as o,w as l,a0 as E,E as F,a1 as I,I as p}from"./index-CGYuOau0.js";import{a as M,c as O}from"./adminRole-Bv-dw8SG.js";import T from"./AuthoritySelect-yADIRE1h.js";import"./authority-PNyDJWKD.js";const z={class:"container"},G={class:"content_wrapper"},H={class:"lyecs-form-table"},X=N({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:h,emit:k}){const i=k,s=V,u=c(!0),f=D().currentRoute.value.query,d=c(s.isDialog?s.act:String(f.act)),_=c(s.isDialog?s.id:Number(f.id)),C=d.value==="add"?"create":"update",v=q(),e=c({}),R=async()=>{try{const t=await M(d.value,{id:_.value});Object.assign(e.value,t.item)}catch(t){p.error(t.message),i("close")}finally{u.value=!1}};A(()=>{d.value==="detail"?R():u.value=!1});const b=async()=>{await v.value.validate();try{i("update:confirmLoading",!0);const t=await O(C,{id:_.value,...e.value});i("submitCallback",t),p.success(t.message)}catch(t){p.error(t.message)}finally{i("update:confirmLoading",!1)}};return h({onFormSubmit:()=>{b()}}),(t,a)=>{const y=r("el-input"),m=r("el-form-item"),S=r("el-button"),x=r("el-form"),B=r("a-spin");return g(),L("div",z,[w("div",G,[w("div",H,[u.value?j("",!0):(g(),U(x,{key:0,ref_key:"formRef",ref:v,model:e.value,"label-width":"auto"},{default:l(()=>[o(m,{rules:[{required:!0,message:"权限组名称不能为空!"}],label:"权限组名称",prop:"role_name"},{default:l(()=>[o(y,{modelValue:e.value.role_name,"onUpdate:modelValue":a[0]||(a[0]=n=>e.value.role_name=n)},null,8,["modelValue"])]),_:1}),o(m,{label:"权限组描述",prop:"role_desc"},{default:l(()=>[o(y,{modelValue:e.value.role_desc,"onUpdate:modelValue":a[1]||(a[1]=n=>e.value.role_desc=n),row:"3",type:"textarea"},null,8,["modelValue"])]),_:1}),o(m,{label:"",prop:"authority_list"},{default:l(()=>[o(T,{modelValue:e.value.authority_list,"onUpdate:modelValue":a[2]||(a[2]=n=>e.value.authority_list=n)},null,8,["modelValue"])]),_:1}),E(o(m,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[o(S,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:b},{default:l(()=>a[3]||(a[3]=[F("提交")])),_:1},512)]),_:1},512),[[I,!s.isDialog]])]),_:1},8,["model"])),o(B,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{X as default};
