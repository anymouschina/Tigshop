import{d as X,i as f,C as S,s as Y,q as Z,r as b,c as v,o as i,e as l,b as a,j as c,f as d,w as t,F as m,D as o,E as D,g as _,a as ee,I as N,aT as ae,_ as te}from"./index-DrbzVNl6.js";import{c as le,e as se}from"./apply-B51xIgTP.js";import{i as p}from"./format-CRgx78oe.js";import{S as P}from"./StatusDot-eKxl7wC-.js";import{M as $}from"./MobileCard-BSBggTtf.js";const oe={class:"container"},ie={class:"content_wrapper"},ne={class:"lyecs-form-table"},ue={class:"width100"},de={class:"width100"},ce={class:"width100"},re={class:"width100"},ve={class:"width100"},me={class:"width100"},_e={class:"width100"},pe={class:"width100"},be={class:"width100"},he={class:"width100"},fe={class:"width100"},ye={class:"width100"},De={class:"width100"},ke={class:"width100"},ge={class:"width100"},we={class:"width100"},Ce={class:"width100"},Te={class:"width100"},Ve={class:"width100"},Ne={class:"width100"},Ue={class:"width100"},Ie={class:"width100"},Pe={class:"width100"},xe={class:"width100"},Be={class:"width100"},Le={class:"width100"},Re={class:"width100"},Ae={class:"width100"},Oe={class:"width100"},Se={class:"width100"},$e={class:"width100"},ze={class:"width100"},Ee={class:"width100"},Me={class:"width100"},qe={class:"width100"},Fe={class:"width100"},je={class:"width100"},Ke={class:"width100"},Ge={class:"width100"},He={class:"image"},Je=X({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(z,{emit:E}){const k=E,h=f("sm"),M=r=>{h.value=r},T=z,V=f(!0),q=S(),x=S().currentRoute.value.query,U=f(T.isDialog?T.act:String(x.act)),B=f(T.isDialog?T.id:Number(x.id));U.value;const L=Y(),e=f({}),F=async()=>{try{const r=await le(U.value,{id:B.value});Object.assign(e.value,r)}catch(r){N.error(r.message),k("close")}finally{V.value=!1}},j=f([{value:1,label:"大陆身份证"},{value:2,label:"护照（限境外人士）"},{value:3,label:"来往内地通行证（中国香港居民）"},{value:4,label:"来往内地通行证（中国澳门居民）"},{value:5,label:"来往大陆通行证（中国台湾居民）"}]);Z(()=>{U.value==="detail"?F():V.value=!1});const R=async r=>{await L.value.validate();try{if(r==20&&!e.value.auditRemark){N.error("请输入审核备注");return}k("update:confirmLoading",!0);const n=await se({merchantApplyId:B.value,status:r,auditRemark:e.value.auditRemark});if(r==10){K(n);return}k("submitCallback",n),N.success("提交成功")}catch(n){N.error(n.message)}finally{k("update:confirmLoading",!1)}},K=r=>{ae.confirm("入驻申请已通过，系统已为用户自动创建商户","提示",{confirmButtonText:"前往商户列表",cancelButtonText:"取消",type:"success"}).then(()=>{q.push({path:"/adminMerchant/list"}),k("submitCallback",r)}).catch(()=>{k("submitCallback",r)})},A=f(""),I=f(!1),g=r=>{A.value=r,I.value=!0};return(r,n)=>{const w=b("el-tab-pane"),G=b("el-tabs"),s=b("el-form-item"),y=b("el-image"),O=b("el-button"),H=b("TigInput"),J=b("el-form"),Q=b("a-spin"),W=b("el-dialog");return i(),v(m,null,[l("div",oe,[l("div",ie,[l("div",ne,[a(G,{modelValue:h.value,"onUpdate:modelValue":n[0]||(n[0]=u=>h.value=u),class:"lyecs-tabs","tab-position":"top",onTabChange:M},{default:t(()=>[(i(),c(w,{key:1,label:"基础信息",name:"sm"})),e.value.type==2?(i(),c(w,{key:2,label:"企业信息",name:"company"})):d("",!0),(i(),c(w,{key:3,label:e.value.type==1?"个人信息":"法人代表信息",name:"base"},null,8,["label"])),(i(),c(w,{key:4,label:"商户信息",name:"merchant"})),(i(),c(w,{key:5,label:"店铺信息",name:"shop"}))]),_:1},8,["modelValue"]),V.value?d("",!0):(i(),c(J,{key:0,ref_key:"formRef",ref:L,model:e.value,"label-width":"auto"},{default:t(()=>[h.value=="sm"?(i(),v(m,{key:0},[a(s,{label:"预期店铺名称"},{default:t(()=>[l("div",ue,o(e.value.shopData.shopTitle),1)]),_:1}),a(s,{label:"入驻资质",prop:"status"},{default:t(()=>[l("div",de,o(e.value.type==1?"个人入驻":"企业入驻"),1)]),_:1}),e.value.type==1?(i(),v(m,{key:0},[],64)):d("",!0),e.value.type==2?(i(),c(s,{key:1,label:"企业名称"},{default:t(()=>[l("div",ce,o(e.value.baseData.companyName),1)]),_:1})):d("",!0),a(s,{label:"联系人姓名"},{default:t(()=>[l("div",re,o(e.value.merchantData.contactName),1)]),_:1}),a(s,{label:"联系人手机"},{default:t(()=>[l("div",ve,[a($,{mobile:e.value.merchantData.contactPhone},null,8,["mobile"])])]),_:1}),a(s,{label:"联系人邮箱"},{default:t(()=>[l("div",me,o(e.value.merchantData.contactEmail),1)]),_:1}),a(s,{label:"审核结果"},{default:t(()=>[l("div",_e,[l("div",null,[e.value.status==1?(i(),c(P,{key:0,flicker:!0})):d("",!0),e.value.status==10?(i(),c(P,{key:1,color:"#52c41a",flicker:!0})):d("",!0),e.value.status==20?(i(),c(P,{key:2,color:"#f5222d",flicker:!1})):d("",!0),D(" "+o(e.value.statusText),1)])])]),_:1}),e.value.status==20?(i(),c(s,{key:2,label:"拒绝原因"},{default:t(()=>[l("div",pe,o(e.value.auditRemark),1)]),_:1})):d("",!0)],64)):d("",!0),h.value=="company"?(i(),v(m,{key:1},[a(s,{label:"企业名称"},{default:t(()=>[l("div",be,o(e.value.baseData.companyName),1)]),_:1}),a(s,{label:"注册地址"},{default:t(()=>[l("div",he,o(e.value.baseData.licenseAddrProvinceName)+" "+o(e.value.baseData.businessLicenseAddress),1)]),_:1}),a(s,{label:"经营范围"},{default:t(()=>[l("div",fe,o(e.value.baseData.businessScope),1)]),_:1}),a(s,{label:"统一社会信用代码"},{default:t(()=>[l("div",ye,o(e.value.baseData.businessLicenseId),1)]),_:1}),a(s,{label:"营业期限"},{default:t(()=>[l("div",De,[e.value.baseData.operatingTermType==1?(i(),v(m,{key:0},[D(o(e.value.baseData.operatingTermTypeDate[0]+" ～  "+e.value.baseData.operatingTermTypeDate[1]),1)],64)):(i(),v(m,{key:1},[D(o(e.value.baseData.operatingTermTypeEnd)+" ～长期 ",1)],64))])]),_:1})],64)):d("",!0),h.value=="base"?(i(),v(m,{key:2},[a(s,{label:e.value.type==1?"个人姓名":"法定代表人姓名"},{default:t(()=>[l("div",ke,o(e.value.baseData.corporateName),1)]),_:1},8,["label"]),a(s,{label:"证件类型"},{default:t(()=>{var u;return[l("div",ge,o(((u=j.value.find(C=>C.value===e.value.baseData.documentType))==null?void 0:u.label)||""),1)]}),_:1}),a(s,{label:"证件号码"},{default:t(()=>[l("div",we,o(e.value.baseData.documentNumber),1)]),_:1}),a(s,{label:"性别"},{default:t(()=>[l("div",Ce,o(e.value.baseData.sex==1?"男":"女"),1)]),_:1}),a(s,{label:"居住地址"},{default:t(()=>[l("div",Te,o(e.value.baseData.residentialAddress),1)]),_:1}),a(s,{label:"证件有效期"},{default:t(()=>[l("div",Ve,[e.value.baseData.certificateValidityPeriod==1?(i(),v(m,{key:0},[D(o(e.value.baseData.certificateValidityPeriodDate[0]+" ～ "+e.value.baseData.certificateValidityPeriodDate[1]),1)],64)):(i(),v(m,{key:1},[D(o(e.value.baseData.certificateValidityPeriodEnd)+" ～ 长期 ",1)],64))])]),_:1}),a(s,{label:"证件照正面"},{default:t(()=>[l("div",Ne,[a(y,{src:_(p)(e.value.baseData.frontOfPhoto[0].picUrl),class:"image-size",fit:"cover",onClick:n[1]||(n[1]=u=>g(_(p)(e.value.baseData.frontOfPhoto[0].picUrl)))},null,8,["src"])])]),_:1}),a(s,{label:"证件照反面"},{default:t(()=>[l("div",Ue,[a(y,{src:_(p)(e.value.baseData.backOfPhoto[0].picUrl),class:"image-size",fit:"cover",onClick:n[2]||(n[2]=u=>g(_(p)(e.value.baseData.backOfPhoto[0].picUrl)))},null,8,["src"])])]),_:1}),e.value.baseData.supplementaryInformation.length>0?(i(),c(s,{key:0,label:"补充信息"},{default:t(()=>[l("div",Ie,[(i(!0),v(m,null,ee(e.value.baseData.supplementaryInformation,u=>(i(),c(y,{src:_(p)(u.picUrl),class:"image-size",fit:"cover",onClick:C=>g(_(p)(u.picUrl))},null,8,["src","onClick"]))),256))])]),_:1})):d("",!0)],64)):d("",!0),h.value=="merchant"?(i(),v(m,{key:3},[a(s,{label:"商户名称"},{default:t(()=>[l("div",Pe,o(e.value.merchantData.merchantName),1)]),_:1}),e.value.type==1?(i(),v(m,{key:0},[a(s,{label:"持卡人"},{default:t(()=>[l("div",xe,o(e.value.baseData.corporateName),1)]),_:1}),a(s,{label:"开户银行"},{default:t(()=>[l("div",Be,o(e.value.merchantData.bankDeposit),1)]),_:1}),a(s,{label:"开户支行"},{default:t(()=>[l("div",Le,o(e.value.merchantData.bankBranch),1)]),_:1}),a(s,{label:"银行卡号"},{default:t(()=>[l("div",Re,o(e.value.merchantData.bankCard),1)]),_:1})],64)):d("",!0),e.value.type==2?(i(),v(m,{key:1},[a(s,{label:"对公账户"},{default:t(()=>[l("div",Ae,o(e.value.baseData.companyName),1)]),_:1}),a(s,{label:"开户银行"},{default:t(()=>[l("div",Oe,o(e.value.merchantData.bankDeposit),1)]),_:1}),a(s,{label:"开户支行"},{default:t(()=>[l("div",Se,o(e.value.merchantData.bankBranch),1)]),_:1}),a(s,{label:"对公银行账号"},{default:t(()=>[l("div",$e,o(e.value.merchantData.bankCard),1)]),_:1}),a(s,{label:"开户许可证"},{default:t(()=>{var u;return[l("div",ze,[((u=e.value.merchantData.accountOpeningPermit)==null?void 0:u.length)>0?(i(),c(y,{key:0,src:_(p)(e.value.merchantData.accountOpeningPermit[0].picUrl),class:"image-size",fit:"cover",onClick:n[3]||(n[3]=C=>g(_(p)(e.value.merchantData.accountOpeningPermit[0].picUrl)))},null,8,["src"])):d("",!0)])]}),_:1})],64)):d("",!0),a(s,{label:"经营地区"},{default:t(()=>[l("div",Ee,o(e.value.merchantData.businessAddressName)+o(e.value.merchantData.detailedAddress),1)]),_:1}),e.value.type==2?(i(),c(s,{key:2,label:"营业执照"},{default:t(()=>{var u;return[l("div",Me,[((u=e.value.merchantData.businessLicenseImg)==null?void 0:u.length)>0?(i(),c(y,{key:0,src:_(p)(e.value.merchantData.businessLicenseImg[0].picUrl),class:"image-size",fit:"cover",onClick:n[4]||(n[4]=C=>g(_(p)(e.value.merchantData.businessLicenseImg[0].picUrl)))},null,8,["src"])):d("",!0)])]}),_:1})):d("",!0),a(s,{label:"客服电话"},{default:t(()=>[l("div",qe,o(e.value.merchantData.customerServicePhone),1)]),_:1})],64)):d("",!0),h.value=="shop"?(i(),v(m,{key:4},[a(s,{label:"店铺名称"},{default:t(()=>[l("div",Fe,o(e.value.shopData.shopTitle),1)]),_:1}),a(s,{label:"联系电话"},{default:t(()=>[l("div",je,[a($,{mobile:e.value.shopData.contactMobile},null,8,["mobile"])])]),_:1}),a(s,{label:"店铺logo"},{default:t(()=>{var u;return[l("div",Ke,[((u=e.value.shopData.shopLogo)==null?void 0:u.length)>0?(i(),c(y,{key:0,src:_(p)(e.value.shopData.shopLogo[0].picUrl),class:"image-size",fit:"cover",onClick:n[5]||(n[5]=C=>g(_(p)(e.value.shopData.shopLogo[0].picUrl)))},null,8,["src"])):d("",!0)])]}),_:1}),e.value.shopData.description?(i(),c(s,{key:0,label:"店铺简介"},{default:t(()=>[l("div",Ge,o(e.value.shopData.description),1)]),_:1})):d("",!0)],64)):d("",!0),e.value.status==1?(i(),v(m,{key:5},[a(s,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[a(O,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:n[6]||(n[6]=u=>R(10))},{default:t(()=>n[10]||(n[10]=[D("审核通过")])),_:1},512),a(O,{ref:"submitBtn",class:"form-submit-btn",onClick:n[7]||(n[7]=u=>R(20))},{default:t(()=>n[11]||(n[11]=[D("审核不通过")])),_:1},512)]),_:1}),a(H,{classType:"tig-from-input",rows:4,modelValue:e.value.auditRemark,"onUpdate:modelValue":n[8]||(n[8]=u=>e.value.auditRemark=u),placeholder:"请输入审核备注（审核不通过将必填）",type:"textarea"},null,8,["modelValue"])],64)):d("",!0)]),_:1},8,["model"])),a(Q,{spinning:V.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])]),a(W,{modelValue:I.value,"onUpdate:modelValue":n[9]||(n[9]=u=>I.value=u)},{default:t(()=>[l("div",He,[a(y,{src:A.value,alt:"",fit:"cover"},null,8,["src"])])]),_:1},8,["modelValue"])],64)}}}),ea=te(Je,[["__scopeId","data-v-7f831d0a"]]);export{ea as default};
