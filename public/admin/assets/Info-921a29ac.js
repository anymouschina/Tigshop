import{d as L,j as n,E as N,s as R,x as D,K as d,r as m,o as b,c as I,e as y,k as T,w as i,b as a,f as j,$ as q,a0 as U,H as E,h as F}from"./index-7c2d2aef.js";import{b as G,u as H}from"./live-13439de8.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import"./config-9548fa9b.js";/* empty css                                                                    *//* empty css                                                                  */import{S as K}from"./SelectGoodsRange-54a084e0.js";/* empty css                                                                              */import"./region-e0d291a6.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import"./time-290942a2.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";import"./SelectBrand-cb32d59a.js";import"./brand-995f2ca4.js";import"./SelectCategory.vue_vue_type_script_setup_true_lang-a47fadcd.js";import"./category-7b076a22.js";import"./SelectProduct-5f7c1e31.js";import"./format-4e0206d3.js";import"./product-689c7c1e.js";import"./Pagination-8eb7b6b1.js";import"./SelectSku-94aa3072.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./region-05802f67.js";const M={class:"container"},O={class:"content_wrapper"},P={class:"lyecs-form-table"},ye=L({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:h,emit:k}){const l=k,r=w,u=n(!0),f=N().currentRoute.value.query,c=n(r.isDialog?r.act:String(f.act)),_=n(r.isDialog?r.id:Number(f.id)),S=c.value==="add"?"create":"update",v=R(),e=n({});D(()=>{c.value==="detail"?x():u.value=!1});const x=async()=>{try{const t=await G(c.value,{id:_.value});Object.assign(e.value,t.item)}catch(t){d.error(t.message),l("close")}finally{u.value=!1}},g=async()=>{await v.value.validate();try{l("update:confirmLoading",!0);const t=await H(S,{id:_.value,...e.value});l("submitCallback",t),d.success(t.message)}catch(t){d.error(t.message)}finally{l("update:confirmLoading",!1)}};return h({onFormSubmit:()=>{g()}}),(t,o)=>{const C=m("el-input"),p=m("el-form-item"),V=m("el-button"),B=m("el-form");return b(),I("div",M,[y("div",O,[y("div",P,[u.value?F("",!0):(b(),T(B,{key:0,ref_key:"formRef",ref:v,model:e.value,"label-width":"auto"},{default:i(()=>[a(p,{prop:"wechat_live_title",label:"直播名称",rules:[{required:!0,message:"直播名称不能为空!"}]},{default:i(()=>[a(C,{modelValue:e.value.wechat_live_title,"onUpdate:modelValue":o[0]||(o[0]=s=>e.value.wechat_live_title=s)},null,8,["modelValue"])]),_:1}),a(p,{prop:"product_id",label:"选择商品"},{default:i(()=>[a(j(K),{rangeIds:e.value.act_range_ext,"onUpdate:rangeIds":o[1]||(o[1]=s=>e.value.act_range_ext=s),rangeType:e.value.act_range,"onUpdate:rangeType":o[2]||(o[2]=s=>e.value.act_range=s),justProudct:!0},null,8,["rangeIds","rangeType"])]),_:1}),q(a(p,{"wrapper-col":{offset:4,span:16}},{default:i(()=>[a(V,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:g},{default:i(()=>[E("提交")]),_:1},512)]),_:1},512),[[U,!r.isDialog]])]),_:1},8,["model"]))])])])}}});export{ye as default};
