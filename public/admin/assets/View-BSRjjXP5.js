import{m as S,f as D,o as C,d as B,a as M}from"./index-Bm8xE4_u.js";import{g as j,a as z}from"./time-ClyPenjC.js";import{i as v}from"./format-DFT-VJzO.js";import{g as V}from"./product-CxWf3yyB.js";import{_ as H}from"./View.vue_vue_type_script_setup_true_lang-BDtTiNW5.js";import{d as O,u as F,i as f,aa as y,Q as L,c as a,o as u,e as o,f as _,l as e,D as s,F as Z,a as A,g as n,b as E,_ as I}from"./index-CGYuOau0.js";/* empty css                                                             */import"./lodash-blK8fE0I.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";const J={class:"countdow-warp"},N={class:"mk-top"},T={class:"mk-top-left"},U={class:""},Q={class:"itemBox"},q=["src"],K=O({__name:"View",props:{module:{},moduleModifiers:{}},emits:["update:module"],setup(g){const w=[{product_id:0,product_sn:"",product_name:"麦片",product_desc:"",product_price:29,market_price:0,pic_thumb:"https://oss.tigshop.com/img/gallery/202411/1731908662JqyhZ6f1BCsWeUJlgj.jpg"},{product_id:0,product_sn:"",product_name:"巧克力棒",product_desc:"",product_price:29,market_price:0,pic_thumb:"https://oss.tigshop.com/img/gallery/202411/1731908662cOmZ28i8gKl6JiUBad.jpg"},{product_id:0,product_sn:"",product_name:"汤达人",product_desc:"",product_price:29,market_price:0,pic_thumb:"https://oss.tigshop.com/img/gallery/202411/1731908662AztoZ2OADHp1b8vUoQ.jpg"},{product_id:0,product_sn:"",product_name:"士力架",product_desc:"",product_price:29,market_price:0,pic_thumb:"https://oss.tigshop.com/img/gallery/202411/1731908662O7VZIzaFtItS4OvAOR.jpg"}],t=F(g,"module"),b=f({pruduct_list:w,module_color_style:"orange",module_title:{title:"限时抢购",sub_title:"超低价格，史无前例",more_text:"向左滑动查看更多",title_link:{link:"",title:""}},countdown_data:{show_countdown:1,countdown_background_pic:"",countdown_type:"daily_cycle",daily_time:z(new Date,20),specify_time:j(1),time_content:["天","时","分","秒"],margin_top:50,countdown_pic_bottom:30},row_num:3,pic_scale:"1:1",pic_fill_type:"cover",text_alignment:"center",product_padding:5,product_radius:5,pic_bottom_radius:1,show_product_name:0,show_product_price:1,price_weight:700,crossed_out_price:1,module_color:{title_color:"#ffffff",sub_title_color:"#ffffff",tips_color:"#fafafa",product_background_color:"#ffffff",product_name_color:"#333333",product_price_color:"#72b76c",crossed_out_price_color:"#999999",countdown_color:"#f7f7f7"},module_style:M,content_style:B});S(t.value,b.value);const h={"3:2":"calc(100% / 3 * 2)","1:1":"calc(100% / 1 * 1)","3:4":"calc(100% / 3 * 4)","16:9":"calc(100% / 16 * 9)"},l=y(()=>D(t.value.module_style??{},t.value.content_style??{},t.value.sub_title??{})),p={天:"DD",时:"HH",分:"mm",秒:"ss"},x={DD:"天",HH:"时",mm:"分",ss:"秒"},k=y(()=>{let c="";if(t.value.countdown_data.time_content&&t.value.countdown_data.time_content.length>0)for(let d=0;d<t.value.countdown_data.time_content.length;d++){const r=t.value.countdown_data.time_content[d];r&&(c+=` ${p[r]} ${x[p[r]]}`)}return c}),m=f([]);return L(async()=>{if(t.value.pruduct_list&&t.value.pruduct_list.length>0)try{const c=await V({ids:t.value.pruduct_list.map(d=>d.product_id).join(",")});m.value=[...C(t.value.pruduct_list),...c.filter_result]}catch(c){console.error(c)}}),(c,d)=>{var r;return u(),a("div",{class:"module-ad-con",style:e(l.value.moduleStyle.box_padding_bottom+l.value.moduleStyle.box_padding_top+l.value.moduleStyle.box_padding_bottom+l.value.moduleStyle.box_padding+l.value.moduleStyle.background_size+l.value.moduleStyle.background_image)},[o("div",{class:"module-ad-content",style:e(l.value.moduleContentStyle.background_image+l.value.moduleContentStyle.background_size+l.value.moduleContentStyle.box_radius2+l.value.moduleContentStyle.box_shadow+l.value.moduleContentStyle.inner_padding)},[o("div",J,[o("div",N,[o("div",T,[o("div",{class:"mk-title line1",style:e(`color: ${t.value.module_color.title_color}`)},s(t.value.module_title.title),5),o("div",{class:"mk-stitle line1",style:e(`color: ${t.value.module_color.sub_title_color}`)},s(t.value.module_title.sub_title),5)]),o("div",U,[o("div",{class:"mk-notice",style:e(`color: ${t.value.module_color.tips_color}`)},s(t.value.module_title.more_text),5)])]),o("div",Q,[(u(!0),a(Z,null,A(m.value,(i,$)=>(u(),a("div",{key:$,class:"li",style:e(`flex: 0 0 ${100/t.value.row_num}%`)},[o("div",{class:"item",style:e(`padding: ${t.value.product_padding}px; background-color: ${t.value.module_color.product_background_color}; border-radius: ${t.value.product_radius}px`)},[o("div",{class:"imgBox",style:e(`padding-top: ${h[t.value.pic_scale]}`)},[o("div",{class:"img",style:e(` border-radius: ${t.value.pic_bottom_radius===1?`${t.value.product_radius}px  ${t.value.product_radius}px 0 0`:`${t.value.product_radius}px`};
                                            background-size: ${t.value.pic_fill_type};
                                            background-image: url(${n(v)(i.pic_thumb)});`)},null,4)],4),o("div",{class:"goods-info",style:e(`padding-bottom: 0px; text-align: ${t.value.text_alignment}`)},[t.value.show_product_name?(u(),a("div",{key:0,class:"title",style:e(`color: ${t.value.module_color.product_name_color}`)},s(i.product_name?i.product_name:"商品名称"),5)):_("",!0),t.value.show_product_price?(u(),a("div",{key:1,class:"priceBox",style:e(`justify-content: ${t.value.text_alignment}`)},[o("div",{class:"price",style:e(`color: ${t.value.module_color.product_price_color}; font-weight: ${t.value.headlines}; font-family: inherit`)}," ￥"+s(i.product_price),5),t.value.crossed_out_price?(u(),a("div",{key:0,class:"origin",style:e(`color: ${t.value.module_color.crossed_out_price_color}`)},s(i.market_price),5)):_("",!0)],4)):_("",!0)],4)],4)],4))),128))])]),t.value.countdown_data.show_countdown?(u(),a("div",{key:0,class:"countdown",style:e(`margin-top: -${t.value.countdown_data.countdown_pic_bottom}px; border-radius: 0px 0px 6px 6px`)},[o("img",{class:"countdown-img",src:n(v)((r=t.value.countdown_data.countdown_background_pic)==null?void 0:r.pic_url)},null,8,q),o("div",{class:"count-down",style:e(`top: ${t.value.countdown_data.margin_top}%;`)},[E(n(H),{countdown_type:t.value.countdown_data.countdown_type,"value-style":{color:t.value.module_color.countdown_color,"font-size":"16px",display:"block"},format:k.value,daily_time:t.value.countdown_data.daily_time,specify_time:t.value.countdown_data.specify_time},null,8,["countdown_type","value-style","format","daily_time","specify_time"])],4)],4)):_("",!0)],4)],4)}}}),ct=I(K,[["__scopeId","data-v-3bf64c6e"]]);export{ct as default};
