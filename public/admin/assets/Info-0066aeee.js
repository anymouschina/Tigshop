import{d as N,j as n,E as D,s as R,x as q,K as f,r as u,o as y,c as L,e as w,k as j,w as s,b as t,$ as E,a0 as F,H as U,h as G}from"./index-7c2d2aef.js";import{a as H,u as I}from"./category-201d31a3.js";const K={class:"container"},M={class:"content_wrapper"},O={class:"lyecs-form-table"},A=N({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:"add"},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:h,emit:k}){const l=k,o=V,c=n(!0),p=D().currentRoute.value.query,i=n(o.isDialog?o.act:String(p.act)),_=n(o.isDialog?o.id:Number(p.id)),C=i.value==="add"?"create":"update",v=R(),a=n({sort_order:50});q(()=>{i.value==="detail"?S():c.value=!1});const S=async()=>{try{const e=await H(i.value,{id:_.value});Object.assign(a.value,e.item)}catch(e){f.error(e.message),l("close")}finally{c.value=!1}},b=async()=>{await v.value.validate();try{l("update:confirmLoading",!0);const e=await I(C,{id:_.value,...a.value});l("submitCallback",e),f.success(e.message)}catch(e){f.error(e.message)}finally{l("update:confirmLoading",!1)}};return h({onFormSubmit:()=>{b()}}),(e,r)=>{const g=u("el-input"),m=u("el-form-item"),x=u("el-button"),B=u("el-form");return y(),L("div",K,[w("div",M,[w("div",O,[c.value?G("",!0):(y(),j(B,{key:0,ref_key:"formRef",ref:v,model:a.value,"label-width":"auto"},{default:s(()=>[t(m,{prop:"category_name",label:"分类名称：",rules:[{required:!0,message:"分类名称不能为空!"}]},{default:s(()=>[t(g,{modelValue:a.value.category_name,"onUpdate:modelValue":r[0]||(r[0]=d=>a.value.category_name=d),clearable:""},null,8,["modelValue"])]),_:1}),t(m,{prop:"sort_order",label:"排序："},{default:s(()=>[t(g,{modelValue:a.value.sort_order,"onUpdate:modelValue":r[1]||(r[1]=d=>a.value.sort_order=d),clearable:""},null,8,["modelValue"])]),_:1}),E(t(m,{"wrapper-col":{offset:4,span:16}},{default:s(()=>[t(x,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:b},{default:s(()=>[U("提交")]),_:1},512)]),_:1},512),[[F,!o.isDialog]])]),_:1},8,["model"]))])])])}}});export{A as default};
