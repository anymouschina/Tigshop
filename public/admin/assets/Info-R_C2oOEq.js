import{d as U,i,C as j,s as z,G as E,q as O,I as p,r,c as V,o as f,e as d,j as k,f as G,w as s,b as l,a3 as M,F as P,a as $,E as A,a4 as H,_ as J}from"./index-DrbzVNl6.js";import{c as K,u as Q}from"./verbalAssociation-TDy3-zcZ.js";import{g as W}from"./languagesList-Kf2h7MTN.js";const X={class:"container"},Y={class:"content_wrapper"},Z={class:"lyecs-form-table"},h=U({__name:"Info",props:{id:{type:Number,default:0},promotionType:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(I,{expose:L,emit:C}){const c=C,n=I,g=i(),u=i(!0),_=j().currentRoute.value.query,v=i(n.isDialog?n.act:String(_.act)),y=i(n.isDialog?n.id:Number(_.id)),S=v.value==="add"?"create":"update",b=z(),o=i({code:"",name:"",localesId:0}),N=E({page:1,size:99999,sortField:"",sortOrder:"",keyword:""}),R=async()=>{u.value=!0;try{const t=await W({...N});g.value=t.records}catch(t){p.error(t.message)}finally{u.value=!1}};O(()=>{v.value==="detail"?q():u.value=!1,R()});const q=async()=>{try{const t=await K(v.value,{id:y.value});Object.assign(o.value,t)}catch(t){p.error(t.message),c("close")}finally{u.value=!1}},w=async()=>{await b.value.validate();try{c("update:confirmLoading",!0);const t=await Q(S,{id:y.value,...o.value});c("submitCallback",t),p.success("操作成功")}catch(t){p.error(t.message)}finally{c("update:confirmLoading",!1)}};return L({onFormSubmit:()=>{w()}}),(t,e)=>{const x=r("TigInput"),m=r("el-form-item"),B=r("el-option"),F=r("el-select"),T=r("el-button"),D=r("el-form");return f(),V("div",X,[d("div",Y,[d("div",Z,[u.value?G("",!0):(f(),k(D,{key:0,ref_key:"formRef",ref:b,model:o.value,"label-width":"auto"},{default:s(()=>[l(m,{prop:"name",label:"所属地区：",rules:[{required:!0,message:"所属地区不能为空!"}]},{default:s(()=>[l(x,{classType:"tig-form-input",type:"text",maxlength:60,modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.name=a)},null,8,["modelValue"]),e[4]||(e[4]=d("div",{class:"extra"},"例如：中国、中国香港、中国台湾、英国、法国",-1))]),_:1}),l(m,{prop:"code",label:"语言识别码：",rules:[{required:!0,message:"语言识别码不能为空!"}]},{default:s(()=>[l(x,{classType:"tig-form-input",type:"text",maxlength:60,modelValue:o.value.code,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.code=a)},null,8,["modelValue"]),e[5]||(e[5]=d("div",{class:"extra"},"浏览器语言识别码",-1))]),_:1}),l(m,{prop:"localesId",label:"关联语言：",rules:[{required:!0,message:"请选择关联语言!"}]},{default:s(()=>[l(F,{modelValue:o.value.localesId,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.localesId=a),placeholder:"请选择关联语言",size:"default"},{default:s(()=>[(f(!0),V(P,null,$(g.value,a=>(f(),k(B,{key:a.id,label:a.language,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[6]||(e[6]=d("div",{class:"extra"},"请选择关联语言，语言类型是由您自行添加的",-1))]),_:1}),M(l(m,{"wrapper-col":{offset:4,span:16}},{default:s(()=>[l(T,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[3]||(e[3]=a=>w())},{default:s(()=>e[7]||(e[7]=[A("提交")])),_:1},512)]),_:1},512),[[H,!n.isDialog]])]),_:1},8,["model"]))])])])}}}),le=J(h,[["__scopeId","data-v-13a688e2"]]);export{le as default};
