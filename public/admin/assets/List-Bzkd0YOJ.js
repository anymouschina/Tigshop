import{d as $,i as f,G as F,q as L,c as v,e as a,b as s,w as o,L as E,g as i,f as S,E as m,D as h,I as V,r as _,o as y}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{P as q}from"./PopFormElm-DSof3F4x.js";import{_ as K}from"./Switch.vue_vue_type_script_setup_true_lang-CKSPWIQL.js";import{_ as O}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as G}from"./Pagination-yOfjsBuR.js";import{u as M}from"./config-DNllFJyR.js";import{g as j,b as H,u as b,d as J}from"./shippingType-fDWXUBuR.js";import{_ as A}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const Q={class:"container"},R={class:"content_wrapper"},W={class:"lyecs-table-list-warp"},X={class:"list-table-tool lyecs-search-warp"},Y={class:"advanced-search-warp list-table-tool-row"},Z={class:"simple-form-warp"},ee={class:"simple-form-field"},te={class:"form-group"},se={class:"control-container"},ae={class:"simple-form-field"},oe={class:"form-group"},ie={class:"control-container"},ne={class:"simple-form-field"},le={class:"form-group"},pe={class:"control-container"},re={key:0},de={class:"table-container"},_e={class:"empty-warp"},ce={key:0,class:"empty-bg"},ue={key:0,class:"pagination-con"},Ae=$({__name:"List",setup(me){const U=M(),w=f([]),c=f(!0),g=f(0),u=f([]),l=F({page:1,size:U.get("page_size"),sort_field:"",sort_order:"",keyword:""}),p=async()=>{c.value=!0;try{const n=await j({...l});w.value=n.filter_result,g.value=n.total}catch(n){V.error(n.message)}finally{c.value=!1}};L(()=>{p()});const k=()=>{p()},x=({prop:n,order:e})=>{l.sort_field=n,l.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",p()},z=async n=>{try{const e=await H(n,{ids:u.value});V.success(e.message),p()}catch(e){V.error(e.message)}},T=n=>{u.value=n.map(e=>e.shipping_type_id)};return(n,e)=>{const C=_("el-button"),D=_("el-input"),P=_("el-popconfirm"),r=_("el-table-column"),B=_("el-divider"),I=_("el-table"),N=_("a-spin");return y(),v("div",Q,[a("div",R,[a("div",W,[a("div",X,[a("div",Y,[a("div",Z,[a("div",ee,[a("div",te,[a("div",se,[s(D,{modelValue:l.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>l.keyword=t),name:"keyword",placeholder:"输入配送类型",onKeyup:E(k,["enter"]),clearable:"",onClear:k},{append:o(()=>[s(C,{onClick:k},{default:o(()=>e[4]||(e[4]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),a("div",ae,[a("div",oe,[a("div",ie,[s(i(A),{params:{act:"add"},isDrawer:"",path:"setting/shippingType/Info",title:"添加配送类型",width:"600px",onOkCallback:p},{default:o(()=>[s(C,{type:"primary"},{default:o(()=>e[5]||(e[5]=[m("添加配送方式")])),_:1})]),_:1})])])]),a("div",ne,[a("div",le,[a("div",pe,[s(P,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=t=>z("del"))},{reference:o(()=>[s(C,{disabled:u.value.length===0},{default:o(()=>e[6]||(e[6]=[m("批量删除")])),_:1},8,["disabled"])]),_:1}),u.value.length>0?(y(),v("span",re,[e[7]||(e[7]=m(" 已选择：")),a("b",null,h(u.value.length),1),e[8]||(e[8]=m(" 项 "))])):S("",!0)])])])])])]),a("div",de,[s(N,{spinning:c.value},{default:o(()=>[s(I,{data:w.value,loading:c.value,total:g.value,"row-key":"shipping_type_id",onSelectionChange:T,onSortChange:x},{empty:o(()=>[a("div",_e,[c.value?S("",!0):(y(),v("div",ce,"暂无数据"))])]),default:o(()=>[s(r,{type:"selection",width:"32"}),s(r,{label:"分类名称"},{default:o(({row:t})=>[s(i(q),{"org-value":t.shipping_type_name,"onUpdate:orgValue":d=>t.shipping_type_name=d,max:10,params:{id:t.shipping_type_id,field:"shipping_type_name"},requestApi:i(b),label:"分类名称",type:"input"},{default:o(()=>[a("div",null,h(t.shipping_type_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),s(r,{label:"分类描述",prop:"shipping_type_desc"},{default:o(({row:t})=>[s(i(q),{"org-value":t.shipping_type_desc,"onUpdate:orgValue":d=>t.shipping_type_desc=d,max:10,params:{id:t.shipping_type_id,field:"shipping_type_desc"},requestApi:i(b),label:"分类描述",type:"input"},{default:o(()=>[a("div",null,h(t.shipping_type_desc),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),s(r,{label:"默认物流",prop:"logistics_name"}),s(r,{label:"货到付款",prop:"is_support_cod",sortable:"custom"},{default:o(({row:t})=>[s(i(K),{checked:t.is_support_cod,"onUpdate:checked":d=>t.is_support_cod=d,params:{id:t.shipping_type_id,field:"is_support_cod"},requestApi:i(b)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),s(r,{label:"排序",prop:"sort_order",sortable:"custom"},{default:o(({row:t})=>[s(i(q),{"org-value":t.sort_order,"onUpdate:orgValue":d=>t.sort_order=d,params:{id:t.shipping_type_id,field:"sort_order"},requestApi:i(b),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"input"},{default:o(()=>[a("div",null,h(t.sort_order),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),s(r,{width:150,fixed:"right",label:"操作"},{default:o(({row:t})=>[s(i(A),{params:{act:"detail",id:t.shipping_type_id},isDrawer:"",path:"setting/shippingType/Info",title:"编辑配送类型",width:"600px",onOkCallback:p},{default:o(()=>e[9]||(e[9]=[a("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),s(B,{direction:"vertical"}),s(i(O),{params:{id:t.shipping_type_id},requestApi:i(J),onAfterDelete:p},{default:o(()=>e[10]||(e[10]=[m("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),g.value>0?(y(),v("div",ue,[s(i(G),{page:l.page,"onUpdate:page":e[2]||(e[2]=t=>l.page=t),size:l.size,"onUpdate:size":e[3]||(e[3]=t=>l.size=t),total:g.value,onCallback:p},null,8,["page","size","total"])])):S("",!0)])])])])}}});export{Ae as default};
