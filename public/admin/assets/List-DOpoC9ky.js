import{d as q,i as f,G as A,q as M,c as g,e,b as o,w as s,M as U,f as h,g as _,I as y,r as i,o as v,E as u,D as $}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{_ as E}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as L}from"./Pagination-yOfjsBuR.js";import{u as O}from"./config-DNllFJyR.js";import{g as F,d as T,b as j}from"./productGroup-D9PsniyG.js";import{_ as C}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const H={class:"container"},J={class:"content_wrapper"},K={class:"lyecs-table-list-warp"},Q={class:"list-table-tool lyecs-search-warp"},R={class:"advanced-search-warp list-table-tool-row"},W={class:"simple-form-warp"},X={class:"simple-form-field"},Y={class:"form-group"},Z={class:"control-container"},tt={class:"simple-form-field"},et={class:"form-group"},ot={class:"control-container"},st={class:"simple-form-field"},at={class:"form-group"},nt={class:"control-container"},lt={key:0},rt={class:"table-container"},it={class:"empty-warp"},dt={key:0,class:"empty-bg"},pt={key:0,class:"pagination-con"},kt=q({__name:"List",setup(ct){const S=O(),k=f([{product_group_name:"最新商品",product_group_sn:"",product_group_description:"",add_time:"-",intro_type:"new"}]),p=f(!0),m=f(0),c=f([]),n=A({page:1,size:S.get("page_size"),sort_field:"",sort_order:"",keyword:""}),r=async()=>{p.value=!0;try{const a=await F({...n});k.value=a.filter_result,m.value=a.total}catch(a){y.error(a.message)}finally{p.value=!1}};M(()=>{r()});const b=()=>{r()},x=({prop:a,order:t})=>{n.sort_field=a,n.sort_order=t=="ascending"?"asc":t=="descending"?"desc":"",r()},z=async a=>{try{const t=await j(a,{ids:c.value});y.success(t.message),await r()}catch(t){y.error(t.message)}},V=a=>{c.value=a.map(t=>t.product_group_id)};return(a,t)=>{const w=i("el-button"),D=i("el-input"),G=i("el-popconfirm"),P=i("el-form"),d=i("el-table-column"),B=i("el-divider"),I=i("el-table"),N=i("a-spin");return v(),g("div",H,[e("div",J,[e("div",K,[e("div",Q,[o(P,{model:n,onSubmit:U(b,["prevent"])},{default:s(()=>[e("div",R,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[o(D,{modelValue:n.keyword,"onUpdate:modelValue":t[0]||(t[0]=l=>n.keyword=l),name:"keyword",placeholder:"输入分组名称",clearable:"",onClear:b},{append:s(()=>[o(w,{onClick:b},{default:s(()=>t[4]||(t[4]=[e("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),e("div",tt,[e("div",et,[e("div",ot,[o(_(C),{params:{act:"add"},isDrawer:"",path:"product/productGroup/Info",title:"添加分组",width:"600px",onOkCallback:r},{default:s(()=>[o(w,{type:"primary"},{default:s(()=>t[5]||(t[5]=[u("添加分组")])),_:1})]),_:1})])])]),e("div",st,[e("div",at,[e("div",nt,[o(G,{title:"您确认要批量删除所选数据吗？",onConfirm:t[1]||(t[1]=l=>z("del"))},{reference:s(()=>[o(w,{disabled:c.value.length===0},{default:s(()=>t[6]||(t[6]=[u("批量删除")])),_:1},8,["disabled"])]),_:1}),c.value.length>0?(v(),g("span",lt,[t[7]||(t[7]=u(" 已选择：")),e("b",null,$(c.value.length),1),t[8]||(t[8]=u(" 项 "))])):h("",!0)])])])])])]),_:1},8,["model"])]),e("div",rt,[o(N,{spinning:p.value},{default:s(()=>[o(I,{data:k.value,loading:p.value,total:m.value,"row-key":"product_group_id",onSelectionChange:V,onSortChange:x},{empty:s(()=>[e("div",it,[p.value?h("",!0):(v(),g("div",dt,"暂无数据"))])]),default:s(()=>[o(d,{type:"selection",width:"32"}),o(d,{label:"分组名称",prop:"product_group_name"}),o(d,{label:"分组别名",prop:"product_group_sn"}),o(d,{prop:"product_group_description",label:"分组描述"}),o(d,{label:"添加时间",prop:"add_time",sortable:"custom"}),o(d,{width:150,fixed:"right",label:"操作"},{default:s(({row:l})=>[o(_(C),{params:{act:"detail",id:l.product_group_id},isDrawer:"",path:"product/productGroup/Info",title:"编辑分组",width:"600px",onOkCallback:r},{default:s(()=>t[9]||(t[9]=[e("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(B,{direction:"vertical"}),o(_(E),{params:{id:l.product_group_id},requestApi:_(T),onAfterDelete:r},{default:s(()=>t[10]||(t[10]=[u("删除")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),m.value>0?(v(),g("div",pt,[o(_(L),{page:n.page,"onUpdate:page":t[2]||(t[2]=l=>n.page=l),size:n.size,"onUpdate:size":t[3]||(t[3]=l=>n.size=l),total:m.value,onCallback:r},null,8,["page","size","total"])])):h("",!0)])])])])}}});export{kt as default};
