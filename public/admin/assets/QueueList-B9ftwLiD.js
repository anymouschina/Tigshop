/* empty css             */import{d as I,U as p,i as v,ad as O,T as P,c as _,o as f,D as x,K as Q,G as U,q as j,e as a,b as e,r,w as l,E as S,f as T,g as m,F as E,a as H,I as R,_ as W}from"./index-DrbzVNl6.js";import{D as F}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as $}from"./Pagination-wR9huHyl.js";import{i as G}from"./format-CRgx78oe.js";import{d as K}from"./brand-C64i7ZtK.js";import{t as J,g as X}from"./conversation-rd7RS6Jg.js";import"./Verify.vue_vue_type_style_index_0_lang-B5aTvMR3.js";import{r as Y}from"./zh-cn-W45FenWv.js";import{S as Z}from"./StatusDot-eKxl7wC-.js";const ee=I({__name:"RelativeTime",props:{time:{type:String,default:""}},setup(k){p.extend(Y),p.locale("zh-cn");const b=k,g=v(p()),h=O(()=>p(b.time).from(g.value));return P(d=>{const n=p().diff(p(b.time),"second");let t;n<60?t=1e4:n<3600?t=6e4:n<86400?t=6e5:n<604800?t=36e5:t=864e5;const i=setInterval(()=>{g.value=p()},t);d(()=>clearInterval(i))}),(d,n)=>(f(),_("span",null,x(h.value),1))}}),te={class:"container"},se={class:"content_wrapper"},ae={class:"lyecs-table-list-warp",style:{"margin-bottom":"0"}},oe={class:"list-table-tool lyecs-search-warp"},le={class:"advanced-search-warp list-table-tool-row"},ne={class:"simple-form-warp"},re={class:"simple-form-field"},ie={class:"form-group"},de={class:"control-container"},ce={class:"simple-form-field"},pe={class:"table-container"},me={class:"kehu"},ue={class:"title"},_e={class:"message-list"},fe={class:"item"},ve={class:"empty-warp"},be={key:0,class:"empty-bg"},ge={key:0,class:"pagination-con"},he=I({__name:"QueueList",setup(k,{expose:b}){const g=Q(),h=v([]),d=v(!0),n=v(0);v([]);const t=U({page:1,size:g.get("pageSize"),sortField:"",sortOrder:"",keyword:"",firstWord:"",userFrom:""}),i=async()=>{d.value=!0;try{const c=await X({...t});h.value=c.records,n.value=c.total}catch(c){R.error(c.message)}finally{d.value=!1}};j(()=>{i()});const z=()=>{i()},C=({prop:c,order:s})=>{t.sortField=c,t.sortOrder=s=="ascending"?"asc":s=="descending"?"desc":"",i()};return b({loadFilter:i}),(c,s)=>{const w=r("el-option"),L=r("el-select"),D=r("el-button"),V=r("el-form"),A=r("el-avatar"),u=r("el-table-column"),q=r("sapn"),M=r("el-divider"),B=r("el-table"),N=r("a-spin");return f(),_("div",te,[a("div",se,[a("div",ae,[a("div",oe,[e(V,{model:t},{default:l(()=>[a("div",le,[a("div",ne,[a("div",re,[a("div",ie,[s[3]||(s[3]=a("label",{class:"control-label"},[a("span",null,"咨询来源：")],-1)),a("div",de,[e(L,{modelValue:t.userFrom,"onUpdate:modelValue":s[0]||(s[0]=o=>t.userFrom=o),clearable:""},{default:l(()=>[e(w,{value:"",label:"全部"}),e(w,{value:"pc",label:"pc"}),e(w,{value:"h5",label:"h5"})]),_:1},8,["modelValue"])])])]),a("div",ce,[e(D,{type:"primary",onClick:z},{default:l(()=>s[4]||(s[4]=[S("搜索")])),_:1})])])])]),_:1},8,["model"])]),a("div",pe,[e(N,{spinning:d.value},{default:l(()=>[e(B,{data:h.value,loading:d.value,total:n.value,"row-key":"brandId",onSortChange:C},{empty:l(()=>[a("div",ve,[d.value?T("",!0):(f(),_("div",be,"暂无数据"))])]),default:l(()=>[e(u,{label:"客户",prop:"brandId"},{default:l(({row:o})=>{var y;return[a("div",me,[e(A,{class:"av",src:m(G)(o.user.avatar)},null,8,["src"]),a("div",ue,x((y=o.user)==null?void 0:y.nickname),1)])]}),_:1}),e(u,{label:"最新两条消息"},{default:l(({row:o})=>[a("div",_e,[(f(!0),_(E,null,H(o.userLastTwoMessage.slice(0,2),y=>(f(),_("div",fe,[e(Z,{color:"#44bb00",flicker:!1}),e(q,{innerHTML:y.content.content},null,8,["innerHTML"])]))),256))])]),_:1}),e(u,{prop:"addTime",width:160,label:"进入排队时间"}),e(u,{width:100,label:"排队时长",sortable:"custom"},{default:l(({row:o})=>[e(m(ee),{time:o.addTime},null,8,["time"])]),_:1}),e(u,{width:100,label:"咨询来源",prop:"userFrom",sortable:"custom"}),e(u,{width:120,fixed:"right",label:"操作"},{default:l(({row:o})=>[e(m(F),{title:"您确定要接入会话吗？",params:{conversationId:o.id},requestApi:m(J),onAfterDelete:i},{default:l(()=>s[5]||(s[5]=[S("接入会话")])),_:2},1032,["params","requestApi"]),e(M,{direction:"vertical"}),e(m(F),{params:{id:o.id},requestApi:m(K),onAfterDelete:i},{default:l(()=>s[6]||(s[6]=[S("删除")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),n.value>0?(f(),_("div",ge,[e(m($),{page:t.page,"onUpdate:page":s[1]||(s[1]=o=>t.page=o),size:t.size,"onUpdate:size":s[2]||(s[2]=o=>t.size=o),total:n.value,onCallback:i},null,8,["page","size","total"])])):T("",!0)])])])])}}}),ye=W(he,[["__scopeId","data-v-1bf3ba35"]]),Ve=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"}));export{ye as Q,ee as _,Ve as a};
