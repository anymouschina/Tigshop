/* empty css             */import"./index-6c62cf9b.js";import{A as V,d as E,I as w,j as x,x as U,r as u,o as l,c as v,e as t,F as L,a as S,b as p,w as n,f as y,h as m,E as j,K as G,n as K,G as $,k as b,p as M,i as R,_ as H}from"./index-7c2d2aef.js";/* empty css                                                                    */import{P as J}from"./Pagination-8eb7b6b1.js";import{u as Q}from"./config-9548fa9b.js";import{_ as C}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const W=r=>V({url:"promotion/promotion/list",method:"get",params:r}),o=r=>(M("data-v-551a7871"),r=r(),R(),r),X={class:"container"},Y={class:"content_wrapper"},Z={class:"row"},tt={class:"col activity"},et=o(()=>t("div",{class:"tip"},"仅统计优惠券、满减/送、限时折扣、秒杀、多人拼团、赠品 活动",-1)),st={class:"tabs flex"},ot=["onClick"],it={class:"num"},at={class:"txt"},lt={class:"col"},nt=o(()=>t("h2",null,"商家常用",-1)),ct={class:"app-wrapper cursor-pointer"},pt=o(()=>t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-youhuiquan"})],-1)),dt=o(()=>t("div",null,[t("div",{class:"name"},"优惠券"),t("div",{class:"tip"},"向客户发放店铺优惠券")],-1)),_t=[pt,dt],rt=o(()=>t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-time-limit"})],-1)),ut=o(()=>t("div",null,[t("div",{class:"name"},"限时折扣"),t("div",{class:"tip"},"设置商品限时打折促销")],-1)),vt=[rt,ut],mt=o(()=>t("div",{class:"icon-col"},[t("p",null,"减")],-1)),ht=o(()=>t("div",null,[t("div",{class:"name"},"满减"),t("div",{class:"tip"},"购满一定金额或件数享受优惠")],-1)),yt=[mt,ht],bt=o(()=>t("div",{class:"icon-col"},[t("p",null,"送")],-1)),kt=o(()=>t("div",null,[t("div",{class:"name"},"满送"),t("div",{class:"tip"},"购满一定金额或件数享受优惠")],-1)),ft=[bt,kt],gt=o(()=>t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-qiandao"})],-1)),Ct=o(()=>t("div",null,[t("div",{class:"name"},"日历签到"),t("div",{class:"tip"},"每日签到领取积分或奖励")],-1)),wt=[gt,Ct],xt=o(()=>t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-miaosha"})],-1)),$t=o(()=>t("div",null,[t("div",{class:"name"},"秒杀"),t("div",{class:"tip"},"快速抢购引导顾客更多消费")],-1)),It=[xt,$t],zt=o(()=>t("div",{class:"icon-col"},[t("p",null,"赠")],-1)),Lt=o(()=>t("div",null,[t("div",{class:"name"},"赠品"),t("div",{class:"tip"},"设置赠品, 回馈客户")],-1)),St=[zt,Lt],Dt=o(()=>t("div",{class:"icon-col"},[t("p",null,"充")],-1)),Pt=o(()=>t("div",null,[t("div",{class:"name"},"余额充值"),t("div",{class:"tip"},"充值店铺余额")],-1)),Bt=[Dt,Pt],Ot={class:"col"},Tt=o(()=>t("h2",null,"活动记录",-1)),qt={style:{position:"relative"}},At=["onClick"],Ft=o(()=>t("a",{class:"btn-link"},"编辑",-1)),Nt=o(()=>t("a",{class:"btn-link"},"编辑",-1)),Vt=o(()=>t("a",{class:"btn-link"},"编辑",-1)),Et=o(()=>t("a",{class:"btn-link"},"编辑",-1)),Ut={class:"empty-warp"},jt={key:0,class:"empty-bg"},Gt={key:0,class:"pagination-con"},Kt=E({__name:"List",setup(r){const d=j(),D=Q(),k=w([{value:1,label:"进行中的活动",num:"-"},{value:2,label:"7天内到期活动",num:"-"},{value:3,label:"未开始活动",num:"-"}]),I=w([{value:0,label:"全部"},{value:1,label:"秒杀"},{value:2,label:"优惠券"},{value:6,label:"限时折扣"},{value:3,label:"满减"},{value:5,label:"满赠"}]),i=w({page:1,size:D.get("page_size"),sort_field:"",sort_order:"",time_type:1,types:0}),z=x([]),h=x(!0),f=x(0),_=async()=>{h.value=!0;let a=[];i.types===0?a=[]:i.types===3?a=[3,4]:a=[i.types];try{const s=await W({...i,type:a});z.value=s.filter_result,k[0].num=s.time_type_count.time_type1_count,k[1].num=s.time_type_count.time_type2_count,k[2].num=s.time_type_count.time_type3_count,f.value=s.total}catch(s){G.error(s.message)}finally{h.value=!1}};U(()=>{_()});const P=a=>{i.time_type=a,_()},B=a=>{i.types=I[a].value,_()},c=a=>{switch(a){case 1:d.push({path:"/promotion/seckill/list"});break;case 2:d.push({path:"/promotion/coupon/list"});break;case 6:d.push({path:"/promotion/limitdiscount_gift/list"});break;case 3:d.push({path:"/promotion/full_reduction/list"});break;case 5:d.push({path:"/promotion/reward_gift/list"});break;case 9:d.push({path:"/promotion/sign_in_setting/list"});break;case 7:d.push({path:"/promotion/recharge_setting/list"});break;case 10:d.push({path:"/promotion/product_gift/list"});break}};return(a,s)=>{const O=u("el-tab-pane"),T=u("el-tabs"),g=u("el-table-column"),q=u("el-divider"),A=u("el-table"),F=u("a-spin");return l(),v("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[t("div",null,[et,t("div",st,[(l(!0),v(L,null,S(k,e=>(l(),v("div",{class:K(["item",{active:e.value==i.time_type}]),onClick:N=>P(e.value)},[t("div",it,$(e.num),1),t("div",at,$(e.label),1)],10,ot))),256))])])]),t("div",lt,[t("div",null,[nt,t("div",ct,[t("div",{class:"app-wrapper-item",onClick:s[0]||(s[0]=e=>c(2))},_t),t("div",{class:"app-wrapper-item",onClick:s[1]||(s[1]=e=>c(6))},vt),t("div",{class:"app-wrapper-item",onClick:s[2]||(s[2]=e=>c(3))},yt),t("div",{class:"app-wrapper-item",onClick:s[3]||(s[3]=e=>c(5))},ft),t("div",{class:"app-wrapper-item",onClick:s[4]||(s[4]=e=>c(9))},wt),t("div",{class:"app-wrapper-item",onClick:s[5]||(s[5]=e=>c(1))},It),t("div",{class:"app-wrapper-item",onClick:s[6]||(s[6]=e=>c(10))},St),t("div",{class:"app-wrapper-item",onClick:s[7]||(s[7]=e=>c(7))},Bt)])])]),t("div",Ot,[Tt,p(T,{type:"card",onTabChange:B},{default:n(()=>[(l(!0),v(L,null,S(I,e=>(l(),b(O,{label:e.label,value:e.value},null,8,["label","value"]))),256))]),_:1}),p(F,{spinning:h.value},{default:n(()=>[p(A,{data:z.value,"row-key":"coupon_id",total:f.value,loading:h.value},{empty:n(()=>[t("div",Ut,[h.value?m("",!0):(l(),v("div",jt,"暂无数据"))])]),default:n(()=>[p(g,{label:"活动名称",prop:"promotion_name",width:"300"},{default:n(({row:e})=>[t("div",qt,[t("div",null,$(e.promotion_name||"--"),1)])]),_:1}),p(g,{label:"活动类型",prop:"type_text",width:"300"}),p(g,{label:"活动时间",prop:"time_text"}),p(g,{label:"操作",width:"110"},{default:n(({row:e})=>[t("a",{class:"btn-link",onClick:N=>c(e.type)},"查看",8,At),p(q,{direction:"vertical"}),e.type==1?(l(),b(y(C),{key:0,params:{act:"detail",id:e.relation_id},isDrawer:"",title:"编辑限时秒杀",width:"800px",path:"promotion/seckill/Info",onOkCallback:_},{default:n(()=>[Ft]),_:2},1032,["params"])):m("",!0),e.type==2?(l(),b(y(C),{key:1,isDrawer:"",onOkCallback:_,title:"编辑优惠券",width:"800px",path:"promotion/coupon/Info",params:{act:"detail",id:e.relation_id}},{default:n(()=>[Nt]),_:2},1032,["params"])):m("",!0),e.type==6?(l(),b(y(C),{key:2,isDrawer:"",onOkCallback:_,title:"编辑限时折扣",width:"900px",path:"promotion/productActivity/limitdiscount/Info",params:{act:"detail",id:e.relation_id}},{default:n(()=>[Vt]),_:2},1032,["params"])):m("",!0),e.type==3||e.type==5||e.type==4?(l(),b(y(C),{key:3,isDrawer:"",onOkCallback:_,title:"编辑优惠活动",width:"800px",path:"promotion/productActivity/Info",params:{act:"detail",id:e.relation_id,promotion_type:e.type==4?2:e.type==3?1:3}},{default:n(()=>[Et]),_:2},1032,["params"])):m("",!0)]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),f.value>0?(l(),v("div",Gt,[p(y(J),{page:i.page,"onUpdate:page":s[8]||(s[8]=e=>i.page=e),size:i.size,"onUpdate:size":s[9]||(s[9]=e=>i.size=e),total:f.value,onCallback:_},null,8,["page","size","total"])])):m("",!0)])])])])}}});const Zt=H(Kt,[["__scopeId","data-v-551a7871"]]);export{Zt as default};
