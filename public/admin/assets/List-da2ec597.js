import{d as O,di as j,j as g,I as E,x as G,r as i,o as u,c as f,e,b as o,w as a,f as r,h as b,K as k,L as H,H as d,G as y,n as M}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{P as T}from"./PopFormElm-61cd9b7d.js";import{_ as J}from"./Switch.vue_vue_type_script_setup_true_lang-95245cd7.js";import{_ as Q}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as R}from"./Pagination-8eb7b6b1.js";import{u as F}from"./config-9548fa9b.js";import{g as W,u as P,d as X,b as Y}from"./pcCatFloor-877bdad0.js";import{_ as A}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const Z={class:"container"},ee={class:"content_wrapper"},te={class:"lyecs-table-list-warp"},oe={class:"list-table-tool lyecs-search-warp"},ae={class:"advanced-search-warp list-table-tool-row"},se={class:"simple-form-warp"},le={class:"simple-form-field"},ne={class:"form-group"},ie={class:"control-container"},re=e("span",{class:"iconfont icon-chakan1"},null,-1),ce={class:"simple-form-field"},de={class:"form-group"},_e={class:"control-container"},pe={class:"simple-form-field"},me={class:"form-group"},ue={class:"control-container"},fe={key:0},he={class:"table-container"},ve=e("a",{class:"btn-link"},"编辑",-1),ge={class:"empty-warp"},be={key:0,class:"empty-bg"},ye={key:0,class:"pagination-con"},we={key:0,class:"selected-action-warp"},ke={class:"selected-action"},Ie=O({__name:"List",setup(Ce){const C=F();C.config.ico_defined_css&&j(C.config.ico_defined_css);const U=F(),S=g([]),m=g(!0),h=g(0),_=g([]),n=E({page:1,size:U.get("page_size"),sort_field:"",sort_order:"",keyword:""}),c=async()=>{m.value=!0;try{const l=await W({...n});S.value=l.filter_result,h.value=l.total}catch(l){k.error(l.message)}finally{m.value=!1}};G(()=>{c()});const x=()=>{c()},q=({prop:l,order:s})=>{n.sort_field=l,n.sort_order=s=="ascending"?"asc":s=="descending"?"desc":"",c()},V=async l=>{try{const s=await Y(l,{ids:_.value});k.success(s.message),await c()}catch(s){k.error(s.message)}},$=l=>{_.value=l.map(s=>s.cat_floor_id)};return(l,s)=>{const v=i("el-button"),B=i("el-input"),z=i("el-popconfirm"),D=i("el-form"),p=i("el-table-column"),I=i("el-divider"),L=i("el-table"),N=i("a-spin"),K=i("el-space");return u(),f("div",Z,[e("div",ee,[e("div",te,[e("div",oe,[o(D,{model:n},{default:a(()=>[e("div",ae,[e("div",se,[e("div",le,[e("div",ne,[e("div",ie,[o(B,{modelValue:n.keyword,"onUpdate:modelValue":s[0]||(s[0]=t=>n.keyword=t),name:"keyword",placeholder:"输入楼层名称",onKeyup:H(x,["enter"])},{append:a(()=>[o(v,{onClick:x},{default:a(()=>[re]),_:1})]),_:1},8,["modelValue"])])])]),e("div",ce,[e("div",de,[e("div",_e,[o(r(A),{params:{act:"add"},isDrawer:"",path:"decorate/pcCatFloor/Info",title:"添加抽屉楼层",width:"800px",onOkCallback:c},{default:a(()=>[o(v,{type:"primary"},{default:a(()=>[d("添加抽屉楼层")]),_:1})]),_:1})])])]),e("div",pe,[e("div",me,[e("div",ue,[o(z,{title:"您确认要批量删除所选数据吗？",onConfirm:s[1]||(s[1]=t=>V("del"))},{reference:a(()=>[o(v,{disabled:_.value.length===0},{default:a(()=>[d("批量删除")]),_:1},8,["disabled"])]),_:1}),_.value.length>0?(u(),f("span",fe,[d(" 已选择："),e("b",null,y(_.value.length),1),d(" 项 ")])):b("",!0)])])])])])]),_:1},8,["model"])]),e("div",he,[o(N,{spinning:m.value},{default:a(()=>[o(L,{data:S.value,loading:m.value,total:h.value,"row-key":"cat_floor_id",onSelectionChange:$,onSortChange:q},{empty:a(()=>[e("div",ge,[m.value?b("",!0):(u(),f("div",be,"暂无数据"))])]),default:a(()=>[o(p,{type:"selection",width:"32"}),o(p,{width:100,label:"楼层图标"},{default:a(({row:t})=>[e("em",{class:M([t.floor_ico_font,"main_pel_m"])},null,2)]),_:1}),o(p,{label:"楼层名称",prop:"cat_floor_name"},{default:a(({row:t})=>[e("span",null,y(t.cat_floor_name?t.cat_floor_name:"--"),1)]),_:1}),o(p,{width:120,label:"是否显示",sortable:"custom"},{default:a(({row:t})=>[o(r(J),{checked:t.is_show,"onUpdate:checked":w=>t.is_show=w,params:{id:t.cat_floor_id,field:"is_show"},requestApi:r(P)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),o(p,{width:120,label:"排序",prop:"sort_order",sortable:"custom"},{default:a(({row:t})=>[o(r(T),{"org-value":t.sort_order,"onUpdate:orgValue":w=>t.sort_order=w,params:{id:t.cat_floor_id,field:"sort_order"},requestApi:r(P),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"input"},{default:a(()=>[e("div",null,y(t.sort_order),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(p,{width:150,fixed:"right",label:"操作"},{default:a(({row:t})=>[o(r(A),{params:{act:"detail",id:t.cat_floor_id},isDrawer:"",path:"decorate/pcCatFloor/Info",title:"编辑抽屉楼层",width:"800px",onOkCallback:c},{default:a(()=>[ve]),_:2},1032,["params"]),o(I,{direction:"vertical"}),o(r(Q),{params:{id:t.cat_floor_id},requestApi:r(X),onAfterDelete:c},{default:a(()=>[d("删除 ")]),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),h.value>0?(u(),f("div",ye,[o(r(R),{page:n.page,"onUpdate:page":s[2]||(s[2]=t=>n.page=t),size:n.size,"onUpdate:size":s[3]||(s[3]=t=>n.size=t),total:h.value,onCallback:c},null,8,["page","size","total"])])):b("",!0)]),_.value.length>0?(u(),f("div",we,[e("div",ke,[o(K,null,{default:a(()=>[e("span",null,[d("已选择："),e("b",null,y(_.value.length),1),d(" 项")]),o(z,{title:"您确认要批量删除所选数据吗？",onConfirm:s[4]||(s[4]=t=>V("del"))},{reference:a(()=>[o(v,null,{default:a(()=>[d("批量删除")]),_:1})]),_:1})]),_:1})])])):b("",!0)])])])}}});export{Ie as default};
