import{d as X,j as f,E as U,s as Y,x as Z,r as b,o as i,c as r,e as l,b as a,w as t,k as u,h as n,F as v,G as o,H as k,f as m,a as ee,K as $,aO as ae,_ as te}from"./index-7c2d2aef.js";import{c as le,e as se}from"./apply-188ef048.js";import{i as p}from"./format-4e0206d3.js";import{S as I}from"./StatusDot-19af4eec.js";import{M as A}from"./MobileCard-6c6c2c27.js";import"./config-9548fa9b.js";import"./config-e2aa16d1.js";import"./util-1ee03ed8.js";const oe={class:"container"},ie={class:"content_wrapper"},de={class:"lyecs-form-table"},_e={class:"width100"},ne={class:"width100"},ue={class:"width100"},ce={class:"width100"},re={class:"width100"},ve={class:"width100"},me={class:"width100"},pe={class:"width100"},be={class:"width100"},he={class:"width100"},fe={class:"width100"},ye={class:"width100"},ke={class:"width100"},ge={class:"width100"},we={class:"width100"},Ce={class:"width100"},xe={class:"width100"},Ve={class:"width100"},Be={class:"width100"},$e={class:"width100"},Se={class:"width100"},ze={class:"width100"},Ie={class:"width100"},Ne={class:"width100"},De={class:"width100"},Me={class:"width100"},Re={class:"width100"},Te={class:"width100"},Le={class:"width100"},Ue={class:"width100"},Ae={class:"width100"},Ee={class:"width100"},Fe={class:"width100"},Oe={class:"width100"},je={class:"width100"},qe={class:"width100"},Ke={class:"width100"},Ge={class:"width100"},He={class:"width100"},Je={class:"image"},Pe=X({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(E,{emit:F}){const g=F,h=f("sm"),O=c=>{h.value=c},V=E,B=f(!0),j=U(),N=U().currentRoute.value.query,S=f(V.isDialog?V.act:String(N.act)),D=f(V.isDialog?V.id:Number(N.id));S.value;const M=Y(),e=f({}),q=async()=>{try{const c=await le(S.value,{id:D.value});Object.assign(e.value,c.item)}catch(c){$.error(c.message),g("close")}finally{B.value=!1}},K=f([{value:1,label:"大陆身份证"},{value:2,label:"护照（限境外人士）"},{value:3,label:"来往内地通行证（中国香港居民）"},{value:4,label:"来往内地通行证（中国澳门居民）"},{value:5,label:"来往大陆通行证（中国台湾居民）"}]);Z(()=>{S.value==="detail"?q():B.value=!1});const R=async c=>{await M.value.validate();try{if(c==20&&!e.value.audit_remark){$.error("请输入审核备注");return}g("update:confirmLoading",!0);const d=await se({merchant_apply_id:D.value,status:c,audit_remark:e.value.audit_remark});if(c==10){G(d);return}g("submitCallback",d),$.success(d.message)}catch(d){$.error(d.message)}finally{g("update:confirmLoading",!1)}},G=c=>{ae.confirm("入驻申请已通过，系统已为用户自动创建商户","提示",{confirmButtonText:"前往商户列表",cancelButtonText:"取消",type:"success"}).then(()=>{j.push({path:"/adminMerchant/list"}),g("submitCallback",c)}).catch(()=>{g("submitCallback",c)})},T=f(""),z=f(!1),w=c=>{T.value=c,z.value=!0};return(c,d)=>{const C=b("el-tab-pane"),H=b("el-tabs"),s=b("el-form-item"),y=b("el-image"),L=b("el-button"),J=b("el-input"),P=b("el-form"),Q=b("a-spin"),W=b("el-dialog");return i(),r(v,null,[l("div",oe,[l("div",ie,[l("div",de,[a(H,{modelValue:h.value,"onUpdate:modelValue":d[0]||(d[0]=_=>h.value=_),class:"lyecs-tabs","tab-position":"top",onTabChange:O},{default:t(()=>[(i(),u(C,{key:1,label:"基础信息",name:"sm"})),e.value.type==2?(i(),u(C,{key:2,label:"企业信息",name:"company"})):n("",!0),(i(),u(C,{key:3,label:e.value.type==1?"个人信息":"法人代表信息",name:"base"},null,8,["label"])),(i(),u(C,{key:4,label:"商户信息",name:"merchant"})),(i(),u(C,{key:5,label:"店铺信息",name:"shop"}))]),_:1},8,["modelValue"]),B.value?n("",!0):(i(),u(P,{key:0,ref_key:"formRef",ref:M,model:e.value,"label-width":"auto"},{default:t(()=>[h.value=="sm"?(i(),r(v,{key:0},[a(s,{label:"预期店铺名称"},{default:t(()=>[l("div",_e,o(e.value.shop_data.shop_title),1)]),_:1}),a(s,{label:"入驻资质",prop:"status"},{default:t(()=>[l("div",ne,o(e.value.type==1?"个人入驻":"企业入驻"),1)]),_:1}),e.value.type==1?(i(),r(v,{key:0},[],64)):n("",!0),e.value.type==2?(i(),u(s,{key:1,label:"企业名称"},{default:t(()=>[l("div",ue,o(e.value.base_data.company_name),1)]),_:1})):n("",!0),a(s,{label:"联系人姓名"},{default:t(()=>[l("div",ce,o(e.value.merchant_data.contact_name),1)]),_:1}),a(s,{label:"联系人手机"},{default:t(()=>[l("div",re,[a(A,{mobile:e.value.merchant_data.contact_phone},null,8,["mobile"])])]),_:1}),a(s,{label:"联系人邮箱"},{default:t(()=>[l("div",ve,o(e.value.merchant_data.contact_email),1)]),_:1}),a(s,{label:"审核结果"},{default:t(()=>[l("div",me,[l("div",null,[e.value.status==1?(i(),u(I,{key:0,flicker:!0})):n("",!0),e.value.status==10?(i(),u(I,{key:1,color:"#52c41a",flicker:!0})):n("",!0),e.value.status==20?(i(),u(I,{key:2,color:"#f5222d",flicker:!1})):n("",!0),k(" "+o(e.value.status_text),1)])])]),_:1}),e.value.status==20?(i(),u(s,{key:2,label:"拒绝原因"},{default:t(()=>[l("div",pe,o(e.value.audit_remark),1)]),_:1})):n("",!0)],64)):n("",!0),h.value=="company"?(i(),r(v,{key:1},[a(s,{label:"企业名称"},{default:t(()=>[l("div",be,o(e.value.base_data.company_name),1)]),_:1}),a(s,{label:"注册地址"},{default:t(()=>[l("div",he,o(e.value.base_data.license_addr_province_name)+" "+o(e.value.base_data.business_license_address),1)]),_:1}),a(s,{label:"经营范围"},{default:t(()=>[l("div",fe,o(e.value.base_data.business_scope),1)]),_:1}),a(s,{label:"统一社会信用代码"},{default:t(()=>[l("div",ye,o(e.value.base_data.business_license_id),1)]),_:1}),a(s,{label:"营业期限"},{default:t(()=>[l("div",ke,[e.value.base_data.operating_term_type==1?(i(),r(v,{key:0},[k(o(e.value.base_data.operating_term_type_date[0]+" ～  "+e.value.base_data.operating_term_type_date[1]),1)],64)):(i(),r(v,{key:1},[k(o(e.value.base_data.operating_term_type_end)+" ～长期 ",1)],64))])]),_:1})],64)):n("",!0),h.value=="base"?(i(),r(v,{key:2},[a(s,{label:e.value.type==1?"个人姓名":"法定代表人姓名"},{default:t(()=>[l("div",ge,o(e.value.base_data.corporate_name),1)]),_:1},8,["label"]),a(s,{label:"证件类型"},{default:t(()=>{var _;return[l("div",we,o(((_=K.value.find(x=>x.value===e.value.base_data.document_type))==null?void 0:_.label)||""),1)]}),_:1}),a(s,{label:"证件号码"},{default:t(()=>[l("div",Ce,o(e.value.base_data.document_number),1)]),_:1}),a(s,{label:"性别"},{default:t(()=>[l("div",xe,o(e.value.base_data.sex==1?"男":"女"),1)]),_:1}),a(s,{label:"居住地址"},{default:t(()=>[l("div",Ve,o(e.value.base_data.residential_address),1)]),_:1}),a(s,{label:"证件有效期"},{default:t(()=>[l("div",Be,[e.value.base_data.certificate_validity_period==1?(i(),r(v,{key:0},[k(o(e.value.base_data.certificate_validity_period_date[0]+" ～ "+e.value.base_data.certificate_validity_period_date[1]),1)],64)):(i(),r(v,{key:1},[k(o(e.value.base_data.certificate_validity_period_end)+" ～ 长期 ",1)],64))])]),_:1}),a(s,{label:"证件照正面"},{default:t(()=>[l("div",$e,[a(y,{src:m(p)(e.value.base_data.front_of_photo[0].pic_url),class:"image-size",fit:"cover",onClick:d[1]||(d[1]=_=>w(m(p)(e.value.base_data.front_of_photo[0].pic_url)))},null,8,["src"])])]),_:1}),a(s,{label:"证件照反面"},{default:t(()=>[l("div",Se,[a(y,{src:m(p)(e.value.base_data.back_of_photo[0].pic_url),class:"image-size",fit:"cover",onClick:d[2]||(d[2]=_=>w(m(p)(e.value.base_data.back_of_photo[0].pic_url)))},null,8,["src"])])]),_:1}),e.value.base_data.supplementary_information.length>0?(i(),u(s,{key:0,label:"补充信息"},{default:t(()=>[l("div",ze,[(i(!0),r(v,null,ee(e.value.base_data.supplementary_information,_=>(i(),u(y,{src:m(p)(_.pic_url),class:"image-size",fit:"cover",onClick:x=>w(m(p)(_.pic_url))},null,8,["src","onClick"]))),256))])]),_:1})):n("",!0)],64)):n("",!0),h.value=="merchant"?(i(),r(v,{key:3},[a(s,{label:"商户名称"},{default:t(()=>[l("div",Ie,o(e.value.merchant_data.merchant_name),1)]),_:1}),e.value.type==1?(i(),r(v,{key:0},[a(s,{label:"持卡人"},{default:t(()=>[l("div",Ne,o(e.value.base_data.corporate_name),1)]),_:1}),a(s,{label:"开户银行"},{default:t(()=>[l("div",De,o(e.value.merchant_data.bank_deposit),1)]),_:1}),a(s,{label:"开户支行"},{default:t(()=>[l("div",Me,o(e.value.merchant_data.bank_branch),1)]),_:1}),a(s,{label:"银行卡号"},{default:t(()=>[l("div",Re,o(e.value.merchant_data.bank_card),1)]),_:1})],64)):n("",!0),e.value.type==2?(i(),r(v,{key:1},[a(s,{label:"对公账户"},{default:t(()=>[l("div",Te,o(e.value.base_data.company_name),1)]),_:1}),a(s,{label:"开户银行"},{default:t(()=>[l("div",Le,o(e.value.merchant_data.bank_deposit),1)]),_:1}),a(s,{label:"开户支行"},{default:t(()=>[l("div",Ue,o(e.value.merchant_data.bank_branch),1)]),_:1}),a(s,{label:"对公银行账号"},{default:t(()=>[l("div",Ae,o(e.value.merchant_data.bank_card),1)]),_:1}),a(s,{label:"开户许可证"},{default:t(()=>{var _;return[l("div",Ee,[((_=e.value.merchant_data.account_opening_permit)==null?void 0:_.length)>0?(i(),u(y,{key:0,src:m(p)(e.value.merchant_data.account_opening_permit[0].pic_url),class:"image-size",fit:"cover",onClick:d[3]||(d[3]=x=>w(m(p)(e.value.merchant_data.account_opening_permit[0].pic_url)))},null,8,["src"])):n("",!0)])]}),_:1})],64)):n("",!0),a(s,{label:"经营地区"},{default:t(()=>[l("div",Fe,o(e.value.merchant_data.business_address_name)+o(e.value.merchant_data.detailed_address),1)]),_:1}),e.value.type==2?(i(),u(s,{key:2,label:"营业执照"},{default:t(()=>{var _;return[l("div",Oe,[((_=e.value.merchant_data.business_license_img)==null?void 0:_.length)>0?(i(),u(y,{key:0,src:m(p)(e.value.merchant_data.business_license_img[0].pic_url),class:"image-size",fit:"cover",onClick:d[4]||(d[4]=x=>w(m(p)(e.value.merchant_data.business_license_img[0].pic_url)))},null,8,["src"])):n("",!0)])]}),_:1})):n("",!0),a(s,{label:"客服电话"},{default:t(()=>[l("div",je,o(e.value.merchant_data.contact_phone),1)]),_:1})],64)):n("",!0),h.value=="shop"?(i(),r(v,{key:4},[a(s,{label:"店铺名称"},{default:t(()=>[l("div",qe,o(e.value.shop_data.shop_title),1)]),_:1}),a(s,{label:"联系电话"},{default:t(()=>[l("div",Ke,[a(A,{mobile:e.value.shop_data.contact_mobile},null,8,["mobile"])])]),_:1}),a(s,{label:"店铺logo"},{default:t(()=>{var _;return[l("div",Ge,[((_=e.value.shop_data.shop_logo)==null?void 0:_.length)>0?(i(),u(y,{key:0,src:m(p)(e.value.shop_data.shop_logo[0].pic_url),class:"image-size",fit:"cover",onClick:d[5]||(d[5]=x=>w(m(p)(e.value.shop_data.shop_logo[0].pic_url)))},null,8,["src"])):n("",!0)])]}),_:1}),e.value.shop_data.description?(i(),u(s,{key:0,label:"店铺简介"},{default:t(()=>[l("div",He,o(e.value.shop_data.description),1)]),_:1})):n("",!0)],64)):n("",!0),e.value.status==1?(i(),r(v,{key:5},[a(s,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[a(L,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:d[6]||(d[6]=_=>R(10))},{default:t(()=>[k("审核通过")]),_:1},512),a(L,{ref:"submitBtn",class:"form-submit-btn",onClick:d[7]||(d[7]=_=>R(20))},{default:t(()=>[k("审核不通过")]),_:1},512)]),_:1}),a(J,{rows:"4",modelValue:e.value.audit_remark,"onUpdate:modelValue":d[8]||(d[8]=_=>e.value.audit_remark=_),placeholder:"请输入审核备注（审核不通过将必填）",type:"textarea"},null,8,["modelValue"])],64)):n("",!0)]),_:1},8,["model"])),a(Q,{spinning:B.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])]),a(W,{modelValue:z.value,"onUpdate:modelValue":d[9]||(d[9]=_=>z.value=_)},{default:t(()=>[l("div",Je,[a(y,{src:T.value,alt:"",fit:"cover"},null,8,["src"])])]),_:1},8,["modelValue"])],64)}}});const la=te(Pe,[["__scopeId","data-v-c889fdbd"]]);export{la as default};
