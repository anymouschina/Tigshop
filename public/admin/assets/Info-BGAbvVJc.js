import{d as x,i as m,C as D,s as O,q as E,I as f,r as n,c as I,o as S,e as C,j as U,f as L,w as a,b as o,a3 as j,E as g,a4 as F}from"./index-DrbzVNl6.js";import{a as z,c as A}from"./rechargeSetting-V5riZXGf.js";const G={class:"container"},H={class:"content_wrapper"},J={class:"lyecs-form-table"},W=x({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(N,{expose:R,emit:k}){const d=k,u=N,c=m(!0),v=D().currentRoute.value.query,p=m(u.isDialog?u.act:String(v.act)),y=m(u.isDialog?u.id:Number(v.id)),B=p.value==="add"?"create":"update",_=O(),t=m({discountMoney:"",money:"",sortOrder:1,isShow:1});E(()=>{p.value==="detail"?M():c.value=!1});const M=async()=>{try{const l=await z(p.value,{id:y.value});Object.assign(t.value,l)}catch(l){f.error(l.message),d("close")}finally{c.value=!1}},b=(l,e,r)=>{if(console.log(e),Number(e)===0||e===""){r(new Error("金额不能为0或者为空！"));return}else if(Number(e)<0){r(new Error("金额必须大于0！"));return}else r()},w=async()=>{await _.value.validate();try{d("update:confirmLoading",!0);const l=await A(B,{id:y.value,...t.value});d("submitCallback",l),f.success("操作成功")}catch(l){f.error(l.message)}finally{d("update:confirmLoading",!1)}};return R({onFormSubmit:()=>{w()}}),(l,e)=>{const r=n("TigInput"),i=n("el-form-item"),V=n("el-radio"),T=n("el-radio-group"),h=n("el-button"),q=n("el-form");return S(),I("div",G,[C("div",H,[C("div",J,[c.value?L("",!0):(S(),U(q,{key:0,ref_key:"formRef",ref:_,model:t.value,"label-width":"auto"},{default:a(()=>[o(i,{prop:"money",label:"充值金额",rules:[{required:!0,validator:b,trigger:"blur"}]},{default:a(()=>[o(r,{classType:"tig-form-input",type:"decimal",modelValue:t.value.money,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.money=s),min:0},null,8,["modelValue"])]),_:1},8,["rules"]),o(i,{prop:"discountMoney",label:"赠送金额",rules:[{required:!0,validator:b,trigger:"blur"}]},{default:a(()=>[o(r,{classType:"tig-form-input",type:"decimal",modelValue:t.value.discountMoney,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.discountMoney=s),min:0},null,8,["modelValue"])]),_:1},8,["rules"]),o(i,{prop:"sortOrder",label:"排序"},{default:a(()=>[o(r,{classType:"tig-form-input",type:"integer",modelValue:t.value.sortOrder,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.sortOrder=s)},null,8,["modelValue"])]),_:1}),o(i,{prop:"isShow",label:"是否显示"},{default:a(()=>[o(T,{modelValue:t.value.isShow,"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.isShow=s)},{default:a(()=>[o(V,{value:1},{default:a(()=>e[4]||(e[4]=[g("是")])),_:1}),o(V,{value:0},{default:a(()=>e[5]||(e[5]=[g("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),j(o(i,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[o(h,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:w},{default:a(()=>e[6]||(e[6]=[g("提交")])),_:1},512)]),_:1},512),[[F,!u.isDialog]])]),_:1},8,["model"]))])])])}}});export{W as default};
