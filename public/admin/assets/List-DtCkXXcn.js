import{d as P,K as B,i as f,G as N,q as K,c as g,e as s,b as o,w as a,M as $,g as n,f as w,E as m,D as v,I as C,r as d,o as k}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{P as x}from"./PopFormElm-BZp1_Wme.js";import{D as E}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as G}from"./Pagination-wR9huHyl.js";import{g as M,b as R,u as O,d as j}from"./friendLinks-BOZbZGEy.js";import{_ as H}from"./Image.vue_vue_type_script_setup_true_lang-BWzCs9jv.js";import{_ as S}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./format-CRgx78oe.js";const J={class:"container"},Q={class:"content_wrapper"},W={class:"lyecs-table-list-warp"},X={class:"list-table-tool lyecs-search-warp"},Y={class:"advanced-search-warp list-table-tool-row"},Z={class:"simple-form-warp"},ee={class:"simple-form-field"},te={class:"form-group"},se={class:"control-container"},oe={class:"simple-form-field"},ae={class:"form-group"},le={class:"control-container"},ne={class:"simple-form-field"},ie={class:"form-group"},re={class:"control-container"},de={key:0},pe={class:"table-container"},ce=["href"],ue={class:"empty-warp"},me={key:0,class:"empty-bg"},_e={key:0,class:"pagination-con"},Se=P({__name:"List",setup(fe){const V=B(),I=f([]),c=f(!0),_=f(0),u=f([]),i=N({page:1,size:V.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),r=async()=>{c.value=!0;try{const l=await M({...i});I.value=l.records,_.value=l.total}catch(l){C.error(l.message)}finally{c.value=!1}};K(()=>{r()});const b=()=>{r()},U=({prop:l,order:e})=>{i.sortField=l,i.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",r()},L=async l=>{try{const e=await R(l,{ids:u.value});C.success("操作成功"),r()}catch(e){C.error(e.message)}},F=l=>{u.value=l.map(e=>e.linkId)};return(l,e)=>{const h=d("el-button"),q=d("TigInput"),z=d("el-popconfirm"),p=d("el-table-column"),A=d("el-divider"),D=d("el-table"),T=d("a-spin");return k(),g("div",J,[s("div",Q,[s("div",W,[s("div",X,[s("div",Y,[s("div",Z,[s("div",ee,[s("div",te,[s("div",se,[o(q,{modelValue:i.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>i.keyword=t),name:"keyword",placeholder:"输入链接名称",onKeyup:$(b,["enter"]),clearable:"",onClear:b},{append:a(()=>[o(h,{onClick:b},{default:a(()=>e[4]||(e[4]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),s("div",oe,[s("div",ae,[s("div",le,[o(n(S),{params:{act:"add"},isDrawer:"",path:"setting/friendLinks/Info",title:"添加友情链接",width:"580px",onOkCallback:r},{default:a(()=>[o(h,{type:"primary"},{default:a(()=>e[5]||(e[5]=[m("添加友情链接")])),_:1})]),_:1})])])]),s("div",ne,[s("div",ie,[s("div",re,[o(z,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=t=>L("del"))},{reference:a(()=>[o(h,{disabled:u.value.length===0},{default:a(()=>e[6]||(e[6]=[m("批量删除")])),_:1},8,["disabled"])]),_:1}),u.value.length>0?(k(),g("span",de,[e[7]||(e[7]=m(" 已选择：")),s("b",null,v(u.value.length),1),e[8]||(e[8]=m(" 项 "))])):w("",!0)])])])])])]),s("div",pe,[o(T,{spinning:c.value},{default:a(()=>[o(D,{data:I.value,loading:c.value,total:_.value,"row-key":"linkId",onSelectionChange:F,onSortChange:U},{empty:a(()=>[s("div",ue,[c.value?w("",!0):(k(),g("div",me,"暂无数据"))])]),default:a(()=>[o(p,{type:"selection",width:"32"}),o(p,{label:"链接名称"},{default:a(({row:t})=>[o(n(x),{"org-value":t.linkTitle,"onUpdate:orgValue":y=>t.linkTitle=y,max:10,params:{id:t.linkId,field:"linkTitle"},requestApi:n(O),label:"链接名称",type:"input"},{default:a(()=>[s("div",null,v(t.linkTitle),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(p,{label:"链接地址",prop:"linkUrl"},{default:a(({row:t})=>[s("a",{href:t.linkUrl,target:"_blank"},v(t.linkUrl),9,ce)]),_:1}),o(p,{label:"链接LOGO"},{default:a(({row:t})=>[o(n(H),{src:t.linkLogo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),o(p,{label:"排序",prop:"sortOrder",sortable:"custom"},{default:a(({row:t})=>[o(n(x),{"org-value":t.sortOrder,"onUpdate:orgValue":y=>t.sortOrder=y,params:{id:t.linkId,field:"sortOrder"},requestApi:n(O),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"integer"},{default:a(()=>[s("div",null,v(t.sortOrder),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(p,{width:150,fixed:"right",label:"操作"},{default:a(({row:t})=>[o(n(S),{params:{act:"detail",id:t.linkId},isDrawer:"",path:"setting/friendLinks/Info",title:"编辑配送方式",width:"580px",onOkCallback:r},{default:a(()=>e[9]||(e[9]=[s("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(A,{direction:"vertical"}),o(n(E),{params:{id:t.linkId},requestApi:n(j),onAfterDelete:r},{default:a(()=>e[10]||(e[10]=[m("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),_.value>0?(k(),g("div",_e,[o(n(G),{page:i.page,"onUpdate:page":e[2]||(e[2]=t=>i.page=t),size:i.size,"onUpdate:size":e[3]||(e[3]=t=>i.size=t),total:_.value,onCallback:r},null,8,["page","size","total"])])):w("",!0)])])])])}}});export{Se as default};
