import{d as $,K as T,i as f,G as E,q as L,c as g,e as a,b as o,w as s,N as M,f as I,g as r,I as C,r as n,o as b,E as _,D as S}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{P as O}from"./PopFormElm-BZp1_Wme.js";import{_ as G}from"./Switch.vue_vue_type_script_setup_true_lang-C5nzofSO.js";import{D as K}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as R}from"./Pagination-wR9huHyl.js";import{_ as j}from"./Image.vue_vue_type_script_setup_true_lang-BWzCs9jv.js";import{g as H,u as h,d as J,b as Q}from"./productServices-Dv7p4oWa.js";import{_ as w}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./format-CRgx78oe.js";const W={class:"container"},X={class:"content_wrapper"},Y={class:"lyecs-table-list-warp"},Z={class:"list-table-tool lyecs-search-warp"},ee={class:"advanced-search-warp list-table-tool-row"},te={class:"simple-form-warp"},oe={class:"simple-form-field"},ae={class:"form-group"},se={class:"control-container"},re={class:"simple-form-field"},le={class:"form-group"},ie={class:"control-container"},de={class:"simple-form-field"},ne={class:"form-group"},ce={class:"control-container"},pe={key:0},ue={class:"table-container"},me={style:{position:"relative"}},_e={class:"empty-warp"},ve={key:0,class:"empty-bg"},fe={key:0,class:"pagination-con"},qe=$({__name:"List",setup(ge){const x=T(),V=f(),u=f(!0),v=f(0),m=f([]),i=E({page:1,size:x.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),d=async()=>{u.value=!0;try{const l=await H({...i});V.value=l.records,v.value=l.total}catch(l){C.error(l.message)}finally{u.value=!1}};L(()=>{d()});const y=()=>{d()},D=({prop:l,order:e})=>{i.sortField=l,i.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",d()},q=async l=>{try{const e=await Q(l,{ids:m.value});C.success("操作成功"),d()}catch(e){C.error(e.message)}},A=l=>{m.value=l.map(e=>e.productServiceId)};return(l,e)=>{const k=n("el-button"),U=n("TigInput"),N=n("el-popconfirm"),P=n("el-form"),c=n("el-table-column"),z=n("el-divider"),F=n("el-table"),B=n("a-spin");return b(),g("div",W,[a("div",X,[a("div",Y,[a("div",Z,[o(P,{model:i,onSubmit:M(y,["prevent"])},{default:s(()=>[a("div",ee,[a("div",te,[a("div",oe,[a("div",ae,[a("div",se,[o(U,{modelValue:i.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>i.keyword=t),name:"keyword",placeholder:"输入服务名称",clearable:"",onClear:y},{append:s(()=>[o(k,{onClick:y},{default:s(()=>e[4]||(e[4]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),a("div",re,[a("div",le,[a("div",ie,[o(r(w),{params:{act:"add"},isDrawer:"",path:"product/productServices/Info",title:"添加商品服务",width:"600px",onOkCallback:d},{default:s(()=>[o(k,{type:"primary"},{default:s(()=>e[5]||(e[5]=[_("添加商品服务")])),_:1})]),_:1})])])]),a("div",de,[a("div",ne,[a("div",ce,[o(N,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=t=>q("del"))},{reference:s(()=>[o(k,{disabled:m.value.length===0},{default:s(()=>e[6]||(e[6]=[_("批量删除")])),_:1},8,["disabled"])]),_:1}),m.value.length>0?(b(),g("span",pe,[e[7]||(e[7]=_(" 已选择：")),a("b",null,S(m.value.length),1),e[8]||(e[8]=_(" 项 "))])):I("",!0)])])])])])]),_:1},8,["model"])]),a("div",ue,[o(B,{spinning:u.value},{default:s(()=>[o(F,{data:V.value,loading:u.value,total:v.value,"row-key":"productServiceId",onSelectionChange:A,onSortChange:D},{empty:s(()=>[a("div",_e,[u.value?I("",!0):(b(),g("div",ve,"暂无数据"))])]),default:s(()=>[o(c,{type:"selection",width:"32"}),o(c,{width:300,label:"服务名称",prop:"productServiceId",sortable:"custom"},{default:s(({row:t})=>[a("div",me,[o(r(O),{label:"服务名称",type:"textarea",requestApi:r(h),"org-value":t.productServiceName,"onUpdate:orgValue":p=>t.productServiceName=p,params:{id:t.productServiceId,field:"productServiceName"},max:100},{default:s(()=>[a("div",null,S(t.productServiceName),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])])]),_:1}),o(c,{label:"图标"},{default:s(({row:t})=>[o(r(j),{src:t.icoImg,fit:"contain",style:{height:"25px"}},null,8,["src"])]),_:1}),o(c,{label:"简介",prop:"productServiceDesc"},{default:s(({row:t})=>[o(r(O),{max:100,label:"简介",type:"input",requestApi:r(h),"org-value":t.productServiceDesc,"onUpdate:orgValue":p=>t.productServiceDesc=p,params:{id:t.productServiceId,field:"productServiceDesc"}},{default:s(()=>[a("div",null,S(t.productServiceDesc),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])]),_:1}),o(c,{label:"默认显示",prop:"defaultOn",sortable:"custom"},{default:s(({row:t})=>[o(r(G),{checked:t.defaultOn,"onUpdate:checked":p=>t.defaultOn=p,requestApi:r(h),params:{id:t.productServiceId,field:"defaultOn"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),o(c,{label:"排序",prop:"sortOrder",sortable:"custom"},{default:s(({row:t})=>[o(r(O),{label:"排序",type:"integer",requestApi:r(h),"org-value":t.sortOrder,"onUpdate:orgValue":p=>t.sortOrder=p,params:{id:t.productServiceId,field:"sortOrder"},extra:"默认值为50，数值越小，排序越靠前"},{default:s(()=>[a("div",null,S(t.sortOrder),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])]),_:1}),o(c,{width:150,fixed:"right",label:"操作"},{default:s(({row:t})=>[o(r(w),{params:{act:"detail",id:t.productServiceId},isDrawer:"",path:"product/productServices/Info",title:"编辑商品服务",width:"600px",onOkCallback:d},{default:s(()=>e[9]||(e[9]=[a("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(z,{direction:"vertical"}),o(r(K),{params:{id:t.productServiceId},requestApi:r(J),onAfterDelete:d},{default:s(()=>e[10]||(e[10]=[_("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),v.value>0?(b(),g("div",fe,[o(r(R),{page:i.page,"onUpdate:page":e[2]||(e[2]=t=>i.page=t),size:i.size,"onUpdate:size":e[3]||(e[3]=t=>i.size=t),total:v.value,onCallback:d},null,8,["page","size","total"])])):I("",!0)])])])])}}});export{qe as default};
