/* empty css             */import{d as h,K as E,i as _,G as R,q as j,c as g,e as s,f as u,b as a,w as l,g as r,I as G,r as m,o as p,E as n,D as b,j as M,L as y,_ as K}from"./index-DrbzVNl6.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import"./index-CeQDmMxd.js";import{D as A}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as W}from"./Pagination-wR9huHyl.js";/* empty css                                                                  *//* empty css                                                                              */import{S as J}from"./SelectTimeInterval-C-WvSG46.js";import{f}from"./time-Bh5UhrfW.js";import{g as Q,u as q,d as X}from"./material-CEolRWRb.js";import{_ as Z}from"./selectCategory.vue_vue_type_script_setup_true_lang-B-kT_0F7.js";import{_ as V}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./category-CCI4VFuO.js";const ee={class:"container"},te={class:"content_wrapper"},se={class:"lyecs-table-list-warp"},ae={class:"list-table-tool lyecs-search-warp"},le={class:"advanced-search-warp list-table-tool-row"},oe={class:"simple-form-warp"},ie={class:"simple-form-field"},ne={class:"form-group"},de={class:"control-container"},re={class:"simple-form-field"},me={class:"form-group"},pe={class:"control-container flex flex-align-center"},ue={style:{"margin-left":"10px"}},fe={class:"simple-form-field"},ce={class:"advanced-search-warp list-table-tool-row"},_e={class:"simple-form-warp"},ve={class:"simple-form-field"},ge={class:"table-container"},be={class:"tit-row flex flex-align-center"},ye={key:0,class:"label"},De={class:"txt"},Ye={class:"empty-warp"},Te={key:0,class:"empty-bg"},ke={key:0,class:"pagination-con"},Me={key:0,class:"selected-action-warp"},Ce={class:"selected-action"},He=h({__name:"List",setup(xe){const N=E(),w=_([]),D=_(!0),Y=_(0);_(0);const C=_([]),o=R({page:1,size:N.pageSize,sortField:"",sortOrder:"",categoryId:"",endTime:"",startTime:""}),H=_(-1),I=i=>{if(i===-1){H.value=i;return}o.startTime=f(new Date,"YYYY-MM-DD HH:mm:ss"),i===0&&(o.endTime=f(new Date,"YYYY-MM-DD HH:mm:ss")),i===1&&(o.startTime=f(y(1,"sub"),"YYYY-MM-DD HH:mm:ss"),o.endTime=f(y(1,"sub"),"YYYY-MM-DD HH:mm:ss")),i===2&&(o.endTime=f(y(7,"add"),"YYYY-MM-DD HH:mm:ss")),i===3&&(o.endTime=f(y(30,"add"),"YYYY-MM-DD HH:mm:ss")),i===4&&(o.endTime=f(y(180,"add"),"YYYY-MM-DD HH:mm:ss")),d()},d=async()=>{D.value=!0;try{const i=await Q({...o});w.value=i.records,Y.value=i.total}catch(i){G.error(i.message)}finally{D.value=!1}};j(()=>{d()});const S=()=>{d()},U=()=>{o.status=-1,o.title="",o.endTime="",o.startTime="",d()},O=({prop:i,order:e})=>{o.sortField=i,o.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",d()},B=i=>{C.value=i.map(e=>e.id)};return(i,e)=>{const T=m("el-radio-button"),F=m("el-radio-group"),c=m("el-button"),L=m("el-form"),k=m("el-table-column"),x=m("el-divider"),z=m("el-space"),$=m("el-table"),P=m("a-spin");return p(),g("div",ee,[s("div",te,[s("div",se,[s("div",ae,[a(L,{model:o,name:"form"},{default:l(()=>[s("div",le,[s("div",oe,[s("div",ie,[s("div",ne,[e[7]||(e[7]=s("label",{class:"control-label"},[s("span",null,"素材分类：")],-1)),s("div",de,[a(Z,{categoryId:o.categoryId,"onUpdate:categoryId":e[0]||(e[0]=t=>o.categoryId=t),onOnChange:S},null,8,["categoryId"])])])]),s("div",re,[s("div",me,[e[12]||(e[12]=s("label",{class:"control-label"},[s("span",null,"推送时间：")],-1)),s("div",pe,[a(r(J),{"start-date":o.startTime,"onUpdate:startDate":e[1]||(e[1]=t=>o.startTime=t),"end-date":o.endTime,"onUpdate:endDate":e[2]||(e[2]=t=>o.endTime=t),"value-format":"YYYY-MM-DD HH:mm:ss",onCallback:e[3]||(e[3]=t=>I(-1))},null,8,["start-date","end-date"]),s("div",ue,[a(F,{class:"itemWidth",modelValue:H.value,"onUpdate:modelValue":e[4]||(e[4]=t=>H.value=t),onChange:I},{default:l(()=>[a(T,{value:0},{default:l(()=>e[8]||(e[8]=[n("今天")])),_:1}),a(T,{value:1},{default:l(()=>e[9]||(e[9]=[n("昨天")])),_:1}),a(T,{value:2},{default:l(()=>e[10]||(e[10]=[n("近7天")])),_:1}),a(T,{value:3},{default:l(()=>e[11]||(e[11]=[n("近30天")])),_:1})]),_:1},8,["modelValue"])])])])]),s("div",fe,[a(c,{type:"primary",onClick:S},{default:l(()=>e[13]||(e[13]=[n("搜索")])),_:1})])])]),s("div",ce,[s("div",_e,[s("div",ve,[a(r(V),{isDrawer:"",onOkCallback:d,title:"添加素材",width:"700px",path:"salesman/material/Info",params:{act:"add"}},{default:l(()=>[a(c,{type:"primary"},{default:l(()=>e[14]||(e[14]=[n("立即新建")])),_:1})]),_:1}),a(c,{class:"ml10",onClick:U},{default:l(()=>e[15]||(e[15]=[n("清空筛选条件")])),_:1})])])])]),_:1},8,["model"])]),s("div",ge,[a(P,{spinning:D.value},{default:l(()=>[a($,{data:w.value,total:Y.value,"row-key":"id",onSelectionChange:B,onSortChange:O},{empty:l(()=>[s("div",Ye,[D.value?u("",!0):(p(),g("div",Te,"暂无数据"))])]),default:l(()=>[a(k,{label:"素材内容",prop:"content",fixed:"left"},{default:l(({row:t})=>[s("div",be,[t.isTop!=0?(p(),g("div",ye,"置顶")):u("",!0),s("div",De,b(t.content||"--"),1)])]),_:1}),a(k,{label:"相关商品",width:200},{default:l(({row:t})=>{var v;return[n(b(((v=t.product)==null?void 0:v.productName)||"--"),1)]}),_:1}),a(k,{label:"分类",width:160},{default:l(({row:t})=>{var v;return[n(b(((v=t.category)==null?void 0:v.categoryName)||"--"),1)]}),_:1}),a(k,{width:200,fixed:"right",label:"操作"},{default:l(({row:t})=>[a(z,{size:0},{default:l(()=>[t.isTop!=0?(p(),M(r(A),{key:0,onAfterDelete:d,requestApi:r(q),params:{id:t.id,field:"isTop",val:0},title:"确定取消置顶吗？"},{default:l(()=>e[16]||(e[16]=[n("取消置顶")])),_:2},1032,["requestApi","params"])):u("",!0),t.isTop!=0?(p(),M(x,{key:1,direction:"vertical"})):u("",!0),a(r(V),{params:{act:"detail",id:t.id},isDrawer:"",path:"salesman/material/Info",title:"编辑素材",width:"700px",onOkCallback:d},{default:l(()=>e[17]||(e[17]=[s("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),a(x,{direction:"vertical"}),a(r(A),{onAfterDelete:d,requestApi:r(q),params:{id:t.id,field:"isAvailable",val:t.isAvailable==1?0:1},title:`确认${t.isAvailable==1?"失效":"恢复"}？`},{default:l(()=>[n(b(t.isAvailable==1?"失效":"恢复"),1)]),_:2},1032,["requestApi","params","title"]),t.isAvailable!==1?(p(),M(x,{key:2,direction:"vertical"})):u("",!0),t.isAvailable!==1?(p(),M(r(A),{key:3,onAfterDelete:d,requestApi:r(X),params:{id:t.id}},{default:l(()=>e[18]||(e[18]=[n("删除")])),_:2},1032,["requestApi","params"])):u("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),Y.value>0?(p(),g("div",ke,[a(r(W),{page:o.page,"onUpdate:page":e[5]||(e[5]=t=>o.page=t),size:o.size,"onUpdate:size":e[6]||(e[6]=t=>o.size=t),total:Y.value,onCallback:d},null,8,["page","size","total"])])):u("",!0)]),C.value.length>0?(p(),g("div",Me,[s("div",Ce,[a(z,null,{default:l(()=>[s("span",null,[e[19]||(e[19]=n("已选择：")),s("b",null,b(C.value.length),1),e[20]||(e[20]=n(" 项"))]),a(c,null,{default:l(()=>e[21]||(e[21]=[n("设置等级")])),_:1}),a(c,null,{default:l(()=>e[22]||(e[22]=[n("分组")])),_:1}),a(c,null,{default:l(()=>e[23]||(e[23]=[n("清退")])),_:1})]),_:1})])])):u("",!0)])])])}}}),he=K(He,[["__scopeId","data-v-12499810"]]);export{he as default};
