/* empty css             */import{y,d as C,i as V,s as P,q as B,c as I,e as o,b as l,w as t,I as f,r as d,o as k,E as i,_ as E}from"./index-DrbzVNl6.js";import{c as A}from"./format-CRgx78oe.js";const F=()=>y({url:"setting/config/mailSettings",method:"get"}),G=v=>y({url:"setting/config/saveMail",method:"post",data:v}),N=v=>y({url:"setting/config/sendTestEmail",method:"post",params:v}),H={class:"container"},L={class:"content_wrapper"},R={class:"lyecs-form-table"},q={class:"selected-action-warp"},Q={class:"selected-action",style:{"padding-left":"80px"}},W=C({__name:"Mail",emits:["submitCallback","update:confirmLoading","close"],setup(v,{expose:S,emit:z}){const m=V(!1),_=V(!0),M=P(),s=V({}),x=async()=>{try{const n=await F();s.value=A(n)}catch(n){f.error(n.message)}finally{_.value=!1}};B(()=>{x()});const U=async()=>{m.value=!0;try{const n=await N({testMailAddress:s.value.testMailAddress});f.success("操作成功")}catch(n){f.error(n.message)}finally{m.value=!1}},b=async()=>{m.value=!0;try{const n=await G(s.value);f.success("修改成功")}catch(n){f.error(n.message)}finally{m.value=!1}};return S({onFormSubmit:()=>{b()}}),(n,e)=>{const r=d("el-radio"),g=d("el-radio-group"),u=d("el-form-item"),p=d("TigInput"),T=d("el-button"),w=d("el-form"),c=d("a-spin");return k(),I("div",H,[o("div",L,[o("div",R,[e[22]||(e[22]=o("div",{class:"notice-warp"},[o("p",null,"提示：推荐使用QQ的域名邮箱（免费），设置流程请看Tigshop教程，另外请确保服务器防火墙未拦截邮箱发送，且对应的端口开放。")],-1)),l(c,{spinning:_.value,style:{width:"100%","margin-top":"100px"}},{default:t(()=>[l(w,{ref_key:"formRef",ref:M,model:s.value,"label-width":"auto"},{default:t(()=>[l(u,{label:"邮件服务",prop:"mailService"},{default:t(()=>[l(g,{modelValue:s.value.mailService,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.mailService=a),class:"itemWidth"},{default:t(()=>[l(r,{value:0},{default:t(()=>e[9]||(e[9]=[i("本地邮件服务器")])),_:1}),l(r,{value:1},{default:t(()=>e[10]||(e[10]=[i("SMTP服务")])),_:1})]),_:1},8,["modelValue"]),e[11]||(e[11]=o("div",{class:"extra"},"如果您选择了采用服务器内置的 Mail 服务，您不需要填写下面的内容。",-1))]),_:1}),l(u,{label:"是否加密连接(SSL)",prop:"smtpSsl"},{default:t(()=>[l(g,{modelValue:s.value.smtpSsl,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.smtpSsl=a),class:"itemWidth"},{default:t(()=>[l(r,{value:1},{default:t(()=>e[12]||(e[12]=[i("是")])),_:1}),l(r,{value:0},{default:t(()=>e[13]||(e[13]=[i("否")])),_:1})]),_:1},8,["modelValue"]),e[14]||(e[14]=o("div",{class:"extra"},"SMTP一般要求加密",-1))]),_:1}),l(u,{label:"发送邮件服务器地址(SMTP)",prop:"smtpHost"},{default:t(()=>[o("div",null,[l(p,{classType:"tig-form-input",modelValue:s.value.smtpHost,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.smtpHost=a),type:"text"},null,8,["modelValue"]),e[15]||(e[15]=o("div",{class:"extra"},"邮件服务器主机地址。如果本机可以发送邮件则设置为localhost",-1))])]),_:1}),l(u,{label:"服务器端口",prop:"smtpPort"},{default:t(()=>[l(p,{classType:"tig-form-input",TigInput:"",type:"integer",modelValue:s.value.smtpPort,"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.smtpPort=a)},null,8,["modelValue"])]),_:1}),l(u,{label:"邮件发送帐号",prop:"smtpUser"},{default:t(()=>[o("div",null,[l(p,{classType:"tig-form-input",modelValue:s.value.smtpUser,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.smtpUser=a),type:"text"},null,8,["modelValue"]),e[16]||(e[16]=o("div",{class:"extra"},"发送邮件所需的认证帐号，如果没有就为空着",-1))])]),_:1}),l(u,{label:"帐号密码",prop:"smtpPass"},{default:t(()=>[l(p,{classType:"tig-form-input",modelValue:s.value.smtpPass,"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.smtpPass=a),type:"password"},null,8,["modelValue"])]),_:1}),l(u,{label:"邮件回复地址",prop:"smtpMail"},{default:t(()=>[l(p,{classType:"tig-form-input",modelValue:s.value.smtpMail,"onUpdate:modelValue":e[6]||(e[6]=a=>s.value.smtpMail=a),type:"text"},null,8,["modelValue"])]),_:1}),l(u,{label:"邮件编码",prop:"mailCharset"},{default:t(()=>[l(g,{modelValue:s.value.mailCharset,"onUpdate:modelValue":e[7]||(e[7]=a=>s.value.mailCharset=a)},{default:t(()=>[l(r,{label:"UTF8"},{default:t(()=>e[17]||(e[17]=[i("国际编码(UTF8)")])),_:1}),l(r,{label:"GB2312"},{default:t(()=>e[18]||(e[18]=[i("简体中文(GB2312)")])),_:1}),l(r,{label:"BIG5"},{default:t(()=>e[19]||(e[19]=[i("繁体中文(BIG5)")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"测试邮件地址",prop:"testMailAddress"},{default:t(()=>[l(p,{classType:"tig-form-input",modelValue:s.value.testMailAddress,"onUpdate:modelValue":e[8]||(e[8]=a=>s.value.testMailAddress=a),type:"text"},{append:t(()=>[l(T,{loading:m.value,onClick:U},{default:t(()=>e[20]||(e[20]=[i("发送测试邮件 ")])),_:1},8,["loading"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),o("div",q,[o("div",Q,[l(T,{loading:m.value,class:"form-submit-btn",size:"large",type:"primary",onClick:b},{default:t(()=>e[21]||(e[21]=[i("提 交")])),_:1},8,["loading"])])])]),_:1},8,["spinning"])])])])}}}),O=E(W,[["__scopeId","data-v-4ae85b8e"]]);export{O as default};
