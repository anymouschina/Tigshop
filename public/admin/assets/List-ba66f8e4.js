import{d as J,E as Q,j as u,I as W,x as X,aO as Y,r as i,o as c,c as p,e as s,b as o,w as a,f as v,h as m,K as V,L as Z,n as z,H as r,G as _,k as $,p as ee,i as te,_ as se}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";/* empty css                                                                    */import{P as oe}from"./Pagination-8eb7b6b1.js";import{p as L}from"./format-4e0206d3.js";import{_ as ae}from"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import{u as le}from"./config-9548fa9b.js";import{a as ne,b as ie}from"./shop-b8a8699a.js";import{S as I}from"./StatusDot-19af4eec.js";import{_ as ce}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";const B=g=>(ee("data-v-ca8c3004"),g=g(),te(),g),re={class:"container"},de={class:"content_wrapper"},_e={class:"container"},ue={class:"lyecs-table-list-warp"},pe={class:"list-table-tool lyecs-search-warp"},me={class:"advanced-search-warp list-table-tool-row"},fe={class:"simple-form-warp"},ve={class:"simple-form-field"},he={class:"form-group"},ge={class:"control-container"},be=B(()=>s("span",{class:"iconfont icon-chakan1"},null,-1)),ye={class:"simple-form-field"},ke={class:"form-group"},we={class:"tabs flex"},Ce={key:0},Se={class:"simple-form-field"},xe={class:"form-group"},Ve=B(()=>s("label",{class:"control-label"},[s("span",null,"店铺状态：")],-1)),ze={class:"control-container"},Le={class:"simple-form-field"},Be={class:"table-container"},Oe={key:2,style:{color:"red"}},Ue={key:3,style:{color:"green"}},$e=B(()=>s("a",{class:"btn-link"},"查看资金日志",-1)),Ie={class:"empty-warp"},Ne={key:0,class:"empty-bg"},Pe={key:0,class:"pagination-con"},De={key:0,class:"selected-action-warp"},Ee={class:"selected-action"},Fe=J({__name:"List",setup(g){const b=Q().currentRoute.value.query,N=le(),O=u([]),h=u(!1),y=u(0),k=u([]),P=u(!1),l=W({page:1,size:N.get("page_size"),sort_field:"",sort_order:"",keyword:"",status:0}),w=n=>{l.status=n,f()},f=async()=>{h.value=!0;try{const n=await ne({...l});O.value=n.filter_result,y.value=n.total}catch(n){V.error(n.message)}finally{h.value=!1}},D=()=>{let n=window.location.href,t=new URL(n);t.search="",window.history.replaceState({},document.title,t.toString())},E=u(),U=u(0);X(()=>{f(),console.log(b),b.id&&Y.confirm(`为[${b.company_name||"--"}]立即创建店铺?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{U.value=Number(b.id),E.value.show()}).catch(()=>{U.value=0,D()})});const C=()=>{f()},F=({prop:n,order:t})=>{l.sort_field=n,l.sort_order=t=="ascending"?"asc":t=="descending"?"desc":"",f()},K=async n=>{try{const t=await ie(n,{ids:k.value});V.success(t.message),f()}catch(t){V.error(t.message)}},M=n=>{k.value=n.map(t=>t.shop_id)};return(n,t)=>{const S=i("el-button"),R=i("el-input"),x=i("el-option"),T=i("el-select"),j=i("el-form"),d=i("el-table-column"),q=i("el-table"),G=i("a-spin"),A=i("el-popconfirm"),H=i("el-space");return c(),p("div",re,[s("div",de,[s("div",_e,[s("div",ue,[s("div",pe,[o(j,{model:l},{default:a(()=>[s("div",me,[s("div",fe,[s("div",ve,[s("div",he,[s("div",ge,[o(R,{modelValue:l.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>l.keyword=e),name:"username",placeholder:"输入店铺/会员名称",onKeyup:Z(C,["enter"])},{append:a(()=>[o(S,{onClick:C},{default:a(()=>[be]),_:1})]),_:1},8,["modelValue"])])])]),s("div",ye,[s("div",ke,[s("div",we,[s("div",{class:z(["item",l.status==0?"active":""]),onClick:t[1]||(t[1]=e=>w(0))},"全部",2),s("div",{class:z(["item",l.status==1?"active":""]),onClick:t[2]||(t[2]=e=>w(1))},"开业",2),s("div",{class:z(["item",l.status==10?"active":""]),onClick:t[3]||(t[3]=e=>w(10))},"关店",2)])])]),P.value?(c(),p("div",Ce,[s("div",Se,[s("div",xe,[Ve,s("div",ze,[o(T,{modelValue:l.status,"onUpdate:modelValue":t[4]||(t[4]=e=>l.status=e),clearable:""},{default:a(()=>[o(x,{value:0,label:"全部"}),o(x,{value:1,label:"运营中"}),o(x,{value:10,label:"关闭"})]),_:1},8,["modelValue"])])])]),s("div",Le,[o(S,{type:"primary",onClick:C},{default:a(()=>[r("搜索")]),_:1})])])):m("",!0)])])]),_:1},8,["model"])]),s("div",Be,[o(G,{spinning:h.value},{default:a(()=>[o(q,{data:O.value,loading:h.value,total:y.value,"row-key":"shop_id",onSelectionChange:M,onSortChange:F},{empty:a(()=>[s("div",Ie,[h.value?m("",!0):(c(),p("div",Ne,"暂无数据"))])]),default:a(()=>[o(d,{label:"店铺名称"},{default:a(({row:e})=>[r(_(e.shop_title||"--"),1)]),_:1}),o(d,{label:"店铺LOGO"},{default:a(({row:e})=>[o(v(ae),{src:e.shop_logo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),o(d,{label:"店铺状态"},{default:a(({row:e})=>[e.status==10?(c(),$(I,{key:0,color:"red",flicker:!0})):m("",!0),e.status==1?(c(),$(I,{key:1,color:"green",flicker:!0})):m("",!0),e.status===10?(c(),p("span",Oe,_(e.status_text),1)):e.status===1?(c(),p("span",Ue,_(e.status_text),1)):m("",!0)]),_:1}),o(d,{label:"店铺资金",sortable:"custom"},{default:a(({row:e})=>[r(_(v(L)(e.shop_money)||0),1)]),_:1}),o(d,{label:"待结算金额",sortable:"custom"},{default:a(({row:e})=>[r(_(v(L)(e.un_settlement_order)||0),1)]),_:1}),o(d,{label:"不可用资金",sortable:"custom"},{default:a(({row:e})=>[r(_(v(L)(e.frozen_money)||0),1)]),_:1}),o(d,{label:"开店时间"},{default:a(({row:e})=>[r(_(e.add_time),1)]),_:1}),o(d,{width:120,fixed:"right",label:"操作"},{default:a(({row:e})=>[o(v(ce),{params:{shop_id:e.shop_id},showClose:!1,showOnOk:!1,isDrawer:"",path:"shop/financialLog/List",title:"资金日志",width:"800px"},{default:a(()=>[$e]),_:2},1032,["params"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),y.value>0?(c(),p("div",Pe,[o(v(oe),{page:l.page,"onUpdate:page":t[5]||(t[5]=e=>l.page=e),size:l.size,"onUpdate:size":t[6]||(t[6]=e=>l.size=e),total:y.value,onCallback:f},null,8,["page","size","total"])])):m("",!0)]),k.value.length>0?(c(),p("div",De,[s("div",Ee,[o(H,null,{default:a(()=>[s("span",null,[r("已选择："),s("b",null,_(k.value.length),1),r(" 项")]),o(A,{title:"您确认要批量删除所选数据吗？",onConfirm:t[7]||(t[7]=e=>K("del"))},{reference:a(()=>[o(S,null,{default:a(()=>[r("批量删除")]),_:1})]),_:1})]),_:1})])])):m("",!0)])])])])}}});const Ye=se(Fe,[["__scopeId","data-v-ca8c3004"]]);export{Ye as default};
