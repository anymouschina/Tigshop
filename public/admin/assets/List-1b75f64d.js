import{d as N,j as g,I as F,x as K,r as p,o as h,c as v,e as s,b as e,w as o,f as c,h as y,K as w,L,H as r,G as u}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{P as $}from"./PopFormElm-61cd9b7d.js";import{_ as O}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as j}from"./Pagination-8eb7b6b1.js";import{u as E}from"./config-9548fa9b.js";import{g as G,u as H,d as M,b as J}from"./shippingTpl-635f0dc3.js";import{_ as S}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const Q={class:"container"},R={class:"content_wrapper"},W={class:"lyecs-table-list-warp"},X={class:"list-table-tool lyecs-search-warp"},Y={class:"advanced-search-warp list-table-tool-row"},Z={class:"simple-form-warp"},ee={class:"simple-form-field"},te={class:"form-group"},se={class:"control-container"},oe=s("span",{class:"iconfont icon-chakan1"},null,-1),ae={class:"simple-form-field"},ie={class:"form-group"},le={class:"control-container"},ne={class:"simple-form-field"},pe={class:"form-group"},re={class:"control-container"},de={key:0},ce={class:"table-container"},_e=s("a",{class:"btn-link"},"编辑",-1),me={class:"empty-warp"},ue={key:0,class:"empty-bg"},fe={key:0,class:"pagination-con"},Te=N({__name:"List",setup(ge){const x=E(),k=g([]),_=g(!0),f=g(0),m=g([]),l=F({page:1,size:x.get("page_size"),sort_field:"",sort_order:"",keyword:""}),n=async()=>{_.value=!0;try{const i=await G({...l});k.value=i.filter_result,f.value=i.total}catch(i){w.error(i.message)}finally{_.value=!1}};K(()=>{n()});const C=()=>{n()},V=({prop:i,order:a})=>{l.sort_field=i,l.sort_order=a=="ascending"?"asc":a=="descending"?"desc":"",n()},z=async i=>{try{const a=await J(i,{ids:m.value});w.success(a.message),n()}catch(a){w.error(a.message)}},T=i=>{m.value=i.map(a=>a.shipping_tpl_id)};return(i,a)=>{const b=p("el-button"),A=p("el-input"),P=p("el-popconfirm"),U=p("el-form"),d=p("el-table-column"),q=p("el-divider"),B=p("el-table"),D=p("a-spin");return h(),v("div",Q,[s("div",R,[s("div",W,[s("div",X,[e(U,{model:l},{default:o(()=>[s("div",Y,[s("div",Z,[s("div",ee,[s("div",te,[s("div",se,[e(A,{modelValue:l.keyword,"onUpdate:modelValue":a[0]||(a[0]=t=>l.keyword=t),name:"keyword",placeholder:"输入模板名称",onKeyup:L(C,["enter"])},{append:o(()=>[e(b,{onClick:C},{default:o(()=>[oe]),_:1})]),_:1},8,["modelValue"])])])]),s("div",ae,[s("div",ie,[s("div",le,[e(c(S),{params:{act:"add"},isDrawer:"",path:"setting/shippingTpl/Info",title:"添加运费模板",width:"900px",onOkCallback:n},{default:o(()=>[e(b,{type:"primary"},{default:o(()=>[r("添加运费模板")]),_:1})]),_:1})])])]),s("div",ne,[s("div",pe,[s("div",re,[e(P,{title:"您确认要批量删除所选数据吗？",onConfirm:a[1]||(a[1]=t=>z("del"))},{reference:o(()=>[e(b,{disabled:m.value.length===0},{default:o(()=>[r("批量删除")]),_:1},8,["disabled"])]),_:1}),m.value.length>0?(h(),v("span",de,[r(" 已选择："),s("b",null,u(m.value.length),1),r(" 项 ")])):y("",!0)])])])])])]),_:1},8,["model"])]),s("div",ce,[e(D,{spinning:_.value},{default:o(()=>[e(B,{data:k.value,loading:_.value,total:f.value,"row-key":"shipping_tpl_id",onSelectionChange:T,onSortChange:V},{empty:o(()=>[s("div",me,[_.value?y("",!0):(h(),v("div",ue,"暂无数据"))])]),default:o(()=>[e(d,{type:"selection",width:"32"}),e(d,{label:"模板名称"},{default:o(({row:t})=>[e(c($),{"org-value":t.shipping_tpl_name,"onUpdate:orgValue":I=>t.shipping_tpl_name=I,max:10,params:{id:t.shipping_tpl_id,field:"shipping_tpl_name"},requestApi:c(H),label:"模板名称",type:"input"},{default:o(()=>[s("div",null,u(t.shipping_tpl_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),e(d,{label:"是否包邮",prop:"is_free"},{default:o(({row:t})=>[r(u(t.is_free===0?"自定义运费":"卖家承担运费"),1)]),_:1}),e(d,{label:"计价方式",prop:"is_support_cod"},{default:o(({row:t})=>[r(u(t.pricing_type===1?"按件数":"按重量"),1)]),_:1}),e(d,{label:"发货时间",prop:"shipping_time",sortable:"custom"}),e(d,{label:"是否默认",prop:"is_support_cod"},{default:o(({row:t})=>[r(u(t.is_default===1?"是":"--"),1)]),_:1}),e(d,{width:150,fixed:"right",label:"操作"},{default:o(({row:t})=>[e(c(S),{params:{act:"detail",id:t.shipping_tpl_id},isDrawer:"",path:"setting/shippingTpl/Info",title:"编辑配送类型",width:"900px",onOkCallback:n},{default:o(()=>[_e]),_:2},1032,["params"]),e(q,{direction:"vertical"}),e(c(O),{params:{id:t.shipping_tpl_id},requestApi:c(M),onAfterDelete:n},{default:o(()=>[r("删除 ")]),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),f.value>0?(h(),v("div",fe,[e(c(j),{page:l.page,"onUpdate:page":a[2]||(a[2]=t=>l.page=t),size:l.size,"onUpdate:size":a[3]||(a[3]=t=>l.size=t),total:f.value,onCallback:n},null,8,["page","size","total"])])):y("",!0)])])])])}}});export{Te as default};
