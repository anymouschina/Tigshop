import{d as L,i as _,C as j,s as E,q as I,r as s,c as A,o as U,e as c,j as G,f as M,b as o,w as a,a0 as O,g as x,E as i,a1 as T,I as g}from"./index-CGYuOau0.js";import{F as $}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-CjXfTDg5.js";import{a as z,u as H}from"./userRank-4CcE-k1Z.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{_ as J}from"./SelectColor.vue_vue_type_script_setup_true_lang-DaNn8bLS.js";/* empty css             */import"./vuedraggable.umd-_1km55l4.js";import"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./time-ClyPenjC.js";const K={class:"container"},P={class:"content_wrapper"},Q={class:"lyecs-form-table"},fe=L({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(C,{expose:R,emit:q}){const m=q,u=C,p=_(!0),b=j().currentRoute.value.query,v=_(u.isDialog?u.act:String(b.act)),y=_(u.isDialog?u.id:Number(b.id)),S=v.value==="add"?"create":"update",k=E(),t=_({show_price:0,rank_type:2}),B=async()=>{try{const r=await z(v.value,{id:y.value});Object.assign(t.value,r.item)}catch(r){g.error(r.message),m("close")}finally{p.value=!1}};I(()=>{v.value==="detail"?B():p.value=!1});const w=async()=>{await k.value.validate();try{m("update:confirmLoading",!0);const r=await H(S,{id:y.value,...t.value});m("submitCallback",r),g.success(r.message)}catch(r){g.error(r.message)}finally{m("update:confirmLoading",!1)}};return R({onFormSubmit:()=>{w()}}),(r,e)=>{const d=s("el-input"),n=s("el-form-item"),f=s("el-radio"),V=s("el-radio-group"),N=s("el-button"),D=s("el-form"),F=s("a-spin");return U(),A("div",K,[c("div",P,[c("div",Q,[p.value?M("",!0):(U(),G(D,{key:0,ref_key:"formRef",ref:k,model:t.value,"label-width":"auto"},{default:a(()=>[o(n,{rules:[{required:!0,message:"等级名称不能为空!"}],label:"等级名称",prop:"rank_name"},{default:a(()=>[o(d,{modelValue:t.value.rank_name,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.rank_name=l)},null,8,["modelValue"])]),_:1}),o(n,{label:"等级标志",prop:"rank_ico"},{default:a(()=>[o(x($),{photo:t.value.rank_ico,"onUpdate:photo":e[1]||(e[1]=l=>t.value.rank_ico=l)},null,8,["photo"]),e[8]||(e[8]=c("div",{class:"extra"},"请统一上传比例为1:1的图片（高清）",-1))]),_:1}),o(n,{rules:[{required:!0,message:"积分下限不能为空!"}],label:"积分下限",prop:"min_growth_points"},{default:a(()=>[o(d,{modelValue:t.value.min_growth_points,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.min_growth_points=l),type:"number"},null,8,["modelValue"])]),_:1}),o(n,{rules:[{required:!0,message:"积分上限不能为空!"}],label:"积分上限",prop:"max_growth_points"},{default:a(()=>[o(d,{modelValue:t.value.max_growth_points,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.max_growth_points=l),type:"number"},null,8,["modelValue"])]),_:1}),o(n,{label:"是否显示价格",prop:"show_price"},{default:a(()=>[o(V,{modelValue:t.value.show_price,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.show_price=l)},{default:a(()=>[o(f,{value:1},{default:a(()=>e[9]||(e[9]=[i("是")])),_:1}),o(f,{value:0},{default:a(()=>e[10]||(e[10]=[i("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"等级类型",prop:"rank_type"},{default:a(()=>[o(V,{modelValue:t.value.rank_type,"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.rank_type=l),style:{width:"100%"}},{default:a(()=>[o(f,{value:1},{default:a(()=>e[11]||(e[11]=[i("根据成长值变化")])),_:1}),o(f,{value:2},{default:a(()=>e[12]||(e[12]=[i("固定等级")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(n,{rules:[{required:!0,message:"初始折扣率不能为空!"}],label:"初始折扣率",prop:"discount"},{default:a(()=>[o(d,{modelValue:t.value.discount,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value.discount=l),type:"number"},null,8,["modelValue"])]),_:1}),o(n,{label:"背景颜色",prop:"rank_bg"},{default:a(()=>[o(x(J),{color:t.value.rank_bg,"onUpdate:color":e[7]||(e[7]=l=>t.value.rank_bg=l)},null,8,["color"])]),_:1}),O(o(n,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[o(N,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:w},{default:a(()=>e[13]||(e[13]=[i("提交")])),_:1},512)]),_:1},512),[[T,!u.isDialog]])]),_:1},8,["model"])),o(F,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{fe as default};
