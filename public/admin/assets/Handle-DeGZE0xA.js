import{u as F}from"./aftersales-0KSvwj7B.js";import{p as I}from"./format-CRgx78oe.js";import{d as S,i as x,s as B,r as f,c as V,o as r,e as u,b as n,w as t,j as m,f as c,D as i,g as L,F as q,a as E,E as y,I as A,_ as U}from"./index-DrbzVNl6.js";const j={class:"container"},H={class:"content_wrapper"},O={class:"lyecs-form-table"},z={class:"negotiation-box"},G={class:"extra"},J={class:"btn-box"},K=S({__name:"Handle",props:{formData:{type:Object,default:0},status:{type:Number,default:2}},emits:["submitCallback","update:confirmLoading","close"],setup(e,{expose:D,emit:C}){const p=C,g=e;x(!0);const _=B(),l=x({status:g.status,refundAmount:null,reply:"",returnAddress:""}),T=(d,a,s)=>{Number(a)>Number(g.formData.suggestRefundAmount)?s(new Error("退款金额不能大于最大退款金额")):s()},w=()=>{p("close")},N=d=>{l.value.reply=d.target.innerText},b=async()=>{await _.value.validate();try{p("update:confirmLoading",!0);const d=await F({id:g.formData.aftersaleId,...l.value});p("submitCallback",d),A.success("操作成功")}catch(d){A.error(d.message)}finally{p("update:confirmLoading",!1)}};return D({onFormSubmit:()=>{b()}}),(d,a)=>{const s=f("el-form-item"),v=f("TigInput"),h=f("el-tag"),k=f("el-button"),R=f("el-form");return r(),V("div",j,[u("div",H,[u("div",O,[u("div",z,[n(R,{ref_key:"formRef",ref:_,model:l.value,"label-width":"auto"},{default:t(()=>[n(s,{label:"售后方式："},{default:t(()=>[u("p",null,i(e.formData.aftersalesTypeName),1)]),_:1}),n(s,{label:"售后状态："},{default:t(()=>[u("p",null,i(e.formData.statusName),1)]),_:1}),e.status==2?(r(),m(s,{key:0,label:"退款金额：",prop:"refundAmount",rules:[{required:!0,message:"退款金额不能为空"},{validator:T,trigger:"blur"}]},{default:t(()=>[n(v,{classType:"tig-form-input",modelValue:l.value.refundAmount,"onUpdate:modelValue":a[0]||(a[0]=o=>l.value.refundAmount=o),type:"decimal",placeholder:"请输入退款金额"},null,8,["modelValue"]),u("div",G,"最大退款金额"+i(L(I)(e.formData.suggestRefundAmount)||"0"),1)]),_:1},8,["rules"])):c("",!0),e.formData.aftersaleType==1&&e.status==2?(r(),m(s,{key:1,label:"退货地址：",prop:"returnAddress",rules:[{required:e.status==2,message:"退货地址不能为空"}]},{default:t(()=>[n(v,{classType:"tig-form-input",modelValue:l.value.returnAddress,"onUpdate:modelValue":a[1]||(a[1]=o=>l.value.returnAddress=o),rows:6,type:"textarea",placeholder:"请输入退货地址"},null,8,["modelValue"])]),_:1},8,["rules"])):c("",!0),e.status==3?(r(),m(s,{key:2,label:"拒绝说明：",prop:"reply",rules:[{required:e.status==3,message:"拒绝说明不能为空"}]},{default:t(()=>[n(v,{classType:"tig-form-input",modelValue:l.value.reply,"onUpdate:modelValue":a[2]||(a[2]=o=>l.value.reply=o),rows:6,type:"textarea",placeholder:"请输入拒绝说明"},null,8,["modelValue"]),u("div",null,[(r(!0),V(q,null,E(e.formData.refuseReason,o=>(r(),m(h,{key:o,type:"info",style:{"margin-right":"5px"},onClick:N},{default:t(()=>[y(i(o),1)]),_:2},1024))),128))])]),_:1},8,["rules"])):c("",!0),n(s,null,{default:t(()=>[u("div",J,[e.formData.aftersaleType==1?(r(),m(k,{key:0,type:"primary",onClick:b},{default:t(()=>[y(i(e.status==2?"同意并发送退货地址":"拒绝退款"),1)]),_:1})):c("",!0),e.formData.aftersaleType==2?(r(),m(k,{key:1,type:"primary",onClick:b},{default:t(()=>[y(i(e.status==2?"同意仅退款":"拒绝仅退款"),1)]),_:1})):c("",!0),n(k,{onClick:w},{default:t(()=>a[3]||(a[3]=[y("取消")])),_:1})])]),_:1})]),_:1},8,["model"])])])])])}}}),X=U(K,[["__scopeId","data-v-c8e6d095"]]);export{X as default};
