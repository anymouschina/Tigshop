import{d as D,i as m,C as I,s as L,q as j,r as s,c as E,o as d,e as n,j as f,f as _,b as o,w as a,D as v,E as F,I as b}from"./index-CGYuOau0.js";import{a as P,u as M}from"./enquiry-CxUrD34G.js";const O={class:"container"},T={class:"content_wrapper"},U={class:"lyecs-form-table"},H=D({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(h,{expose:C,emit:x}){const r=x,i=h,u=m(!0),y=I().currentRoute.value.query,p=m(i.isDialog?i.act:String(y.act)),g=m(i.isDialog?i.id:Number(y.id));p.value;const k=L(),e=m({}),B=async()=>{try{const t=await P(p.value,{id:g.value});Object.assign(e.value,t.item)}catch(t){b.error(t.message),r("close")}finally{u.value=!1}};j(()=>{p.value==="detail"?B():u.value=!1});const w=async()=>{await k.value.validate();try{r("update:confirmLoading",!0);const t=await M({id:g.value,remark:e.value.remark});r("submitCallback",t),b.success(t.message)}catch(t){b.error(t.message)}finally{r("update:confirmLoading",!1)}};return C({onFormSubmit:()=>{w()}}),(t,c)=>{const l=s("el-form-item"),S=s("el-input"),V=s("el-button"),N=s("el-form"),R=s("a-spin");return d(),E("div",O,[n("div",T,[n("div",U,[u.value?_("",!0):(d(),f(N,{key:0,ref_key:"formRef",ref:k,model:e.value,"label-width":"auto"},{default:a(()=>[o(l,{label:"联系方式",prop:"mobile"},{default:a(()=>[n("div",null,v(e.value.mobile),1)]),_:1}),o(l,{label:"询价内容",prop:"content"},{default:a(()=>[n("div",null,v(e.value.content),1)]),_:1}),o(l,{label:"创建时间",prop:"create_time"},{default:a(()=>[n("div",null,v(e.value.create_time),1)]),_:1}),e.value.status===0?(d(),f(l,{key:0,label:"回复内容",prop:"remark"},{default:a(()=>[o(S,{modelValue:e.value.remark,"onUpdate:modelValue":c[0]||(c[0]=q=>e.value.remark=q),rows:6,type:"textarea",placeholder:"请输入回复内容"},null,8,["modelValue"])]),_:1})):_("",!0),e.value.status===0?(d(),f(l,{key:1,label:" "},{default:a(()=>[o(V,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:w},{default:a(()=>c[1]||(c[1]=[F("提交")])),_:1},512)]),_:1})):_("",!0)]),_:1},8,["model"])),o(R,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{H as default};
