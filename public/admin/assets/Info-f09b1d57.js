import{d as F,j as p,E as P,s as j,x as E,r as s,o as r,c,e as g,k as x,w as n,b as a,F as b,f as $,$ as H,a0 as I,H as K,h as M,K as v}from"./index-7c2d2aef.js";import{a as O,u as T}from"./pushLog-b7b334cc.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import"./config-9548fa9b.js";/* empty css                                                                    *//* empty css                                                                  */import{_ as z}from"./SelectRankList.vue_vue_type_script_setup_true_lang-57f97863.js";/* empty css                                                                              */import"./region-e0d291a6.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import"./time-290942a2.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";import"./userRank-9565375c.js";import"./region-05802f67.js";const A={class:"container"},G={class:"content_wrapper"},J={class:"lyecs-form-table"},Q=g("div",{class:"extra"},"注意：输入会员名称时，请用英文逗号隔开。",-1),fe=F({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(C,{expose:S,emit:B}){const i=B,u=C,_=p(!0),y=P().currentRoute.value.query,V=p(u.isDialog?u.act:String(y.act)),w=p(u.isDialog?u.id:Number(y.id)),L=V.value==="add"?"insert":"update",k=j(),e=p({}),N=async()=>{try{const o=await O(V.value,{id:w.value});Object.assign(e.value,o.item)}catch(o){v.error(o.message),i("close")}finally{_.value=!1}};E(()=>{N()});const h=async()=>{await k.value.validate();try{i("update:confirmLoading",!0);const o=await T(L,{id:w.value,...e.value});i("submitCallback",o),v.success(o.message)}catch(o){v.error(o.message)}finally{i("update:confirmLoading",!1)}};return S({onFormSubmit:()=>{h()}}),(o,t)=>{const f=s("el-input"),m=s("el-form-item"),d=s("el-option"),D=s("el-select"),R=s("el-button"),U=s("el-form"),q=s("a-spin");return r(),c("div",A,[g("div",G,[g("div",J,[_.value?M("",!0):(r(),x(U,{key:0,ref_key:"formRef",ref:k,model:e.value,"label-width":"auto"},{default:n(()=>[a(m,{rules:[{required:!0,message:"标题不能为空!"}],label:"标题",prop:"brand_name"},{default:n(()=>[a(f,{modelValue:e.value.brand_name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.brand_name=l)},null,8,["modelValue"])]),_:1}),a(m,{label:"内容",rules:[{required:!0,message:"内容不能为空!"}],prop:"brand_desc"},{default:n(()=>[a(f,{modelValue:e.value.brand_desc,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.brand_desc=l),row:"2",type:"textarea"},null,8,["modelValue"])]),_:1}),a(m,{label:"发送类型",prop:"brand_is_hot"},{default:n(()=>[a(D,{modelValue:e.value.send_user_type,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.send_user_type=l)},{default:n(()=>[a(d,{value:0,label:"全部会员"}),a(d,{value:1,label:"单个会员"}),a(d,{value:2,label:"会员等级"}),a(d,{value:3,label:"部分会员"})]),_:1},8,["modelValue"]),e.value.brand_is_hot===1?(r(),c(b,{key:0},[],64)):e.value.brand_is_hot===2?(r(),x($(z),{key:1,modelValue:e.value.brand_desc,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.brand_desc=l)},null,8,["modelValue"])):e.value.brand_is_hot===3?(r(),c(b,{key:2},[a(f,{modelValue:e.value.brand_desc,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.brand_desc=l),row:"2",type:"textarea"},null,8,["modelValue"]),Q],64)):(r(),c(b,{key:3},[],64))]),_:1}),H(a(m,{"wrapper-col":{offset:4,span:16}},{default:n(()=>[a(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:h},{default:n(()=>[K("提交")]),_:1},512)]),_:1},512),[[I,!u.isDialog]])]),_:1},8,["model"])),a(q,{spinning:_.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{fe as default};
