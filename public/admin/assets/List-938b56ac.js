/* empty css             */import{d as Q,j as m,I as X,x as Z,r as d,o as r,c as p,e as t,b as s,w as a,f as c,h as u,K as q,F as ee,a as te,k as b,H as n,G as y,p as se,i as ae,_ as le}from"./index-7c2d2aef.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import{u as oe}from"./config-9548fa9b.js";import{g as Y}from"./util-1ee03ed8.js";import{_ as S}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as ie}from"./Pagination-8eb7b6b1.js";/* empty css                                                                  *//* empty css                                                                              */import"./region-e0d291a6.js";import{S as ne}from"./SelectTimeInterval-7da287f8.js";import"./shopProductCategory-792e0c23.js";import{f}from"./time-290942a2.js";import{g as de,a as re,u as L,d as _e}from"./notice-f5f9ff6d.js";import{_ as B}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";import"./region-05802f67.js";const x=D=>(se("data-v-b68df1f1"),D=D(),ae(),D),ce={class:"container"},me={class:"content_wrapper"},pe={class:"lyecs-table-list-warp"},ue={class:"list-table-tool lyecs-search-warp"},fe={class:"advanced-search-warp list-table-tool-row"},ve={class:"simple-form-warp"},ge={class:"simple-form-field"},he={class:"form-group"},be=x(()=>t("label",{class:"control-label"},[t("span",null,"标题：")],-1)),ye={class:"control-container"},Ye={key:0,class:"simple-form-field"},De={class:"form-group"},we=x(()=>t("label",{class:"control-label"},[t("span",null,"状态：")],-1)),ke={class:"control-container"},xe={class:"simple-form-field"},Ce={class:"form-group"},He=x(()=>t("label",{class:"control-label"},[t("span",null,"推送时间：")],-1)),Me={class:"control-container flex flex-align-center"},Se={style:{"margin-left":"10px"}},Ve={class:"simple-form-field"},Ae={class:"advanced-search-warp list-table-tool-row"},Ie={class:"simple-form-warp"},ze={class:"simple-form-field"},Ue={class:"table-container"},qe={class:"tit-row flex flex-align-center"},Le={key:0,class:"label"},Be={class:"txt"},Fe=x(()=>t("a",{class:"btn-link"},"编辑",-1)),Ne={class:"empty-warp"},Pe={key:0,class:"empty-bg"},Te={key:0,class:"pagination-con"},$e={key:0,class:"selected-action-warp"},Oe={class:"selected-action"},je=Q({__name:"List",setup(D){const F=oe(),V=m([]),v=m(!0),w=m(0);m(0);const C=m([]),l=X({page:1,size:F.pageSize,sort_field:"",sort_order:"",status:-1,title:"",end_time:"",start_time:""}),H=m(-1),A=o=>{if(o===-1){H.value=o;return}l.start_time=f(new Date,"YYYY-MM-DD HH:mm:ss"),o===0&&(l.end_time=f(new Date,"YYYY-MM-DD HH:mm:ss")),o===1&&(l.start_time=f(Y(1,"sub"),"YYYY-MM-DD HH:mm:ss"),l.end_time=f(Y(1,"sub"),"YYYY-MM-DD HH:mm:ss")),o===2&&(l.end_time=f(Y(7,"add"),"YYYY-MM-DD HH:mm:ss")),o===3&&(l.end_time=f(Y(30,"add"),"YYYY-MM-DD HH:mm:ss")),o===4&&(l.end_time=f(Y(180,"add"),"YYYY-MM-DD HH:mm:ss"))},_=async()=>{v.value=!0;try{const o=await de({...l});V.value=o.filter_result,w.value=o.total}catch(o){q.error(o.message)}finally{v.value=!1}},M=m(),N=async()=>{v.value=!0;try{const o=await re();M.value=o}catch(o){q.error(o.message)}finally{v.value=!1}};Z(()=>{_(),N()});const P=()=>{_()},T=()=>{l.status=-1,l.title="",l.end_time="",l.start_time="",_()},$=({prop:o,order:i})=>{l.sort_field=o,l.sort_order=i=="ascending"?"asc":i=="descending"?"desc":"",_()},O=o=>{C.value=o.map(i=>i.product_id)};return(o,i)=>{const j=d("el-input"),I=d("el-option"),E=d("el-select"),k=d("el-radio-button"),G=d("el-radio-group"),g=d("el-button"),K=d("el-form"),h=d("el-table-column"),z=d("el-divider"),U=d("el-space"),R=d("el-table"),W=d("a-spin");return r(),p("div",ce,[t("div",me,[t("div",pe,[t("div",ue,[s(K,{model:l,name:"form"},{default:a(()=>[t("div",fe,[t("div",ve,[t("div",ge,[t("div",he,[be,t("div",ye,[s(j,{modelValue:l.title,"onUpdate:modelValue":i[0]||(i[0]=e=>l.title=e),name:"keyword",placeholder:"请输入内容标题"},null,8,["modelValue"])])])]),M.value?(r(),p("div",Ye,[t("div",De,[we,t("div",ke,[s(E,{modelValue:l.status,"onUpdate:modelValue":i[1]||(i[1]=e=>l.status=e),placeholder:"请选择文章状态",style:{width:"180px","margin-right":"10px"}},{default:a(()=>[s(I,{label:"全部",value:-1}),(r(!0),p(ee,null,te(M.value.status_map,(e,J)=>(r(),b(I,{label:e,value:J},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])])):u("",!0),t("div",xe,[t("div",Ce,[He,t("div",Me,[s(c(ne),{"start-date":l.start_time,"onUpdate:startDate":i[2]||(i[2]=e=>l.start_time=e),"end-date":l.end_time,"onUpdate:endDate":i[3]||(i[3]=e=>l.end_time=e),"value-format":"YYYY-MM-DD HH:mm:ss",onCallback:i[4]||(i[4]=e=>A(-1))},null,8,["start-date","end-date"]),t("div",Se,[s(G,{class:"itemWidth",modelValue:H.value,"onUpdate:modelValue":i[5]||(i[5]=e=>H.value=e),onChange:A},{default:a(()=>[s(k,{value:0},{default:a(()=>[n("今天")]),_:1}),s(k,{value:1},{default:a(()=>[n("昨天")]),_:1}),s(k,{value:2},{default:a(()=>[n("近7天")]),_:1}),s(k,{value:3},{default:a(()=>[n("近30天")]),_:1})]),_:1},8,["modelValue"])])])])]),t("div",Ve,[s(g,{type:"primary",onClick:P},{default:a(()=>[n("搜索")]),_:1})])])]),t("div",Ae,[t("div",Ie,[t("div",ze,[s(c(B),{isDrawer:"",onOkCallback:_,title:"添加活动通知",width:"700px",path:"salesman/notice/Info",params:{act:"add"}},{default:a(()=>[s(g,{type:"primary"},{default:a(()=>[n("立即新建")]),_:1})]),_:1}),s(g,{class:"ml10",onClick:T},{default:a(()=>[n("清空筛选条件")]),_:1})])])])]),_:1},8,["model"])]),t("div",Ue,[s(W,{spinning:v.value},{default:a(()=>[s(R,{data:V.value,total:w.value,"row-key":"product_id",onSelectionChange:O,onSortChange:$},{empty:a(()=>[t("div",Ne,[v.value?u("",!0):(r(),p("div",Pe,"暂无数据"))])]),default:a(()=>[s(h,{label:"标题",prop:"product_id",width:250,fixed:"left","show-overflow-tooltip":""},{default:a(({row:e})=>[t("div",qe,[e.is_top!=0?(r(),p("div",Le,"置顶")):u("",!0),t("div",Be,y(e.title),1)])]),_:1}),s(h,{label:"推送时间",width:200,sortable:"custom"},{default:a(({row:e})=>[n(y(e.start_time),1)]),_:1}),s(h,{label:"失效时间",width:200,sortable:"custom"},{default:a(({row:e})=>[n(y(e.end_time||"--"),1)]),_:1}),s(h,{label:"状态"},{default:a(({row:e})=>[n(y(e.status_text),1)]),_:1}),s(h,{width:160,fixed:"right",label:"操作"},{default:a(({row:e})=>[s(U,{size:0},{default:a(()=>[e.is_top!=0?(r(),b(c(S),{key:0,onAfterDelete:_,requestApi:c(L),params:{id:e.id,field:"is_top",val:0},title:"确定取消置顶吗？"},{default:a(()=>[n("取消置顶")]),_:2},1032,["requestApi","params"])):u("",!0),e.is_top!=0?(r(),b(z,{key:1,direction:"vertical"})):u("",!0),s(c(B),{params:{act:"detail",id:e.id},isDrawer:"",path:"salesman/notice/Info",title:"编辑内容",width:"700px",onOkCallback:_},{default:a(()=>[Fe]),_:2},1032,["params"]),s(z,{direction:"vertical"}),e.is_available==1?(r(),b(c(S),{key:2,onAfterDelete:_,requestApi:c(L),params:{id:e.id,field:"is_available",val:0},title:"失效后将不可恢复，确认失效？"},{default:a(()=>[n("失效")]),_:2},1032,["requestApi","params"])):(r(),b(c(S),{key:3,onAfterDelete:_,requestApi:c(_e),params:{id:e.id}},{default:a(()=>[n("删除")]),_:2},1032,["requestApi","params"]))]),_:2},1024)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),w.value>0?(r(),p("div",Te,[s(c(ie),{page:l.page,"onUpdate:page":i[6]||(i[6]=e=>l.page=e),size:l.size,"onUpdate:size":i[7]||(i[7]=e=>l.size=e),total:w.value,onCallback:_},null,8,["page","size","total"])])):u("",!0)]),C.value.length>0?(r(),p("div",$e,[t("div",Oe,[s(U,null,{default:a(()=>[t("span",null,[n("已选择："),t("b",null,y(C.value.length),1),n(" 项")]),s(g,null,{default:a(()=>[n("设置等级")]),_:1}),s(g,null,{default:a(()=>[n("分组")]),_:1}),s(g,null,{default:a(()=>[n("清退")]),_:1})]),_:1})])])):u("",!0)])])])}}});const ct=le(je,[["__scopeId","data-v-b68df1f1"]]);export{ct as default};
