import{d as P,K as $,i as g,G as E,q as L,c as b,e as t,b as a,w as o,f as h,g as d,I as y,r,o as _,M,E as f,D as A,j}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import"./Verify.vue_vue_type_style_index_0_lang-B5aTvMR3.js";import"./zh-cn-W45FenWv.js";import{T as G}from"./Tag-GwM_ruJO.js";import{_ as D}from"./Switch.vue_vue_type_script_setup_true_lang-C5nzofSO.js";import{D as R}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as H}from"./Pagination-wR9huHyl.js";import{g as J,u as x,d as Q,b as W}from"./areaCode-IouW_QX0.js";import{_ as S}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const X={class:"container"},Y={class:"content_wrapper"},Z={class:"lyecs-table-list-warp"},ee={class:"list-table-tool lyecs-search-warp"},te={class:"advanced-search-warp list-table-tool-row"},ae={class:"simple-form-warp"},se={class:"simple-form-field"},oe={class:"form-group"},le={class:"control-container"},ie={class:"simple-form-field"},ne={class:"form-group"},de={class:"control-container"},re={class:"simple-form-field"},ce={class:"form-group"},pe={class:"control-container"},me={key:0},ue={class:"table-container"},_e={class:"flex flex-align-center"},fe={class:"empty-warp"},ve={key:0,class:"empty-bg"},ge={key:0,class:"pagination-con"},Ve=P({__name:"List",props:{promotionType:{type:Number,default:1}},setup(be,{expose:q}){const z=$(),C=g(),m=g(!0),v=g(0),u=g([]),n=E({page:1,size:z.get("pageSize"),sortField:"",sortOrder:"",name:""}),l=async()=>{m.value=!0;try{const i=await J({...n});C.value=i.records,v.value=i.total}catch(i){y.error(i.message)}finally{m.value=!1}};L(()=>{l()});const w=()=>{l()},U=({prop:i,order:e})=>{n.sortField=i,n.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",l()},V=async(i,e)=>{try{const c=await W(i,{ids:u.value,value:e});y.success("操作成功"),l()}catch(c){y.error(c.message)}},I=i=>{u.value=i.map(e=>e.id)};return q({loadFilter:l}),(i,e)=>{const c=r("el-button"),T=r("TigInput"),B=r("el-popconfirm"),N=r("el-form"),p=r("el-table-column"),F=r("el-divider"),O=r("el-table"),K=r("a-spin");return _(),b("div",X,[t("div",Y,[t("div",Z,[t("div",ee,[a(N,{model:n},{default:o(()=>[t("div",te,[t("div",ae,[t("div",se,[t("div",oe,[t("div",le,[a(T,{modelValue:n.name,"onUpdate:modelValue":e[0]||(e[0]=s=>n.name=s),name:"name",placeholder:"请输入区号地区名称",onKeyup:M(w,["enter"])},{append:o(()=>[a(c,{onClick:w},{default:o(()=>e[4]||(e[4]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",ie,[t("div",ne,[t("div",de,[a(d(S),{params:{act:"add"},isDrawer:"",path:"setting/multilingual/areaCode/Info",title:"添加区号",width:"600px",onOkCallback:l},{default:o(()=>[a(c,{type:"primary"},{default:o(()=>e[5]||(e[5]=[f("添加区号")])),_:1})]),_:1})])])]),t("div",re,[t("div",ce,[t("div",pe,[a(B,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=s=>V("del"))},{reference:o(()=>[a(c,{disabled:u.value.length===0},{default:o(()=>e[6]||(e[6]=[f("批量删除")])),_:1},8,["disabled"])]),_:1}),u.value.length>0?(_(),b("span",me,[e[7]||(e[7]=f(" 已选择：")),t("b",null,A(u.value.length),1),e[8]||(e[8]=f(" 项 "))])):h("",!0)])])])])])]),_:1},8,["model"])]),t("div",ue,[a(K,{spinning:m.value},{default:o(()=>[a(O,{data:C.value,"row-key":"id",onSelectionChange:I,total:v.value,onSortChange:U,loading:m.value},{empty:o(()=>[t("div",fe,[m.value?h("",!0):(_(),b("div",ve,"暂无数据"))])]),default:o(()=>[a(p,{type:"selection",width:"32"}),a(p,{label:"区号地区",prop:"name",width:150},{default:o(({row:s})=>[t("div",_e,[s.isDefault==1?(_(),j(d(G),{key:0,transparent:!0,text:"默认"})):h("",!0),t("div",null,A(s.name||"--"),1)])]),_:1}),a(p,{label:"区号",prop:"code",width:"200"}),a(p,{label:"是否默认",prop:"isDefault"},{default:o(({row:s})=>[a(d(D),{checked:s.isDefault,"onUpdate:checked":k=>s.isDefault=k,requestApi:d(x),onCallback:l,params:{id:s.id,field:"isDefault"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),a(p,{label:"是否启用",prop:"isAvailable"},{default:o(({row:s})=>[a(d(D),{checked:s.isAvailable,"onUpdate:checked":k=>s.isAvailable=k,requestApi:d(x),onCallback:l,params:{id:s.id,field:"isAvailable"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),a(p,{label:"操作",fixed:"right",width:"120"},{default:o(({row:s})=>[a(d(S),{isDrawer:"",onOkCallback:l,title:"编辑币种",width:"800px",path:"setting/multilingual/areaCode/Info",params:{act:"detail",id:s.id}},{default:o(()=>e[9]||(e[9]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),a(F,{direction:"vertical"}),a(d(R),{onAfterDelete:l,requestApi:d(Q),params:{id:s.id}},{default:o(()=>e[10]||(e[10]=[f("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),v.value>0?(_(),b("div",ge,[a(d(H),{page:n.page,"onUpdate:page":e[2]||(e[2]=s=>n.page=s),size:n.size,"onUpdate:size":e[3]||(e[3]=s=>n.size=s),total:v.value,onCallback:l},null,8,["page","size","total"])])):h("",!0)])])])])}}});export{Ve as default};
