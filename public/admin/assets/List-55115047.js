import{d as A,j as f,I as K,x as L,r as i,o as g,c as v,e as t,b as e,w as s,f as _,h as b,K as y,L as U,H as u,G as $}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{_ as q}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as O}from"./Pagination-8eb7b6b1.js";import{u as j}from"./config-9548fa9b.js";import{g as E,d as F,b as H}from"./productGroup-d12e271e.js";import{_ as C}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const M={class:"container"},T={class:"content_wrapper"},J={class:"lyecs-table-list-warp"},Q={class:"list-table-tool lyecs-search-warp"},R={class:"advanced-search-warp list-table-tool-row"},W={class:"simple-form-warp"},X={class:"simple-form-field"},Y={class:"form-group"},Z={class:"control-container"},ee=t("span",{class:"iconfont icon-chakan1"},null,-1),te={class:"simple-form-field"},oe={class:"form-group"},se={class:"control-container"},ae={class:"simple-form-field"},ne={class:"form-group"},le={class:"control-container"},re={key:0},ie={class:"table-container"},ce=t("a",{class:"btn-link"},"编辑",-1),de={class:"empty-warp"},pe={key:0,class:"empty-bg"},_e={key:0,class:"pagination-con"},Se=A({__name:"List",setup(ue){const S=j(),w=f([{product_group_name:"最新商品",product_group_sn:"",product_group_description:"",add_time:"-",intro_type:"new"}]),d=f(!0),m=f(0),p=f([]),n=K({page:1,size:S.get("page_size"),sort_field:"",sort_order:"",keyword:""}),r=async()=>{d.value=!0;try{const a=await E({...n});w.value=a.filter_result,m.value=a.total}catch(a){y.error(a.message)}finally{d.value=!1}};L(()=>{r()});const k=()=>{r()},x=({prop:a,order:o})=>{n.sort_field=a,n.sort_order=o=="ascending"?"asc":o=="descending"?"desc":"",r()},z=async a=>{try{const o=await H(a,{ids:p.value});y.success(o.message),await r()}catch(o){y.error(o.message)}},V=a=>{p.value=a.map(o=>o.product_group_id)};return(a,o)=>{const h=i("el-button"),G=i("el-input"),P=i("el-popconfirm"),B=i("el-form"),c=i("el-table-column"),D=i("el-divider"),I=i("el-table"),N=i("a-spin");return g(),v("div",M,[t("div",T,[t("div",J,[t("div",Q,[e(B,{model:n},{default:s(()=>[t("div",R,[t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[e(G,{modelValue:n.keyword,"onUpdate:modelValue":o[0]||(o[0]=l=>n.keyword=l),name:"keyword",placeholder:"输入品牌名称",onKeyup:U(k,["enter"])},{append:s(()=>[e(h,{onClick:k},{default:s(()=>[ee]),_:1})]),_:1},8,["modelValue"])])])]),t("div",te,[t("div",oe,[t("div",se,[e(_(C),{params:{act:"add"},isDrawer:"",path:"product/productGroup/Info",title:"添加分组",width:"600px",onOkCallback:r},{default:s(()=>[e(h,{type:"primary"},{default:s(()=>[u("添加分组")]),_:1})]),_:1})])])]),t("div",ae,[t("div",ne,[t("div",le,[e(P,{title:"您确认要批量删除所选数据吗？",onConfirm:o[1]||(o[1]=l=>z("del"))},{reference:s(()=>[e(h,{disabled:p.value.length===0},{default:s(()=>[u("批量删除")]),_:1},8,["disabled"])]),_:1}),p.value.length>0?(g(),v("span",re,[u(" 已选择："),t("b",null,$(p.value.length),1),u(" 项 ")])):b("",!0)])])])])])]),_:1},8,["model"])]),t("div",ie,[e(N,{spinning:d.value},{default:s(()=>[e(I,{data:w.value,loading:d.value,total:m.value,"row-key":"product_group_id",onSelectionChange:V,onSortChange:x},{empty:s(()=>[t("div",de,[d.value?b("",!0):(g(),v("div",pe,"暂无数据"))])]),default:s(()=>[e(c,{type:"selection",width:"32"}),e(c,{label:"分组名称",prop:"product_group_name"}),e(c,{label:"分组别名",prop:"product_group_sn"}),e(c,{prop:"product_group_description",label:"分组描述"}),e(c,{label:"添加时间",prop:"add_time",sortable:"custom"}),e(c,{width:150,fixed:"right",label:"操作"},{default:s(({row:l})=>[e(_(C),{params:{act:"detail",id:l.product_group_id},isDrawer:"",path:"product/productGroup/Info",title:"编辑分组",width:"600px",onOkCallback:r},{default:s(()=>[ce]),_:2},1032,["params"]),e(D,{direction:"vertical"}),e(_(q),{params:{id:l.product_group_id},requestApi:_(F),onAfterDelete:r},{default:s(()=>[u("删除")]),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),m.value>0?(g(),v("div",_e,[e(_(O),{page:n.page,"onUpdate:page":o[2]||(o[2]=l=>n.page=l),size:n.size,"onUpdate:size":o[3]||(o[3]=l=>n.size=l),total:m.value,onCallback:r},null,8,["page","size","total"])])):b("",!0)])])])])}}});export{Se as default};
