import{d as j,j as _,I as G,E as B,x as H,r as d,o as l,c as h,e as t,b as a,w as o,f as r,h as m,K as I,L as J,H as g,G as S,k as y,n as Q,p as W,i as X,_ as Y}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{_ as Z}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as ee}from"./Pagination-8eb7b6b1.js";import{i as te,r as ae}from"./format-4e0206d3.js";import{u as se}from"./config-9548fa9b.js";import{g as oe,d as ne,b as ie}from"./adminUser-fb41eb63.js";import{e as N}from"./util-1ee03ed8.js";import{M as le}from"./MobileCard-6c6c2c27.js";/* empty css                                               */import"./zh-cn-8c8b9709.js";import{T as re}from"./Tag-e65e7405.js";import{_ as L}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const q=u=>(W("data-v-eac9fd8b"),u=u(),X(),u),de={class:"container"},ce={class:"content_wrapper"},pe={class:"lyecs-table-list-warp"},_e={class:"list-table-tool lyecs-search-warp"},me={class:"advanced-search-warp list-table-tool-row"},ue={class:"simple-form-warp"},fe={class:"simple-form-field"},ve={class:"form-group"},he={class:"control-container"},ge=q(()=>t("span",{class:"iconfont icon-chakan1"},null,-1)),ye={class:"simple-form-field"},be={class:"form-group"},ke={class:"control-container"},Se={class:"simple-form-field"},we={class:"form-group"},Ce={class:"control-container"},xe={key:0},ze={class:"table-container"},Ie={class:"avatar-username"},De={key:0},Ue=q(()=>t("a",{class:"btn-link"},"编辑",-1)),Ve={class:"empty-warp"},Be={key:0,class:"empty-bg"},Ne={key:0,class:"pagination-con"},Le=j({__name:"ShopList",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},setup(u){B();const A=se(),D=_([]),f=_(!0),b=_(0),v=_([]),n=G({page:1,size:A.get("page_size"),sort_field:"",sort_order:"",keyword:""}),c=async()=>{f.value=!0;try{const i=await oe({...n});D.value=i.filter_result,b.value=i.total}catch(i){I.error(i.message)}finally{f.value=!1}},k=u,U=B().currentRoute.value.query,w=_(k.isDialog?k.act:String(U.act)),C=_(k.isDialog?k.id:Number(U.id));H(()=>{w.value&&(n.suppliers_id=C.value),c()});const V=()=>{c()},K=({prop:i,order:s})=>{n.sort_field=i,n.sort_order=s=="ascending"?"asc":s=="descending"?"desc":"",c()},M=async i=>{try{const s=await ie(i,{ids:v.value});I.success(s.message),c()}catch(s){I.error(s.message)}},P=i=>{v.value=i.map(s=>s.admin_id)};return(i,s)=>{const x=d("el-button"),T=d("el-input"),$=d("el-popconfirm"),E=d("el-form"),p=d("el-table-column"),z=d("el-avatar"),F=d("el-divider"),O=d("el-table"),R=d("a-spin");return l(),h("div",de,[t("div",ce,[t("div",pe,[t("div",_e,[a(E,{model:n},{default:o(()=>[t("div",me,[t("div",ue,[t("div",fe,[t("div",ve,[t("div",he,[a(T,{modelValue:n.keyword,"onUpdate:modelValue":s[0]||(s[0]=e=>n.keyword=e),name:"keyword",placeholder:"输入员工名称",onKeyup:J(V,["enter"])},{append:o(()=>[a(x,{onClick:V},{default:o(()=>[ge]),_:1})]),_:1},8,["modelValue"])])])]),t("div",ye,[t("div",be,[t("div",ke,[a(r(L),{params:{act:"add",type:w.value?w.value:"",suppliers_id:C.value?C.value:0},isDrawer:"",path:"authority/adminUser/ShopInfo",title:"添加员工",width:"800px",onOkCallback:c},{default:o(()=>[a(x,{type:"primary"},{default:o(()=>[g("添加员工")]),_:1})]),_:1},8,["params"])])])]),t("div",Se,[t("div",we,[t("div",Ce,[a($,{title:"您确认要批量删除所选数据吗？",onConfirm:s[1]||(s[1]=e=>M("del"))},{reference:o(()=>[a(x,{disabled:v.value.length===0},{default:o(()=>[g("批量删除")]),_:1},8,["disabled"])]),_:1}),v.value.length>0?(l(),h("span",xe,[g(" 已选择："),t("b",null,S(v.value.length),1),g(" 项 ")])):m("",!0)])])])])])]),_:1},8,["model"])]),t("div",ze,[a(R,{spinning:f.value},{default:o(()=>[a(O,{data:D.value,loading:f.value,total:b.value,"row-key":"admin_id",onSelectionChange:P,onSortChange:K},{empty:o(()=>[t("div",Ve,[f.value?m("",!0):(l(),h("div",Be,"暂无数据"))])]),default:o(()=>[a(p,{type:"selection",width:"32"}),a(p,{width:"200",label:"员工名称",prop:"username"},{default:o(({row:e})=>[t("div",Ie,[r(N)(String(e.avatar))=="one"?(l(),y(z,{key:0,size:30,src:r(te)(e.avatar)},null,8,["src"])):r(N)(String(e.avatar))=="def"?(l(),y(z,{key:1,size:30,src:r(ae)(e.avatar)},null,8,["src"])):(l(),y(z,{key:2,size:30,src:""})),t("div",null,[t("div",null,S(e.admin_user.username),1),e.is_admin==1?(l(),h("div",De,[a(r(re),{transparent:!0,text:"店铺管理员"})])):m("",!0)])])]),_:1}),a(p,{label:"权限组",prop:"role_name"},{default:o(({row:e})=>[t("span",{class:Q(e.role_name?"green":"gray")},S(e.role_name||"-"),3)]),_:1}),a(p,{label:"邮箱",prop:"email"},{default:o(({row:e})=>[t("span",null,S(e.email||"-"),1)]),_:1}),a(p,{label:"电话",prop:"mobile"},{default:o(({row:e})=>[t("span",null,[a(le,{mobile:e.mobile},null,8,["mobile"])])]),_:1}),a(p,{width:150,fixed:"right",label:"操作"},{default:o(({row:e})=>[a(r(L),{params:{act:"detail",id:e.id},isDrawer:"",path:"authority/adminUser/ShopInfo",title:"编辑员工",width:"800px",onOkCallback:c},{default:o(()=>[Ue]),_:2},1032,["params"]),e.admin_id!=1?(l(),y(F,{key:0,direction:"vertical"})):m("",!0),e.admin_id!=1?(l(),y(r(Z),{key:1,params:{id:e.id},requestApi:r(ne),onAfterDelete:c},{default:o(()=>[g("删除 ")]),_:2},1032,["params","requestApi"])):m("",!0)]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),b.value>0?(l(),h("div",Ne,[a(r(ee),{page:n.page,"onUpdate:page":s[2]||(s[2]=e=>n.page=e),size:n.size,"onUpdate:size":s[3]||(s[3]=e=>n.size=e),total:b.value,onCallback:c},null,8,["page","size","total"])])):m("",!0)])])])])}}});const We=Y(Le,[["__scopeId","data-v-eac9fd8b"]]);export{We as default};
