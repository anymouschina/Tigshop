import{y as C,d as U,K as L,i as g,G as q,L as B,q as G,c as v,e as l,b as a,w as n,f as h,g as i,I as D,r,o as y,M as K,E as S,D as w,_ as P}from"./index-DrbzVNl6.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import"./index-CeQDmMxd.js";import{u as A,i as R,p as O}from"./format-CRgx78oe.js";/* empty css                                                                    */import{P as X}from"./Pagination-wR9huHyl.js";/* empty css                                                                  *//* empty css                                                                              */import{S as j}from"./SelectTimeInterval-C-WvSG46.js";/* empty css             */import{f as x}from"./time-Bh5UhrfW.js";import{r as H}from"./export-D_WXJj3y.js";const J=d=>C({url:"panel/salesStatistics/salesRanking",method:"get",params:d}),Q=d=>C({url:"panel/salesStatistics/salesRanking",method:"get",responseType:"arraybuffer",params:d}),W={class:"container"},Z={class:"content_wrapper"},$={class:"filtrate-menu"},ee={class:"table-container"},te={class:"flex"},ae={key:0,class:"span-pic"},oe=["href"],se=["src"],ne={class:"span-product-con"},le={class:"span-product-name"},re={class:"empty-warp"},ie={key:0,class:"empty-bg"},de={key:0,class:"pagination-con"},pe=U({__name:"List",setup(d){const E=L(),p=g(!1),k=g(),c=g(0),o=q({page:1,size:E.pageSize,keyword:"",startTime:x(B(30,"sub"),"YYYY-MM-DD"),endTime:x(new Date,"YYYY-MM-DD")}),m=async()=>{p.value=!0;try{const s=await J(o);k.value=s.records,c.value=s.total}catch(s){D.error(s.message),console.error(s)}p.value=!1},b=()=>{m()},u=g(!1),Y=async()=>{u.value=!0;try{const s=await Q({...o,isExport:"1"});u.value=!1,H(s,"销售排行导出")}catch(s){D.error(s.message)}finally{u.value=!1}},z=({prop:s,order:e})=>{console.log(s,e),o.sortField=s,o.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",m()},I=()=>{m()};return G(()=>{m()}),(s,e)=>{const _=r("el-form-item"),N=r("TigInput"),T=r("el-button"),V=r("el-form"),f=r("el-table-column"),M=r("el-table"),F=r("a-spin");return y(),v("div",W,[l("div",Z,[e[7]||(e[7]=l("div",{class:"notice-warp"},"提示：查询的时间间隔上限默认为一月，如果数据量过大导至查询时间过久或者超时报错，请尝试缩小查询的时间间隔！",-1)),a(V,{model:o},{default:n(()=>[l("div",$,[a(_,{class:"mr-10"},{default:n(()=>[a(i(j),{type:"date","start-date":o.startTime,"onUpdate:startDate":e[0]||(e[0]=t=>o.startTime=t),"end-date":o.endTime,"onUpdate:endDate":e[1]||(e[1]=t=>o.endTime=t)},null,8,["start-date","end-date"])]),_:1}),a(_,{class:"mr-10"},{default:n(()=>[a(N,{modelValue:o.keyword,"onUpdate:modelValue":e[2]||(e[2]=t=>o.keyword=t),placeholder:"输入商品名称或者商品编号",onKeyup:K(b,["enter"]),clearable:"",onClear:b},null,8,["modelValue"])]),_:1}),a(_,{class:"mr-10"},{default:n(()=>[a(T,{plain:"",onClick:b},{default:n(()=>e[5]||(e[5]=[S("搜索")])),_:1})]),_:1}),a(_,{class:"mr-10"},{default:n(()=>[a(T,{plain:"",onClick:Y,loading:u.value},{default:n(()=>e[6]||(e[6]=[S("导出EXCEL")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"]),l("div",ee,[a(F,{spinning:p.value},{default:n(()=>[a(M,{data:k.value,total:c.value,"row-key":"productId",onSortChange:z},{empty:n(()=>[l("div",re,[p.value?h("",!0):(y(),v("div",ie,"暂无数据"))])]),default:n(()=>[a(f,{label:"商品名称",prop:"productName"},{default:n(({row:t})=>[l("div",te,[t.picThumb?(y(),v("div",ae,[l("a",{href:i(A)({path:"product",id:t.productId}),target:"_blank"},[l("img",{src:i(R)(t.picThumb),height:"50",width:"50"},null,8,se)],8,oe)])):h("",!0),l("div",ne,[l("div",le,w(t.productName),1)])])]),_:1}),a(f,{label:"商品编号",prop:"productSn"}),a(f,{label:"总销量",prop:"totalSalesNum",sortable:"custom"}),a(f,{label:"总销售额",prop:"totalSalesAmount",sortable:"custom"},{default:n(({row:t})=>[S(w(i(O)(t.totalSalesAmount)),1)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),c.value>0?(y(),v("div",de,[a(i(X),{page:o.page,"onUpdate:page":e[3]||(e[3]=t=>o.page=t),size:o.size,"onUpdate:size":e[4]||(e[4]=t=>o.size=t),total:c.value,onCallback:I},null,8,["page","size","total"])])):h("",!0)])])])}}}),Te=P(pe,[["__scopeId","data-v-cdcce885"]]);export{Te as default};
