import{d as B,j as d,E as N,s as D,x as O,r as i,o as y,c as R,e as p,k as U,w as s,b as t,f as q,$ as G,a0 as j,H as E,h as A,K as _}from"./index-7c2d2aef.js";import{F as H}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-9b6073fb.js";import{a as I,c as K}from"./friendLinks-cf065fff.js";import"./index-6c62cf9b.js";import"./vuedraggable.umd-75ad0f8f.js";import"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import"./format-4e0206d3.js";import"./config-9548fa9b.js";import"./config-e2aa16d1.js";import"./util-1ee03ed8.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";const M={class:"container"},T={class:"content_wrapper"},$={class:"lyecs-form-table"},z=p("div",{class:"extra"},"当你添加文字链接时, 链接LOGO为你的链接名称",-1),J=p("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1),ne=B({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:w,emit:x}){const u=x,n=V,m=d(!0),v=N().currentRoute.value.query,c=d(n.isDialog?n.act:String(v.act)),g=d(n.isDialog?n.id:Number(v.id)),h=c.value==="add"?"create":"update",b=D(),e=d({sort_order:50}),L=async()=>{try{const o=await I(c.value,{id:g.value});Object.assign(e.value,o.item)}catch(o){_.error(o.message),u("close")}finally{m.value=!1}};O(()=>{c.value==="detail"?L():m.value=!1});const k=async()=>{await b.value.validate();try{u("update:confirmLoading",!0);const o=await K(h,{id:g.value,...e.value});u("submitCallback",o),_.success(o.message)}catch(o){_.error(o.message)}finally{u("update:confirmLoading",!1)}};return w({onFormSubmit:()=>{k()}}),(o,a)=>{const f=i("el-input"),r=i("el-form-item"),C=i("el-button"),F=i("el-form"),S=i("a-spin");return y(),R("div",M,[p("div",T,[p("div",$,[m.value?A("",!0):(y(),U(F,{key:0,ref_key:"formRef",ref:b,model:e.value,"label-width":"auto"},{default:s(()=>[t(r,{rules:[{required:!0,message:"链接名称不能为空!"}],label:"链接名称",prop:"link_title"},{default:s(()=>[t(f,{modelValue:e.value.link_title,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.link_title=l)},null,8,["modelValue"]),z]),_:1}),t(r,{label:"链接地址",prop:"link_url"},{default:s(()=>[t(f,{modelValue:e.value.link_url,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.link_url=l),type:"text"},null,8,["modelValue"])]),_:1}),t(r,{label:"链接LOGO",prop:"link_logo"},{default:s(()=>[t(q(H),{photo:e.value.link_logo,"onUpdate:photo":a[2]||(a[2]=l=>e.value.link_logo=l)},null,8,["photo"]),J]),_:1}),t(r,{label:"排序",prop:"sort_order"},{default:s(()=>[t(f,{modelValue:e.value.sort_order,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.sort_order=l)},null,8,["modelValue"])]),_:1}),G(t(r,{"wrapper-col":{offset:4,span:16}},{default:s(()=>[t(C,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:k},{default:s(()=>[E("提交")]),_:1},512)]),_:1},512),[[j,!n.isDialog]])]),_:1},8,["model"])),t(S,{spinning:m.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ne as default};
