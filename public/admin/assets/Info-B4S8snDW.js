import{d as F,i as p,C as P,s as j,q as E,r as s,c,o as r,e as b,j as C,f as I,b as t,w as n,a0 as M,F as v,g as O,E as T,a1 as $,I as g}from"./index-CGYuOau0.js";import{a as z,u as A}from"./pushLog-Cp4ds-gG.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";/* empty css                                                                    *//* empty css                                                                  */import{_ as G}from"./SelectRankList.vue_vue_type_script_setup_true_lang-CCUoIaLF.js";/* empty css                                                                              *//* empty css             */import"./time-ClyPenjC.js";import"./userRank-4CcE-k1Z.js";const H={class:"container"},J={class:"content_wrapper"},K={class:"lyecs-form-table"},re=F({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(S,{expose:h,emit:B}){const i=B,u=S,_=p(!0),y=P().currentRoute.value.query,V=p(u.isDialog?u.act:String(y.act)),w=p(u.isDialog?u.id:Number(y.id)),L=V.value==="add"?"insert":"update",k=j(),e=p({}),N=async()=>{try{const o=await z(V.value,{id:w.value});Object.assign(e.value,o.item)}catch(o){g.error(o.message),i("close")}finally{_.value=!1}};E(()=>{N()});const x=async()=>{await k.value.validate();try{i("update:confirmLoading",!0);const o=await A(L,{id:w.value,...e.value});i("submitCallback",o),g.success(o.message)}catch(o){g.error(o.message)}finally{i("update:confirmLoading",!1)}};return h({onFormSubmit:()=>{x()}}),(o,a)=>{const f=s("el-input"),d=s("el-form-item"),m=s("el-option"),q=s("el-select"),D=s("el-button"),R=s("el-form"),U=s("a-spin");return r(),c("div",H,[b("div",J,[b("div",K,[_.value?I("",!0):(r(),C(R,{key:0,ref_key:"formRef",ref:k,model:e.value,"label-width":"auto"},{default:n(()=>[t(d,{rules:[{required:!0,message:"标题不能为空!"}],label:"标题",prop:"brand_name"},{default:n(()=>[t(f,{modelValue:e.value.brand_name,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.brand_name=l)},null,8,["modelValue"])]),_:1}),t(d,{label:"内容",rules:[{required:!0,message:"内容不能为空!"}],prop:"brand_desc"},{default:n(()=>[t(f,{modelValue:e.value.brand_desc,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.brand_desc=l),row:"2",type:"textarea"},null,8,["modelValue"])]),_:1}),t(d,{label:"发送类型",prop:"brand_is_hot"},{default:n(()=>[t(q,{modelValue:e.value.send_user_type,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.send_user_type=l)},{default:n(()=>[t(m,{value:0,label:"全部会员"}),t(m,{value:1,label:"单个会员"}),t(m,{value:2,label:"会员等级"}),t(m,{value:3,label:"部分会员"})]),_:1},8,["modelValue"]),e.value.brand_is_hot===1?(r(),c(v,{key:0},[],64)):e.value.brand_is_hot===2?(r(),C(O(G),{key:1,modelValue:e.value.brand_desc,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.brand_desc=l)},null,8,["modelValue"])):e.value.brand_is_hot===3?(r(),c(v,{key:2},[t(f,{modelValue:e.value.brand_desc,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.brand_desc=l),row:"2",type:"textarea"},null,8,["modelValue"]),a[5]||(a[5]=b("div",{class:"extra"},"注意：输入会员名称时，请用英文逗号隔开。",-1))],64)):(r(),c(v,{key:3},[],64))]),_:1}),M(t(d,{"wrapper-col":{offset:4,span:16}},{default:n(()=>[t(D,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:x},{default:n(()=>a[6]||(a[6]=[T("提交")])),_:1},512)]),_:1},512),[[$,!u.isDialog]])]),_:1},8,["model"])),t(U,{spinning:_.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{re as default};
