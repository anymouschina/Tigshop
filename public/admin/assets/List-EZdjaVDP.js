import{d as M,i as g,G as $,q as E,c as r,e,b as o,w as a,M as O,f as w,g as c,I as k,r as d,o as p,E as u,D as C,F as S,a as A,_ as G}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{P as j}from"./PopFormElm-DSof3F4x.js";import{_ as H}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as J}from"./Pagination-yOfjsBuR.js";import{u as K}from"./config-DNllFJyR.js";import{g as Q,u as R,d as W,b as X}from"./productAttributesTpl-B63gKNXF.js";import{_ as V}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const Y={class:"container"},Z={class:"content_wrapper"},tt={class:"lyecs-table-list-warp"},et={class:"list-table-tool lyecs-search-warp"},ot={class:"advanced-search-warp list-table-tool-row"},st={class:"simple-form-warp"},at={class:"simple-form-field"},lt={class:"form-group"},nt={class:"control-container"},it={class:"simple-form-field"},rt={class:"form-group"},dt={class:"control-container"},pt={class:"simple-form-field"},ct={class:"form-group"},ut={class:"control-container"},_t={key:0},mt={class:"table-container"},ft={style:{position:"relative"}},vt={class:"tpl-data-con"},gt={class:"empty-warp"},bt={key:0,class:"empty-bg"},ht={key:0,class:"pagination-con"},yt=M({__name:"List",setup(wt){const P=K(),x=g(),_=g(!0),f=g(0),m=g([]),n=$({page:1,size:P.get("page_size"),sort_field:"",sort_order:"",keyword:""}),i=async()=>{_.value=!0;try{const l=await Q({...n});x.value=l.filter_result,f.value=l.total}catch(l){k.error(l.message)}finally{_.value=!1}};E(()=>{i()});const b=()=>{i()},z=({prop:l,order:t})=>{n.sort_field=l,n.sort_order=t=="ascending"?"asc":t=="descending"?"desc":"",i()},T=async l=>{try{const t=await X(l,{ids:m.value});k.success(t.message),i()}catch(t){k.error(t.message)}},q=l=>{m.value=l.map(t=>t.tpl_id)};return(l,t)=>{const h=d("el-button"),D=d("el-input"),F=d("el-popconfirm"),I=d("el-form"),v=d("el-table-column"),U=d("el-divider"),B=d("el-table"),L=d("a-spin");return p(),r("div",Y,[e("div",Z,[e("div",tt,[e("div",et,[o(I,{model:n,onSubmit:O(b,["prevent"])},{default:a(()=>[e("div",ot,[e("div",st,[e("div",at,[e("div",lt,[e("div",nt,[o(D,{modelValue:n.keyword,"onUpdate:modelValue":t[0]||(t[0]=s=>n.keyword=s),name:"keyword",placeholder:"输入属性模板名称",clearable:"",onClear:b},{append:a(()=>[o(h,{onClick:b},{default:a(()=>t[4]||(t[4]=[e("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),e("div",it,[e("div",rt,[e("div",dt,[o(c(V),{params:{act:"add"},isDrawer:"",path:"product/productAttributesTpl/Info",title:"添加属性模板",width:"600px",onOkCallback:i},{default:a(()=>[o(h,{type:"primary"},{default:a(()=>t[5]||(t[5]=[u("添加属性模板")])),_:1})]),_:1})])])]),e("div",pt,[e("div",ct,[e("div",ut,[o(F,{title:"您确认要批量删除所选数据吗？",onConfirm:t[1]||(t[1]=s=>T("del"))},{reference:a(()=>[o(h,{disabled:m.value.length===0},{default:a(()=>t[6]||(t[6]=[u("批量删除")])),_:1},8,["disabled"])]),_:1}),m.value.length>0?(p(),r("span",_t,[t[7]||(t[7]=u(" 已选择：")),e("b",null,C(m.value.length),1),t[8]||(t[8]=u(" 项 "))])):w("",!0)])])])])])]),_:1},8,["model"])]),e("div",mt,[o(L,{spinning:_.value},{default:a(()=>[o(B,{data:x.value,loading:_.value,total:f.value,"row-key":"tpl_id",onSelectionChange:q,onSortChange:z},{empty:a(()=>[e("div",gt,[_.value?w("",!0):(p(),r("div",bt,"暂无数据"))])]),default:a(()=>[o(v,{type:"selection",width:"32"}),o(v,{label:"属性模板名称",sortable:"custom",width:"200"},{default:a(({row:s})=>[e("div",ft,[o(c(j),{"org-value":s.tpl_name,"onUpdate:orgValue":y=>s.tpl_name=y,max:50,params:{id:s.tpl_id,field:"tpl_name"},requestApi:c(R),label:"属性模板名称",type:"textarea"},{default:a(()=>[e("div",null,C(s.tpl_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])])]),_:1}),o(v,{label:"属性名称列表"},{default:a(({row:s})=>[e("div",vt,[(p(!0),r(S,null,A(s.tpl_data,y=>(p(),r(S,null,[(p(!0),r(S,null,A(y,N=>(p(),r("span",null,[u(C(N.attr_name),1),t[9]||(t[9]=e("em",null,"，",-1))]))),256))],64))),256))])]),_:1}),o(v,{width:150,fixed:"right",label:"操作"},{default:a(({row:s})=>[o(c(V),{params:{act:"detail",id:s.tpl_id},isDrawer:"",path:"product/productAttributesTpl/Info",title:"编辑属性模板",width:"600px",onOkCallback:i},{default:a(()=>t[10]||(t[10]=[e("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(U,{direction:"vertical"}),o(c(H),{params:{id:s.tpl_id},requestApi:c(W),onAfterDelete:i},{default:a(()=>t[11]||(t[11]=[u("删除")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),f.value>0?(p(),r("div",ht,[o(c(J),{page:n.page,"onUpdate:page":t[2]||(t[2]=s=>n.page=s),size:n.size,"onUpdate:size":t[3]||(t[3]=s=>n.size=s),total:f.value,onCallback:i},null,8,["page","size","total"])])):w("",!0)])])])])}}}),Ft=G(yt,[["__scopeId","data-v-92871e04"]]);export{Ft as default};
