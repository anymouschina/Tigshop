/* empty css             */import"./index-6c62cf9b.js";import{_ as le}from"./ProductBatch.vue_vue_type_script_setup_true_lang-2293c885.js";import{S as ae}from"./SelectBrand-cb32d59a.js";import{_ as oe}from"./SelectCategory.vue_vue_type_script_setup_true_lang-a47fadcd.js";import{d as se,s as re,I as ie,j as d,x as ne,r as p,o as r,c as u,e as _,b as l,w as a,K as v,F as k,a as L,k as V,H as x,G as O,f as S,h as b,p as de,i as ue,_ as ce}from"./index-7c2d2aef.js";import{u as pe}from"./config-9548fa9b.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import{c as _e,g as me,B as fe}from"./product-689c7c1e.js";/* empty css                                                                    */import{P as ye}from"./ProductCard-5b1dbc4c.js";/* empty css                                                                  *//* empty css                                                                              */import"./region-e0d291a6.js";import"./shopProductCategory-792e0c23.js";import{a as ve}from"./category-7b076a22.js";import{a as be}from"./brand-995f2ca4.js";import{_ as he}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./category-a8bd4d11.js";import"./config-e2aa16d1.js";import"./time-290942a2.js";import"./util-1ee03ed8.js";import"./format-4e0206d3.js";import"./region-05802f67.js";const j=B=>(de("data-v-ffcddbef"),B=B(),ue(),B),ge={class:"container"},ke={class:"content_wrapper"},Le={class:"wrapper_title"},Ve={style:{width:"100%"}},xe={class:"list-table-tool-row"},Be={class:"list-table-tool-col"},Se=j(()=>_("div",{class:"list-table-tool-col"},null,-1)),Ce={class:"wrapper_table"},Ue={class:"flex"},we={class:"flex-column-center"},Pe={key:0},Te={key:1},$e={key:2},Fe={key:3},Ie={key:4},Ne={key:5},We=j(()=>_("div",{class:"extra"},"一次最多添加100个商品",-1)),De=se({__name:"List",setup(B){const z=re();pe();const A=ie({page:1,size:100,sort_field:"",sort_order:"",keyword:""}),f=d({type:[]}),E=d([{lable:"商品上下架状态",key:"product_status",type:"status"},{lable:"商品名称",key:"product_name",type:"input"},{lable:"商品分类",key:"category_id",type:"category"},{lable:"商品品牌",key:"brand_id",type:"brand"},{lable:"商品货号",key:"product_sn",type:"input"},{lable:"条形编码",key:"product_tsn",type:"input"},{lable:"商品售价",key:"product_price",type:"input"},{lable:"市场价",key:"market_price",type:"input"},{lable:"运费模板",key:"shipping_tpl_id",type:"shipping_tpl"},{lable:"是否包邮",key:"free_shipping",type:"select"},{lable:"是否新品",key:"is_new",type:"select"},{lable:"是否精品",key:"is_best",type:"select"},{lable:"是否热销",key:"is_hot",type:"select"},{lable:"排序",key:"sort_order",type:"input"}]),N=d([{label:"上架",value:1},{label:"下架",value:0}]),W=d([{label:"是",value:1},{label:"否",value:0}]),m=d([]),M=d(0),D=d(!0),h=d([]),G=async s=>{try{s&&h.value.push(...s);const t=await me({ids:h.value,...A});t.filter_result.map(i=>{i.shipping_tpl_id==0&&(i.shipping_tpl_id="")}),m.value=t.filter_result,console.log(m.value),M.value=t.total}catch(t){v.error(t.message)}finally{D.value=!1}},H=s=>{m.value.map(t=>{Object.assign(t,s)})},J=s=>{m.value=m.value.filter(i=>i.product_id!==s);let t=[];m.value.map(i=>{t.push(i.product_id)}),h.value=t},C=d([]),U=d([]),w=d([]),P=d([]),T=d([]),q=async()=>{try{const s=await _e();C.value=s.shipping_tpl_list;const t=await ve();U.value=t.filter_result;const i=await be();w.value=i.firstword_list,P.value=i.brand_list,T.value=i.brand_list}catch(s){v.error(s.message)}finally{D.value=!1}};ne(()=>{q()});const Q=async()=>{if(m.value.length<1){v.error("未选择商品");return}if(f.value.type.length<1){v.error("未选择修改项");return}let s=Y();if(X(s))try{const t=await fe(JSON.stringify(s));v.success("操作成功"),R()}catch(t){v.error(t.message)}},R=()=>{m.value=[],f.value.type=[],h.value=[]},X=s=>{for(let t of s)if(t.product_name==""||t.product_sn=="")return v.error("商品名称或商品货号不能为空"),!1;return!0},Y=()=>{const s=["product_id"],i=[...f.value.type.map(c=>c.key),...s];return m.value.map(c=>{const y={};return i.forEach(g=>{c[g]!==void 0&&(y[g]=c[g])}),y})};return(s,t)=>{const i=p("el-checkbox"),K=p("el-checkbox-group"),c=p("el-form-item"),y=p("el-button"),g=p("el-space"),$=p("el-table-column"),F=p("el-option"),I=p("el-select"),Z=p("el-input"),ee=p("el-table"),te=p("el-form");return r(),u("div",ge,[_("div",ke,[_("div",Le,[l(te,{ref_key:"formRef",ref:z,model:f.value,"label-width":"auto"},{default:a(()=>[l(c,{label:"选择修改："},{default:a(()=>[l(K,{modelValue:f.value.type,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value.type=e)},{default:a(()=>[(r(!0),u(k,null,L(E.value,e=>(r(),V(i,{value:e,style:{"margin-bottom":"10px"}},{default:a(()=>[x(O(e.lable),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"商品信息："},{default:a(()=>[_("div",Ve,[_("div",xe,[_("div",Be,[l(g,null,{default:a(()=>[l(S(he),{params:{selected_ids:h.value,isMultiple:!0},isDrawer:"",path:"product/product/src/SelectProduct",title:"选择商品",width:"600px",onOkCallback:G},{default:a(()=>[l(y,{type:"primary"},{default:a(()=>[x("添加商品")]),_:1})]),_:1},8,["params"])]),_:1})]),Se]),_("div",Ce,[l(le,{types:f.value.type,productStatusList:N.value,selectList:W.value,onCallback:H,categoryList:U.value,firstWordList:w.value,brandList:P.value,allBrandList:T.value,shippingTplList:C.value},null,8,["types","productStatusList","selectList","categoryList","firstWordList","brandList","allBrandList","shippingTplList"]),l(ee,{data:m.value,border:"",style:{width:"100%"},loading:""},{default:a(()=>[l($,{label:"商品信息"},{default:a(({row:e})=>[_("div",Ue,[l(S(ye),{pic_thumb:e.pic_thumb,product_id:e.product_id,product_name:e.product_name},null,8,["pic_thumb","product_id","product_name"])])]),_:1}),(r(!0),u(k,null,L(f.value.type,e=>(r(),V($,{width:"180",align:"center"},{header:a(()=>[_("div",we,[_("div",null,O(e.lable),1)])]),default:a(({row:n})=>[e.type=="status"?(r(),u("div",Pe,[l(I,{modelValue:n[e.key],"onUpdate:modelValue":o=>n[e.key]=o},{default:a(()=>[(r(!0),u(k,null,L(N.value,o=>(r(),V(F,{label:o.label,value:o.value},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):b("",!0),e.type=="shipping_tpl"?(r(),u("div",Te,[l(I,{modelValue:n.shipping_tpl_id,"onUpdate:modelValue":o=>n.shipping_tpl_id=o},{default:a(()=>[(r(!0),u(k,null,L(C.value,o=>(r(),V(F,{label:o.shipping_tpl_name,value:o.shipping_tpl_id},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):b("",!0),e.type=="select"?(r(),u("div",$e,[l(I,{modelValue:n[e.key],"onUpdate:modelValue":o=>n[e.key]=o},{default:a(()=>[(r(!0),u(k,null,L(W.value,o=>(r(),V(F,{label:o.label,value:o.value},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):b("",!0),e.type=="input"?(r(),u("div",Fe,[l(c,null,{default:a(()=>[l(Z,{modelValue:n[e.key],"onUpdate:modelValue":o=>n[e.key]=o,placeholder:e.lable},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024)])):b("",!0),e.key=="category_id"?(r(),u("div",Ie,[l(c,null,{default:a(()=>[l(S(oe),{category_id:n.category_id,"onUpdate:category_id":o=>n.category_id=o,categoryList:U.value},null,8,["category_id","onUpdate:category_id","categoryList"])]),_:2},1024)])):b("",!0),e.key=="brand_id"?(r(),u("div",Ne,[l(c,null,{default:a(()=>[l(S(ae),{brand_id:n.brand_id,"onUpdate:brand_id":o=>n.brand_id=o,firstWordList:w.value,brandList:P.value,allBrandList:T.value},null,8,["brand_id","onUpdate:brand_id","firstWordList","brandList","allBrandList"])]),_:2},1024)])):b("",!0)]),_:2},1024))),256)),l($,{fixed:"right",label:"操作",width:"90",align:"center"},{default:a(({row:e})=>[l(y,{link:"",type:"primary",size:"small",onClick:n=>J(e.product_id)},{default:a(()=>[x(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),We])])]),_:1}),l(c,{label:" "},{default:a(()=>[l(y,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:t[1]||(t[1]=e=>Q())},{default:a(()=>[x("提交 ")]),_:1},512),l(y,{ref:"submitBtn",class:"form-submit-btn",onClick:t[2]||(t[2]=e=>R())},{default:a(()=>[x("重置")]),_:1},512)]),_:1})]),_:1},8,["model"])])])])}}});const nt=ce(De,[["__scopeId","data-v-ffcddbef"]]);export{nt as default};
