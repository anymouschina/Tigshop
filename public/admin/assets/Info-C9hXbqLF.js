import{d as X,i as f,C as U,s as Y,q as Z,r as b,c as r,o as i,e as l,b as a,j as u,f as _,w as t,F as v,D as o,E as k,g as m,a as ee,I as $,aQ as ae,_ as te}from"./index-CGYuOau0.js";import{c as le,e as se}from"./apply-BcvfaJoD.js";import{i as p}from"./format-DFT-VJzO.js";import{S as D}from"./StatusDot-YMdUi2kT.js";import{M as q}from"./MobileCard-CkxM62lR.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";const oe={class:"container"},ie={class:"content_wrapper"},de={class:"lyecs-form-table"},ne={class:"width100"},_e={class:"width100"},ue={class:"width100"},ce={class:"width100"},re={class:"width100"},ve={class:"width100"},me={class:"width100"},pe={class:"width100"},be={class:"width100"},he={class:"width100"},fe={class:"width100"},ye={class:"width100"},ke={class:"width100"},ge={class:"width100"},we={class:"width100"},Ce={class:"width100"},Ve={class:"width100"},xe={class:"width100"},Be={class:"width100"},$e={class:"width100"},Se={class:"width100"},ze={class:"width100"},De={class:"width100"},Ie={class:"width100"},Ne={class:"width100"},Me={class:"width100"},Re={class:"width100"},Te={class:"width100"},Le={class:"width100"},Ue={class:"width100"},qe={class:"width100"},Ae={class:"width100"},Ee={class:"width100"},Fe={class:"width100"},je={class:"width100"},Oe={class:"width100"},Ke={class:"width100"},Qe={class:"width100"},Ge={class:"width100"},He={class:"image"},Je=X({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(A,{emit:E}){const g=E,h=f("sm"),F=c=>{h.value=c},x=A,B=f(!0),j=U(),I=U().currentRoute.value.query,S=f(x.isDialog?x.act:String(I.act)),N=f(x.isDialog?x.id:Number(I.id));S.value;const M=Y(),e=f({}),O=async()=>{try{const c=await le(S.value,{id:N.value});Object.assign(e.value,c.item)}catch(c){$.error(c.message),g("close")}finally{B.value=!1}},K=f([{value:1,label:"大陆身份证"},{value:2,label:"护照（限境外人士）"},{value:3,label:"来往内地通行证（中国香港居民）"},{value:4,label:"来往内地通行证（中国澳门居民）"},{value:5,label:"来往大陆通行证（中国台湾居民）"}]);Z(()=>{S.value==="detail"?O():B.value=!1});const R=async c=>{await M.value.validate();try{if(c==20&&!e.value.audit_remark){$.error("请输入审核备注");return}g("update:confirmLoading",!0);const d=await se({merchant_apply_id:N.value,status:c,audit_remark:e.value.audit_remark});if(c==10){Q(d);return}g("submitCallback",d),$.success(d.message)}catch(d){$.error(d.message)}finally{g("update:confirmLoading",!1)}},Q=c=>{ae.confirm("入驻申请已通过，系统已为用户自动创建商户","提示",{confirmButtonText:"前往商户列表",cancelButtonText:"取消",type:"success"}).then(()=>{j.push({path:"/adminMerchant/list"}),g("submitCallback",c)}).catch(()=>{g("submitCallback",c)})},T=f(""),z=f(!1),w=c=>{T.value=c,z.value=!0};return(c,d)=>{const C=b("el-tab-pane"),G=b("el-tabs"),s=b("el-form-item"),y=b("el-image"),L=b("el-button"),H=b("el-input"),J=b("el-form"),P=b("a-spin"),W=b("el-dialog");return i(),r(v,null,[l("div",oe,[l("div",ie,[l("div",de,[a(G,{modelValue:h.value,"onUpdate:modelValue":d[0]||(d[0]=n=>h.value=n),class:"lyecs-tabs","tab-position":"top",onTabChange:F},{default:t(()=>[(i(),u(C,{key:1,label:"基础信息",name:"sm"})),e.value.type==2?(i(),u(C,{key:2,label:"企业信息",name:"company"})):_("",!0),(i(),u(C,{key:3,label:e.value.type==1?"个人信息":"法人代表信息",name:"base"},null,8,["label"])),(i(),u(C,{key:4,label:"商户信息",name:"merchant"})),(i(),u(C,{key:5,label:"店铺信息",name:"shop"}))]),_:1},8,["modelValue"]),B.value?_("",!0):(i(),u(J,{key:0,ref_key:"formRef",ref:M,model:e.value,"label-width":"auto"},{default:t(()=>[h.value=="sm"?(i(),r(v,{key:0},[a(s,{label:"预期店铺名称"},{default:t(()=>[l("div",ne,o(e.value.shop_data.shop_title),1)]),_:1}),a(s,{label:"入驻资质",prop:"status"},{default:t(()=>[l("div",_e,o(e.value.type==1?"个人入驻":"企业入驻"),1)]),_:1}),e.value.type==1?(i(),r(v,{key:0},[],64)):_("",!0),e.value.type==2?(i(),u(s,{key:1,label:"企业名称"},{default:t(()=>[l("div",ue,o(e.value.base_data.company_name),1)]),_:1})):_("",!0),a(s,{label:"联系人姓名"},{default:t(()=>[l("div",ce,o(e.value.merchant_data.contact_name),1)]),_:1}),a(s,{label:"联系人手机"},{default:t(()=>[l("div",re,[a(q,{mobile:e.value.merchant_data.contact_phone},null,8,["mobile"])])]),_:1}),a(s,{label:"联系人邮箱"},{default:t(()=>[l("div",ve,o(e.value.merchant_data.contact_email),1)]),_:1}),a(s,{label:"审核结果"},{default:t(()=>[l("div",me,[l("div",null,[e.value.status==1?(i(),u(D,{key:0,flicker:!0})):_("",!0),e.value.status==10?(i(),u(D,{key:1,color:"#52c41a",flicker:!0})):_("",!0),e.value.status==20?(i(),u(D,{key:2,color:"#f5222d",flicker:!1})):_("",!0),k(" "+o(e.value.status_text),1)])])]),_:1}),e.value.status==20?(i(),u(s,{key:2,label:"拒绝原因"},{default:t(()=>[l("div",pe,o(e.value.audit_remark),1)]),_:1})):_("",!0)],64)):_("",!0),h.value=="company"?(i(),r(v,{key:1},[a(s,{label:"企业名称"},{default:t(()=>[l("div",be,o(e.value.base_data.company_name),1)]),_:1}),a(s,{label:"注册地址"},{default:t(()=>[l("div",he,o(e.value.base_data.license_addr_province_name)+" "+o(e.value.base_data.business_license_address),1)]),_:1}),a(s,{label:"经营范围"},{default:t(()=>[l("div",fe,o(e.value.base_data.business_scope),1)]),_:1}),a(s,{label:"统一社会信用代码"},{default:t(()=>[l("div",ye,o(e.value.base_data.business_license_id),1)]),_:1}),a(s,{label:"营业期限"},{default:t(()=>[l("div",ke,[e.value.base_data.operating_term_type==1?(i(),r(v,{key:0},[k(o(e.value.base_data.operating_term_type_date[0]+" ～  "+e.value.base_data.operating_term_type_date[1]),1)],64)):(i(),r(v,{key:1},[k(o(e.value.base_data.operating_term_type_end)+" ～长期 ",1)],64))])]),_:1})],64)):_("",!0),h.value=="base"?(i(),r(v,{key:2},[a(s,{label:e.value.type==1?"个人姓名":"法定代表人姓名"},{default:t(()=>[l("div",ge,o(e.value.base_data.corporate_name),1)]),_:1},8,["label"]),a(s,{label:"证件类型"},{default:t(()=>{var n;return[l("div",we,o(((n=K.value.find(V=>V.value===e.value.base_data.document_type))==null?void 0:n.label)||""),1)]}),_:1}),a(s,{label:"证件号码"},{default:t(()=>[l("div",Ce,o(e.value.base_data.document_number),1)]),_:1}),a(s,{label:"性别"},{default:t(()=>[l("div",Ve,o(e.value.base_data.sex==1?"男":"女"),1)]),_:1}),a(s,{label:"居住地址"},{default:t(()=>[l("div",xe,o(e.value.base_data.residential_address),1)]),_:1}),a(s,{label:"证件有效期"},{default:t(()=>[l("div",Be,[e.value.base_data.certificate_validity_period==1?(i(),r(v,{key:0},[k(o(e.value.base_data.certificate_validity_period_date[0]+" ～ "+e.value.base_data.certificate_validity_period_date[1]),1)],64)):(i(),r(v,{key:1},[k(o(e.value.base_data.certificate_validity_period_end)+" ～ 长期 ",1)],64))])]),_:1}),a(s,{label:"证件照正面"},{default:t(()=>[l("div",$e,[a(y,{src:m(p)(e.value.base_data.front_of_photo[0].pic_url),class:"image-size",fit:"cover",onClick:d[1]||(d[1]=n=>w(m(p)(e.value.base_data.front_of_photo[0].pic_url)))},null,8,["src"])])]),_:1}),a(s,{label:"证件照反面"},{default:t(()=>[l("div",Se,[a(y,{src:m(p)(e.value.base_data.back_of_photo[0].pic_url),class:"image-size",fit:"cover",onClick:d[2]||(d[2]=n=>w(m(p)(e.value.base_data.back_of_photo[0].pic_url)))},null,8,["src"])])]),_:1}),e.value.base_data.supplementary_information.length>0?(i(),u(s,{key:0,label:"补充信息"},{default:t(()=>[l("div",ze,[(i(!0),r(v,null,ee(e.value.base_data.supplementary_information,n=>(i(),u(y,{src:m(p)(n.pic_url),class:"image-size",fit:"cover",onClick:V=>w(m(p)(n.pic_url))},null,8,["src","onClick"]))),256))])]),_:1})):_("",!0)],64)):_("",!0),h.value=="merchant"?(i(),r(v,{key:3},[a(s,{label:"商户名称"},{default:t(()=>[l("div",De,o(e.value.merchant_data.merchant_name),1)]),_:1}),e.value.type==1?(i(),r(v,{key:0},[a(s,{label:"持卡人"},{default:t(()=>[l("div",Ie,o(e.value.base_data.corporate_name),1)]),_:1}),a(s,{label:"开户银行"},{default:t(()=>[l("div",Ne,o(e.value.merchant_data.bank_deposit),1)]),_:1}),a(s,{label:"开户支行"},{default:t(()=>[l("div",Me,o(e.value.merchant_data.bank_branch),1)]),_:1}),a(s,{label:"银行卡号"},{default:t(()=>[l("div",Re,o(e.value.merchant_data.bank_card),1)]),_:1})],64)):_("",!0),e.value.type==2?(i(),r(v,{key:1},[a(s,{label:"对公账户"},{default:t(()=>[l("div",Te,o(e.value.base_data.company_name),1)]),_:1}),a(s,{label:"开户银行"},{default:t(()=>[l("div",Le,o(e.value.merchant_data.bank_deposit),1)]),_:1}),a(s,{label:"开户支行"},{default:t(()=>[l("div",Ue,o(e.value.merchant_data.bank_branch),1)]),_:1}),a(s,{label:"对公银行账号"},{default:t(()=>[l("div",qe,o(e.value.merchant_data.bank_card),1)]),_:1}),a(s,{label:"开户许可证"},{default:t(()=>{var n;return[l("div",Ae,[((n=e.value.merchant_data.account_opening_permit)==null?void 0:n.length)>0?(i(),u(y,{key:0,src:m(p)(e.value.merchant_data.account_opening_permit[0].pic_url),class:"image-size",fit:"cover",onClick:d[3]||(d[3]=V=>w(m(p)(e.value.merchant_data.account_opening_permit[0].pic_url)))},null,8,["src"])):_("",!0)])]}),_:1})],64)):_("",!0),a(s,{label:"经营地区"},{default:t(()=>[l("div",Ee,o(e.value.merchant_data.business_address_name)+o(e.value.merchant_data.detailed_address),1)]),_:1}),e.value.type==2?(i(),u(s,{key:2,label:"营业执照"},{default:t(()=>{var n;return[l("div",Fe,[((n=e.value.merchant_data.business_license_img)==null?void 0:n.length)>0?(i(),u(y,{key:0,src:m(p)(e.value.merchant_data.business_license_img[0].pic_url),class:"image-size",fit:"cover",onClick:d[4]||(d[4]=V=>w(m(p)(e.value.merchant_data.business_license_img[0].pic_url)))},null,8,["src"])):_("",!0)])]}),_:1})):_("",!0),a(s,{label:"客服电话"},{default:t(()=>[l("div",je,o(e.value.merchant_data.contact_phone),1)]),_:1})],64)):_("",!0),h.value=="shop"?(i(),r(v,{key:4},[a(s,{label:"店铺名称"},{default:t(()=>[l("div",Oe,o(e.value.shop_data.shop_title),1)]),_:1}),a(s,{label:"联系电话"},{default:t(()=>[l("div",Ke,[a(q,{mobile:e.value.shop_data.contact_mobile},null,8,["mobile"])])]),_:1}),a(s,{label:"店铺logo"},{default:t(()=>{var n;return[l("div",Qe,[((n=e.value.shop_data.shop_logo)==null?void 0:n.length)>0?(i(),u(y,{key:0,src:m(p)(e.value.shop_data.shop_logo[0].pic_url),class:"image-size",fit:"cover",onClick:d[5]||(d[5]=V=>w(m(p)(e.value.shop_data.shop_logo[0].pic_url)))},null,8,["src"])):_("",!0)])]}),_:1}),e.value.shop_data.description?(i(),u(s,{key:0,label:"店铺简介"},{default:t(()=>[l("div",Ge,o(e.value.shop_data.description),1)]),_:1})):_("",!0)],64)):_("",!0),e.value.status==1?(i(),r(v,{key:5},[a(s,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[a(L,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:d[6]||(d[6]=n=>R(10))},{default:t(()=>d[10]||(d[10]=[k("审核通过")])),_:1},512),a(L,{ref:"submitBtn",class:"form-submit-btn",onClick:d[7]||(d[7]=n=>R(20))},{default:t(()=>d[11]||(d[11]=[k("审核不通过")])),_:1},512)]),_:1}),a(H,{rows:"4",modelValue:e.value.audit_remark,"onUpdate:modelValue":d[8]||(d[8]=n=>e.value.audit_remark=n),placeholder:"请输入审核备注（审核不通过将必填）",type:"textarea"},null,8,["modelValue"])],64)):_("",!0)]),_:1},8,["model"])),a(P,{spinning:B.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])]),a(W,{modelValue:z.value,"onUpdate:modelValue":d[9]||(d[9]=n=>z.value=n)},{default:t(()=>[l("div",He,[a(y,{src:T.value,alt:"",fit:"cover"},null,8,["src"])])]),_:1},8,["modelValue"])],64)}}}),ta=te(Je,[["__scopeId","data-v-c889fdbd"]]);export{ta as default};
