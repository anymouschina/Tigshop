import{d as j,i as f,C as E,s as I,q as A,I as y,r as d,c as G,o as n,e as m,j as i,f as c,w as t,b as a,a0 as M,D as _,g,E as k,a1 as O}from"./index-CGYuOau0.js";import{F as P}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-CjXfTDg5.js";import{_ as T}from"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import{S as h}from"./StatusDot-YMdUi2kT.js";import{p as $}from"./format-DFT-VJzO.js";import{b as z,d as H,u as J}from"./withdraw-BSbEobmz.js";import"./index-B-GURfkM.js";import"./vuedraggable.umd-_1km55l4.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";const K={class:"container"},Q={class:"content_wrapper"},X={class:"lyecs-form-table"},ce=j({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(C,{expose:q,emit:B}){const v=B,p=C,w=f(!1),V=E().currentRoute.value.query,N=f(p.isDialog?p.act:String(V.act)),b=f(p.isDialog?p.id:Number(V.id));N.value;const D=I(),r=f({}),e=f({});A(()=>{R()});const R=async()=>{try{const l=await z({id:b.value});console.log(l.item),Object.assign(e.value,l.item)}catch(l){y.error(l.message),v("close")}finally{w.value=!1}},S=async()=>{await D.value.validate();try{if(v("update:confirmLoading",!0),e.value.status==0){const l=await H({id:b.value,...r.value});y.success(l.message)}if(e.value.status==4){const l=await J({id:b.value,...r.value});y.success(l.message)}v("submitCallback",!0)}catch(l){y.error(l.message)}finally{v("update:confirmLoading",!1)}};return q({onFormSubmit:()=>{S()}}),(l,o)=>{const s=d("el-form-item"),x=d("el-radio"),F=d("el-radio-group"),L=d("el-input"),U=d("el-button"),W=d("el-form");return n(),G("div",K,[m("div",Q,[m("div",X,[w.value?c("",!0):(n(),i(W,{key:0,ref_key:"formRef",ref:D,model:r.value,"label-width":"auto"},{default:t(()=>[a(s,{prop:"add_time",label:"申请时间"},{default:t(()=>[m("p",null,_(e.value.add_time),1)]),_:1}),a(s,{prop:"amount",label:"申请金额"},{default:t(()=>[m("p",null,_(g($)(e.value.amount)),1)]),_:1}),a(s,{prop:"account_data.account_name",label:"状态"},{default:t(()=>[e.value.status==0||e.value.status==4?(n(),i(h,{key:0,color:"blue",flicker:!0})):c("",!0),e.value.status==2?(n(),i(h,{key:1,color:"red",flicker:!0})):c("",!0),e.value.status==3?(n(),i(h,{key:2,color:"green",flicker:!0})):c("",!0),m("span",null,_(e.value.status_text),1)]),_:1}),a(s,{prop:"account_data.account_name",label:"收款人"},{default:t(()=>{var u;return[m("p",null,_((u=e.value.account_data)==null?void 0:u.account_name),1)]}),_:1}),a(s,{prop:"account_data.account_no",label:"收款账号"},{default:t(()=>{var u;return[m("p",null,_((u=e.value.account_data)==null?void 0:u.account_no),1)]}),_:1}),e.value.payment_voucher&&e.value.payment_voucher!==null?(n(),i(s,{key:0,prop:"payment_voucher",label:"打款凭证"},{default:t(()=>[a(g(T),{src:e.value.payment_voucher,fit:"contain",style:{height:"80px",width:"80px"}},null,8,["src"])]),_:1})):c("",!0),e.value.status==0?(n(),i(s,{key:1,prop:"status",label:"审核结果",rules:[{required:!0,message:"请选择审核结果!"}]},{default:t(()=>[a(F,{modelValue:r.value.status,"onUpdate:modelValue":o[0]||(o[0]=u=>r.value.status=u)},{default:t(()=>[a(x,{value:4},{default:t(()=>o[3]||(o[3]=[k("审核通过")])),_:1}),a(x,{value:2},{default:t(()=>o[4]||(o[4]=[k("审核不通过")])),_:1})]),_:1},8,["modelValue"])]),_:1})):c("",!0),e.value.status==0&&r.value.status==2?(n(),i(s,{key:2,prop:"audit_remark",label:"拒绝原因",rules:[{required:!0,message:"拒绝原因不能为空!"}]},{default:t(()=>[a(L,{type:"textarea",row:"2",modelValue:r.value.audit_remark,"onUpdate:modelValue":o[1]||(o[1]=u=>r.value.audit_remark=u)},null,8,["modelValue"])]),_:1})):c("",!0),e.value.status==4?(n(),i(s,{key:3,prop:"payment_voucher",label:"打款凭证",rules:[{required:!0,message:"打款凭证不能为空!"}]},{default:t(()=>[a(g(P),{photo:r.value.payment_voucher,"onUpdate:photo":o[2]||(o[2]=u=>r.value.payment_voucher=u)},null,8,["photo"])]),_:1})):c("",!0),M(a(s,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[a(U,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:S},{default:t(()=>o[5]||(o[5]=[k("提交")])),_:1},512)]),_:1},512),[[O,!p.isDialog]])]),_:1},8,["model"]))])])])}}});export{ce as default};
