import{d as h,i as n,C as x,s as V,q as B,I as d,r as u,c as N,o as b,e as y,j as D,f as q,w as i,b as o,a3 as E,g as U,E as j,a4 as F}from"./index-DrbzVNl6.js";import{b as G,u as M}from"./live-Bu2vNkIT.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import"./index-CeQDmMxd.js";/* empty css                                                                    *//* empty css                                                                  */import{S as O}from"./SelectGoodsRange-YYw1f4gE.js";/* empty css                                                                              *//* empty css             */import"./time-Bh5UhrfW.js";import"./SelectBrand-DNAqPzAl.js";import"./brand-C64i7ZtK.js";import"./SelectCategory.vue_vue_type_script_setup_true_lang-DKnpU9uO.js";import"./category-B3nMG9Bb.js";import"./category-BQLd1cDS.js";import"./SelectProduct-BHvR_Ddk.js";import"./format-CRgx78oe.js";import"./product-DEi2MlvQ.js";import"./Pagination-wR9huHyl.js";import"./SelectSku--IXQGnUO.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const z={class:"container"},A={class:"content_wrapper"},H={class:"lyecs-form-table"},de=h({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:R,emit:S}){const l=S,r=w,m=n(!0),f=x().currentRoute.value.query,c=n(r.isDialog?r.act:String(f.act)),v=n(r.isDialog?r.id:Number(f.id)),T=c.value==="add"?"create":"update",g=V(),e=n({});B(()=>{c.value==="detail"?L():m.value=!1});const L=async()=>{try{const t=await G(c.value,{id:v.value});Object.assign(e.value,t)}catch(t){d.error(t.message),l("close")}finally{m.value=!1}},_=async()=>{await g.value.validate();try{l("update:confirmLoading",!0);const t=await M(T,{id:v.value,...e.value});l("submitCallback",t),d.success("操作成功")}catch(t){d.error(t.message)}finally{l("update:confirmLoading",!1)}};return R({onFormSubmit:()=>{_()}}),(t,a)=>{const k=u("TigInput"),p=u("el-form-item"),C=u("el-button"),I=u("el-form");return b(),N("div",z,[y("div",A,[y("div",H,[m.value?q("",!0):(b(),D(I,{key:0,ref_key:"formRef",ref:g,model:e.value,"label-width":"auto"},{default:i(()=>[o(p,{prop:"wechatLiveTitle",label:"直播名称",rules:[{required:!0,message:"直播名称不能为空!"}]},{default:i(()=>[o(k,{classType:"tig-form-input",modelValue:e.value.wechatLiveTitle,"onUpdate:modelValue":a[0]||(a[0]=s=>e.value.wechatLiveTitle=s)},null,8,["modelValue"])]),_:1}),o(p,{prop:"productId",label:"选择商品"},{default:i(()=>[o(U(O),{rangeIds:e.value.actRangeExt,"onUpdate:rangeIds":a[1]||(a[1]=s=>e.value.actRangeExt=s),rangeType:e.value.actRange,"onUpdate:rangeType":a[2]||(a[2]=s=>e.value.actRange=s),isSelf:1},null,8,["rangeIds","rangeType"])]),_:1}),E(o(p,{"wrapper-col":{offset:4,span:16}},{default:i(()=>[o(C,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:_},{default:i(()=>a[3]||(a[3]=[j("提交")])),_:1},512)]),_:1},512),[[F,!r.isDialog]])]),_:1},8,["model"]))])])])}}});export{de as default};
