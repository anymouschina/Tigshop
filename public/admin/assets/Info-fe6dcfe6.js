import{d as D,j as c,E as I,s as L,x as j,r as s,o as m,c as E,e as n,k as p,w as a,b as o,G as f,h as _,H as F,K as v}from"./index-7c2d2aef.js";import{a as P,u as G}from"./enquiry-d5265089.js";const H={class:"container"},K={class:"content_wrapper"},M={class:"lyecs-form-table"},z=D({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:x,emit:B}){const r=B,i=w,u=c(!0),b=I().currentRoute.value.query,d=c(i.isDialog?i.act:String(b.act)),y=c(i.isDialog?i.id:Number(b.id));d.value;const g=L(),e=c({}),C=async()=>{try{const t=await P(d.value,{id:y.value});Object.assign(e.value,t.item)}catch(t){v.error(t.message),r("close")}finally{u.value=!1}};j(()=>{d.value==="detail"?C():u.value=!1});const k=async()=>{await g.value.validate();try{r("update:confirmLoading",!0);const t=await G({id:y.value,remark:e.value.remark});r("submitCallback",t),v.success(t.message)}catch(t){v.error(t.message)}finally{r("update:confirmLoading",!1)}};return x({onFormSubmit:()=>{k()}}),(t,h)=>{const l=s("el-form-item"),S=s("el-input"),V=s("el-button"),N=s("el-form"),R=s("a-spin");return m(),E("div",H,[n("div",K,[n("div",M,[u.value?_("",!0):(m(),p(N,{key:0,ref_key:"formRef",ref:g,model:e.value,"label-width":"auto"},{default:a(()=>[o(l,{label:"联系方式",prop:"mobile"},{default:a(()=>[n("div",null,f(e.value.mobile),1)]),_:1}),o(l,{label:"询价内容",prop:"content"},{default:a(()=>[n("div",null,f(e.value.content),1)]),_:1}),o(l,{label:"创建时间",prop:"create_time"},{default:a(()=>[n("div",null,f(e.value.create_time),1)]),_:1}),e.value.status===0?(m(),p(l,{key:0,label:"回复内容",prop:"remark"},{default:a(()=>[o(S,{modelValue:e.value.remark,"onUpdate:modelValue":h[0]||(h[0]=q=>e.value.remark=q),rows:6,type:"textarea",placeholder:"请输入回复内容"},null,8,["modelValue"])]),_:1})):_("",!0),e.value.status===0?(m(),p(l,{key:1,label:" "},{default:a(()=>[o(V,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:k},{default:a(()=>[F("提交")]),_:1},512)]),_:1})):_("",!0)]),_:1},8,["model"])),o(R,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{z as default};
