import V from"./ReconnectionList-oL4dC9Gk.js";import{t as x}from"./conversation-BfOs7vot.js";import{d as N,i as l,c as B,F as U,e as o,b as r,r as p,w as n,o as f,j as I,f as L,E as _,I as d,_ as E}from"./index-CGYuOau0.js";import"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";import"./StatusDot-YMdUi2kT.js";const F={class:"dialog-footer"},W=N({__name:"Reconnection",props:{conversation_id:{type:Number,default:0}},emits:["serversUpdated"],setup(c,{expose:C,emit:k}){const y=l(null),t=l(!1),b=c,u=()=>{t.value=!0},m=()=>{t.value=!1},g=k,s=l(0),w=async()=>{if(s.value==0){d.error("请选择转接客服");return}try{const a=await x({conversation_id:b.conversation_id,servant_id:s.value});d.success(a.message),t.value=!1,g("serversUpdated")}catch(a){d.error(a.message)}finally{}};return C({showWin:u}),(a,e)=>{const v=p("el-button"),R=p("el-dialog");return f(),B(U,null,[o("div",{class:"reception-panel-toolbar-waiting",onClick:u}," 转接 "),r(R,{"destroy-on-close":!0,modelValue:t.value,"onUpdate:modelValue":e[1]||(e[1]=i=>t.value=i),"show-close":!1,width:"560"},{header:n(({close:i,titleId:j,titleClass:T})=>[o("div",{class:"header-title"},[e[3]||(e[3]=o("div",{class:"title"}," 转接客服 ",-1)),o("div",{onClick:m,class:"right"},e[2]||(e[2]=[o("em",{class:"main_pel_m iconfont-admin icon-cha1"},null,-1)]))])]),footer:n(()=>[o("div",F,[r(v,{onClick:m},{default:n(()=>e[4]||(e[4]=[_("取消")])),_:1}),r(v,{disabled:s.value==0,type:"primary",onClick:w},{default:n(()=>e[5]||(e[5]=[_(" 转接 ")])),_:1},8,["disabled"])])]),default:n(()=>[t.value?(f(),I(V,{key:0,servant_id:s.value,"onUpdate:servant_id":e[0]||(e[0]=i=>s.value=i),conversation_id:c.conversation_id,ref_key:"ReconnectionListRef",ref:y},null,8,["servant_id","conversation_id"])):L("",!0)]),_:1},8,["modelValue"])],64)}}}),K=E(W,[["__scopeId","data-v-3507c986"]]);export{K as default};
