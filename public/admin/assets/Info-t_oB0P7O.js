import{d as T,bp as q,i as p,C as U,s as L,q as j,r as s,c as E,o as c,e as C,j as V,f as N,b as o,w as a,a3 as F,g as A,E as f,a4 as M,I as g}from"./index-DrbzVNl6.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import"./index-CeQDmMxd.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{_ as $}from"./SelectShopProductCategory.vue_vue_type_script_setup_true_lang-JfdfLDEN.js";/* empty css             */import{e as z,f as G,u as H}from"./shopProductCategory-BXIUO5BE.js";import"./time-Bh5UhrfW.js";const J={class:"container"},K={class:"content_wrapper"},Q={class:"lyecs-form-table"},ne=T({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean,parentId:Number},emits:["submitCallback","update:confirmLoading","close"],setup(h,{expose:k,emit:x}){q();const d=x,n=h,u=p(!0),_=U().currentRoute.value.query,m=p(n.isDialog?n.act:String(_.act)),v=p(n.isDialog?n.id:Number(_.id)),y=m.value==="add"?"create":"update",b=L(),t=p({isShow:1,sortOrder:50}),B=async()=>{try{const r=await z(m.value,{id:v.value});Object.assign(t.value,r)}catch(r){g.error(r.message),d("close")}finally{u.value=!1}};j(()=>{m.value==="detail"?B():u.value=!1,y==="create"&&(t.value.parentId=n.parentId,console.log(t.value.parentId))});const S=async()=>{await b.value.validate();try{d("update:confirmLoading",!0);const r=await G(y,{id:v.value,...t.value});d("submitCallback",r),g.success("操作成功"),H().clearShopProductCategory()}catch(r){g.error(r.message)}finally{d("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{S()}}),(r,e)=>{const w=s("TigInput"),i=s("el-form-item"),I=s("el-radio"),D=s("el-radio-group"),O=s("el-button"),P=s("el-form"),R=s("a-spin");return c(),E("div",J,[C("div",K,[C("div",Q,[u.value?N("",!0):(c(),V(P,{key:0,ref_key:"formRef",ref:b,model:t.value,"label-width":"auto"},{default:a(()=>[o(i,{rules:[{required:!0,message:"分类名称不能为空!"}],label:"分类名称",prop:"categoryName"},{default:a(()=>[o(w,{classType:"tig-form-input",modelValue:t.value.categoryName,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.categoryName=l)},null,8,["modelValue"])]),_:1}),o(i,{label:"上级分类",prop:"parentId"},{default:a(()=>[u.value?N("",!0):(c(),V(A($),{key:0,categoryId:t.value.parentId,"onUpdate:categoryId":e[1]||(e[1]=l=>t.value.parentId=l),multiple:!1,style:{width:"100%"}},null,8,["categoryId"]))]),_:1}),o(i,{label:"排序",prop:"sortOrder"},{default:a(()=>[o(w,{classType:"tig-form-input",type:"integer",modelValue:t.value.sortOrder,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.sortOrder=l)},null,8,["modelValue"])]),_:1}),o(i,{label:"是否显示",prop:"isShow"},{default:a(()=>[o(D,{modelValue:t.value.isShow,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.isShow=l)},{default:a(()=>[o(I,{value:1},{default:a(()=>e[4]||(e[4]=[f("是")])),_:1}),o(I,{value:0},{default:a(()=>e[5]||(e[5]=[f("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),F(o(i,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[o(O,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:S},{default:a(()=>e[6]||(e[6]=[f("提交 ")])),_:1},512)]),_:1},512),[[M,!n.isDialog]])]),_:1},8,["model"])),o(R,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ne as default};
