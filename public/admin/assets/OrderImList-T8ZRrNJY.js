import{g as O}from"./order-DqMQuu0g.js";import{i as z,p as N}from"./format-CRgx78oe.js";import"./index-CeQDmMxd.js";import{d as B,i as c,G as F,q as $,c as _,l as L,e,n as m,f as T,b as u,F as g,j as A,a as D,r as b,I as P,o as i,D as r,w as k,g as p,_ as J}from"./index-DrbzVNl6.js";import{_ as w}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const V={class:"top-bar"},j={class:"info-bar"},E={class:"order-card"},M={class:"order-history-m_header_2AO48"},Q={class:"order-history-m_header-line_3zlQJ"},q={class:"order-history-m_content_2mSu8"},G={class:"order-history-m_header-line_3zlQJ"},H={class:"order-history-m_content_2mSu8 order-history-m_time_1Pp-t"},R={class:"order-history-m_status_fLMU8"},U=["onClick"],X={style:{border:"1px solid #f5f5f5"},class:"order-history-m_goods-pic_3wo1h"},K=["src"],W={class:"order-history-m_goods-detail_1XBpg"},Y={class:"order-history-m_goods-name_2i4Hj"},Z={class:"order-history-m_summary_2gJrv"},ee={class:"order-history-m_bottom_2g40I"},se={class:"order-history-m_orderOperationArea_o0OOz"},te={class:"zent-popover-wrapper zent-pop-wrapper",style:{display:"inline-block"}},oe=B({__name:"OrderImList",props:{userId:{type:Number,default:0},preview:{type:Boolean,default:!1}},setup(v){const S=v,a=c(1),l=o=>{a.value=o,o==1?d.orderStatus=-1:o==2?d.orderStatus=[0,1,2]:o==3?d.orderStatus=5:o==4&&(d.orderStatus=[3,4,-2]),y()},n=c(!1),d=F({page:1,size:9999,orderStatus:-1,sortField:"addTime",sortOrder:"desc",userId:S.userId}),h=c(0),f=c([]),y=async()=>{n.value=!0;try{const o=await O({...d});f.value=o.records,h.value=o.total}catch(o){P.error(o.message)}finally{n.value=!1}},C=o=>{console.log(o)};return $(()=>{y()}),(o,t)=>{const I=b("el-empty"),x=b("a-spin");return i(),_("div",{class:"order-area",style:L({height:v.preview?"calc(100vh - 153px)":"calc(100vh - 50px)"})},[e("div",V,[e("div",{onClick:t[0]||(t[0]=s=>l(1)),class:m([{tab__actived:a.value==1},"card"])},"全部",2),e("div",{onClick:t[1]||(t[1]=s=>l(2)),class:m([{tab__actived:a.value==2},"card"])},"未完成",2),e("div",{onClick:t[2]||(t[2]=s=>l(3)),class:m([{tab__actived:a.value==3},"card"])},"已完成",2),e("div",{onClick:t[3]||(t[3]=s=>l(4)),class:m([{tab__actived:a.value==4},"card"])},"已关闭",2)]),e("div",j,[n.value?T("",!0):(i(),_(g,{key:0},[h.value>0?(i(!0),_(g,{key:0},D(f.value,s=>(i(),_("div",E,[e("div",M,[e("div",Q,[t[4]||(t[4]=e("label",null,"订单编号：",-1)),e("div",q,r(s.orderSn),1)]),e("div",G,[t[5]||(t[5]=e("label",null,"下单时间：",-1)),e("div",H,r(s.addTime),1),e("div",R,r(s.orderStatusName),1)])]),u(p(w),{params:{act:"detail",id:s.orderId},showClose:!1,showOnOk:!1,title:"订单详情 "+s.orderSn,isDrawer:"",path:"order/order/Info",width:"880px"},{default:k(()=>[e("a",{class:"order-history-m_goods-item_216A0",onClick:re=>C(s),target:"_blank"},[e("div",X,[e("img",{width:"100%",src:p(z)(s.items[0].productPicThumb)},null,8,K)]),e("div",W,[e("div",Y,r(s.items[0].productName),1)])],8,U)]),_:2},1032,["params","title"]),e("div",Z,"共 "+r(s.items.length)+" 件商品，实付 "+r(p(N)(s.totalAmount)),1),e("div",ee,[e("div",se,[e("div",te,[u(p(w),{params:{act:"detail",id:s.orderId,valueName:"adminNote"},isDrawer:"",path:"order/order/src/EditRemark",title:"编辑备注",width:"600px"},{default:k(()=>t[6]||(t[6]=[e("a",null,"备注",-1)])),_:2},1032,["params"])])])])]))),256)):(i(),A(I,{key:1,description:"暂无订单～"}))],64)),u(x,{spinning:n.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])],4)}}}),ce=J(oe,[["__scopeId","data-v-170df48e"]]);export{ce as default};
