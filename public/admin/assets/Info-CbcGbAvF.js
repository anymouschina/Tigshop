import{d as j,i,C as z,s as E,G,q as M,I as p,r,c as V,o as f,e as d,j as k,f as O,w as s,b as l,a0 as P,F as T,a as $,E as A,a1 as H,_ as J}from"./index-CGYuOau0.js";import{c as K,u as Q}from"./verbalAssociation-DIcWwhGG.js";import{g as W}from"./languagesList-4F0M2hMq.js";const X={class:"container"},Y={class:"content_wrapper"},Z={class:"lyecs-form-table"},h=j({__name:"Info",props:{id:{type:Number,default:0},promotion_type:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(L,{expose:C,emit:S}){const c=S,n=L,_=i(),u=i(!0),g=z().currentRoute.value.query,v=i(n.isDialog?n.act:String(g.act)),y=i(n.isDialog?n.id:Number(g.id)),N=v.value==="add"?"create":"update",b=E(),o=i({code:"",name:"",locales_id:0}),R=G({page:1,size:99999,sort_field:"",sort_order:"",keyword:""}),q=async()=>{u.value=!0;try{const t=await W({...R});_.value=t.filter_result}catch(t){p.error(t.message)}finally{u.value=!1}};M(()=>{v.value==="detail"?B():u.value=!1,q()});const B=async()=>{try{const t=await K(v.value,{id:y.value});Object.assign(o.value,t.item)}catch(t){p.error(t.message),c("close")}finally{u.value=!1}},w=async()=>{await b.value.validate();try{c("update:confirmLoading",!0);const t=await Q(N,{id:y.value,...o.value});c("submitCallback",t),p.success(t.message)}catch(t){p.error(t.message)}finally{c("update:confirmLoading",!1)}};return C({onFormSubmit:()=>{w()}}),(t,e)=>{const x=r("el-input"),m=r("el-form-item"),D=r("el-option"),F=r("el-select"),I=r("el-button"),U=r("el-form");return f(),V("div",X,[d("div",Y,[d("div",Z,[u.value?O("",!0):(f(),k(U,{key:0,ref_key:"formRef",ref:b,model:o.value,"label-width":"auto"},{default:s(()=>[l(m,{prop:"name",label:"所属地区：",rules:[{required:!0,message:"所属地区不能为空!"}]},{default:s(()=>[l(x,{type:"text",maxlength:"60",modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.name=a)},null,8,["modelValue"]),e[4]||(e[4]=d("div",{class:"extra"},"例如：中国、中国香港、中国台湾、英国、法国",-1))]),_:1}),l(m,{prop:"code",label:"语言识别码：",rules:[{required:!0,message:"语言识别码不能为空!"}]},{default:s(()=>[l(x,{type:"text",maxlength:"60",modelValue:o.value.code,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.code=a)},null,8,["modelValue"]),e[5]||(e[5]=d("div",{class:"extra"},"浏览器语言识别码",-1))]),_:1}),l(m,{prop:"locales_id",label:"关联语言：",rules:[{required:!0,message:"请选择关联语言!"}]},{default:s(()=>[l(F,{modelValue:o.value.locales_id,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.locales_id=a),placeholder:"请选择关联语言",size:"default"},{default:s(()=>[(f(!0),V(T,null,$(_.value,a=>(f(),k(D,{key:a.id,label:a.language,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[6]||(e[6]=d("div",{class:"extra"},"请选择关联语言，语言类型是由您自行添加的",-1))]),_:1}),P(l(m,{"wrapper-col":{offset:4,span:16}},{default:s(()=>[l(I,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[3]||(e[3]=a=>w())},{default:s(()=>e[7]||(e[7]=[A("提交")])),_:1},512)]),_:1},512),[[H,!n.isDialog]])]),_:1},8,["model"]))])])])}}}),le=J(h,[["__scopeId","data-v-23ac5a55"]]);export{le as default};
