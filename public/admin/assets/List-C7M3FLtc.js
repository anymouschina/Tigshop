import{d as K,K as M,i as b,G as A,q as E,c,e as t,b as s,w as l,f as g,g as m,I as k,r as i,o as p,M as V,E as h,D as y}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{M as L}from"./MobileCard-BSBggTtf.js";import{D as $}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as G}from"./Pagination-wR9huHyl.js";import{u as R,i as j}from"./format-CRgx78oe.js";import{g as H,d as J,b as Q}from"./enquiry-TjKnwH1U.js";import{_ as W}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const X={class:"container"},Y={class:"content_wrapper"},Z={class:"lyecs-table-list-warp"},ee={class:"list-table-tool lyecs-search-warp"},te={class:"advanced-search-warp list-table-tool-row"},oe={class:"simple-form-warp"},se={class:"simple-form-field"},le={class:"form-group"},ae={class:"control-container"},ne={class:"simple-form-field"},ie={class:"form-group"},de={class:"control-container"},re={class:"simple-form-field"},ce={class:"form-group"},pe={class:"control-container"},ue={class:"list-table-tool-row"},me={class:"list-table-tool-col"},_e={key:0},fe={class:"table-container"},be={class:"flex"},ve={key:0,class:"span-pic"},ge=["href"],he=["src"],ye={class:"span-product-con"},ke={class:"span-product-name"},we={key:0,class:"green"},Ce={key:1,class:"gray"},Ie={class:"btn-link"},Se={class:"empty-warp"},Ve={key:0,class:"empty-bg"},De={key:0,class:"pagination-con"},Me=K({__name:"List",setup(xe){const D=M(),w=b([]),_=b(!0),v=b(0),f=b([]);b(!1);const a=A({page:1,size:D.get("pageSize"),sortField:"",sortOrder:"",mobile:"",productId:""}),d=async()=>{_.value=!0;try{const n=await H({...a});w.value=n.records,v.value=n.total}catch(n){k.error(n.message)}finally{_.value=!1}};E(()=>{d()});const u=()=>{d()},x=({prop:n,order:e})=>{a.sortField=n,a.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",d()},z=async n=>{try{const e=await Q(n,{ids:f.value});k.success("操作成功"),d()}catch(e){k.error(e.message)}},q=n=>{f.value=n.map(e=>e.id)};return(n,e)=>{const C=i("el-option"),N=i("el-select"),I=i("TigInput"),S=i("el-button"),T=i("el-popconfirm"),F=i("el-space"),O=i("el-form"),r=i("el-table-column"),P=i("el-divider"),U=i("el-table"),B=i("a-spin");return p(),c("div",X,[t("div",Y,[t("div",Z,[t("div",ee,[s(O,{model:a},{default:l(()=>[t("div",te,[t("div",oe,[t("div",se,[t("div",le,[e[6]||(e[6]=t("label",{class:"control-label"},[t("span",null,"状态：")],-1)),t("div",ae,[s(N,{modelValue:a.status,"onUpdate:modelValue":e[0]||(e[0]=o=>a.status=o),clearable:"",onChange:u},{default:l(()=>[s(C,{value:0,label:"未回复"}),s(C,{value:1,label:"已回复"})]),_:1},8,["modelValue"])])])]),t("div",ne,[t("div",ie,[e[7]||(e[7]=t("label",{class:"control-label"},[t("span",null,"商品ID：")],-1)),t("div",de,[s(I,{modelValue:a.productId,"onUpdate:modelValue":e[1]||(e[1]=o=>a.productId=o),name:"productId",placeholder:"输入商品ID",onKeyup:V(u,["enter"]),clearable:"",onClear:u},null,8,["modelValue"])])])]),t("div",re,[t("div",ce,[e[9]||(e[9]=t("label",{class:"control-label"},[t("span",null,"手机号：")],-1)),t("div",pe,[s(I,{modelValue:a.mobile,"onUpdate:modelValue":e[2]||(e[2]=o=>a.mobile=o),name:"mobile",placeholder:"输入询价人手机号",onKeyup:V(u,["enter"]),clearable:"",onClear:u},{append:l(()=>[s(S,{onClick:u},{default:l(()=>e[8]||(e[8]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])])])]),t("div",ue,[t("div",me,[s(F,null,{default:l(()=>[s(T,{title:"您确认要批量删除所选数据吗？",onConfirm:e[3]||(e[3]=o=>z("del"))},{reference:l(()=>[s(S,{disabled:f.value.length===0},{default:l(()=>e[10]||(e[10]=[h("批量删除")])),_:1},8,["disabled"])]),_:1}),f.value.length>0?(p(),c("span",_e,[e[11]||(e[11]=h(" 已选择：")),t("b",null,y(f.value.length),1),e[12]||(e[12]=h(" 项 "))])):g("",!0)]),_:1})]),e[13]||(e[13]=t("div",{class:"list-table-tool-col"},null,-1))])]),_:1},8,["model"])]),t("div",fe,[s(B,{spinning:_.value},{default:l(()=>[s(U,{data:w.value,loading:_.value,total:v.value,"row-key":"id",onSelectionChange:q,onSortChange:x},{empty:l(()=>[t("div",Se,[_.value?g("",!0):(p(),c("div",Ve,"暂无数据"))])]),default:l(()=>[s(r,{type:"selection",width:"32"}),s(r,{label:"商品名称",prop:"productId",sortable:"custom","min-width":180},{default:l(({row:o})=>[t("div",be,[o.product.picThumb?(p(),c("div",ve,[t("a",{href:m(R)({path:"product",sn:o.product.productSn}),target:"_blank"},[t("img",{src:m(j)(o.product.picThumb),height:"40",width:"40",alt:""},null,8,he)],8,ge)])):g("",!0),t("div",ye,[t("div",ke,[t("div",null,"商品名称："+y(o.product.productName),1),t("div",null,"商品SN："+y(o.product.productSn),1)])])])]),_:1}),s(r,{label:"询价内容",prop:"content"}),s(r,{width:100,label:"状态"},{default:l(({row:o})=>[o.status===1?(p(),c("span",we,"已回复")):(p(),c("span",Ce,"未回复"))]),_:1}),s(r,{width:150,label:"联系方式"},{default:l(({row:o})=>[s(L,{mobile:o.mobile},null,8,["mobile"])]),_:1}),s(r,{width:150,label:"创建时间",prop:"createTime"}),s(r,{width:150,fixed:"right",label:"操作"},{default:l(({row:o})=>[s(m(W),{params:{act:"detail",id:o.id},isDrawer:"",showOnOk:!1,path:"product/enquiry/Info",title:o.status===1?"查看":"回复询价",width:"600px",onOkCallback:d},{default:l(()=>[t("a",Ie,y(o.status===1?"详情":"回复"),1)]),_:2},1032,["params","title"]),s(P,{direction:"vertical"}),s(m($),{params:{id:o.id},requestApi:m(J),onAfterDelete:d},{default:l(()=>e[14]||(e[14]=[h("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),v.value>0?(p(),c("div",De,[s(m(G),{page:a.page,"onUpdate:page":e[4]||(e[4]=o=>a.page=o),size:a.size,"onUpdate:size":e[5]||(e[5]=o=>a.size=o),total:v.value,onCallback:d},null,8,["page","size","total"])])):g("",!0)])])])])}}});export{Me as default};
