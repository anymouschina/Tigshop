import{f as Ye}from"./util-1ee03ed8.js";import De from"./OrderamountStatistics-70bf3148.js";import Ne from"./OrderNumberStatistics-35c440d5.js";import{A as fe,d as Ce,I as ue,j as me,x as Ee,r as p,o as n,c as l,e,b as i,w as d,G as c,H as f,k as b,h as w,J as Ie,K as pe,F as Le,a as Me,p as Oe,i as Te,_ as Ue}from"./index-7c2d2aef.js";import{r as Ae}from"./export-59d12e73.js";import"./index-05c93ee4.js";const Be=u=>fe({url:"panel/sales_statistics/list",method:"get",params:u}),Fe=u=>fe({url:"panel/sales_statistics/list",method:"get",responseType:"arraybuffer",params:u}),v=u=>(Oe("data-v-8fbffe34"),u=u(),Te(),u),qe={class:"container"},ze={class:"content_wrapper"},je={class:"filtrate-menu"},Ge={class:"main-panel"},He={class:"main-panel-item"},Je=v(()=>e("div",{class:"main-panel-item-title"},"商品支付金额",-1)),Ke={class:"main-panel-item-value"},Pe={class:"main-panel-item-increase"},Xe={key:0,class:"admin-iconfont red f12 up"},Qe={key:1,class:"admin-iconfont green f12"},Re={class:"main-panel-item"},We=v(()=>e("div",{class:"main-panel-item-title"},"商品退款金额",-1)),Ze={class:"main-panel-item-value"},$e={class:"main-panel-item-increase"},et={key:0,class:"admin-iconfont red f12 up"},tt={key:1,class:"admin-iconfont green f12"},at={class:"main-panel-item"},st=v(()=>e("div",{class:"main-panel-item-title"},"营业额",-1)),nt={class:"main-panel-item-value"},ot={class:"main-panel-item-increase"},lt={key:0,class:"admin-iconfont red f12 up"},it={key:1,class:"admin-iconfont green f12"},rt={class:"main-panel-item"},_t=v(()=>e("div",{class:"main-panel-item-title"},"充值金额",-1)),ct={class:"main-panel-item-value"},dt={class:"main-panel-item-increase"},ut={key:0,class:"admin-iconfont red f12 up"},mt={key:1,class:"admin-iconfont green f12"},pt={class:"main-panel-item"},ft=v(()=>e("div",{class:"main-panel-item-title"},"余额支付金额",-1)),vt={class:"main-panel-item-value"},ht={class:"main-panel-item-increase"},gt={key:0,class:"admin-iconfont red f12 up"},yt={key:1,class:"admin-iconfont green f12"},bt={class:"chart"},wt=Ce({__name:"List",setup(u){const ve=(a,s)=>{k()},o=ue({statistic_type:"1",start_end_time:"",date_type:"1"}),m=ue({1:"",2:""}),he=[{label:"按年筛选",value:"1"},{label:"按月筛选",value:"2"}],ge=[{text:"本月",value:new Date},{text:"上月",value:()=>{const a=new Date;return a.setTime(a.getTime()-3600*1e3*24*30),a}},{text:"本年一月",value:()=>{const a=new Date;return new Date(a.getFullYear(),0,1)}}],ye=[{text:"本年",value:()=>h(0)},{text:"去年",value:()=>h(1)},{text:"三年前",value:()=>h(3)},{text:"五年前",value:()=>h(5)}],h=a=>{const s=new Date;return new Date(s.getFullYear()-a,s.getMonth(),s.getDate())},t=me();Ie("filterState",t);const k=async()=>{try{o.start_end_time=m[o.date_type];const a=await Be(o);if(a.errcode===0){t.value=a;const{sales_statistics_data:s}=a,r=o.date_type==="1"?"月":"日";t.value.sales_statistics_data.horizontal_axis=s.horizontal_axis.map(x=>x+r)}}catch(a){pe.error(a.message),console.error(a)}},be=()=>{k()},g=me(!1),we=async()=>{g.value=!0;try{const a=await Fe({...o,is_export:"1"});g.value=!1,Ae(a,"销售统计导出")}catch(a){pe.error(a.message)}finally{g.value=!1}};return Ee(()=>{const a=Ye(new Date);if(a){const s=a.split("-");for(const r in m)r==="1"&&(m[r]=s[0]),r==="2"&&(m[r]=s[0]+"-"+s[1])}k()}),(a,s)=>{var Y,D,N,C,E,I,L,M,O,T,U,A,B,F,q,z,j,G,H,J,K,P,X,Q,R,W,Z,$,ee,te,ae,se,ne,oe,le,ie,re,_e,ce,de;const r=p("el-tab-pane"),x=p("el-tabs"),ke=p("el-option"),xe=p("el-select"),y=p("el-form-item"),S=p("el-date-picker"),V=p("el-button"),Se=p("el-form");return n(),l("div",qe,[e("div",ze,[e("div",null,[i(x,{modelValue:o.statistic_type,"onUpdate:modelValue":s[0]||(s[0]=_=>o.statistic_type=_),onTabChange:ve},{default:d(()=>[i(r,{label:"订单金额统计",name:"1"}),i(r,{label:"订单数统计",name:"0"})]),_:1},8,["modelValue"]),i(Se,{model:o},{default:d(()=>[e("div",je,[i(y,{class:"mr-10"},{default:d(()=>[i(xe,{modelValue:o.date_type,"onUpdate:modelValue":s[1]||(s[1]=_=>o.date_type=_),placeholder:"Select",style:{width:"94.5px"}},{default:d(()=>[(n(),l(Le,null,Me(he,(_,Ve)=>i(ke,{key:Ve,label:_.label,value:_.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),i(y,{class:"mr-10"},{default:d(()=>[o.date_type==="2"?(n(),b(S,{key:0,style:{width:"200px"},shortcuts:ge,modelValue:m[2],"onUpdate:modelValue":s[2]||(s[2]=_=>m[2]=_),"value-format":"YYYY-MM",type:"month",editable:!1},null,8,["modelValue"])):w("",!0),o.date_type==="1"?(n(),b(S,{key:1,modelValue:m[1],"onUpdate:modelValue":s[3]||(s[3]=_=>m[1]=_),type:"year","value-format":"YYYY",style:{width:"200px"},editable:!1,shortcuts:ye},null,8,["modelValue"])):w("",!0)]),_:1}),i(y,{class:"mr-10"},{default:d(()=>[i(V,{plain:"",onClick:be},{default:d(()=>[f("搜索")]),_:1})]),_:1}),i(y,null,{default:d(()=>[i(V,{plain:"",onClick:we,loading:g.value},{default:d(()=>[f("导出EXCEL")]),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"]),e("div",Ge,[e("ul",null,[e("li",He,[Je,e("div",Ke,c(((D=(Y=t.value)==null?void 0:Y.sales_data)==null?void 0:D.product_payment)??0),1),e("div",Pe,[f(" 环比： "),e("span",null,c((C=(N=t.value)==null?void 0:N.sales_data)==null?void 0:C.product_payment_growth_rate)+"%",1),((I=(E=t.value)==null?void 0:E.sales_data)==null?void 0:I.product_payment_growth_rate.toString())!=="--"&&Number((M=(L=t.value)==null?void 0:L.sales_data)==null?void 0:M.product_payment_growth_rate)>0?(n(),l("i",Xe,"")):(n(),l("i",Qe,""))])]),e("li",Re,[We,e("div",Ze,c(((T=(O=t.value)==null?void 0:O.sales_data)==null?void 0:T.product_refund)??0),1),e("div",$e,[f(" 环比： "),e("span",null,c((A=(U=t.value)==null?void 0:U.sales_data)==null?void 0:A.product_refund_growth_rate)+"%",1),((F=(B=t.value)==null?void 0:B.sales_data)==null?void 0:F.product_refund_growth_rate.toString())!=="--"&&Number((z=(q=t.value)==null?void 0:q.sales_data)==null?void 0:z.product_refund_growth_rate)>0?(n(),l("i",et,"")):(n(),l("i",tt,""))])]),e("li",at,[st,e("div",nt,c(((G=(j=t.value)==null?void 0:j.sales_data)==null?void 0:G.turnover)??0),1),e("div",ot,[f(" 环比： "),e("span",null,c((J=(H=t.value)==null?void 0:H.sales_data)==null?void 0:J.turnover_growth_rate)+"%",1),((P=(K=t.value)==null?void 0:K.sales_data)==null?void 0:P.turnover_growth_rate.toString())!=="--"&&Number((Q=(X=t.value)==null?void 0:X.sales_data)==null?void 0:Q.turnover_growth_rate)>0?(n(),l("i",lt,"")):(n(),l("i",it,""))])]),e("li",rt,[_t,e("div",ct,c(((W=(R=t.value)==null?void 0:R.sales_data)==null?void 0:W.recharge_amount)??0),1),e("div",dt,[f(" 环比： "),e("span",null,c(($=(Z=t.value)==null?void 0:Z.sales_data)==null?void 0:$.recharge_amount_growth_rate)+"%",1),((te=(ee=t.value)==null?void 0:ee.sales_data)==null?void 0:te.recharge_amount_growth_rate.toString())!=="--"&&Number((se=(ae=t.value)==null?void 0:ae.sales_data)==null?void 0:se.recharge_amount_growth_rate)>0?(n(),l("i",ut,"")):(n(),l("i",mt,""))])]),e("li",pt,[ft,e("div",vt,c(((oe=(ne=t.value)==null?void 0:ne.sales_data)==null?void 0:oe.balance_payment)??0),1),e("div",ht,[f(" 环比： "),e("span",null,c((ie=(le=t.value)==null?void 0:le.sales_data)==null?void 0:ie.balance_payment_growth_rate)+"%",1),((_e=(re=t.value)==null?void 0:re.sales_data)==null?void 0:_e.balance_payment_growth_rate.toString())!=="--"&&Number((de=(ce=t.value)==null?void 0:ce.sales_data)==null?void 0:de.balance_payment_growth_rate)>0?(n(),l("i",gt,"")):(n(),l("i",yt,""))])])])])]),e("div",bt,[o.statistic_type==="1"?(n(),b(De,{key:0})):w("",!0),o.statistic_type==="0"?(n(),b(Ne,{key:1})):w("",!0)])])])}}});const Nt=Ue(wt,[["__scopeId","data-v-8fbffe34"]]);export{Nt as default};
