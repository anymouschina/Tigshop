import{d as E,i as v,C as L,s as j,q as G,I as T,r as d,c as M,o as p,e as y,b as l,w as a,j as b,a3 as O,f as C,g as c,E as i,a4 as P}from"./index-DrbzVNl6.js";import{F as $}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-BDvYUQtN.js";import"./index-CeQDmMxd.js";import"./vuedraggable.umd-DAKh-e3Q.js";import{a as z,c as J}from"./article-D9QgJXUQ.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import{S as Q}from"./SelectProduct-BHvR_Ddk.js";/* empty css                                                                    */import{S as W}from"./SelectArticleCategory-Deygq-qZ.js";/* empty css             */import{_ as X}from"./Editor.vue_vue_type_script_setup_true_lang-DYKF5akI.js";import{B as Y}from"./BusinessData-CHGCSdy5.js";import"./Image.vue_vue_type_script_setup_true_lang-BWzCs9jv.js";import"./format-CRgx78oe.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./time-Bh5UhrfW.js";import"./product-DEi2MlvQ.js";import"./Pagination-wR9huHyl.js";import"./SelectSku--IXQGnUO.js";/* empty css                                                                  */import"./articleCategory-J2OKGEPd.js";/* empty css                                                                              */import"./index.esm-bNAKkq0_.js";import"./currencyManagement-ChS-Zs2m.js";import"./version-CL9k3sYf.js";const Z={class:"container"},h={class:"content_wrapper"},ee={class:"lyecs-form-table"},xe=E({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(A,{expose:B,emit:D}){const V=D,m=A,k=v(1),f=v(!0),U=L().currentRoute.value.query,w=v(m.isDialog?m.act:String(U.act)),_=v(m.isDialog?m.id:Number(U.id)),N=w.value==="add"?"create":"update",I=j(),t=v({isShow:1,isHot:0,isTop:0,articleType:1,articleCategoryId:[],productIds:[]}),q=(r,e,u)=>{if(e.length>10){T.error("最多添加10个商品"),u(new Error("最多添加10个商品"));return}u()};G(()=>{w.value==="detail"?R():f.value=!1});const R=async()=>{try{f.value=!0;const r=await z(w.value,{id:_.value});Object.assign(t.value,r)}catch(r){T.error(r.message),V("close")}finally{f.value=!1}},x=async()=>{await I.value.validate();try{V("update:confirmLoading",!0);const r=await J(N,{id:_.value,...t.value});V("submitCallback",r),T.success("操作成功")}catch(r){T.error(r.message)}finally{V("update:confirmLoading",!1)}};return B({onFormSubmit:()=>{x()}}),(r,e)=>{const u=d("el-form-item"),n=d("TigInput"),s=d("el-radio"),g=d("el-radio-group"),F=d("el-button"),S=d("el-tab-pane"),H=d("el-tabs"),K=d("el-form");return p(),M("div",Z,[y("div",h,[y("div",ee,[l(K,{ref_key:"formRef",ref:I,model:t.value,"label-width":"auto"},{default:a(()=>[l(H,{activeKey:k.value,"onUpdate:activeKey":e[15]||(e[15]=o=>k.value=o),class:"lyecs-tabs","tab-position":"top"},{default:a(()=>[(p(),b(S,{key:1,label:"基本信息"},{default:a(()=>[l(u,{rules:[{required:!0,message:"文章标题不能为空!"}],extra:"sfs",label:"文章标题",prop:"articleTitle"},{default:a(()=>[l(Y,{modelValue:t.value.articleTitle,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.articleTitle=o),placeholder:"请输入文章标题",dataType:6,dataId:_.value},null,8,["modelValue","dataId"])]),_:1}),l(u,{label:"文章编号",prop:"articleSn"},{default:a(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.articleSn,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.articleSn=o)},null,8,["modelValue"]),e[16]||(e[16]=y("div",{class:"extra"},"编号用于前台调用某些指定的文章",-1))]),_:1}),l(u,{label:"文章分类",prop:"articleCategoryId"},{default:a(()=>[f.value?C("",!0):(p(),b(c(W),{key:0,modelValue:t.value.articleCategoryId,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.articleCategoryId=o),"min-width":"100%"},null,8,["modelValue"]))]),_:1}),l(u,{label:"缩略图",prop:"articleThumb"},{default:a(()=>[l(c($),{photo:t.value.articleThumb,"onUpdate:photo":e[3]||(e[3]=o=>t.value.articleThumb=o)},null,8,["photo"]),e[17]||(e[17]=y("div",{class:"extra"},"请统一上传比例为1:2的图片，宽100px，高200px（高清）",-1))]),_:1}),l(u,{label:"文章作者",prop:"articleAuthor"},{default:a(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.articleAuthor,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.articleAuthor=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"关键字",prop:"keywords"},{default:a(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.keywords,"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.keywords=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"标签",prop:"articleTag"},{default:a(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.articleTag,"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.articleTag=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"描述",prop:"description"},{default:a(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.description,"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.description=o),row:2,type:"textarea"},null,8,["modelValue"])]),_:1}),l(u,{label:"相关链接",prop:"link"},{default:a(()=>[l(n,{classType:"tig-form-input",modelValue:t.value.link,"onUpdate:modelValue":e[8]||(e[8]=o=>t.value.link=o)},null,8,["modelValue"])]),_:1}),l(u,{label:"文章类型",prop:"articleType"},{default:a(()=>[l(g,{modelValue:t.value.articleType,"onUpdate:modelValue":e[9]||(e[9]=o=>t.value.articleType=o)},{default:a(()=>[l(s,{value:1},{default:a(()=>e[18]||(e[18]=[i("普通文章")])),_:1}),l(s,{value:2},{default:a(()=>e[19]||(e[19]=[i("帮助文章")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"是否置顶",prop:"isTop"},{default:a(()=>[l(g,{modelValue:t.value.isTop,"onUpdate:modelValue":e[10]||(e[10]=o=>t.value.isTop=o)},{default:a(()=>[l(s,{value:1},{default:a(()=>e[20]||(e[20]=[i("是")])),_:1}),l(s,{value:0},{default:a(()=>e[21]||(e[21]=[i("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"是否热门",prop:"isHot"},{default:a(()=>[l(g,{modelValue:t.value.isHot,"onUpdate:modelValue":e[11]||(e[11]=o=>t.value.isHot=o)},{default:a(()=>[l(s,{value:1},{default:a(()=>e[22]||(e[22]=[i("是")])),_:1}),l(s,{value:0},{default:a(()=>e[23]||(e[23]=[i("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{label:"是否显示",prop:"isShow"},{default:a(()=>[l(g,{modelValue:t.value.isShow,"onUpdate:modelValue":e[12]||(e[12]=o=>t.value.isShow=o)},{default:a(()=>[l(s,{value:1},{default:a(()=>e[24]||(e[24]=[i("是")])),_:1}),l(s,{value:0},{default:a(()=>e[25]||(e[25]=[i("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),O(l(u,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[l(F,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:x},{default:a(()=>e[26]||(e[26]=[i("提交 ")])),_:1},512)]),_:1},512),[[P,!m.isDialog]])]),_:1})),(p(),b(S,{key:2,label:"文章内容"},{default:a(()=>[l(c(X),{html:t.value.content,"onUpdate:html":e[13]||(e[13]=o=>t.value.content=o)},null,8,["html"])]),_:1})),(p(),b(S,{key:3,label:"关联商品"},{default:a(()=>[l(u,{label:"",prop:"productIds",rules:[{required:!0,validator:q}]},{default:a(()=>[f.value?C("",!0):(p(),b(c(Q),{key:0,ids:t.value.productIds,"onUpdate:ids":e[14]||(e[14]=o=>t.value.productIds=o),max:10},null,8,["ids"])),e[27]||(e[27]=y("div",{class:"extra"},"最多添加10个商品，添加的商品会在结算后自动加入订单（不会计价格）",-1))]),_:1},8,["rules"])]),_:1}))]),_:1},8,["activeKey"])]),_:1},8,["model"])])])])}}});export{xe as default};
