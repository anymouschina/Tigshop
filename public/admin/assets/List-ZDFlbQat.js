import{d as P,i as f,G as U,q as $,c as g,e as o,f as C,b as t,w as a,g as c,I as h,r,o as v,L as E,E as p,D as y}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{_ as K}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as O}from"./Pagination-yOfjsBuR.js";import{u as F}from"./config-DNllFJyR.js";import{g as G,d as M,b as T}from"./category-COJmNN7y.js";import{_ as x}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const j={class:"container"},H={class:"content_wrapper"},J={class:"lyecs-table-list-warp"},Q={class:"list-table-tool lyecs-search-warp"},R={class:"list-table-tool-row"},W={class:"list-table-tool-col"},X={class:"table-container"},Y={style:{position:"relative"}},Z={class:"empty-warp"},ee={key:0,class:"empty-bg"},te={key:0,class:"pagination-con"},ae={key:0,class:"selected-action-warp"},oe={class:"selected-action"},fe=P({__name:"List",setup(se){const z=F(),S=f(),d=f(!0),_=f(0),u=f([]),n=U({page:1,size:z.get("page_size"),sort_field:"",sort_order:"",category_name:""}),i=async()=>{d.value=!0;try{const l=await G({...n});S.value=l.filter_result,_.value=l.total}catch(l){h.error(l.message)}finally{d.value=!1}};$(()=>{i()});const b=()=>{i()},V=({prop:l,order:e})=>{n.sort_field=l,n.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",i()},D=async l=>{try{const e=await T(l,{ids:u.value});h.success(e.message),i()}catch(e){h.error(e.message)}},B=l=>{u.value=l.map(e=>e.category_id)};return(l,e)=>{const w=r("el-button"),I=r("el-input"),k=r("el-space"),m=r("el-table-column"),N=r("el-divider"),q=r("el-table"),A=r("a-spin"),L=r("el-popconfirm");return v(),g("div",j,[o("div",H,[o("div",J,[o("div",Q,[o("div",R,[o("div",W,[t(k,null,{default:a(()=>[t(I,{name:"keyword",modelValue:n.category_name,"onUpdate:modelValue":e[0]||(e[0]=s=>n.category_name=s),placeholder:"输入分类名称",onKeyup:E(b,["enter"]),clearable:"",onClear:b},{append:a(()=>[t(w,{onClick:b},{default:a(()=>e[4]||(e[4]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(k,{class:"ml10"},{default:a(()=>[t(c(x),{isDrawer:"",onOkCallback:i,title:"新建分类",width:"600px",path:"salesman/category/Info",params:{act:"add"}},{default:a(()=>[t(w,{type:"primary"},{default:a(()=>e[5]||(e[5]=[p("新建分类")])),_:1})]),_:1})]),_:1})])])]),o("div",X,[t(A,{spinning:d.value},{default:a(()=>[t(q,{data:S.value,"row-key":"category_id",onSelectionChange:B,total:_.value,onSortChange:V,loading:d.value},{empty:a(()=>[o("div",Z,[d.value?C("",!0):(v(),g("div",ee,"暂无数据"))])]),default:a(()=>[t(m,{label:"分类名称",prop:"category_id",sortable:"custom"},{default:a(({row:s})=>[o("div",Y,[o("div",null,y(s.category_name),1)])]),_:1}),t(m,{label:"创建时间",prop:"add_time",sortable:"custom"},{default:a(({row:s})=>[o("div",null,y(s.add_time),1)]),_:1}),t(m,{label:"排序",prop:"sort_order",sortable:"custom"},{default:a(({row:s})=>[o("div",null,y(s.sort_order||"--"),1)]),_:1}),t(m,{label:"操作",fixed:"right",width:150},{default:a(({row:s})=>[t(c(x),{isDrawer:"",onOkCallback:i,title:"编辑分类",width:"600px",path:"salesman/category/Info",params:{act:"detail",id:s.group_id}},{default:a(()=>e[6]||(e[6]=[o("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),t(N,{direction:"vertical"}),t(c(K),{onAfterDelete:i,requestApi:c(M),params:{id:s.group_id}},{default:a(()=>e[7]||(e[7]=[p("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),_.value>0?(v(),g("div",te,[t(c(O),{page:n.page,"onUpdate:page":e[1]||(e[1]=s=>n.page=s),size:n.size,"onUpdate:size":e[2]||(e[2]=s=>n.size=s),total:_.value,onCallback:i},null,8,["page","size","total"])])):C("",!0)]),u.value.length>0?(v(),g("div",ae,[o("div",oe,[t(k,null,{default:a(()=>[o("span",null,[e[8]||(e[8]=p("已选择：")),o("b",null,y(u.value.length),1),e[9]||(e[9]=p(" 项"))]),t(L,{title:"您确认要批量删除所选数据吗？",onConfirm:e[3]||(e[3]=s=>D("del"))},{reference:a(()=>[t(w,null,{default:a(()=>e[10]||(e[10]=[p("批量删除")])),_:1})]),_:1})]),_:1})])])):C("",!0)])])])}}});export{fe as default};
