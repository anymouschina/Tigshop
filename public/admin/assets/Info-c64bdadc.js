import{d as F,j as c,E as L,s as j,x as E,r as s,o as h,c as $,e as g,k as A,w as t,b as e,f as x,H as i,$ as G,a0 as H,h as I,K as v}from"./index-7c2d2aef.js";import{F as K}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-9b6073fb.js";import{a as M,c as O}from"./userRank-9565375c.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import"./config-9548fa9b.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{_ as T}from"./SelectColor.vue_vue_type_script_setup_true_lang-4a4dabb3.js";import"./region-e0d291a6.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import"./vuedraggable.umd-75ad0f8f.js";import"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import"./format-4e0206d3.js";import"./util-1ee03ed8.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./time-290942a2.js";import"./config-e2aa16d1.js";import"./region-05802f67.js";const z={class:"container"},J={class:"content_wrapper"},P={class:"lyecs-form-table"},Q=g("div",{class:"extra"},"请统一上传比例为1:1的图片（高清）",-1),ke=F({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(U,{expose:R,emit:C}){const m=C,u=U,p=c(!0),b=L().currentRoute.value.query,f=c(u.isDialog?u.act:String(b.act)),k=c(u.isDialog?u.id:Number(b.id)),S=f.value==="add"?"create":"update",y=j(),o=c({show_price:0,rank_type:2}),q=async()=>{try{const r=await M(f.value,{id:k.value});Object.assign(o.value,r.item)}catch(r){v.error(r.message),m("close")}finally{p.value=!1}};E(()=>{f.value==="detail"?q():p.value=!1});const w=async()=>{await y.value.validate();try{m("update:confirmLoading",!0);const r=await O(S,{id:k.value,...o.value});m("submitCallback",r),v.success(r.message)}catch(r){v.error(r.message)}finally{m("update:confirmLoading",!1)}};return R({onFormSubmit:()=>{w()}}),(r,a)=>{const d=s("el-input"),n=s("el-form-item"),_=s("el-radio"),V=s("el-radio-group"),B=s("el-button"),N=s("el-form"),D=s("a-spin");return h(),$("div",z,[g("div",J,[g("div",P,[p.value?I("",!0):(h(),A(N,{key:0,ref_key:"formRef",ref:y,model:o.value,"label-width":"auto"},{default:t(()=>[e(n,{rules:[{required:!0,message:"等级名称不能为空!"}],label:"等级名称",prop:"rank_name"},{default:t(()=>[e(d,{modelValue:o.value.rank_name,"onUpdate:modelValue":a[0]||(a[0]=l=>o.value.rank_name=l)},null,8,["modelValue"])]),_:1}),e(n,{label:"等级标志",prop:"rank_ico"},{default:t(()=>[e(x(K),{photo:o.value.rank_ico,"onUpdate:photo":a[1]||(a[1]=l=>o.value.rank_ico=l)},null,8,["photo"]),Q]),_:1}),e(n,{rules:[{required:!0,message:"积分下限不能为空!"}],label:"积分下限",prop:"min_growth_points"},{default:t(()=>[e(d,{modelValue:o.value.min_growth_points,"onUpdate:modelValue":a[2]||(a[2]=l=>o.value.min_growth_points=l),type:"number"},null,8,["modelValue"])]),_:1}),e(n,{rules:[{required:!0,message:"积分上限不能为空!"}],label:"积分上限",prop:"max_growth_points"},{default:t(()=>[e(d,{modelValue:o.value.max_growth_points,"onUpdate:modelValue":a[3]||(a[3]=l=>o.value.max_growth_points=l),type:"number"},null,8,["modelValue"])]),_:1}),e(n,{label:"是否显示价格",prop:"show_price"},{default:t(()=>[e(V,{modelValue:o.value.show_price,"onUpdate:modelValue":a[4]||(a[4]=l=>o.value.show_price=l)},{default:t(()=>[e(_,{value:1},{default:t(()=>[i("是")]),_:1}),e(_,{value:0},{default:t(()=>[i("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"等级类型",prop:"rank_type"},{default:t(()=>[e(V,{modelValue:o.value.rank_type,"onUpdate:modelValue":a[5]||(a[5]=l=>o.value.rank_type=l),style:{width:"100%"}},{default:t(()=>[e(_,{value:1},{default:t(()=>[i("根据成长值变化")]),_:1}),e(_,{value:2},{default:t(()=>[i("固定等级")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{rules:[{required:!0,message:"初始折扣率不能为空!"}],label:"初始折扣率",prop:"discount"},{default:t(()=>[e(d,{modelValue:o.value.discount,"onUpdate:modelValue":a[6]||(a[6]=l=>o.value.discount=l),type:"number"},null,8,["modelValue"])]),_:1}),e(n,{label:"背景颜色",prop:"rank_bg"},{default:t(()=>[e(x(T),{color:o.value.rank_bg,"onUpdate:color":a[7]||(a[7]=l=>o.value.rank_bg=l)},null,8,["color"])]),_:1}),G(e(n,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[e(B,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:w},{default:t(()=>[i("提交")]),_:1},512)]),_:1},512),[[H,!u.isDialog]])]),_:1},8,["model"])),e(D,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ke as default};
