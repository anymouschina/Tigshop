import{a as F}from"./brand-BWQ0xslz.js";import{d as O,m as C,i as l,u as j,q,I as R,r as c,j as B,o,g as T,aI as U,w as v,b as L,e as r,c as p,f as G,n as x,F as w,a as V,D as k,E as H,_ as J}from"./index-CGYuOau0.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";const K={class:"option"},P={key:0,class:"all_brand"},Q=["onClick"],X={class:"right"},Y={class:"scroll-container"},Z=O({__name:"SelectBrand",props:C({brand_id:{type:[Number],default:0},multiple:{type:Boolean,default:!1},firstWordList:{type:Array,default:()=>[]},brandList:{type:Array,default:()=>[]},allBrandList:{type:Array,default:()=>[]}},{brand_form:{},brand_formModifiers:{}}),emits:C(["update:brand_id","update:brand_ids","update:brand_form","onChange"],["update:brand_form"]),setup(_,{emit:N}){const n=_,f=N,m=!n.brand_id||n.brand_id==0?l(""):l(n.brand_id),W=j(_,"brand_form"),S={label:"brand_name",value:"brand_id"},I=(e,a)=>a.brand_name.toLowerCase().indexOf(e.toLowerCase())>=0,M=e=>{s.value.map(a=>{a.brand_id==e&&(W.value=a)}),n.multiple?f("update:brand_ids",e):f("update:brand_id",e),d.value="全部",f("onChange",e)};q(()=>{n.brandList.length>1&&n.firstWordList.length>1&&n.allBrandList.length>1?(s.value=n.brandList,i.value=n.firstWordList,u.value=n.allBrandList):h()});const g=l(!1),d=l("全部"),i=l([]),s=l([]),u=l([]),h=async()=>{try{const e=await F();i.value=e.firstword_list,s.value=e.brand_list,u.value=e.brand_list}catch(e){R.error(e.message)}finally{g.value=!0}},y=(e,a)=>{if(d.value=a,a=="全部"){s.value=u.value;return}s.value=u.value.filter(b=>b.first_word==a)};return(e,a)=>{const b=c("el-divider"),z=c("el-option"),A=c("a-spin"),D=c("el-select");return o(),B(D,{multiple:_.multiple,modelValue:T(m),"onUpdate:modelValue":a[1]||(a[1]=t=>U(m)?m.value=t:null),allowClear:!0,fieldNames:S,"filter-option":I,clearable:"",filterable:"",placeholder:"选择品牌","popper-class":"brand-select","show-search":"",onChange:M,onVisibleChange:h},{default:v(()=>[r("div",K,[i.value?(o(),p("div",P,[r("ul",null,[r("li",{class:x(d.value=="全部"?"current":"")},[r("a",{onClick:a[0]||(a[0]=t=>y(t,"全部"))},"全部")],2),(o(!0),p(w,null,V(i.value,(t,$)=>(o(),p("li",{class:x(d.value==t?"current":"")},[r("a",{onClick:E=>y(E,t)},k(t),9,Q)],2))),256))]),L(b,{style:{margin:"4px 0 12px"}})])):G("",!0),r("div",X,[r("div",Y,[(o(!0),p(w,null,V(s.value,t=>(o(),B(z,{key:t.brand_id,label:t.brand_name,value:t.brand_id},{default:v(()=>[H(k(t.brand_name),1)]),_:2},1032,["label","value"]))),128))])])])]),empty:v(()=>[L(A,{spinning:!g.value,size:"small",style:{width:"100%","padding-top":"150px"}},null,8,["spinning"])]),_:1},8,["multiple","modelValue"])}}}),ne=J(Z,[["__scopeId","data-v-050007a1"]]);export{ne as S};
