import{d as N,K as S,i as v,G as h,q as C,A as j,p as E,r,j as $,o as x,w as u,b as n,e as a,E as d,D as b,c as O,f as R,aR as q,_ as T}from"./index-DrbzVNl6.js";const z={class:"check-list"},K={class:"item flex flex-align-center flex-justify-between"},G={class:"check"},M={class:"inp flex flex-align-center"},P={class:"item flex flex-align-center flex-justify-between"},F={class:"check"},H={class:"inp flex flex-align-center"},J={class:"item flex flex-align-center flex-justify-between"},L={class:"check"},Q={class:"inp flex flex-align-center"},W={class:"btn-box"},X={class:"tips"},Y={key:0,class:"red"},Z=N({__name:"popover",props:{conditionsData:{type:Object,default:{}},superiorData:{type:Object,default:{}},index:{type:Number,default:0}},emits:["submitCallback"],setup(U,{emit:V}){const B=V,A=S(),o=U,_=v(null),c=v(null),s=h({selfBuyAmount:{checked:!1,disabled:!1,value:0,title:"自购金额",unit:`${A.get("amountUnit")??"元"}`},salesAmount:{checked:!1,disabled:!1,value:0,title:"推广金额",unit:`${A.get("amountUnit")??"元"}`},salesInviteUsers:{checked:!1,disabled:!1,value:0,title:"发展客户数",unit:"人"}}),y=v(!1),I=async()=>{await _.value.validate();let l=!0;for(let e in s)if(s[e].checked){l=!1;break}if(l){console.log("No conditions selected. Verification failed.");return}y.value=!0,B("submitCallback",{conditionsOpts:s,index:o.index}),c.value.hide()},m=h({selfBuyAmount:[{required:!0,validator:(l,e,t)=>{if(console.log(o.superiorData==null),e.checked&&Number(e.value)<=0){t(new Error("请输入自购金额"));return}o.superiorData!=null&&e.checked&&Number(e.value)<=Number(o.superiorData.selfBuyAmount.value)?t(new Error(`需大于上一等级金额(${o.superiorData.selfBuyAmount.value})`)):t()},trigger:"blur"}],salesAmount:[{required:!0,validator:(l,e,t)=>{if(e.checked&&Number(e.value)<=0){t(new Error("请输入推广金额"));return}o.superiorData!=null&&e.checked&&Number(e.value)<=Number(o.superiorData.salesAmount.value)?t(new Error(`需大于上一等级金额(${o.superiorData.salesAmount.value})`)):t(),t()},trigger:"blur"}],salesInviteUsers:[{required:!0,validator:(l,e,t)=>{if(e.checked&&Number(e.value)<=0){t(new Error("请输入发展客户数"));return}o.superiorData!=null&&e.checked&&Number(e.value)<=Number(o.superiorData.salesInviteUsers.value)?t(new Error(`需大于上一等级客户数(${o.superiorData.salesInviteUsers.value})`)):t(),t()},trigger:"blur"}]}),k=()=>{let l=o.conditionsData,e=o.superiorData;e.selfBuyAmount.checked?(l.selfBuyAmount.checked=!0,l.selfBuyAmount.disabled=!0):l.selfBuyAmount.disabled=!1,e.salesAmount.checked?(l.salesAmount.checked=!0,l.salesAmount.disabled=!0):l.salesAmount.disabled=!1,e.salesInviteUsers.checked?(l.salesInviteUsers.checked=!0,l.salesInviteUsers.disabled=!0):l.salesInviteUsers.disabled=!1,Object.assign(s,l)};return C(()=>{o.superiorData!==null?j(()=>{k()}):Object.assign(s,o.conditionsData)}),E(o.superiorData,(l,e)=>{k()}),(l,e)=>{const t=r("el-checkbox"),p=r("TigInput"),f=r("el-form-item"),g=r("el-button"),D=r("el-popover"),w=r("el-form");return x(),$(w,{ref_key:"formRef",ref:_,rules:m,model:s,"label-width":"auto"},{default:u(()=>[n(f,{prop:"conditionsData"},{default:u(()=>[n(D,{ref_key:"popoverRef",ref:c,placement:"right",title:"升级设置",width:350,trigger:"click"},{reference:u(()=>[q(l.$slots,"default",{},void 0,!0)]),default:u(()=>[e[12]||(e[12]=a("div",{class:"tips mb10"},"以下条件至少选择一个，选择多个需同时满足才可升级。自购金额、推广金额需交易完成后才会统计。",-1)),a("div",z,[n(f,{prop:"selfBuyAmount",rules:m.selfBuyAmount},{default:u(()=>[a("div",K,[a("div",G,[n(t,{modelValue:s.selfBuyAmount.checked,"onUpdate:modelValue":e[0]||(e[0]=i=>s.selfBuyAmount.checked=i),label:s.selfBuyAmount.title,disabled:s.selfBuyAmount.disabled,size:"large"},null,8,["modelValue","label","disabled"])]),a("div",M,[e[7]||(e[7]=a("p",{class:"mr10"},"满",-1)),n(p,{type:"decimal",modelValue:s.selfBuyAmount.value,"onUpdate:modelValue":e[1]||(e[1]=i=>s.selfBuyAmount.value=i),disabled:!s.selfBuyAmount.checked,width:"130px",min:0},{append:u(()=>[d(b(s.selfBuyAmount.unit),1)]),_:1},8,["modelValue","disabled"])])])]),_:1},8,["rules"]),n(f,{prop:"salesAmount",rules:m.salesAmount},{default:u(()=>[a("div",P,[a("div",F,[n(t,{modelValue:s.salesAmount.checked,"onUpdate:modelValue":e[2]||(e[2]=i=>s.salesAmount.checked=i),label:s.salesAmount.title,disabled:s.salesAmount.disabled,size:"large"},null,8,["modelValue","label","disabled"])]),a("div",H,[e[8]||(e[8]=a("p",{class:"mr10"},"满",-1)),n(p,{type:"decimal",modelValue:s.salesAmount.value,"onUpdate:modelValue":e[3]||(e[3]=i=>s.salesAmount.value=i),disabled:!s.salesAmount.checked,width:"130px",min:0},{append:u(()=>[d(b(s.salesAmount.unit),1)]),_:1},8,["modelValue","disabled"])])])]),_:1},8,["rules"]),n(f,{prop:"salesInviteUsers",rules:m.salesInviteUsers},{default:u(()=>[a("div",J,[a("div",L,[n(t,{modelValue:s.salesInviteUsers.checked,"onUpdate:modelValue":e[4]||(e[4]=i=>s.salesInviteUsers.checked=i),label:s.salesInviteUsers.title,disabled:s.salesInviteUsers.disabled,size:"large"},null,8,["modelValue","label","disabled"])]),a("div",Q,[e[9]||(e[9]=a("p",{class:"mr10"},"满",-1)),n(p,{type:"integer",modelValue:s.salesInviteUsers.value,"onUpdate:modelValue":e[5]||(e[5]=i=>s.salesInviteUsers.value=i),disabled:!s.salesInviteUsers.checked,width:"130px",min:0},{append:u(()=>[d(b(s.salesInviteUsers.unit),1)]),_:1},8,["modelValue","disabled"])])])]),_:1},8,["rules"])]),a("div",W,[a("div",X,[y.value?R("",!0):(x(),O("span",Y,"请设置升级条件"))]),a("div",null,[n(g,{onClick:e[6]||(e[6]=i=>c.value.hide())},{default:u(()=>e[10]||(e[10]=[d("取消")])),_:1}),n(g,{type:"primary",onClick:I},{default:u(()=>e[11]||(e[11]=[d("确认")])),_:1})])])]),_:3},512)]),_:3})]),_:3},8,["rules","model"])}}}),ae=T(Z,[["__scopeId","data-v-8c8ed1fb"]]);export{ae as default};
