import{d as q,i as r,C as x,s as D,q as I,I as c,r as i,c as R,o as y,e as S,j as L,f as j,w as n,b as o,a0 as E,E as F,a1 as U}from"./index-CGYuOau0.js";import{a as M,u as O}from"./signInSetting--U1sGbu7.js";const T={class:"container"},z={class:"content_wrapper"},A={class:"lyecs-form-table"},K=q({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:V,emit:k}){const l=k,s=w,d=r(!0),p=x().currentRoute.value.query,f=r(s.isDialog?s.act:String(p.act)),_=r(s.isDialog?s.id:Number(p.id)),C=f.value==="add"?"create":"update",g=D(),t=r({});I(()=>{h()});const h=async()=>{try{const e=await M(f.value,{id:_.value});Object.assign(t.value,e.item)}catch(e){c.error(e.message),l("close")}finally{d.value=!1}},v=async()=>{await g.value.validate();try{l("update:confirmLoading",!0);const e=await O(C,{id:_.value,...t.value});l("submitCallback",e),c.success(e.message)}catch(e){c.error(e.message)}finally{l("update:confirmLoading",!1)}};return V({onFormSubmit:()=>{v()}}),(e,a)=>{const b=i("el-input"),u=i("el-form-item"),B=i("el-button"),N=i("el-form");return y(),R("div",T,[S("div",z,[S("div",A,[d.value?j("",!0):(y(),L(N,{key:0,ref_key:"formRef",ref:g,model:t.value,"label-width":"auto"},{default:n(()=>[o(u,{prop:"name",label:"名称",rules:[{required:!0,message:"名称不能为空!"}]},{default:n(()=>[o(b,{modelValue:t.value.name,"onUpdate:modelValue":a[0]||(a[0]=m=>t.value.name=m)},null,8,["modelValue"])]),_:1}),o(u,{prop:"points",label:"赠送积分",rules:[{required:!0,message:"赠送积分不能为空!"}]},{default:n(()=>[o(b,{type:"number",modelValue:t.value.points,"onUpdate:modelValue":a[1]||(a[1]=m=>t.value.points=m)},null,8,["modelValue"])]),_:1}),E(o(u,{"wrapper-col":{offset:4,span:16}},{default:n(()=>[o(B,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:v},{default:n(()=>a[2]||(a[2]=[F("提交")])),_:1},512)]),_:1},512),[[U,!s.isDialog]])]),_:1},8,["model"]))])])])}}});export{K as default};
