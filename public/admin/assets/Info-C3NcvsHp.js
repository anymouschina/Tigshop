import{d as U,dt as L,i as p,C as j,s as E,q as F,r as s,c as A,o as c,e as V,j as h,f as k,b as t,w as a,a0 as M,g as O,E as _,a1 as T,I as f}from"./index-CGYuOau0.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{_ as $}from"./SelectShopProductCategory.vue_vue_type_script_setup_true_lang-BsWwwlbU.js";/* empty css             */import{e as z,f as G,u as H}from"./shopProductCategory-B7SX1RoE.js";import"./time-ClyPenjC.js";const J={class:"container"},K={class:"content_wrapper"},Q={class:"lyecs-form-table"},ne=U({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean,parentId:Number},emits:["submitCallback","update:confirmLoading","close"],setup(N,{expose:x,emit:B}){L();const d=B,n=N,i=p(!0),g=j().currentRoute.value.query,m=p(n.isDialog?n.act:String(g.act)),v=p(n.isDialog?n.id:Number(g.id)),y=m.value==="add"?"create":"update",b=E(),o=p({is_show:1,sort_order:50}),D=async()=>{try{const r=await z(m.value,{id:v.value});Object.assign(o.value,r.item)}catch(r){f.error(r.message),d("close")}finally{i.value=!1}};F(()=>{m.value==="detail"?D():i.value=!1,y==="create"&&(o.value.parent_id=n.parentId,console.log(o.value.parent_id))});const w=async()=>{await b.value.validate();try{d("update:confirmLoading",!0);const r=await G(y,{id:v.value,...o.value});d("submitCallback",r),f.success(r.message),H().clearShopProductCategory()}catch(r){f.error(r.message)}finally{d("update:confirmLoading",!1)}};return x({onFormSubmit:()=>{w()}}),(r,e)=>{const S=s("el-input"),u=s("el-form-item"),C=s("el-radio"),P=s("el-radio-group"),R=s("el-button"),q=s("el-form"),I=s("a-spin");return c(),A("div",J,[V("div",K,[V("div",Q,[i.value?k("",!0):(c(),h(q,{key:0,ref_key:"formRef",ref:b,model:o.value,"label-width":"auto"},{default:a(()=>[t(u,{rules:[{required:!0,message:"分类名称不能为空!"}],label:"分类名称",prop:"category_name"},{default:a(()=>[t(S,{modelValue:o.value.category_name,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.category_name=l)},null,8,["modelValue"])]),_:1}),t(u,{label:"上级分类",prop:"parent_id"},{default:a(()=>[i.value?k("",!0):(c(),h(O($),{key:0,category_id:o.value.parent_id,"onUpdate:category_id":e[1]||(e[1]=l=>o.value.parent_id=l),multiple:!1,style:{width:"100%"}},null,8,["category_id"]))]),_:1}),t(u,{label:"排序",prop:"sort_order"},{default:a(()=>[t(S,{modelValue:o.value.sort_order,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.sort_order=l)},null,8,["modelValue"])]),_:1}),t(u,{label:"是否显示",prop:"is_show"},{default:a(()=>[t(P,{modelValue:o.value.is_show,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.is_show=l)},{default:a(()=>[t(C,{value:1},{default:a(()=>e[4]||(e[4]=[_("是")])),_:1}),t(C,{value:0},{default:a(()=>e[5]||(e[5]=[_("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),M(t(u,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[t(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:w},{default:a(()=>e[6]||(e[6]=[_("提交 ")])),_:1},512)]),_:1},512),[[T,!n.isDialog]])]),_:1},8,["model"])),t(I,{spinning:i.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ne as default};
