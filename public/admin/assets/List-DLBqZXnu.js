import{y as Y,d as N,i as g,G as q,K as B,q as G,c as v,e as l,b as a,w as n,f as h,g as i,I as x,r,o as y,L as I,E as k,D as C,_ as K}from"./index-CGYuOau0.js";import{u as P}from"./config-DNllFJyR.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";import{u as X,i as j,p as A}from"./format-DFT-VJzO.js";/* empty css                                                                    */import{P as H}from"./Pagination-yOfjsBuR.js";/* empty css                                                                  *//* empty css                                                                              */import{S as J}from"./SelectTimeInterval-BYQIPzkk.js";/* empty css             */import{f as S}from"./time-ClyPenjC.js";import{r as O}from"./export-Bb89fUlC.js";import"./config-DU8_t5BN.js";const Q=d=>Y({url:"panel/sales_statistics/sales_ranking",method:"get",params:d}),R=d=>Y({url:"panel/sales_statistics/sales_ranking",method:"get",responseType:"arraybuffer",params:d}),W={class:"container"},Z={class:"content_wrapper"},$={class:"filtrate-menu"},tt={class:"table-container"},et={class:"flex"},at={key:0,class:"span-pic"},ot=["href"],st=["src"],nt={class:"span-product-con"},lt={class:"span-product-name"},rt={class:"empty-warp"},it={key:0,class:"empty-bg"},dt={key:0,class:"pagination-con"},pt=N({__name:"List",setup(d){const z=P(),p=g(!1),D=g(),c=g(0),o=q({page:1,size:z.pageSize,keyword:"",start_time:S(B(30,"sub"),"YYYY-MM-DD"),end_time:S(new Date,"YYYY-MM-DD")}),m=async()=>{p.value=!0;try{const s=await Q(o);s.errcode===0&&(D.value=s.filter_result,c.value=s.total)}catch(s){x.error(s.message),console.error(s)}p.value=!1},b=()=>{m()},_=g(!1),E=async()=>{_.value=!0;try{const s=await R({...o,is_export:"1"});_.value=!1,O(s,"销售排行导出")}catch(s){x.error(s.message)}finally{_.value=!1}},V=({prop:s,order:t})=>{console.log(s,t),o.sort_field=s,o.sort_order=t=="ascending"?"asc":t=="descending"?"desc":"",m()},M=()=>{m()};return G(()=>{m()}),(s,t)=>{const u=r("el-form-item"),T=r("el-input"),w=r("el-button"),U=r("el-form"),f=r("el-table-column"),F=r("el-table"),L=r("a-spin");return y(),v("div",W,[l("div",Z,[t[7]||(t[7]=l("div",{class:"notice-warp"},"提示：查询的时间间隔上限默认为一月，如果数据量过大导至查询时间过久或者超时报错，请尝试缩小查询的时间间隔！",-1)),a(U,{model:o},{default:n(()=>[l("div",$,[a(u,{class:"mr-10"},{default:n(()=>[a(i(J),{type:"date","start-date":o.start_time,"onUpdate:startDate":t[0]||(t[0]=e=>o.start_time=e),"end-date":o.end_time,"onUpdate:endDate":t[1]||(t[1]=e=>o.end_time=e)},null,8,["start-date","end-date"])]),_:1}),a(u,{class:"mr-10"},{default:n(()=>[a(T,{modelValue:o.keyword,"onUpdate:modelValue":t[2]||(t[2]=e=>o.keyword=e),placeholder:"输入商品名称或者商品编号",onKeyup:I(b,["enter"]),clearable:"",onClear:b},null,8,["modelValue"])]),_:1}),a(u,{class:"mr-10"},{default:n(()=>[a(w,{plain:"",onClick:b},{default:n(()=>t[5]||(t[5]=[k("搜索")])),_:1})]),_:1}),a(u,{class:"mr-10"},{default:n(()=>[a(w,{plain:"",onClick:E,loading:_.value},{default:n(()=>t[6]||(t[6]=[k("导出EXCEL")])),_:1},8,["loading"])]),_:1})])]),_:1},8,["model"]),l("div",tt,[a(L,{spinning:p.value},{default:n(()=>[a(F,{data:D.value,total:c.value,"row-key":"product_id",onSortChange:V},{empty:n(()=>[l("div",rt,[p.value?h("",!0):(y(),v("div",it,"暂无数据"))])]),default:n(()=>[a(f,{label:"商品名称",prop:"product_name"},{default:n(({row:e})=>[l("div",et,[e.pic_thumb?(y(),v("div",at,[l("a",{href:i(X)({path:"product",id:e.product_id}),target:"_blank"},[l("img",{src:i(j)(e.pic_thumb),height:"50",width:"50"},null,8,st)],8,ot)])):h("",!0),l("div",nt,[l("div",lt,C(e.product_name),1)])])]),_:1}),a(f,{label:"商品编号",prop:"product_sn"}),a(f,{label:"总销量",prop:"total_sales_num",sortable:"custom"}),a(f,{label:"总销售额",prop:"total_sales_amount",sortable:"custom"},{default:n(({row:e})=>[k(C(i(A)(e.total_sales_amount)),1)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),c.value>0?(y(),v("div",dt,[a(i(H),{page:o.page,"onUpdate:page":t[3]||(t[3]=e=>o.page=e),size:o.size,"onUpdate:size":t[4]||(t[4]=e=>o.size=e),total:c.value,onCallback:M},null,8,["page","size","total"])])):h("",!0)])])])}}}),Ct=K(pt,[["__scopeId","data-v-f7f63892"]]);export{Ct as default};
