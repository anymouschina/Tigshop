import{d as L,i as n,C as N,s as R,q as D,I as d,r as m,c as I,o as b,e as y,j as q,f as T,w as i,b as o,a0 as U,g as j,E,a1 as F}from"./index-CGYuOau0.js";import{b as G,u as M}from"./live-Z-dmkhEI.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";/* empty css                                                                    *//* empty css                                                                  */import{S as O}from"./SelectGoodsRange-lguMY9f3.js";/* empty css                                                                              *//* empty css             */import"./time-ClyPenjC.js";import"./SelectBrand-DsStZmqh.js";import"./brand-BWQ0xslz.js";import"./SelectCategory.vue_vue_type_script_setup_true_lang-D0pGcDY-.js";import"./category-BQcUsnE8.js";import"./category-DpIl2IOo.js";import"./SelectProduct-Dqera5O0.js";import"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";import"./product-CxWf3yyB.js";import"./Pagination-yOfjsBuR.js";import"./SelectSku-DpuXlI1z.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";const z={class:"container"},A={class:"content_wrapper"},H={class:"lyecs-form-table"},_e=L({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:S,emit:k}){const l=k,r=w,u=n(!0),f=N().currentRoute.value.query,c=n(r.isDialog?r.act:String(f.act)),_=n(r.isDialog?r.id:Number(f.id)),C=c.value==="add"?"create":"update",v=R(),e=n({});D(()=>{c.value==="detail"?h():u.value=!1});const h=async()=>{try{const t=await G(c.value,{id:_.value});Object.assign(e.value,t.item)}catch(t){d.error(t.message),l("close")}finally{u.value=!1}},g=async()=>{await v.value.validate();try{l("update:confirmLoading",!0);const t=await M(C,{id:_.value,...e.value});l("submitCallback",t),d.success(t.message)}catch(t){d.error(t.message)}finally{l("update:confirmLoading",!1)}};return S({onFormSubmit:()=>{g()}}),(t,a)=>{const x=m("el-input"),p=m("el-form-item"),V=m("el-button"),B=m("el-form");return b(),I("div",z,[y("div",A,[y("div",H,[u.value?T("",!0):(b(),q(B,{key:0,ref_key:"formRef",ref:v,model:e.value,"label-width":"auto"},{default:i(()=>[o(p,{prop:"wechat_live_title",label:"直播名称",rules:[{required:!0,message:"直播名称不能为空!"}]},{default:i(()=>[o(x,{modelValue:e.value.wechat_live_title,"onUpdate:modelValue":a[0]||(a[0]=s=>e.value.wechat_live_title=s)},null,8,["modelValue"])]),_:1}),o(p,{prop:"product_id",label:"选择商品"},{default:i(()=>[o(j(O),{rangeIds:e.value.act_range_ext,"onUpdate:rangeIds":a[1]||(a[1]=s=>e.value.act_range_ext=s),rangeType:e.value.act_range,"onUpdate:rangeType":a[2]||(a[2]=s=>e.value.act_range=s),is_self:1},null,8,["rangeIds","rangeType"])]),_:1}),U(o(p,{"wrapper-col":{offset:4,span:16}},{default:i(()=>[o(V,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:g},{default:i(()=>a[3]||(a[3]=[E("提交")])),_:1},512)]),_:1},512),[[F,!r.isDialog]])]),_:1},8,["model"]))])])])}}});export{_e as default};
