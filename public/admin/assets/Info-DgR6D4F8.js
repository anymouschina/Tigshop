import{d as D,C as N,i as f,s as q,r as s,c,o as u,e as v,b as a,w as l,a3 as F,g,j as V,F as k,E,a4 as $,I as T}from"./index-DrbzVNl6.js";import{u as j}from"./messageLog-BYsEFPfI.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import"./index-CeQDmMxd.js";/* empty css                                                                    *//* empty css                                                                  */import{_ as M}from"./SelectRankList.vue_vue_type_script_setup_true_lang-DzjPE1aZ.js";/* empty css                                                                              */import{S as z}from"./SelectLink-y94Q6MqZ.js";import{_ as A}from"./SelectUser.vue_vue_type_script_setup_true_lang-DFihL3hS.js";/* empty css             */import"./time-Bh5UhrfW.js";import"./userRank-Cwfy5SLP.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./user-Zgy4YOmN.js";const G={class:"container"},H={class:"content_wrapper"},J={class:"lyecs-form-table"},ne=D({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:U,emit:I}){const d=I,r=w,_=N().currentRoute.value.query,C=f(r.isDialog?r.act:String(_.act)),x=f(r.isDialog?r.id:Number(_.id)),S=C.value==="add"?"create":"update",y=q(),e=f({}),b=async()=>{await y.value.validate();try{d("update:confirmLoading",!0);const m=await j(S,{id:x.value,...e.value});d("submitCallback",m),T.success("操作成功")}catch(m){T.error(m.message)}finally{d("update:confirmLoading",!1)}};return U({onFormSubmit:()=>{b()}}),(m,t)=>{const p=s("TigInput"),n=s("el-form-item"),i=s("el-option"),L=s("el-select"),R=s("el-button"),B=s("el-form");return u(),c("div",G,[v("div",H,[v("div",J,[a(B,{ref_key:"formRef",ref:y,model:e.value,"label-width":"auto"},{default:l(()=>[a(n,{rules:[{required:!0,message:"标题不能为空!"}],label:"标题",prop:"messageTitle"},{default:l(()=>[a(p,{classType:"tig-form-input",modelValue:e.value.messageTitle,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.messageTitle=o)},null,8,["modelValue"])]),_:1}),a(n,{rules:[{required:!0,message:"内容不能为空!"}],label:"内容",prop:"messageContent"},{default:l(()=>[a(p,{classType:"tig-form-input",modelValue:e.value.messageContent,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.messageContent=o),row:"2",type:"textarea"},null,8,["modelValue"])]),_:1}),a(n,{label:"链接",prop:"messageLink"},{default:l(()=>[a(g(z),{modelValue:e.value.messageLink,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.messageLink=o)},null,8,["modelValue"])]),_:1}),a(n,{label:"发送类型",prop:"sendUserType"},{default:l(()=>[a(L,{modelValue:e.value.sendUserType,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.sendUserType=o),style:{width:"100%","margin-bottom":"20px"}},{default:l(()=>[a(i,{value:0,label:"全部会员"}),a(i,{value:1,label:"单个会员"}),a(i,{value:2,label:"会员等级"}),a(i,{value:3,label:"部分会员"})]),_:1},8,["modelValue"]),e.value.sendUserType===1?(u(),V(g(A),{key:0,multiple:!1,userId:e.value.userIds,"onUpdate:userId":t[4]||(t[4]=o=>e.value.userIds=o)},null,8,["userId"])):e.value.sendUserType===2?(u(),V(g(M),{key:1,modelValue:e.value.userRank,"onUpdate:modelValue":t[5]||(t[5]=o=>e.value.userRank=o)},null,8,["modelValue"])):e.value.sendUserType===3?(u(),c(k,{key:2},[a(p,{classType:"tig-form-input",modelValue:e.value.userIds,"onUpdate:modelValue":t[6]||(t[6]=o=>e.value.userIds=o),row:2,type:"textarea"},null,8,["modelValue"]),t[7]||(t[7]=v("div",{class:"extra"},"注意：输入会员名称时，请用英文逗号隔开。",-1))],64)):(u(),c(k,{key:3},[],64))]),_:1}),F(a(n,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[a(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:b},{default:l(()=>t[8]||(t[8]=[E("提交")])),_:1},512)]),_:1},512),[[$,!r.isDialog]])]),_:1},8,["model"])])])])}}});export{ne as default};
