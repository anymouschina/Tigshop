import{d as q,K as B,i as u,G as K,q as M,c as C,e as t,f as k,b as l,w as o,g as n,I as S,r as c,o as I,M as P,E as a,D as i,bg as v}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";/* empty css                                                                    */import{P as $}from"./Pagination-wR9huHyl.js";import{p as b}from"./format-CRgx78oe.js";import{a as G,e as L}from"./promoter-Ccr6u1Ol.js";import{r as X}from"./export-D_WXJj3y.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as j,a as H}from"./SelectPromoteMode.vue_vue_type_script_setup_true_lang-Dh0LT81A.js";import{_ as J}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./time-Bh5UhrfW.js";import"./subgroup-OjPHbSXS.js";import"./promoteMode-DGHbX5Kd.js";const Q={class:"container"},R={class:"content_wrapper"},W={class:"lyecs-table-list-warp"},Y={class:"list-table-tool lyecs-search-warp"},Z={class:"advanced-search-warp list-table-tool-row"},ee={class:"simple-form-warp"},te={class:"simple-form-field"},oe={class:"form-group"},le={class:"control-container"},se={class:"simple-form-field"},ae={class:"form-group"},ne={class:"control-container"},ie={class:"simple-form-field"},re={class:"form-group"},de={class:"control-container"},pe={class:"simple-form-field"},ce={class:"advanced-search-warp list-table-tool-row"},ue={class:"simple-form-warp"},me={class:"simple-form-field"},fe={class:"table-container"},_e={class:"flex flex-align-center"},ge={class:"flex flex-align-center"},ve={class:"flex flex-align-center"},be={class:"flex flex-align-center"},he={class:"flex flex-align-center"},ye={class:"btn-link"},xe={class:"empty-warp"},we={key:0,class:"empty-bg"},Ce={key:0,class:"pagination-con"},Ie={key:0,class:"selected-action-warp"},ke={class:"selected-action"},Ge=q({__name:"List",setup(ze){const h=B(),z=u([]),y=u(!0),x=u(0);u(0);const U=u([]),r=K({page:1,sortField:"",sortOrder:"",mobile:"",groupId:"",level:""});u(-1);const m=async()=>{y.value=!0;try{const p=await G({...r,size:h.pageSize});z.value=p.records,x.value=p.total}catch(p){S.error(p.message)}finally{y.value=!1}},w=u(!1),V=async()=>{w.value=!0;try{const p=await L({...r,isExport:"1",size:-1});w.value=!1,X(p,"分销员明细导出")}catch(p){S.error(p.message)}finally{w.value=!1}};M(()=>{m()});const f=()=>{m()},D=({prop:p,order:e})=>{r.sortField=p,r.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",m()};return(p,e)=>{const N=c("TigInput"),E=c("el-button"),A=c("el-form"),d=c("el-table-column"),_=c("el-icon"),g=c("el-tooltip"),F=c("el-table"),O=c("a-spin"),T=c("el-space");return I(),C("div",Q,[t("div",R,[t("div",W,[t("div",Y,[l(A,{model:r,name:"form"},{default:o(()=>[t("div",Z,[t("div",ee,[t("div",te,[t("div",oe,[e[5]||(e[5]=t("label",{class:"control-label"},[t("span",null,"分销员：")],-1)),t("div",le,[l(N,{modelValue:r.mobile,"onUpdate:modelValue":e[0]||(e[0]=s=>r.mobile=s),name:"mobile",placeholder:"请输入手机号",onKeyup:P(f,["enter"]),clearable:"",onClear:f},null,8,["modelValue"])])])]),t("div",se,[t("div",ae,[e[6]||(e[6]=t("label",{class:"control-label"},[t("span",null,"分组：")],-1)),t("div",ne,[l(n(j),{groupId:r.groupId,"onUpdate:groupId":e[1]||(e[1]=s=>r.groupId=s),onOnChange:f},null,8,["groupId"])])])]),t("div",ie,[t("div",re,[e[7]||(e[7]=t("label",{class:"control-label"},[t("span",null,"等级：")],-1)),t("div",de,[l(n(H),{level:r.level,"onUpdate:level":e[2]||(e[2]=s=>r.level=s),onOnChange:f},null,8,["level"])])])]),t("div",pe,[l(E,{type:"primary",onClick:f},{default:o(()=>e[8]||(e[8]=[a("搜索")])),_:1})])])]),t("div",ce,[t("div",ue,[t("div",me,[l(E,{type:"primary",onClick:V,loading:w.value},{default:o(()=>e[9]||(e[9]=[a("导出EXCEL")])),_:1},8,["loading"])])])])]),_:1},8,["model"])]),t("div",fe,[l(O,{spinning:y.value},{default:o(()=>[l(F,{data:z.value,total:x.value,"row-key":"productId",onSortChange:D},{empty:o(()=>[t("div",xe,[y.value?k("",!0):(I(),C("div",we,"暂无数据"))])]),default:o(()=>[l(d,{label:"手机号",prop:"productId",width:130,fixed:"left"},{default:o(({row:s})=>[a(i(s.baseUserInfo.mobile),1)]),_:1}),l(d,{label:"昵称",prop:"productId",width:100},{default:o(({row:s})=>[a(i(s.baseUserInfo.nickname||s.baseUserInfo.username),1)]),_:1}),l(d,{label:"等级",prop:"levelText",width:100},{default:o(({row:s})=>[a(i(s.levelText),1)]),_:1}),l(d,{label:"分组",prop:"groupInfo.groupName",width:100},{default:o(({row:s})=>[a(i(s.groupInfo.groupName),1)]),_:1}),l(d,{prop:"productId",align:"left"},{header:o(()=>[t("div",_e,[t("p",null,"累计销售金额("+i(n(h).config.amountUnit)+")",1),l(g,{placement:"top",effect:"light"},{content:o(()=>e[10]||(e[10]=[a(" 累计业绩为实际有效业绩，剔除了退款金额。 ")])),default:o(()=>[l(_,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:o(()=>[l(n(v))]),_:1})]),_:1})])]),default:o(({row:s})=>[a(i(n(b)(s.saleAmount)),1)]),_:1}),l(d,{prop:"productId",align:"left"},{header:o(()=>[t("div",ge,[t("p",null,"支付金额("+i(n(h).config.amountUnit)+")",1),l(g,{placement:"top",effect:"light"},{content:o(()=>e[11]||(e[11]=[a(" 所选时间内，分销员客户的支付成功金额（含退款）。目前仅支持展示2023.11后的数据。 ")])),default:o(()=>[l(_,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:o(()=>[l(n(v))]),_:1})]),_:1})])]),default:o(({row:s})=>[a(i(n(b)(s.payMoney)),1)]),_:1}),l(d,{prop:"refundAmount",align:"left"},{header:o(()=>[t("div",ve,[t("p",null,"退款金额("+i(n(h).config.amountUnit)+")",1),l(g,{placement:"top",effect:"light"},{content:o(()=>e[12]||(e[12]=[a(" 所选时间内，分销员客户的全额退款和部分退款的退款成功金额。目前仅支持展示2023.11后的数据。 ")])),default:o(()=>[l(_,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:o(()=>[l(n(v))]),_:1})]),_:1})])]),default:o(({row:s})=>[a(i(n(b)(s.refundAmount)),1)]),_:1}),l(d,{prop:"orderCount",width:140,align:"left"},{header:o(()=>[t("div",be,[e[14]||(e[14]=t("p",null,"支付订单数",-1)),l(g,{placement:"top",effect:"light"},{content:o(()=>e[13]||(e[13]=[a(" 所选时间内，分销员客户的所有已支付的订单。目前仅支持展示2023.11后的数据。 ")])),default:o(()=>[l(_,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:o(()=>[l(n(v))]),_:1})]),_:1})])]),default:o(({row:s})=>[a(i(s.orderCount),1)]),_:1}),l(d,{prop:"refundCount",width:140,align:"left"},{header:o(()=>[t("div",he,[e[16]||(e[16]=t("p",null,"退款订单数",-1)),l(g,{placement:"top",effect:"light"},{content:o(()=>e[15]||(e[15]=[a(" 所选时间内，分销员客户的全额退款和部分退款的订单总数。目前仅支持展示2023.11后的数据。 ")])),default:o(()=>[l(_,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:o(()=>[l(n(v))]),_:1})]),_:1})])]),default:o(({row:s})=>[a(i(s.refundCount),1)]),_:1}),l(d,{label:"已结算收益",prop:"totalCommission",width:100},{default:o(({row:s})=>[a(i(n(b)(s.totalCommission)),1)]),_:1}),l(d,{label:"累计收益",prop:"totalAmountCommission",width:100},{default:o(({row:s})=>[l(n(J),{params:{act:"detail",id:s.salesmanId},isDrawer:!1,showFooter:!1,path:"salesman/salesmanDetailed/src/cumulativeGain",title:"佣金详情",width:"600px",onOkCallback:m},{default:o(()=>[t("a",ye,i(n(b)(s.totalAmountCommission)),1)]),_:2},1032,["params"])]),_:1}),l(d,{label:"累计客户数",prop:"totalCustomer",width:100},{default:o(({row:s})=>[a(i(s.totalCustomer),1)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),x.value>0?(I(),C("div",Ce,[l(n($),{page:r.page,"onUpdate:page":e[3]||(e[3]=s=>r.page=s),size:r.size,"onUpdate:size":e[4]||(e[4]=s=>r.size=s),total:x.value,onCallback:m},null,8,["page","size","total"])])):k("",!0)]),U.value.length>0?(I(),C("div",Ie,[t("div",ke,[l(T,null,{default:o(()=>[t("span",null,[e[17]||(e[17]=a("已选择：")),t("b",null,i(U.value.length),1),e[18]||(e[18]=a(" 项"))])]),_:1})])])):k("",!0)])])])}}});export{Ge as default};
