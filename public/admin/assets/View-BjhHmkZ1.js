import{d as E,bo as Z,i as b,dT as P,C as ee,ad as j,q as te,T as oe,r as I,c as n,o as t,F as c,e,b as w,w as y,f as d,g as a,a as z,n as k,N as q,D as S,j as C,b0 as le,A as ie,_ as R,dQ as F,a3 as G,dG as re,e7 as ue,a4 as ce,dE as de,aQ as X,I as H,K as pe,d$ as me,bp as he}from"./index-DrbzVNl6.js";import{i as B,u as J,r as Y}from"./format-CRgx78oe.js";import{l as ve,M as _e,c as fe,p as ge}from"./pageTabs-CGZOJyNL.js";import{l as ke}from"./logo_blue2-CgAHBmsI.js";import{u as K}from"./theme-qm3k10fq.js";import{g as ye}from"./adminMsg-DO0gQXrn.js";import{S as be}from"./SelectShop-FCkYZIux.js";import{u as we}from"./menus-Cfe5Mqim.js";import{_ as Se,a as $e}from"./pageHeader.vue_vue_type_style_index_0_lang-UMB4eQ9W.js";import"./index-CeQDmMxd.js";import"./version-CL9k3sYf.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-BDvYUQtN.js";import"./vuedraggable.umd-DAKh-e3Q.js";import"./Image.vue_vue_type_script_setup_true_lang-BWzCs9jv.js";import"./authority-C-nKXejU.js";const Ce={class:"main-menu-logo"},xe={class:"lyecs-openPage","data-href":"index.html","data-tag":"default",title:"起始页",style:{padding:"0 3px"}},Le=["src"],Te=["src"],Me={key:0},Ie=["onClick","href"],Ve={class:"nav-tit"},Ae={class:"child-tit"},Ne=["onClick"],ze={class:"nav-title"},De={key:0,class:"menu-chider"},Pe=["onClick"],Be={class:"nav-title"},Ee=["target","onClick"],Ue={class:"nav-title"},qe=E({__name:"pageLeftMenu",setup(U){const{themeInfo:L}=K(),h=Z().licensedData,x=b(localStorage.getItem("adminType")),r=P(),p=ee(),T=P(),v=b([]);b([]),v.value=p.currentRoute.value.matched;const $=j(()=>T.mainMenu==null?[]:T.mainMenu);te(()=>{A($.value)});const A=(_,l=1,m=!1,o=!0)=>{_.forEach(i=>{m==!0&&l==2?v.value[l].name===i.authoritySn&&(i.current=!0):i.current=v.value[l]?v.value[l].name===i.authoritySn:!1,l==2&&i.children&&i.children.length>0&&o&&(i.current=!0),i.children&&A(i.children,l+1,m,o)})},N=(_,l=!1)=>{window.innerWidth<=756?l?($.value.forEach(m=>{m.current=!1}),_.current=!0):(_.blank?window.open("/"+_.routeLink,"_blank"):p.push("/"+_.routeLink),r.menuActive=!1):(l&&$.value.forEach(m=>{m.children&&m.children.length>0&&m.children.forEach(o=>{o.current=!0})}),_.blank?window.open("/"+_.routeLink,"_blank"):p.push("/"+_.routeLink),ie(),r.childMenuShow=!0)};return oe(()=>{v.value=p.currentRoute.value.matched,A($.value,1,!0,!1)}),(_,l)=>{const m=I("perfect-scrollbar");return t(),n(c,null,[e("div",{class:k(["body-menu",{active:a(r).menuActive,"shop-admin":x.value==="shop",dark:a(L).navTheme==="dark"}])},[w(m,{class:"main-menu"},{default:y(()=>[e("div",Ce,[e("a",xe,[x.value==="shop"||a(L).navTheme==="dark"?(t(),n("img",{key:0,src:a(h).adminDarkLogo&&a(h).adminDarkLogo!==null?a(B)(a(h).adminDarkLogo):a(ve)},null,8,Le)):(t(),n("img",{key:1,src:a(h).adminLightLogo&&a(h).adminLightLogo!==null?a(B)(a(h).adminLightLogo):a(ke)},null,8,Te))])]),$.value?(t(),n("ul",Me,[(t(!0),n(c,null,z($.value,(o,i)=>(t(),n(c,null,[o.isShow?(t(),n("li",{key:0,class:k("main-menu-item menu_"+o.authoritySn+" "+(o.current?"current":""))},[e("a",{onClick:q(u=>N(o,!0),["prevent"]),class:"menu-tit",href:"/"+o.routeLink},[e("i",{class:k(o.authorityIco)},null,2),e("span",Ve,S(o.authorityName),1)],8,Ie)],2)):d("",!0)],64))),256)),l[2]||(l[2]=e("li",{style:{height:"80px"}},null,-1))])):d("",!0)]),_:1}),e("div",{class:k("child-menu "+(a(r).childMenuShow?"child-menu-show":"child-menu-hide"))},[(t(!0),n(c,null,z($.value,(o,i)=>(t(),n(c,null,[o.current&&o.isShow?(t(),C(m,{key:0,class:"child_warp",options:{suppressScrollX:!0}},{default:y(()=>[e("div",Ae,S(o.authorityName),1),e("ul",null,[(t(!0),n(c,null,z(o.children,(u,O)=>(t(),n(c,null,[u.children?(t(),n(c,{key:0},[u.isShow?(t(),n("li",{key:0,class:k("menu-item "+(u.current?"cur":""))},[e("a",{class:"menu-item-a",onClick:f=>u.current=!u.current},[l[3]||(l[3]=e("i",{class:"nav-icon iconfont icon-xiala"},null,-1)),e("span",ze,S(u.authorityName),1)],8,Ne),u.current?(t(),n("div",De,[e("ul",null,[(t(!0),n(c,null,z(u.children,(f,Q)=>(t(),n(c,null,[f.isShow?(t(),n("li",{key:0,class:k("menu-item menu-chider-item "+(f.current?"current":""))},[e("a",{class:"",onClick:q(W=>N(f),["prevent"])},[l[4]||(l[4]=e("i",{class:"nav-icon iconfont"},null,-1)),e("span",Be,S(f.authorityName),1)],8,Pe)],2)):d("",!0)],64))),256))])])):d("",!0)],2)):d("",!0)],64)):(t(),n(c,{key:1},[u.isShow?(t(),n("li",{key:0,class:k("menu-item "+(v.value[2].name==`${u.authoritySn}`?"current":""))},[e("a",{class:"menu-item-a",target:u.blank?"_blank":"",onClick:q(f=>N(u),["prevent"])},[e("span",Ue,S(u.authorityName),1)],8,Ee)],2)):d("",!0)],64))],64))),256)),l[5]||(l[5]=e("li",{style:{height:"80px"}},null,-1))])]),_:2},1024)):d("",!0)],64))),256)),e("div",{class:"menu-bar-btn ng-scope",id:"menu-bar-btn",onClick:l[0]||(l[0]=o=>a(r).childMenuShow=!a(r).childMenuShow)},l[6]||(l[6]=[le('<div class="menu-bar-inner" data-v-771663b5><div class="menu-bar-bg" data-v-771663b5></div><div class="product-navbar-collapse" data-v-771663b5><span class="icon-collapse-left iconfont" data-v-771663b5></span><span class="icon-collapse-right iconfont" data-v-771663b5></span></div></div>',1)]))],2)],2),e("div",{class:k(["body-menu-mask",{active:a(r).menuActive}]),onClick:l[1]||(l[1]=o=>a(r).menuActive=!a(r).menuActive)},null,2)],64)}}}),Fe=R(qe,[["__scopeId","data-v-771663b5"]]),je={class:"top-bar-left"},Re={class:"top-bar-item wap-show",style:{display:"none"}},Ke=["href"],Oe={key:0,class:"shop-tit"},Qe={key:0,class:"label"},We={key:1,class:"label green"},Ge={key:1},Xe={class:"top-bar-item top-bar-search-warp"},He={class:"top-bar-search"},Je={class:"search-menu-con"},Ye={class:"search-menu-list"},Ze=["onClick"],et={key:0,class:"empty"},tt={class:"top-bar-right"},st={class:"top-bar-item mr10"},nt={class:"auth-img"},at=["src"],ot={class:"top-bar-item openShop-btn"},lt=["href"],it={class:"top-bar-item top-bar-user",id:"dropdown-memu"},rt={class:"admin-user-warp"},ut={class:"top-bar-btn",href:"javascript:;"},ct={key:0,class:"admin-user-photo"},dt=["src"],pt=["src"],mt={key:1,class:"admin-user-photo"},ht=["src"],vt=["src"],_t={class:"admin-user-name"},ft={class:"dropdown-memu top-bar-memu"},gt={class:"entrance-list"},kt={class:"admin_exit"},yt=E({__name:"pageTopBar",setup(U){const{themeInfo:L}=K(),g=b(localStorage.getItem("adminType")),h=ee(),x=Z(),r=P(),p=b(""),T=b([]),v=b(!1),$=async V=>{try{const s=await ye({keyword:p.value});T.value=s,p.value&&(v.value=!0)}catch(s){H.error(s.message)}},A=V=>{v.value=!1,p.value="",T.value=[],h.push({path:"/"+V})},N=()=>{p.value==""&&(v.value=!1)},_=()=>{v.value=!1},{logout:l,updateUserInfo:m}=F(),o=j(()=>F().userInfo),i=j(()=>F().shopInfo);b(0);const u=async()=>{try{const V=await fe(),s=pe();m(),s.updateConfig(),r.mainMenu=await we(),me.success({message:"缓存已清除",description:"缓存清除后可刷新页面更新效果"})}catch(V){H.error(V.message)}},O=async()=>{l()},f=b(!1),Q=()=>{f.value=!0},W=()=>{f.value=!1};return te(()=>{x._getLicensed()}),(V,s)=>{const se=I("TigInput"),D=I("router-link"),ne=I("a-dropdown"),ae=I("el-dialog");return t(),n(c,null,[e("div",{class:k(["page-top",{"shop-admin":g.value==="merchant"}])},[e("div",{class:k(["page-top-warp",{dark:a(L).navTheme==="dark"}])},[e("div",je,[e("div",{class:"top-bar-item wap-show",onClick:s[0]||(s[0]=M=>a(r).menuActive=!a(r).menuActive)},s[3]||(s[3]=[e("span",{class:"open-menu-btn icon-zhankai iconfont"},null,-1)])),s[5]||(s[5]=e("div",{class:"top-bar-item wap-show"},[e("a",{class:"wap-refresh-btn icon-shuaxin iconfont",href:"javascript:;",onclick:"location.reload();"})],-1)),e("div",Re,[e("a",{class:"wap-openShop-btn icon-wangdianwaibao iconfont",href:a(J)("/"),target:"_blank"},null,8,Ke)]),g.value==="shop"?(t(),n("div",Oe,[e("h2",null," 当前店铺: "+S(i.value.shopTitle),1),i.value.status===0?(t(),n("div",Qe,S(i.value.statusText),1)):(t(),n("div",We,S(i.value.statusText),1))])):G((t(),n("div",Ge,[e("div",Xe,[e("div",He,[w(se,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=M=>p.value=M),style:{width:"300px"},placeholder:"在这里查找功能，一键直达","prefix-icon":a(ue),onInput:$,onBlur:N},null,8,["modelValue","prefix-icon"])])]),G(e("div",Je,[s[4]||(s[4]=e("div",{class:"search-menu-title"},"搜索结果",-1)),e("div",Ye,[(t(!0),n(c,null,z(T.value,M=>(t(),n("div",{class:"menu-item",onClick:Ct=>A(M.routeLink)},[e("p",null,S(M.authorityName),1)],8,Ze))),256)),T.value.length<1?(t(),n("div",et,"没有搜索到栏目！")):d("",!0)])],512),[[ce,v.value]])])),[[a(re),_]])]),e("div",tt,[e("div",st,[e("div",nt,[g.value!=="shop"?(t(),C(D,{key:0,to:{path:"/setting/licensed/index"}},{default:y(()=>[e("img",{src:a(de)(),style:{height:"25px","margin-top":"2px"}},null,8,at)]),_:1})):d("",!0)])]),w(_e),e("div",ot,[e("a",{class:"top-bar-btn",href:a(J)("/"),target:"_blank"},s[6]||(s[6]=[e("i",{class:"iconfont icon-guanli"},null,-1),e("span",null,"查看店铺",-1)]),8,lt)]),e("div",it,[w(ne,null,{overlay:y(()=>[e("div",ft,[e("div",gt,[w(D,{to:{path:"/authority/account_editing/index"}},{default:y(()=>s[8]||(s[8]=[e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-gerenshezhi",style:{"font-size":"22px"}}),e("span",null,"管理账号")],-1)])),_:1}),e("p",{class:"entrance",onClick:u},s[9]||(s[9]=[e("i",{class:"iconfont icon-qingchuhuancun",style:{"font-size":"22px"}},null,-1),e("span",null,"清除缓存",-1)])),g.value==="shop"?(t(),C(D,{key:0,to:{path:"/merchant_setting/shop_team"}},{default:y(()=>s[10]||(s[10]=[e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-quanxian",style:{"font-size":"22px"}}),e("span",null,"店铺设置")],-1)])),_:1})):(t(),C(D,{key:1,to:{path:"/setting/config/base"}},{default:y(()=>s[11]||(s[11]=[e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-quanxian",style:{"font-size":"22px"}}),e("span",null,"后台设置")],-1)])),_:1}))]),e("div",null,[e("div",kt,[g.value==="shop"?(t(),n(c,{key:0},[e("a",{onClick:Q},s[12]||(s[12]=[e("span",null,"切换店铺",-1)])),s[13]||(s[13]=e("span",{style:{color:"#f0f2f5"}},"｜",-1))],64)):d("",!0),e("a",{onClick:O},s[14]||(s[14]=[e("span",null,"退出登录",-1)]))])])])]),default:y(()=>[e("div",rt,[e("a",ut,[g.value!=="shop"?(t(),n("span",ct,[a(X)(String(o.value.avatar))=="def"?(t(),n("img",{key:0,src:a(Y)(o.value.avatar)},null,8,dt)):(t(),n("img",{key:1,src:a(B)(o.value.avatar)},null,8,pt))])):d("",!0),g.value=="shop"?(t(),n("span",mt,[a(X)(String(i.value.shopLogo))=="def"?(t(),n("img",{key:0,src:a(Y)(i.value.shopLogo)},null,8,ht)):(t(),n("img",{key:1,src:a(B)(i.value.shopLogo)},null,8,vt))])):d("",!0),e("div",_t,S(/^1[3-9]\d{9}$/.test(o.value.username)?o.value.username.replace(/(\d{3})\d{4}/,"$1****"):o.value.username),1),s[7]||(s[7]=e("i",{class:"iconfont icon-xiala"},null,-1))])])]),_:1})])])],2)],2),w(ae,{class:"page-top","show-close":!1,"z-index":12,modelValue:f.value,"onUpdate:modelValue":s[2]||(s[2]=M=>f.value=M),width:"500px"},{default:y(()=>[f.value?(t(),C(be,{key:0,onClosePopup:W,isIndex:!0,username:o.value.username},null,8,["username"])):d("",!0)]),_:1},8,["modelValue"])],64)}}}),bt=R(yt,[["__scopeId","data-v-29da7c77"]]),wt={class:"page-grid-content"},St=E({__name:"pageContainer",setup(U){const L=he(),{themeInfo:g}=K();b(localStorage.getItem("adminType"));const h=P();return(x,r)=>{const p=I("router-view");return t(),n(c,null,[r[0]||(r[0]=e("div",{class:"body-menu-mask"},null,-1)),e("div",{class:k(["main-warp",[a(h).childMenuShow?"child-menu-show":"child-menu-hide"]])},[e("div",wt,[!x.$route.meta.is404&&a(g).isMultiLabel?(t(),C(ge,{key:0})):d("",!0),x.$route.meta.is404?d("",!0):(t(),C(Se,{key:1})),(t(),C(p,{key:a(L).routerKey})),x.$route.meta.is404?d("",!0):(t(),C($e,{key:2}))])],2)],64)}}}),$t=R(St,[["__scopeId","data-v-005f4a6c"]]),jt=E({__name:"View",setup(U){return(L,g)=>{const h=I("router-view");return t(),n(c,null,[w(bt),w(Fe),w($t,null,{default:y(()=>[w(h)]),_:1})],64)}}});export{jt as default};
