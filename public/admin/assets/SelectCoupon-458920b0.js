/* empty css             */import{d as j,m as S,u as A,j as p,I as E,x as H,r as a,o as g,c as v,e as n,b as o,w as c,H as K,n as L,h as w,f as q,K as G,p as J,i as O,_ as Q}from"./index-7c2d2aef.js";/* empty css                                                                    */import{P as W}from"./Pagination-8eb7b6b1.js";import{u as X}from"./config-9548fa9b.js";import{g as Y}from"./coupon-4c7a2f76.js";import"./config-e2aa16d1.js";const Z=i=>(J("data-v-9a51c7d5"),i=i(),O(),i),$={class:"container",style:{position:"relative",height:"100%"}},ee={class:"content_wrapper"},te={class:"",style:{position:"absolute",top:"0",bottom:"0","overflow-y":"auto",width:"100%"}},oe={class:"list-table-tool lyecs-search-warp",style:{position:"absolute",top:"0"}},le={class:"list-table-tool-row",style:{"margin-bottom":"5px"}},se={class:"list-table-tool-col"},ae=Z(()=>n("div",{class:"list-table-tool-col"},null,-1)),ne={style:{"padding-right":"15px","box-sizing":"border-box"}},ie={class:"empty-warp"},ce={key:0,class:"empty-bg"},pe={key:0,class:"pagination-con",style:{position:"absolute",bottom:"0","justify-content":"right",display:"flex",width:"100%",margin:"0"}},re=j({__name:"SelectCoupon",props:S({selected_ids:{type:Array,default:[]},isMultiple:{type:Boolean,default:!0}},{linkSelectData:{},linkSelectDataModifiers:{}}),emits:S(["submitCallback","okType"],["update:linkSelectData"]),setup(i,{expose:x,emit:C}){const m=i,z=A(i,"linkSelectData"),d=C;d("okType",!1),p(1);const r=p(!0),l=p([]),_=p(0),M=X(),y=p([]),s=E({page:1,size:M.get("page_size"),sort_field:"",sort_order:"",keyword:""}),f=async()=>{r.value=!0;try{const t=await Y({...s});y.value=t.filter_result,_.value=t.total}catch(t){G.error(t.message)}finally{r.value=!1}};H(()=>{f()});const h=t=>{f()},V=t=>{m.isMultiple&&(l.value=t.map(e=>e.coupon_id),d("okType",l.value.length>0))},b=p(),I=(t,e)=>{if(!m.isMultiple){if(b.value.clearSelection(),t.length==0){l.value=[];return}b.value.toggleRowSelection(e,!0),l.value.length=0,l.value.push(e.coupon_id),d("okType",l.value.length>0),z.value={path:"coupon",label:"优惠券",name:e.coupon_name,id:e.coupon_id,data:{id:e.coupon_id}}}},D=t=>!m.selected_ids.includes(t.coupon_id);return x({onFormSubmit:()=>{console.log(l.value),d("submitCallback",l.value)}}),(t,e)=>{const T=a("el-input"),B=a("el-button"),F=a("el-space"),N=a("el-form"),k=a("el-table-column"),R=a("el-table"),P=a("a-spin"),U=a("perfect-scrollbar");return g(),v("div",$,[n("div",ee,[n("div",te,[n("div",oe,[o(N,{model:s,name:"form",onFinish:h},{default:c(()=>[n("div",le,[n("div",se,[o(F,null,{default:c(()=>[o(T,{modelValue:s.keyword,"onUpdate:modelValue":e[0]||(e[0]=u=>s.keyword=u),placeholder:"请输入搜索优惠券"},null,8,["modelValue"]),o(B,{onClick:h},{default:c(()=>[K("搜索")]),_:1})]),_:1})]),ae])]),_:1},8,["model"])]),o(U,{class:"table-container",style:{position:"absolute",top:"50px",bottom:"50px","overflow-y":"auto",width:"100%"}},{default:c(()=>[o(P,{spinning:r.value},{default:c(()=>[n("div",ne,[o(R,{class:L([i.isMultiple?"":"hide-checkbox","result-table"]),ref_key:"tableRef",ref:b,data:y.value,"row-key":"coupon_id",onSelect:I,onSelectionChange:V,total:_.value,loading:r.value},{empty:c(()=>[n("div",ie,[r.value?w("",!0):(g(),v("div",ce,"暂无数据"))])]),default:c(()=>[o(k,{selectable:D,type:"selection",width:"32"}),o(k,{label:"优惠券名称",prop:"coupon_name"})]),_:1},8,["class","data","total","loading"])])]),_:1},8,["spinning"])]),_:1}),_.value>0?(g(),v("div",pe,[o(q(W),{page:s.page,"onUpdate:page":e[1]||(e[1]=u=>s.page=u),size:s.size,"onUpdate:size":e[2]||(e[2]=u=>s.size=u),total:_.value,onCallback:f},null,8,["page","size","total"])])):w("",!0)])])])}}});const ye=Q(re,[["__scopeId","data-v-9a51c7d5"]]);export{ye as default};
