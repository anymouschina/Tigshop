import{d as q,i as d,C as L,s as U,q as j,r,c as _,o as c,e as f,j as E,f as P,b as a,w as o,a3 as M,E as t,D as s,F as V,g as $,a4 as h,I as b}from"./index-DrbzVNl6.js";import{a as z,u as G}from"./orderInvoice-BMK9K2jn.js";import"./index-CeQDmMxd.js";import{_ as H}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const J={class:"container"},K={class:"content_wrapper"},Q={class:"lyecs-form-table"},ae=q({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(T,{expose:x,emit:B}){const m=B,p=T,v=d(!0),g=L().currentRoute.value.query,w=d(p.isDialog?p.act:String(g.act)),k=d(p.isDialog?p.id:Number(g.id)),D=w.value==="add"?"create":"update",C=U(),e=d({}),R=async()=>{try{const u=await z(w.value,{id:k.value});Object.assign(e.value,u)}catch(u){b.error(u.message),m("close")}finally{v.value=!1}};j(()=>{R()});const N=async()=>{await C.value.validate();try{m("update:confirmLoading",!0);const u=await G(D,{id:k.value,...e.value});m("submitCallback",u),b.success("操作成功")}catch(u){b.error(u.message)}finally{m("update:confirmLoading",!1)}};return x({onFormSubmit:()=>{N()}}),(u,n)=>{const l=r("el-form-item"),y=r("el-radio"),S=r("el-radio-group"),I=r("TigInput"),A=r("el-button"),O=r("el-form"),F=r("a-spin");return c(),_("div",J,[f("div",K,[f("div",Q,[v.value?P("",!0):(c(),E(O,{key:0,ref_key:"formRef",ref:C,model:e.value,"label-width":"auto"},{default:o(()=>[a(l,{label:"申请会员",prop:"username"},{default:o(()=>[t(s(e.value.username||"--"),1)]),_:1}),a(l,{label:"发票类型",prop:"invoiceTypeName"},{default:o(()=>[t(s(e.value.invoiceTypeName||"--"),1)]),_:1}),e.value.invoiceType===2&&e.value.userInvoice?(c(),_(V,{key:0},[a(l,{label:"增票资质状态",prop:"companyName"},{default:o(()=>[a($(H),{showOnOk:!1,params:{act:"detail",id:e.value.userInvoice.invoiceId},isDrawer:"",path:"finance/userInvoice/Info",title:"编辑增票资质申请",width:"600px"},{default:o(()=>[t(s(e.value.userInvoice.statusName)+" ",1),n[3]||(n[3]=f("a",{class:"btn-link"},"[查看]",-1))]),_:1},8,["params"])]),_:1}),a(l,{label:"公司名称",prop:"companyName"},{default:o(()=>[t(s(e.value.companyName||"--"),1)]),_:1}),a(l,{label:"纳税人识别码",prop:"companyCode"},{default:o(()=>[t(s(e.value.companyCode||"--"),1)]),_:1}),a(l,{label:"注册地址",prop:"companyAddress"},{default:o(()=>[t(s(e.value.companyAddress||"--"),1)]),_:1}),a(l,{label:"注册电话",prop:"companyPhone"},{default:o(()=>[t(s(e.value.companyPhone||"--"),1)]),_:1}),a(l,{label:"开户银行",prop:"companyBank"},{default:o(()=>[t(s(e.value.companyBank||"--"),1)]),_:1}),a(l,{label:"银行账户",prop:"companyAccount"},{default:o(()=>[t(s(e.value.companyAccount||"--"),1)]),_:1})],64)):(c(),_(V,{key:1},[a(l,{label:"发票抬头",prop:"titleType"},{default:o(()=>[t(s(e.value.titleType==1?"个人":"企业"),1)]),_:1}),a(l,{label:"企业税号",prop:"companyCode"},{default:o(()=>[t(s(e.value.companyCode||"--"),1)]),_:1}),a(l,{label:"发票内容",prop:"invoiceContent"},{default:o(()=>[t(s(e.value.invoiceContent||"--"),1)]),_:1})],64)),a(l,{label:"收票人姓名",prop:"companyName"},{default:o(()=>[t(s(e.value.companyName||"--"),1)]),_:1}),a(l,{label:"收票人电话",prop:"mobile"},{default:o(()=>[t(s(e.value.mobile||"--"),1)]),_:1}),a(l,{label:"收票人邮箱",prop:"email"},{default:o(()=>[t(s(e.value.email||"--"),1)]),_:1}),a(l,{label:"收票人地址",prop:"companyAddress"},{default:o(()=>[t(s(e.value.companyAddress||e.value.userAddress),1)]),_:1}),a(l,{label:"申请状态",prop:"status"},{default:o(()=>[a(S,{modelValue:e.value.status,"onUpdate:modelValue":n[0]||(n[0]=i=>e.value.status=i)},{default:o(()=>[a(y,{value:0},{default:o(()=>n[4]||(n[4]=[t("待处理")])),_:1}),a(y,{value:1},{default:o(()=>n[5]||(n[5]=[t("已开")])),_:1}),a(y,{value:2},{default:o(()=>n[6]||(n[6]=[t("失败/作废")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(l,{label:"发票金额",prop:"amount"},{default:o(()=>[a(I,{classType:"tig-form-input",type:"decimal",modelValue:e.value.amount,"onUpdate:modelValue":n[1]||(n[1]=i=>e.value.amount=i)},null,8,["modelValue"])]),_:1}),a(l,{label:"申请未通过原因",prop:"applyReply"},{default:o(()=>[a(I,{classType:"tig-form-input",modelValue:e.value.applyReply,"onUpdate:modelValue":n[2]||(n[2]=i=>e.value.applyReply=i),row:2,type:"textarea"},null,8,["modelValue"]),n[7]||(n[7]=f("div",{class:"extra"},"若通过可不写",-1))]),_:1}),M(a(l,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[a(A,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:N},{default:o(()=>n[8]||(n[8]=[t("提交")])),_:1},512)]),_:1},512),[[h,!p.isDialog]])]),_:1},8,["model"])),a(F,{spinning:v.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ae as default};
