import{d as T,j as v,I as F,x as O,r,o as u,c as g,e as t,b as e,w as s,f as d,h as b,K as y,L as j,H as f,G as x,k as E}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";/* empty css                                               */import"./zh-cn-8c8b9709.js";import{T as G}from"./Tag-e65e7405.js";import{_ as A}from"./Switch.vue_vue_type_script_setup_true_lang-95245cd7.js";import{_ as H}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as M}from"./Pagination-8eb7b6b1.js";import{u as J}from"./config-9548fa9b.js";import{g as Q,u as S,d as R,b as W}from"./areaCode-9247cea1.js";import{_ as z}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const X={class:"container"},Y={class:"content_wrapper"},Z={class:"lyecs-table-list-warp"},ee={class:"list-table-tool lyecs-search-warp"},te={class:"advanced-search-warp list-table-tool-row"},ae={class:"simple-form-warp"},se={class:"simple-form-field"},oe={class:"form-group"},le={class:"control-container"},ie=t("span",{class:"iconfont icon-chakan1"},null,-1),ne={class:"simple-form-field"},de={class:"form-group"},re={class:"control-container"},ce={class:"simple-form-field"},pe={class:"form-group"},_e={class:"control-container"},me={key:0},ue={class:"table-container"},fe={class:"flex flex-align-center"},he=t("a",{class:"btn-link"},"编辑",-1),ve={class:"empty-warp"},ge={key:0,class:"empty-bg"},be={key:0,class:"pagination-con"},$e=T({__name:"List",props:{promotion_type:{type:Number,default:1}},setup(ke,{expose:U}){const V=J(),C=v(),_=v(!0),h=v(0),m=v([]),n=F({page:1,size:V.get("page_size"),sort_field:"",sort_order:"",name:""}),l=async()=>{_.value=!0;try{const i=await Q({...n});C.value=i.filter_result,h.value=i.total}catch(i){y.error(i.message)}finally{_.value=!1}};O(()=>{l()});const w=()=>{l()},q=({prop:i,order:o})=>{n.sort_field=i,n.sort_order=o=="ascending"?"asc":o=="descending"?"desc":"",l()},B=async(i,o)=>{try{const c=await W(i,{ids:m.value,value:o});y.success(c.message),l()}catch(c){y.error(c.message)}},N=i=>{m.value=i.map(o=>o.id)};return U({loadFilter:l}),(i,o)=>{const c=r("el-button"),D=r("el-input"),I=r("el-popconfirm"),$=r("el-form"),p=r("el-table-column"),K=r("el-divider"),L=r("el-table"),P=r("a-spin");return u(),g("div",X,[t("div",Y,[t("div",Z,[t("div",ee,[e($,{model:n},{default:s(()=>[t("div",te,[t("div",ae,[t("div",se,[t("div",oe,[t("div",le,[e(D,{modelValue:n.name,"onUpdate:modelValue":o[0]||(o[0]=a=>n.name=a),name:"name",placeholder:"请输入区号地区名称",onKeyup:j(w,["enter"])},{append:s(()=>[e(c,{onClick:w},{default:s(()=>[ie]),_:1})]),_:1},8,["modelValue"])])])]),t("div",ne,[t("div",de,[t("div",re,[e(d(z),{params:{act:"add"},isDrawer:"",path:"setting/multilingual/areaCode/Info",title:"添加区号",width:"600px",onOkCallback:l},{default:s(()=>[e(c,{type:"primary"},{default:s(()=>[f("添加区号")]),_:1})]),_:1})])])]),t("div",ce,[t("div",pe,[t("div",_e,[e(I,{title:"您确认要批量删除所选数据吗？",onConfirm:o[1]||(o[1]=a=>B("del"))},{reference:s(()=>[e(c,{disabled:m.value.length===0},{default:s(()=>[f("批量删除")]),_:1},8,["disabled"])]),_:1}),m.value.length>0?(u(),g("span",me,[f(" 已选择："),t("b",null,x(m.value.length),1),f(" 项 ")])):b("",!0)])])])])])]),_:1},8,["model"])]),t("div",ue,[e(P,{spinning:_.value},{default:s(()=>[e(L,{data:C.value,"row-key":"id",onSelectionChange:N,total:h.value,onSortChange:q,loading:_.value},{empty:s(()=>[t("div",ve,[_.value?b("",!0):(u(),g("div",ge,"暂无数据"))])]),default:s(()=>[e(p,{type:"selection",width:"32"}),e(p,{label:"区号地区",prop:"name",width:150},{default:s(({row:a})=>[t("div",fe,[a.is_default==1?(u(),E(d(G),{key:0,transparent:!0,text:"默认"})):b("",!0),t("div",null,x(a.name||"--"),1)])]),_:1}),e(p,{label:"区号",prop:"code",width:"200"}),e(p,{label:"是否默认",prop:"is_default"},{default:s(({row:a})=>[e(d(A),{checked:a.is_default,"onUpdate:checked":k=>a.is_default=k,requestApi:d(S),onCallback:l,params:{id:a.id,field:"is_default"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),e(p,{label:"是否启用",prop:"is_available"},{default:s(({row:a})=>[e(d(A),{checked:a.is_available,"onUpdate:checked":k=>a.is_available=k,requestApi:d(S),onCallback:l,params:{id:a.id,field:"is_available"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),e(p,{label:"操作",fixed:"right",width:"120"},{default:s(({row:a})=>[e(d(z),{isDrawer:"",onOkCallback:l,title:"编辑币种",width:"800px",path:"setting/multilingual/areaCode/Info",params:{act:"detail",id:a.id}},{default:s(()=>[he]),_:2},1032,["params"]),e(K,{direction:"vertical"}),e(d(H),{onAfterDelete:l,requestApi:d(R),params:{id:a.id}},{default:s(()=>[f("删除")]),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),h.value>0?(u(),g("div",be,[e(d(M),{page:n.page,"onUpdate:page":o[2]||(o[2]=a=>n.page=a),size:n.size,"onUpdate:size":o[3]||(o[3]=a=>n.size=a),total:h.value,onCallback:l},null,8,["page","size","total"])])):b("",!0)])])])])}}});export{$e as default};
