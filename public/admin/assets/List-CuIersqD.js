import{d as N,i as f,G as O,q as $,c as v,e as t,b as s,w as o,L as F,g as i,f as k,E as _,D as V,I as w,r as p,o as g}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{P as E}from"./PopFormElm-DSof3F4x.js";import{_ as K}from"./Switch.vue_vue_type_script_setup_true_lang-CKSPWIQL.js";import{_ as G}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as M}from"./Pagination-yOfjsBuR.js";import{u as T}from"./config-DNllFJyR.js";import{g as j,b as H,u as U,d as J}from"./suppliers-C_pM6L3X.js";import{_ as C}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const Q={class:"container"},R={class:"content_wrapper"},W={class:"lyecs-table-list-warp"},X={class:"list-table-tool lyecs-search-warp"},Y={class:"advanced-search-warp list-table-tool-row"},Z={class:"simple-form-warp"},ee={class:"simple-form-field"},te={class:"form-group"},se={class:"control-container"},ae={class:"simple-form-field"},oe={class:"form-group"},le={class:"control-container"},ie={class:"simple-form-field"},ne={class:"form-group"},re={class:"control-container"},pe={key:0},de={class:"table-container"},ce={class:"empty-warp"},ue={key:0,class:"empty-bg"},_e={key:0,class:"pagination-con"},Ue=N({__name:"List",setup(me){const q=T(),S=f([]),c=f(!0),m=f(0),u=f([]),n=O({page:1,size:q.get("page_size"),sort_field:"",sort_order:"",keyword:""}),r=async()=>{c.value=!0;try{const l=await j({...n});S.value=l.filter_result,m.value=l.total}catch(l){w.error(l.message)}finally{c.value=!1}};$(()=>{r()});const h=()=>{r()},z=({prop:l,order:e})=>{n.sort_field=l,n.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",r()},A=async l=>{try{const e=await H(l,{ids:u.value});w.success(e.message),r()}catch(e){w.error(e.message)}},D=l=>{u.value=l.map(e=>e.suppliers_id)};return(l,e)=>{const b=p("el-button"),P=p("el-input"),B=p("el-popconfirm"),d=p("el-table-column"),x=p("el-divider"),I=p("el-table"),L=p("a-spin");return g(),v("div",Q,[t("div",R,[t("div",W,[t("div",X,[e[9]||(e[9]=t("div",{class:"notice-warp"},[t("p",null,"- 添加供应商后，您可以在商品编辑中，设置商品所属供应商"),t("p",null,"- 供应商可通过其管理员账号，登录管理员后台，权限默认为处理订单和退货"),t("p",null,"- 供应商只能看到有自己所属商品的订单，且只能对其所属商品进行发货操作")],-1)),t("div",Y,[t("div",Z,[t("div",ee,[t("div",te,[t("div",se,[s(P,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>n.keyword=a),name:"keyword",placeholder:"输入关键词",onKeyup:F(h,["enter"]),clearable:"",onClear:h},{append:o(()=>[s(b,{onClick:h},{default:o(()=>e[4]||(e[4]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",ae,[t("div",oe,[t("div",le,[s(i(C),{params:{act:"add"},isDrawer:"",path:"authority/suppliers/Info",title:"添加供应商",width:"600px",onOkCallback:r},{default:o(()=>[s(b,{type:"primary"},{default:o(()=>e[5]||(e[5]=[_("添加供应商")])),_:1})]),_:1})])])]),t("div",ie,[t("div",ne,[t("div",re,[s(B,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=a=>A("del"))},{reference:o(()=>[s(b,{disabled:u.value.length===0},{default:o(()=>e[6]||(e[6]=[_("批量删除")])),_:1},8,["disabled"])]),_:1}),u.value.length>0?(g(),v("span",pe,[e[7]||(e[7]=_(" 已选择：")),t("b",null,V(u.value.length),1),e[8]||(e[8]=_(" 项 "))])):k("",!0)])])])])])]),t("div",de,[s(L,{spinning:c.value},{default:o(()=>[s(I,{data:S.value,loading:c.value,total:m.value,"row-key":"suppliers_id",onSelectionChange:D,onSortChange:z},{empty:o(()=>[t("div",ce,[c.value?k("",!0):(g(),v("div",ue,"暂无数据"))])]),default:o(()=>[s(d,{type:"selection",width:"32"}),s(d,{label:"供应商名称",width:"200"},{default:o(({row:a})=>[s(i(E),{"org-value":a.suppliers_name,"onUpdate:orgValue":y=>a.suppliers_name=y,max:10,params:{id:a.suppliers_id,field:"suppliers_name"},requestApi:i(U),label:"权限组名称",type:"input"},{default:o(()=>[t("div",null,V(a.suppliers_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),s(d,{label:"负责人姓名",prop:"contact_name"}),s(d,{label:"负责人联系方式",prop:"contact_phone"}),s(d,{label:"供应商状态"},{default:o(({row:a})=>[s(i(K),{checked:a.is_check,"onUpdate:checked":y=>a.is_check=y,params:{id:a.suppliers_id,field:"is_check"},requestApi:i(U)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),s(d,{width:180,fixed:"right",label:"操作"},{default:o(({row:a})=>[s(i(C),{params:{act:"detail",id:a.suppliers_id},isDrawer:"",path:"authority/suppliers/Info",title:"编辑供应商",width:"600px",onOkCallback:r},{default:o(()=>e[10]||(e[10]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),s(x,{direction:"vertical"}),s(i(C),{params:{act:"suppliers",id:a.suppliers_id},showOnOk:!1,isDrawer:"",path:"authority/adminUser/List",title:a.suppliers_name+" - 账号管理",width:"1000px"},{default:o(()=>e[11]||(e[11]=[t("a",{class:"btn-link"},"账号管理",-1)])),_:2},1032,["params","title"]),s(x,{direction:"vertical"}),s(i(G),{params:{id:a.suppliers_id},requestApi:i(J),onAfterDelete:r},{default:o(()=>e[12]||(e[12]=[_("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),m.value>0?(g(),v("div",_e,[s(i(M),{page:n.page,"onUpdate:page":e[2]||(e[2]=a=>n.page=a),size:n.size,"onUpdate:size":e[3]||(e[3]=a=>n.size=a),total:m.value,onCallback:r},null,8,["page","size","total"])])):k("",!0)])])])])}}});export{Ue as default};
