/* empty css             */import{d as te,j as p,I as T,x as oe,r as i,o as u,c as f,e as l,b as e,w as o,f as h,h as b,K as U,H as n,G as _,ba as le,p as ae,i as se,_ as ne}from"./index-7c2d2aef.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import{p as q}from"./format-4e0206d3.js";import{u as de}from"./config-9548fa9b.js";/* empty css                                                                    */import{P as ie}from"./Pagination-8eb7b6b1.js";/* empty css                                                                  *//* empty css                                                                              */import"./region-e0d291a6.js";import{S as re}from"./SelectTimeInterval-7da287f8.js";import"./shopProductCategory-792e0c23.js";import{f as v}from"./time-290942a2.js";import{g as x}from"./util-1ee03ed8.js";import{a as _e,b as ce}from"./performanceSettlement-21bebfcb.js";import{r as me}from"./export-59d12e73.js";import{_ as pe}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";import"./region-05802f67.js";const S=Y=>(ae("data-v-0ed3c1e9"),Y=Y(),se(),Y),ue={class:"container"},fe={class:"content_wrapper"},ve={class:"lyecs-table-list-warp"},ge={class:"list-table-tool lyecs-search-warp"},he={class:"advanced-search-warp list-table-tool-row"},be={class:"simple-form-warp"},ye={class:"simple-form-field mr10"},we={class:"form-group"},xe=S(()=>l("label",{class:"control-label"},[l("span",null,"订单编号：")],-1)),Ye={class:"control-container"},De={class:"simple-form-field"},Ve={class:"form-group"},ke=S(()=>l("label",{class:"control-label"},[l("span",null,"筛选时间：")],-1)),Ce={class:"control-container flex flex-align-center"},Se={class:"simple-form-field"},Me={class:"form-group"},Ie={class:"mr10"},Ue={class:"simple-form-field"},ze={class:"form-group"},$e={key:0,class:"simple-form-field"},Ee={class:"form-group"},Oe=S(()=>l("label",{class:"control-label"},[l("span",null,"结算状态：")],-1)),Le={class:"control-container"},Ne={class:"simple-form-field"},Pe={style:{"padding-top":"30px"}},Be={class:"extra"},Te={key:0},qe={key:1},Fe={class:"dialog-footer"},je={class:"table-container"},Ge={class:"flex flex-align-center"},He=S(()=>l("p",null,"成交金额",-1)),Ke={class:"empty-warp"},We={key:0,class:"empty-bg"},Ae={key:0,class:"pagination-con"},Je={key:0,class:"selected-action-warp"},Qe={class:"selected-action"},Re=te({__name:"List",setup(Y){const z=de(),$=p([]),D=p(!0),V=p(0);p(0);const M=p([]),s=T({page:1,size:z.pageSize,sort_field:"",sort_order:"",order_sn:"",order_time_start:"",order_time_end:"",status:-1,time_type:1}),k=p(!1),g=T({range:0,is_export:1}),F=()=>{s.order_time_start===""&&s.order_time_end===""?U.error("请选择时间范围"):k.value=!0},j=async()=>{try{const d=await ce({...s,...g});me(d,"分销员业绩结算表")}catch(d){U.error(d.message)}},I=p(-1),E=d=>{if(d===-1){I.value=d;return}s.order_time_start=v(new Date,"YYYY-MM-DD"),d===0&&(s.order_time_end=v(new Date,"YYYY-MM-DD")),d===1&&(s.order_time_start=v(x(1,"sub"),"YYYY-MM-DD"),s.order_time_end=v(x(1,"sub"),"YYYY-MM-DD")),d===2&&(s.order_time_end=v(x(7,"add"),"YYYY-MM-DD")),d===3&&(s.order_time_end=v(x(30,"add"),"YYYY-MM-DD")),d===4&&(s.order_time_end=v(x(180,"add"),"YYYY-MM-DD"))},G=(d,a)=>{let C="--",c=1;return d.commission_data&&(c=d.commission_type,C=`${c==3?"":"比例"}${a}${c==3?z.get("amount_unit"):"%"}（按实付金额计算）`),C},y=async()=>{D.value=!0;try{const d=await _e({...s});$.value=d.filter_result,V.value=d.total}catch(d){U.error(d.message)}finally{D.value=!1}};oe(()=>{y()});const H=()=>{y()},K=({prop:d,order:a})=>{s.sort_field=d,s.sort_order=a=="ascending"?"asc":a=="descending"?"desc":"",y()},W=d=>{M.value=d.map(a=>a.product_id)};return(d,a)=>{const C=i("el-input"),c=i("el-option"),O=i("el-select"),w=i("el-radio-button"),L=i("el-radio-group"),m=i("el-button"),N=i("el-form"),P=i("el-radio"),A=i("el-form-item"),J=i("el-dialog"),r=i("el-table-column"),Q=i("el-icon"),R=i("el-tooltip"),X=i("el-table"),Z=i("a-spin"),ee=i("el-space");return u(),f("div",ue,[l("div",fe,[l("div",ve,[l("div",ge,[e(N,{model:s,name:"form"},{default:o(()=>[l("div",he,[l("div",be,[l("div",ye,[l("div",we,[xe,l("div",Ye,[e(C,{modelValue:s.order_sn,"onUpdate:modelValue":a[0]||(a[0]=t=>s.order_sn=t),name:"order_sn",placeholder:"请输入订单编号"},null,8,["modelValue"])])])]),l("div",De,[l("div",Ve,[ke,l("div",Ce,[e(O,{modelValue:s.time_type,"onUpdate:modelValue":a[1]||(a[1]=t=>s.time_type=t),placeholder:"请选择时间",style:{width:"100px","margin-right":"10px"}},{default:o(()=>[e(c,{label:"下单时间",value:1}),e(c,{label:"退款时间",value:2})]),_:1},8,["modelValue"])])])]),l("div",Se,[l("div",Me,[l("div",Ie,[e(h(re),{type:"date","start-date":s.order_time_start,"onUpdate:startDate":a[2]||(a[2]=t=>s.order_time_start=t),"end-date":s.order_time_end,"onUpdate:endDate":a[3]||(a[3]=t=>s.order_time_end=t),onCallback:a[4]||(a[4]=t=>E(-1))},null,8,["start-date","end-date"])])])]),l("div",Ue,[l("div",ze,[e(L,{class:"itemWidth mr10",modelValue:I.value,"onUpdate:modelValue":a[5]||(a[5]=t=>I.value=t),onChange:E},{default:o(()=>[e(w,{value:0},{default:o(()=>[n("今天")]),_:1}),e(w,{value:1},{default:o(()=>[n("昨天")]),_:1}),e(w,{value:2},{default:o(()=>[n("近7天")]),_:1}),e(w,{value:3},{default:o(()=>[n("近30天")]),_:1}),e(w,{value:4},{default:o(()=>[n("近半年")]),_:1})]),_:1},8,["modelValue"])])]),s.time_type===1?(u(),f("div",$e,[l("div",Ee,[Oe,l("div",Le,[e(O,{modelValue:s.status,"onUpdate:modelValue":a[6]||(a[6]=t=>s.status=t),placeholder:"Select",style:{width:"200px","margin-right":"10px"}},{default:o(()=>[e(c,{label:"全部",value:-1}),e(c,{label:"未结算",value:0}),e(c,{label:"已结算",value:1})]),_:1},8,["modelValue"])])])])):b("",!0),l("div",Ne,[e(m,{type:"primary",onClick:H},{default:o(()=>[n("搜索")]),_:1}),e(m,{onClick:F},{default:o(()=>[n("导出")]),_:1})])])])]),_:1},8,["model"])]),e(J,{modelValue:k.value,"onUpdate:modelValue":a[9]||(a[9]=t=>k.value=t),title:"导出数据",width:"500",top:"30vh","append-to-body":"",style:{zIndex:2e3}},{footer:o(()=>[l("div",Fe,[e(m,{onClick:a[8]||(a[8]=t=>k.value=!1)},{default:o(()=>[n("取消")]),_:1}),e(m,{type:"primary",onClick:j},{default:o(()=>[n(" 导出 ")]),_:1})])]),default:o(()=>[l("div",Pe,[e(N,{model:g,"label-width":"100px"},{default:o(()=>[e(A,{label:"导出维度："},{default:o(()=>[l("div",null,[e(L,{modelValue:g.range,"onUpdate:modelValue":a[7]||(a[7]=t=>g.range=t)},{default:o(()=>[e(P,{value:0},{default:o(()=>[n("商品维度")]),_:1}),e(P,{value:1},{default:o(()=>[n("订单维度")]),_:1})]),_:1},8,["modelValue"]),l("div",Be,[g.range==0?(u(),f("div",Te,"以商品维度导出，每个商品展示一行")):b("",!0),g.range==1?(u(),f("div",qe,"以订单维度导出，每个订单展示一行")):b("",!0)])])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue"]),l("div",je,[e(Z,{spinning:D.value},{default:o(()=>[e(X,{data:$.value,total:V.value,"row-key":"product_id",onSelectionChange:W,onSortChange:K},{empty:o(()=>[l("div",Ke,[D.value?b("",!0):(u(),f("div",We,"暂无数据"))])]),default:o(()=>[e(r,{type:"selection",width:"32",fixed:"left"}),e(r,{label:"订单号",prop:"product_id",width:180,fixed:"left"},{default:o(({row:t})=>[e(h(pe),{params:{act:"detail",id:t.order_user_info.order_id},showClose:!1,showOnOk:!1,title:"订单详情 "+t.order_user_info.order_sn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:y},{default:o(()=>[e(m,{link:"",type:"primary"},{default:o(()=>[n(_(t.order_user_info.order_sn),1)]),_:2},1024)]),_:2},1032,["params","title"])]),_:1}),e(r,{prop:"order_amount",width:100},{header:o(()=>[l("div",Ge,[He,e(R,{placement:"bottom-start",effect:"light"},{content:o(()=>[n(" 不计运费、税费和附加费 ")]),default:o(()=>[e(Q,{size:"16",color:"#c8c9cc",style:{"margin-left":"5px"}},{default:o(()=>[e(h(le))]),_:1})]),_:1})])]),default:o(({row:t})=>[n(_(h(q)(t.userOrderItem.total_product_money)),1)]),_:1}),e(r,{label:"分销员",width:140},{default:o(({row:t})=>[n(_(t.salesman.base_user_info.nickname||t.salesman.base_user_info.username),1)]),_:1}),e(r,{label:"客户",width:140},{default:o(({row:t})=>[n(_(t.order_user_info.user.nickname),1)]),_:1}),e(r,{label:"收益类型",width:140},{default:o(({row:t})=>[n(" 商品佣金 ")]),_:1}),e(r,{label:"收益组成",width:240},{default:o(({row:t})=>[n(_(G(t.salesman_product_data,t.profit_composition)),1)]),_:1}),e(r,{label:"所属分组",width:240},{default:o(({row:t})=>[n(_(t.salesman.group_info.group_name),1)]),_:1}),e(r,{label:"收益",width:240},{default:o(({row:t})=>[n(_(h(q)(t.amount)),1)]),_:1}),e(r,{label:"结算方式",width:140},{default:o(({row:t})=>{var B;return[n(_(((B=t.salesman_settlement_data)==null?void 0:B.settlement_type)==1?"系统结算":"人工结算"),1)]}),_:1}),e(r,{label:"结算状态",width:140,fixed:"right"},{default:o(({row:t})=>[n(_(t.status_text),1)]),_:1}),e(r,{label:"退款时间",width:150,fixed:"right"},{default:o(({row:t})=>[n(_(t.refund_time||"--"),1)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),V.value>0?(u(),f("div",Ae,[e(h(ie),{page:s.page,"onUpdate:page":a[10]||(a[10]=t=>s.page=t),size:s.size,"onUpdate:size":a[11]||(a[11]=t=>s.size=t),total:V.value,onCallback:y},null,8,["page","size","total"])])):b("",!0)]),M.value.length>0?(u(),f("div",Je,[l("div",Qe,[e(ee,null,{default:o(()=>[l("span",null,[n("已选择："),l("b",null,_(M.value.length),1),n(" 项")]),e(m,null,{default:o(()=>[n("设置等级")]),_:1}),e(m,null,{default:o(()=>[n("分组")]),_:1}),e(m,null,{default:o(()=>[n("清退")]),_:1})]),_:1})])])):b("",!0)])])])}}});const bt=ne(Re,[["__scopeId","data-v-0ed3c1e9"]]);export{bt as default};
