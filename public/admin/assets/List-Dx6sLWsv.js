import{d as N,i as p,G as q,q as A,c as f,e,b as o,w as a,M as B,f as b,g as d,I as L,r,o as g,E as w,D as M,_ as U}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{_ as E}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as F}from"./Pagination-yOfjsBuR.js";import{i as O}from"./format-DFT-VJzO.js";import{g as $,d as T}from"./productGift-D8jyyss5.js";import{u as k}from"./config-DNllFJyR.js";import{_ as y}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const j={class:"container"},H={class:"content_wrapper"},J={class:"lyecs-table-list-warp"},K={class:"list-table-tool lyecs-search-warp"},Q={class:"advanced-search-warp list-table-tool-row"},R={class:"simple-form-warp"},W={class:"simple-form-field"},X={class:"form-group"},Y={class:"control-container"},Z={class:"simple-form-field"},tt={class:"form-group"},et={class:"control-container"},ot={class:"table-container"},at={class:"product-info"},st=["src"],it={class:"empty-warp"},nt={key:0,class:"empty-bg"},lt={key:0,class:"pagination-con"},rt=N({__name:"List",setup(dt){const C=k();p(k().domain);const v=p(),c=p(!0),_=p(0),S=p([]),i=q({page:1,size:C.get("page_size"),sort_field:"",sort_order:"",keyword:""}),l=async()=>{c.value=!0;try{const n=await $({...i});v.value=n.filter_result,_.value=n.total}catch(n){L.error(n.message)}finally{c.value=!1}};A(()=>{l()});const u=()=>{l()},x=({prop:n,order:t})=>{i.sort_field=n,i.sort_order=t=="ascending"?"asc":t=="descending"?"desc":"",l()},z=n=>{S.value=n.map(t=>t.gift_id)};return(n,t)=>{const h=r("el-button"),V=r("el-input"),D=r("el-form"),m=r("el-table-column"),G=r("el-divider"),I=r("el-table"),P=r("a-spin");return g(),f("div",j,[e("div",H,[e("div",J,[e("div",K,[o(D,{model:i,onSubmit:B(u,["prevent"])},{default:a(()=>[e("div",Q,[e("div",R,[e("div",W,[e("div",X,[e("div",Y,[o(V,{modelValue:i.keyword,"onUpdate:modelValue":t[0]||(t[0]=s=>i.keyword=s),name:"keyword",placeholder:"输入赠品名称",clearable:"",onClear:u},{append:a(()=>[o(h,{onClick:u},{default:a(()=>t[3]||(t[3]=[e("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),e("div",Z,[e("div",tt,[e("div",et,[o(d(y),{isDrawer:"",onOkCallback:l,title:"添加赠品",width:"900px",path:"promotion/productGift/Info",params:{act:"add"}},{default:a(()=>[o(h,{type:"primary"},{default:a(()=>t[4]||(t[4]=[w("添加赠品")])),_:1})]),_:1})])])])])])]),_:1},8,["model"])]),e("div",ot,[o(P,{spinning:c.value},{default:a(()=>[o(I,{data:v.value,"row-key":"id",onSelectionChange:z,total:_.value,onSortChange:x,loading:c.value},{empty:a(()=>[e("div",it,[c.value?b("",!0):(g(),f("div",nt,"暂无数据"))])]),default:a(()=>[o(m,{label:"赠品名称",prop:"gift_name",width:"120"}),o(m,{label:"商品信息",prop:"product_name"},{default:a(({row:s})=>[e("div",at,[e("img",{src:d(O)(s.product_info.pic_thumb),height:"50",width:"50"},null,8,st),e("p",null,M(s.product_info.product_name),1)])]),_:1}),o(m,{label:"赠品库存",prop:"gift_stock",sortable:"custom"}),o(m,{label:"操作",fixed:"right",width:150},{default:a(({row:s})=>[o(d(y),{isDrawer:"",onOkCallback:l,title:"编辑赠品",width:"900px",path:"promotion/productGift/Info",params:{act:"detail",id:s.gift_id}},{default:a(()=>t[5]||(t[5]=[e("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(G,{direction:"vertical"}),o(d(E),{onAfterDelete:l,requestApi:d(T),params:{id:s.gift_id}},{default:a(()=>t[6]||(t[6]=[w("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),_.value>0?(g(),f("div",lt,[o(d(F),{page:i.page,"onUpdate:page":t[1]||(t[1]=s=>i.page=s),size:i.size,"onUpdate:size":t[2]||(t[2]=s=>i.size=s),total:_.value,onCallback:l},null,8,["page","size","total"])])):b("",!0)])])])])}}}),kt=U(rt,[["__scopeId","data-v-c4877d84"]]);export{kt as default};
