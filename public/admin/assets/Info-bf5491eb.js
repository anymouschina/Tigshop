import{d as H,j as m,E as K,s as M,I as L,x as O,K as f,r as s,o as v,c as S,e as g,k as N,w as l,b as e,f as P,F as A,a as G,H as c,$ as J,a0 as Q,h as W}from"./index-7c2d2aef.js";import{a as X,c as Y}from"./languagesList-188697d2.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import"./config-9548fa9b.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import"./region-e0d291a6.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import{_ as Z}from"./SelectLocaleCode.vue_vue_type_script_setup_true_lang-bd55f330.js";import{a as ee}from"./currencyManagement-2d40fd5e.js";import"./time-290942a2.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";import"./region-05802f67.js";import"./verbalAssociation-438da18f.js";const ae={class:"container"},te={class:"content_wrapper"},le={class:"lyecs-form-table"},oe=g("div",{class:"extra"},"请选择关联语言，语言类型是由您自行添加的",-1),re=g("div",{class:"extra"},"请选择关联语言，语言类型是由您自行添加的",-1),Se=H({__name:"Info",props:{id:{type:Number,default:0},promotion_type:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(q,{expose:B,emit:U}){const p=U,n=q,i=m(!0),y=K().currentRoute.value.query,b=m(n.isDialog?n.act:String(y.act)),V=m(n.isDialog?n.id:Number(y.id)),D=b.value==="add"?"create":"update",w=M(),a=m({language:"",locale_code:"",is_enabled:0,currency_id:0,is_default:0,sort:50}),R=L({page:1,size:-1,sort_field:"",sort_order:"",name:""}),x=m(),h=async()=>{i.value=!0;try{const r=await ee({...R});x.value=r.filter_result}catch(r){f.error(r.message)}finally{i.value=!1}};O(()=>{h(),b.value==="detail"?E():i.value=!1});const E=async()=>{try{const r=await X(b.value,{id:V.value});Object.assign(a.value,r.item)}catch(r){f.error(r.message),p("close")}finally{i.value=!1}},k=async()=>{await w.value.validate();try{p("update:confirmLoading",!0);const r=await Y(D,{id:V.value,...a.value});p("submitCallback",r),f.success(r.message)}catch(r){f.error(r.message)}finally{p("update:confirmLoading",!1)}},F=()=>{k()},T=L({promotion_name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],send_type:[{required:!0,validator:(r,o,d)=>{if(!a.value.language&&!a.value.language){d(new Error("请输入用券时间"));return}d()},trigger:"blur"}]});return B({onFormSubmit:F}),(r,o)=>{const d=s("el-input"),u=s("el-form-item"),$=s("el-option"),j=s("el-select"),_=s("el-radio"),C=s("el-radio-group"),z=s("el-button"),I=s("el-form");return v(),S("div",ae,[g("div",te,[g("div",le,[i.value?W("",!0):(v(),N(I,{key:0,ref_key:"formRef",ref:w,rules:T,model:a.value,"label-width":"auto"},{default:l(()=>[e(u,{prop:"language",label:"语言名称：",rules:[{required:!0,message:"语言名称不能为空!"}]},{default:l(()=>[e(d,{type:"text",maxlength:"60",modelValue:a.value.language,"onUpdate:modelValue":o[0]||(o[0]=t=>a.value.language=t)},null,8,["modelValue"])]),_:1}),e(u,{prop:"locale_code",label:"语言识别码：",rules:[{required:!0,message:"请选择语言识别码!"}]},{default:l(()=>[e(P(Z),{modelValue:a.value.locale_code,"onUpdate:modelValue":o[1]||(o[1]=t=>a.value.locale_code=t)},null,8,["modelValue"]),oe]),_:1}),e(u,{prop:"currency_id",label:"关联货币："},{default:l(()=>[e(j,{modelValue:a.value.currency_id,"onUpdate:modelValue":o[2]||(o[2]=t=>a.value.currency_id=t),placeholder:"请选择关联货币",size:"default"},{default:l(()=>[(v(!0),S(A,null,G(x.value,t=>(v(),N($,{key:t.id,label:t.name+" - "+t.symbol,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),re]),_:1}),e(u,{prop:"is_enabled",label:"是否启用："},{default:l(()=>[e(C,{modelValue:a.value.is_enabled,"onUpdate:modelValue":o[3]||(o[3]=t=>a.value.is_enabled=t)},{default:l(()=>[e(_,{value:1},{default:l(()=>[c("是")]),_:1}),e(_,{value:0},{default:l(()=>[c("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"is_default",label:"是否默认："},{default:l(()=>[e(C,{modelValue:a.value.is_default,"onUpdate:modelValue":o[4]||(o[4]=t=>a.value.is_default=t)},{default:l(()=>[e(_,{value:1},{default:l(()=>[c("是")]),_:1}),e(_,{value:0},{default:l(()=>[c("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"sort",label:"排序："},{default:l(()=>[e(d,{type:"number",maxlength:"60",modelValue:a.value.sort,"onUpdate:modelValue":o[5]||(o[5]=t=>a.value.sort=t)},null,8,["modelValue"])]),_:1}),J(e(u,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[e(z,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:o[6]||(o[6]=t=>k())},{default:l(()=>[c("提交")]),_:1},512)]),_:1},512),[[Q,!n.isDialog]])]),_:1},8,["rules","model"]))])])])}}});export{Se as default};
