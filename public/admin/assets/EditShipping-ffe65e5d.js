import{d as U,j as u,E as I,s as L,x as j,K as g,r as n,o as m,c as D,e as c,k as f,w as a,b as t,H as _,$ as T,a0 as q,f as V,h as v,p as F,i as H,_ as K}from"./index-7c2d2aef.js";import{a as M,l as $}from"./order-5e1a3c9e.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import"./config-9548fa9b.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import"./region-e0d291a6.js";import{S as z}from"./SelectLogisticsCompany-9a4f016c.js";import{S as A}from"./SelectShippingType-02b7a494.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import"./time-290942a2.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";import"./region-05802f67.js";import"./logisticsCompany-fd0ba0a2.js";import"./shippingType-048b9d8a.js";const G=s=>(F("data-v-54d7e9aa"),s=s(),H(),s),J={class:"container"},P={class:"content_wrapper"},Q={class:"lyecs-form-table"},W=G(()=>c("div",{class:"button-card babyBlue pd15"}," 提示：在当前页面修改配送方式或物流公司不会更改订单运费，如需修改运费请编辑订单金额（仅对未支付的订单支持订单金额编辑） ",-1)),X=U({__name:"EditShipping",props:{id:{type:Number,default:0},form:{type:Object,default:()=>({})},valueName:String,isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(s,{expose:w,emit:x}){const p=x,h=s,y=u(!0),C=I().currentRoute.value.query,b=u(h.isDialog?h.id:Number(C.id));u(1);const k=L(),e=u({items:[]});j(()=>{N()});const N=async()=>{try{const o=await M("detail",{id:b.value});Object.assign(e.value,o.item)}catch(o){g.error(o.message),p("close")}finally{y.value=!1}},B=async()=>{await k.value.validate();try{p("update:confirmLoading",!0);const o=await $({id:b.value,shipping_method:e.value.shipping_method,logistics_id:e.value.logistics_id,tracking_no:e.value.tracking_no});p("submitCallback",o),g.success(o.message)}catch(o){g.error(o.message)}finally{p("update:confirmLoading",!1)}},E=o=>{e.value.logistics_id=o};return w({onFormSubmit:()=>{B()}}),(o,i)=>{const d=n("el-radio"),O=n("el-radio-group"),r=n("el-form-item"),S=n("el-input"),R=n("el-form");return m(),D("div",J,[c("div",P,[c("div",Q,[W,y.value?v("",!0):(m(),f(R,{key:0,ref_key:"formRef",ref:k,model:e.value,"label-width":"auto"},{default:a(()=>[t(r,{label:"配送方式",prop:"shipping_method"},{default:a(()=>[t(O,{modelValue:e.value.shipping_method,"onUpdate:modelValue":i[0]||(i[0]=l=>e.value.shipping_method=l)},{default:a(()=>[t(d,{value:1},{default:a(()=>[_("物流配送")]),_:1}),t(d,{value:2},{default:a(()=>[_("商家配送")]),_:1}),t(d,{value:3},{default:a(()=>[_("无需配送")]),_:1}),t(d,{value:4},{default:a(()=>[_("电子面单")]),_:1})]),_:1},8,["modelValue"])]),_:1}),T(c("div",null,[t(r,{label:"配送类型",prop:"shipping_type_id"},{default:a(()=>[t(V(A),{id:e.value.shipping_type_id,"onUpdate:id":i[1]||(i[1]=l=>e.value.shipping_type_id=l),onChange:E},null,8,["id"])]),_:1}),t(r,{label:"物流公司",prop:"logistics_id"},{default:a(()=>[t(V(z),{id:e.value.logistics_id,"onUpdate:id":i[2]||(i[2]=l=>e.value.logistics_id=l)},null,8,["id"])]),_:1}),e.value.shipping_method===1?(m(),f(r,{key:0,label:"快递单号",prop:"tracking_no"},{default:a(()=>[t(S,{modelValue:e.value.tracking_no,"onUpdate:modelValue":i[3]||(i[3]=l=>e.value.tracking_no=l)},null,8,["modelValue"])]),_:1})):v("",!0),e.value.shipping_method===4?(m(),f(r,{key:1,label:"发货备注",prop:"bill_remark"},{default:a(()=>[t(S,{modelValue:e.value.bill_remark,"onUpdate:modelValue":i[4]||(i[4]=l=>e.value.bill_remark=l),type:"textarea",rows:"3"},null,8,["modelValue"])]),_:1})):v("",!0)],512),[[q,e.value.shipping_method===1||e.value.shipping_method===4]])]),_:1},8,["model"]))])])])}}});const ye=K(X,[["__scopeId","data-v-54d7e9aa"]]);export{ye as default};
