/* empty css             */import"./index-B-GURfkM.js";import{P as $}from"./PopFormElm-DSof3F4x.js";import{d as E,i as v,G as L,q as O,r as i,c as y,o as d,e as l,f as c,b as o,w as a,g as p,E as _,D as S,j as k,I as h}from"./index-CGYuOau0.js";import{_ as j}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as G}from"./Pagination-yOfjsBuR.js";import{u as M}from"./config-DNllFJyR.js";import{u as T,d as H,g as J,b as K}from"./adminRole-Bv-dw8SG.js";import{_ as V}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const Q={class:"container"},W={class:"content_wrapper"},X={class:"lyecs-table-list-warp"},Y={class:"list-table-tool lyecs-search-warp"},Z={class:"list-table-tool-row"},ee={class:"list-table-tool-col"},te={class:"table-container"},oe={class:"empty-warp"},ae={key:0,class:"empty-bg"},le={key:0,class:"pagination-con"},se={key:0,class:"selected-action-warp"},ne={class:"selected-action"},be=E({__name:"List",setup(ie){const x=M(),w=v([]),u=v(!0),m=v(0),f=v([]),n=L({page:1,size:x.get("page_size"),sort_field:"",sort_order:"",keyword:""}),r=async()=>{u.value=!0;try{const s=await J({...n});w.value=s.filter_result,m.value=s.total}catch(s){h.error(s.message)}finally{u.value=!1}};O(()=>{r()});const A=()=>{r()},z=({prop:s,order:e})=>{n.sort_field=s,n.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",r()},q=async s=>{try{const e=await K(s,{ids:f.value});h.success(e.message),r()}catch(e){h.error(e.message)}},B=s=>{f.value=s.map(e=>e.role_id)};return(s,e)=>{const b=i("el-button"),D=i("el-input"),C=i("el-space"),P=i("el-form"),g=i("el-table-column"),R=i("el-divider"),U=i("el-table"),I=i("a-spin"),N=i("el-popconfirm");return d(),y("div",Q,[l("div",W,[l("div",X,[l("div",Y,[o(P,{model:n},{default:a(()=>[l("div",Z,[l("div",ee,[o(C,null,{default:a(()=>[o(p(V),{params:{act:"add"},isDrawer:"",path:"authority/adminRole/Info",title:"添加管理员权限组",width:"800px",onOkCallback:r},{default:a(()=>[o(b,{type:"primary"},{default:a(()=>e[4]||(e[4]=[_("添加管理员权限组")])),_:1})]),_:1}),o(D,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>n.keyword=t),class:"width240",name:"keyword",placeholder:"输入权限组名称"},{append:a(()=>[o(b,{onClick:A},{default:a(()=>e[5]||(e[5]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1},8,["model"])]),l("div",te,[o(I,{spinning:u.value},{default:a(()=>[o(U,{data:w.value,loading:u.value,total:m.value,"row-key":"role_id",onSelectionChange:B,onSortChange:z},{empty:a(()=>[l("div",oe,[u.value?c("",!0):(d(),y("div",ae,"暂无数据"))])]),default:a(()=>[o(g,{type:"selection",width:"32"}),o(g,{label:"权限组名称",width:"200"},{default:a(({row:t})=>[o(p($),{"org-value":t.role_name,"onUpdate:orgValue":F=>t.role_name=F,max:10,params:{id:t.role_id,field:"role_name"},requestApi:p(T),label:"权限组名称",type:"input"},{default:a(()=>[l("div",null,S(t.role_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(g,{label:"描述",prop:"role_desc"}),o(g,{width:120,fixed:"right",label:"操作"},{default:a(({row:t})=>[t.role_id>1?(d(),k(p(V),{key:0,params:{act:"detail",id:t.role_id},isDrawer:"",path:"authority/adminRole/Info",title:"编辑管理员权限组",width:"800px",onOkCallback:r},{default:a(()=>e[6]||(e[6]=[l("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])):c("",!0),t.role_id>2?(d(),k(R,{key:1,direction:"vertical"})):c("",!0),t.role_id>2?(d(),k(p(j),{key:2,params:{id:t.role_id},requestApi:p(H),onAfterDelete:r},{default:a(()=>e[7]||(e[7]=[_("删除 ")])),_:2},1032,["params","requestApi"])):c("",!0)]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),m.value>0?(d(),y("div",le,[o(p(G),{page:n.page,"onUpdate:page":e[1]||(e[1]=t=>n.page=t),size:n.size,"onUpdate:size":e[2]||(e[2]=t=>n.size=t),total:m.value,onCallback:r},null,8,["page","size","total"])])):c("",!0)]),f.value.length>0?(d(),y("div",se,[l("div",ne,[o(C,null,{default:a(()=>[l("span",null,[e[8]||(e[8]=_("已选择：")),l("b",null,S(f.value.length),1),e[9]||(e[9]=_(" 项"))]),o(N,{title:"您确认要批量删除所选数据吗？",onConfirm:e[3]||(e[3]=t=>q("del"))},{reference:a(()=>[o(b,null,{default:a(()=>e[10]||(e[10]=[_("批量删除")])),_:1})]),_:1})]),_:1})])])):c("",!0)])])])}}});export{be as default};
