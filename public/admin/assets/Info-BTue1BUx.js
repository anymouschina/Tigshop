import{d as J,i as m,C as P,s as Q,q as W,r as p,c as v,o as i,e as o,b as t,j as r,f as _,w as l,a0 as X,g as c,E as f,D as n,F as h,ev as Y,a1 as Z,I as V,_ as ee}from"./index-CGYuOau0.js";import{a as ae,A as te}from"./userCertification-DiIO-SB6.js";import{S as U}from"./StatusDot-YMdUi2kT.js";import{M as le}from"./MobileCard-CkxM62lR.js";/* empty css                                               */import"./zh-cn-BAb8a1B9.js";import{T as q}from"./Tag-DHW499gP.js";import{i as y}from"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";const oe={class:"container"},se={class:"content_wrapper"},ie={class:"lyecs-form-table"},ne={key:0},de={class:"width100"},ue={class:"width100"},re={class:"width100"},_e={class:"width100"},ce={class:"width100"},me={class:"width100"},pe={class:"width100"},ve={class:"width100"},fe={class:"width100"},ye={class:"width100"},be={class:"width100"},ge={key:1},ke={class:"width100"},he={class:"width100"},we={class:"width100"},Ce={class:"width100"},Ve={class:"width100"},xe={class:"width100"},Be={class:"image"},De=J({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(z,{emit:L}){const w=L,b=z,M=m([{value:1,label:"大陆身份证"},{value:2,label:"护照（限境外人士）"},{value:3,label:"来往内地通行证（中国香港居民）"},{value:4,label:"来往内地通行证（中国澳门居民）"},{value:5,label:"来往大陆通行证（中国台湾居民）"}]),g=m("sm"),j=u=>{g.value=u},k=m(!0),$=P().currentRoute.value.query,x=m(b.isDialog?b.act:String($.act)),N=m(b.isDialog?b.id:Number($.id));x.value;const F=Q(),e=m({company_data:{certificate_validity_period_date:[],front_of_photo:[],back_of_photo:[],business_license_img:[],operating_term_type_date:[]}}),A=async()=>{var u;try{k.value=!0;const a=await ae(x.value,{id:N.value});Object.assign(e.value,a.item),e.value.contact_mobile=(u=e.value.contact_mobile)==null?void 0:u.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")}catch(a){V.error(a.message),w("close")}finally{k.value=!1}};W(()=>{x.value==="detail"?A():k.value=!1});const B=async u=>{await F.value.validate();try{if(u==3&&!e.value.audit_remark){V.error("请输入审核备注");return}w("update:confirmLoading",!0);const a=await te({id:N.value,status:u,audit_remark:e.value.audit_remark});w("submitCallback",a),V.success(a.message)}catch(a){V.error(a.message)}finally{w("update:confirmLoading",!1)}},R=m(""),D=m(!1),S=u=>{R.value=u,D.value=!0};return(u,a)=>{const T=p("el-tab-pane"),O=p("el-tabs"),s=p("el-form-item"),C=p("el-image"),I=p("el-button"),K=p("el-form"),G=p("a-spin"),H=p("el-dialog");return i(),v("div",oe,[o("div",se,[o("div",ie,[t(O,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=d=>g.value=d),class:"lyecs-tabs","tab-position":"top",onTabChange:j},{default:l(()=>[(i(),r(T,{key:1,label:"基础信息",name:"sm"})),e.value.type==2?(i(),r(T,{key:2,label:"企业信息",name:"company"})):_("",!0)]),_:1},8,["modelValue"]),k.value?_("",!0):(i(),r(K,{key:0,ref_key:"formRef",ref:F,model:e.value,"label-width":"auto"},{default:l(()=>[g.value=="sm"?(i(),v("div",ne,[t(s,{label:"认证资质"},{default:l(()=>[e.value.type==1?(i(),r(c(q),{key:0,transparent:!0,text:"个人"})):(i(),r(c(q),{key:1,color:"#409EFF",transparent:!1,text:"企业"}))]),_:1}),t(s,{label:"审核结果"},{default:l(()=>[o("div",de,[o("div",null,[e.value.status==1?(i(),r(U,{key:0,flicker:!0})):_("",!0),e.value.status==2?(i(),r(U,{key:1,color:"#52c41a",flicker:!0})):_("",!0),e.value.status==3?(i(),r(U,{key:2,color:"#f5222d",flicker:!1})):_("",!0),f(" "+n(e.value.status_text),1)])])]),_:1}),e.value.audit_remark&&e.value.status!=1?(i(),r(s,{key:0,label:"审核备注"},{default:l(()=>[o("div",ue,[o("div",null,n(e.value.audit_remark),1)])]),_:1})):_("",!0),t(s,{label:"姓名"},{default:l(()=>[o("div",re,n(e.value.company_data.corporate_name),1)]),_:1}),t(s,{label:"联系人手机"},{default:l(()=>[o("div",_e,[t(le,{mobile:e.value.company_data.contact_phone},null,8,["mobile"])])]),_:1}),t(s,{class:"form-item",label:"证件类型"},{default:l(()=>{var d;return[o("div",ce,n(((d=M.value.find(E=>E.value===e.value.company_data.document_type))==null?void 0:d.label)||""),1)]}),_:1}),t(s,{label:"证件号码"},{default:l(()=>[o("div",me,n(e.value.company_data.document_number),1)]),_:1}),t(s,{label:"居住地址"},{default:l(()=>[o("div",pe,n(e.value.company_data.residential_address),1)]),_:1}),t(s,{label:"出生日期"},{default:l(()=>[o("div",ve,n(e.value.company_data.birthday),1)]),_:1}),t(s,{label:"证件有效期"},{default:l(()=>[o("div",fe,[e.value.company_data.certificate_validity_period==1?(i(),v(h,{key:0},[f(n(e.value.company_data.certificate_validity_period_date[0]+" ～ "+e.value.company_data.certificate_validity_period_date[1]),1)],64)):(i(),v(h,{key:1},[f(n(e.value.company_data.certificate_validity_period_end)+" ～ 长期 ",1)],64))])]),_:1}),t(s,{label:"证件照正面"},{default:l(()=>[o("div",ye,[t(C,{src:c(y)(e.value.company_data.front_of_photo[0].pic_url),class:"image-size",fit:"cover",onClick:a[1]||(a[1]=d=>S(c(y)(e.value.company_data.front_of_photo[0].pic_url)))},null,8,["src"])])]),_:1}),t(s,{label:"证件照反面"},{default:l(()=>[o("div",be,[t(C,{src:c(y)(e.value.company_data.back_of_photo[0].pic_url),class:"image-size",fit:"cover",onClick:a[2]||(a[2]=d=>S(c(y)(e.value.company_data.back_of_photo[0].pic_url)))},null,8,["src"])])]),_:1}),e.value.status==1?(i(),v(h,{key:1},[t(s,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(I,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:a[3]||(a[3]=d=>B(2))},{default:l(()=>a[8]||(a[8]=[f("审核通过")])),_:1},512),t(I,{ref:"submitBtn",class:"form-submit-btn",onClick:a[4]||(a[4]=d=>B(3))},{default:l(()=>a[9]||(a[9]=[f("审核不通过")])),_:1},512)]),_:1}),t(c(Y),{rows:"4",modelValue:e.value.audit_remark,"onUpdate:modelValue":a[5]||(a[5]=d=>e.value.audit_remark=d),placeholder:"请输入审核备注（审核不通过将必填）",type:"textarea"},null,8,["modelValue"])],64)):_("",!0),X(t(s,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(I,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:B},{default:l(()=>a[10]||(a[10]=[f("提交")])),_:1},512)]),_:1},512),[[Z,!b.isDialog]])])):_("",!0),g.value=="company"?(i(),v("div",ge,[t(s,{label:"企业名称"},{default:l(()=>[o("div",ke,n(e.value.company_data.company_name),1)]),_:1}),t(s,{label:"注册地址"},{default:l(()=>[o("div",he,n(e.value.company_data.license_addr_province_name)+" "+n(e.value.company_data.business_license_address),1)]),_:1}),t(s,{label:"经营范围"},{default:l(()=>[o("div",we,n(e.value.company_data.business_scope),1)]),_:1}),t(s,{label:"统一社会信用代码"},{default:l(()=>[o("div",Ce,n(e.value.company_data.business_license_id),1)]),_:1}),t(s,{label:"营业期限"},{default:l(()=>[o("div",Ve,[e.value.company_data.operating_term_type==1?(i(),v(h,{key:0},[f(n(e.value.company_data.operating_term_type_date[0]+" ～  "+e.value.company_data.operating_term_type_date[1]),1)],64)):(i(),v(h,{key:1},[f(n(e.value.company_data.operating_term_type_end)+" ～长期 ",1)],64))])]),_:1}),t(s,{label:"营业执照"},{default:l(()=>{var d;return[o("div",xe,[((d=e.value.company_data.business_license_img)==null?void 0:d.length)>0?(i(),r(C,{key:0,src:c(y)(e.value.company_data.business_license_img[0].pic_url),class:"image-size",fit:"cover",onClick:a[6]||(a[6]=E=>S(c(y)(e.value.company_data.business_license_img[0].pic_url)))},null,8,["src"])):_("",!0)])]}),_:1})])):_("",!0)]),_:1},8,["model"])),t(G,{spinning:k.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])]),t(H,{modelValue:D.value,"onUpdate:modelValue":a[7]||(a[7]=d=>D.value=d)},{default:l(()=>[o("div",Be,[t(C,{src:R.value,alt:"",fit:"cover"},null,8,["src"])])]),_:1},8,["modelValue"])])}}}),ze=ee(De,[["__scopeId","data-v-ed9607b6"]]);export{ze as default};
