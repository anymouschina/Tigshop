import{_ as N}from"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import{i as O}from"./format-DFT-VJzO.js";import{c as R}from"./adminMsg-B0ORefAQ.js";import{d as S,c1 as V,dk as A,i as u,C as B,r as F,c as o,o as l,f as v,e,b as m,g as f,D as r,n as p,F as I,a as M,E as T,I as h,_ as $}from"./index-CGYuOau0.js";import{a as z}from"./order-CoX6hLeE.js";import{_ as g}from"./DetailBtn.vue_vue_type_script_setup_true_lang-ME5KrZMt.js";import{a as D}from"./aftersales-C37am-lV.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";import"./index-B-GURfkM.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";const E={key:0,class:"loading-box"},H={class:"loading-inner"},j={class:"left"},q={class:"text"},U={class:"right"},G={class:"time"},J={style:{margin:"10px"}},K={key:0},P={key:0,class:"item"},Q={class:"product_info"},W={class:"info"},X={class:"txt"},Y={key:1,class:"money_box"},Z={class:"more"},ee={key:1},te=["innerHTML"],se={class:"more"},ae=S({__name:"Collapse",props:{item:{type:Object,default:{}}},emits:["setReadedCallback","close"],setup(n,{emit:y}){const x=V(A,{spin:!0}),d=u(!1);B();const _=y,i=u(!1),k=u(!0),a=u(),C=async s=>{if(s.is_readed||(await R({msg_id:s.msg_id}),s.is_readed=1,_("setReadedCallback",!0)),!i.value&&s.related_data.aftersale_id){await w(s.related_data.aftersale_id);return}if(!i.value&&s.related_data.order_id){await b(s.related_data.order_id);return}i.value=!i.value,k.value=!1},b=async s=>{d.value=!0;try{const t=await z("detail",{id:s});a.value=t.item,i.value=!0}catch(t){h.error(t.message),_("close")}finally{d.value=!1}},w=async s=>{d.value=!0;try{const t=await D("detail",{id:s});a.value=t.item,i.value=!0}catch(t){h.error(t.message),_("close")}finally{d.value=!1}};return(s,t)=>{const L=F("a-spin");return l(),o("div",{class:p(["collapse",i.value?"show":"hide"])},[d.value?(l(),o("div",E,[e("div",H,[m(L,{size:"small",indicator:f(x)},null,8,["indicator"])])])):v("",!0),e("div",{class:p(["cell",n.item.is_readed==0?"unread":""]),onClick:t[0]||(t[0]=c=>C(n.item))},[e("div",j,[t[1]||(t[1]=e("div",{class:"badge"},null,-1)),e("div",q,r(n.item.title),1)]),e("div",U,[e("div",G,r(n.item.send_time),1),t[2]||(t[2]=e("div",{class:"icon"},[e("i",{class:"nav-icon iconfont icon-xiala"})],-1))])],2),e("div",{class:p(["content_box",i.value?"show":"hide"])},[e("div",J,[a.value?(l(),o("div",K,["items"in a.value?(l(),o("div",P,[(l(!0),o(I,null,M(a.value.items,c=>(l(),o("div",Q,[e("div",W,[m(f(N),{width:"60",src:f(O)(c.pic_thumb),fit:"contain"},null,8,["src"]),e("p",null,r(c.product_name),1)]),e("div",X,[e("p",null,"¥"+r(c.price),1),e("p",null,"x "+r(c.quantity),1)])]))),256))])):v("",!0),"total_amount"in a.value?(l(),o("div",Y,[e("div",null,[T(" 订单金额：¥"+r(a.value.total_amount)+" ",1),e("span",null,"(含运费："+r(a.value.shipping_fee)+")",1)])])):v("",!0),e("div",Z,[m(g,{item:n.item,orderSn:a.value.order_sn},null,8,["item","orderSn"])])])):(l(),o("div",ee,[e("div",{class:"item",innerHTML:n.item.content},null,8,te),e("div",se,[m(g,{item:n.item},null,8,["item"])])]))])],2)],2)}}}),fe=$(ae,[["__scopeId","data-v-5c97308c"]]);export{fe as default};
