import{d as K,i as f,G as T,q as $,c as u,e,f as m,b as a,L as q,w as o,g,I as C,r as _,o as c,F as G,a as M,j as O,E as p,D as r,_ as A}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";/* empty css                                                                    */import{P as H}from"./Pagination-yOfjsBuR.js";import{u as J,i as Q,p as R}from"./format-DFT-VJzO.js";import{u as W}from"./config-DNllFJyR.js";import{g as X,a as Y,b as Z}from"./product-Bn8ngLQg.js";import{_ as tt}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const st={class:"container"},et={class:"content_wrapper"},at={class:"lyecs-table-list-warp"},ot={class:"list-table-tool lyecs-search-warp"},lt={class:"advanced-search-warp list-table-tool-row"},nt={class:"simple-form-warp"},it={class:"simple-form-field"},rt={class:"form-group"},dt={class:"control-container"},ct={class:"simple-form-field"},pt={class:"form-group"},ut={class:"control-container"},_t={class:"simple-form-field"},mt={class:"form-group"},ft={class:"control-container"},bt={class:"simple-form-field"},vt={class:"table-container"},gt={class:"flex"},yt={key:0,class:"span-pic"},ht=["href"],kt=["src"],Ct={class:"span-product-con"},St={class:"span-product-name"},Pt={key:0,class:"span-product-brand"},Vt={class:"span-con"},wt={key:1,class:"span-product-brand"},xt={class:"span-con green"},zt={key:2,class:"span-product-brand"},Ft={class:"span-con green"},Bt={key:3},It={class:"empty-warp"},Lt={key:0,class:"empty-bg"},Ut={key:0,class:"pagination-con"},Nt={key:0,class:"selected-action-warp"},Dt={class:"selected-action"},jt=K({__name:"List",setup(Et){const z=W(),P=f([]),y=f(!0),h=f(0);f(0);const k=f([]),n=T({page:1,size:z.pageSize,sort_field:"",sort_order:"",product_name:"",status:""});f(localStorage.getItem("adminType"));const b=async()=>{y.value=!0;try{const l=await X({...n});P.value=l.filter_result,h.value=l.total}catch(l){C.error(l.message)}finally{y.value=!1}},V=f(),F=async()=>{try{const l=await Y();V.value=l.item}catch(l){C.error(l.message)}};$(()=>{b(),F()});const v=()=>{b()},B=({prop:l,order:t})=>{n.sort_field=l,n.sort_order=t=="ascending"?"asc":t=="descending"?"desc":"",b()},I=async l=>{try{const t=await Z(l,{ids:k.value});C.success(t.message),b()}catch(t){C.error(t.message)}},L=l=>{k.value=l.map(t=>t.product_id)};return(l,t)=>{const U=_("el-input"),S=_("el-option"),w=_("el-select"),N=_("el-button"),d=_("el-table-column"),x=_("el-space"),D=_("el-table"),j=_("a-spin"),E=_("el-popconfirm");return c(),u("div",st,[e("div",et,[e("div",at,[e("div",ot,[e("div",lt,[e("div",nt,[e("div",it,[e("div",rt,[t[6]||(t[6]=e("label",{class:"control-label"},[e("span",null,"商品名称：")],-1)),e("div",dt,[a(U,{modelValue:n.product_name,"onUpdate:modelValue":t[0]||(t[0]=s=>n.product_name=s),name:"product_name",placeholder:"输入商品名称/货号",onKeyup:q(v,["enter"]),clearable:"",onClear:v},null,8,["modelValue"])])])]),e("div",ct,[e("div",pt,[t[7]||(t[7]=e("label",{class:"control-label"},[e("span",null,"商品状态：")],-1)),e("div",ut,[a(w,{modelValue:n.status,"onUpdate:modelValue":t[1]||(t[1]=s=>n.status=s),clearable:"",onChange:v},{default:o(()=>[a(S,{label:"上架",value:1}),a(S,{label:"下架",value:0})]),_:1},8,["modelValue"])])])]),e("div",_t,[e("div",mt,[t[8]||(t[8]=e("label",{class:"control-label"},[e("span",null,"推广类型：")],-1)),e("div",ft,[a(w,{modelValue:n.salesman_product_type,"onUpdate:modelValue":t[2]||(t[2]=s=>n.salesman_product_type=s),clearable:"",onChange:v},{default:o(()=>[(c(!0),u(G,null,M(V.value,(s,i)=>(c(),O(S,{label:s,value:i},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])]),e("div",bt,[a(N,{type:"primary",onClick:v},{default:o(()=>t[9]||(t[9]=[p("搜索")])),_:1})])])])]),e("div",vt,[a(j,{spinning:y.value},{default:o(()=>[a(D,{data:P.value,total:h.value,"row-key":"product_id",onSelectionChange:L,onSortChange:B},{empty:o(()=>[e("div",It,[y.value?m("",!0):(c(),u("div",Lt,"暂无数据"))])]),default:o(()=>[a(d,{type:"selection",width:"32"}),a(d,{label:"商品",prop:"product_id","min-width":150},{default:o(({row:s})=>[e("div",gt,[s.pic_thumb?(c(),u("div",yt,[e("a",{href:g(J)({path:"product",sn:s.product_sn}),target:"_blank"},[e("img",{src:g(Q)(s.pic_thumb),height:"50",width:"50"},null,8,kt)],8,ht)])):m("",!0),e("div",Ct,[e("div",St,[e("div",null,r(s.product_name),1)]),s.brand_name?(c(),u("p",Pt,[t[10]||(t[10]=e("span",{class:"span-tit"},"商品：",-1)),e("span",Vt,r(s.brand_name),1)])):m("",!0),s.store_title?(c(),u("p",wt,[t[11]||(t[11]=e("span",{class:"span-tit"},"店铺：",-1)),e("span",xt,r(s.store_title),1)])):m("",!0),s.suppliers_name?(c(),u("p",zt,[t[12]||(t[12]=e("span",{class:"span-tit"},"供应商：",-1)),e("span",Ft,r(s.suppliers_name),1)])):m("",!0),s.type===2?(c(),u("p",Bt,t[13]||(t[13]=[e("span",{class:"span-con green"},"【虚拟商品】",-1)]))):m("",!0)])])]),_:1}),a(d,{label:"金额(元)"},{default:o(({row:s})=>[p(r(g(R)(s.product_price)),1)]),_:1}),a(d,{label:"库存"},{default:o(({row:s})=>[p(r(s.product_stock),1)]),_:1}),a(d,{label:"是否参与推广"},{default:o(({row:s})=>[p(r(s.salesmanProduct&&s.salesmanProduct.is_join==1?"参与":"不参与"),1)]),_:1}),a(d,{label:"佣金"},{default:o(({row:s})=>t[14]||(t[14]=[p(" 默认比例 ")])),_:1}),a(d,{label:"商品佣金"},{default:o(({row:s})=>{var i;return[p(r(((i=s.salesmanProduct)==null?void 0:i.product_commission.product_commission)||"--"),1)]}),_:1}),a(d,{label:"下级分销员卖货提成"},{default:o(({row:s})=>{var i;return[p(r(((i=s.salesmanProduct)==null?void 0:i.product_commission.sub_commission)||"--"),1)]}),_:1}),a(d,{label:"商品状态"},{default:o(({row:s})=>[p(r(s.product_status===1?"上架":"下架"),1)]),_:1}),a(d,{label:"操作时间"},{default:o(({row:s})=>{var i;return[p(r((i=s.salesmanProduct)==null?void 0:i.update_time),1)]}),_:1}),a(d,{width:120,fixed:"right",label:"操作"},{default:o(({row:s})=>[a(x,{size:0},{default:o(()=>{var i;return[a(g(tt),{maskClose:!1,params:{act:(i=s.salesmanProduct)!=null&&i.salesman_product_id?"detail":"add",id:s.product_id,salesmanProduct:s.salesmanProduct},isDrawer:"",path:"salesman/product/Info",title:"设置商品佣金",width:"800px",onOkCallback:b},{default:o(()=>t[15]||(t[15]=[e("a",{class:"btn-link"},"设置佣金",-1)])),_:2},1032,["params"])]}),_:2},1024)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),h.value>0?(c(),u("div",Ut,[a(g(H),{page:n.page,"onUpdate:page":t[3]||(t[3]=s=>n.page=s),size:n.size,"onUpdate:size":t[4]||(t[4]=s=>n.size=s),total:h.value,onCallback:b},null,8,["page","size","total"])])):m("",!0)]),k.value.length>0?(c(),u("div",Nt,[e("div",Dt,[a(x,null,{default:o(()=>[e("span",null,[t[16]||(t[16]=p("已选择：")),e("b",null,r(k.value.length),1),t[17]||(t[17]=p(" 项"))]),a(E,{title:"您确认要批量删除所选数据吗？",onConfirm:t[5]||(t[5]=s=>I("del"))},{reference:o(()=>t[18]||(t[18]=[])),_:1})]),_:1})])])):m("",!0)])])])}}}),Qt=A(jt,[["__scopeId","data-v-e34df17f"]]);export{Qt as default};
