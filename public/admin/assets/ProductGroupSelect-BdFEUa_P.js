import{d as M,m as S,i as P,u as x,r as n,c as v,o as f,b as s,f as k,w as r,e,g as _,dJ as B,E as h,D,I as E,_ as N}from"./index-CGYuOau0.js";import"./index-B-GURfkM.js";import{d as I}from"./vuedraggable.umd-_1km55l4.js";import{g as O}from"./productGroup-D9PsniyG.js";import{_ as G}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./ProductGroupSelect.vue_vue_type_style_index_0_scoped_a9bbde62_lang-K6p2K1R0.js";const $={class:"dec-goods-group-item"},j={class:"dec-edit-group"},A={class:"dec-edit-group-con"},F={class:"dec-input-group","dynamic-class":".image-ad-title-d"},J={class:"dec-edit-group"},L={class:"dec-edit-group-con"},T={class:"dec-input-group","dynamic-class":".image-ad-title-d"},q={class:"dec-edit-group"},z={class:"dec-edit-group-con"},H={key:0},K={class:"dec-edit-group"},Q={class:"dec-edit-group-con"},R={class:"dec-input-group"},W={class:"dec-edit-group"},X={class:"dec-edit-group-con"},Y={class:"dec-input-group"},Z=["onClick"],ee={key:0,class:"gallery-list-warp"},te={class:"dec-pic-group"},oe={class:"dec-pic-add-con"},de=M({__name:"ProductGroupSelect",props:S({isMultiple:{type:Boolean,default:!1},type:{type:String,default:"goods"}},{productGroups:{default:[]},productGroupsModifiers:{}}),emits:["update:productGroups"],setup(p){const V=p,m=P([]),u=x(p,"productGroups"),w=async l=>{b(l.ids)},b=async(l,t=-1,g=6)=>{try{const d=await O({product_group_ids:l,size:g,page:1});if(t===-1){let i=[];d.filter_result.forEach(c=>{let o={product_group_id:c.product_group_id,product_group_name:c.product_group_name,title:c.product_group_name,sub_title:"新品",menu_title:c.product_group_name,product_num_type:"number",product_num:6,banner_pic:{},banner_link:{link:{},title:""}};i.push(o)}),u.value.push(...i)}else u.value[t].product_group_id=d.filter_result[0].product_group_id,u.value[t].product_group_name=d.filter_result[0].product_group_name,u.value[t].menu_title=d.filter_result[0].product_group_name;m.value=u.value.map(i=>i.product_group_id)}catch(d){E.error(d.message)}},C=l=>{u.value.splice(l,1),m.value.splice(l,1)},U=l=>{b(l.ids,l.index)};return(l,t)=>{const g=n("el-button"),d=n("el-input"),i=n("el-radio"),c=n("el-radio-group");return f(),v("div",null,[s(_(I),{class:"dec-goods-group-list","item-key":"product_group_id",list:u.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:t[0]||(t[0]=()=>{}),onEnd:t[1]||(t[1]=()=>{})},{item:r(({element:o,index:y})=>[e("div",$,[e("div",j,[t[2]||(t[2]=e("div",{class:"dec-edit-group-title"},[e("div",{class:"label"},"商品来源")],-1)),e("div",A,[e("div",F,[s(_(G),{isDrawer:"",onOkCallback:U,title:"选择商品分组",width:"600px",path:"product/productGroup/src/SelectProductGroup",params:{selected_ids:[o.product_group_id],index:y,isMultiple:V.isMultiple},style:{width:"100%"}},{default:r(()=>[s(g,{type:"primary",link:"",icon:_(B)},{default:r(()=>[h(D(o.product_group_name),1)]),_:2},1032,["icon"])]),_:2},1032,["params"])])])]),e("div",J,[t[3]||(t[3]=e("div",{class:"dec-edit-group-title"},[e("div",{class:"label"},"菜单名称")],-1)),e("div",L,[e("div",T,[s(d,{modelValue:o.menu_title,"onUpdate:modelValue":a=>o.menu_title=a,placeholder:"请输入菜单名称"},null,8,["modelValue","onUpdate:modelValue"])])])]),e("div",q,[t[5]||(t[5]=e("div",{class:"dec-edit-group-title"},[e("div",{class:"label"},"商品个数"),e("div",{class:"value"})],-1)),e("div",z,[s(c,{class:"dec-radio-group",modelValue:o.product_num_type,"onUpdate:modelValue":a=>o.product_num_type=a},{default:r(()=>[s(i,{value:"number"},{default:r(()=>[s(d,{style:{width:"90px"},type:"number",modelValue:o.product_num,"onUpdate:modelValue":a=>o.product_num=a,placeholder:"请输入商品数量"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(i,{value:"all"},{default:r(()=>t[4]||(t[4]=[h("全部")])),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),p.type==="product_group"?(f(),v("div",H,[e("div",K,[t[6]||(t[6]=e("div",{class:"dec-edit-group-title"},[e("div",{class:"label"},"主标题")],-1)),e("div",Q,[e("div",R,[s(d,{modelValue:o.title,"onUpdate:modelValue":a=>o.title=a,placeholder:"请输入标题内容"},null,8,["modelValue","onUpdate:modelValue"])])])]),e("div",W,[t[7]||(t[7]=e("div",{class:"dec-edit-group-title"},[e("div",{class:"label"},"副标题")],-1)),e("div",X,[e("div",Y,[s(d,{modelValue:o.sub_title,"onUpdate:modelValue":a=>o.sub_title=a,placeholder:"请输入标题内容"},null,8,["modelValue","onUpdate:modelValue"])])])])])):k("",!0),e("div",{class:"del-item",onClick:a=>C(y)},t[8]||(t[8]=[e("i",{class:"ico-decorate icon-dec-cha"},null,-1)]),8,Z)])]),_:1},8,["list"]),p.isMultiple||u.value.length<1?(f(),v("div",ee,[e("div",te,[e("div",oe,[s(_(G),{isDrawer:"",onOkCallback:w,title:"选择商品分组",width:"600px",path:"product/productGroup/src/SelectProductGroup",params:{selected_ids:m.value,isMultiple:V.isMultiple},style:{width:"100%"}},{default:r(()=>t[9]||(t[9]=[e("a",{class:"dec-pic-add-btn"},[e("i",{class:"ico-decorate icon-dec-jia"}),h("添加商品分组")],-1)])),_:1},8,["params"])])])])):k("",!0)])}}}),ce=N(de,[["__scopeId","data-v-a9bbde62"]]);export{ce as P};
