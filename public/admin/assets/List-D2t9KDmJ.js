import{d as A,K as F,i as _,G as K,q as P,c as g,e as t,f as h,b as o,w as s,M as U,g as p,I as w,r,o as f,E as c,D as k}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{D as E}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as L}from"./Pagination-wR9huHyl.js";import{g as M,d as $,b as G}from"./subgroup-OjPHbSXS.js";import{_ as I}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const R={class:"container"},j={class:"content_wrapper"},H={class:"lyecs-table-list-warp"},J={class:"list-table-tool lyecs-search-warp",style:{"margin-bottom":"0px"}},Q={class:"advanced-search-warp list-table-tool-row"},W={class:"simple-form-warp"},X={class:"simple-form-field"},Y={class:"form-group"},Z={class:"control-container"},ee={class:"simple-form-field"},te={class:"form-group"},oe={class:"control-container"},se={class:"table-container"},ae={style:{position:"relative"}},le={class:"empty-warp"},ne={key:0,class:"empty-bg"},ie={key:0,class:"pagination-con"},re={key:0,class:"selected-action-warp"},de={class:"selected-action"},ye=A({__name:"List",setup(pe){const S=F(),C=_(),d=_(!0),u=_(0),m=_([]),n=K({page:1,size:S.get("pageSize"),sortField:"",sortOrder:"",groupName:""}),i=async()=>{d.value=!0;try{const l=await M({...n});C.value=l.records,u.value=l.total}catch(l){w.error(l.message)}finally{d.value=!1}};P(()=>{i()});const v=()=>{i()},x=({prop:l,order:e})=>{n.sortField=l,n.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",i()},N=async l=>{try{const e=await G(l,{ids:m.value});w.success("操作成功"),i()}catch(e){w.error(e.message)}},z=l=>{m.value=l.map(e=>e.groupId)};return(l,e)=>{const b=r("el-button"),D=r("TigInput"),y=r("el-table-column"),V=r("el-divider"),T=r("el-table"),B=r("a-spin"),O=r("el-popconfirm"),q=r("el-space");return f(),g("div",R,[t("div",j,[t("div",H,[t("div",J,[t("div",Q,[t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[o(D,{name:"keyword",modelValue:n.groupName,"onUpdate:modelValue":e[0]||(e[0]=a=>n.groupName=a),placeholder:"输入分组名称",onKeyup:U(v,["enter"]),clearable:"",onClear:v},{append:s(()=>[o(b,{onClick:v},{default:s(()=>e[4]||(e[4]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",ee,[t("div",te,[t("div",oe,[o(p(I),{isDrawer:"",onOkCallback:i,title:"新建分组",width:"600px",path:"salesman/subgroup/Info",params:{act:"add"}},{default:s(()=>[o(b,{type:"primary"},{default:s(()=>e[5]||(e[5]=[c("新建分组")])),_:1})]),_:1})])])])])])]),t("div",se,[o(B,{spinning:d.value},{default:s(()=>[o(T,{data:C.value,"row-key":"groupId",onSelectionChange:z,total:u.value,onSortChange:x,loading:d.value},{empty:s(()=>[t("div",le,[d.value?h("",!0):(f(),g("div",ne,"暂无数据"))])]),default:s(()=>[o(y,{label:"分组名称",prop:"groupId",sortable:"custom"},{default:s(({row:a})=>[t("div",ae,[t("div",null,k(a.groupName),1)])]),_:1}),o(y,{label:"创建时间",prop:"addTime",sortable:"custom"},{default:s(({row:a})=>[t("div",null,k(a.addTime),1)]),_:1}),o(y,{label:"操作",fixed:"right",width:150},{default:s(({row:a})=>[o(p(I),{isDrawer:"",onOkCallback:i,title:"编辑分组",width:"600px",path:"salesman/subgroup/Info",params:{act:"detail",id:a.groupId}},{default:s(()=>e[6]||(e[6]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(V,{direction:"vertical"}),o(p(E),{onAfterDelete:i,requestApi:p($),params:{id:a.groupId}},{default:s(()=>e[7]||(e[7]=[c("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),u.value>0?(f(),g("div",ie,[o(p(L),{page:n.page,"onUpdate:page":e[1]||(e[1]=a=>n.page=a),size:n.size,"onUpdate:size":e[2]||(e[2]=a=>n.size=a),total:u.value,onCallback:i},null,8,["page","size","total"])])):h("",!0)]),m.value.length>0?(f(),g("div",re,[t("div",de,[o(q,null,{default:s(()=>[t("span",null,[e[8]||(e[8]=c("已选择：")),t("b",null,k(m.value.length),1),e[9]||(e[9]=c(" 项"))]),o(O,{title:"您确认要批量删除所选数据吗？",onConfirm:e[3]||(e[3]=a=>N("del"))},{reference:s(()=>[o(b,null,{default:s(()=>e[10]||(e[10]=[c("批量删除")])),_:1})]),_:1})]),_:1})])])):h("",!0)])])])}}});export{ye as default};
