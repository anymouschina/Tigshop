import{d as F,j as _,I as G,x as H,r as i,o as m,c as f,e as t,b as e,w as a,f as v,h as y,K as V,L as M,H as h,G as w,q as z,p as T,i as J,_ as Q}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{_ as R}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as W}from"./Pagination-8eb7b6b1.js";import{u as X}from"./config-9548fa9b.js";import{g as Y,d as Z,b as ee}from"./orderInvoice-5f5f2943.js";import{_ as L}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const k=b=>(T("data-v-852664f2"),b=b(),J(),b),te={class:"container"},oe={class:"content_wrapper"},se={key:0,class:"container"},ae={class:"lyecs-table-list-warp"},le={class:"list-table-tool lyecs-search-warp"},ne={class:"advanced-search-warp list-table-tool-row"},ie={class:"simple-form-warp"},de={class:"simple-form-field"},ce={class:"form-group"},re={class:"control-container"},_e=k(()=>t("span",{class:"iconfont icon-chakan1"},null,-1)),pe={class:"simple-form-field"},ue={class:"form-group"},me=k(()=>t("label",{class:"control-label"},[t("span",null,"发票类型：")],-1)),fe={class:"control-container"},ve={class:"simple-form-field"},he={class:"form-group"},be=k(()=>t("label",{class:"control-label"},[t("span",null,"发票状态：")],-1)),ge={class:"control-container"},ye={class:"simple-form-field"},we={class:"list-table-tool-row"},ke={class:"list-table-tool-col"},Ce={key:0},Se={class:"table-container"},Ve={class:"btn-link"},Ie=k(()=>t("a",{class:"btn-link"},"编辑",-1)),xe={class:"empty-warp"},ze={key:0,class:"empty-bg"},Le={key:0,class:"pagination-con"},Oe=F({__name:"List",setup(b){const O=X(),I=_(),p=_(!0),g=_(0),u=_([]);_(!1);const l=G({page:1,size:O.get("page_size"),sort_field:"",sort_order:"",keyword:"",invoice_type:0,shop_type:0,status:-1}),U=_(0),c=async()=>{p.value=!0;try{const n=await Y({...l});I.value=n.filter_result,g.value=n.total}catch(n){V.error(n.message)}finally{p.value=!1}};H(()=>{c()});const C=()=>{c()},B=({prop:n,order:s})=>{l.sort_field=n,l.sort_order=s=="ascending"?"asc":s=="descending"?"desc":"",c()},D=async n=>{try{const s=await ee(n,{ids:u.value});V.success(s.message),c()}catch(s){V.error(s.message)}},K=n=>{u.value=n.map(s=>s.id)};return(n,s)=>{const S=i("el-button"),N=i("el-input"),r=i("el-option"),x=i("el-select"),q=i("el-popconfirm"),A=i("el-space"),P=i("el-form"),d=i("el-table-column"),$=i("el-divider"),j=i("el-table"),E=i("a-spin");return m(),f("div",te,[t("div",oe,[U.value!=null?(m(),f("div",se,[t("div",ae,[t("div",le,[e(P,{model:l},{default:a(()=>[t("div",ne,[t("div",ie,[t("div",de,[t("div",ce,[t("div",re,[e(N,{modelValue:l.keyword,"onUpdate:modelValue":s[0]||(s[0]=o=>l.keyword=o),name:"keyword",placeholder:"输入内容",onKeyup:M(C,["enter"])},{append:a(()=>[e(S,{onClick:C},{default:a(()=>[_e]),_:1})]),_:1},8,["modelValue"])])])]),t("div",pe,[t("div",ue,[me,t("div",fe,[e(x,{modelValue:l.invoice_type,"onUpdate:modelValue":s[1]||(s[1]=o=>l.invoice_type=o)},{default:a(()=>[e(r,{value:0,label:"请选择..."}),e(r,{value:1,label:"普通发票"}),e(r,{value:2,label:"增值发票"})]),_:1},8,["modelValue"])])])]),t("div",ve,[t("div",he,[be,t("div",ge,[e(x,{modelValue:l.status,"onUpdate:modelValue":s[2]||(s[2]=o=>l.status=o)},{default:a(()=>[e(r,{value:-1,label:"请选择..."}),e(r,{value:0,label:"待处理"}),e(r,{value:1,label:"已开"}),e(r,{value:2,label:"失败/作废"})]),_:1},8,["modelValue"])])])]),t("div",ye,[e(S,{type:"primary",onClick:C},{default:a(()=>[h("搜索")]),_:1})])])]),t("div",we,[t("div",ke,[e(A,null,{default:a(()=>[e(q,{title:"您确认要批量删除所选数据吗？",onConfirm:s[3]||(s[3]=o=>D("del"))},{reference:a(()=>[e(S,{disabled:u.value.length===0},{default:a(()=>[h("批量删除")]),_:1},8,["disabled"])]),_:1}),u.value.length>0?(m(),f("span",Ce,[h(" 已选择："),t("b",null,w(u.value.length),1),h(" 项 ")])):y("",!0)]),_:1})])])]),_:1},8,["model"])]),t("div",Se,[e(E,{spinning:p.value},{default:a(()=>[e(j,{data:I.value,loading:p.value,total:g.value,"row-key":"id",onSelectionChange:K,onSortChange:B},{empty:a(()=>[t("div",xe,[p.value?y("",!0):(m(),f("div",ze,"暂无数据"))])]),default:a(()=>[e(d,{type:"selection",width:"32"}),e(d,{label:"申请会员",prop:"username",width:"120"}),e(d,{label:"发票类型",width:"110"},{default:a(({row:o})=>[t("span",{style:z({color:o.invoice_type===2?"red":"black"})},w(o.invoice_type_name),5)]),_:1}),e(d,{label:"公司名称/抬头",prop:"company_name"}),e(d,{label:"金额(￥)",prop:"amount",width:"80"}),e(d,{label:"申请订单"},{default:a(({row:o})=>[e(v(L),{params:{act:"detail",id:o.order_id},showClose:!1,showOnOk:!1,title:"订单详情 "+o.order_sn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:c},{default:a(()=>[t("a",Ve,w(o.order_sn),1)]),_:2},1032,["params","title"])]),_:1}),e(d,{width:160,label:"申请日期",prop:"add_time"}),e(d,{label:"申请状态"},{default:a(({row:o})=>[t("span",{style:z({color:o.status===1?"green":o.status===2?"black":"red"})},w(o.status_name),5)]),_:1}),e(d,{width:150,fixed:"right",label:"操作"},{default:a(({row:o})=>[e(v(L),{params:{act:"detail",id:o.id},isDrawer:"",path:"finance/orderInvoice/Info",title:"编辑发票申请",width:"700px",onOkCallback:c},{default:a(()=>[Ie]),_:2},1032,["params"]),e($,{direction:"vertical"}),e(v(R),{params:{id:o.id},requestApi:v(Z),onAfterDelete:c},{default:a(()=>[h("删除")]),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),g.value>0?(m(),f("div",Le,[e(v(W),{page:l.page,"onUpdate:page":s[4]||(s[4]=o=>l.page=o),size:l.size,"onUpdate:size":s[5]||(s[5]=o=>l.size=o),total:g.value,onCallback:c},null,8,["page","size","total"])])):y("",!0)])])])):y("",!0)])])}}});const Ee=Q(Oe,[["__scopeId","data-v-852664f2"]]);export{Ee as default};
