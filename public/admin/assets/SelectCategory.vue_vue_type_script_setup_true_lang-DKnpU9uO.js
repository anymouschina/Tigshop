import{a as k}from"./category-B3nMG9Bb.js";import{u as I}from"./category-BQLd1cDS.js";import{d as N,m as M,u as f,i as o,q as x,I as B,j as L,o as V,g as b,dF as w}from"./index-DrbzVNl6.js";const _=N({__name:"SelectCategory",props:M({multiple:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!0},categoryList:{type:Array,default:()=>[]}},{categoryId:{},categoryIdModifiers:{},categoryName:{},categoryNameModifiers:{}}),emits:["update:categoryId","update:categoryName"],setup(c,{expose:m}){const l=c,t=f(c,"categoryId"),i=f(c,"categoryName"),p={label:"categoryName",value:"categoryId",children:"children",multiple:l.multiple,checkStrictly:l.checkStrictly},g=I(),n=o([]),d=o(!1),r=o(!1);o(!1),x(()=>{l.categoryList.length>1?n.value=l.categoryList:u()});const u=async a=>{if(r.value!==!0){d.value=!0;try{const e=await k(a);n.value=e,g.categoryTree=e}catch(e){B.error(e.message)}finally{d.value=!1,r.value=!0}}},y=o(),v=a=>{if(l.multiple==!0){const e=a.map(s=>s[s.length-1]);t.value=e}else{const e=y.value.getCheckedNodes();i.value=e[0]?e[0].text:"",t.value=a?a[a.length-1]:0}},h=a=>{a&&(r.value=!1,g.categoryTree=null,l.multiple==!0?t.value=[]:t.value="")},C=a=>{a&&u()},S=()=>{l.multiple==!0?t.value=[]:(t.value=0,i.value="")};return m({SelectShopChange:h,loadCategory:u,loaded:r}),(a,e)=>(V(),L(b(w),{ref_key:"cascaderRef",ref:y,modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value=s),options:n.value,props:p,class:"cascader",clearable:"",placeholder:"选择分类",onChange:v,onClear:S,onVisibleChange:C},null,8,["modelValue","options"]))}});export{_};
