import{d as L,K as P,i as p,G as E,q as M,c as v,e as t,f as h,b as o,w as s,M as $,g as f,I as C,r as i,o as b,E as g,D as w,l as I,_ as G}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{D as R}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as j}from"./Pagination-wR9huHyl.js";import{g as H,d as J,b as Q}from"./orderInvoice-BMK9K2jn.js";import{_ as T}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const W={class:"container"},X={class:"content_wrapper"},Y={key:0,class:"container"},Z={class:"lyecs-table-list-warp"},ee={class:"list-table-tool lyecs-search-warp"},te={class:"advanced-search-warp list-table-tool-row"},oe={class:"simple-form-warp"},le={class:"simple-form-field"},se={class:"form-group"},ae={class:"control-container"},ne={class:"simple-form-field"},ie={class:"form-group"},de={class:"control-container"},re={class:"simple-form-field"},ce={class:"form-group"},pe={class:"control-container"},ue={class:"simple-form-field"},_e={class:"list-table-tool-row"},me={class:"list-table-tool-col"},ve={key:0},fe={class:"table-container"},be={class:"btn-link"},ge={class:"empty-warp"},ye={key:0,class:"empty-bg"},he={key:0,class:"pagination-con"},we=L({__name:"List",setup(ke){const x=P(),S=p(),u=p(!0),y=p(0),_=p([]);p(!1);const a=E({page:1,size:x.get("pageSize"),sortField:"",sortOrder:"",keyword:"",shopType:0}),z=p(0),r=async()=>{u.value=!0;try{const n=await H({...a});S.value=n.records,y.value=n.total}catch(n){C.error(n.message)}finally{u.value=!1}};M(()=>{r()});const c=()=>{r()},D=({prop:n,order:e})=>{a.sortField=n,a.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",r()},O=async n=>{try{const e=await Q(n,{ids:_.value});C.success("操作成功"),r()}catch(e){C.error(e.message)}},N=n=>{_.value=n.map(e=>e.id)};return(n,e)=>{const k=i("el-button"),U=i("TigInput"),m=i("el-option"),V=i("el-select"),B=i("el-popconfirm"),K=i("el-space"),d=i("el-table-column"),q=i("el-divider"),A=i("el-table"),F=i("a-spin");return b(),v("div",W,[t("div",X,[z.value!=null?(b(),v("div",Y,[t("div",Z,[t("div",ee,[t("div",te,[t("div",oe,[t("div",le,[t("div",se,[t("div",ae,[o(U,{modelValue:a.keyword,"onUpdate:modelValue":e[0]||(e[0]=l=>a.keyword=l),name:"keyword",placeholder:"输入内容",onKeyup:$(c,["enter"]),clearable:"",onClear:c},{append:s(()=>[o(k,{onClick:c},{default:s(()=>e[6]||(e[6]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",ne,[t("div",ie,[e[7]||(e[7]=t("label",{class:"control-label"},[t("span",null,"发票类型：")],-1)),t("div",de,[o(V,{modelValue:a.invoiceType,"onUpdate:modelValue":e[1]||(e[1]=l=>a.invoiceType=l),clearable:"",onChange:c},{default:s(()=>[o(m,{value:1,label:"普通发票"}),o(m,{value:2,label:"增值发票"})]),_:1},8,["modelValue"])])])]),t("div",re,[t("div",ce,[e[8]||(e[8]=t("label",{class:"control-label"},[t("span",null,"发票状态：")],-1)),t("div",pe,[o(V,{modelValue:a.status,"onUpdate:modelValue":e[2]||(e[2]=l=>a.status=l),clearable:"",onChange:c},{default:s(()=>[o(m,{value:0,label:"待处理"}),o(m,{value:1,label:"已开"}),o(m,{value:2,label:"失败/作废"})]),_:1},8,["modelValue"])])])]),t("div",ue,[o(k,{type:"primary",onClick:c},{default:s(()=>e[9]||(e[9]=[g("搜索")])),_:1})])])]),t("div",_e,[t("div",me,[o(K,null,{default:s(()=>[o(B,{title:"您确认要批量删除所选数据吗？",onConfirm:e[3]||(e[3]=l=>O("del"))},{reference:s(()=>[o(k,{disabled:_.value.length===0},{default:s(()=>e[10]||(e[10]=[g("批量删除")])),_:1},8,["disabled"])]),_:1}),_.value.length>0?(b(),v("span",ve,[e[11]||(e[11]=g(" 已选择：")),t("b",null,w(_.value.length),1),e[12]||(e[12]=g(" 项 "))])):h("",!0)]),_:1})])])]),t("div",fe,[o(F,{spinning:u.value},{default:s(()=>[o(A,{data:S.value,loading:u.value,total:y.value,"row-key":"id",onSelectionChange:N,onSortChange:D},{empty:s(()=>[t("div",ge,[u.value?h("",!0):(b(),v("div",ye,"暂无数据"))])]),default:s(()=>[o(d,{type:"selection",width:"32"}),o(d,{label:"申请会员",prop:"username",width:"120"}),o(d,{label:"发票类型",width:"110"},{default:s(({row:l})=>[t("span",{style:I({color:l.invoiceType===2?"red":"black"})},w(l.invoiceType_name),5)]),_:1}),o(d,{label:"公司名称/抬头",prop:"companyName"}),o(d,{label:"金额(￥)",prop:"amount",width:"80"}),o(d,{label:"申请订单"},{default:s(({row:l})=>[o(f(T),{params:{act:"detail",id:l.orderId},showClose:!1,showOnOk:!1,title:"订单详情 "+l.orderSn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:r},{default:s(()=>[t("a",be,w(l.orderSn),1)]),_:2},1032,["params","title"])]),_:1}),o(d,{width:160,label:"申请日期",prop:"addTime"}),o(d,{label:"申请状态"},{default:s(({row:l})=>[t("span",{style:I({color:l.status===1?"green":l.status===2?"black":"red"})},w(l.statusName),5)]),_:1}),o(d,{width:150,fixed:"right",label:"操作"},{default:s(({row:l})=>[o(f(T),{params:{act:"detail",id:l.id},isDrawer:"",path:"finance/orderInvoice/Info",title:"编辑发票申请",width:"700px",onOkCallback:r},{default:s(()=>e[13]||(e[13]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(q,{direction:"vertical"}),o(f(R),{params:{id:l.id},requestApi:f(J),onAfterDelete:r},{default:s(()=>e[14]||(e[14]=[g("删除")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),y.value>0?(b(),v("div",he,[o(f(j),{page:a.page,"onUpdate:page":e[4]||(e[4]=l=>a.page=l),size:a.size,"onUpdate:size":e[5]||(e[5]=l=>a.size=l),total:y.value,onCallback:r},null,8,["page","size","total"])])):h("",!0)])])])):h("",!0)])])}}}),Oe=G(we,[["__scopeId","data-v-c414db5a"]]);export{Oe as default};
