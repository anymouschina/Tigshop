import{d as I,de as L,j as m,E as j,s as E,x as F,r as s,o as c,c as $,e as V,k as C,w as t,b as o,f as A,h as k,H as _,$ as H,a0 as K,K as f}from"./index-7c2d2aef.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import"./config-9548fa9b.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import"./region-e0d291a6.js";import{_ as M}from"./SelectShopProductCategory.vue_vue_type_script_setup_true_lang-f6469aa9.js";/* empty css             */import{c as O,e as T}from"./shopProductCategory-b31d5b73.js";import{u as z}from"./shopProductCategory-792e0c23.js";import"./time-290942a2.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";import"./region-05802f67.js";const G={class:"container"},J={class:"content_wrapper"},Q={class:"lyecs-form-table"},_e=I({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean,parentId:Number},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:N,emit:B}){L();const d=B,n=x,i=m(!0),g=j().currentRoute.value.query,p=m(n.isDialog?n.act:String(g.act)),v=m(n.isDialog?n.id:Number(g.id)),y=p.value==="add"?"create":"update",b=E(),e=m({is_show:1,sort_order:50}),D=async()=>{try{const a=await O(p.value,{id:v.value});Object.assign(e.value,a.item)}catch(a){f.error(a.message),d("close")}finally{i.value=!1}};F(()=>{p.value==="detail"?D():i.value=!1,y==="create"&&(e.value.parent_id=n.parentId,console.log(e.value.parent_id))});const w=async()=>{await b.value.validate();try{d("update:confirmLoading",!0);const a=await T(y,{id:v.value,...e.value});d("submitCallback",a),f.success(a.message),z().clearShopProductCategory()}catch(a){f.error(a.message)}finally{d("update:confirmLoading",!1)}};return N({onFormSubmit:()=>{w()}}),(a,r)=>{const h=s("el-input"),u=s("el-form-item"),S=s("el-radio"),P=s("el-radio-group"),R=s("el-button"),U=s("el-form"),q=s("a-spin");return c(),$("div",G,[V("div",J,[V("div",Q,[i.value?k("",!0):(c(),C(U,{key:0,ref_key:"formRef",ref:b,model:e.value,"label-width":"auto"},{default:t(()=>[o(u,{rules:[{required:!0,message:"分类名称不能为空!"}],label:"分类名称",prop:"category_name"},{default:t(()=>[o(h,{modelValue:e.value.category_name,"onUpdate:modelValue":r[0]||(r[0]=l=>e.value.category_name=l)},null,8,["modelValue"])]),_:1}),o(u,{label:"上级分类",prop:"parent_id"},{default:t(()=>[i.value?k("",!0):(c(),C(A(M),{key:0,category_id:e.value.parent_id,"onUpdate:category_id":r[1]||(r[1]=l=>e.value.parent_id=l),multiple:!1,style:{width:"100%"}},null,8,["category_id"]))]),_:1}),o(u,{label:"排序",prop:"sort_order"},{default:t(()=>[o(h,{modelValue:e.value.sort_order,"onUpdate:modelValue":r[2]||(r[2]=l=>e.value.sort_order=l)},null,8,["modelValue"])]),_:1}),o(u,{label:"是否显示",prop:"is_show"},{default:t(()=>[o(P,{modelValue:e.value.is_show,"onUpdate:modelValue":r[3]||(r[3]=l=>e.value.is_show=l)},{default:t(()=>[o(S,{value:1},{default:t(()=>[_("是")]),_:1}),o(S,{value:0},{default:t(()=>[_("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),H(o(u,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[o(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:w},{default:t(()=>[_("提交 ")]),_:1},512)]),_:1},512),[[K,!n.isDialog]])]),_:1},8,["model"])),o(q,{spinning:i.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{_e as default};
