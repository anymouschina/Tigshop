import{d as B,i as d,C as O,s as U,q as E,I as g,r,c as L,o as u,e as m,j as c,f as v,w as a,b as t,a3 as j,E as f,g as S,a4 as q,_ as D}from"./index-DrbzVNl6.js";import{a as F,l as z}from"./order-DqMQuu0g.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";import"./index-CeQDmMxd.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{S as A}from"./SelectLogisticsCompany-D6TqCoRE.js";import{S as G}from"./SelectShippingType-CTSIq8im.js";/* empty css             */import"./time-Bh5UhrfW.js";import"./logisticsCompany-BiUbX96X.js";import"./shippingType-C5vYh2lk.js";const H={class:"container"},J={class:"content_wrapper"},K={class:"lyecs-form-table"},P=B({__name:"EditShipping",props:{id:{type:Number,default:0},form:{type:Object,default:()=>({})},valueName:String,isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(I,{expose:V,emit:N}){const n=N,b=I,y=d(!0),w=O().currentRoute.value.query,_=d(b.isDialog?b.id:Number(w.id));d(1);const h=U(),e=d({items:[]});E(()=>{C()});const C=async()=>{try{const l=await F("detail",{id:_.value});Object.assign(e.value,l)}catch(l){g.error(l.message),n("close")}finally{y.value=!1}},M=async()=>{await h.value.validate();try{n("update:confirmLoading",!0);const l=await z({id:_.value,shippingMethod:e.value.shippingMethod,logisticsId:e.value.logisticsId,trackingNo:e.value.trackingNo});n("submitCallback",l),g.success("操作成功")}catch(l){g.error(l.message)}finally{n("update:confirmLoading",!1)}},T=l=>{e.value.logisticsId=l};return V({onFormSubmit:()=>{M()}}),(l,o)=>{const p=r("el-radio"),R=r("el-radio-group"),s=r("el-form-item"),k=r("TigInput"),x=r("el-form");return u(),L("div",H,[m("div",J,[m("div",K,[o[9]||(o[9]=m("div",{class:"button-card babyBlue pd15"}," 提示：在当前页面修改配送方式或物流公司不会更改订单运费，如需修改运费请编辑订单金额（仅对未支付的订单支持订单金额编辑） ",-1)),y.value?v("",!0):(u(),c(x,{key:0,ref_key:"formRef",ref:h,model:e.value,"label-width":"auto"},{default:a(()=>[t(s,{label:"配送方式",prop:"shippingMethod"},{default:a(()=>[t(R,{modelValue:e.value.shippingMethod,"onUpdate:modelValue":o[0]||(o[0]=i=>e.value.shippingMethod=i)},{default:a(()=>[t(p,{value:1},{default:a(()=>o[5]||(o[5]=[f("物流配送")])),_:1}),t(p,{value:2},{default:a(()=>o[6]||(o[6]=[f("商家配送")])),_:1}),t(p,{value:3},{default:a(()=>o[7]||(o[7]=[f("无需配送")])),_:1}),t(p,{value:4},{default:a(()=>o[8]||(o[8]=[f("电子面单")])),_:1})]),_:1},8,["modelValue"])]),_:1}),j(m("div",null,[t(s,{label:"配送类型",prop:"shippingTypeId"},{default:a(()=>[t(S(G),{id:e.value.shippingTypeId,"onUpdate:id":o[1]||(o[1]=i=>e.value.shippingTypeId=i),onChange:T},null,8,["id"])]),_:1}),t(s,{label:"物流公司",prop:"logisticsId"},{default:a(()=>[t(S(A),{id:e.value.logisticsId,"onUpdate:id":o[2]||(o[2]=i=>e.value.logisticsId=i)},null,8,["id"])]),_:1}),e.value.shippingMethod===1?(u(),c(s,{key:0,label:"快递单号",prop:"trackingNo"},{default:a(()=>[t(k,{classType:"tig-form-input",modelValue:e.value.trackingNo,"onUpdate:modelValue":o[3]||(o[3]=i=>e.value.trackingNo=i)},null,8,["modelValue"])]),_:1})):v("",!0),e.value.shippingMethod===4?(u(),c(s,{key:1,label:"发货备注",prop:"billRemark"},{default:a(()=>[t(k,{classType:"tig-form-input",modelValue:e.value.billRemark,"onUpdate:modelValue":o[4]||(o[4]=i=>e.value.billRemark=i),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})):v("",!0)],512),[[q,e.value.shippingMethod===1||e.value.shippingMethod===4]])]),_:1},8,["model"]))])])])}}}),ne=D(P,[["__scopeId","data-v-9a2bde20"]]);export{ne as default};
