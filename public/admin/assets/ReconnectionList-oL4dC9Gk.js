import{y as T,d as z,m as V,u as I,aa as B,c as v,o as l,e,n as A,_ as F,dC as O,i as _,G as R,q as $,b as n,r as d,w as g,E as j,F as G,a as J,j as S,g as b,aN as P,D as w,I as H}from"./index-CGYuOau0.js";import{r as K,i as Q}from"./format-DFT-VJzO.js";import{S as W}from"./StatusDot-YMdUi2kT.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";const X=c=>T({prefix:"/im",url:"servant/servant/transfer_list",method:"get",params:c}),Y=z({__name:"CheckIcon",props:{selected:{},selectedModifiers:{}},emits:V(["update:selected","selected-change"],["update:selected"]),setup(c,{emit:m}){const u=I(c,"selected"),p=m,t=()=>{p("selected-change",!u.value)},r=B(()=>u.value);return(k,i)=>(l(),v("div",{onClick:t,class:"box-warp"},[e("div",{class:A(["check-icon iconfont icon-dagou",{selected:r.value}])},null,2)]))}}),Z=F(Y,[["__scopeId","data-v-f39fe1dc"]]),ee={class:"container"},se={class:"lyecs-table-list-warp",style:{"margin-bottom":"0"}},te={class:"list-table-tool lyecs-search-warp"},ae={class:"advanced-search-warp list-table-tool-row",style:{"margin-bottom":"-20px"}},oe={class:"simple-form-warp"},ne={class:"simple-form-field"},le={class:"form-group"},ce={class:"control-container"},re={class:"simple-form-field"},ie={class:"table-container"},de={class:"table-list"},ue=["onClick"],_e={class:"zent-badge"},ve={class:"servant-select-dialog-m_item-content_3qFlV"},me={class:"servant-select-dialog-m_item-name_1Cf5B"},pe={class:"servant-select-dialog-m_item-count_2JOT0"},fe={class:"zenticon-check-circle"},he=z({__name:"ReconnectionList",props:V({conversation_id:{type:Number,default:0}},{servant_id:{},servant_idModifiers:{}}),emits:["update:servant_id"],setup(c,{expose:m}){const u=B(()=>O().userInfo),p=I(c,"servant_id"),t=_([]),r=_(!0),k=_(0),i=R({page:1,size:9999,username:""}),f=async()=>{r.value=!0;try{const s=await X({...i});t.value=s.filter_result,t.value.forEach(a=>{a.selected=!1}),k.value=s.total,M()}catch(s){H.error(s.message)}finally{r.value=!1}};function M(){const s=t.value.find(a=>a.user.admin_id===u.value.admin_id);if(s){const a=t.value.indexOf(s);t.value.splice(a,1),t.value.unshift(s)}return t.value}$(()=>{f()});const N=()=>{f()},E=_(0),L=s=>{if(s!=0){let a=t.value[s].selected;t.value.forEach((h,x)=>{h.selected=!1}),E.value=s,t.value[s].selected=!a,p.value=t.value[s].servant_id}};return m({loadFilter:f}),(s,a)=>{const h=d("el-input"),x=d("el-button"),U=d("el-form"),y=d("el-avatar"),q=d("a-spin");return l(),v("div",ee,[e("div",se,[e("div",te,[n(U,{model:i},{default:g(()=>[e("div",ae,[e("div",oe,[e("div",ne,[e("div",le,[a[1]||(a[1]=e("label",{class:"control-label"},[e("span",null,"搜索客服：")],-1)),e("div",ce,[n(h,{modelValue:i.username,"onUpdate:modelValue":a[0]||(a[0]=o=>i.username=o)},null,8,["modelValue"])])])]),e("div",re,[n(x,{type:"primary",onClick:N},{default:g(()=>a[2]||(a[2]=[j("搜索")])),_:1})])])])]),_:1},8,["model"])]),e("div",ie,[n(q,{spinning:r.value},{default:g(()=>[e("div",de,[(l(!0),v(G,null,J(t.value,(o,D)=>(l(),v("div",{onClick:C=>L(D),class:"table-item"},[e("div",_e,[b(P)(String(String(o.user.avatar)))=="def"?(l(),S(y,{key:0,class:"zent-avatar-image",src:b(K)(o.user.avatar)},null,8,["src"])):(l(),S(y,{key:1,class:"zent-avatar-image",src:b(Q)(o.user.avatar)},null,8,["src"])),n(W,{flicker:o.status==1,size:10,color:o.status==1?"#3ebd00":o.status==2?"#f44444":"#d0d0d0",class:"dot"},null,8,["flicker","color"])]),e("div",ve,[e("div",me,w(o.user.username),1),e("div",pe," 当前接待人数："+w(o.conversation_num),1)]),e("div",fe,[n(Z,{selected:o.selected,"onUpdate:selected":C=>o.selected=C},null,8,["selected","onUpdate:selected"])])],8,ue))),256))])]),_:1},8,["spinning"])])])])}}}),Ce=F(he,[["__scopeId","data-v-2be70010"]]);export{Ce as default};
