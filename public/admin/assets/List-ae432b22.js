import{d as L,j as m,I as M,x as O,r as i,o as r,c as _,e,b as t,w as l,f as b,h as y,K as w,L as $,H as h,G as f}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{M as j}from"./MobileCard-6c6c2c27.js";import{_ as E}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as F}from"./Pagination-8eb7b6b1.js";import{u as G}from"./config-9548fa9b.js";import{g as H,d as T,b as J}from"./enquiry-d5265089.js";import{_ as Q}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const R={class:"container"},W={class:"content_wrapper"},X={class:"lyecs-table-list-warp"},Y={class:"list-table-tool lyecs-search-warp"},Z={class:"advanced-search-warp list-table-tool-row"},ee={class:"simple-form-warp"},te={class:"simple-form-field"},oe={class:"form-group"},se=e("label",{class:"control-label"},[e("span",null,"状态：")],-1),le={class:"control-container"},ae={class:"simple-form-field"},ne={class:"form-group"},ie=e("label",{class:"control-label"},[e("span",null,"商品ID：")],-1),ce={class:"control-container"},de={class:"simple-form-field"},re={class:"form-group"},_e=e("label",{class:"control-label"},[e("span",null,"手机号：")],-1),pe={class:"control-container"},ue=e("span",{class:"iconfont icon-chakan1"},null,-1),me={class:"list-table-tool-row"},fe={class:"list-table-tool-col"},ve={key:0},be=e("div",{class:"list-table-tool-col"},null,-1),he={class:"table-container"},ge={key:0,class:"green"},ye={key:1,class:"gray"},we={class:"btn-link"},ke={class:"empty-warp"},Ce={key:0,class:"empty-bg"},Ve={key:0,class:"pagination-con"},Le=L({__name:"List",setup(Se){const I=G(),k=m([]),p=m(!0),v=m(0),u=m([]);m(!1);const a=M({page:1,size:I.get("page_size"),sort_field:"",sort_order:"",mobile:"",product_id:"",status:"-1"}),c=async()=>{p.value=!0;try{const n=await H({...a});k.value=n.filter_result,v.value=n.total}catch(n){w.error(n.message)}finally{p.value=!1}};O(()=>{c()});const C=()=>{c()},x=({prop:n,order:s})=>{a.sort_field=n,a.sort_order=s=="ascending"?"asc":s=="descending"?"desc":"",c()},z=async n=>{try{const s=await J(n,{ids:u.value});w.success(s.message),c()}catch(s){w.error(s.message)}},D=n=>{u.value=n.map(s=>s.id)};return(n,s)=>{const g=i("el-option"),q=i("el-select"),V=i("el-input"),S=i("el-button"),N=i("el-popconfirm"),P=i("el-space"),U=i("el-form"),d=i("el-table-column"),B=i("el-divider"),A=i("el-table"),K=i("a-spin");return r(),_("div",R,[e("div",W,[e("div",X,[e("div",Y,[t(U,{model:a},{default:l(()=>[e("div",Z,[e("div",ee,[e("div",te,[e("div",oe,[se,e("div",le,[t(q,{modelValue:a.status,"onUpdate:modelValue":s[0]||(s[0]=o=>a.status=o),clearable:""},{default:l(()=>[t(g,{value:"-1",label:"请选择..."}),t(g,{value:"0",label:"未回复"}),t(g,{value:"1",label:"已回复"})]),_:1},8,["modelValue"])])])]),e("div",ae,[e("div",ne,[ie,e("div",ce,[t(V,{modelValue:a.product_id,"onUpdate:modelValue":s[1]||(s[1]=o=>a.product_id=o),name:"product_id",placeholder:"输入商品ID"},null,8,["modelValue"])])])]),e("div",de,[e("div",re,[_e,e("div",pe,[t(V,{modelValue:a.mobile,"onUpdate:modelValue":s[2]||(s[2]=o=>a.mobile=o),name:"mobile",placeholder:"输入询价人手机号",onKeyup:$(C,["enter"])},{append:l(()=>[t(S,{onClick:C},{default:l(()=>[ue]),_:1})]),_:1},8,["modelValue"])])])])])]),e("div",me,[e("div",fe,[t(P,null,{default:l(()=>[t(N,{title:"您确认要批量删除所选数据吗？",onConfirm:s[3]||(s[3]=o=>z("del"))},{reference:l(()=>[t(S,{disabled:u.value.length===0},{default:l(()=>[h("批量删除")]),_:1},8,["disabled"])]),_:1}),u.value.length>0?(r(),_("span",ve,[h(" 已选择："),e("b",null,f(u.value.length),1),h(" 项 ")])):y("",!0)]),_:1})]),be])]),_:1},8,["model"])]),e("div",he,[t(K,{spinning:p.value},{default:l(()=>[t(A,{data:k.value,loading:p.value,total:v.value,"row-key":"id",onSelectionChange:D,onSortChange:x},{empty:l(()=>[e("div",ke,[p.value?y("",!0):(r(),_("div",Ce,"暂无数据"))])]),default:l(()=>[t(d,{type:"selection",width:"32"}),t(d,{label:"询价内容",prop:"content"}),t(d,{width:100,label:"状态"},{default:l(({row:o})=>[o.status===1?(r(),_("span",ge,"已回复")):(r(),_("span",ye,"未回复"))]),_:1}),t(d,{width:150,label:"联系方式"},{default:l(({row:o})=>[t(j,{mobile:o.mobile},null,8,["mobile"])]),_:1}),t(d,{width:200,label:"商品信息"},{default:l(({row:o})=>[e("div",null,[e("div",null,"商品名称："+f(o.product.product_name),1),e("div",null,"商品SN："+f(o.product.product_sn),1),e("div",null,"商品ID："+f(o.product.product_id),1)])]),_:1}),t(d,{width:150,label:"创建时间",prop:"create_time"}),t(d,{width:150,fixed:"right",label:"操作"},{default:l(({row:o})=>[t(b(Q),{params:{act:"detail",id:o.id},isDrawer:"",showOnOk:!1,path:"product/enquiry/Info",title:o.status===1?"查看":"回复询价",width:"600px",onOkCallback:c},{default:l(()=>[e("a",we,f(o.status===1?"详情":"回复"),1)]),_:2},1032,["params","title"]),t(B,{direction:"vertical"}),t(b(E),{params:{id:o.id},requestApi:b(T),onAfterDelete:c},{default:l(()=>[h("删除 ")]),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),v.value>0?(r(),_("div",Ve,[t(b(F),{page:a.page,"onUpdate:page":s[4]||(s[4]=o=>a.page=o),size:a.size,"onUpdate:size":s[5]||(s[5]=o=>a.size=o),total:v.value,onCallback:c},null,8,["page","size","total"])])):y("",!0)])])])])}}});export{Le as default};
