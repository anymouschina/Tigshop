import{d as E,j as d,E as T,s as H,x as K,r as u,o as r,c as B,e as m,k as v,w as o,b as t,f as M,F as $,a as z,h as D,H as p,$ as A,a0 as G,K as g}from"./index-7c2d2aef.js";import{a as J,c as Q,e as W}from"./pcNavigation-ccffba82.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import"./config-9548fa9b.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{S as X}from"./SelectLink-f2e6e565.js";import"./region-e0d291a6.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import{S as Y}from"./SelectIco-7f1b5693.js";import"./time-290942a2.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./region-05802f67.js";const Z={class:"container"},ee={class:"content_wrapper"},te={class:"lyecs-form-table"},le=m("div",{class:"extra"},'请先在Tigshop设置中的"接口设置"中设置"ico图标库地址"',-1),ae=m("div",{class:"extra"},"请选择相对应位置的导航，如果父导航为中间导航，那该导航必须同样设置为中间导航才会生效；",-1),oe=m("div",{class:"extra"},"默认不选则表示为顶级导航",-1),xe=E({__name:"Info",props:{id:{type:Number,default:0},type:{type:Number,default:0},type_name:{type:String,default:""},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:L,emit:R}){const c=R,i=V,_=d(!0),k=T().currentRoute.value.query,y=d(i.isDialog?i.act:String(k.act)),w=d(i.isDialog?i.id:Number(k.id)),S=y.value==="add"?"create":"update",N=H(),e=d({type:i.type,is_show:1,is_blank:0}),F=async()=>{try{const s=await J(y.value,{id:w.value});Object.assign(e.value,s.item),S==="create"&&(e.value.type=i.type,e.value.type_name=i.type_name),P(e.value.type)}catch(s){g.error(s.message),c("close")}finally{_.value=!1}},x=d([]),P=async s=>{const a=await Q({type:s});x.value.push(...a.filter_result)};K(()=>{y.value==="detail"?F():_.value=!1});const h=async()=>{await N.value.validate();try{c("update:confirmLoading",!0);const s=await W(S,{id:w.value,...e.value});c("submitCallback",s),g.success(s.message)}catch(s){g.error(s.message)}finally{c("update:confirmLoading",!1)}};return L({onFormSubmit:()=>{h()}}),(s,a)=>{const b=u("el-input"),n=u("el-form-item"),C=u("el-option"),q=u("el-select"),f=u("el-radio"),U=u("el-radio-group"),I=u("el-button"),O=u("el-form"),j=u("a-spin");return r(),B("div",Z,[m("div",ee,[m("div",te,[_.value?D("",!0):(r(),v(O,{key:0,ref_key:"formRef",ref:N,model:e.value,"label-width":"auto"},{default:o(()=>[t(n,{rules:[{required:!0,message:"名称不能为空!"}],label:"名称",prop:"title"},{default:o(()=>[t(b,{modelValue:e.value.title,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.title=l)},null,8,["modelValue"])]),_:1}),t(n,{label:"链接地址",prop:"link"},{default:o(()=>[t(M(X),{modelValue:e.value.link,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.link=l)},null,8,["modelValue"])]),_:1}),t(n,{label:"ICO编码",prop:"icon"},{default:o(()=>[t(Y,{modelValue:e.value.icon,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.icon=l)},null,8,["modelValue"]),le]),_:1}),V.type===2?(r(),v(n,{key:0,label:"上级导航",prop:"parent_id"},{default:o(()=>[t(q,{style:{width:"100%"},modelValue:e.value.parent_id,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.parent_id=l)},{default:o(()=>[(r(),v(C,{label:"顶级导航",value:0,key:0})),(r(!0),B($,null,z(x.value,l=>(r(),v(C,{label:l.title,value:l.id,key:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),ae,oe]),_:1})):D("",!0),t(n,{label:"位置",prop:"type_name"},{default:o(()=>[t(b,{disabled:"",modelValue:e.value.type_name,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.type_name=l)},null,8,["modelValue"])]),_:1}),t(n,{label:"排序",prop:"sort_order"},{default:o(()=>[t(b,{modelValue:e.value.sort_order,"onUpdate:modelValue":a[5]||(a[5]=l=>e.value.sort_order=l)},null,8,["modelValue"])]),_:1}),t(n,{label:"是否显示",prop:"is_show"},{default:o(()=>[t(U,{modelValue:e.value.is_show,"onUpdate:modelValue":a[6]||(a[6]=l=>e.value.is_show=l)},{default:o(()=>[t(f,{value:1},{default:o(()=>[p("是")]),_:1}),t(f,{value:0},{default:o(()=>[p("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"是否新窗口",prop:"is_blank"},{default:o(()=>[t(U,{modelValue:e.value.is_blank,"onUpdate:modelValue":a[7]||(a[7]=l=>e.value.is_blank=l)},{default:o(()=>[t(f,{value:1},{default:o(()=>[p("是")]),_:1}),t(f,{value:0},{default:o(()=>[p("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),A(t(n,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[t(I,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:h},{default:o(()=>[p("提交")]),_:1},512)]),_:1},512),[[G,!i.isDialog]])]),_:1},8,["model"])),t(j,{spinning:_.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{xe as default};
