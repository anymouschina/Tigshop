import{d as L,dt as $,i as f,C as j,s as A,q as O,r as s,c as G,o as g,e as v,j as U,f as V,b as o,w as l,a0 as M,g as B,E as m,a1 as T,I as b}from"./index-CGYuOau0.js";import{F as z}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-CjXfTDg5.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import{_ as H}from"./SelectCategory.vue_vue_type_script_setup_true_lang-D0pGcDY-.js";import"./index-B-GURfkM.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              *//* empty css             */import{c as J,e as K}from"./category-BQcUsnE8.js";import{u as P}from"./category-DpIl2IOo.js";import{B as Q}from"./BusinessData-CIJvb5fj.js";import"./vuedraggable.umd-_1km55l4.js";import"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./time-ClyPenjC.js";import"./currencyManagement-Ctv3q6kF.js";import"./version-CpBOsX2d.js";const W={class:"container"},X={class:"content_wrapper"},Y={class:"lyecs-form-table"},be=L({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean,parentId:Number},emits:["submitCallback","update:confirmLoading","close"],setup(N,{expose:D,emit:R}){$();const p=R,n=N,i=f(!0),w=j().currentRoute.value.query,c=f(n.isDialog?n.act:String(w.act)),y=f(n.isDialog?n.id:Number(w.id)),k=c.value==="add"?"create":"update",C=A(),t=f({is_show:1,sort_order:50}),q=async()=>{try{const u=await J(c.value,{id:y.value});Object.assign(t.value,u.item)}catch(u){b.error(u.message),p("close")}finally{i.value=!1}};O(()=>{c.value==="detail"?q():i.value=!1,k==="create"&&(t.value.parent_id=n.parentId,console.log(t.value.parent_id))});const S=async()=>{await C.value.validate();try{p("update:confirmLoading",!0);const u=await K(k,{id:y.value,...t.value});p("submitCallback",u),b.success(u.message),P().clearCategory()}catch(u){b.error(u.message)}finally{p("update:confirmLoading",!1)}};return D({onFormSubmit:()=>{S()}}),(u,e)=>{const r=s("el-form-item"),d=s("el-input"),_=s("el-radio"),x=s("el-radio-group"),F=s("el-button"),I=s("el-form"),E=s("a-spin");return g(),G("div",W,[v("div",X,[v("div",Y,[i.value?V("",!0):(g(),U(I,{key:0,ref_key:"formRef",ref:C,model:t.value,"label-width":"auto"},{default:l(()=>[o(r,{rules:[{required:!0,message:"分类名称不能为空!"}],label:"分类名称",prop:"category_name"},{default:l(()=>[o(Q,{modelValue:t.value.category_name,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.category_name=a),placeholder:"请输入分类名称",data_type:3,data_id:y.value},null,8,["modelValue","data_id"])]),_:1}),o(r,{label:"分类短名",prop:"short_name"},{default:l(()=>[o(d,{modelValue:t.value.short_name,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.short_name=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"上级分类",prop:"parent_id"},{default:l(()=>[i.value?V("",!0):(g(),U(B(H),{key:0,category_id:t.value.parent_id,"onUpdate:category_id":e[2]||(e[2]=a=>t.value.parent_id=a),multiple:!1,style:{width:"100%"}},null,8,["category_id"]))]),_:1}),o(r,{label:"分类图片",prop:"category_pic"},{default:l(()=>[o(B(z),{photo:t.value.category_pic,"onUpdate:photo":e[3]||(e[3]=a=>t.value.category_pic=a)},null,8,["photo"]),e[12]||(e[12]=v("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1))]),_:1}),o(r,{label:"数量单位",prop:"measure_unit"},{default:l(()=>[o(d,{modelValue:t.value.measure_unit,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.measure_unit=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"SEO标题",prop:"seo_title"},{default:l(()=>[o(d,{modelValue:t.value.seo_title,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.seo_title=a)},null,8,["modelValue"]),e[13]||(e[13]=v("div",{class:"extra"},"如果不填，则该分类页的标题则为默认标题；如果该项不为空，则该分类页的标题显示此项的内容。",-1))]),_:1}),V("",!0),o(r,{label:"关键字",prop:"keywords"},{default:l(()=>[o(d,{modelValue:t.value.keywords,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.keywords=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"分类描述",prop:"category_desc"},{default:l(()=>[o(d,{modelValue:t.value.category_desc,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.category_desc=a),row:"2",type:"textarea"},null,8,["modelValue"])]),_:1}),o(r,{label:"排序",prop:"sort_order"},{default:l(()=>[o(d,{modelValue:t.value.sort_order,"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.sort_order=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"是否热门",prop:"is_hot"},{default:l(()=>[o(x,{modelValue:t.value.is_hot,"onUpdate:modelValue":e[10]||(e[10]=a=>t.value.is_hot=a)},{default:l(()=>[o(_,{value:1},{default:l(()=>e[14]||(e[14]=[m("是")])),_:1}),o(_,{value:0},{default:l(()=>e[15]||(e[15]=[m("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"是否显示",prop:"is_show"},{default:l(()=>[o(x,{modelValue:t.value.is_show,"onUpdate:modelValue":e[11]||(e[11]=a=>t.value.is_show=a)},{default:l(()=>[o(_,{value:1},{default:l(()=>e[16]||(e[16]=[m("是")])),_:1}),o(_,{value:0},{default:l(()=>e[17]||(e[17]=[m("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),M(o(r,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[o(F,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:S},{default:l(()=>e[18]||(e[18]=[m("提交 ")])),_:1},512)]),_:1},512),[[T,!n.isDialog]])]),_:1},8,["model"])),o(E,{spinning:i.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{be as default};
