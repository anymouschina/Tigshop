import{d as M,i as f,G as O,q as $,c as p,e as t,b as o,w as s,f as h,g,I as w,r as i,o as u,L as I,E as y,D as b}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{M as E}from"./MobileCard-CkxM62lR.js";import{_ as F}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as G}from"./Pagination-yOfjsBuR.js";import{u as T}from"./config-DNllFJyR.js";import{g as j,d as H,b as J}from"./enquiry-CxUrD34G.js";import{_ as Q}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const R={class:"container"},W={class:"content_wrapper"},X={class:"lyecs-table-list-warp"},Y={class:"list-table-tool lyecs-search-warp"},Z={class:"advanced-search-warp list-table-tool-row"},ee={class:"simple-form-warp"},te={class:"simple-form-field"},oe={class:"form-group"},le={class:"control-container"},se={class:"simple-form-field"},ae={class:"form-group"},ne={class:"control-container"},ie={class:"simple-form-field"},de={class:"form-group"},re={class:"control-container"},ce={class:"list-table-tool-row"},pe={class:"list-table-tool-col"},ue={key:0},_e={class:"table-container"},me={key:0,class:"green"},fe={key:1,class:"gray"},be={class:"btn-link"},ve={class:"empty-warp"},ge={key:0,class:"empty-bg"},ye={key:0,class:"pagination-con"},Pe=M({__name:"List",setup(he){const z=T(),C=f([]),_=f(!0),v=f(0),m=f([]);f(!1);const a=O({page:1,size:z.get("page_size"),sort_field:"",sort_order:"",mobile:"",product_id:""}),d=async()=>{_.value=!0;try{const n=await j({...a});C.value=n.filter_result,v.value=n.total}catch(n){w.error(n.message)}finally{_.value=!1}};$(()=>{d()});const c=()=>{d()},D=({prop:n,order:e})=>{a.sort_field=n,a.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",d()},q=async n=>{try{const e=await J(n,{ids:m.value});w.success(e.message),d()}catch(e){w.error(e.message)}},x=n=>{m.value=n.map(e=>e.id)};return(n,e)=>{const k=i("el-option"),N=i("el-select"),V=i("el-input"),S=i("el-button"),P=i("el-popconfirm"),U=i("el-space"),B=i("el-form"),r=i("el-table-column"),A=i("el-divider"),K=i("el-table"),L=i("a-spin");return u(),p("div",R,[t("div",W,[t("div",X,[t("div",Y,[o(B,{model:a},{default:s(()=>[t("div",Z,[t("div",ee,[t("div",te,[t("div",oe,[e[6]||(e[6]=t("label",{class:"control-label"},[t("span",null,"状态：")],-1)),t("div",le,[o(N,{modelValue:a.status,"onUpdate:modelValue":e[0]||(e[0]=l=>a.status=l),clearable:"",onChange:c},{default:s(()=>[o(k,{value:0,label:"未回复"}),o(k,{value:1,label:"已回复"})]),_:1},8,["modelValue"])])])]),t("div",se,[t("div",ae,[e[7]||(e[7]=t("label",{class:"control-label"},[t("span",null,"商品ID：")],-1)),t("div",ne,[o(V,{modelValue:a.product_id,"onUpdate:modelValue":e[1]||(e[1]=l=>a.product_id=l),name:"product_id",placeholder:"输入商品ID",onKeyup:I(c,["enter"]),clearable:"",onClear:c},null,8,["modelValue"])])])]),t("div",ie,[t("div",de,[e[9]||(e[9]=t("label",{class:"control-label"},[t("span",null,"手机号：")],-1)),t("div",re,[o(V,{modelValue:a.mobile,"onUpdate:modelValue":e[2]||(e[2]=l=>a.mobile=l),name:"mobile",placeholder:"输入询价人手机号",onKeyup:I(c,["enter"]),clearable:"",onClear:c},{append:s(()=>[o(S,{onClick:c},{default:s(()=>e[8]||(e[8]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])])])]),t("div",ce,[t("div",pe,[o(U,null,{default:s(()=>[o(P,{title:"您确认要批量删除所选数据吗？",onConfirm:e[3]||(e[3]=l=>q("del"))},{reference:s(()=>[o(S,{disabled:m.value.length===0},{default:s(()=>e[10]||(e[10]=[y("批量删除")])),_:1},8,["disabled"])]),_:1}),m.value.length>0?(u(),p("span",ue,[e[11]||(e[11]=y(" 已选择：")),t("b",null,b(m.value.length),1),e[12]||(e[12]=y(" 项 "))])):h("",!0)]),_:1})]),e[13]||(e[13]=t("div",{class:"list-table-tool-col"},null,-1))])]),_:1},8,["model"])]),t("div",_e,[o(L,{spinning:_.value},{default:s(()=>[o(K,{data:C.value,loading:_.value,total:v.value,"row-key":"id",onSelectionChange:x,onSortChange:D},{empty:s(()=>[t("div",ve,[_.value?h("",!0):(u(),p("div",ge,"暂无数据"))])]),default:s(()=>[o(r,{type:"selection",width:"32"}),o(r,{label:"询价内容",prop:"content"}),o(r,{width:100,label:"状态"},{default:s(({row:l})=>[l.status===1?(u(),p("span",me,"已回复")):(u(),p("span",fe,"未回复"))]),_:1}),o(r,{width:150,label:"联系方式"},{default:s(({row:l})=>[o(E,{mobile:l.mobile},null,8,["mobile"])]),_:1}),o(r,{label:"商品信息",prop:"product"},{default:s(({row:l})=>[t("div",null,"商品名称："+b(l.product.product_name),1),t("div",null,"商品SN："+b(l.product.product_sn),1),t("div",null,"商品ID："+b(l.product.product_id),1)]),_:1}),o(r,{width:150,label:"创建时间",prop:"create_time"}),o(r,{width:150,fixed:"right",label:"操作"},{default:s(({row:l})=>[o(g(Q),{params:{act:"detail",id:l.id},isDrawer:"",showOnOk:!1,path:"product/enquiry/Info",title:l.status===1?"查看":"回复询价",width:"600px",onOkCallback:d},{default:s(()=>[t("a",be,b(l.status===1?"详情":"回复"),1)]),_:2},1032,["params","title"]),o(A,{direction:"vertical"}),o(g(F),{params:{id:l.id},requestApi:g(H),onAfterDelete:d},{default:s(()=>e[14]||(e[14]=[y("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),v.value>0?(u(),p("div",ye,[o(g(G),{page:a.page,"onUpdate:page":e[4]||(e[4]=l=>a.page=l),size:a.size,"onUpdate:size":e[5]||(e[5]=l=>a.size=l),total:v.value,onCallback:d},null,8,["page","size","total"])])):h("",!0)])])])])}}});export{Pe as default};
