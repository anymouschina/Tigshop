/* empty css             */import{d as N,j as _,I as U,x as j,r as d,o as y,c as k,e as a,b as o,w as i,n as A,h as w,f as C,G as E,K as D,p as K,i as L,_ as O}from"./index-7c2d2aef.js";/* empty css                                                                    */import{P as q}from"./Pagination-8eb7b6b1.js";import{i as H}from"./format-4e0206d3.js";import{g as J}from"./productGift-d470dc63.js";import{u as Q}from"./config-9548fa9b.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";const W=r=>(K("data-v-a558f0d0"),r=r(),L(),r),X={class:"container"},Y={class:"content_wrapper"},Z={class:"lyecs-table-list-warp"},$={class:"list-table-tool lyecs-search-warp"},ee={class:"list-table-tool-row"},te={class:"list-table-tool-col"},oe=W(()=>a("span",{class:"iconfont icon-chakan1"},null,-1)),ae={class:"table-container"},le={class:"product-info"},se=["src"],ne={class:"empty-warp"},ie={key:0,class:"empty-bg"},ce={key:0,class:"pagination-con"},de=N({__name:"SelectGift",props:{selected_ids:{type:Array,default:[]},modelValue:{type:Object,default:{}},isMultiple:{type:Boolean,default:!1}},emits:["submitCallback","okType","update:modelValue"],setup(r,{expose:x,emit:V}){const g=r,p=V;p("okType",!1);const l=_([]),z=Q(),S=_(),u=_(!0),m=_(0),s=U({page:1,size:z.get("page_size"),sort_field:"",sort_order:"",keyword:""}),v=async()=>{u.value=!0;try{const t=await J({...s});S.value=t.filter_result,m.value=t.total}catch(t){D.error(t.message)}finally{u.value=!1}};j(()=>{v()});const I=()=>{v()},h=_(),G=t=>{g.isMultiple&&(t.forEach(e=>{const c=new Set(l.value);c.add(e),l.value=Array.from(c)}),p("okType",l.value.length>0))},M=(t,e)=>{if(!g.isMultiple){if(h.value.clearSelection(),t.length==0){l.value=[];return}h.value.toggleRowSelection(e,!0),l.value.length=0,l.value.push(e),p("okType",l.value.length>0)}p("update:modelValue",e)},B=(t,e)=>{let c=[];return g.selected_ids.map(b=>{c.push(b.gift_id)}),!c.includes(t.gift_id)};return x({onFormSubmit:()=>{p("submitCallback",l.value)}}),(t,e)=>{const c=d("el-button"),b=d("el-input"),F=d("el-space"),P=d("el-form"),f=d("el-table-column"),R=d("el-table"),T=d("a-spin");return y(),k("div",X,[a("div",Y,[a("div",Z,[a("div",$,[o(P,{model:s},{default:i(()=>[a("div",ee,[a("div",te,[o(F,null,{default:i(()=>[o(b,{name:"keyword",modelValue:s.keyword,"onUpdate:modelValue":e[0]||(e[0]=n=>s.keyword=n),placeholder:"输入赠品名称"},{append:i(()=>[o(c,{onClick:I},{default:i(()=>[oe]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1},8,["model"])]),a("div",ae,[o(T,{spinning:u.value},{default:i(()=>[o(R,{ref_key:"tableRef",ref:h,class:A([r.isMultiple?"":"hide-checkbox","result-table"]),data:S.value,loading:u.value,total:m.value,"row-key":"product_id",onSelect:M,onSelectionChange:G},{empty:i(()=>[a("div",ne,[u.value?w("",!0):(y(),k("div",ie,"暂无数据"))])]),default:i(()=>[o(f,{selectable:B,type:"selection",width:"32"}),o(f,{label:"赠品名称",prop:"gift_name",width:"120"}),o(f,{label:"商品信息",prop:"product_name"},{default:i(({row:n})=>[a("div",le,[a("img",{src:C(H)(n.product_info.pic_thumb),height:"50",width:"50"},null,8,se),a("p",null,E(n.product_info.product_name),1)])]),_:1}),o(f,{label:"赠品库存",prop:"gift_stock",sortable:"custom"})]),_:1},8,["class","data","loading","total"])]),_:1},8,["spinning"]),m.value>0?(y(),k("div",ce,[o(C(q),{page:s.page,"onUpdate:page":e[1]||(e[1]=n=>s.page=n),size:s.size,"onUpdate:size":e[2]||(e[2]=n=>s.size=n),total:m.value,onCallback:v},null,8,["page","size","total"])])):w("",!0)])])])])}}});const ye=O(de,[["__scopeId","data-v-a558f0d0"]]);export{ye as default};
