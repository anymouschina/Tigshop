import{d as L,j as u,E as j,s as E,x as $,r as s,o as p,c as A,e as _,b as e,w as l,k as v,f as Y,H as b,$ as G,a0 as I,h as O,K as c}from"./index-7c2d2aef.js";import{F as T}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-9b6073fb.js";import{_ as z}from"./Editor.vue_vue_type_script_setup_true_lang-4519c339.js";import{b as J,c as P}from"./notice-f5f9ff6d.js";import"./index-6c62cf9b.js";import"./vuedraggable.umd-75ad0f8f.js";import"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import"./format-4e0206d3.js";import"./config-9548fa9b.js";import"./config-e2aa16d1.js";import"./util-1ee03ed8.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./index.esm-0534e563.js";const Q={class:"container"},W={class:"content_wrapper"},X={class:"lyecs-form-table"},Z={class:"lyecs-form-table"},ee=_("div",{class:"extra"},"请统一上传比例为2:1的图片，宽600px，高450px（高清）",-1),fe=L({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(B,{expose:C,emit:S}){const m=S,i=B,g=u(1),d=u(!0),y=j().currentRoute.value.query,f=u(i.isDialog?i.act:String(y.act)),V=u(i.isDialog?i.id:Number(y.id)),q=f.value==="add"?"create":"update",k=E(),t=u({is_top:0,content:""}),N=async()=>{try{const n=await J(f.value,{id:V.value});Object.assign(t.value,n.item)}catch(n){c.error(n.message),m("close")}finally{d.value=!1}};$(()=>{f.value==="detail"?N():d.value=!1});const w=async()=>{if(await k.value.validate(),t.value.content===""){c.error("正文内容不能为空!");return}try{m("update:confirmLoading",!0);const n=await P(q,{id:V.value,...t.value});m("submitCallback",n),c.success(n.message)}catch(n){c.error(n.message)}finally{m("update:confirmLoading",!1)}};return C({onFormSubmit:()=>{w()}}),(n,o)=>{const x=s("el-input"),r=s("el-form-item"),D=s("el-date-picker"),h=s("el-radio"),H=s("el-radio-group"),K=s("el-button"),M=s("el-form"),U=s("el-tab-pane"),R=s("el-tabs"),F=s("a-spin");return p(),A("div",Q,[_("div",W,[_("div",X,[e(R,{activeKey:g.value,"onUpdate:activeKey":o[7]||(o[7]=a=>g.value=a),class:"lyecs-tabs","tab-position":"top"},{default:l(()=>[(p(),v(U,{key:1,label:"基础设置"},{default:l(()=>[_("div",Z,[d.value?O("",!0):(p(),v(M,{key:0,ref_key:"formRef",ref:k,model:t.value,"label-width":"auto"},{default:l(()=>[e(r,{rules:[{required:!0,message:"页面名称不能为空!"}],label:"页面名称",prop:"title"},{default:l(()=>[e(x,{modelValue:t.value.title,"onUpdate:modelValue":o[0]||(o[0]=a=>t.value.title=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"封面图片",prop:"img",rules:[{required:!0,message:"封面图片不能为空!"}]},{default:l(()=>[e(Y(T),{photo:t.value.img,"onUpdate:photo":o[1]||(o[1]=a=>t.value.img=a)},null,8,["photo"]),ee]),_:1}),e(r,{label:"推送时间",prop:"start_time",rules:[{required:!0,message:"推送时间不能为空!"}]},{default:l(()=>[e(D,{modelValue:t.value.start_time,"onUpdate:modelValue":o[2]||(o[2]=a=>t.value.start_time=a),type:"datetime",placeholder:"请选择推送时间",format:"YYYY/MM/DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(r,{label:"失效时间",prop:"end_time"},{default:l(()=>[e(D,{modelValue:t.value.end_time,"onUpdate:modelValue":o[3]||(o[3]=a=>t.value.end_time=a),type:"datetime",placeholder:"请选择失效时间",format:"YYYY/MM/DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(r,{label:"页面描述",prop:"describe",rules:[{required:!0,message:"页面描述不能为空!"}]},{default:l(()=>[e(x,{modelValue:t.value.describe,"onUpdate:modelValue":o[4]||(o[4]=a=>t.value.describe=a),row:"3",type:"textarea"},null,8,["modelValue"])]),_:1}),e(r,{label:"是否置顶",prop:"is_top"},{default:l(()=>[e(H,{modelValue:t.value.is_top,"onUpdate:modelValue":o[5]||(o[5]=a=>t.value.is_top=a)},{default:l(()=>[e(h,{value:1},{default:l(()=>[b("置顶")]),_:1}),e(h,{value:0},{default:l(()=>[b("不置顶")]),_:1})]),_:1},8,["modelValue"])]),_:1}),G(e(r,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[e(K,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:w},{default:l(()=>[b("提交")]),_:1},512)]),_:1},512),[[I,!i.isDialog]])]),_:1},8,["model"]))])]),_:1})),(p(),v(U,{key:2,label:"正文内容"},{default:l(()=>[e(Y(z),{html:t.value.content,"onUpdate:html":o[6]||(o[6]=a=>t.value.content=a)},null,8,["html"])]),_:1}))]),_:1},8,["activeKey"]),e(F,{spinning:d.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{fe as default};
