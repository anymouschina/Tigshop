import{d as M,i as v,G as T,q as H,c as V,e as a,b as o,w as l,f as C,g as s,I as g,r as i,o as h,L as B,E as c,j as J,D as U}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{P as q}from"./PopFormElm-DSof3F4x.js";import{_ as z}from"./Switch.vue_vue_type_script_setup_true_lang-CKSPWIQL.js";import{_ as Q}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as R}from"./Pagination-yOfjsBuR.js";import{u as X}from"./config-DNllFJyR.js";import{_ as Y}from"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import{g as Z,u as y,d as ee,b as te,c as oe}from"./brand-BWQ0xslz.js";import{c as ae}from"./version-CpBOsX2d.js";import{_ as D}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";import"./format-DFT-VJzO.js";const le={class:"container"},se={class:"content_wrapper"},ne={class:"lyecs-table-list-warp"},re={class:"list-table-tool lyecs-search-warp"},ie={class:"advanced-search-warp list-table-tool-row"},de={class:"simple-form-warp"},pe={class:"simple-form-field"},ue={class:"form-group"},_e={class:"control-container"},ce={class:"simple-form-field"},me={class:"form-group"},fe={class:"control-container"},be={class:"simple-form-field"},ve={class:"form-group"},ge={class:"control-container"},he={class:"simple-form-field"},ye={class:"form-group"},ke={class:"control-container"},we={class:"simple-form-field"},Ve={class:"list-table-tool-row"},Ce={class:"list-table-tool-col"},Ue={key:1},qe={class:"table-container"},Ae={style:{position:"relative"}},xe={class:"empty-warp"},Se={key:0,class:"empty-bg"},Be={key:0,class:"pagination-con"},He=M({__name:"List",setup(ze){const F=X(),A=v([]),b=v(!0),k=v(0),m=v([]);v(!1);const n=T({page:1,size:F.get("page_size"),sort_field:"",sort_order:"",keyword:"",first_word:""}),d=async()=>{b.value=!0;try{const r=await Z({...n});A.value=r.filter_result,k.value=r.total}catch(r){g.error(r.message)}finally{b.value=!1}};H(()=>{d()});const u=()=>{d()},P=({prop:r,order:e})=>{n.sort_field=r,n.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",d()},$=async r=>{try{const e=await te(r,{ids:m.value});g.success(e.message),d()}catch(e){g.error(e.message)}},I=r=>{m.value=r.map(e=>e.brand_id)},N=async()=>{try{const r=await oe();g.success(r.message),d()}catch(r){g.error(r.message)}};return(r,e)=>{const f=i("el-button"),x=i("el-input"),w=i("el-option"),S=i("el-select"),K=i("router-link"),L=i("el-popconfirm"),O=i("el-space"),E=i("el-form"),_=i("el-table-column"),W=i("el-divider"),j=i("el-table"),G=i("a-spin");return h(),V("div",le,[a("div",se,[a("div",ne,[a("div",re,[o(E,{model:n},{default:l(()=>[a("div",ie,[a("div",de,[a("div",pe,[a("div",ue,[a("div",_e,[o(x,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>n.keyword=t),name:"keyword",placeholder:"输入品牌名称",onKeyup:B(u,["enter"]),clearable:"",onClear:u},{append:l(()=>[o(f,{onClick:u},{default:l(()=>e[7]||(e[7]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),a("div",ce,[a("div",me,[e[8]||(e[8]=a("label",{class:"control-label"},[a("span",null,"是否显示：")],-1)),a("div",fe,[o(S,{modelValue:n.is_show,"onUpdate:modelValue":e[1]||(e[1]=t=>n.is_show=t),clearable:"",onChange:u},{default:l(()=>[o(w,{value:0,label:"不显示"}),o(w,{value:1,label:"显示"})]),_:1},8,["modelValue"])])])]),a("div",be,[a("div",ve,[e[9]||(e[9]=a("label",{class:"control-label"},[a("span",null,"是否热门：")],-1)),a("div",ge,[o(S,{modelValue:n.brand_is_hot,"onUpdate:modelValue":e[2]||(e[2]=t=>n.brand_is_hot=t),clearable:"",onChange:u},{default:l(()=>[o(w,{value:0,label:"否"}),o(w,{value:1,label:"是"})]),_:1},8,["modelValue"])])])]),a("div",he,[a("div",ye,[e[10]||(e[10]=a("label",{class:"control-label"},[a("span",null,"首字母：")],-1)),a("div",ke,[o(x,{modelValue:n.first_word,"onUpdate:modelValue":e[3]||(e[3]=t=>n.first_word=t),onKeyup:B(u,["enter"]),clearable:"",onClear:u},null,8,["modelValue"])])])]),a("div",we,[o(f,{type:"primary",onClick:u},{default:l(()=>e[11]||(e[11]=[c("搜索")])),_:1})])])]),a("div",Ve,[a("div",Ce,[o(O,null,{default:l(()=>[o(s(D),{params:{act:"add"},isDrawer:"",path:"product/brand/Info",title:"添加品牌",width:"600px",onOkCallback:d},{default:l(()=>[o(f,{type:"primary"},{default:l(()=>e[12]||(e[12]=[c("添加品牌")])),_:1})]),_:1}),s(ae)()?(h(),J(K,{key:0,to:{path:"/setting/multilingual/translationContent/list",query:{type:"brand"}}},{default:l(()=>[o(f,null,{default:l(()=>e[13]||(e[13]=[c("批量翻译品牌名称")])),_:1})]),_:1})):C("",!0),o(L,{title:"您确认要批量删除所选数据吗？",onConfirm:e[4]||(e[4]=t=>$("del"))},{reference:l(()=>[o(f,{disabled:m.value.length===0},{default:l(()=>e[14]||(e[14]=[c("批量删除")])),_:1},8,["disabled"])]),_:1}),o(f,{loading:!1,disabled:m.value.length===0,onClick:N},{default:l(()=>e[15]||(e[15]=[c("批量更新品牌首字母 ")])),_:1},8,["disabled"]),m.value.length>0?(h(),V("span",Ue,[e[16]||(e[16]=c(" 已选择：")),a("b",null,U(m.value.length),1),e[17]||(e[17]=c(" 项 "))])):C("",!0)]),_:1})]),e[18]||(e[18]=a("div",{class:"list-table-tool-col"},null,-1))])]),_:1},8,["model"])]),a("div",qe,[o(G,{spinning:b.value},{default:l(()=>[o(j,{data:A.value,loading:b.value,total:k.value,"row-key":"brand_id",onSelectionChange:I,onSortChange:P},{empty:l(()=>[a("div",xe,[b.value?C("",!0):(h(),V("div",Se,"暂无数据"))])]),default:l(()=>[o(_,{type:"selection",width:"32"}),o(_,{width:200,label:"品牌名称",prop:"brand_id",sortable:"custom"},{default:l(({row:t})=>[a("div",Ae,[o(s(q),{"org-value":t.brand_name,"onUpdate:orgValue":p=>t.brand_name=p,max:30,params:{id:t.brand_id,field:"brand_name"},requestApi:s(y),label:"品牌名称",type:"textarea"},{default:l(()=>[a("div",null,U(t.brand_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])])]),_:1}),o(_,{label:"品牌缩略图"},{default:l(({row:t})=>[o(s(Y),{src:t.brand_logo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),o(_,{label:"首字母"},{default:l(({row:t})=>[o(s(q),{"org-value":t.first_word,"onUpdate:orgValue":p=>t.first_word=p,len:1,params:{id:t.brand_id,field:"first_word"},requestApi:s(y),label:"首字母",type:"input"},{default:l(()=>[a("div",null,U(t.first_word||"-"),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(_,{label:"是否热销"},{default:l(({row:t})=>[o(s(z),{checked:t.brand_is_hot,"onUpdate:checked":p=>t.brand_is_hot=p,params:{id:t.brand_id,field:"brand_is_hot"},requestApi:s(y)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),o(_,{label:"是否显示",prop:"is_show",sortable:"custom"},{default:l(({row:t})=>[o(s(z),{checked:t.is_show,"onUpdate:checked":p=>t.is_show=p,params:{id:t.brand_id,field:"is_show"},requestApi:s(y)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),o(_,{label:"排序",prop:"sort_order",sortable:"custom"},{default:l(({row:t})=>[o(s(q),{"org-value":t.sort_order,"onUpdate:orgValue":p=>t.sort_order=p,params:{id:t.brand_id,field:"sort_order"},requestApi:s(y),extra:"默认值为50，数值越小，排序越靠前",label:"排序",type:"input"},{default:l(()=>[a("div",null,U(t.sort_order),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(_,{width:150,fixed:"right",label:"操作"},{default:l(({row:t})=>[o(s(D),{params:{act:"detail",id:t.brand_id},isDrawer:"",path:"product/brand/Info",title:"编辑品牌",width:"600px",onOkCallback:d},{default:l(()=>e[19]||(e[19]=[a("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(W,{direction:"vertical"}),o(s(Q),{params:{id:t.brand_id},requestApi:s(ee),onAfterDelete:d},{default:l(()=>e[20]||(e[20]=[c("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),k.value>0?(h(),V("div",Be,[o(s(R),{page:n.page,"onUpdate:page":e[5]||(e[5]=t=>n.page=t),size:n.size,"onUpdate:size":e[6]||(e[6]=t=>n.size=t),total:k.value,onCallback:d},null,8,["page","size","total"])])):C("",!0)])])])])}}});export{He as default};
