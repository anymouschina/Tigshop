import{d as N,i as c,G as D,q as I,c as f,e,D as P,b as t,w as a,M as B,f as b,g as m,I as w,r as _,o as v,N as M,E as U}from"./index-CGYuOau0.js";/* empty css             */import{_ as E}from"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import"./index-B-GURfkM.js";/* empty css                                                                    */import{P as R}from"./Pagination-yOfjsBuR.js";import{u as y}from"./config-DNllFJyR.js";import{g as $,a as q}from"./live-Z-dmkhEI.js";import{_ as A}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./format-DFT-VJzO.js";import"./config-DU8_t5BN.js";const F={class:"container"},G={class:"content_wrapper"},O={class:"notice-warp"},T={class:"lyecs-table-list-warp"},j={class:"list-table-tool lyecs-search-warp"},H={class:"advanced-search-warp list-table-tool-row"},J={class:"simple-form-warp"},K={class:"simple-form-field"},Q={class:"form-group"},W={class:"control-container"},X={class:"simple-form-field"},Y={class:"form-group"},Z={class:"control-container"},ee={class:"table-container"},te={class:"empty-warp"},oe={key:0,class:"empty-bg"},ae={key:0,class:"pagination-con"},ve=N({__name:"List",setup(se){const k=y(),x=c(y().domain),h=c(),r=c(!0),d=c(0);c([]),c(!1);const l=D({page:1,size:k.get("page_size"),sort_field:"",sort_order:"",wechat_live_title:""}),p=async()=>{r.value=!0;try{const n=await $({...l});h.value=n.filter_result,d.value=n.total}catch(n){w.error(n.message)}finally{r.value=!1}},C=async()=>{r.value=!0;try{await q(),p()}catch(n){w.error(n.message)}finally{r.value=!1}};I(()=>{p()});const u=()=>{p()};return(n,o)=>{const g=_("el-button"),z=_("el-input"),V=_("el-form"),i=_("el-table-column"),S=_("el-table"),L=_("a-spin");return v(),f("div",F,[e("div",G,[e("div",O,[e("p",null," 积分兑换列表前台地址为："+P(x.value)+"/exchange/list.html（支持手机版自动跳转） ",1)]),e("div",T,[e("div",j,[t(V,{model:l,onSubmit:B(u,["prevent"])},{default:a(()=>[e("div",H,[e("div",J,[e("div",K,[e("div",Q,[e("div",W,[t(g,{type:"primary",icon:m(M),onClick:C},{default:a(()=>o[3]||(o[3]=[U("API更新直播间")])),_:1},8,["icon"]),o[4]||(o[4]=e("span",null,"（一天上限三百次）",-1))])])]),e("div",X,[e("div",Y,[e("div",Z,[t(z,{modelValue:l.wechat_live_title,"onUpdate:modelValue":o[0]||(o[0]=s=>l.wechat_live_title=s),name:"wechat_live_title",placeholder:"输入直播名称",clearable:"",onClear:u},{append:a(()=>[t(g,{onClick:u},{default:a(()=>o[5]||(o[5]=[e("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])])])])]),_:1},8,["model"])]),e("div",ee,[t(L,{spinning:r.value},{default:a(()=>[t(S,{data:h.value,"row-key":"room_id",total:d.value},{empty:a(()=>[e("div",te,[r.value?b("",!0):(v(),f("div",oe,"暂无数据"))])]),default:a(()=>[t(i,{label:"房间ID",prop:"room_id",width:80}),t(i,{label:"直播名称",prop:"wechat_live_title",width:200}),t(i,{label:"开始日期",prop:"last_update_time"}),t(i,{label:"结束日期",prop:"end_time"}),t(i,{label:"当前状态",prop:"live_status_text"}),t(i,{label:"直播封面",prop:"points_deducted_amount"},{default:a(({row:s})=>[t(m(E),{src:s.cover_img,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),t(i,{label:"商品显示范围",prop:"act_range_text"}),t(i,{label:"操作",fixed:"right",width:150},{default:a(({row:s})=>[t(m(A),{isDrawer:"",onOkCallback:p,title:"编辑直播",width:"750px",path:"promotion/live/Info",params:{act:"detail",id:s.room_id}},{default:a(()=>o[6]||(o[6]=[e("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),d.value>0?(v(),f("div",ae,[t(m(R),{page:l.page,"onUpdate:page":o[1]||(o[1]=s=>l.page=s),size:l.size,"onUpdate:size":o[2]||(o[2]=s=>l.size=s),total:d.value,onCallback:p},null,8,["page","size","total"])])):b("",!0)])])])])}}});export{ve as default};
