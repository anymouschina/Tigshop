/* empty css             */import{d as I,i as p,G as U,q as D,r as s,c as v,o as y,e as a,b as o,f as w,w as n,E as S,n as j,D as q,g as A,I as L,_ as O}from"./index-CGYuOau0.js";/* empty css                                                                    */import{P as H}from"./Pagination-yOfjsBuR.js";import{u as J}from"./config-DNllFJyR.js";import{g as K}from"./productGroup-D9PsniyG.js";import"./config-DU8_t5BN.js";const Q={class:"container",style:{position:"relative",height:"100%"}},W={class:"content_wrapper"},X={class:"",style:{display:"flex","flex-direction":"column",width:"100%",height:"100%",position:"absolute"}},Y={class:"list-table-tool lyecs-search-warp",style:{flex:"0"}},Z={class:"list-table-tool-row",style:{"margin-bottom":"5px"}},$={class:"list-table-tool-col"},ee={style:{"padding-right":"15px","box-sizing":"border-box"}},te={class:"empty-warp"},oe={key:0,class:"empty-bg"},le={key:0,class:"pagination-con",style:{"flex-shrink":"0"}},se=I({__name:"SelectProductGroup",props:{selected_ids:{type:Array,default:[]},modelValue:{type:Object,default:{}},isMultiple:{type:Boolean,default:!0},index:{type:Number,default:0}},emits:["submitCallback","okType","update:modelValue"],setup(h,{expose:C,emit:V}){const _=h,d=V;d("okType",!1);const i=p([]),u=p(!0),m=p(0),z=J(),x=p([]),l=U({page:1,size:z.get("page_size"),sort_field:"",sort_order:"",keyword:""}),f=async()=>{u.value=!0;try{const t=await K({...l});x.value=t.filter_result,m.value=t.total}catch(t){L.error(t.message)}finally{u.value=!1}};D(()=>{f()});const k=()=>{f()},g=p(),P=t=>{if(_.isMultiple){let e=[];t.forEach(c=>{e.push(c.product_group_id)}),i.value=e,d("okType",i.value.length>0)}},M=(t,e)=>{if(!_.isMultiple){if(g.value.clearSelection(),t.length==0){i.value=[];return}g.value.toggleRowSelection(e,!0),i.value.length=0,i.value.push(e.product_group_id),d("okType",i.value.length>0)}d("update:modelValue",e)},N=(t,e)=>{var c;return!((c=_.selected_ids)!=null&&c.includes(t.product_group_id))};return C({onFormSubmit:()=>{d("submitCallback",{ids:i.value,index:_.index})}}),(t,e)=>{const c=s("el-input"),T=s("el-button"),B=s("el-space"),F=s("el-form"),b=s("el-table-column"),G=s("el-table"),R=s("a-spin"),E=s("perfect-scrollbar");return y(),v("div",Q,[a("div",W,[a("div",X,[a("div",Y,[o(F,{model:l,name:"form",onFinish:k},{default:n(()=>[a("div",Z,[a("div",$,[o(B,null,{default:n(()=>[o(c,{modelValue:l.keyword,"onUpdate:modelValue":e[0]||(e[0]=r=>l.keyword=r),placeholder:"商品分组名称"},null,8,["modelValue"]),o(T,{onClick:k},{default:n(()=>e[3]||(e[3]=[S("搜索")])),_:1})]),_:1})]),e[4]||(e[4]=a("div",{class:"list-table-tool-col"},null,-1))])]),_:1},8,["model"])]),o(E,{class:"table-container",style:{flex:"1"}},{default:n(()=>[o(R,{spinning:u.value},{default:n(()=>[a("div",ee,[o(G,{ref_key:"tableRef",ref:g,class:j([h.isMultiple?"":"hide-checkbox","result-table"]),data:x.value,loading:u.value,total:m.value,"row-key":"product_group_id",onSelect:M,onSelectionChange:P},{empty:n(()=>[a("div",te,[u.value?w("",!0):(y(),v("div",oe,"暂无数据"))])]),default:n(()=>[o(b,{selectable:N,type:"selection",width:"32"}),o(b,{label:"分组名称",prop:"product_group_name"}),o(b,{label:"分组商品数量",prop:"product_ids",align:"center"},{default:n(({row:r})=>[S(q(r.product_ids.length)+"个 ",1)]),_:1})]),_:1},8,["class","data","loading","total"])])]),_:1},8,["spinning"])]),_:1}),m.value>0?(y(),v("div",le,[o(A(H),{page:l.page,"onUpdate:page":e[1]||(e[1]=r=>l.page=r),size:l.size,"onUpdate:size":e[2]||(e[2]=r=>l.size=r),total:m.value,onCallback:f,layout:"slot ,prev, pager, next",background:!1},null,8,["page","size","total"])])):w("",!0)])])])}}}),_e=O(se,[["__scopeId","data-v-fa874865"]]);export{_e as default};
