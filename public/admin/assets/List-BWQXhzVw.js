import{d as P,i as m,G as U,q as $,c as f,e as t,f as h,b as o,w as s,L as E,g as p,I as w,r,o as g,E as c,D as k}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{_ as K}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as O}from"./Pagination-yOfjsBuR.js";import{u as F}from"./config-DNllFJyR.js";import{g as G,d as M,b as T}from"./subgroup-UdERYvwq.js";import{_ as S}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const j={class:"container"},H={class:"content_wrapper"},J={class:"lyecs-table-list-warp"},Q={class:"list-table-tool lyecs-search-warp",style:{"margin-bottom":"0px"}},R={class:"advanced-search-warp list-table-tool-row"},W={class:"simple-form-warp"},X={class:"simple-form-field"},Y={class:"form-group"},Z={class:"control-container"},ee={class:"simple-form-field"},te={class:"form-group"},oe={class:"control-container"},se={class:"table-container"},ae={style:{position:"relative"}},ne={class:"empty-warp"},le={key:0,class:"empty-bg"},ie={key:0,class:"pagination-con"},re={key:0,class:"selected-action-warp"},de={class:"selected-action"},we=P({__name:"List",setup(pe){const x=F(),C=m(),d=m(!0),_=m(0),u=m([]),l=U({page:1,size:x.get("page_size"),sort_field:"",sort_order:"",group_name:""}),i=async()=>{d.value=!0;try{const n=await G({...l});C.value=n.filter_result,_.value=n.total}catch(n){w.error(n.message)}finally{d.value=!1}};$(()=>{i()});const v=()=>{i()},z=({prop:n,order:e})=>{l.sort_field=n,l.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",i()},V=async n=>{try{const e=await T(n,{ids:u.value});w.success(e.message),i()}catch(e){w.error(e.message)}},D=n=>{u.value=n.map(e=>e.group_id)};return(n,e)=>{const b=r("el-button"),B=r("el-input"),y=r("el-table-column"),I=r("el-divider"),N=r("el-table"),q=r("a-spin"),A=r("el-popconfirm"),L=r("el-space");return g(),f("div",j,[t("div",H,[t("div",J,[t("div",Q,[t("div",R,[t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[o(B,{name:"keyword",modelValue:l.group_name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.group_name=a),placeholder:"输入分组名称",onKeyup:E(v,["enter"]),clearable:"",onClear:v},{append:s(()=>[o(b,{onClick:v},{default:s(()=>e[4]||(e[4]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",ee,[t("div",te,[t("div",oe,[o(p(S),{isDrawer:"",onOkCallback:i,title:"新建分组",width:"600px",path:"salesman/subgroup/Info",params:{act:"add"}},{default:s(()=>[o(b,{type:"primary"},{default:s(()=>e[5]||(e[5]=[c("新建分组")])),_:1})]),_:1})])])])])])]),t("div",se,[o(q,{spinning:d.value},{default:s(()=>[o(N,{data:C.value,"row-key":"group_id",onSelectionChange:D,total:_.value,onSortChange:z,loading:d.value},{empty:s(()=>[t("div",ne,[d.value?h("",!0):(g(),f("div",le,"暂无数据"))])]),default:s(()=>[o(y,{label:"分组名称",prop:"group_id",sortable:"custom"},{default:s(({row:a})=>[t("div",ae,[t("div",null,k(a.group_name),1)])]),_:1}),o(y,{label:"创建时间",prop:"is_show",sortable:"custom"},{default:s(({row:a})=>[t("div",null,k(a.add_time),1)]),_:1}),o(y,{label:"操作",fixed:"right",width:150},{default:s(({row:a})=>[o(p(S),{isDrawer:"",onOkCallback:i,title:"编辑分组",width:"600px",path:"salesman/subgroup/Info",params:{act:"detail",id:a.group_id}},{default:s(()=>e[6]||(e[6]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(I,{direction:"vertical"}),o(p(K),{onAfterDelete:i,requestApi:p(M),params:{id:a.group_id}},{default:s(()=>e[7]||(e[7]=[c("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),_.value>0?(g(),f("div",ie,[o(p(O),{page:l.page,"onUpdate:page":e[1]||(e[1]=a=>l.page=a),size:l.size,"onUpdate:size":e[2]||(e[2]=a=>l.size=a),total:_.value,onCallback:i},null,8,["page","size","total"])])):h("",!0)]),u.value.length>0?(g(),f("div",re,[t("div",de,[o(L,null,{default:s(()=>[t("span",null,[e[8]||(e[8]=c("已选择：")),t("b",null,k(u.value.length),1),e[9]||(e[9]=c(" 项"))]),o(A,{title:"您确认要批量删除所选数据吗？",onConfirm:e[3]||(e[3]=a=>V("del"))},{reference:s(()=>[o(b,null,{default:s(()=>e[10]||(e[10]=[c("批量删除")])),_:1})]),_:1})]),_:1})])])):h("",!0)])])])}}});export{we as default};
