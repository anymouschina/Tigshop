import{d as F,i as m,C as L,s as I,q as O,r as n,c as j,o as c,e as f,j as h,f as x,b as o,w as s,a0 as E,g as G,E as A,a1 as M,I as _}from"./index-CGYuOau0.js";import{F as T}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-CjXfTDg5.js";import{e as z,u as H}from"./shop-Daw3OFCx.js";import"./index-B-GURfkM.js";import"./vuedraggable.umd-_1km55l4.js";import"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";const J={class:"container"},K={class:"content_wrapper"},P={class:"lyecs-form-table"},se=F({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(S,{expose:k,emit:C}){const u=C,i=S,p=m(!1),v=L().currentRoute.value.query,b=m(i.isDialog?i.act:String(v.act)),g=m(i.isDialog?i.id:Number(v.id)),B=b.value==="add"?"create":"update",y=I(),t=m({}),N=async()=>{try{const a=await z(b.value,{shop_id:g.value});Object.assign(t.value,a.item)}catch(a){_.error(a.message),u("close")}finally{p.value=!1}};O(()=>{N()});const V=async()=>{await y.value.validate();try{u("update:confirmLoading",!0);const a=await H(B,{id:g.value,...t.value});u("submitCallback",a),_.success(a.message)}catch(a){_.error(a.message)}finally{u("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{V()}}),(a,e)=>{const w=n("el-radio-button"),D=n("el-radio-group"),r=n("el-form-item"),d=n("el-input"),R=n("el-button"),U=n("el-form"),q=n("a-spin");return c(),j("div",J,[f("div",K,[f("div",P,[p.value?x("",!0):(c(),h(U,{key:0,ref_key:"formRef",ref:y,model:t.value,"label-width":"auto"},{default:s(()=>[o(r,{label:"店铺状态",prop:"status"},{default:s(()=>[o(D,{modelValue:t.value.status,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.status=l)},{default:s(()=>[o(w,{label:"暂停运营",value:4}),o(w,{label:"运营中",value:1})]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"店铺名称",prop:"shop_title",rules:[{required:!0,message:"店铺名称不能为空!"}]},{default:s(()=>[o(d,{modelValue:t.value.shop_title,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.shop_title=l)},null,8,["modelValue"])]),_:1}),o(r,{label:"店铺LOGO",prop:"shop_logo"},{default:s(()=>[p.value?x("",!0):(c(),h(G(T),{key:0,photo:t.value.shop_logo,"onUpdate:photo":e[2]||(e[2]=l=>t.value.shop_logo=l)},null,8,["photo"])),e[5]||(e[5]=f("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1))]),_:1}),o(r,{label:"商家电话",prop:"contact_mobile"},{default:s(()=>[o(d,{modelValue:t.value.contact_mobile,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.contact_mobile=l)},null,8,["modelValue"])]),_:1}),o(r,{label:"店铺描述",prop:"description"},{default:s(()=>[o(d,{modelValue:t.value.description,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.description=l),row:"5",type:"textarea"},null,8,["modelValue"])]),_:1}),E(o(r,{"wrapper-col":{offset:4,span:16}},{default:s(()=>[o(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:V},{default:s(()=>e[6]||(e[6]=[A("提交")])),_:1},512)]),_:1},512),[[M,!i.isDialog]])]),_:1},8,["model"])),o(q,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{se as default};
