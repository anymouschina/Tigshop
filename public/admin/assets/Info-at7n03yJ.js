import{d as U,i as d,C as j,s as E,q as M,r,c as y,o as c,e as _,j as T,f as $,b as e,w as o,a0 as h,E as t,D as s,F as D,g as z,a1 as A,I as b}from"./index-CGYuOau0.js";import{a as G,u as H}from"./orderInvoice-uBjYMjqd.js";import"./index-B-GURfkM.js";import{_ as J}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";const K={class:"container"},P={class:"content_wrapper"},Q={class:"lyecs-form-table"},ae=U({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(S,{expose:I,emit:B}){const m=B,p=S,f=d(!0),g=j().currentRoute.value.query,w=d(p.isDialog?p.act:String(g.act)),k=d(p.isDialog?p.id:Number(g.id)),N=w.value==="add"?"create":"update",V=E(),a=d({}),O=async()=>{try{const u=await G(w.value,{id:k.value});Object.assign(a.value,u.item)}catch(u){b.error(u.message),m("close")}finally{f.value=!1}};M(()=>{O()});const x=async()=>{await V.value.validate();try{m("update:confirmLoading",!0);const u=await H(N,{id:k.value,...a.value});m("submitCallback",u),b.success(u.message)}catch(u){b.error(u.message)}finally{m("update:confirmLoading",!1)}};return I({onFormSubmit:()=>{x()}}),(u,n)=>{const l=r("el-form-item"),v=r("el-radio"),R=r("el-radio-group"),C=r("el-input"),F=r("el-button"),q=r("el-form"),L=r("a-spin");return c(),y("div",K,[_("div",P,[_("div",Q,[f.value?$("",!0):(c(),T(q,{key:0,ref_key:"formRef",ref:V,model:a.value,"label-width":"auto"},{default:o(()=>[e(l,{label:"申请会员",prop:"username"},{default:o(()=>[t(s(a.value.username),1)]),_:1}),e(l,{label:"发票类型",prop:"invoice_type_name"},{default:o(()=>[t(s(a.value.invoice_type_name),1)]),_:1}),a.value.invoice_type===2&&a.value.user_invoice?(c(),y(D,{key:0},[e(l,{label:"增票资质状态",prop:"company_name"},{default:o(()=>[e(z(J),{showOnOk:!1,params:{act:"detail",id:a.value.user_invoice.invoice_id},isDrawer:"",path:"finance/userInvoice/Info",title:"编辑增票资质申请",width:"600px"},{default:o(()=>[t(s(a.value.user_invoice.status_name)+" ",1),n[3]||(n[3]=_("a",{class:"btn-link"},"[查看]",-1))]),_:1},8,["params"])]),_:1}),e(l,{label:"公司名称",prop:"company_name"},{default:o(()=>[t(s(a.value.company_name),1)]),_:1}),e(l,{label:"纳税人识别码",prop:"company_code"},{default:o(()=>[t(s(a.value.company_code),1)]),_:1}),e(l,{label:"注册地址",prop:"company_address"},{default:o(()=>[t(s(a.value.company_address),1)]),_:1}),e(l,{label:"注册电话",prop:"company_phone"},{default:o(()=>[t(s(a.value.company_phone),1)]),_:1}),e(l,{label:"开户银行",prop:"company_bank"},{default:o(()=>[t(s(a.value.company_bank),1)]),_:1}),e(l,{label:"银行账户",prop:"company_account"},{default:o(()=>[t(s(a.value.company_account),1)]),_:1})],64)):(c(),y(D,{key:1},[e(l,{label:"发票抬头",prop:"title_type"},{default:o(()=>[t(s(a.value.title_type==1?"个人":"企业"),1)]),_:1}),e(l,{label:"企业税号",prop:"company_code"},{default:o(()=>[t(s(a.value.company_code),1)]),_:1}),e(l,{label:"发票内容",prop:"invoice_content"},{default:o(()=>[t(s(a.value.invoice_content),1)]),_:1})],64)),e(l,{label:"收票人姓名",prop:"company_name"},{default:o(()=>[t(s(a.value.company_name),1)]),_:1}),e(l,{label:"收票人电话",prop:"mobile"},{default:o(()=>[t(s(a.value.mobile),1)]),_:1}),e(l,{label:"收票人邮箱",prop:"email"},{default:o(()=>[t(s(a.value.email),1)]),_:1}),e(l,{label:"收票人地址",prop:"company_address"},{default:o(()=>[t(s(a.value.company_address),1)]),_:1}),e(l,{label:"申请状态",prop:"status"},{default:o(()=>[e(R,{modelValue:a.value.status,"onUpdate:modelValue":n[0]||(n[0]=i=>a.value.status=i)},{default:o(()=>[e(v,{value:0},{default:o(()=>n[4]||(n[4]=[t("待处理")])),_:1}),e(v,{value:1},{default:o(()=>n[5]||(n[5]=[t("已开")])),_:1}),e(v,{value:2},{default:o(()=>n[6]||(n[6]=[t("失败/作废")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(l,{label:"发票金额",prop:"amount"},{default:o(()=>[e(C,{modelValue:a.value.amount,"onUpdate:modelValue":n[1]||(n[1]=i=>a.value.amount=i),type:"text"},null,8,["modelValue"])]),_:1}),e(l,{label:"申请未通过原因",prop:"apply_reply"},{default:o(()=>[e(C,{modelValue:a.value.apply_reply,"onUpdate:modelValue":n[2]||(n[2]=i=>a.value.apply_reply=i),row:"2",type:"textarea"},null,8,["modelValue"]),n[7]||(n[7]=_("div",{class:"extra"},"若通过可不写",-1))]),_:1}),h(e(l,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[e(F,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:x},{default:o(()=>n[8]||(n[8]=[t("提交")])),_:1},512)]),_:1},512),[[A,!p.isDialog]])]),_:1},8,["model"])),e(L,{spinning:f.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ae as default};
