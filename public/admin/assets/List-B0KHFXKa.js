import{d as le,K as ne,i as y,G as de,q as ie,c,e as s,b as a,w as o,f as n,g as i,I as q,r as m,o as l,M as re,E as _,j as p,D as v,_ as ue}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{P as T}from"./PopFormElm-BZp1_Wme.js";import{_ as pe}from"./Switch.vue_vue_type_script_setup_true_lang-C5nzofSO.js";import{D as K}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as ce}from"./Pagination-wR9huHyl.js";import{u as L,i as me}from"./format-CRgx78oe.js";import{g as fe,a as _e,u as I,r as ve,b as be,c as ge}from"./product-DEi2MlvQ.js";import{S as ke}from"./SelectBrand-DNAqPzAl.js";import{_ as ye}from"./SelectCategory.vue_vue_type_script_setup_true_lang-DKnpU9uO.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-MgR9Z6jO.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as he}from"./SelectShop.vue_vue_type_script_setup_true_lang-FZKjv82Z.js";import Se from"./ProductStockPop-LsDW8zmK.js";import{a as U,b as M}from"./version-CL9k3sYf.js";import{_ as x}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./brand-C64i7ZtK.js";import"./category-B3nMG9Bb.js";import"./category-BQLd1cDS.js";import"./time-Bh5UhrfW.js";import"./shop-DM8_bN_f.js";const Ce={class:"container"},Ie={class:"content_wrapper"},Ve={class:"lyecs-table-list-warp"},we={class:"list-table-tool lyecs-search-warp"},qe={class:"advanced-search-warp list-table-tool-row"},xe={class:"simple-form-warp"},Oe={class:"simple-form-field"},Pe={class:"form-group"},Ae={class:"control-container"},Te={key:0,class:"simple-form-field"},Ue={class:"form-group"},De={class:"control-container"},Ne={class:"simple-form-field"},$e={class:"form-group"},ze={class:"control-container"},Be={class:"simple-form-field"},Fe={class:"form-group"},Ee={class:"control-container"},Re={class:"simple-form-field"},Ke={class:"form-group"},Le={class:"control-container"},Me={class:"simple-form-field"},je={class:"list-table-tool-row"},Ge={class:"list-table-tool-col"},He={key:6},We={class:"table-container"},Je={class:"flex"},Qe={key:0,class:"span-pic"},Xe=["href"],Ye=["src"],Ze={class:"span-product-con"},et={class:"span-product-name",style:{"word-break":"break-all"}},tt={key:0,class:"span-product-brand"},st={class:"span-con"},ot={key:1,class:"span-product-brand"},at={class:"span-con green"},lt={key:2,class:"span-product-brand"},nt={class:"span-con green"},dt={key:3,class:"span-product-brand"},it={class:"span-con green"},rt={key:4},ut={class:"span-con"},pt={class:"span-con"},ct={class:"status-switch"},mt={key:0},ft=["title"],_t=["title"],vt={key:0},bt={key:1},gt=["href"],kt={class:"empty-warp"},yt={key:0,class:"empty-bg"},ht={key:0,class:"pagination-con"},St=le({__name:"List",setup(Ct){const j=ne(),$=y([]),V=y(!0),O=y(0),z=y(0),h=y([]),u=de({page:1,size:j.pageSize,sortField:"",sortOrder:"",keyword:"",introType:"",isDelete:0,searchShop:0}),S=y(localStorage.getItem("adminType")),d=y(1),G=r=>{d.value=r,u.productStatus=r>=1&&r<=3?1:r>=4&&r<=6?0:void 0,u.checkStatus=r>=1&&r<=4?1:r===5?0:r===6?2:void 0,u.shopId=r===2?0:"",u.isDelete=r===7?1:0,u.searchShop=r===3?1:0,Object.keys(u).forEach(e=>{u[e]===void 0&&delete u[e]}),f()},H=async(r,e)=>{try{const A=await be(r,{productId:e});q.success("操作成功"),f()}catch(A){q.error(A.message)}},W=y([{label:"出售中的商品",value:1,isShow:!0},{label:"自营商品",value:2,isShow:S.value==="admin"&&U()},{label:"店铺商品",value:3,isShow:S.value==="admin"&&U()},{label:"已下架商品",value:4,isShow:!0},{label:"商品回收站",value:7,isShow:!0},{label:"待审核商品",value:5,count:z.value||0,isShow:S.value==="admin"&&U()},{label:"审核失败商品",value:6,isShow:S.value==="shop"}]),B=y(),J=r=>{B.value.SelectShopChange(r),C()},f=async()=>{V.value=!0;try{d.value===1&&(u.productStatus=1,u.checkStatus=1);const r=await fe({...u}),e=await _e();$.value=r.records,O.value=r.total,z.value=e}catch(r){q.error(r.message)}finally{V.value=!1}};ie(()=>{f()});const C=()=>{f()},Q=({prop:r,order:e})=>{u.sortField=r,u.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",f()},P=async r=>{try{const e=await ge(r,{ids:h.value});q.success("操作成功"),await f()}catch(e){q.error(e.message)}},X=r=>{h.value=r.map(e=>e.productId)};return(r,e)=>{const A=m("TigTabs"),b=m("el-button"),Y=m("TigInput"),D=m("el-option"),Z=m("el-select"),F=m("router-link"),w=m("el-popconfirm"),E=m("el-space"),ee=m("el-form"),k=m("el-table-column"),N=m("el-divider"),R=m("el-dropdown-item"),te=m("el-dropdown-menu"),se=m("el-dropdown"),oe=m("el-table"),ae=m("a-spin");return l(),c("div",Ce,[s("div",Ie,[a(A,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),tabs:W.value,onOnTabChange:G,class:"mb10"},null,8,["modelValue","tabs"]),s("div",Ve,[s("div",we,[a(ee,{model:u,name:"form"},{default:o(()=>[s("div",qe,[s("div",xe,[s("div",Oe,[s("div",Pe,[s("div",Ae,[a(Y,{modelValue:u.keyword,"onUpdate:modelValue":e[1]||(e[1]=t=>u.keyword=t),name:"keyword",placeholder:"输入商品名称/货号",onKeyup:re(C,["enter"]),clearable:"",onClear:C},{append:o(()=>[a(b,{onClick:C},{default:o(()=>e[12]||(e[12]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),d.value!==2&&S.value!="shop"&&i(U)()?(l(),c("div",Te,[s("div",Ue,[e[13]||(e[13]=s("label",{class:"control-label"},[s("span",null,"店铺：")],-1)),s("div",De,[a(i(he),{modelValue:u.shopId,"onUpdate:modelValue":e[2]||(e[2]=t=>u.shopId=t),onOnChange:J},null,8,["modelValue"])])])])):n("",!0),s("div",Ne,[s("div",$e,[e[14]||(e[14]=s("label",{class:"control-label"},[s("span",null,"分类：")],-1)),s("div",ze,[a(i(ye),{ref_key:"selectCategoryRef",ref:B,categoryId:u.categoryId,"onUpdate:categoryId":e[3]||(e[3]=t=>u.categoryId=t)},null,8,["categoryId"])])])]),s("div",Be,[s("div",Fe,[e[15]||(e[15]=s("label",{class:"control-label"},[s("span",null,"品牌：")],-1)),s("div",Ee,[a(i(ke),{brandId:u.brandId,"onUpdate:brandId":e[4]||(e[4]=t=>u.brandId=t),onOnChange:C},null,8,["brandId"])])])]),s("div",Re,[s("div",Ke,[e[16]||(e[16]=s("label",{class:"control-label"},[s("span",null,"类型 ：")],-1)),s("div",Le,[a(Z,{modelValue:u.introType,"onUpdate:modelValue":e[5]||(e[5]=t=>u.introType=t),clearable:"",onChange:C},{default:o(()=>[a(D,{label:"精品",value:"isBest"}),a(D,{label:"热销",value:"isHot"}),a(D,{label:"新品",value:"isNew"})]),_:1},8,["modelValue"])])])]),s("div",Me,[a(b,{type:"primary",onClick:C},{default:o(()=>e[17]||(e[17]=[_("搜索")])),_:1})])])]),s("div",je,[s("div",Ge,[a(E,null,{default:o(()=>[a(i(x),{params:{act:"add"},isDrawer:"",path:"product/product/Info",title:"添加商品",width:"950px",onOkCallback:f},{default:o(()=>[a(b,{type:"primary"},{default:o(()=>e[18]||(e[18]=[_("添加商品")])),_:1})]),_:1}),i(M)()&&S.value==="admin"?(l(),p(F,{key:0,to:{path:"/setting/multilingual/translationContent/list",query:{type:"product"}}},{default:o(()=>[a(b,null,{default:o(()=>e[19]||(e[19]=[_("批量翻译商品")])),_:1})]),_:1})):n("",!0),i(M)()&&S.value==="shop"?(l(),p(F,{key:1,to:{path:"/merchant_setting/shop_multilingual/shop_translationContent/list",query:{type:"product"}}},{default:o(()=>[a(b,null,{default:o(()=>e[20]||(e[20]=[_("批量翻译商品")])),_:1})]),_:1})):n("",!0),d.value==4||d.value==1?(l(),p(w,{key:2,title:"您确认要批量移入回收站吗？",onConfirm:e[6]||(e[6]=t=>P("recycle"))},{reference:o(()=>[a(b,{disabled:h.value.length===0},{default:o(()=>e[21]||(e[21]=[_("批量移入回收站")])),_:1},8,["disabled"])]),_:1})):n("",!0),d.value==7?(l(),p(w,{key:3,title:"您确认要批量还原吗？",onConfirm:e[7]||(e[7]=t=>P("restore"))},{reference:o(()=>[a(b,{disabled:h.value.length===0},{default:o(()=>e[22]||(e[22]=[_("批量还原")])),_:1},8,["disabled"])]),_:1})):n("",!0),d.value==4?(l(),p(w,{key:4,title:"您确认要批量上架吗？",onConfirm:e[8]||(e[8]=t=>P("up"))},{reference:o(()=>[a(b,{disabled:h.value.length===0},{default:o(()=>e[23]||(e[23]=[_("批量上架")])),_:1},8,["disabled"])]),_:1})):n("",!0),d.value==1?(l(),p(w,{key:5,title:"您确认要批量下架吗？",onConfirm:e[9]||(e[9]=t=>P("down"))},{reference:o(()=>[a(b,{disabled:h.value.length===0},{default:o(()=>e[24]||(e[24]=[_("批量下架")])),_:1},8,["disabled"])]),_:1})):n("",!0),h.value.length>0?(l(),c("span",He,[e[25]||(e[25]=_(" 已选择：")),s("b",null,v(h.value.length),1),e[26]||(e[26]=_(" 项 "))])):n("",!0)]),_:1})]),e[27]||(e[27]=s("div",{class:"list-table-tool-col"},null,-1))])]),_:1},8,["model"])]),s("div",We,[a(ae,{spinning:V.value},{default:o(()=>[a(oe,{data:$.value,total:O.value,"row-key":"productId",onSelectionChange:X,onSortChange:Q},{empty:o(()=>[s("div",kt,[V.value?n("",!0):(l(),c("div",yt,"暂无数据"))])]),default:o(()=>[a(k,{type:"selection",width:"32"}),a(k,{label:"商品名称",prop:"productId",sortable:"custom","min-width":320},{default:o(({row:t})=>[s("div",Je,[t.picThumb?(l(),c("div",Qe,[s("a",{href:i(L)({path:"product",sn:t.productSn}),target:"_blank"},[s("img",{src:i(me)(t.picThumb),height:"40",width:"40",alt:""},null,8,Ye)],8,Xe)])):n("",!0),s("div",Ze,[s("div",et,[a(i(T),{max:100,"org-value":t.productName,"onUpdate:orgValue":g=>t.productName=g,params:{id:t.productId,field:"productName"},requestApi:i(I),label:"商品名称",type:"textarea"},{default:o(()=>[s("div",null,v(t.productName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),t.brandName?(l(),c("p",tt,[e[28]||(e[28]=s("span",{class:"span-tit"},"商品：",-1)),s("span",st,v(t.brandName),1)])):n("",!0),t.shopSimple?(l(),c("p",ot,[e[29]||(e[29]=s("span",{class:"span-tit"},"店铺：",-1)),s("span",at,v(t.shopSimple.shopTitle),1)])):n("",!0),t.shop?(l(),c("p",lt,[e[30]||(e[30]=s("span",{class:"span-tit"},"店铺：",-1)),s("span",nt,v(t.shop.shopTitle),1)])):n("",!0),t.suppliersName?(l(),c("p",dt,[e[31]||(e[31]=s("span",{class:"span-tit"},"供应商：",-1)),s("span",it,v(t.suppliersName),1)])):n("",!0),t.type===2?(l(),c("p",rt,e[32]||(e[32]=[s("span",{class:"span-con green"},"【虚拟商品】",-1)]))):n("",!0)])])]),_:1}),a(k,{width:200,label:"商品信息"},{default:o(({row:t})=>[e[33]||(e[33]=s("span",{class:"span-tit"},"货号：",-1)),s("div",ut,[a(i(T),{"org-value":t.productSn,"onUpdate:orgValue":g=>t.productSn=g,params:{id:t.productId,field:"productSn"},requestApi:i(I),label:"货号",max:20},{default:o(()=>[s("div",null,v(t.productSn||"--"),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),e[34]||(e[34]=s("br",null,null,-1)),e[35]||(e[35]=s("span",{class:"span-tit"},"售价：",-1)),s("div",pt,[a(i(T),{extra:"请输入商品价格",isPrice:"","org-value":t.productPrice,"onUpdate:orgValue":g=>t.productPrice=g,params:{id:t.productId,field:"productPrice"},requestApi:i(I),label:"售价",type:"decimal"},{default:o(()=>[s("div",null,v(t.productPrice||0),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])])]),_:1}),d.value!=7&&d.value!=5&&d.value!=6?(l(),p(k,{key:0,width:100,label:"是否上架"},{default:o(({row:t})=>[s("div",ct,[t.checkStatus==1?(l(),c("div",mt,[a(i(pe),{checked:t.productStatus,"onUpdate:checked":g=>t.productStatus=g,params:{id:t.productId,field:"productStatus"},requestApi:i(I)},null,8,["checked","onUpdate:checked","params","requestApi"])])):n("",!0)])]),_:1})):n("",!0),d.value===5||d.value===6?(l(),p(k,{key:1,width:100,label:"审核状态"},{default:o(({row:t})=>[t.checkStatus===2?(l(),c("span",{key:0,class:"red tips-hover",title:t.checkReason},e[36]||(e[36]=[_("审核失败 "),s("i",{class:"ico-font"},"",-1)]),8,ft)):n("",!0),t.checkStatus===0?(l(),c("span",{key:1,class:"tips-hover gray",title:t.checkReason},"审核中",8,_t)):n("",!0),e[37]||(e[37]=s("br",null,null,-1))]),_:1})):n("",!0),d.value===6?(l(),p(k,{key:2,width:120,label:"失败原因","show-overflow-tooltip":""},{default:o(({row:t})=>[_(v(t.checkReason),1)]),_:1})):n("",!0),d.value!=7?(l(),p(k,{key:3,width:100,label:"库存",prop:"productStock",sortable:"custom"},{default:o(({row:t})=>[t.productExist?(l(),c("a",vt,v(t.productStock),1)):(l(),c("div",bt,[V.value?n("",!0):(l(),p(Se,{key:0,params:{id:t.productId,productInfo:t},requestApi:i(I),onCallback:f},{default:o(()=>[s("div",null,v(t.productStock),1)]),_:2},1032,["params","requestApi"]))]))]),_:1})):n("",!0),d.value!=7?(l(),p(k,{key:4,width:100,label:"排序",prop:"sortOrder",sortable:"custom"},{default:o(({row:t})=>[a(i(T),{"org-value":t.sortOrder,"onUpdate:orgValue":g=>t.sortOrder=g,params:{id:t.productId,field:"sortOrder"},requestApi:i(I),label:"排序",type:"integer"},{default:o(()=>[s("div",null,v(t.sortOrder),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1})):n("",!0),a(k,{width:150,fixed:"right",label:"操作"},{default:o(({row:t})=>[a(E,{size:0},{default:o(()=>[d.value==5&&t.checkStatus===0?(l(),p(i(x),{key:0,maskClose:!1,params:{act:"detail",id:t.productId,examine:1},showClose:!1,showOnOk:!1,isDrawer:"",path:"product/product/Info",title:"商品详情",width:"900px",onOkCallback:f},{default:o(()=>e[38]||(e[38]=[s("a",{class:"btn-link"},"详情",-1)])),_:2},1032,["params"])):n("",!0),d.value==5&&t.checkStatus===0?(l(),p(N,{key:1,direction:"vertical"})):n("",!0),d.value==6&&t.checkStatus===2?(l(),p(i(x),{key:2,maskClose:!1,params:{act:"again",id:t.productId},dialogClass:"noPadding",isDrawer:"",path:"product/product/Info",title:"修改商品（重新审核）",width:"600px",onOkCallback:f},{default:o(()=>e[39]||(e[39]=[s("a",{class:"btn-link"},"重新审核",-1)])),_:2},1032,["params"])):n("",!0),d.value==5&&t.checkStatus===0?(l(),p(i(x),{key:3,maskClose:!1,params:{act:"detail",id:t.productId},dialogClass:"noPadding",isDrawer:"",path:"product/product/Examine",title:"商品审核",width:"600px",onOkCallback:f},{default:o(()=>e[40]||(e[40]=[s("a",{class:"btn-link"},"去处理",-1)])),_:2},1032,["params"])):n("",!0),d.value!=7&&d.value!=5&&d.value!=6?(l(),p(i(x),{key:4,maskClose:!1,params:{act:"detail",id:t.productId},isDrawer:"",path:"product/product/Info",title:"编辑商品",width:"950px",onOkCallback:f},{default:o(()=>e[41]||(e[41]=[s("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])):n("",!0),d.value!=7?(l(),p(N,{key:5,direction:"vertical"})):n("",!0),d.value!=7&&d.value!=5&&d.value!=6?(l(),c("a",{key:6,class:"btn-link",href:i(L)({path:"product",sn:t.productSn}),target:"_blank"},"查看",8,gt)):n("",!0),d.value!=7&&d.value!=5&&d.value!=6?(l(),p(N,{key:7,direction:"vertical"})):n("",!0),d.value===7?(l(),p(i(K),{key:8,params:{id:t.productId,field:"isDelete",val:0},requestApi:i(I),title:"确定还原该商品吗？",onAfterDelete:f},{default:o(()=>e[42]||(e[42]=[_(" 还原 ")])),_:2},1032,["params","requestApi"])):n("",!0),d.value!=7?(l(),p(se,{key:9,trigger:"hover","hide-on-click":!1},{dropdown:o(()=>[a(te,null,{default:o(()=>[a(R,null,{default:o(()=>[a(i(K),{params:{id:t.productId,isDelete:1},requestApi:i(ve),title:"确定把该商品移入回收站吗？",onAfterDelete:f},{default:o(()=>e[43]||(e[43]=[_(" 移入回收站 ")])),_:2},1032,["params","requestApi"])]),_:2},1024),a(R,null,{default:o(()=>[a(w,{title:"确定复制?",onConfirm:g=>H("copy",t.productId)},{reference:o(()=>[a(b,{style:{width:"100%"},link:"",type:"primary"},{default:o(()=>e[44]||(e[44]=[_("复制")])),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:2},1024)]),default:o(()=>[e[45]||(e[45]=s("span",{class:"iconfont-admin icon-gengduo1 btn-link"},null,-1))]),_:2},1024)):n("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),O.value>0?(l(),c("div",ht,[a(i(ce),{page:u.page,"onUpdate:page":e[10]||(e[10]=t=>u.page=t),size:u.size,"onUpdate:size":e[11]||(e[11]=t=>u.size=t),total:O.value,onCallback:f},null,8,["page","size","total"])])):n("",!0)])])])])}}}),Wt=ue(St,[["__scopeId","data-v-100d7e02"]]);export{Wt as default};
