import{M as $}from"./index-B-GURfkM.js";import{_ as j}from"./Editor.vue_vue_type_script_setup_true_lang-BBcTD5Hp.js";import{d as N}from"./vuedraggable.umd-_1km55l4.js";import{i as b}from"./format-DFT-VJzO.js";import{_ as y}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import{d as P,i as u,q as V,aa as E,r as F,c as v,o as p,j as I,f,b as n,w as d,e as t,g as r,E as h,F as D,_ as L}from"./index-CGYuOau0.js";import"./index.esm-WCz80Rui.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";const U={class:"goods-info-edit-warp"},q={class:"goods-info-edit-act flex"},z={class:"goods-info-edit-con"},S={class:"info-edit-list-item",draggable:"false",style:{}},G={key:0,class:"edit-list-item-img"},J={class:"lyecs-dialogImage",draggable:"false"},K=["src"],Q={key:1,class:"edit-list-item-text"},R=["onClick"],W=["onClick"],X=["innerHTML"],Y=P({__name:"ProductDesc",props:{descArr:{type:[Object,Array],default:[]},disabled:{type:Boolean,default:!1}},emits:["update:descArr"],setup(g,{emit:k}){const l=u(g.descArr||[]),c=u(!1),a=u({html:""}),i=u(0),x=k;V(()=>{x("update:descArr",l)});const C=s=>{for(let e in s)l.value.push({pic:s[e].pic_url,type:"pic"})},w=(s,e)=>{i.value=e.index,l.value[i.value]={pic:s[0].pic_url,type:"pic"}},A=E(()=>{let s=[];for(let e in l.value)l.value[e].type=="pic"?s.push('<div class="desc-pic-item"><img src="'+b(l.value[e].pic)+'"></div>'):s.push(l.value[e].html);return s.join("<div data-division=1></div>")}),M=()=>{console.log(i.value),c.value=!0,a.value.html=""},O=s=>{console.log(i.value),a.value.html=l.value[s].html,i.value=s,c.value=!0},T=s=>{l.value.splice(s,1)},B=()=>{i.value>0?l.value[i.value]={html:a.value.html,type:"text"}:l.value.push({html:a.value.html,type:"text"}),console.log(l.value),c.value=!1};return(s,e)=>{const _=F("el-form-item");return p(),v(D,null,[g.disabled?f("",!0):(p(),I(_,{key:0,label:"商品描述"},{default:d(()=>[t("div",U,[t("div",q,[n(r(y),{type:"gallery",class:"item-bg",onOkCallback:C,params:{isMultiple:!0}},{default:d(()=>e[5]||(e[5]=[t("a",{class:"add-item info-pic-add"},[t("i",{class:"iconfont icon-tianjiatupian"}),h("添加图片")],-1)])),_:1}),t("a",{class:"add-item info-text-add",onClick:M},e[6]||(e[6]=[t("i",{class:"iconfont icon-wenben",style:{"font-size":"14px"}},null,-1),h("添加文本")])),e[7]||(e[7]=t("span",null,"点击按钮添加图片或者文本，您还可以通过拖拽进行排序",-1))]),t("div",z,[n(r(N),{class:"info-edit-con-list","item-key":"",list:l.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:e[0]||(e[0]=()=>{}),onEnd:e[1]||(e[1]=()=>{})},{item:d(({element:o,index:m})=>[t("div",S,[o.type=="pic"?(p(),v("div",G,[t("a",J,[t("img",{src:r(b)(o.pic),draggable:"false"},null,8,K)]),n(r(y),{type:"gallery",class:"item-bg",onOkCallback:w,params:{isMultiple:!1},data:{index:m}},{default:d(()=>e[8]||(e[8]=[t("div",{class:"btn-edit"},"修改",-1)])),_:2},1032,["data"])])):f("",!0),o.type=="text"?(p(),v("div",Q,[e[9]||(e[9]=t("p",null,[t("i",{class:"iconfont icon-1fuwenben"})],-1)),e[10]||(e[10]=t("p",null,"文本",-1)),t("div",{class:"btn-edit",onClick:H=>O(m)},"修改",8,R)])):f("",!0),t("i",{class:"btn-del iconfont icon-cha",onClick:H=>T(m)},null,8,W)])]),_:1},8,["list"])]),n(r($),{open:c.value,"onUpdate:open":e[3]||(e[3]=o=>c.value=o),title:"添加文本",onOk:e[4]||(e[4]=o=>B()),destroyOnClose:!0,width:800},{default:d(()=>[n(r(j),{html:a.value.html,"onUpdate:html":e[2]||(e[2]=o=>a.value.html=o),height:"300px"},null,8,["html"])]),_:1},8,["open"])])]),_:1})),n(_,{label:"H5预览"},{default:d(()=>[t("div",{class:"goods-detail-preview-warp",innerHTML:A.value},null,8,X)]),_:1})],64)}}}),re=L(Y,[["__scopeId","data-v-0ebbe90a"]]);export{re as default};
