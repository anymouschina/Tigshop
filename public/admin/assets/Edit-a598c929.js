import{d as B,j as k,r as x,o as d,c as _,e,F as V,a as S,f as m,h as E,q as W,G as D,b as l,w as a,H as y,k as N,p as J,i as K,_ as Q,u as X}from"./index-7c2d2aef.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import{M as Y}from"./index-6c62cf9b.js";import"./config-9548fa9b.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import"./region-e0d291a6.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import"./vuedraggable.umd-75ad0f8f.js";import{s as Z}from"./ProductGroupSelect.vue_vue_type_style_index_0_scoped_7a7acb69_lang-fed017a0.js";import{l as ee}from"./lodash-a19d39c0.js";import{i as j}from"./format-4e0206d3.js";import{_ as H}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import{_ as te}from"./Edit.vue_vue_type_script_setup_true_lang-b1c0d6c6.js";import{_ as oe}from"./Edit.vue_vue_type_script_setup_true_lang-e7fa6711.js";import"./time-290942a2.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";import"./region-05802f67.js";import"./SelectLink-f2e6e565.js";import"./SelectColor.vue_vue_type_script_setup_true_lang-4a4dabb3.js";import"./PicSelect-c3474553.js";import"./index-12b8b5ea.js";/* empty css                                                             */const M=v=>(J("data-v-95208ddb"),v=v(),K(),v),ae={class:"dec-pic-group dec-pic-hotarea-group"},se={class:"dec-pic-group-list"},le={class:"dec-pic-group-item","data-index":"{$smarty.foreach.pic_list.index}"},ie={class:"dec-pic-group-item-con"},ne={class:"item-image"},ce={class:"item-image-con"},de=["onClick","src"],re=["onClick"],pe={class:"area_box_con_text"},ue=M(()=>e("span",{class:"change-image"},"更换图片",-1)),_e=["onClick"],me=M(()=>e("i",{class:"ico-decorate icon-dec-cha"},null,-1)),ve=[me],he={class:"hotarea-edit-dialog-warp"},ge={class:"hotarea-edit-dialog-con"},fe={class:"hotarea-edit-box-wrap"},ke={class:"hotarea-edit-box"},ye=["src"],xe={class:"hotarea-edit-box-area"},be={class:"area-bg"},we={class:"area_box_con_text"},Ce={class:"input-with-clear"},Ie={class:"dec-pic-add-con"},$e=M(()=>e("div",{class:"dec-pic-add-btn"},[e("i",{class:"ico-decorate icon-dec-jia"}),y("添加新热图")],-1)),Ve=328,Se=B({__name:"ImageHotarea",props:{photos:{type:Array,default:[]},defaultValue:{type:Object}},setup(v){const p=v,g=k(!1),o=k(p.photos),C=(t,n)=>{Object.assign(o.value[n.index],t[0])},h=t=>{o.value.push(...t)},P=t=>{o.value.splice(t,1)},f=k(0),O=t=>{g.value=!0,f.value=t,s.value=ee.cloneDeep(o.value[f.value].hotarea)||[],console.log(s.value)},s=k([]),r=k(0),U=()=>{s.value.push({height:100,width:100,left:10,top:10})},z=t=>{r.value=t},F=(t,n)=>{s.value[r.value].left=parseInt(t),s.value[r.value].top=parseInt(n)},L=(t,n,w,I)=>{s.value[r.value].left=parseInt(t),s.value[r.value].top=parseInt(n),s.value[r.value].width=parseInt(w),s.value[r.value].height=parseInt(I)},R=t=>{s.value.splice(t,1)},T=()=>{g.value=!1,o.value[f.value].hotarea=s.value,console.log("editPicIndex.value",f.value),console.log("photos.value",o.value)},b=t=>t/500*Ve,q=(t,n)=>{r.value=n.index,s.value[r.value].link=t,console.log(s.value)};return(t,n)=>{const w=x("a-menu-item"),I=x("a-menu"),G=x("a-dropdown"),$=x("a-button");return d(),_("div",ae,[e("div",se,[(d(!0),_(V,null,S(o.value,(i,u)=>(d(),_("div",le,[e("div",ie,[e("div",ne,[e("div",ce,[i.pic_url?(d(),_("img",{key:0,onClick:c=>O(u),class:"item-image-src",src:m(j)(i.pic_url)},null,8,de)):E("",!0),i.hotarea?(d(!0),_(V,{key:1},S(i.hotarea,(c,De)=>{var A;return d(),_("div",{onClick:je=>O(u),class:"image-hotarea-link",style:W({width:b(c.width)+"px",height:b(c.height)+"px",top:b(c.top)+"px",left:b(c.left)+"px"})},[e("span",pe,D((A=c.link)==null?void 0:A.name),1)],12,re)}),256)):E("",!0),l(m(H),{type:"gallery",class:"",onOkCallback:C,params:{isMultiple:!1},data:{index:u},style:{width:"100%"}},{default:a(()=>[ue]),_:2},1032,["data"])])]),e("div",{class:"del-item",onClick:c=>P(u)},ve,8,_e)])]))),256))]),l(m(Y),{open:g.value,"onUpdate:open":n[1]||(n[1]=i=>g.value=i),width:"500px",destroyOnClose:!0,title:"绘制热区",class:"noPadding"},{footer:a(()=>[l($,{style:{"margin-right":"8px"},onClick:U},{default:a(()=>[y("添加区域")]),_:1}),l($,{style:{"margin-right":"8px"},type:"primary",onClick:T},{default:a(()=>[y("保存")]),_:1}),l($,{onClick:n[0]||(n[0]=i=>g.value=!1)},{default:a(()=>[y("取消")]),_:1})]),default:a(()=>[e("div",he,[e("div",ge,[e("div",fe,[e("div",ke,[o.value[f.value].pic_url?(d(),_("img",{key:0,class:"bgImg",src:m(j)(o.value[f.value].pic_url)},null,8,ye)):E("",!0),e("div",xe,[(d(!0),_(V,null,S(s.value,(i,u)=>(d(),N(m(Z),{class:"",parent:!0,"min-width":30,"min-height":30,w:i.width,h:i.height,x:i.left,y:i.top,onResizing:L,onActivated:c=>z(u),onDragstop:F},{default:a(()=>[l(G,{trigger:["contextmenu"],style:{width:"100%",height:"100%"}},{overlay:a(()=>[l(I,null,{default:a(()=>[l(m(H),{params:{act:"edit",id:1},data:{index:u},isDrawer:"",path:"link/LinkSelect",style:{width:"100%"},title:"选择链接",width:"700px",onOkCallback:q},{default:a(()=>[e("div",Ce,[l(w,null,{default:a(()=>[y("编辑链接")]),_:1})])]),_:2},1032,["data"]),l(w,{onClick:c=>R(u)},{default:a(()=>[y("删除区域")]),_:2},1032,["onClick"])]),_:2},1024)]),default:a(()=>{var c;return[e("div",be,[e("span",we,D(((c=i.link)==null?void 0:c.name)||"右键编辑"),1)])]}),_:2},1024)]),_:2},1032,["w","h","x","y","onActivated"]))),256))])])])])])]),_:1},8,["open"]),e("div",Ie,[l(m(H),{type:"gallery",class:"",onOkCallback:h,params:{isMultiple:!0},style:{width:"100%"}},{default:a(()=>[$e]),_:1})])])}}}),Ee=Q(Se,[["__scopeId","data-v-95208ddb"]]),He=e("div",{class:"dec-edit-title"},[e("h3",null,"绘制热区")],-1),Me={class:"dec-edit-group dec-edit-group-block"},Oe=e("div",{class:"dec-edit-group-desc"},[e("div",{class:"pic-change-desc"},"提示：添加图片后，点击图片进入绘制")],-1),Ae={class:"dec-edit-group-con"},dt=B({__name:"Edit",props:{module:{default:()=>({})},moduleModifiers:{}},emits:["update:module"],setup(v){k({pic_type:{1:"一行一个",2:"轮播",3:"横向滑动-大图",4:"横向滑动-小图",5:"一行两个",6:"一行三个",7:"一行四个"},pic_page_type:{1:"样式一",2:"样式二",3:"样式三 "}});const p=X(v,"module");return(g,o)=>{const C=x("perfect-scrollbar");return d(),N(C,{class:"decorate-edit-con"},{default:a(()=>[He,e("div",Me,[Oe,e("div",Ae,[l(m(Ee),{photos:p.value.pic_list,"onUpdate:photos":o[0]||(o[0]=h=>p.value.pic_list=h)},null,8,["photos"])])]),l(oe,{modelValue:p.value.frame,"onUpdate:modelValue":o[1]||(o[1]=h=>p.value.frame=h)},null,8,["modelValue"]),l(te,{modelValue:p.value.title,"onUpdate:modelValue":o[2]||(o[2]=h=>p.value.title=h),decorateType:"mobile"},null,8,["modelValue"])]),_:1})}}});export{dt as default};
