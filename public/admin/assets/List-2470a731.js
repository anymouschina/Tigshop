import{d as K,j as C,I as j,x as E,r as _,o as c,c as u,e,b as t,w as s,f as n,h as m,H as i,K as U,L as G,G as h,k as x}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{P as V}from"./PopFormElm-61cd9b7d.js";import{_ as H}from"./Switch.vue_vue_type_script_setup_true_lang-95245cd7.js";import{_ as M}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as T}from"./Pagination-8eb7b6b1.js";import{u as J}from"./config-9548fa9b.js";import{g as Q,u as b,d as R,b as W}from"./coupon-4c7a2f76.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as X}from"./SelectShop.vue_vue_type_script_setup_true_lang-a1d04369.js";import"./region-e0d291a6.js";import"./shopProductCategory-792e0c23.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";import"./time-290942a2.js";import"./util-1ee03ed8.js";import"./shop-b8a8699a.js";import"./region-05802f67.js";const Y={class:"container"},Z={class:"content_wrapper"},ee={class:"bonus-wrap"},oe=e("p",{class:"subtitle"},"按使用场景快速创建",-1),te={class:"card-wrap"},se={class:"card-wrap__container"},ae={class:"item-bg coupon-cards-item"},ne=e("div",null,[e("div",{class:"title"},"满减券"),e("div",{class:"desc"},[e("p",null,[i("例：满100元减20元"),e("br"),i("便于合理控制活动成本")])])],-1),ie={class:"item-bg coupon-cards-item"},le=e("div",null,[e("div",{class:"title"},"折扣券"),e("div",{class:"desc"},[e("p",null,[i("例：满100元打9折"),e("br"),i("提高店铺销量和客单价")])])],-1),de={class:"item-bg coupon-cards-item item-bg2"},pe=e("div",null,[e("div",{class:"title"},"新人专享券"),e("div",{class:"desc"},[e("p",null,[i("仅店铺新客可领，提高新客"),e("br"),i("首单转化")])])],-1),ce={class:"item-bg coupon-cards-item item-bg2"},re=e("div",null,[e("div",{class:"title"},"会员专享券"),e("div",{class:"desc"},[e("p",null,[i("限会员可领的优惠券，丰富会"),e("br"),i("员权益，凸显会员身份价值")])])],-1),_e={class:"lyecs-table-list-warp"},ue={class:"list-table-tool lyecs-search-warp"},me={class:"advanced-search-warp list-table-tool-row"},fe={class:"simple-form-warp"},ve={key:0,class:"simple-form-field"},he={class:"form-group"},ge={class:"control-container"},ye={class:"simple-form-field"},be={class:"form-group"},ke={class:"control-container"},we=e("span",{class:"iconfont icon-chakan1"},null,-1),Ce={class:"list-table-tool-row"},Ve={class:"list-table-tool-col"},Ue={key:0},xe={class:"table-container"},Ae={style:{position:"relative"}},qe={key:0,class:"green"},Se={key:1,class:"green"},ze={key:1},De=e("a",{class:"btn-link"},"编辑",-1),Ie={class:"empty-warp"},Be={key:0,class:"empty-bg"},Oe={key:0,class:"pagination-con"},no=K({__name:"List",setup(Pe){const S=J(),A=C(),g=C(!0),w=C(0),y=C([]),l=j({page:1,size:S.get("page_size"),sort_field:"",sort_order:"",keyword:"",is_show:-1,shop_id:0}),d=async()=>{g.value=!0;try{const p=await Q({...l});A.value=p.filter_result,w.value=p.total}catch(p){U.error(p.message)}finally{g.value=!1}};E(()=>{d()});const q=()=>{d()},z=({prop:p,order:a})=>{l.sort_field=p,l.sort_order=a=="ascending"?"asc":a=="descending"?"desc":"",d()},D=async p=>{try{const a=await W(p,{ids:y.value});U.success(a.message),d()}catch(a){U.error(a.message)}},I=p=>{y.value=p.map(a=>a.coupon_id)};return(p,a)=>{const v=_("el-button"),B=_("el-input"),O=_("el-popconfirm"),P=_("el-space"),$=_("el-form"),f=_("el-table-column"),L=_("el-divider"),N=_("el-table"),F=_("a-spin");return c(),u("div",Y,[e("div",Z,[e("div",ee,[oe,e("div",te,[e("div",se,[e("div",ae,[ne,t(n(k),{isDrawer:"",onOkCallback:d,title:"添加满减券",width:"800px",path:"promotion/coupon/Info",params:{act:"add",coupon_type:1}},{default:s(()=>[t(v,{type:"primary"},{default:s(()=>[i("立即新建")]),_:1})]),_:1})]),e("div",ie,[le,t(n(k),{isDrawer:"",onOkCallback:d,title:"添加折扣券",width:"800px",path:"promotion/coupon/Info",params:{act:"add",coupon_type:2}},{default:s(()=>[t(v,{type:"primary"},{default:s(()=>[i("立即新建")]),_:1})]),_:1})]),e("div",de,[pe,t(n(k),{isDrawer:"",onOkCallback:d,title:"添加新人专享券",width:"800px",path:"promotion/coupon/Info",params:{act:"add",is_new_user:1}},{default:s(()=>[t(v,{type:"primary"},{default:s(()=>[i("立即新建")]),_:1})]),_:1})]),e("div",ce,[re,t(n(k),{isDrawer:"",onOkCallback:d,title:"添加会员专享券",width:"850px",path:"promotion/coupon/Info",params:{act:"add",is_new_user:2}},{default:s(()=>[t(v,{type:"primary"},{default:s(()=>[i("立即新建")]),_:1})]),_:1})])])])]),e("div",_e,[e("div",ue,[t($,{model:l},{default:s(()=>[e("div",me,[e("div",fe,[l.shop_id==-1?(c(),u("div",ve,[e("div",he,[e("div",ge,[t(n(X),{shop_id:l.shop_id,"onUpdate:shop_id":a[0]||(a[0]=o=>l.shop_id=o)},null,8,["shop_id"])])])])):m("",!0),e("div",ye,[e("div",be,[e("div",ke,[t(B,{modelValue:l.keyword,"onUpdate:modelValue":a[1]||(a[1]=o=>l.keyword=o),name:"keyword",placeholder:"输入优惠券名称",onKeyup:G(q,["enter"])},{append:s(()=>[t(v,{onClick:q},{default:s(()=>[we]),_:1})]),_:1},8,["modelValue"])])])])])]),e("div",Ce,[e("div",Ve,[t(P,null,{default:s(()=>[t(O,{title:"您确认要批量删除所选数据吗？",onConfirm:a[2]||(a[2]=o=>D("del"))},{reference:s(()=>[t(v,{disabled:y.value.length===0},{default:s(()=>[i("批量删除")]),_:1},8,["disabled"])]),_:1}),y.value.length>0?(c(),u("span",Ue,[i(" 已选择："),e("b",null,h(y.value.length),1),i(" 项 ")])):m("",!0)]),_:1})])])]),_:1},8,["model"])]),e("div",xe,[t(F,{spinning:g.value},{default:s(()=>[t(N,{data:A.value,"row-key":"coupon_id",onSelectionChange:I,total:w.value,onSortChange:z,loading:g.value},{empty:s(()=>[e("div",Ie,[g.value?m("",!0):(c(),u("div",Be,"暂无数据"))])]),default:s(()=>[t(f,{type:"selection",width:"32"}),t(f,{label:"优惠券名称",prop:"coupon_id",width:200},{default:s(({row:o})=>[e("div",Ae,[t(n(V),{label:"优惠券名称",type:"textarea",requestApi:n(b),"org-value":o.coupon_name,"onUpdate:orgValue":r=>o.coupon_name=r,params:{id:o.coupon_id,field:"coupon_name"}},{default:s(()=>[e("div",null,h(o.coupon_name),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])])]),_:1}),t(f,{label:"发放类型"},{default:s(({row:o})=>[i(h(o.coupon_type==1?"满减券":"折扣券")+" ",1),o.is_new_user==1?(c(),u("span",qe,"(新人专享)")):m("",!0),o.limit_user_rank.length?(c(),u("span",Se,"(会员专享)")):m("",!0)]),_:1}),t(f,{label:"优惠券金额(折扣)",prop:"coupon_money",sortable:"custom"},{default:s(({row:o})=>[o.coupon_type==1?(c(),x(n(V),{key:0,label:"优惠券金额",type:"input",requestApi:n(b),"org-value":o.coupon_money,"onUpdate:orgValue":r=>o.coupon_money=r,params:{id:o.coupon_id,field:"coupon_money"}},{default:s(()=>[e("div",null,h(o.coupon_money||"0"),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])):m("",!0),o.coupon_type==2?(c(),x(n(V),{key:1,label:"优惠券折扣",type:"input",requestApi:n(b),"org-value":o.coupon_discount,"onUpdate:orgValue":r=>o.coupon_discount=r,params:{id:o.coupon_id,field:"coupon_discount"}},{default:s(()=>[e("div",null,h(o.coupon_discount||"0")+"折",1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])):m("",!0)]),_:1}),t(f,{label:"订单金额限制",prop:"min_order_amount",sortable:"custom"},{default:s(({row:o})=>[o.reduce_type==1?(c(),x(n(V),{key:0,label:"订单金额限制",type:"input",requestApi:n(b),"org-value":o.min_order_amount,"onUpdate:orgValue":r=>o.min_order_amount=r,params:{id:o.coupon_id,field:"min_order_amount"}},{default:s(()=>[e("div",null,h(o.min_order_amount||"0"),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])):(c(),u("div",ze,"无门槛券"))]),_:1}),t(f,{label:"首页显示",prop:"is_show",sortable:"custom"},{default:s(({row:o})=>[t(n(H),{checked:o.is_show,"onUpdate:checked":r=>o.is_show=r,requestApi:n(b),params:{id:o.coupon_id,field:"is_show"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),t(f,{label:"操作",fixed:"right"},{default:s(({row:o})=>[t(n(k),{isDrawer:"",onOkCallback:d,title:"编辑优惠券",width:"800px",path:"promotion/coupon/Info",params:{act:"detail",id:o.coupon_id}},{default:s(()=>[De]),_:2},1032,["params"]),t(L,{direction:"vertical"}),t(n(M),{onAfterDelete:d,requestApi:n(R),params:{id:o.coupon_id}},{default:s(()=>[i("删除")]),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),w.value>0?(c(),u("div",Oe,[t(n(T),{page:l.page,"onUpdate:page":a[3]||(a[3]=o=>l.page=o),size:l.size,"onUpdate:size":a[4]||(a[4]=o=>l.size=o),total:w.value,onCallback:d},null,8,["page","size","total"])])):m("",!0)])])])])}}});export{no as default};
