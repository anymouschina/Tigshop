/* empty css             */import{A as V,d as B,j as g,s as k,x as C,r as m,o as I,c as F,e as n,b as e,w as l,K as c,H as r,p as G,i as E,_ as L}from"./index-7c2d2aef.js";const N=d=>V({url:"setting/config/get_base",method:"get",params:d}),P=d=>V({url:"setting/config/save_mail",method:"post",data:d}),R=d=>V({url:"setting/config/send_test_email",method:"post",data:d}),f=d=>(G("data-v-bf0602e9"),d=d(),E(),d),j={class:"container"},Q={class:"content_wrapper"},W={class:"lyecs-form-table"},q=f(()=>n("div",{class:"notice-warp"},[n("p",null," 提示：推荐使用QQ的域名邮箱（免费），设置流程请看Tigshop教程，另外请确保服务器防火墙未拦截邮箱发送，且对应的端口开放。")],-1)),z=f(()=>n("div",{class:"extra"},"如果您选择了采用服务器内置的 Mail 服务，您不需要填写下面的内容。",-1)),A=f(()=>n("div",{class:"extra"},"SMTP一般要求加密",-1)),H=f(()=>n("div",{class:"extra"},"邮件服务器主机地址。如果本机可以发送邮件则设置为localhost",-1)),K=f(()=>n("div",{class:"extra"},"发送邮件所需的认证帐号，如果没有就为空着",-1)),O={class:"selected-action-warp"},D={class:"selected-action",style:{"padding-left":"80px"}},J=B({__name:"Mail",emits:["submitCallback","update:confirmLoading","close"],setup(d,{expose:h,emit:X}){const _=g(!1),b=g(!0),w=k(),t=g({}),S=async()=>{try{const o=await N({code:"mail_server"});Object.assign(t.value,o.item)}catch(o){c.error(o.message)}finally{b.value=!1}};C(()=>{S()});const U=async()=>{_.value=!0;try{const o=await R({code:"mail_server",test_mail_address:t.value.test_mail_address});c.success(o.message)}catch(o){c.error(o.message)}finally{_.value=!1}},y=async()=>{_.value=!0;try{const o=await P({code:"mail_server",...t.value});c.success(o.message)}catch(o){c.error(o.message)}finally{_.value=!1}};return h({onFormSubmit:()=>{y()}}),(o,a)=>{const i=m("el-radio"),v=m("el-radio-group"),u=m("el-form-item"),p=m("el-input"),x=m("el-button"),M=m("el-form"),T=m("a-spin");return I(),F("div",j,[n("div",Q,[n("div",W,[q,e(T,{spinning:b.value,style:{width:"100%","margin-top":"100px"}},{default:l(()=>[e(M,{ref_key:"formRef",ref:w,model:t.value,"label-width":"auto"},{default:l(()=>[e(u,{label:"邮件服务",prop:"mail_service"},{default:l(()=>[e(v,{modelValue:t.value.mail_service,"onUpdate:modelValue":a[0]||(a[0]=s=>t.value.mail_service=s),class:"itemWidth"},{default:l(()=>[e(i,{value:0},{default:l(()=>[r("本地邮件服务器")]),_:1}),e(i,{value:1},{default:l(()=>[r("SMTP服务")]),_:1})]),_:1},8,["modelValue"]),z]),_:1}),e(u,{label:"是否加密连接(SSL)",prop:"smtp_ssl"},{default:l(()=>[e(v,{modelValue:t.value.smtp_ssl,"onUpdate:modelValue":a[1]||(a[1]=s=>t.value.smtp_ssl=s),class:"itemWidth"},{default:l(()=>[e(i,{value:1},{default:l(()=>[r("是")]),_:1}),e(i,{value:0},{default:l(()=>[r("否")]),_:1})]),_:1},8,["modelValue"]),A]),_:1}),e(u,{label:"发送邮件服务器地址(SMTP)",prop:"smtp_host"},{default:l(()=>[e(p,{modelValue:t.value.smtp_host,"onUpdate:modelValue":a[2]||(a[2]=s=>t.value.smtp_host=s),type:"text"},null,8,["modelValue"]),H]),_:1}),e(u,{label:"服务器端口",prop:"smtp_port"},{default:l(()=>[e(p,{modelValue:t.value.smtp_port,"onUpdate:modelValue":a[3]||(a[3]=s=>t.value.smtp_port=s),type:"text"},null,8,["modelValue"])]),_:1}),e(u,{label:"邮件发送帐号",prop:"smtp_user"},{default:l(()=>[e(p,{modelValue:t.value.smtp_user,"onUpdate:modelValue":a[4]||(a[4]=s=>t.value.smtp_user=s),type:"text"},null,8,["modelValue"]),K]),_:1}),e(u,{label:"帐号密码",prop:"smtp_pass"},{default:l(()=>[e(p,{modelValue:t.value.smtp_pass,"onUpdate:modelValue":a[5]||(a[5]=s=>t.value.smtp_pass=s),type:"password"},null,8,["modelValue"])]),_:1}),e(u,{label:"邮件回复地址",prop:"smtp_mail"},{default:l(()=>[e(p,{modelValue:t.value.smtp_mail,"onUpdate:modelValue":a[6]||(a[6]=s=>t.value.smtp_mail=s),type:"text"},null,8,["modelValue"])]),_:1}),e(u,{label:"邮件编码",prop:"mail_charset"},{default:l(()=>[e(v,{modelValue:t.value.mail_charset,"onUpdate:modelValue":a[7]||(a[7]=s=>t.value.mail_charset=s)},{default:l(()=>[e(i,{label:"UTF8"},{default:l(()=>[r("国际编码(UTF8)")]),_:1}),e(i,{label:"GB2312"},{default:l(()=>[r("简体中文(GB2312)")]),_:1}),e(i,{label:"BIG5"},{default:l(()=>[r("繁体中文(BIG5)")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"测试邮件地址",prop:"test_mail_address"},{default:l(()=>[e(p,{modelValue:t.value.test_mail_address,"onUpdate:modelValue":a[8]||(a[8]=s=>t.value.test_mail_address=s),type:"text"},{append:l(()=>[e(x,{loading:_.value,onClick:U},{default:l(()=>[r("发送测试邮件 ")]),_:1},8,["loading"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),n("div",O,[n("div",D,[e(x,{loading:_.value,class:"form-submit-btn",size:"large",type:"primary",onClick:y},{default:l(()=>[r("提 交")]),_:1},8,["loading"])])])]),_:1},8,["spinning"])])])])}}});const ee=L(J,[["__scopeId","data-v-bf0602e9"]]);export{ee as default};
