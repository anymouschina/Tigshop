import{d as J,K as Q,i as f,G as W,q as X,c as m,e as s,b as t,f as _,w as a,N as Y,g as l,I as x,r,o as c,E as b,D as v,F as A,a as Z,j as ee,_ as te}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{P}from"./PopFormElm-BZp1_Wme.js";import{_ as T}from"./Switch.vue_vue_type_script_setup_true_lang-C5nzofSO.js";import{D as oe}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as se}from"./Pagination-wR9huHyl.js";import{i as S,u as ae}from"./format-CRgx78oe.js";import{_ as V}from"./Image.vue_vue_type_script_setup_true_lang-BWzCs9jv.js";import{g as le,u as y,d as ne,b as ie}from"./comment-BsJ8TlD5.js";import{_ as R}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const de={class:"container"},re={class:"content_wrapper"},ce={key:0,class:"container"},me={class:"lyecs-table-list-warp"},pe={class:"list-table-tool lyecs-search-warp"},ue={class:"advanced-search-warp list-table-tool-row"},_e={class:"simple-form-warp"},fe={class:"simple-form-field"},ve={class:"form-group"},he={class:"control-container"},ge={class:"simple-form-field"},be={class:"form-group"},ke={class:"control-container"},ye={class:"simple-form-field"},we={class:"form-group"},Ce={class:"control-container"},Ie={key:0},xe={class:"table-container"},Se={class:"display-col"},Ve={key:0,class:"image avatar flex"},Ue={class:"text"},qe={class:"display-col"},Ae={class:"image_comment"},Pe={class:"text_comment multiline_hiding"},Te=["href"],Re={class:"text_comment"},Fe={key:0,class:"image"},Oe={key:1},Ne={class:"empty-warp"},ze={key:0,class:"empty-bg"},De={key:0,class:"pagination-con"},Be=J({__name:"List",setup(Le){const F=Q(),U=f(),h=f(!0),k=f(0),g=f([]);f(!1);const i=W({page:1,size:F.get("pageSize"),sortField:"",sortOrder:"",keyword:"",isShowed:-1}),w=f(-1),O=n=>{i.isShowed=n,p()},p=async()=>{h.value=!0;try{const n=await le({...i});U.value=n.records,k.value=n.total}catch(n){x.error(n.message)}finally{h.value=!1}};X(()=>{p()});const C=()=>{p()},N=({prop:n,order:o})=>{i.sortField=n,i.sortOrder=o=="ascending"?"asc":o=="descending"?"desc":"",p()},z=async n=>{try{const o=await ie(n,{ids:g.value});x.success("操作成功"),p()}catch(o){x.error(o.message)}},D=n=>{g.value=n.map(o=>o.commentId)};return(n,o)=>{const q=r("el-tab-pane"),B=r("el-tabs"),I=r("el-button"),L=r("TigInput"),$=r("el-popconfirm"),E=r("el-form"),d=r("el-table-column"),K=r("el-tooltip"),M=r("el-divider"),j=r("el-table"),G=r("a-spin");return c(),m("div",de,[s("div",re,[t(B,{modelValue:w.value,"onUpdate:modelValue":o[0]||(o[0]=e=>w.value=e),class:"lyecs-tabs","tab-position":"top",onTabChange:O},{default:a(()=>[t(q,{name:-1,label:"全部评价"}),t(q,{name:1,label:"有晒单"})]),_:1},8,["modelValue"]),w.value!=null?(c(),m("div",ce,[s("div",me,[s("div",pe,[t(E,{model:i,onSubmit:Y(C,["prevent"])},{default:a(()=>[s("div",ue,[s("div",_e,[s("div",fe,[s("div",ve,[s("div",he,[t(L,{modelValue:i.keyword,"onUpdate:modelValue":o[1]||(o[1]=e=>i.keyword=e),name:"keyword",placeholder:"请输入评价内容",clearable:"",onClear:C},{append:a(()=>[t(I,{onClick:C},{default:a(()=>o[5]||(o[5]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),s("div",ge,[s("div",be,[s("div",ke,[t(l(R),{params:{act:"add"},isDrawer:"",path:"product/comment/Info",title:"添加用户评论",width:"600px",onOkCallback:p},{default:a(()=>[t(I,{type:"primary"},{default:a(()=>o[6]||(o[6]=[b("添加用户评论")])),_:1})]),_:1})])])]),s("div",ye,[s("div",we,[s("div",Ce,[t($,{title:"您确认要批量删除所选数据吗？",onConfirm:o[2]||(o[2]=e=>z("del"))},{reference:a(()=>[t(I,{disabled:g.value.length===0},{default:a(()=>o[7]||(o[7]=[b("批量删除")])),_:1},8,["disabled"])]),_:1}),g.value.length>0?(c(),m("span",Ie,[o[8]||(o[8]=b(" 已选择：")),s("b",null,v(g.value.length),1),o[9]||(o[9]=b(" 项 "))])):_("",!0)])])])])])]),_:1},8,["model"])]),s("div",xe,[t(G,{spinning:h.value},{default:a(()=>[t(j,{data:U.value,loading:h.value,total:k.value,"row-key":"commentId",onSelectionChange:D,onSortChange:N},{empty:a(()=>[s("div",Ne,[h.value?_("",!0):(c(),m("div",ze,"暂无数据"))])]),default:a(()=>[t(d,{type:"selection",width:"32"}),t(d,{width:150,label:"用户名称",prop:"username",sortable:"custom"},{default:a(({row:e})=>[s("div",Se,[e.avatar?(c(),m("div",Ve,[t(l(V),{src:l(S)(e.avatar),class:"image-style",fit:"cover"},null,8,["src"])])):_("",!0),t(K,{class:"box-item",effect:"light",content:e.username,placement:"bottom"},{default:a(()=>[s("div",Ue,v(e.username),1)]),_:2},1032,["content"])])]),_:1}),t(d,{width:260,label:"评论对象"},{default:a(({row:e})=>[s("div",qe,[s("div",Ae,[t(l(V),{src:l(S)(e.picThumb),class:"image-style shopPics",fit:"contain"},null,8,["src"])]),s("div",Pe,[s("a",{href:l(ae)({path:"product",id:e.productId}),target:"_blank"},v(e.productName),9,Te)])])]),_:1}),t(d,{width:260,label:"评价内容",prop:"content"},{default:a(({row:e})=>[s("div",Re,v(e.content),1)]),_:1}),t(d,{width:250,label:"晒单",prop:"showPics"},{default:a(({row:e})=>[e.showPics?(c(),m("div",Fe,[e.showPics.length>1?(c(!0),m(A,{key:0},Z(e.showPics,(u,H)=>(c(),m(A,null,[H<4?(c(),ee(l(V),{key:0,class:"shopPics",src:l(S)(u.picThumb),width:"50",style:{},fit:"contain"},null,8,["src"])):_("",!0)],64))),256)):_("",!0)])):(c(),m("div",Oe,"--"))]),_:1}),t(d,{label:"评论等级",prop:"commentRank",sortable:"custom",width:"100"},{default:a(({row:e})=>[t(l(P),{"org-value":e.commentRank,"onUpdate:orgValue":u=>e.commentRank=u,params:{id:e.commentId,field:"commentRank"},type:"integer",minNum:1,maxNum:5,requestApi:l(y),label:"评论等级"},{default:a(()=>[s("div",null,v(e.commentRank)+"星",1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),t(d,{label:"评论日期",prop:"addTime",sortable:"custom",width:"160"}),t(d,{label:"是否置顶",prop:"isTop",sortable:"custom",width:"100"},{default:a(({row:e})=>[t(l(T),{checked:e.isTop,"onUpdate:checked":u=>e.isTop=u,params:{id:e.commentId,field:"isTop"},requestApi:l(y)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),t(d,{label:"是否推荐",prop:"isRecommend",sortable:"custom",width:"100"},{default:a(({row:e})=>[t(l(T),{checked:e.isRecommend,"onUpdate:checked":u=>e.isRecommend=u,params:{id:e.commentId,field:"isRecommend"},requestApi:l(y)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),t(d,{label:"排序",prop:"sortOrder",sortable:"custom"},{default:a(({row:e})=>[t(l(P),{"org-value":e.sortOrder,"onUpdate:orgValue":u=>e.sortOrder=u,params:{id:e.commentId,field:"sortOrder"},requestApi:l(y),type:"integer",label:"排序"},{default:a(()=>[s("div",null,v(e.sortOrder),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),t(d,{width:"100",fixed:"right",label:"操作"},{default:a(({row:e})=>[t(l(R),{params:{act:"detail",id:e.commentId},isDrawer:"",path:"product/comment/Info",title:"编辑用户评论",width:"700px",onOkCallback:p},{default:a(()=>o[10]||(o[10]=[s("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),t(M,{direction:"vertical"}),t(l(oe),{params:{id:e.commentId},requestApi:l(ne),onAfterDelete:p},{default:a(()=>o[11]||(o[11]=[b("删除")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),k.value>0?(c(),m("div",De,[t(l(se),{page:i.page,"onUpdate:page":o[3]||(o[3]=e=>i.page=e),size:i.size,"onUpdate:size":o[4]||(o[4]=e=>i.size=e),total:k.value,onCallback:p},null,8,["page","size","total"])])):_("",!0)])])])):_("",!0)])])}}}),Ze=te(Be,[["__scopeId","data-v-e1c4ea2e"]]);export{Ze as default};
