import{u as C,c as _}from"./shopProductCategory-B7SX1RoE.js";import{d as P,m as S,u as p,i as l,q as k,I as M,j as L,o as V,g as b,dv as x}from"./index-CGYuOau0.js";const I=P({__name:"SelectShopProductCategory",props:S({multiple:{type:Boolean,default:!1},categoryList:{type:Array,default:()=>[]}},{category_id:{},category_idModifiers:{},category_name:{},category_nameModifiers:{}}),emits:["update:category_id","update:category_name"],setup(c){const o=c,t=p(c,"category_id"),n=p(c,"category_name"),y={label:"category_name",value:"category_id",children:"children",multiple:o.multiple,checkStrictly:!0},s=C(),r=l([]),u=l(!1),g=l(!1);l(!1),k(()=>{o.categoryList.length>1?r.value=o.categoryList:i()});const i=async()=>{if(g.value!==!0){if(u.value=!0,s.shopProductCategoryTree!==null){r.value=s.shopProductCategoryTree;return}try{const e=await _();r.value=e.filter_result,s.shopProductCategoryTree=e.filter_result}catch(e){M.error(e.message)}finally{u.value=!1,g.value=!0}}},d=l(),f=e=>{if(o.multiple==!0)t.value=e==null?void 0:e.map(a=>a[a.length-1]);else{const a=d.value.getCheckedNodes();n.value=a[0]?a[0].text:"",console.log(e?e[e.length-1]:0),t.value=e?e[e.length-1]:0}},m=e=>{e&&i()},v=()=>{o.multiple==!0?t.value=[]:(t.value=0,n.value="")};return(e,a)=>(V(),L(b(x),{ref_key:"cascaderRef",ref:d,modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=h=>t.value=h),options:r.value,props:y,class:"cascader",clearable:"",placeholder:"选择分类",onChange:f,onClear:v,onVisibleChange:m},null,8,["modelValue","options"]))}});export{I as _};
