import{d as j,i as m,C as E,s as F,q as I,I as c,r as u,c as M,o as _,e as x,j as C,f as k,w as l,b as a,a0 as O,E as v,a1 as T}from"./index-CGYuOau0.js";import{c as $,e as z}from"./currencyManagement-Ctv3q6kF.js";const A={class:"container"},G={class:"content_wrapper"},H={class:"lyecs-form-table"},Q=j({__name:"Info",props:{id:{type:Number,default:0},promotion_type:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(N,{expose:S,emit:B}){const i=B,r=N,d=m(!0),b=E().currentRoute.value.query,p=m(r.isDialog?r.act:String(b.act)),y=m(r.isDialog?r.id:Number(b.id)),q=p.value==="add"?"create":"update",g=F(),t=m({name:"",symbol:"",is_default:0,locales_id:""});I(()=>{p.value==="detail"?D():d.value=!1});const D=async()=>{try{const o=await $(p.value,{id:y.value});Object.assign(t.value,o.item)}catch(o){c.error(o.message),i("close")}finally{d.value=!1}},V=async()=>{await g.value.validate();try{i("update:confirmLoading",!0);const o=await z(q,{id:y.value,...t.value});i("submitCallback",o),c.success(o.message)}catch(o){c.error(o.message)}finally{i("update:confirmLoading",!1)}};return S({onFormSubmit:()=>{V()}}),(o,e)=>{const f=u("el-input"),n=u("el-form-item"),w=u("el-radio"),R=u("el-radio-group"),L=u("el-button"),U=u("el-form");return _(),M("div",A,[x("div",G,[x("div",H,[d.value?k("",!0):(_(),C(U,{key:0,ref_key:"formRef",ref:g,model:t.value,"label-width":"auto"},{default:l(()=>[a(n,{prop:"name",label:"货币名称：",rules:[{required:!0,message:"货币名称不能为空!"}]},{default:l(()=>[a(f,{type:"text",maxlength:"60",modelValue:t.value.name,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.name=s)},null,8,["modelValue"])]),_:1}),a(n,{prop:"symbol",label:"币种符号：",rules:[{required:!0,message:"币种符号不能为空!"}]},{default:l(()=>[a(f,{type:"text",maxlength:"60",modelValue:t.value.symbol,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.symbol=s)},null,8,["modelValue"])]),_:1}),t.value.is_default===0?(_(),C(n,{key:0,prop:"rate",label:"汇率："},{default:l(()=>[a(f,{type:"number",maxlength:"60",modelValue:t.value.rate,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.rate=s)},null,8,["modelValue"])]),_:1})):k("",!0),a(n,{prop:"is_default",label:"是否默认："},{default:l(()=>[a(R,{modelValue:t.value.is_default,"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.is_default=s)},{default:l(()=>[a(w,{value:1},{default:l(()=>e[5]||(e[5]=[v("是")])),_:1}),a(w,{value:0},{default:l(()=>e[6]||(e[6]=[v("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),O(a(n,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[a(L,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[4]||(e[4]=s=>V())},{default:l(()=>e[7]||(e[7]=[v("提交")])),_:1},512)]),_:1},512),[[T,!r.isDialog]])]),_:1},8,["model"]))])])])}}});export{Q as default};
