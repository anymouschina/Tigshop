import{d as A,i as p,C as R,s as I,q as L,I as v,r as u,c as U,o as C,e as D,j,f as E,w as t,b as a,a3 as F,E as i,a4 as M}from"./index-DrbzVNl6.js";import{a as O,c as $}from"./areaCode-IouW_QX0.js";const z={class:"container"},G={class:"content_wrapper"},H={class:"lyecs-form-table"},Q=A({__name:"Info",props:{id:{type:Number,default:0},promotionType:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(k,{expose:x,emit:N}){const d=N,n=k,f=p(!0),_=R().currentRoute.value.query,c=p(n.isDialog?n.act:String(_.act)),b=p(n.isDialog?n.id:Number(_.id)),S=c.value==="add"?"create":"update",g=I(),o=p({name:"",code:"",isDefault:0,isAvailable:1});L(()=>{c.value==="detail"?B():f.value=!1});const B=async()=>{try{const l=await O(c.value,{id:b.value});Object.assign(o.value,l)}catch(l){v.error(l.message),d("close")}finally{f.value=!1}},y=async()=>{await g.value.validate();try{d("update:confirmLoading",!0);const l=await $(S,{id:b.value,...o.value});d("submitCallback",l),v.success("操作成功")}catch(l){v.error(l.message)}finally{d("update:confirmLoading",!1)}};return x({onFormSubmit:()=>{y()}}),(l,e)=>{const V=u("TigInput"),r=u("el-form-item"),m=u("el-radio"),w=u("el-radio-group"),T=u("el-button"),q=u("el-form");return C(),U("div",z,[D("div",G,[D("div",H,[f.value?E("",!0):(C(),j(q,{key:0,ref_key:"formRef",ref:g,model:o.value,"label-width":"auto"},{default:t(()=>[a(r,{prop:"name",label:"区号地区：",rules:[{required:!0,message:"区号地区不能为空!"}]},{default:t(()=>[a(V,{classType:"tig-form-input",type:"text",maxlength:60,modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value.name=s)},null,8,["modelValue"])]),_:1}),a(r,{prop:"code",label:"区号：",rules:[{required:!0,message:"区号不能为空!"}]},{default:t(()=>[a(V,{classType:"tig-form-input",type:"integer",maxlength:60,modelValue:o.value.code,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.code=s)},null,8,["modelValue"])]),_:1}),a(r,{prop:"isDefault",label:"是否默认："},{default:t(()=>[a(w,{modelValue:o.value.isDefault,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.isDefault=s)},{default:t(()=>[a(m,{value:1},{default:t(()=>e[5]||(e[5]=[i("是")])),_:1}),a(m,{value:0},{default:t(()=>e[6]||(e[6]=[i("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(r,{prop:"isDefault",label:"是否启用："},{default:t(()=>[a(w,{modelValue:o.value.isAvailable,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.isAvailable=s)},{default:t(()=>[a(m,{value:1},{default:t(()=>e[7]||(e[7]=[i("是")])),_:1}),a(m,{value:0},{default:t(()=>e[8]||(e[8]=[i("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),F(a(r,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[a(T,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[4]||(e[4]=s=>y())},{default:t(()=>e[9]||(e[9]=[i("提交")])),_:1},512)]),_:1},512),[[M,!n.isDialog]])]),_:1},8,["model"]))])])])}}});export{Q as default};
