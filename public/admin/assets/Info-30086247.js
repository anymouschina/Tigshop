import{d as L,j as m,E as j,s as $,x as G,K as U,r as d,o as _,c as H,e as f,b as e,w as a,k as V,f as y,H as i,$ as I,a0 as M,h as O}from"./index-7c2d2aef.js";import{F as P}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-9b6073fb.js";import{a as T,c as z}from"./article-8e3ede66.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import"./config-9548fa9b.js";import{S as J}from"./SelectProduct-5f7c1e31.js";/* empty css                                                                    */import{S as Q}from"./SelectArticleCategory-74d7e522.js";import"./region-e0d291a6.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import{_ as W}from"./Editor.vue_vue_type_script_setup_true_lang-4519c339.js";import{B as X}from"./BusinessData-197b7ba6.js";import"./vuedraggable.umd-75ad0f8f.js";import"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import"./format-4e0206d3.js";import"./util-1ee03ed8.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./time-290942a2.js";import"./config-e2aa16d1.js";import"./product-689c7c1e.js";import"./Pagination-8eb7b6b1.js";import"./SelectSku-94aa3072.js";/* empty css                                                                  */import"./articleCategory-7e779613.js";/* empty css                                                                              */import"./region-05802f67.js";import"./index.esm-0534e563.js";import"./currencyManagement-2d40fd5e.js";import"./version-f7bce787.js";const Y={class:"container"},Z={class:"content_wrapper"},ee={class:"lyecs-form-table"},le=f("div",{class:"extra"},"编号用于前台调用某些指定的文章",-1),te=f("div",{class:"extra"},"请统一上传比例为1:2的图片，宽100px，高200px（高清）",-1),ae=f("div",{class:"extra"},"最多添加10个商品，添加的商品会在结算后自动加入订单（不会计价格）",-1),Le=L({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(h,{expose:D,emit:N}){const c=N,p=h,x=m(1),v=m(!0),S=j().currentRoute.value.query,g=m(p.isDialog?p.act:String(S.act)),w=m(p.isDialog?p.id:Number(S.id)),A=g.value==="add"?"create":"update",B=$(),t=m({is_show:1,is_hot:0,is_top:0,article_type:1,article_category_id:[],product_ids:[]}),K=(u,l,r)=>{if(l.length>10){r(new Error("最多添加10个商品"));return}r()};G(()=>{g.value==="detail"?R():v.value=!1});const R=async()=>{try{v.value=!0;const u=await T(g.value,{id:w.value});Object.assign(t.value,u.item)}catch(u){U.error(u.message),c("close")}finally{v.value=!1}},C=async()=>{await B.value.validate();try{c("update:confirmLoading",!0);const u=await z(A,{id:w.value,...t.value});c("submitCallback",u),U.success(u.message)}catch(u){U.error(u.message)}finally{c("update:confirmLoading",!1)}};return D({onFormSubmit:()=>{C()}}),(u,l)=>{const r=d("el-form-item"),n=d("el-input"),s=d("el-radio"),b=d("el-radio-group"),q=d("el-button"),k=d("el-tab-pane"),F=d("el-tabs"),E=d("el-form");return _(),H("div",Y,[f("div",Z,[f("div",ee,[e(E,{ref_key:"formRef",ref:B,model:t.value,"label-width":"auto"},{default:a(()=>[e(F,{activeKey:x.value,"onUpdate:activeKey":l[15]||(l[15]=o=>x.value=o),class:"lyecs-tabs","tab-position":"top"},{default:a(()=>[(_(),V(k,{key:1,label:"基本信息"},{default:a(()=>[e(r,{rules:[{required:!0,message:"文章标题不能为空!"}],extra:"sfs",label:"文章标题",prop:"article_title"},{default:a(()=>[e(X,{modelValue:t.value.article_title,"onUpdate:modelValue":l[0]||(l[0]=o=>t.value.article_title=o),placeholder:"请输入文章标题",data_type:6,data_id:w.value},null,8,["modelValue","data_id"])]),_:1}),e(r,{label:"文章编号",prop:"article_sn"},{default:a(()=>[e(n,{modelValue:t.value.article_sn,"onUpdate:modelValue":l[1]||(l[1]=o=>t.value.article_sn=o)},null,8,["modelValue"]),le]),_:1}),e(r,{label:"文章分类",prop:"article_category_id"},{default:a(()=>[e(y(Q),{modelValue:t.value.article_category_id,"onUpdate:modelValue":l[2]||(l[2]=o=>t.value.article_category_id=o),"min-width":"100%"},null,8,["modelValue"])]),_:1}),e(r,{label:"缩略图",prop:"article_thumb"},{default:a(()=>[e(y(P),{photo:t.value.article_thumb,"onUpdate:photo":l[3]||(l[3]=o=>t.value.article_thumb=o)},null,8,["photo"]),te]),_:1}),e(r,{label:"文章作者",prop:"article_author"},{default:a(()=>[e(n,{modelValue:t.value.article_author,"onUpdate:modelValue":l[4]||(l[4]=o=>t.value.article_author=o)},null,8,["modelValue"])]),_:1}),e(r,{label:"关键字",prop:"keywords"},{default:a(()=>[e(n,{modelValue:t.value.keywords,"onUpdate:modelValue":l[5]||(l[5]=o=>t.value.keywords=o)},null,8,["modelValue"])]),_:1}),e(r,{label:"标签",prop:"article_tag"},{default:a(()=>[e(n,{modelValue:t.value.article_tag,"onUpdate:modelValue":l[6]||(l[6]=o=>t.value.article_tag=o)},null,8,["modelValue"])]),_:1}),e(r,{label:"描述",prop:"description"},{default:a(()=>[e(n,{modelValue:t.value.description,"onUpdate:modelValue":l[7]||(l[7]=o=>t.value.description=o),row:"2",type:"textarea"},null,8,["modelValue"])]),_:1}),e(r,{label:"相关链接",prop:"link"},{default:a(()=>[e(n,{modelValue:t.value.link,"onUpdate:modelValue":l[8]||(l[8]=o=>t.value.link=o)},null,8,["modelValue"])]),_:1}),e(r,{label:"文章类型",prop:"article_type"},{default:a(()=>[e(b,{modelValue:t.value.article_type,"onUpdate:modelValue":l[9]||(l[9]=o=>t.value.article_type=o)},{default:a(()=>[e(s,{value:1},{default:a(()=>[i("普通文章")]),_:1}),e(s,{value:2},{default:a(()=>[i("帮助文章")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"是否置顶",prop:"is_top"},{default:a(()=>[e(b,{modelValue:t.value.is_top,"onUpdate:modelValue":l[10]||(l[10]=o=>t.value.is_top=o)},{default:a(()=>[e(s,{value:1},{default:a(()=>[i("是")]),_:1}),e(s,{value:0},{default:a(()=>[i("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"是否热门",prop:"is_hot"},{default:a(()=>[e(b,{modelValue:t.value.is_hot,"onUpdate:modelValue":l[11]||(l[11]=o=>t.value.is_hot=o)},{default:a(()=>[e(s,{value:1},{default:a(()=>[i("是")]),_:1}),e(s,{value:0},{default:a(()=>[i("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"是否显示",prop:"is_show"},{default:a(()=>[e(b,{modelValue:t.value.is_show,"onUpdate:modelValue":l[12]||(l[12]=o=>t.value.is_show=o)},{default:a(()=>[e(s,{value:1},{default:a(()=>[i("是")]),_:1}),e(s,{value:0},{default:a(()=>[i("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),I(e(r,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[e(q,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:C},{default:a(()=>[i("提交 ")]),_:1},512)]),_:1},512),[[M,!p.isDialog]])]),_:1})),(_(),V(k,{key:2,label:"文章内容"},{default:a(()=>[e(y(W),{html:t.value.content,"onUpdate:html":l[13]||(l[13]=o=>t.value.content=o)},null,8,["html"])]),_:1})),(_(),V(k,{key:3,label:"关联商品"},{default:a(()=>[e(r,{label:"",prop:"product_ids",rules:[{required:!0,validator:K}]},{default:a(()=>[v.value?O("",!0):(_(),V(y(J),{key:0,ids:t.value.product_ids,"onUpdate:ids":l[14]||(l[14]=o=>t.value.product_ids=o),max:10},null,8,["ids"])),ae]),_:1},8,["rules"])]),_:1}))]),_:1},8,["activeKey"])]),_:1},8,["model"])])])])}}});export{Le as default};
