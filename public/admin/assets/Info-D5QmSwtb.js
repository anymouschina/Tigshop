import{d as M,i as m,C as O,s as P,G as S,q as A,I as _,r as s,c as k,o as v,e as g,j as q,f as H,w as o,b as l,a0 as J,g as K,F as Q,a as W,E as p,a1 as X}from"./index-CGYuOau0.js";import{a as Y,c as Z}from"./languagesList-4F0M2hMq.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              *//* empty css             */import{_ as h}from"./SelectLocaleCode.vue_vue_type_script_setup_true_lang-DKEIzIR-.js";import{a as ee}from"./currencyManagement-Ctv3q6kF.js";import"./time-ClyPenjC.js";import"./verbalAssociation-DIcWwhGG.js";const le={class:"container"},ae={class:"content_wrapper"},te={class:"lyecs-form-table"},ge=M({__name:"Info",props:{id:{type:Number,default:0},promotion_type:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(N,{expose:B,emit:U}){const f=U,n=N,i=m(!0),y=O().currentRoute.value.query,b=m(n.isDialog?n.act:String(y.act)),V=m(n.isDialog?n.id:Number(y.id)),D=b.value==="add"?"create":"update",w=P(),a=m({language:"",locale_code:"",is_enabled:0,currency_id:0,is_default:0,sort:50}),R=S({page:1,size:-1,sort_field:"",sort_order:"",name:""}),x=m(),E=async()=>{i.value=!0;try{const r=await ee({...R});x.value=r.filter_result}catch(r){_.error(r.message)}finally{i.value=!1}};A(()=>{E(),b.value==="detail"?F():i.value=!1});const F=async()=>{try{const r=await Y(b.value,{id:V.value});Object.assign(a.value,r.item)}catch(r){_.error(r.message),f("close")}finally{i.value=!1}},C=async()=>{await w.value.validate();try{f("update:confirmLoading",!0);const r=await Z(D,{id:V.value,...a.value});f("submitCallback",r),_.success(r.message)}catch(r){_.error(r.message)}finally{f("update:confirmLoading",!1)}},T=()=>{C()},j=S({promotion_name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],send_type:[{required:!0,validator:(r,e,d)=>{if(!a.value.language&&!a.value.language){d(new Error("请输入用券时间"));return}d()},trigger:"blur"}]});return B({onFormSubmit:T}),(r,e)=>{const d=s("el-input"),u=s("el-form-item"),z=s("el-option"),I=s("el-select"),c=s("el-radio"),L=s("el-radio-group"),$=s("el-button"),G=s("el-form");return v(),k("div",le,[g("div",ae,[g("div",te,[i.value?H("",!0):(v(),q(G,{key:0,ref_key:"formRef",ref:w,rules:j,model:a.value,"label-width":"auto"},{default:o(()=>[l(u,{prop:"language",label:"语言名称：",rules:[{required:!0,message:"语言名称不能为空!"}]},{default:o(()=>[l(d,{type:"text",maxlength:"60",modelValue:a.value.language,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.language=t)},null,8,["modelValue"])]),_:1}),l(u,{prop:"locale_code",label:"语言识别码：",rules:[{required:!0,message:"请选择语言识别码!"}]},{default:o(()=>[l(K(h),{modelValue:a.value.locale_code,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.locale_code=t)},null,8,["modelValue"]),e[7]||(e[7]=g("div",{class:"extra"},"请选择关联语言，语言类型是由您自行添加的",-1))]),_:1}),l(u,{prop:"currency_id",label:"关联货币："},{default:o(()=>[l(I,{modelValue:a.value.currency_id,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.currency_id=t),placeholder:"请选择关联货币",size:"default"},{default:o(()=>[(v(!0),k(Q,null,W(x.value,t=>(v(),q(z,{key:t.id,label:t.name+" - "+t.symbol,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[8]||(e[8]=g("div",{class:"extra"},"请选择关联语言，语言类型是由您自行添加的",-1))]),_:1}),l(u,{prop:"is_enabled",label:"是否启用："},{default:o(()=>[l(L,{modelValue:a.value.is_enabled,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.is_enabled=t)},{default:o(()=>[l(c,{value:1},{default:o(()=>e[9]||(e[9]=[p("是")])),_:1}),l(c,{value:0},{default:o(()=>e[10]||(e[10]=[p("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{prop:"is_default",label:"是否默认："},{default:o(()=>[l(L,{modelValue:a.value.is_default,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.is_default=t)},{default:o(()=>[l(c,{value:1},{default:o(()=>e[11]||(e[11]=[p("是")])),_:1}),l(c,{value:0},{default:o(()=>e[12]||(e[12]=[p("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(u,{prop:"sort",label:"排序："},{default:o(()=>[l(d,{type:"number",maxlength:"60",modelValue:a.value.sort,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.sort=t)},null,8,["modelValue"])]),_:1}),J(l(u,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[l($,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[6]||(e[6]=t=>C())},{default:o(()=>e[13]||(e[13]=[p("提交")])),_:1},512)]),_:1},512),[[X,!n.isDialog]])]),_:1},8,["rules","model"]))])])])}}});export{ge as default};
