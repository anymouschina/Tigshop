import{e as T}from"./util-1ee03ed8.js";import{r as q,i as D}from"./format-4e0206d3.js";import{S as O}from"./StatusDot-19af4eec.js";import{A as $,d as I,m as z,u as V,a9 as B,o as l,c as v,e,n as j,_ as F,dk as G,j as u,I as H,x as J,r as d,b as c,w as g,H as K,F as P,a as Q,f as b,k as S,G as w,K as W,p as X,i as Y}from"./index-7c2d2aef.js";import"./config-9548fa9b.js";import"./config-e2aa16d1.js";const Z=n=>$({prefix:"/im",url:"servant/servant/transfer_list",method:"get",params:n}),ee=I({__name:"CheckIcon",props:{selected:{},selectedModifiers:{}},emits:z(["update:selected","selected-change"],["update:selected"]),setup(n,{emit:p}){const _=V(n,"selected"),m=p,t=()=>{m("selected-change",!_.value)},r=B(()=>_.value);return(k,i)=>(l(),v("div",{onClick:t,class:"box-warp"},[e("div",{class:j(["check-icon iconfont icon-dagou",{selected:r.value}])},null,2)]))}});const se=F(ee,[["__scopeId","data-v-f39fe1dc"]]),te=n=>(X("data-v-2be70010"),n=n(),Y(),n),ae={class:"container"},oe={class:"lyecs-table-list-warp",style:{"margin-bottom":"0"}},ne={class:"list-table-tool lyecs-search-warp"},ce={class:"advanced-search-warp list-table-tool-row",style:{"margin-bottom":"-20px"}},le={class:"simple-form-warp"},re={class:"simple-form-field"},ie={class:"form-group"},de=te(()=>e("label",{class:"control-label"},[e("span",null,"搜索客服：")],-1)),_e={class:"control-container"},ue={class:"simple-form-field"},ve={class:"table-container"},pe={class:"table-list"},me=["onClick"],fe={class:"zent-badge"},he={class:"servant-select-dialog-m_item-content_3qFlV"},ge={class:"servant-select-dialog-m_item-name_1Cf5B"},be={class:"servant-select-dialog-m_item-count_2JOT0"},ke={class:"zenticon-check-circle"},xe=I({__name:"ReconnectionList",props:z({conversation_id:{type:Number,default:0}},{servant_id:{},servant_idModifiers:{}}),emits:["update:servant_id"],setup(n,{expose:p}){const _=B(()=>G().userInfo),m=V(n,"servant_id"),t=u([]),r=u(!0),k=u(0),i=H({page:1,size:9999,username:""}),f=async()=>{r.value=!0;try{const s=await Z({...i});t.value=s.filter_result,t.value.forEach(o=>{o.selected=!1}),k.value=s.total,L()}catch(s){W.error(s.message)}finally{r.value=!1}};function L(){const s=t.value.find(o=>o.user.admin_id===_.value.admin_id);if(s){const o=t.value.indexOf(s);t.value.splice(o,1),t.value.unshift(s)}return t.value}J(()=>{f()});const M=()=>{f()},N=u(0),U=s=>{if(s!=0){let o=t.value[s].selected;t.value.forEach((h,x)=>{h.selected=!1}),N.value=s,t.value[s].selected=!o,m.value=t.value[s].servant_id}};return p({loadFilter:f}),(s,o)=>{const h=d("el-input"),x=d("el-button"),A=d("el-form"),y=d("el-avatar"),E=d("a-spin");return l(),v("div",ae,[e("div",oe,[e("div",ne,[c(A,{model:i},{default:g(()=>[e("div",ce,[e("div",le,[e("div",re,[e("div",ie,[de,e("div",_e,[c(h,{modelValue:i.username,"onUpdate:modelValue":o[0]||(o[0]=a=>i.username=a)},null,8,["modelValue"])])])]),e("div",ue,[c(x,{type:"primary",onClick:M},{default:g(()=>[K("搜索")]),_:1})])])])]),_:1},8,["model"])]),e("div",ve,[c(E,{spinning:r.value},{default:g(()=>[e("div",pe,[(l(!0),v(P,null,Q(t.value,(a,R)=>(l(),v("div",{onClick:C=>U(R),class:"table-item"},[e("div",fe,[b(T)(String(String(a.user.avatar)))=="def"?(l(),S(y,{key:0,class:"zent-avatar-image",src:b(q)(a.user.avatar)},null,8,["src"])):(l(),S(y,{key:1,class:"zent-avatar-image",src:b(D)(a.user.avatar)},null,8,["src"])),c(O,{flicker:a.status==1,size:10,color:a.status==1?"#3ebd00":a.status==2?"#f44444":"#d0d0d0",class:"dot"},null,8,["flicker","color"])]),e("div",he,[e("div",ge,w(a.user.username),1),e("div",be," 当前接待人数："+w(a.conversation_num),1)]),e("div",ke,[c(se,{selected:a.selected,"onUpdate:selected":C=>a.selected=C},null,8,["selected","onUpdate:selected"])])],8,me))),256))])]),_:1},8,["spinning"])])])])}}});const Ve=F(xe,[["__scopeId","data-v-2be70010"]]);export{Ve as default};
