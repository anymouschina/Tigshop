import{d as M,K as O,i as g,G as K,q as P,c as b,e as t,b as a,w as o,f as h,g as r,I as y,r as d,o as _,M as $,E as f,D as k,j as E}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import"./Verify.vue_vue_type_style_index_0_lang-B5aTvMR3.js";import"./zh-cn-W45FenWv.js";import{T as L}from"./Tag-GwM_ruJO.js";import{_ as j}from"./Switch.vue_vue_type_script_setup_true_lang-C5nzofSO.js";import{D as G}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as R}from"./Pagination-wR9huHyl.js";import{a as H,u as J,d as Q,b as W}from"./currencyManagement-ChS-Zs2m.js";import{_ as D}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const X={class:"container"},Y={class:"content_wrapper"},Z={class:"lyecs-table-list-warp"},ee={class:"list-table-tool lyecs-search-warp"},te={class:"advanced-search-warp list-table-tool-row"},ae={class:"simple-form-warp"},se={class:"simple-form-field"},oe={class:"form-group"},ne={class:"control-container"},le={class:"simple-form-field"},ie={class:"form-group"},re={class:"control-container"},de={class:"simple-form-field"},ce={class:"form-group"},pe={class:"control-container"},me={key:0},ue={class:"table-container"},_e={class:"flex flex-align-center"},fe={class:"empty-warp"},ve={key:0,class:"empty-bg"},ge={key:0,class:"pagination-con"},qe=M({__name:"List",props:{promotionType:{type:Number,default:1}},setup(be,{expose:x}){const S=O(),w=g(),m=g(!0),v=g(0),u=g([]),l=K({page:1,size:S.get("pageSize"),sortField:"",sortOrder:"",name:""}),i=async()=>{m.value=!0;try{const n=await H({...l});w.value=n.records,v.value=n.total}catch(n){y.error(n.message)}finally{m.value=!1}};P(()=>{i()});const C=()=>{i()},z=({prop:n,order:e})=>{l.sortField=n,l.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",i()},V=async(n,e)=>{try{const c=await W(n,{ids:u.value,value:e});y.success("操作成功"),i()}catch(c){y.error(c.message)}},I=n=>{u.value=n.map(e=>e.id)};return x({loadFilter:i}),(n,e)=>{const c=d("el-button"),T=d("TigInput"),q=d("el-popconfirm"),A=d("el-form"),p=d("el-table-column"),B=d("el-divider"),N=d("el-table"),U=d("a-spin");return _(),b("div",X,[t("div",Y,[t("div",Z,[t("div",ee,[a(A,{model:l},{default:o(()=>[t("div",te,[t("div",ae,[t("div",se,[t("div",oe,[t("div",ne,[a(T,{modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]=s=>l.name=s),name:"name",placeholder:"请输入币种",onKeyup:$(C,["enter"])},{append:o(()=>[a(c,{onClick:C},{default:o(()=>e[4]||(e[4]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",le,[t("div",ie,[t("div",re,[a(r(D),{params:{act:"add"},isDrawer:"",path:"setting/multilingual/currencyManagement/Info",title:"添加币种",width:"600px",onOkCallback:i},{default:o(()=>[a(c,{type:"primary"},{default:o(()=>e[5]||(e[5]=[f("添加币种")])),_:1})]),_:1})])])]),t("div",de,[t("div",ce,[t("div",pe,[a(q,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=s=>V("del"))},{reference:o(()=>[a(c,{disabled:u.value.length===0},{default:o(()=>e[6]||(e[6]=[f("批量删除")])),_:1},8,["disabled"])]),_:1}),u.value.length>0?(_(),b("span",me,[e[7]||(e[7]=f(" 已选择：")),t("b",null,k(u.value.length),1),e[8]||(e[8]=f(" 项 "))])):h("",!0)])])])])])]),_:1},8,["model"])]),t("div",ue,[a(U,{spinning:m.value},{default:o(()=>[a(N,{data:w.value,"row-key":"id",onSelectionChange:I,total:v.value,onSortChange:z,loading:m.value},{empty:o(()=>[t("div",fe,[m.value?h("",!0):(_(),b("div",ve,"暂无数据"))])]),default:o(()=>[a(p,{type:"selection",width:"32"}),a(p,{label:"币种名称",prop:"name",width:150},{default:o(({row:s})=>[t("div",_e,[s.isDefault==1?(_(),E(r(L),{key:0,transparent:!0,text:"默认"})):h("",!0),t("div",null,k(s.name||"--"),1)])]),_:1}),a(p,{label:"币种符号",prop:"symbol",width:"200"}),a(p,{label:"汇率",prop:"rate",width:"200"},{default:o(({row:s})=>[t("div",null,k(s.rate||"--"),1)]),_:1}),a(p,{label:"是否默认",prop:"isDefault"},{default:o(({row:s})=>[a(r(j),{checked:s.isDefault,"onUpdate:checked":F=>s.isDefault=F,requestApi:r(J),onCallback:i,params:{id:s.id,field:"isDefault"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),a(p,{label:"操作",fixed:"right",width:"120"},{default:o(({row:s})=>[a(r(D),{isDrawer:"",onOkCallback:i,title:"编辑币种",width:"800px",path:"setting/multilingual/currencyManagement/Info",params:{act:"detail",id:s.id}},{default:o(()=>e[9]||(e[9]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),a(B,{direction:"vertical"}),a(r(G),{onAfterDelete:i,requestApi:r(Q),params:{id:s.id}},{default:o(()=>e[10]||(e[10]=[f("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),v.value>0?(_(),b("div",ge,[a(r(R),{page:l.page,"onUpdate:page":e[2]||(e[2]=s=>l.page=s),size:l.size,"onUpdate:size":e[3]||(e[3]=s=>l.size=s),total:v.value,onCallback:i},null,8,["page","size","total"])])):h("",!0)])])])])}}});export{qe as default};
