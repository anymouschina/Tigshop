import{d as P,K as U,i as f,G as B,q as O,c as v,e as s,b as o,w as a,M as K,g as d,f as w,E as p,D as _,I as T,r as c,o as h}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{P as E}from"./PopFormElm-BZp1_Wme.js";import{D as L}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as M}from"./Pagination-wR9huHyl.js";import{g as $,b as G,u as R,d as j}from"./shippingTpl-CeXwguU5.js";import{_ as C}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const H={class:"container"},J={class:"content_wrapper"},Q={class:"lyecs-table-list-warp"},W={class:"list-table-tool lyecs-search-warp"},X={class:"advanced-search-warp list-table-tool-row"},Y={class:"simple-form-warp"},Z={class:"simple-form-field"},ee={class:"form-group"},te={class:"control-container"},se={class:"simple-form-field"},oe={class:"form-group"},ae={class:"control-container"},ie={class:"simple-form-field"},le={class:"form-group"},ne={class:"control-container"},pe={key:0},re={class:"table-container"},de={class:"empty-warp"},ce={key:0,class:"empty-bg"},ue={key:0,class:"pagination-con"},ke=P({__name:"List",setup(me){const S=U(),k=f([]),u=f(!0),g=f(0),m=f([]),l=B({page:1,size:S.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),n=async()=>{u.value=!0;try{const i=await $({...l});k.value=i.records,g.value=i.total}catch(i){T.error(i.message)}finally{u.value=!1}};O(()=>{n()});const b=()=>{n()},I=({prop:i,order:e})=>{l.sortField=i,l.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",n()},V=async i=>{try{const e=await G(i,{ids:m.value});T.success("操作成功"),n()}catch(e){T.error(e.message)}},x=i=>{m.value=i.map(e=>e.shippingTplId)};return(i,e)=>{const y=c("el-button"),D=c("TigInput"),N=c("el-popconfirm"),r=c("el-table-column"),z=c("el-divider"),F=c("el-table"),q=c("a-spin");return h(),v("div",H,[s("div",J,[s("div",Q,[s("div",W,[s("div",X,[s("div",Y,[s("div",Z,[s("div",ee,[s("div",te,[o(D,{modelValue:l.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>l.keyword=t),name:"keyword",placeholder:"输入模板名称",onKeyup:K(b,["enter"]),clearable:"",onClear:b},{append:a(()=>[o(y,{onClick:b},{default:a(()=>e[4]||(e[4]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),s("div",se,[s("div",oe,[s("div",ae,[o(d(C),{params:{act:"add"},isDrawer:"",path:"setting/shippingTpl/Info",title:"添加运费模板",width:"900px",onOkCallback:n},{default:a(()=>[o(y,{type:"primary"},{default:a(()=>e[5]||(e[5]=[p("添加运费模板")])),_:1})]),_:1})])])]),s("div",ie,[s("div",le,[s("div",ne,[o(N,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=t=>V("del"))},{reference:a(()=>[o(y,{disabled:m.value.length===0},{default:a(()=>e[6]||(e[6]=[p("批量删除")])),_:1},8,["disabled"])]),_:1}),m.value.length>0?(h(),v("span",pe,[e[7]||(e[7]=p(" 已选择：")),s("b",null,_(m.value.length),1),e[8]||(e[8]=p(" 项 "))])):w("",!0)])])])])])]),s("div",re,[o(q,{spinning:u.value},{default:a(()=>[o(F,{data:k.value,loading:u.value,total:g.value,"row-key":"shippingTplId",onSelectionChange:x,onSortChange:I},{empty:a(()=>[s("div",de,[u.value?w("",!0):(h(),v("div",ce,"暂无数据"))])]),default:a(()=>[o(r,{type:"selection",width:"32"}),o(r,{label:"模板名称"},{default:a(({row:t})=>[o(d(E),{"org-value":t.shippingTplName,"onUpdate:orgValue":A=>t.shippingTplName=A,max:10,params:{id:t.shippingTplId,field:"shippingTplName"},requestApi:d(R),label:"模板名称",type:"input"},{default:a(()=>[s("div",null,_(t.shippingTplName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),o(r,{label:"是否包邮",prop:"isFree"},{default:a(({row:t})=>[p(_(t.isFree===0?"自定义运费":"卖家承担运费"),1)]),_:1}),o(r,{label:"计价方式",prop:"isSupportCod"},{default:a(({row:t})=>[p(_(t.pricingType===1?"按件数":"按重量"),1)]),_:1}),o(r,{label:"发货时间",prop:"shippingTime",sortable:"custom"}),o(r,{label:"是否默认",prop:"isSupportCod"},{default:a(({row:t})=>[p(_(t.isDefault===1?"是":"--"),1)]),_:1}),o(r,{width:150,fixed:"right",label:"操作"},{default:a(({row:t})=>[o(d(C),{params:{act:"detail",id:t.shippingTplId},isDrawer:"",path:"setting/shippingTpl/Info",title:"编辑运费模板",width:"900px",onOkCallback:n},{default:a(()=>e[9]||(e[9]=[s("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(z,{direction:"vertical"}),o(d(L),{params:{id:t.shippingTplId},requestApi:d(j),onAfterDelete:n},{default:a(()=>e[10]||(e[10]=[p("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),g.value>0?(h(),v("div",ue,[o(d(M),{page:l.page,"onUpdate:page":e[2]||(e[2]=t=>l.page=t),size:l.size,"onUpdate:size":e[3]||(e[3]=t=>l.size=t),total:g.value,onCallback:n},null,8,["page","size","total"])])):w("",!0)])])])])}}});export{ke as default};
