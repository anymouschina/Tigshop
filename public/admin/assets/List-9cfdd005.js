/* empty css             */import"./index-6c62cf9b.js";import{P as U}from"./PopFormElm-61cd9b7d.js";import{_ as E}from"./Switch.vue_vue_type_script_setup_true_lang-95245cd7.js";import{_ as G}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as H}from"./Pagination-8eb7b6b1.js";import{u as K}from"./config-9548fa9b.js";import{a as M,u as x,d as J,b as Q}from"./region-05802f67.js";import{d as W,de as X,j as d,I as Y,x as Z,r as c,o as v,c as y,e as s,b as a,w as o,f as l,h as C,K as A,k as ee,H as u,G as S}from"./index-7c2d2aef.js";import{_ as V}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const te={class:"container"},ae={class:"content_wrapper"},oe={class:"lyecs-table-list-warp"},se={class:"list-table-tool lyecs-search-warp"},ne={class:"list-table-tool-row"},ie={class:"list-table-tool-col"},le=s("i",{class:"iconfont icon-fanhui",style:{"font-size":"14px","padding-right":"5px"}},null,-1),re={key:1},de={class:"table-container"},ce={style:{position:"relative"}},_e=["onClick"],pe=s("a",{class:"btn-link"},"添加子地区",-1),ue={class:"empty-warp"},me={key:0,class:"empty-bg"},ge={key:0,class:"pagination-con"},Ue=W({__name:"List",setup(fe){X();const P=K(),w=d([]),m=d(!0),h=d(0),g=d([]);d(!1);const n=Y({page:1,size:P.get("page_size"),sort_field:"",sort_order:"",keyword:"",parent_id:0}),b=d([]),k=d([]),$=()=>{r()},r=async i=>{m.value=!0;try{i&&typeof i=="number"&&(n.parent_id=i);const t=await M({...n});w.value=t.filter_result,h.value=t.total}catch(t){A.error(t.message)}finally{m.value=!1}};Z(()=>{r()});const q=d(""),B=(i,t,p)=>{b.value.push(i),k.value.push(p),n.parent_id=t,q.value=p,r()},D=()=>{n.parent_id=b.value[b.value.length-1],q.value=k.value[k.value.length-1],b.value.pop(),k.value.pop(),r()},I=({prop:i,order:t})=>{n.sort_field=i,n.sort_order=t=="ascending"?"asc":t=="descending"?"desc":"",r()},N=async i=>{try{const t=await Q(i,{ids:g.value});A.success(t.message),r()}catch(t){A.error(t.message)}},F=i=>{g.value=i.map(t=>t.region_id)};return(i,t)=>{const p=c("el-button"),R=c("el-popconfirm"),L=c("el-space"),O=c("el-form"),f=c("el-table-column"),z=c("el-divider"),T=c("el-table"),j=c("a-spin");return v(),y("div",te,[s("div",ae,[s("div",oe,[s("div",se,[a(O,{model:n},{default:o(()=>[s("div",ne,[s("div",ie,[a(L,null,{default:o(()=>[n.parent_id>0?(v(),ee(p,{key:0,onClick:D},{default:o(()=>[le,u(" 返回上一级 ")]),_:1})):C("",!0),a(l(V),{params:{act:"add",region_id:n.parent_id},isDrawer:"",path:"setting/region/Info",title:"添加地区",width:"600px",onOkCallback:r},{default:o(()=>[a(p,{type:"primary"},{default:o(()=>[u("添加地区")]),_:1})]),_:1},8,["params"]),a(R,{title:"您确认要批量删除所选数据吗？",onConfirm:t[0]||(t[0]=e=>N("del"))},{reference:o(()=>[a(p,{disabled:g.value.length===0},{default:o(()=>[u("批量删除")]),_:1},8,["disabled"])]),_:1}),g.value.length>0?(v(),y("span",re,[u(" 已选择："),s("b",null,S(g.value.length),1),u(" 项 ")])):C("",!0)]),_:1})])])]),_:1},8,["model"])]),s("div",de,[a(j,{spinning:m.value},{default:o(()=>[a(T,{data:w.value,loading:m.value,total:h.value,"row-key":"region_id",onSelectionChange:F,onSortChange:I},{empty:o(()=>[s("div",ue,[m.value?C("",!0):(v(),y("div",me,"暂无数据"))])]),default:o(()=>[a(f,{type:"selection",width:"32"}),a(f,{width:200,label:"地区名称",prop:"region_id",sortable:"custom"},{default:o(({row:e})=>[s("div",ce,[a(l(U),{"org-value":e.region_name,"onUpdate:orgValue":_=>e.region_name=_,max:10,params:{id:e.region_id,field:"region_name"},requestApi:l(x),label:"地区名称",type:"textarea"},{default:o(()=>[s("div",null,S(e.region_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])])]),_:1}),a(f,{label:"首字母"},{default:o(({row:e})=>[a(l(U),{"org-value":e.first_word,"onUpdate:orgValue":_=>e.first_word=_,len:1,params:{id:e.region_id,field:"first_word"},requestApi:l(x),label:"首字母",type:"input"},{default:o(()=>[s("div",null,S(e.first_word||"-"),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),a(f,{label:"是否热门"},{default:o(({row:e})=>[a(l(E),{checked:e.is_hot,"onUpdate:checked":_=>e.is_hot=_,params:{id:e.region_id,field:"is_hot"},requestApi:l(x)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),a(f,{width:200,fixed:"right",label:"操作"},{default:o(({row:e})=>[s("a",{class:"btn-link",onClick:_=>B(e.parent_id,e.region_id,e.region_name)},"子地区",8,_e),a(z,{direction:"vertical"}),a(l(V),{params:{act:"add",region_id:e.region_id},isDrawer:"",path:"setting/region/Info",title:"添加子地区",width:"600",onOkCallback:r},{default:o(()=>[pe]),_:2},1032,["params"]),a(z,{direction:"vertical"}),a(l(G),{params:{id:e.region_id},requestApi:l(J),onAfterDelete:_=>r(e.parent_id)},{default:o(()=>[u("删除 ")]),_:2},1032,["params","requestApi","onAfterDelete"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),h.value>0?(v(),y("div",ge,[a(l(H),{page:n.page,"onUpdate:page":t[1]||(t[1]=e=>n.page=e),size:n.size,"onUpdate:size":t[2]||(t[2]=e=>n.size=e),total:h.value,onCallback:$},null,8,["page","size","total"])])):C("",!0)])])])])}}});export{Ue as default};
