/* empty css             */import"./index-B-GURfkM.js";import{_ as ee}from"./ProductBatch.vue_vue_type_script_setup_true_lang-DOjIIlPa.js";import{S as te}from"./SelectBrand-DsStZmqh.js";import{_ as le}from"./SelectCategory.vue_vue_type_script_setup_true_lang-D0pGcDY-.js";import{d as ae,s as oe,G as se,i as d,q as re,c as u,e as c,b as l,w as a,I as b,r as _,o as r,F as h,a as L,j as V,E as x,D as E,g as B,f as v,_ as ie}from"./index-CGYuOau0.js";import{u as ne}from"./config-DNllFJyR.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import{c as de,g as ue,B as pe}from"./product-CxWf3yyB.js";/* empty css                                                                    */import{P as ce}from"./ProductCard-DnyTbnB8.js";/* empty css                                                                  *//* empty css                                                                              */import{a as _e}from"./category-BQcUsnE8.js";import{a as me}from"./brand-BWQ0xslz.js";import{_ as ye}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./category-DpIl2IOo.js";import"./config-DU8_t5BN.js";import"./time-ClyPenjC.js";import"./format-DFT-VJzO.js";const fe={class:"container"},be={class:"content_wrapper"},ve={class:"wrapper_title"},ge={style:{width:"100%"}},ke={class:"list-table-tool-row"},he={class:"list-table-tool-col"},Le={class:"wrapper_table"},Ve={class:"flex"},xe={class:"flex-column-center"},Be={key:0},Ce={key:1},Ue={key:2},Se={key:3},we={key:4},Pe={key:5},Te=ae({__name:"List",setup($e){const O=oe();ne();const z=se({page:1,size:100,sort_field:"",sort_order:"",keyword:""}),y=d({type:[]}),A=d([{lable:"商品上下架状态",key:"product_status",type:"status"},{lable:"商品名称",key:"product_name",type:"input"},{lable:"商品分类",key:"category_id",type:"category"},{lable:"商品品牌",key:"brand_id",type:"brand"},{lable:"商品货号",key:"product_sn",type:"input"},{lable:"条形编码",key:"product_tsn",type:"input"},{lable:"商品售价",key:"product_price",type:"input"},{lable:"市场价",key:"market_price",type:"input"},{lable:"运费模板",key:"shipping_tpl_id",type:"shipping_tpl"},{lable:"是否包邮",key:"free_shipping",type:"select"},{lable:"是否新品",key:"is_new",type:"select"},{lable:"是否精品",key:"is_best",type:"select"},{lable:"是否热销",key:"is_hot",type:"select"},{lable:"排序",key:"sort_order",type:"input"}]),F=d([{label:"上架",value:1},{label:"下架",value:0}]),N=d([{label:"是",value:1},{label:"否",value:0}]),m=d([]),I=d(0),W=d(!0),g=d([]),K=async s=>{try{s&&g.value.push(...s);const e=await ue({ids:g.value.join(","),...z});e.filter_result.map(i=>{i.shipping_tpl_id==0&&(i.shipping_tpl_id="")}),m.value=e.filter_result,console.log(m.value),I.value=e.total}catch(e){b.error(e.message)}finally{W.value=!1}},M=s=>{m.value.map(e=>{Object.assign(e,s)})},q=s=>{m.value=m.value.filter(i=>i.product_id!==s);let e=[];m.value.map(i=>{e.push(i.product_id)}),g.value=e},C=d([]),U=d([]),S=d([]),w=d([]),P=d([]),G=async()=>{try{const s=await de();C.value=s.shipping_tpl_list;const e=await _e();U.value=e.filter_result;const i=await me();S.value=i.firstword_list,w.value=i.brand_list,P.value=i.brand_list}catch(s){b.error(s.message)}finally{W.value=!1}};re(()=>{G()});const J=async()=>{if(m.value.length<1){b.error("未选择商品");return}if(y.value.type.length<1){b.error("未选择修改项");return}let s=Q();if(H(s))try{const e=await pe(JSON.stringify(s));b.success("操作成功"),R()}catch(e){b.error(e.message)}},R=()=>{m.value=[],y.value.type=[],g.value=[]},H=s=>{for(let e of s)if(e.product_name==""||e.product_sn=="")return b.error("商品名称或商品货号不能为空"),!1;return!0},Q=()=>{const s=["product_id"],i=[...y.value.type.map(p=>p.key),...s];return m.value.map(p=>{const f={};return i.forEach(k=>{p[k]!==void 0&&(f[k]=p[k])}),f})};return(s,e)=>{const i=_("el-checkbox"),j=_("el-checkbox-group"),p=_("el-form-item"),f=_("el-button"),k=_("el-space"),T=_("el-table-column"),$=_("el-option"),D=_("el-select"),X=_("el-input"),Y=_("el-table"),Z=_("el-form");return r(),u("div",fe,[c("div",be,[c("div",ve,[l(Z,{ref_key:"formRef",ref:O,model:y.value,"label-width":"auto"},{default:a(()=>[l(p,{label:"选择修改："},{default:a(()=>[l(j,{modelValue:y.value.type,"onUpdate:modelValue":e[0]||(e[0]=t=>y.value.type=t)},{default:a(()=>[(r(!0),u(h,null,L(A.value,t=>(r(),V(i,{value:t,style:{"margin-bottom":"10px"}},{default:a(()=>[x(E(t.lable),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"商品信息："},{default:a(()=>[c("div",ge,[c("div",ke,[c("div",he,[l(k,null,{default:a(()=>[l(B(ye),{params:{selected_ids:g.value,isMultiple:!0},isDrawer:"",path:"product/product/src/SelectProduct",title:"选择商品",width:"600px",onOkCallback:K},{default:a(()=>[l(f,{type:"primary"},{default:a(()=>e[3]||(e[3]=[x("添加商品")])),_:1})]),_:1},8,["params"])]),_:1})]),e[4]||(e[4]=c("div",{class:"list-table-tool-col"},null,-1))]),c("div",Le,[l(ee,{types:y.value.type,productStatusList:F.value,selectList:N.value,onCallback:M,categoryList:U.value,firstWordList:S.value,brandList:w.value,allBrandList:P.value,shippingTplList:C.value},null,8,["types","productStatusList","selectList","categoryList","firstWordList","brandList","allBrandList","shippingTplList"]),l(Y,{data:m.value,border:"",style:{width:"100%"},loading:""},{default:a(()=>[l(T,{label:"商品信息"},{default:a(({row:t})=>[c("div",Ve,[l(B(ce),{pic_thumb:t.pic_thumb,product_id:t.product_id,product_name:t.product_name},null,8,["pic_thumb","product_id","product_name"])])]),_:1}),(r(!0),u(h,null,L(y.value.type,t=>(r(),V(T,{width:"180",align:"center"},{header:a(()=>[c("div",xe,[c("div",null,E(t.lable),1)])]),default:a(({row:n})=>[t.type=="status"?(r(),u("div",Be,[l(D,{modelValue:n[t.key],"onUpdate:modelValue":o=>n[t.key]=o},{default:a(()=>[(r(!0),u(h,null,L(F.value,o=>(r(),V($,{label:o.label,value:o.value},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):v("",!0),t.type=="shipping_tpl"?(r(),u("div",Ce,[l(D,{modelValue:n.shipping_tpl_id,"onUpdate:modelValue":o=>n.shipping_tpl_id=o},{default:a(()=>[(r(!0),u(h,null,L(C.value,o=>(r(),V($,{label:o.shipping_tpl_name,value:o.shipping_tpl_id},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):v("",!0),t.type=="select"?(r(),u("div",Ue,[l(D,{modelValue:n[t.key],"onUpdate:modelValue":o=>n[t.key]=o},{default:a(()=>[(r(!0),u(h,null,L(N.value,o=>(r(),V($,{label:o.label,value:o.value},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):v("",!0),t.type=="input"?(r(),u("div",Se,[l(p,null,{default:a(()=>[l(X,{modelValue:n[t.key],"onUpdate:modelValue":o=>n[t.key]=o,placeholder:t.lable},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024)])):v("",!0),t.key=="category_id"?(r(),u("div",we,[l(p,null,{default:a(()=>[l(B(le),{category_id:n.category_id,"onUpdate:category_id":o=>n.category_id=o,categoryList:U.value},null,8,["category_id","onUpdate:category_id","categoryList"])]),_:2},1024)])):v("",!0),t.key=="brand_id"?(r(),u("div",Pe,[l(p,null,{default:a(()=>[l(B(te),{brand_id:n.brand_id,"onUpdate:brand_id":o=>n.brand_id=o,firstWordList:S.value,brandList:w.value,allBrandList:P.value},null,8,["brand_id","onUpdate:brand_id","firstWordList","brandList","allBrandList"])]),_:2},1024)])):v("",!0)]),_:2},1024))),256)),l(T,{fixed:"right",label:"操作",width:"90",align:"center"},{default:a(({row:t})=>[l(f,{link:"",type:"primary",size:"small",onClick:n=>q(t.product_id)},{default:a(()=>e[5]||(e[5]=[x(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e[6]||(e[6]=c("div",{class:"extra"},"一次最多添加100个商品",-1))])])]),_:1}),l(p,{label:" "},{default:a(()=>[l(f,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[1]||(e[1]=t=>J())},{default:a(()=>e[7]||(e[7]=[x("提交 ")])),_:1},512),l(f,{ref:"submitBtn",class:"form-submit-btn",onClick:e[2]||(e[2]=t=>R())},{default:a(()=>e[8]||(e[8]=[x("重置")])),_:1},512)]),_:1})]),_:1},8,["model"])])])])}}}),Ze=ie(Te,[["__scopeId","data-v-8eb153a7"]]);export{Ze as default};
