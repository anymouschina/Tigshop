import{d as j,r as x,o,c as u,b as l,w as s,e as t,G as r,aM as ee,h as n,_ as G,j as z,E as T,s as te,x as ae,K as v,H as a,F as P,f as c,k as m,a as se,p as le,i as oe}from"./index-7c2d2aef.js";import{a as ie,s as re,o as q,u as ne}from"./order-5e1a3c9e.js";import{M as E}from"./index-6c62cf9b.js";import{O as de}from"./OrderMoney-e2be89c2.js";import{p as I}from"./format-4e0206d3.js";/* empty css                                               */import"./zh-cn-8c8b9709.js";/* empty css                                                                    */import{P as ce}from"./ProductCard-5b1dbc4c.js";import{u as _e}from"./config-9548fa9b.js";import ue from"./OperationLog-7da4fe50.js";import{M as pe}from"./MobileCard-6c6c2c27.js";import{_ as f}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import{S as me}from"./index-44d8e558.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";import"./Pagination-8eb7b6b1.js";import"./index-57209e55.js";const ve={class:"tooltip-con"},fe={class:"tooltip-title"},ye={key:0,class:"iconfont-admin icon-yiwen"},he={style:{"max-width":"300px"}},be=j({__name:"Tooltip",props:{content:{type:String,default:""},ico:{type:Boolean,default:!1},placement:{type:String,default:"top"}},setup(b){const O=b;return($,w)=>{const y=x("el-tooltip");return o(),u("div",ve,[l(y,{effect:"light",placement:O.placement,"show-after":100},{content:s(()=>[t("div",he,r(O.content),1)]),default:s(()=>[t("div",fe,[ee($.$slots,"default",{},void 0,!0),O.ico?(o(),u("i",ye)):n("",!0)])]),_:3},8,["placement"])])}}}),ge=G(be,[["__scopeId","data-v-52ec2082"]]),M=b=>(le("data-v-95370f86"),b=b(),oe(),b),ke={key:0},xe={key:0,class:"container-card"},we={class:"border-bottom"},Ce={key:0,class:"button-card babyBlue pd20"},Oe={key:1},Se=M(()=>t("span",{class:"orange"},"商家备注：",-1)),ze={class:"container-card"},De=M(()=>t("div",{class:"title"},"订单明细",-1)),$e={class:"info-card"},Be={class:"card-title"},Pe={class:"min-title"},Ee={class:"card-li"},Ie={class:"li-info"},Me={class:"card-li"},Ne={class:"li-info"},Re={class:"card-li"},Ve={class:"li-info"},Le={key:0,class:"card-li"},Fe={class:"li-info"},Te={key:1,class:"card-li"},qe={class:"li-info"},je={key:2,class:"card-li"},Ge={class:"li-info"},He={class:"card-li"},Ke={class:"li-info"},Ue={class:"card-li"},We={class:"li-info"},Ae={class:"card-title"},Je={class:"min-title"},Qe={class:"card-li"},Xe={class:"li-info"},Ye={class:"card-li"},Ze={class:"li-info"},et={class:"card-li"},tt={class:"li-info"},at={class:"card-li"},st={class:"li-info"},lt={class:"card-title"},ot=M(()=>t("div",{class:"min-title"},"付款信息",-1)),it={class:"card-li"},rt={class:"li-info"},nt={class:"card-li"},dt={class:"li-info"},ct={class:"container-card"},_t={class:"title"},ut={class:"product-card-tp"},pt={key:0,class:"gift"},mt={class:"total"},vt={class:"gray",style:{"margin-right":"16px"}},ft={class:"title"},yt={key:1,class:"container-card"},ht={class:"title"},bt=j({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isParent:{type:Boolean,default:!1},isDialog:Boolean},emits:["submitCallback","callback","update:confirmLoading","close"],setup(b,{expose:O,emit:$}){_e();const w=$,y=b,g=z(!0),B=T().currentRoute.value.query;console.log(T().currentRoute);const N=z(y.isDialog?y.act:String(B.act)),S=z(y.isDialog?y.id:Number(B.id)),k=z(y.isDialog?y.isParent:!!B.isParent),H=N.value==="add"?"create":"update",K=te(),e=z({balance:0,coupon_amount:0,points_amount:0,product_amount:0,total_product_weight:0,order_id:0,items:[],pay_type:0,available_actions:{},total_amount:0,paid_amount:0,update_order_sn:0,unpaid_amount:0});ae(()=>{g.value=!0,R()});const R=async()=>{try{const i=await ie(N.value,{id:S.value});Object.assign(e.value,i.item)}catch(i){v.error(i.message),w("close")}finally{g.value=!1}},U=()=>{E.confirm({title:"确认拆分订单吗？",onOk:async()=>{try{const i=await re({id:S.value});v.success(i.message),p()}catch(i){v.error(i.message)}finally{g.value=!1}}})},W=()=>{E.confirm({title:"确认删除订单吗？",content:"被删除的订单可以通过筛选查找并恢复",onOk:async()=>{try{const i=await q("del_order",{id:S.value});v.success(i.message),p()}catch(i){v.error(i.message)}finally{g.value=!1}}})},A=()=>{E.confirm({title:"确认订单已收货吗？",onOk:async()=>{try{const i=await q("confirm_receipt",{id:S.value});v.success(i.message),p()}catch(i){v.error(i.message)}finally{g.value=!1}}})},p=(i={})=>{R(),w("callback",i)},J=async()=>{await K.value.validate();try{w("update:confirmLoading",!0);const i=await ne(H,{id:S.value,...e.value});w("submitCallback",i),v.success(i.message)}catch(i){v.error(i.message)}finally{w("update:confirmLoading",!1)}},Q=()=>{J()},V=i=>{window.open(i,"_blank")};return O({onFormSubmit:Q}),(i,C)=>{var F;const L=x("el-divider"),_=x("el-button"),X=x("el-space"),h=x("el-table-column"),Y=x("el-table"),Z=x("a-spin");return o(),u(P,null,[g.value?n("",!0):(o(),u("div",ke,[k.value?n("",!0):(o(),u("div",xe,[t("div",we,[a(" 订单编号："+r(e.value.order_sn)+" ",1),l(L,{direction:"vertical"}),a(" 下单时间："+r(e.value.add_time)+" ",1),e.value.store_title?(o(),u(P,{key:0},[l(L,{direction:"vertical"}),t("span",null,"下单店铺："+r(e.value.store_title),1)],64)):n("",!0)]),l(X,{size:10,class:"button-card"},{default:s(()=>[e.value.available_actions.set_paid?(o(),m(c(f),{key:0,params:{act:"set_paid",id:e.value.order_id},isDrawer:"",path:"order/order/src/Operation",title:"设置为已支付",width:"600px",onOkCallback:p},{default:s(()=>[l(_,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:s(()=>[a(" 设置为已支付 ")]),_:1})]),_:1},8,["params"])):n("",!0),e.value.available_actions.cancel_order?(o(),m(c(f),{key:1,params:{act:"cancel_order",id:e.value.order_id},isDrawer:"",path:"order/order/src/Operation",title:"取消订单",width:"600px",onOkCallback:p},{default:s(()=>[l(_,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:s(()=>[a(" 取消订单 ")]),_:1})]),_:1},8,["params"])):n("",!0),e.value.available_actions.del_order?(o(),m(_,{key:2,bg:"",size:"small",text:"",type:"primary",onClick:W},{default:s(()=>[a(" 删除订单 ")]),_:1})):n("",!0),e.value.available_actions.deliver?(o(),m(c(f),{key:3,params:{act:"detail",id:e.value.order_id},title:"订单发货 "+e.value.order_sn,isDrawer:"",path:"order/order/src/ToShip",width:"900px",onOkCallback:p},{default:s(()=>[l(_,{bg:"",size:"small",text:"",type:"danger"},{default:s(()=>[a(" 去发货 ")]),_:1})]),_:1},8,["params","title"])):n("",!0),e.value.available_actions.confirm_receipt?(o(),m(_,{key:4,bg:"",size:"small",text:"",type:"primary",onClick:A},{default:s(()=>[a(" 确认已收货 ")]),_:1})):n("",!0),e.value.available_actions.split_order?(o(),m(_,{key:5,bg:"",size:"small",text:"",type:"danger",onClick:U},{default:s(()=>[a(" 拆分店铺订单"),l(c(ge),{ico:"",content:"该订单来自多个店铺且还未拆分，在做任何操作前，您需要先拆分该订单"})]),_:1})):n("",!0),l(c(f),{params:{act:"detail",id:e.value.order_id,valueName:"admin_note"},isDrawer:"",path:"order/order/src/EditRemark",title:"编辑备注",width:"600px",onOkCallback:p},{default:s(()=>[l(_,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:s(()=>[a(" 商家备注 ")]),_:1})]),_:1},8,["params"]),l(_,{bg:"",size:"small",text:"",type:"primary",onClick:C[0]||(C[0]=d=>V(`/admin/print/orderPrint?ids=${e.value.order_id}`))},{default:s(()=>[a(" 打印订单 ")]),_:1}),e.value.way_bill?(o(),m(_,{key:6,bg:"",size:"small",text:"",type:"primary",onClick:C[1]||(C[1]=d=>V(`/admin/print/waybill?id=${e.value.order_id}`))},{default:s(()=>[a(" 打印面单 ")]),_:1})):n("",!0)]),_:1}),e.value.step_status?(o(),u("div",Ce,[l(c(me),{current:e.value.step_status.current,size:"small",status:e.value.step_status.status,items:e.value.step_status.steps},null,8,["current","status","items"])])):n("",!0),e.value.admin_note?(o(),u("div",Oe,[Se,a(r(e.value.admin_note)+" ",1),l(c(f),{params:{act:"detail",id:e.value.order_id,valueName:"admin_note"},isDrawer:"",path:"order/order/src/EditRemark",title:"编辑备注",width:"600px",onOkCallback:p},{default:s(()=>[l(_,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:s(()=>[a(" 修改 ")]),_:1})]),_:1},8,["params"])])):n("",!0)])),t("div",ze,[De,t("div",$e,[t("div",Be,[t("div",Pe,[a(" 收货人信息 "),k.value?n("",!0):(o(),m(c(f),{key:0,params:{act:"detail",id:e.value.order_id,form:e.value},isDrawer:"",path:"order/order/src/EditConsignee",title:"编辑收货人信息",width:"600px",onOkCallback:p},{default:s(()=>[l(_,{bg:"",class:"ml10",size:"small",text:"",type:"primary"},{default:s(()=>[a(" 编辑 ")]),_:1})]),_:1},8,["params"]))]),t("ul",null,[t("li",Ee,[a(" 会员名称："),t("span",Ie,r(((F=e.value.user)==null?void 0:F.username)||"--"),1)]),t("li",Me,[a("     收货人："),t("span",Ne,r(e.value.consignee?e.value.consignee:"--"),1)]),t("li",Re,[a(" 联系电话："),t("span",Ve,[l(pe,{mobile:e.value.mobile},null,8,["mobile"])])]),e.value.telephone?(o(),u("li",Le,[a(" 手机："),t("span",Fe,r(e.value.telephone?e.value.telephone:"--"),1)])):n("",!0),e.value.email?(o(),u("li",Te,[a(" 电子邮件："),t("span",qe,r(e.value.email),1)])):n("",!0),e.value.postcode?(o(),u("li",je,[a(" 邮政编码："),t("span",Ge,r(e.value.postcode),1)])):n("",!0),t("li",He,[a(" 收货地址： "),t("span",Ke,r(e.value.user_address?e.value.user_address:"--"),1)]),t("li",Ue,[a(" 订单备注： "),t("span",We,r(e.value.buyer_note?e.value.buyer_note:"--"),1)])])]),t("div",Ae,[t("div",Je,[a(" 配送信息 "),k.value?n("",!0):(o(),m(c(f),{key:0,params:{act:"detail",id:e.value.order_id},isDrawer:"",path:"order/order/src/EditShipping",title:"编辑配送方式",width:"600px",onOkCallback:p},{default:s(()=>[l(_,{disabled:!e.value.available_actions.modify_shipping_info,bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:s(()=>[a(" 编辑 ")]),_:1},8,["disabled"])]),_:1},8,["params"]))]),t("ul",null,[t("li",Qe,[a(" 配送方式："),t("span",Xe,r(e.value.shipping_type_name),1)]),t("li",Ye,[a(" 发货时间："),t("span",Ze,r(e.value.shipping_time?e.value.shipping_time:"--"),1)]),t("li",et,[a(" 物流名称："),t("span",tt,r(e.value.logistics_name?e.value.logistics_name:"--"),1)]),t("li",at,[a(" 发货单号："),t("span",st,r(e.value.tracking_no?e.value.tracking_no:"--"),1)])])]),t("div",lt,[ot,t("ul",null,[t("li",it,[a(" 支付方式："),t("span",rt,r(e.value.pay_type_id===1?"在线支付":e.value.pay_type_id===2?"货到付款":"线下支付"),1)]),t("li",nt,[a(" 付款时间："),t("span",dt,r(e.value.pay_time?e.value.pay_time:"--"),1)])])])])]),t("div",ct,[t("div",_t,[a(" 商品信息 "),k.value?n("",!0):(o(),m(c(f),{key:0,params:{act:"detail",id:e.value.order_id},isDrawer:"",path:"order/order/src/EditProduct",title:"编辑商品信息",width:"1050px",onOkCallback:p},{default:s(()=>[l(_,{disabled:!e.value.available_actions.modify_order,bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:s(()=>[a(" 编辑 ")]),_:1},8,["disabled"])]),_:1},8,["params"]))]),l(Y,{data:e.value.items},{default:s(()=>[l(h,{label:"商品名称",prop:"product_id",width:"220"},{default:s(({row:d})=>[t("div",ut,[d.is_gift?(o(),u("div",pt,"赠")):n("",!0),l(c(ce),{pic_thumb:d.pic_thumb,product_id:d.product_id,product_name:d.product_name,product_type:d.product_type,url:d.url},null,8,["pic_thumb","product_id","product_name","product_type","url"])])]),_:1}),l(h,{label:"属性",prop:"product_attr"},{default:s(({row:d})=>[a(r(d.sku_value),1)]),_:1}),l(h,{label:"附加规格",prop:"extra_sku_data"},{default:s(({row:d})=>[(o(!0),u(P,null,se(d.extra_sku_data,D=>(o(),u("div",{class:"extraskudata",key:D},r(D.attr_name+D.attr_value+c(I)(D.total_attr_price)),1))),128))]),_:1}),l(h,{label:"商品编号",width:"150"},{default:s(({row:d})=>[a(r(d.product_sn),1)]),_:1}),l(h,{label:"价格",prop:"price"},{default:s(({row:d})=>[a(r(c(I)(d.price)),1)]),_:1}),l(h,{label:"数量",prop:"quantity"}),l(h,{label:"库存",prop:"stock"}),l(h,{label:"小计",prop:"subtotal"})]),_:1},8,["data"]),t("div",mt,[t("span",vt,"商品总重量："+r(e.value.total_product_weight)+"kg",1),t("span",null,"合计："+r(c(I)(e.value.product_amount)),1)]),t("div",ft,[a(" 订单金额 "),k.value?n("",!0):(o(),m(c(f),{key:0,params:{act:"detail",id:e.value.order_id},isDrawer:"",path:"order/order/src/EditMoney",title:"编辑金额",width:"600px",onOkCallback:p},{default:s(()=>[l(_,{disabled:!e.value.available_actions.modify_order_money,bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:s(()=>[a(" 编辑 ")]),_:1},8,["disabled"])]),_:1},8,["params"]))]),l(c(de),{modelValue:e.value,"onUpdate:modelValue":C[2]||(C[2]=d=>e.value=d)},null,8,["modelValue"])]),k.value?n("",!0):(o(),u("div",yt,[t("div",ht,[a(" 物流追踪 "),l(_,{bg:"",class:"ml10",size:"small",text:"",type:"primary"},{default:s(()=>[a(" 展开 ")]),_:1})])])),k.value?n("",!0):(o(),m(ue,{key:2,order_id:e.value.order_id},null,8,["order_id"]))])),l(Z,{spinning:g.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])],64)}}});const Lt=G(bt,[["__scopeId","data-v-95370f86"]]);export{Lt as default};
