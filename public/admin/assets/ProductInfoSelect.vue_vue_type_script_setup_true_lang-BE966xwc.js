import"./index-B-GURfkM.js";import{d as g}from"./vuedraggable.umd-_1km55l4.js";import{u as f,i as h}from"./format-DFT-VJzO.js";import{g as v}from"./product-CxWf3yyB.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import{d as b,m as x,i as p,u as M,q as C,c as L,o as S,b as n,g as i,w as c,e as t,I as w}from"./index-CGYuOau0.js";const y={class:"dec-goods-group-item dec-tip dec-goods-group-item-goods"},B={class:"dec-goods-group-item-con"},j={class:"item-goods-con"},E=["href","title"],N=["src"],P=["onClick"],D=b({__name:"ProductInfoSelect",props:x({isMultiple:{type:Boolean,default:!1},maxSelection:{type:Number,default:0}},{productList:{},productListModifiers:{}}),emits:["update:productList"],setup(r){p(null);const a=r,l=p([]),e=M(r,"productList");C(()=>{});const m=async d=>{try{const o=await v({ids:d.join(","),size:100,page:1});console.log(o.filter_result),o.filter_result.forEach(s=>{let u={product_id:s.product_id,product_sn:s.product_sn,product_name:s.product_name,product_desc:s.product_desc,product_price:s.product_price,market_price:s.market_price,pic_thumb:s.pic_thumb}}),e.value.push(...o.filter_result),console.log(e.value)}catch(o){w.error(o.message)}},_=d=>{e.value.splice(d,1),l.value=e.value.filter(o=>o.product_id!==0).map(o=>o.product_id)};return(d,o)=>(S(),L("div",null,[n(i(g),{class:"dec-goods-group-list","item-key":"prodcut_id",list:e.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:o[0]||(o[0]=()=>{}),onEnd:o[1]||(o[1]=()=>{})},{item:c(({element:s,index:u})=>[t("div",y,[t("div",B,[t("div",j,[t("a",{href:i(f)({path:"product",id:s.product_id}),target:"_blank",title:s.product_name},[t("img",{class:"item-goods-img",src:i(h)(s.pic_thumb)},null,8,N)],8,E)]),t("div",{class:"del-item",onClick:F=>_(u)},o[2]||(o[2]=[t("i",{class:"ico-decorate icon-dec-cha"},null,-1)]),8,P)])])]),footer:c(()=>[n(i(k),{isDrawer:"",onOkCallback:m,title:"选择商品",width:"600px",path:"product/product/src/SelectProduct",params:{selected_ids:l.value,isMultiple:a.isMultiple,maxSelection:a.maxSelection}},{default:c(()=>o[3]||(o[3]=[t("div",{class:"dec-goods-group-item dec-goods-group-add dec-tip","data-title":"添加商品"},[t("div",{class:"dec-goods-group-item-con"},[t("div",{class:"item-goods-con"},[t("a",{href:"javascript:;"},[t("i",{class:"ico-decorate icon-dec-jia"})])])])],-1)])),_:1},8,["params"])]),_:1},8,["list"])]))}});export{D as _};
