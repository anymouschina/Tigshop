import{g as w,a as m}from"./time-ClyPenjC.js";import{i as b}from"./format-DFT-VJzO.js";import{m as k,f as x,o as S,d as $,a as C}from"./index-Bm8xE4_u.js";import{g as z}from"./product-CxWf3yyB.js";import{_ as D}from"./View.vue_vue_type_script_setup_true_lang-BDtTiNW5.js";import{d as B,u as F,i as v,Q as L,aa as M,c as a,o as i,e as t,l,D as r,b as V,g as y,F as j,a as E,f as _,_ as K}from"./index-CGYuOau0.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";/* empty css                                                             */import"./lodash-blK8fE0I.js";const N={class:"main"},O={class:"mk-top"},G={class:"countdown"},I={class:"item-box"},J={class:"item"},P={key:0,class:"goods-info"},Q={key:1,class:"price-box",style:"color: rgb(255, 255, 255); font-weight: 700; font-family: inherit"},T={class:"price"},W=B({__name:"View",props:{module:{},moduleModifiers:{}},emits:["update:module"],setup(g){const e=F(g,"module"),f=v({product_source:"products",product_groups:[],product_list:[{product_id:0,product_sn:"",product_name:"零食",product_desc:"",product_price:32,market_price:0,pic_thumb:"https://oss.tigshop.com/img/gallery/202411/17316338156QyBKObq7Wuw7KCqKa.jpg"},{product_id:0,product_sn:"",product_name:"饼干",product_desc:"",product_price:32,market_price:0,pic_thumb:"https://oss.tigshop.com/img/gallery/202411/1731633815i7FmGX6OEWOBsQ3DUh.jpg"},{product_id:0,product_sn:"",product_name:"茶叶",product_desc:"",product_price:32,market_price:0,pic_thumb:"https://oss.tigshop.com/img/gallery/202411/1731633815zoFfIRIsE4yJ0a5LJn.jpg"},{product_id:0,product_sn:"",product_name:"干货",product_desc:"",product_price:32,market_price:0,pic_thumb:"https://oss.tigshop.com/img/gallery/202411/1731633815UdOFkntVJP4GXu9KsW.jpg"}]||[],module_color_style:"orange",prodcut_titles:[],module_title:{title:"天天特价",sub_title:"每日精选",countdown_title:"距结束",countdown_type:"daily_cycle",daily_time:[m(new Date,8),m(new Date,20)],specify_time:w(3)},pic_scale:"1:1",pic_fill_type:"cover",product_width:25,product_radius:6,show_product_name:1,product_name_size:14,product_name_weight:400,show_product_price:1,price_weight:400,show_selling_points:1,module_color:{title_color:"#ffffff",sub_title_color:"#ffffff",countdown_color:"#ffffff",countdown_title_color:"#72B76C",product_name_color:"#555555",selling_points_color:"#FB6D08"},module_style:C,content_style:$});k(e.value,f.value);const p=v([]),n=async u=>{try{const c=await z(u);p.value=[...S(e.value.product_list),...c.filter_result]}catch(c){console.error(c)}};L(()=>{if(e.value.product_source){const u={};if(e.value.product_source==="products")u.ids=e.value.product_list.map(c=>c.product_id).join(","),n(u);else if(e.value.product_groups[0]){const{product_group_id:c,product_num:d,product_num_type:s}=e.value.product_groups[0];u.product_group_id=c,u.size=s==="number"?d:100,n(u)}else p.value=[]}});const o=M(()=>x(e.value.module_style??{},e.value.content_style??{},e.value.sub_title??{})),h={"3:2":"calc(100% / 3 * 2)","1:1":"calc(100% / 1 * 1)","3:4":"calc(100% / 3 * 4)","16:9":"calc(100% / 16 * 9)"};return(u,c)=>(i(),a("div",{class:"module-ad-con",style:l(o.value.moduleStyle.box_padding_bottom+o.value.moduleStyle.box_padding_top+o.value.moduleStyle.box_padding_bottom+o.value.moduleStyle.box_padding+o.value.moduleStyle.background_size+o.value.moduleStyle.background_image)},[t("div",{class:"module-ad-content main",style:l(o.value.moduleContentStyle.background_image+o.value.moduleContentStyle.background_size+o.value.moduleContentStyle.box_radius+o.value.moduleContentStyle.box_shadow+o.value.moduleContentStyle.inner_padding+`border-radius: ${e.value.content_style.box_radius}px`)},[t("div",N,[t("div",O,[t("div",null,[t("span",{class:"mk-title",style:l(`color: ${e.value.module_color.title_color}`)},r(e.value.module_title.title),5),t("span",{class:"mk-small-title",style:l(`color: ${e.value.module_color.sub_title_color}`)},r(e.value.module_title.sub_title),5)]),t("div",{class:"mk-countdown",style:l(`--color: ${e.value.module_color.countdown_color}`)},[t("span",{class:"text",style:l(`color: ${e.value.module_color.countdown_title_color}`)},r(new Date().getTime()>Number(e.value.module_title.daily_time[0])?e.value.module_title.countdown_title:"距开始"),5),t("div",G,[V(y(D),{countdown_type:e.value.module_title.countdown_type,"value-style":{color:e.value.module_color.countdown_color,"font-size":"12px",display:"block",height:"20px","line-height":"20px"},format:"HH:mm:ss",daily_time:e.value.module_title.daily_time,specify_time:e.value.module_title.specify_time},null,8,["countdown_type","value-style","daily_time","specify_time"])])],4)]),t("div",{class:"lists",style:l(`border-radius: ${e.value.content_style.box_radius}px`)},[t("div",I,[(i(!0),a(j,null,E(p.value,(d,s)=>(i(),a("div",{key:s,style:l(`width: ${e.value.product_width}%; flex-wrap: nowrap; flex-shrink: 0`)},[t("div",J,[t("div",{class:"img",style:l(`width: 100%;
                                    padding-top: ${h[e.value.pic_scale]};
                                    background-size: ${e.value.pic_fill_type};
                                    border-radius: ${e.value.product_radius}px;
                                    background-image: url(${y(b)(d.pic_thumb)});`)},null,4),e.value.prodcut_titles.length>0?(i(),a("div",P,[e.value.show_product_name?(i(),a("div",{key:0,class:"tit",style:l(`padding-bottom: 0px; font-size: ${e.value.product_name_size}px; font-weight: ${e.value.product_name_weight}; color:${e.value.module_color.product_name_color}`)},r(e.value.prodcut_titles[s]&&e.value.prodcut_titles[s][`title${s+1}`]),5)):_("",!0),e.value.show_product_price?(i(),a("div",Q,[t("div",T,"￥"+r(d.product_price),1)])):_("",!0),e.value.show_selling_points?(i(),a("div",{key:2,class:"desc",style:l(`color: ${e.value.module_color.selling_points_color}`)},r(e.value.prodcut_titles[s]&&e.value.prodcut_titles[s][`selling_points${s+1}`]),5)):_("",!0)])):_("",!0)])],4))),128))])],4)])],4)],4))}}),le=K(W,[["__scopeId","data-v-619fc89e"]]);export{le as default};
