import{a as C}from"./shopProductCategory-b31d5b73.js";import{u as _}from"./shopProductCategory-792e0c23.js";import{d as P,m as S,u as p,j as r,x as k,K as M,o as x,k as L,f as V,dg as b}from"./index-7c2d2aef.js";const R=P({__name:"SelectShopProductCategory",props:S({multiple:{type:Boolean,default:!1},categoryList:{type:Array,default:()=>[]}},{category_id:{},category_idModifiers:{},category_name:{},category_nameModifiers:{}}),emits:["update:category_id","update:category_name"],setup(s){const o=s,t=p(s,"category_id"),n=p(s,"category_name"),f={label:"category_name",value:"category_id",children:"children",multiple:o.multiple,checkStrictly:!0},c=_(),l=r([]),u=r(!1),g=r(!1);r(!1),k(()=>{o.categoryList.length>1?l.value=o.categoryList:i()});const i=async()=>{if(g.value!==!0){if(u.value=!0,c.shopProductCategoryTree!==null){l.value=c.shopProductCategoryTree;return}try{const e=await C();l.value=e.filter_result,c.shopProductCategoryTree=e.filter_result}catch(e){M.error(e.message)}finally{u.value=!1,g.value=!0}}},d=r(),m=e=>{if(o.multiple==!0)t.value=e==null?void 0:e.map(a=>a[a.length-1]);else{const a=d.value.getCheckedNodes();n.value=a[0]?a[0].text:"",console.log(e?e[e.length-1]:0),t.value=e?e[e.length-1]:0}},y=e=>{e&&i()},v=()=>{o.multiple==!0?t.value=[]:(t.value=0,n.value="")};return(e,a)=>(x(),L(V(b),{ref_key:"cascaderRef",ref:d,modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=h=>t.value=h),options:l.value,props:f,class:"cascader",clearable:"",placeholder:"选择分类",onChange:m,onClear:v,onVisibleChange:y},null,8,["modelValue","options"]))}});export{R as _};
