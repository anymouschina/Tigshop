import{d as $,i as u,G as I,q as U,c as v,e as s,b as t,w as o,f as h,g as _,I as y,r as d,o as b,L as E,E as p,D as z,l as K}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{_ as L}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as F}from"./Pagination-yOfjsBuR.js";import{u as G}from"./config-DNllFJyR.js";import{g as M,r as O,d as T,b as j}from"./pushLog-Cp4ds-gG.js";import{_ as H}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const J={class:"container"},Q={class:"content_wrapper"},R={class:"lyecs-table-list-warp"},W={class:"list-table-tool lyecs-search-warp"},X={class:"advanced-search-warp list-table-tool-row"},Y={class:"simple-form-warp"},Z={class:"simple-form-field"},ee={class:"form-group"},te={class:"control-container"},se={class:"simple-form-field"},oe={class:"form-group"},ae={class:"control-container"},le={class:"simple-form-field"},ne={class:"form-group"},ie={class:"control-container"},re={class:"simple-form-field"},de={class:"form-group"},pe={class:"control-container"},ce={key:0},_e={class:"table-container"},me={class:"empty-warp"},ue={key:0,class:"empty-bg"},fe={key:0,class:"pagination-con"},Ve=$({__name:"List",setup(ge){const V=G(),w=u([]),m=u(!0),f=u(0),c=u([]);u(!1);const n=I({page:1,size:V.get("page_size"),sort_field:"",sort_order:"",keyword:""}),i=async()=>{m.value=!0;try{const l=await M({...n});w.value=l.filter_result,f.value=l.total}catch(l){y.error(l.message)}finally{m.value=!1}};U(()=>{i()});const k=()=>{i()},x=({prop:l,order:e})=>{n.sort_field=l,n.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",i()},C=async l=>{try{const e=await j(l,{ids:c.value});y.success(e.message),i()}catch(e){y.error(e.message)}},A=l=>{c.value=l.map(e=>e.brand_id)};return(l,e)=>{const g=d("el-button"),P=d("el-input"),S=d("el-popconfirm"),q=d("el-form"),r=d("el-table-column"),D=d("el-divider"),B=d("el-table"),N=d("a-spin");return b(),v("div",J,[s("div",Q,[s("div",R,[s("div",W,[t(q,{model:n},{default:o(()=>[s("div",X,[s("div",Y,[s("div",Z,[s("div",ee,[s("div",te,[t(P,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>n.keyword=a),name:"keyword",placeholder:"输入标题",onKeyup:E(k,["enter"])},{append:o(()=>[t(g,{onClick:k},{default:o(()=>e[5]||(e[5]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),s("div",se,[s("div",oe,[s("div",ae,[t(_(H),{params:{act:"add"},isDrawer:"",path:"user/pushLog/Info",title:"添加推送",width:"600px",onOkCallback:i},{default:o(()=>[t(g,{type:"primary"},{default:o(()=>e[6]||(e[6]=[p("添加推送")])),_:1})]),_:1})])])]),s("div",le,[s("div",ne,[s("div",ie,[t(S,{title:"您确认要批量撤回所选数据吗？",onConfirm:e[1]||(e[1]=a=>C("recall"))},{reference:o(()=>[t(g,{disabled:c.value.length===0},{default:o(()=>e[7]||(e[7]=[p("批量撤回")])),_:1},8,["disabled"])]),_:1})])])]),s("div",re,[s("div",de,[s("div",pe,[t(S,{title:"您确认要批量删除所选数据吗？",onConfirm:e[2]||(e[2]=a=>C("del"))},{reference:o(()=>[t(g,{disabled:c.value.length===0},{default:o(()=>e[8]||(e[8]=[p("批量删除")])),_:1},8,["disabled"])]),_:1}),c.value.length>0?(b(),v("span",ce,[e[9]||(e[9]=p(" 已选择：")),s("b",null,z(c.value.length),1),e[10]||(e[10]=p(" 项 "))])):h("",!0)])])])])])]),_:1},8,["model"])]),s("div",_e,[t(N,{spinning:m.value},{default:o(()=>[t(B,{data:w.value,loading:m.value,total:f.value,"row-key":"message_log_id",onSelectionChange:A,onSortChange:x},{empty:o(()=>[s("div",me,[m.value?h("",!0):(b(),v("div",ue,"暂无数据"))])]),default:o(()=>[t(r,{type:"selection",width:"32"}),t(r,{label:"标题",prop:"message_title"}),t(r,{label:"内容",prop:"message_content"}),t(r,{label:"链接",prop:"message_link"}),t(r,{width:100,label:"发送类型",prop:"send_type_name"}),t(r,{width:100,label:"发送状态",prop:"brand_id"},{default:o(({row:a})=>[s("span",{style:K({color:a.is_recall===0?"green":"red"})},z(a.status_name),5)]),_:1}),t(r,{width:160,label:"发送日期",prop:"send_time"}),t(r,{width:100,fixed:"right",label:"操作"},{default:o(({row:a})=>[t(_(L),{params:{id:a.brand_id},requestApi:_(O),onAfterDelete:i},{default:o(()=>e[11]||(e[11]=[p("撤回 ")])),_:2},1032,["params","requestApi"]),t(D,{direction:"vertical"}),t(_(L),{params:{id:a.brand_id},requestApi:_(T),onAfterDelete:i},{default:o(()=>e[12]||(e[12]=[p("删除 ")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),f.value>0?(b(),v("div",fe,[t(_(F),{page:n.page,"onUpdate:page":e[3]||(e[3]=a=>n.page=a),size:n.size,"onUpdate:size":e[4]||(e[4]=a=>n.size=a),total:f.value,onCallback:i},null,8,["page","size","total"])])):h("",!0)])])])])}}});export{Ve as default};
