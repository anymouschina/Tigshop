import{d as G,j as h,I as H,x as T,r,o as v,c as w,e as l,b as e,w as a,f as i,h as x,K as S,L as J,H as n,k as D,G as g}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{P as I}from"./PopFormElm-61cd9b7d.js";import{_ as P}from"./Switch.vue_vue_type_script_setup_true_lang-95245cd7.js";import{_ as Q}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as R}from"./Pagination-8eb7b6b1.js";import{u as W}from"./config-9548fa9b.js";import{g as X,u as V,d as Y,b as Z}from"./article-8e3ede66.js";import{S as ee}from"./SelectArticleCategory-74d7e522.js";import{_ as q}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";import"./articleCategory-7e779613.js";/* empty css                                                                              */const te={class:"container"},le={class:"content_wrapper"},ae={class:"lyecs-table-list-warp"},oe={class:"list-table-tool lyecs-search-warp"},se={class:"advanced-search-warp list-table-tool-row"},ie={class:"simple-form-warp"},ne={class:"simple-form-field"},de={class:"form-group"},re={class:"control-container"},ce=l("span",{class:"iconfont icon-chakan1"},null,-1),_e={class:"simple-form-field"},pe={class:"form-group"},ue=l("label",{class:"control-label"},[l("span",null,"全部分类：")],-1),me={class:"control-container"},fe={class:"simple-form-field"},he={class:"form-group"},ve=l("label",{class:"control-label"},[l("span",null,"是否显示：")],-1),be={class:"control-container"},ge={class:"simple-form-field"},ye={class:"form-group"},ke=l("label",{class:"control-label"},[l("span",null,"是否热门：")],-1),we={class:"control-container"},Ve={class:"simple-form-field"},Ce={class:"list-table-tool-row"},Ae={class:"list-table-tool-col"},Ue={key:2},xe=l("div",{class:"list-table-tool-col"},null,-1),Se={class:"table-container"},qe={style:{position:"relative"}},ze=l("a",{class:"btn-link"},"编辑",-1),$e=l("a",{class:"btn-link"},"查看",-1),Be={class:"empty-warp"},De={key:0,class:"empty-bg"},Ie={key:0,class:"pagination-con"},Xe=G({__name:"List",setup(Pe){const N=W(),z=h(),b=h(!0),y=h(0),c=h([]);h(!1);const s=H({page:1,size:N.get("page_size"),sort_field:"",sort_order:"",keyword:"",article_category_id:"",is_show:-1,is_hot:-1}),k=h([]),p=async()=>{b.value=!0;try{s.article_category_id=Array.isArray(k.value)?k.value.join(","):"";const d=await X({...s});z.value=d.filter_result,y.value=d.total}catch(d){S.error(d.message)}finally{b.value=!1}};T(()=>{p()});const C=()=>{p()},F=({prop:d,order:o})=>{s.sort_field=d,s.sort_order=o=="ascending"?"asc":o=="descending"?"desc":"",p()},A=async d=>{try{const o=await Z(d,{ids:c.value});S.success(o.message),p()}catch(o){S.error(o.message)}},K=d=>{c.value=d.map(o=>o.article_id)};return(d,o)=>{const u=r("el-button"),L=r("el-input"),f=r("el-option"),$=r("el-select"),U=r("el-popconfirm"),O=r("el-space"),j=r("el-form"),_=r("el-table-column"),B=r("el-divider"),M=r("el-table"),E=r("a-spin");return v(),w("div",te,[l("div",le,[l("div",ae,[l("div",oe,[e(j,{model:s},{default:a(()=>[l("div",se,[l("div",ie,[l("div",ne,[l("div",de,[l("div",re,[e(L,{modelValue:s.keyword,"onUpdate:modelValue":o[0]||(o[0]=t=>s.keyword=t),name:"keyword",placeholder:"输入文章名称",onKeyup:J(C,["enter"])},{append:a(()=>[e(u,{onClick:C},{default:a(()=>[ce]),_:1})]),_:1},8,["modelValue"])])])]),l("div",_e,[l("div",pe,[ue,l("div",me,[e(ee,{modelValue:k.value,"onUpdate:modelValue":o[1]||(o[1]=t=>k.value=t)},null,8,["modelValue"])])])]),l("div",fe,[l("div",he,[ve,l("div",be,[e($,{modelValue:s.is_show,"onUpdate:modelValue":o[2]||(o[2]=t=>s.is_show=t)},{default:a(()=>[e(f,{value:-1,label:"请选择..."}),e(f,{value:0,label:"不显示"}),e(f,{value:1,label:"显示"})]),_:1},8,["modelValue"])])])]),l("div",ge,[l("div",ye,[ke,l("div",we,[e($,{"fit-input-width":!1,modelValue:s.is_hot,"onUpdate:modelValue":o[3]||(o[3]=t=>s.is_hot=t)},{default:a(()=>[e(f,{value:-1,label:"请选择..."}),e(f,{value:0,label:"不热门"}),e(f,{value:1,label:"热门"})]),_:1},8,["modelValue"])])])]),l("div",Ve,[e(u,{type:"primary",onClick:C},{default:a(()=>[n("搜索")]),_:1})])])]),l("div",Ce,[l("div",Ae,[e(O,null,{default:a(()=>[e(i(q),{isDrawer:"",onOkCallback:p,title:"添加文章",width:"600px",path:"content/article/Info",params:{act:"add"}},{default:a(()=>[e(u,{type:"primary"},{default:a(()=>[n("添加文章")]),_:1})]),_:1}),e(U,{title:"您确认要批量删除所选数据吗？",onConfirm:o[4]||(o[4]=t=>A("del"))},{reference:a(()=>[e(u,{disabled:c.value.length===0},{default:a(()=>[n("批量删除")]),_:1},8,["disabled"])]),_:1}),e(U,{title:"您确认要批量显示所选数据吗？",onConfirm:o[5]||(o[5]=t=>A("show"))},{reference:a(()=>[e(u,{disabled:c.value.length===0},{default:a(()=>[n("批量显示")]),_:1},8,["disabled"])]),_:1}),e(U,{title:"您确认要批量隐藏所选数据吗？",onConfirm:o[6]||(o[6]=t=>A("hide"))},{reference:a(()=>[e(u,{disabled:c.value.length===0},{default:a(()=>[n("批量隐藏")]),_:1},8,["disabled"])]),_:1}),c.value.length==0?(v(),D(u,{key:0,disabled:c.value.length===0},{default:a(()=>[n("批量转移分类")]),_:1},8,["disabled"])):(v(),D(i(q),{key:1,isDrawer:"",onOkCallback:p,title:"批量转移分类",width:"600px",path:"content/article/Move",params:{ids:c.value}},{default:a(()=>[e(u,null,{default:a(()=>[n("批量转移分类")]),_:1})]),_:1},8,["params"])),c.value.length>0?(v(),w("span",Ue,[n(" 已选择："),l("b",null,g(c.value.length),1),n(" 项 ")])):x("",!0)]),_:1})]),xe])]),_:1},8,["model"])]),l("div",Se,[e(E,{spinning:b.value},{default:a(()=>[e(M,{data:z.value,"row-key":"article_id",onSelectionChange:K,total:y.value,onSortChange:F,loading:b.value},{empty:a(()=>[l("div",Be,[b.value?x("",!0):(v(),w("div",De,"暂无数据"))])]),default:a(()=>[e(_,{type:"selection",width:"32"}),e(_,{label:"文章标题",prop:"article_id",sortable:"custom",width:300},{default:a(({row:t})=>[l("div",qe,[e(i(I),{label:"文章标题",type:"textarea",requestApi:i(V),"org-value":t.article_title,"onUpdate:orgValue":m=>t.article_title=m,params:{id:t.article_id,field:"article_title"},max:50},{default:a(()=>[l("div",null,g(t.article_title),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])])]),_:1}),e(_,{label:"文章编号"},{default:a(({row:t})=>[e(i(I),{label:"文章编号",type:"input",requestApi:i(V),"org-value":t.article_sn,"onUpdate:orgValue":m=>t.article_sn=m,params:{id:t.article_id,field:"article_sn"},max:10},{default:a(()=>[l("div",null,g(t.article_sn||"-"),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])]),_:1}),e(_,{label:"文章分类",prop:"article_category_name"}),e(_,{label:"文章类型",prop:"article_type_text"}),e(_,{width:"90",label:"文章重要性"},{default:a(({row:t})=>[n(g(t.is_top==0?"普通":"置顶"),1)]),_:1}),e(_,{width:"160",label:"发布时间"},{default:a(({row:t})=>[n(g(t.add_time),1)]),_:1}),e(_,{label:"是否热门",prop:"is_hot",sortable:"custom",width:120},{default:a(({row:t})=>[e(i(P),{checked:t.is_hot,"onUpdate:checked":m=>t.is_hot=m,requestApi:i(V),params:{id:t.article_id,field:"is_hot"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),e(_,{label:"是否显示",prop:"is_show",sortable:"custom",width:120},{default:a(({row:t})=>[e(i(P),{checked:t.is_show,"onUpdate:checked":m=>t.is_show=m,requestApi:i(V),params:{id:t.article_id,field:"is_show"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),e(_,{label:"操作",fixed:"right",width:150},{default:a(({row:t})=>[e(i(q),{isDrawer:"",onOkCallback:p,title:"编辑文章",width:"600px",path:"content/article/Info",params:{act:"detail",id:t.article_id}},{default:a(()=>[ze]),_:2},1032,["params"]),e(B,{direction:"vertical"}),$e,e(B,{direction:"vertical"}),e(i(Q),{onAfterDelete:p,requestApi:i(Y),params:{id:t.article_id}},{default:a(()=>[n("删除")]),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),y.value>0?(v(),w("div",Ie,[e(i(R),{page:s.page,"onUpdate:page":o[7]||(o[7]=t=>s.page=t),size:s.size,"onUpdate:size":o[8]||(o[8]=t=>s.size=t),total:y.value,onCallback:p},null,8,["page","size","total"])])):x("",!0)])])])])}}});export{Xe as default};
