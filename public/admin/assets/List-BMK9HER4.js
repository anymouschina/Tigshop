import{d as E,i as g,G as F,q as K,c as b,e as t,b as a,w as o,f as h,g as d,I as y,r,o as u,L as O,E as f,D as x,j}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";/* empty css                                               */import"./zh-cn-BAb8a1B9.js";import{T as G}from"./Tag-DHW499gP.js";import{_ as A}from"./Switch.vue_vue_type_script_setup_true_lang-CKSPWIQL.js";import{_ as M}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as H}from"./Pagination-yOfjsBuR.js";import{u as J}from"./config-DNllFJyR.js";import{g as Q,u as S,d as R,b as W}from"./areaCode-Bebzj2ob.js";import{_ as q}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const X={class:"container"},Y={class:"content_wrapper"},Z={class:"lyecs-table-list-warp"},ee={class:"list-table-tool lyecs-search-warp"},te={class:"advanced-search-warp list-table-tool-row"},ae={class:"simple-form-warp"},se={class:"simple-form-field"},oe={class:"form-group"},le={class:"control-container"},ie={class:"simple-form-field"},ne={class:"form-group"},de={class:"control-container"},re={class:"simple-form-field"},ce={class:"form-group"},pe={class:"control-container"},me={key:0},_e={class:"table-container"},ue={class:"flex flex-align-center"},fe={class:"empty-warp"},ve={key:0,class:"empty-bg"},ge={key:0,class:"pagination-con"},Ne=E({__name:"List",props:{promotion_type:{type:Number,default:1}},setup(be,{expose:z}){const U=J(),C=g(),m=g(!0),v=g(0),_=g([]),n=F({page:1,size:U.get("page_size"),sort_field:"",sort_order:"",name:""}),l=async()=>{m.value=!0;try{const i=await Q({...n});C.value=i.filter_result,v.value=i.total}catch(i){y.error(i.message)}finally{m.value=!1}};K(()=>{l()});const w=()=>{l()},V=({prop:i,order:e})=>{n.sort_field=i,n.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",l()},B=async(i,e)=>{try{const c=await W(i,{ids:_.value,value:e});y.success(c.message),l()}catch(c){y.error(c.message)}},D=i=>{_.value=i.map(e=>e.id)};return z({loadFilter:l}),(i,e)=>{const c=r("el-button"),N=r("el-input"),I=r("el-popconfirm"),$=r("el-form"),p=r("el-table-column"),L=r("el-divider"),P=r("el-table"),T=r("a-spin");return u(),b("div",X,[t("div",Y,[t("div",Z,[t("div",ee,[a($,{model:n},{default:o(()=>[t("div",te,[t("div",ae,[t("div",se,[t("div",oe,[t("div",le,[a(N,{modelValue:n.name,"onUpdate:modelValue":e[0]||(e[0]=s=>n.name=s),name:"name",placeholder:"请输入区号地区名称",onKeyup:O(w,["enter"])},{append:o(()=>[a(c,{onClick:w},{default:o(()=>e[4]||(e[4]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",ie,[t("div",ne,[t("div",de,[a(d(q),{params:{act:"add"},isDrawer:"",path:"setting/multilingual/areaCode/Info",title:"添加区号",width:"600px",onOkCallback:l},{default:o(()=>[a(c,{type:"primary"},{default:o(()=>e[5]||(e[5]=[f("添加区号")])),_:1})]),_:1})])])]),t("div",re,[t("div",ce,[t("div",pe,[a(I,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=s=>B("del"))},{reference:o(()=>[a(c,{disabled:_.value.length===0},{default:o(()=>e[6]||(e[6]=[f("批量删除")])),_:1},8,["disabled"])]),_:1}),_.value.length>0?(u(),b("span",me,[e[7]||(e[7]=f(" 已选择：")),t("b",null,x(_.value.length),1),e[8]||(e[8]=f(" 项 "))])):h("",!0)])])])])])]),_:1},8,["model"])]),t("div",_e,[a(T,{spinning:m.value},{default:o(()=>[a(P,{data:C.value,"row-key":"id",onSelectionChange:D,total:v.value,onSortChange:V,loading:m.value},{empty:o(()=>[t("div",fe,[m.value?h("",!0):(u(),b("div",ve,"暂无数据"))])]),default:o(()=>[a(p,{type:"selection",width:"32"}),a(p,{label:"区号地区",prop:"name",width:150},{default:o(({row:s})=>[t("div",ue,[s.is_default==1?(u(),j(d(G),{key:0,transparent:!0,text:"默认"})):h("",!0),t("div",null,x(s.name||"--"),1)])]),_:1}),a(p,{label:"区号",prop:"code",width:"200"}),a(p,{label:"是否默认",prop:"is_default"},{default:o(({row:s})=>[a(d(A),{checked:s.is_default,"onUpdate:checked":k=>s.is_default=k,requestApi:d(S),onCallback:l,params:{id:s.id,field:"is_default"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),a(p,{label:"是否启用",prop:"is_available"},{default:o(({row:s})=>[a(d(A),{checked:s.is_available,"onUpdate:checked":k=>s.is_available=k,requestApi:d(S),onCallback:l,params:{id:s.id,field:"is_available"}},null,8,["checked","onUpdate:checked","requestApi","params"])]),_:1}),a(p,{label:"操作",fixed:"right",width:"120"},{default:o(({row:s})=>[a(d(q),{isDrawer:"",onOkCallback:l,title:"编辑币种",width:"800px",path:"setting/multilingual/areaCode/Info",params:{act:"detail",id:s.id}},{default:o(()=>e[9]||(e[9]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),a(L,{direction:"vertical"}),a(d(M),{onAfterDelete:l,requestApi:d(R),params:{id:s.id}},{default:o(()=>e[10]||(e[10]=[f("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),v.value>0?(u(),b("div",ge,[a(d(H),{page:n.page,"onUpdate:page":e[2]||(e[2]=s=>n.page=s),size:n.size,"onUpdate:size":e[3]||(e[3]=s=>n.size=s),total:v.value,onCallback:l},null,8,["page","size","total"])])):h("",!0)])])])])}}});export{Ne as default};
