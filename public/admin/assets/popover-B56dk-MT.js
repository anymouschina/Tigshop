import{u as E}from"./config-DNllFJyR.js";import{d as $,i as p,G as g,q as B,A as O,p as A,r as d,j as q,o as V,w as u,b as o,e as a,E as r,D as b,c as R,f as z,aO as I,_ as D}from"./index-CGYuOau0.js";import"./config-DU8_t5BN.js";const K={class:"check-list"},T={class:"item flex flex-align-center flex-justify-between"},G={class:"check"},M={class:"inp flex flex-align-center"},P={class:"item flex flex-align-center flex-justify-between"},F={class:"check"},H={class:"inp flex flex-align-center"},J={class:"item flex flex-align-center flex-justify-between"},L={class:"check"},Q={class:"inp flex flex-align-center"},W={class:"btn-box"},X={class:"tips"},Y={key:0,class:"red"},Z=$({__name:"popover",props:{conditions_data:{type:Object,default:{}},superior_data:{type:Object,default:{}},index:{type:Number,default:0}},emits:["submitCallback"],setup(w,{emit:N}){const S=N,v=E(),i=w,y=p(null),f=p(null),s=g({self_buy_amount:{checked:!1,disabled:!1,value:0,title:"自购金额",unit:`${v.get("amount_unit")??"元"}`},sales_amount:{checked:!1,disabled:!1,value:0,title:"推广金额",unit:`${v.get("amount_unit")??"元"}`},sales_invite_users:{checked:!1,disabled:!1,value:0,title:"发展客户数",unit:"人"}}),k=p(!1),C=async()=>{await y.value.validate();let l=!0;for(let e in s)if(s[e].checked){l=!1;break}if(l){console.log("No conditions selected. Verification failed.");return}k.value=!0,S("submitCallback",{conditionsOpts:s,index:i.index}),f.value.hide()},_=g({self_buy_amount:[{required:!0,validator:(l,e,t)=>{if(console.log(i.superior_data==null),e.checked&&Number(e.value)<=0){t(new Error("请输入自购金额"));return}i.superior_data!=null&&e.checked&&Number(e.value)<=Number(i.superior_data.self_buy_amount.value)?t(new Error(`需大于上一等级金额(${i.superior_data.self_buy_amount.value})`)):t()},trigger:"blur"}],sales_amount:[{required:!0,validator:(l,e,t)=>{if(e.checked&&Number(e.value)<=0){t(new Error("请输入推广金额"));return}i.superior_data!=null&&e.checked&&Number(e.value)<=Number(i.superior_data.sales_amount.value)?t(new Error(`需大于上一等级金额(${i.superior_data.sales_amount.value})`)):t(),t()},trigger:"blur"}],sales_invite_users:[{required:!0,validator:(l,e,t)=>{if(e.checked&&Number(e.value)<=0){t(new Error("请输入发展客户数"));return}i.superior_data!=null&&e.checked&&Number(e.value)<=Number(i.superior_data.sales_invite_users.value)?t(new Error(`需大于上一等级客户数(${i.superior_data.sales_invite_users.value})`)):t(),t()},trigger:"blur"}]}),h=()=>{let l=i.conditions_data,e=i.superior_data;e.self_buy_amount.checked?(l.self_buy_amount.checked=!0,l.self_buy_amount.disabled=!0):l.self_buy_amount.disabled=!1,e.sales_amount.checked?(l.sales_amount.checked=!0,l.sales_amount.disabled=!0):l.sales_amount.disabled=!1,e.sales_invite_users.checked?(l.sales_invite_users.checked=!0,l.sales_invite_users.disabled=!0):l.sales_invite_users.disabled=!1,Object.assign(s,l)};return B(()=>{i.superior_data!==null?O(()=>{h()}):Object.assign(s,i.conditions_data)}),A(i.superior_data,(l,e)=>{h()}),(l,e)=>{const t=d("el-checkbox"),c=d("el-input"),m=d("el-form-item"),x=d("el-button"),U=d("el-popover"),j=d("el-form");return V(),q(j,{ref_key:"formRef",ref:y,rules:_,model:s,"label-width":"auto"},{default:u(()=>[o(m,{prop:"conditions_data"},{default:u(()=>[o(U,{ref_key:"popoverRef",ref:f,placement:"right",title:"升级设置",width:350,trigger:"click"},{reference:u(()=>[I(l.$slots,"default",{},void 0,!0)]),default:u(()=>[e[12]||(e[12]=a("div",{class:"tips mb10"},"以下条件至少选择一个，选择多个需同时满足才可升级。自购金额、推广金额需交易完成后才会统计。",-1)),a("div",K,[o(m,{prop:"self_buy_amount",rules:_.self_buy_amount},{default:u(()=>[a("div",T,[a("div",G,[o(t,{modelValue:s.self_buy_amount.checked,"onUpdate:modelValue":e[0]||(e[0]=n=>s.self_buy_amount.checked=n),label:s.self_buy_amount.title,disabled:s.self_buy_amount.disabled,size:"large"},null,8,["modelValue","label","disabled"])]),a("div",M,[e[7]||(e[7]=a("p",{class:"mr10"},"满",-1)),o(c,{type:"number",modelValue:s.self_buy_amount.value,"onUpdate:modelValue":e[1]||(e[1]=n=>s.self_buy_amount.value=n),disabled:!s.self_buy_amount.checked,style:{width:"130px"},min:0},{append:u(()=>[r(b(s.self_buy_amount.unit),1)]),_:1},8,["modelValue","disabled"])])])]),_:1},8,["rules"]),o(m,{prop:"sales_amount",rules:_.sales_amount},{default:u(()=>[a("div",P,[a("div",F,[o(t,{modelValue:s.sales_amount.checked,"onUpdate:modelValue":e[2]||(e[2]=n=>s.sales_amount.checked=n),label:s.sales_amount.title,disabled:s.sales_amount.disabled,size:"large"},null,8,["modelValue","label","disabled"])]),a("div",H,[e[8]||(e[8]=a("p",{class:"mr10"},"满",-1)),o(c,{type:"number",modelValue:s.sales_amount.value,"onUpdate:modelValue":e[3]||(e[3]=n=>s.sales_amount.value=n),disabled:!s.sales_amount.checked,style:{width:"130px"},min:0},{append:u(()=>[r(b(s.sales_amount.unit),1)]),_:1},8,["modelValue","disabled"])])])]),_:1},8,["rules"]),o(m,{prop:"sales_invite_users",rules:_.sales_invite_users},{default:u(()=>[a("div",J,[a("div",L,[o(t,{modelValue:s.sales_invite_users.checked,"onUpdate:modelValue":e[4]||(e[4]=n=>s.sales_invite_users.checked=n),label:s.sales_invite_users.title,disabled:s.sales_invite_users.disabled,size:"large"},null,8,["modelValue","label","disabled"])]),a("div",Q,[e[9]||(e[9]=a("p",{class:"mr10"},"满",-1)),o(c,{type:"number",modelValue:s.sales_invite_users.value,"onUpdate:modelValue":e[5]||(e[5]=n=>s.sales_invite_users.value=n),disabled:!s.sales_invite_users.checked,style:{width:"130px"},min:0},{append:u(()=>[r(b(s.sales_invite_users.unit),1)]),_:1},8,["modelValue","disabled"])])])]),_:1},8,["rules"])]),a("div",W,[a("div",X,[k.value?z("",!0):(V(),R("span",Y,"请设置升级条件"))]),a("div",null,[o(x,{onClick:e[6]||(e[6]=n=>f.value.hide())},{default:u(()=>e[10]||(e[10]=[r("取消")])),_:1}),o(x,{type:"primary",onClick:C},{default:u(()=>e[11]||(e[11]=[r("确认")])),_:1})])])]),_:3},512)]),_:3})]),_:3},8,["rules","model"])}}}),oe=D(Z,[["__scopeId","data-v-7ae98906"]]);export{oe as default};
