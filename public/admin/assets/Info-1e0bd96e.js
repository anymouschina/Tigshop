import{d as I,j as n,E as L,s as j,x as q,r as u,o as d,c as g,e as a,G as o,h,b as i,k as E,w as k,K as m,_ as U}from"./index-7c2d2aef.js";import{a as G,u as K}from"./feedback-99727590.js";const M={class:"container"},O={class:"lyecs-form-table"},z={key:0},A={class:"lyecs-form-table"},H={style:{"text-align":"end"}},J={class:"content_wrapper"},P={class:"lyecs-form-table"},Q=I({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:x,emit:S}){const l=S,c=w,_=n(!0),p=L().currentRoute.value.query,f=n(c.isDialog?c.act:String(p.act)),v=n(c.isDialog?c.id:Number(p.id)),C=f.value==="add"?"create":"update",y=j(),e=n({product:{product_id:0,product_name:""}}),r=n({product:{product_id:0,product_name:""}}),R=async()=>{try{const t=await G(f.value,{id:v.value});Object.assign(e.value,t.item)}catch(t){m.error(t.message),l("close")}finally{_.value=!1}};q(()=>{R()});const V=async()=>{await y.value.validate();try{l("update:confirmLoading",!0);let t=0;e.value.status==1&&(t=e.value.id);const s=await K(C,{id:v.value,parent_id:t,...r.value});l("submitCallback",s),m.success(s.message)}catch(t){m.error(t.message)}finally{l("update:confirmLoading",!1)}};return x({onFormSubmit:()=>{V()}}),(t,s)=>{const b=u("el-divider"),B=u("el-input"),D=u("el-form-item"),N=u("el-form");return d(),g("div",M,[a("div",O,[a("h2",null,[a("span",null,"类型:"+o(e.value.type_name),1),e.value.product_id?(d(),g("span",z,"【 "+o(e.value.product.product_name)+" 】",1)):h("",!0)])]),i(b),a("div",A,[a("p",null,"主题:"+o(e.value.title),1),a("p",null,"内容: "+o(e.value.content),1),a("p",H,"【 留言板 】"+o(e.value.username)+" @ "+o(e.value.add_time),1)]),i(b),a("div",J,[a("div",P,[_.value?h("",!0):(d(),E(N,{key:0,ref_key:"formRef",ref:y,model:r.value,"label-width":"auto"},{default:k(()=>[i(D,{label:"回复内容",prop:"content"},{default:k(()=>[i(B,{type:"textarea",rows:5,modelValue:r.value.content,"onUpdate:modelValue":s[0]||(s[0]=F=>r.value.content=F)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]))])])])}}});const Y=U(Q,[["__scopeId","data-v-db804922"]]);export{Y as default};
