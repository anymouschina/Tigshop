import{d as q,E as F,j as _,s as $,r as s,o as m,c,e as v,b as t,w as l,f,k as V,F as k,$ as E,a0 as j,H,K as w}from"./index-7c2d2aef.js";import{u as I}from"./messageLog-e4137e56.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import"./config-9548fa9b.js";/* empty css                                                                    *//* empty css                                                                  */import{_ as K}from"./SelectRankList.vue_vue_type_script_setup_true_lang-57f97863.js";/* empty css                                                                              */import{S as M}from"./SelectLink-f2e6e565.js";import"./region-e0d291a6.js";import{_ as T}from"./SelectUser.vue_vue_type_script_setup_true_lang-2a8b80ef.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import"./time-290942a2.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";import"./userRank-9565375c.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./region-05802f67.js";import"./user-dc73f8d4.js";const h={class:"container"},z={class:"content_wrapper"},A={class:"lyecs-form-table"},G=v("div",{class:"extra"},"注意：输入会员名称时，请用英文逗号隔开。",-1),fe=q({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:S,emit:U}){const d=U,r=x,b=F().currentRoute.value.query,B=_(r.isDialog?r.act:String(b.act)),C=_(r.isDialog?r.id:Number(b.id)),D=B.value==="add"?"create":"update",g=$(),e=_({}),y=async()=>{await g.value.validate();try{d("update:confirmLoading",!0);const u=await I(D,{id:C.value,...e.value});d("submitCallback",u),w.success(u.message)}catch(u){w.error(u.message)}finally{d("update:confirmLoading",!1)}};return S({onFormSubmit:()=>{y()}}),(u,o)=>{const p=s("el-input"),n=s("el-form-item"),i=s("el-option"),L=s("el-select"),N=s("el-button"),R=s("el-form");return m(),c("div",h,[v("div",z,[v("div",A,[t(R,{ref_key:"formRef",ref:g,model:e.value,"label-width":"auto"},{default:l(()=>[t(n,{rules:[{required:!0,message:"标题不能为空!"}],label:"标题",prop:"message_title"},{default:l(()=>[t(p,{modelValue:e.value.message_title,"onUpdate:modelValue":o[0]||(o[0]=a=>e.value.message_title=a)},null,8,["modelValue"])]),_:1}),t(n,{rules:[{required:!0,message:"内容不能为空!"}],label:"内容",prop:"message_content"},{default:l(()=>[t(p,{modelValue:e.value.message_content,"onUpdate:modelValue":o[1]||(o[1]=a=>e.value.message_content=a),row:"2",type:"textarea"},null,8,["modelValue"])]),_:1}),t(n,{label:"链接",prop:"is_show"},{default:l(()=>[t(f(M),{modelValue:e.value.message_link,"onUpdate:modelValue":o[2]||(o[2]=a=>e.value.message_link=a)},null,8,["modelValue"])]),_:1}),t(n,{label:"发送类型",prop:"brand_is_hot"},{default:l(()=>[t(L,{modelValue:e.value.send_user_type,"onUpdate:modelValue":o[3]||(o[3]=a=>e.value.send_user_type=a),style:{width:"100%","margin-bottom":"20px"}},{default:l(()=>[t(i,{value:0,label:"全部会员"}),t(i,{value:1,label:"单个会员"}),t(i,{value:2,label:"会员等级"}),t(i,{value:3,label:"部分会员"})]),_:1},8,["modelValue"]),e.value.send_user_type===1?(m(),V(f(T),{key:0,multiple:!1,user_id:e.value.user_ids,"onUpdate:user_id":o[4]||(o[4]=a=>e.value.user_ids=a)},null,8,["user_id"])):e.value.send_user_type===2?(m(),V(f(K),{key:1,modelValue:e.value.user_rank,"onUpdate:modelValue":o[5]||(o[5]=a=>e.value.user_rank=a)},null,8,["modelValue"])):e.value.send_user_type===3?(m(),c(k,{key:2},[t(p,{modelValue:e.value.user_ids,"onUpdate:modelValue":o[6]||(o[6]=a=>e.value.user_ids=a),row:"2",type:"textarea"},null,8,["modelValue"]),G],64)):(m(),c(k,{key:3},[],64))]),_:1}),E(t(n,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(N,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:y},{default:l(()=>[H("提交")]),_:1},512)]),_:1},512),[[j,!r.isDialog]])]),_:1},8,["model"])])])])}}});export{fe as default};
