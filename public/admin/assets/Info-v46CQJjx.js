import{d as L,i as u,C as M,s as h,q as j,r as i,c as E,o as V,e as f,b as o,j as I,f as A,w as r,a0 as G,g as S,E as _,a1 as O,I as m}from"./index-CGYuOau0.js";import{F as P}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-CjXfTDg5.js";import{a as T,b as $}from"./material-DYUiyv0A.js";import{_ as z}from"./selectCategory.vue_vue_type_script_setup_true_lang-CsSgBdcE.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";import{S as H}from"./SelectProduct-Dqera5O0.js";/* empty css                                                                    *//* empty css                                                                              *//* empty css             */import"./vuedraggable.umd-_1km55l4.js";import"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./category-COJmNN7y.js";import"./time-ClyPenjC.js";import"./product-CxWf3yyB.js";import"./Pagination-yOfjsBuR.js";import"./SelectSku-DpuXlI1z.js";/* empty css                                                                  */const J={class:"container"},K={class:"content_wrapper"},Q={class:"lyecs-form-table"},W={class:"lyecs-form-table"},we=L({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(k,{expose:C,emit:q}){const d=q,n=k;u(1);const p=u(!0),v=M().currentRoute.value.query,c=u(n.isDialog?n.act:String(v.act)),g=u(n.isDialog?n.id:Number(v.id)),x=c.value==="add"?"create":"update",b=h(),e=u({is_top:0,content:""}),B=async()=>{try{const a=await T(c.value,{id:g.value});a.item.product_id&&(a.item.product_id=[a.item.product_id]),Object.assign(e.value,a.item)}catch(a){m.error(a.message),d("close")}finally{p.value=!1}};j(()=>{c.value==="detail"?B():p.value=!1});const y=async()=>{if(await b.value.validate(),e.value.product_id&&e.value.product_id.length>0)e.value.product_id=e.value.product_id[0];else{m.error("请选择商品!");return}try{d("update:confirmLoading",!0);const a=await $(x,{id:g.value,...e.value});d("submitCallback",a),m.success(a.message)}catch(a){m.error(a.message)}finally{d("update:confirmLoading",!1)}};return C({onFormSubmit:()=>{y()}}),(a,t)=>{const s=i("el-form-item"),N=i("el-input"),w=i("el-radio"),D=i("el-radio-group"),R=i("el-button"),U=i("el-form"),F=i("a-spin");return V(),E("div",J,[f("div",K,[f("div",Q,[f("div",W,[p.value?A("",!0):(V(),I(U,{key:0,ref_key:"formRef",ref:b,model:e.value,"label-width":"auto"},{default:r(()=>[o(s,{label:"素材图片",prop:"pics",rules:[{required:!0,message:"素材图片不能为空!"}]},{default:r(()=>[o(S(P),{photos:e.value.pics,"onUpdate:photos":t[0]||(t[0]=l=>e.value.pics=l),isMultiple:""},null,8,["photos"])]),_:1}),o(s,{rules:[{required:!0,message:"素材内容不能为空!"}],label:"素材内容",prop:"content"},{default:r(()=>[o(N,{modelValue:e.value.content,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.content=l),rows:2,type:"textarea"},null,8,["modelValue"])]),_:1}),o(s,{label:"素材分类",prop:"category_id",rules:[{required:!0,message:"请选择素材分类!"}]},{default:r(()=>[o(z,{category_id:e.value.category_id,"onUpdate:category_id":t[2]||(t[2]=l=>e.value.category_id=l)},null,8,["category_id"])]),_:1}),o(s,{label:"选择商品",prop:"product_id",rules:[{required:!0,message:"请选择商品!"}]},{default:r(()=>[o(S(H),{isMultiple:!1,ids:e.value.product_id,"onUpdate:ids":t[3]||(t[3]=l=>e.value.product_id=l)},null,8,["ids"])]),_:1}),o(s,{label:"是否置顶",prop:"is_top"},{default:r(()=>[o(D,{modelValue:e.value.is_top,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.is_top=l)},{default:r(()=>[o(w,{value:1},{default:r(()=>t[5]||(t[5]=[_("置顶")])),_:1}),o(w,{value:0},{default:r(()=>t[6]||(t[6]=[_("不置顶")])),_:1})]),_:1},8,["modelValue"])]),_:1}),G(o(s,{"wrapper-col":{offset:4,span:16}},{default:r(()=>[o(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:y},{default:r(()=>t[7]||(t[7]=[_("提交")])),_:1},512)]),_:1},512),[[O,!n.isDialog]])]),_:1},8,["model"]))]),o(F,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{we as default};
