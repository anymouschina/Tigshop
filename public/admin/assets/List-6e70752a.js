/* empty css             */import"./index-6c62cf9b.js";import{d as q,j as m,I as L,x as O,r as i,o as f,c as g,e,b as o,w as s,f as d,h as b,K as y,H as _,G as w}from"./index-7c2d2aef.js";import{_ as j}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as E}from"./Pagination-8eb7b6b1.js";import{u as F}from"./config-9548fa9b.js";import{g as G,d as H,b as K}from"./subgroup-c0dd43e1.js";import{_ as C}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const M={class:"container"},T={class:"content_wrapper"},J={class:"lyecs-table-list-warp"},Q={class:"list-table-tool lyecs-search-warp",style:{"margin-bottom":"0px"}},R={class:"advanced-search-warp list-table-tool-row"},W={class:"simple-form-warp"},X={class:"simple-form-field"},Y={class:"form-group"},Z={class:"control-container"},ee=e("span",{class:"iconfont icon-chakan1"},null,-1),te={class:"simple-form-field"},oe={class:"form-group"},se={class:"control-container"},ae={class:"table-container"},ne={style:{position:"relative"}},le=e("a",{class:"btn-link"},"编辑",-1),ie={class:"empty-warp"},re={key:0,class:"empty-bg"},ce={key:0,class:"pagination-con"},de={key:0,class:"selected-action-warp"},_e={class:"selected-action"},Ce=q({__name:"List",setup(pe){const S=F(),k=m(),c=m(!0),p=m(0),u=m([]),l=L({page:1,size:S.get("page_size"),sort_field:"",sort_order:"",group_name:""}),r=async()=>{c.value=!0;try{const n=await G({...l});k.value=n.filter_result,p.value=n.total}catch(n){y.error(n.message)}finally{c.value=!1}};O(()=>{r()});const x=()=>{r()},z=({prop:n,order:t})=>{l.sort_field=n,l.sort_order=t=="ascending"?"asc":t=="descending"?"desc":"",r()},V=async n=>{try{const t=await K(n,{ids:u.value});y.success(t.message),r()}catch(t){y.error(t.message)}},B=n=>{u.value=n.map(t=>t.group_id)};return(n,t)=>{const v=i("el-button"),D=i("el-input"),I=i("el-form"),h=i("el-table-column"),N=i("el-divider"),A=i("el-table"),P=i("a-spin"),U=i("el-popconfirm"),$=i("el-space");return f(),g("div",M,[e("div",T,[e("div",J,[e("div",Q,[o(I,{model:l},{default:s(()=>[e("div",R,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[o(D,{name:"keyword",modelValue:l.group_name,"onUpdate:modelValue":t[0]||(t[0]=a=>l.group_name=a),placeholder:"输入分组名称"},{append:s(()=>[o(v,{onClick:x},{default:s(()=>[ee]),_:1})]),_:1},8,["modelValue"])])])]),e("div",te,[e("div",oe,[e("div",se,[o(d(C),{isDrawer:"",onOkCallback:r,title:"新建分组",width:"600px",path:"salesman/subgroup/Info",params:{act:"add"}},{default:s(()=>[o(v,{type:"primary"},{default:s(()=>[_("新建分组")]),_:1})]),_:1})])])])])])]),_:1},8,["model"])]),e("div",ae,[o(P,{spinning:c.value},{default:s(()=>[o(A,{data:k.value,"row-key":"group_id",onSelectionChange:B,total:p.value,onSortChange:z,loading:c.value},{empty:s(()=>[e("div",ie,[c.value?b("",!0):(f(),g("div",re,"暂无数据"))])]),default:s(()=>[o(h,{label:"分组名称",prop:"group_id",sortable:"custom"},{default:s(({row:a})=>[e("div",ne,[e("div",null,w(a.group_name),1)])]),_:1}),o(h,{label:"创建时间",prop:"is_show",sortable:"custom"},{default:s(({row:a})=>[e("div",null,w(a.add_time),1)]),_:1}),o(h,{label:"操作",fixed:"right",width:150},{default:s(({row:a})=>[o(d(C),{isDrawer:"",onOkCallback:r,title:"编辑分组",width:"600px",path:"salesman/subgroup/Info",params:{act:"detail",id:a.group_id}},{default:s(()=>[le]),_:2},1032,["params"]),o(N,{direction:"vertical"}),o(d(j),{onAfterDelete:r,requestApi:d(H),params:{id:a.group_id}},{default:s(()=>[_("删除")]),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),p.value>0?(f(),g("div",ce,[o(d(E),{page:l.page,"onUpdate:page":t[1]||(t[1]=a=>l.page=a),size:l.size,"onUpdate:size":t[2]||(t[2]=a=>l.size=a),total:p.value,onCallback:r},null,8,["page","size","total"])])):b("",!0)]),u.value.length>0?(f(),g("div",de,[e("div",_e,[o($,null,{default:s(()=>[e("span",null,[_("已选择："),e("b",null,w(u.value.length),1),_(" 项")]),o(U,{title:"您确认要批量删除所选数据吗？",onConfirm:t[3]||(t[3]=a=>V("del"))},{reference:s(()=>[o(v,null,{default:s(()=>[_("批量删除")]),_:1})]),_:1})]),_:1})])])):b("",!0)])])])}}});export{Ce as default};
