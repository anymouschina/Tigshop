import{d as x,i as c,C as B,s as L,q,r,c as A,o as g,e as w,j as I,f as T,b as t,w as l,a3 as U,E as j,a4 as E,I as p}from"./index-DrbzVNl6.js";import{a as F,c as M}from"./adminRole-DDtgoY2E.js";import O from"./AuthoritySelect-C_HT6Og3.js";import"./authority-C-nKXejU.js";const z={class:"container"},G={class:"content_wrapper"},H={class:"lyecs-form-table"},X=x({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:h,emit:N}){const i=N,s=V,u=c(!0),f=B().currentRoute.value.query,d=c(s.isDialog?s.act:String(f.act)),v=c(s.isDialog?s.id:Number(f.id)),k=d.value==="add"?"create":"update",_=L(),e=c({}),C=async()=>{try{const o=await F(d.value,{id:v.value});Object.assign(e.value,o)}catch(o){p.error(o.message),i("close")}finally{u.value=!1}};q(()=>{d.value==="detail"?C():u.value=!1});const b=async()=>{await _.value.validate();try{i("update:confirmLoading",!0);const o=await M(k,{id:v.value,...e.value});i("submitCallback",o),p.success("操作成功")}catch(o){p.error(o.message)}finally{i("update:confirmLoading",!1)}};return h({onFormSubmit:()=>{b()}}),(o,a)=>{const y=r("TigInput"),m=r("el-form-item"),D=r("el-button"),R=r("el-form"),S=r("a-spin");return g(),A("div",z,[w("div",G,[w("div",H,[u.value?T("",!0):(g(),I(R,{key:0,ref_key:"formRef",ref:_,model:e.value,"label-width":"auto"},{default:l(()=>[t(m,{rules:[{required:!0,message:"权限组名称不能为空!"}],label:"权限组名称",prop:"roleName"},{default:l(()=>[t(y,{width:"100%",modelValue:e.value.roleName,"onUpdate:modelValue":a[0]||(a[0]=n=>e.value.roleName=n)},null,8,["modelValue"])]),_:1}),t(m,{label:"权限组描述",prop:"roleDesc"},{default:l(()=>[t(y,{width:"100%",modelValue:e.value.roleDesc,"onUpdate:modelValue":a[1]||(a[1]=n=>e.value.roleDesc=n),row:3,type:"textarea"},null,8,["modelValue"])]),_:1}),t(m,{label:"",prop:"authorityList"},{default:l(()=>[t(O,{modelValue:e.value.authorityList,"onUpdate:modelValue":a[2]||(a[2]=n=>e.value.authorityList=n)},null,8,["modelValue"])]),_:1}),U(t(m,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(D,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:b},{default:l(()=>a[3]||(a[3]=[j("提交")])),_:1},512)]),_:1},512),[[E,!s.isDialog]])]),_:1},8,["model"])),t(S,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{X as default};
