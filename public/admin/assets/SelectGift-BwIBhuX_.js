import{d as A,i as f,G as D,q as E,r,c as d,o as u,e as a,b as o,w as s,M as L,f as z,n as j,g as x,D as w,F as q,a as O,I as H,_ as J}from"./index-CGYuOau0.js";/* empty css             *//* empty css                                                                    */import{P as K}from"./Pagination-yOfjsBuR.js";import{i as Q}from"./format-DFT-VJzO.js";import{g as W}from"./productGift-D8jyyss5.js";import{u as X}from"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";const Y={class:"container"},Z={class:"content_wrapper"},$={class:"lyecs-table-list-warp"},ee={class:"list-table-tool lyecs-search-warp"},te={class:"list-table-tool-row"},oe={class:"list-table-tool-col"},le={class:"table-container"},ae={class:"product-info"},se=["src"],ne={key:0},ie={class:"product-info"},ce={key:1},re={class:"empty-warp"},de={key:0,class:"empty-bg"},ue={key:0,class:"pagination-con"},pe=A({__name:"SelectGift",props:{selected_ids:{type:Array,default:[]},modelValue:{type:Object,default:{}},isMultiple:{type:Boolean,default:!1}},emits:["submitCallback","okType","update:modelValue"],setup(S,{expose:M,emit:F}){const v=S,p=F;p("okType",!1);const n=f([]),B=X(),C=f(),_=f(!0),g=f(0),i=D({page:1,size:B.get("page_size"),sort_field:"",sort_order:"",keyword:""}),b=async()=>{_.value=!0;try{const l=await W({...i});C.value=l.filter_result,g.value=l.total}catch(l){H.error(l.message)}finally{_.value=!1}};E(()=>{b()});const h=()=>{b()},y=f(),G=l=>{v.isMultiple&&(l.forEach(e=>{const c=new Set(n.value);c.add(e),n.value=Array.from(c)}),p("okType",n.value.length>0))},I=(l,e)=>{if(!v.isMultiple){if(y.value.clearSelection(),l.length==0){n.value=[];return}y.value.toggleRowSelection(e,!0),n.value.length=0,n.value.push(e),p("okType",n.value.length>0)}p("update:modelValue",e)},P=(l,e)=>{let c=[];return v.selected_ids.map(k=>{c.push(k.gift_id)}),!c.includes(l.gift_id)};return M({onFormSubmit:()=>{p("submitCallback",n.value)}}),(l,e)=>{const c=r("el-button"),k=r("el-input"),R=r("el-space"),T=r("el-form"),m=r("el-table-column"),N=r("el-table"),U=r("a-spin");return u(),d("div",Y,[a("div",Z,[a("div",$,[a("div",ee,[o(T,{model:i,onSubmit:L(h,["prevent"])},{default:s(()=>[a("div",te,[a("div",oe,[o(R,null,{default:s(()=>[o(k,{name:"keyword",modelValue:i.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>i.keyword=t),placeholder:"输入赠品名称",clearable:"",onClear:h},{append:s(()=>[o(c,{onClick:h},{default:s(()=>e[3]||(e[3]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1},8,["model"])]),a("div",le,[o(U,{spinning:_.value},{default:s(()=>[o(N,{ref_key:"tableRef",ref:y,class:j([S.isMultiple?"":"hide-checkbox","result-table"]),data:C.value,loading:_.value,total:g.value,"row-key":"gift_id",onSelect:I,onSelectionChange:G},{empty:s(()=>[a("div",re,[_.value?z("",!0):(u(),d("div",de,"暂无数据"))])]),default:s(()=>[o(m,{selectable:P,type:"selection",width:"32"}),o(m,{label:"赠品名称",prop:"gift_name",width:"120"}),o(m,{label:"商品信息",prop:"product_name"},{default:s(({row:t})=>[a("div",ae,[a("img",{src:x(Q)(t.product_info.pic_thumb),height:"50",width:"50"},null,8,se),a("p",null,w(t.product_info.product_name),1)])]),_:1}),o(m,{label:"商品规格",prop:"product_sku"},{default:s(({row:t})=>[t.sku_info&&t.sku_info.sku_data.length>0?(u(),d("div",ne,[(u(!0),d(q,null,O(t.sku_info.sku_data,V=>(u(),d("div",ie,w(V.name)+": "+w(V.value),1))),256))])):(u(),d("div",ce,"--"))]),_:1}),o(m,{label:"赠品库存",prop:"gift_stock",sortable:"custom"})]),_:1},8,["class","data","loading","total"])]),_:1},8,["spinning"]),g.value>0?(u(),d("div",ue,[o(x(K),{page:i.page,"onUpdate:page":e[1]||(e[1]=t=>i.page=t),size:i.size,"onUpdate:size":e[2]||(e[2]=t=>i.size=t),total:g.value,onCallback:b},null,8,["page","size","total"])])):z("",!0)])])])])}}}),we=J(pe,[["__scopeId","data-v-f5fc7c80"]]);export{we as default};
