import{d as T,i as f,C as j,s as $,G as k,q as z,I as g,r as s,c as F,o as C,e as v,j as G,f as I,w as l,b as a,a0 as M,g as O,E as i,a1 as A}from"./index-CGYuOau0.js";import{a as H,c as J}from"./languagesList-4F0M2hMq.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              *//* empty css             */import{_ as K}from"./SelectLocaleCode.vue_vue_type_script_setup_true_lang-DKEIzIR-.js";import"./time-ClyPenjC.js";import"./verbalAssociation-DIcWwhGG.js";const P={class:"container"},Q={class:"content_wrapper"},W={class:"lyecs-form-table"},ne=T({__name:"ExchangeRate",props:{id:{type:Number,default:0},promotion_type:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(S,{expose:q,emit:N}){const d=N,u=S,c=f(!0),b=j().currentRoute.value.query,_=f(u.isDialog?u.act:String(b.act)),y=f(u.isDialog?u.id:Number(b.id)),B=_.value==="add"?"create":"update",V=$(),t=f({language:"",locale_code:"",is_enabled:0,is_default:0});k({page:1,size:9999,sort_field:"",sort_order:"",keyword:""}),z(()=>{_.value==="detail"?L():c.value=!1});const L=async()=>{try{const o=await H(_.value,{id:y.value});Object.assign(t.value,o.item)}catch(o){g.error(o.message),d("close")}finally{c.value=!1}},w=async()=>{await V.value.validate();try{d("update:confirmLoading",!0);const o=await J(B,{id:y.value,...t.value});d("submitCallback",o),g.success(o.message)}catch(o){g.error(o.message)}finally{d("update:confirmLoading",!1)}},R=()=>{w()},D=k({promotion_name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],send_type:[{required:!0,validator:(o,e,m)=>{if(!t.value.language&&!t.value.language){m(new Error("请输入用券时间"));return}m()},trigger:"blur"}]});return q({onFormSubmit:R}),(o,e)=>{const m=s("el-input"),n=s("el-form-item"),p=s("el-radio"),x=s("el-radio-group"),E=s("el-button"),U=s("el-form");return C(),F("div",P,[v("div",Q,[v("div",W,[c.value?I("",!0):(C(),G(U,{key:0,ref_key:"formRef",ref:V,rules:D,model:t.value,"label-width":"auto"},{default:l(()=>[a(n,{prop:"language",label:"语言名称：",rules:[{required:!0,message:"语言名称不能为空!"}]},{default:l(()=>[a(m,{type:"text",maxlength:"60",modelValue:t.value.language,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value.language=r)},null,8,["modelValue"])]),_:1}),a(n,{prop:"locale_code",label:"语言识别码：",rules:[{required:!0,message:"请选择语言识别码!"}]},{default:l(()=>[a(O(K),{modelValue:t.value.locale_code,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.locale_code=r)},null,8,["modelValue"]),e[5]||(e[5]=v("div",{class:"extra"},"请选择关联语言，语言类型是由您自行添加的",-1))]),_:1}),a(n,{prop:"is_enabled",label:"是否启用："},{default:l(()=>[a(x,{modelValue:t.value.is_enabled,"onUpdate:modelValue":e[2]||(e[2]=r=>t.value.is_enabled=r)},{default:l(()=>[a(p,{value:1},{default:l(()=>e[6]||(e[6]=[i("是")])),_:1}),a(p,{value:0},{default:l(()=>e[7]||(e[7]=[i("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(n,{prop:"is_default",label:"是否默认："},{default:l(()=>[a(x,{modelValue:t.value.is_default,"onUpdate:modelValue":e[3]||(e[3]=r=>t.value.is_default=r)},{default:l(()=>[a(p,{value:1},{default:l(()=>e[8]||(e[8]=[i("是")])),_:1}),a(p,{value:0},{default:l(()=>e[9]||(e[9]=[i("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),M(a(n,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[a(E,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:e[4]||(e[4]=r=>w())},{default:l(()=>e[10]||(e[10]=[i("提交")])),_:1},512)]),_:1},512),[[A,!u.isDialog]])]),_:1},8,["rules","model"]))])])])}}});export{ne as default};
