import{d as T,i as d,C as M,s as z,q as A,r as u,c as D,o as r,e as p,j as c,f as L,b as l,w as o,a0 as G,g as H,F as J,a as K,E as m,a1 as Q,I as g}from"./index-CGYuOau0.js";import{a as W,c as X,e as Y}from"./pcNavigation-B90kf6yK.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{S as Z}from"./SelectLink-7bDF6pPk.js";/* empty css             */import{S as $}from"./SelectIco-CyYwvohC.js";import"./time-ClyPenjC.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";const h={class:"container"},ee={class:"content_wrapper"},te={class:"lyecs-form-table"},ye=T({__name:"Info",props:{id:{type:Number,default:0},type:{type:Number,default:0},type_name:{type:String,default:""},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(V,{expose:R,emit:q}){const f=q,i=V,v=d(!0),k=M().currentRoute.value.query,y=d(i.isDialog?i.act:String(k.act)),w=d(i.isDialog?i.id:Number(k.id)),S=y.value==="add"?"create":"update",N=z(),t=d({type:i.type,is_show:1,is_blank:0}),F=async()=>{try{const n=await W(y.value,{id:w.value});Object.assign(t.value,n.item),S==="create"&&(t.value.type=i.type,t.value.type_name=i.type_name),I(t.value.type)}catch(n){g.error(n.message),f("close")}finally{v.value=!1}},x=d([]),I=async n=>{const e=await X({type:n});x.value.push(...e.filter_result)};A(()=>{y.value==="detail"?F():v.value=!1});const C=async()=>{await N.value.validate();try{f("update:confirmLoading",!0);const n=await Y(S,{id:w.value,...t.value});f("submitCallback",n),g.success(n.message)}catch(n){g.error(n.message)}finally{f("update:confirmLoading",!1)}};return R({onFormSubmit:()=>{C()}}),(n,e)=>{const b=u("el-input"),s=u("el-form-item"),U=u("el-option"),P=u("el-select"),_=u("el-radio"),B=u("el-radio-group"),O=u("el-button"),j=u("el-form"),E=u("a-spin");return r(),D("div",h,[p("div",ee,[p("div",te,[v.value?L("",!0):(r(),c(j,{key:0,ref_key:"formRef",ref:N,model:t.value,"label-width":"auto"},{default:o(()=>[l(s,{rules:[{required:!0,message:"名称不能为空!"}],label:"名称",prop:"title"},{default:o(()=>[l(b,{modelValue:t.value.title,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.title=a)},null,8,["modelValue"])]),_:1}),l(s,{label:"链接地址",prop:"link"},{default:o(()=>[l(H(Z),{modelValue:t.value.link,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.link=a)},null,8,["modelValue"])]),_:1}),l(s,{label:"ICO编码",prop:"icon"},{default:o(()=>[l($,{modelValue:t.value.icon,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.icon=a)},null,8,["modelValue"]),e[8]||(e[8]=p("div",{class:"extra"},'请先在Tigshop设置中的"接口设置"中设置"ico图标库地址"',-1))]),_:1}),V.type===2?(r(),c(s,{key:0,label:"上级导航",prop:"parent_id"},{default:o(()=>[l(P,{style:{width:"100%"},modelValue:t.value.parent_id,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.parent_id=a)},{default:o(()=>[(r(),c(U,{label:"顶级导航",value:0,key:0})),(r(!0),D(J,null,K(x.value,a=>(r(),c(U,{label:a.title,value:a.id,key:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e[9]||(e[9]=p("div",{class:"extra"},"请选择相对应位置的导航，如果父导航为中间导航，那该导航必须同样设置为中间导航才会生效；",-1)),e[10]||(e[10]=p("div",{class:"extra"},"默认不选则表示为顶级导航",-1))]),_:1})):L("",!0),l(s,{label:"位置",prop:"type_name"},{default:o(()=>[l(b,{disabled:"",modelValue:t.value.type_name,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.type_name=a)},null,8,["modelValue"])]),_:1}),l(s,{label:"排序",prop:"sort_order"},{default:o(()=>[l(b,{modelValue:t.value.sort_order,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.sort_order=a)},null,8,["modelValue"])]),_:1}),l(s,{label:"是否显示",prop:"is_show"},{default:o(()=>[l(B,{modelValue:t.value.is_show,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.is_show=a)},{default:o(()=>[l(_,{value:1},{default:o(()=>e[11]||(e[11]=[m("是")])),_:1}),l(_,{value:0},{default:o(()=>e[12]||(e[12]=[m("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"是否新窗口",prop:"is_blank"},{default:o(()=>[l(B,{modelValue:t.value.is_blank,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.is_blank=a)},{default:o(()=>[l(_,{value:1},{default:o(()=>e[13]||(e[13]=[m("是")])),_:1}),l(_,{value:0},{default:o(()=>e[14]||(e[14]=[m("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),G(l(s,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[l(O,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:C},{default:o(()=>e[15]||(e[15]=[m("提交")])),_:1},512)]),_:1},512),[[Q,!i.isDialog]])]),_:1},8,["model"])),l(E,{spinning:v.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ye as default};
