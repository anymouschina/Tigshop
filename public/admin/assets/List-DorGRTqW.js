import{d as K,C as A,i as p,G as Q,q as H,aQ as J,c as _,e as s,f as m,b as o,w as a,L as W,n as x,g as v,I as V,r as i,o as r,E as c,D as u,j as U,_ as X}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";/* empty css                                                                    */import{P as Y}from"./Pagination-yOfjsBuR.js";import{p as z}from"./format-DFT-VJzO.js";import{_ as Z}from"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import{u as ee}from"./config-DNllFJyR.js";import{b as te,c as se}from"./shop-Daw3OFCx.js";import{S as $}from"./StatusDot-YMdUi2kT.js";import{_ as oe}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const ae={class:"container"},le={class:"content_wrapper"},ne={class:"container"},ie={class:"lyecs-table-list-warp"},re={class:"list-table-tool lyecs-search-warp"},ce={class:"advanced-search-warp list-table-tool-row"},de={class:"simple-form-warp"},ue={class:"simple-form-field"},pe={class:"form-group"},_e={class:"control-container"},me={class:"simple-form-field"},fe={class:"form-group"},ve={class:"tabs flex"},ge={key:0},be={class:"simple-form-field"},he={class:"form-group"},ye={class:"control-container"},ke={class:"simple-form-field"},we={class:"table-container"},Ce={key:2,style:{color:"red"}},Se={key:3,style:{color:"green"}},xe={class:"empty-warp"},Ve={key:0,class:"empty-bg"},ze={key:0,class:"pagination-con"},Be={key:0,class:"selected-action-warp"},Le={class:"selected-action"},Ue=K({__name:"List",setup($e){const b=A().currentRoute.value.query,O=ee(),B=p([]),g=p(!1),h=p(0),y=p([]),N=p(!1),l=Q({page:1,size:O.get("page_size"),sort_field:"",sort_order:"",keyword:"",status:0}),w=n=>{l.status=n,f()},f=async()=>{g.value=!0;try{const n=await te({...l});B.value=n.filter_result,h.value=n.total}catch(n){V.error(n.message)}finally{g.value=!1}},D=()=>{let n=window.location.href,e=new URL(n);e.search="",window.history.replaceState({},document.title,e.toString())},P=p(),L=p(0);H(()=>{f(),console.log(b),b.id&&J.confirm(`为[${b.company_name||"--"}]立即创建店铺?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{L.value=Number(b.id),P.value.show()}).catch(()=>{L.value=0,D()})});const k=()=>{f()},q=({prop:n,order:e})=>{l.sort_field=n,l.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",f()},E=async n=>{try{const e=await se(n,{ids:y.value});V.success(e.message),f()}catch(e){V.error(e.message)}},F=n=>{y.value=n.map(e=>e.shop_id)};return(n,e)=>{const C=i("el-button"),I=i("el-input"),S=i("el-option"),M=i("el-select"),d=i("el-table-column"),R=i("el-table"),T=i("a-spin"),j=i("el-popconfirm"),G=i("el-space");return r(),_("div",ae,[s("div",le,[s("div",ne,[s("div",ie,[s("div",re,[s("div",ce,[s("div",de,[s("div",ue,[s("div",pe,[s("div",_e,[o(I,{modelValue:l.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>l.keyword=t),name:"username",placeholder:"输入店铺名称",onKeyup:W(k,["enter"]),clearable:"",onClear:k},{append:a(()=>[o(C,{onClick:k},{default:a(()=>e[8]||(e[8]=[s("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),s("div",me,[s("div",fe,[s("div",ve,[s("div",{class:x(["item",l.status==0?"active":""]),onClick:e[1]||(e[1]=t=>w(0))},"全部",2),s("div",{class:x(["item",l.status==1?"active":""]),onClick:e[2]||(e[2]=t=>w(1))},"开业",2),s("div",{class:x(["item",l.status==10?"active":""]),onClick:e[3]||(e[3]=t=>w(10))},"关店",2)])])]),N.value?(r(),_("div",ge,[s("div",be,[s("div",he,[e[9]||(e[9]=s("label",{class:"control-label"},[s("span",null,"店铺状态：")],-1)),s("div",ye,[o(M,{modelValue:l.status,"onUpdate:modelValue":e[4]||(e[4]=t=>l.status=t),clearable:""},{default:a(()=>[o(S,{value:0,label:"全部"}),o(S,{value:1,label:"运营中"}),o(S,{value:10,label:"关闭"})]),_:1},8,["modelValue"])])])]),s("div",ke,[o(C,{type:"primary",onClick:k},{default:a(()=>e[10]||(e[10]=[c("搜索")])),_:1})])])):m("",!0)])])]),s("div",we,[o(T,{spinning:g.value},{default:a(()=>[o(R,{data:B.value,loading:g.value,total:h.value,"row-key":"shop_id",onSelectionChange:F,onSortChange:q},{empty:a(()=>[s("div",xe,[g.value?m("",!0):(r(),_("div",Ve,"暂无数据"))])]),default:a(()=>[o(d,{label:"店铺名称"},{default:a(({row:t})=>[c(u(t.shop_title||"--"),1)]),_:1}),o(d,{label:"店铺LOGO"},{default:a(({row:t})=>[o(v(Z),{src:t.shop_logo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),o(d,{label:"店铺状态"},{default:a(({row:t})=>[t.status==10?(r(),U($,{key:0,color:"red",flicker:!0})):m("",!0),t.status==1?(r(),U($,{key:1,color:"green",flicker:!0})):m("",!0),t.status===10?(r(),_("span",Ce,u(t.status_text),1)):t.status===1?(r(),_("span",Se,u(t.status_text),1)):m("",!0)]),_:1}),o(d,{label:"店铺资金",sortable:"custom"},{default:a(({row:t})=>[c(u(v(z)(t.shop_money)||0),1)]),_:1}),o(d,{label:"待结算金额",sortable:"custom"},{default:a(({row:t})=>[c(u(v(z)(t.un_settlement_order)||0),1)]),_:1}),o(d,{label:"不可用资金",sortable:"custom"},{default:a(({row:t})=>[c(u(v(z)(t.frozen_money)||0),1)]),_:1}),o(d,{label:"开店时间"},{default:a(({row:t})=>[c(u(t.add_time),1)]),_:1}),o(d,{width:120,fixed:"right",label:"操作"},{default:a(({row:t})=>[o(v(oe),{params:{shop_id:t.shop_id},showClose:!1,showOnOk:!1,isDrawer:"",path:"shop/financialLog/List",title:"资金日志",width:"800px"},{default:a(()=>e[11]||(e[11]=[s("a",{class:"btn-link"},"查看资金日志",-1)])),_:2},1032,["params"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),h.value>0?(r(),_("div",ze,[o(v(Y),{page:l.page,"onUpdate:page":e[5]||(e[5]=t=>l.page=t),size:l.size,"onUpdate:size":e[6]||(e[6]=t=>l.size=t),total:h.value,onCallback:f},null,8,["page","size","total"])])):m("",!0)]),y.value.length>0?(r(),_("div",Be,[s("div",Le,[o(G,null,{default:a(()=>[s("span",null,[e[12]||(e[12]=c("已选择：")),s("b",null,u(y.value.length),1),e[13]||(e[13]=c(" 项"))]),o(j,{title:"您确认要批量删除所选数据吗？",onConfirm:e[7]||(e[7]=t=>E("del"))},{reference:a(()=>[o(C,null,{default:a(()=>e[14]||(e[14]=[c("批量删除")])),_:1})]),_:1})]),_:1})])])):m("",!0)])])])])}}}),Ge=X(Ue,[["__scopeId","data-v-58c72ed2"]]);export{Ge as default};
