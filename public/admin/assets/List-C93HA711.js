import{d as $,K as D,i as m,G as L,q as E,c as C,e as l,b as t,w as n,f as g,g as o,I as _,r as p,o as u,E as q,M as j,D as G,j as b,_ as H}from"./index-DrbzVNl6.js";/* empty css             */import{M as T}from"./index-CeQDmMxd.js";import{_ as v}from"./Switch.vue_vue_type_script_setup_true_lang-C5nzofSO.js";/* empty css                                                                    */import{P as J}from"./Pagination-wR9huHyl.js";import{g as Q,u as k,m as R,w as X}from"./messageType-BKBnwqnP.js";import{P as Y}from"./PopFormElm-BZp1_Wme.js";import{_ as Z}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const ee={class:"container"},ae={class:"content_wrapper"},te={class:"lyecs-form-table"},se={class:"table-container"},ne={class:"empty-warp"},le={key:0,class:"empty-bg"},oe={key:0,class:"pagination-con"},ie=$({__name:"List",setup(re){const A=D(),I=m([]),f=m(!0),y=m(0),P=m([]);m(!1);const i=L({page:1,size:A.get("pageSize"),sortField:"",sortOrder:"",keyword:"",sendType:1}),U=m(1),S=s=>{console.log(s),i.sendType=s,d()},d=async()=>{f.value=!0;try{const s=await Q({...i});I.value=s.records,y.value=s.total}catch(s){_.error(s.message)}finally{f.value=!1}};E(()=>{d()});const w=async()=>{T.confirm({title:"您确认要生成小程序消息模板吗？",onOk:async()=>{try{const s=await R();_.success("操作成功"),d()}catch(s){_.error(s.message)}finally{}}})},x=async()=>{T.confirm({title:"您确认要生成公众号模板消息吗？",onOk:async()=>{try{const s=await X();_.success("操作成功"),d()}catch(s){_.error(s.message)}finally{}}})},h=()=>{d()},z=({prop:s,order:a})=>{i.sortField=s,i.sortOrder=a=="ascending"?"asc":a=="descending"?"desc":"",d()},F=s=>{P.value=s.map(a=>a.messageId)};return(s,a)=>{const V=p("el-tab-pane"),M=p("el-button"),O=p("TigInput"),W=p("el-space"),B=p("el-tabs"),c=p("el-table-column"),K=p("el-table"),N=p("a-spin");return u(),C("div",ee,[l("div",ae,[l("div",te,[a[10]||(a[10]=l("div",{class:"notice-warp"},[l("strong",null," 模板行业选择"),l("p",null,"主营行业：根据您的主营行业选择适合的服务类目"),l("p",null,"副营行业：商业服务 -> 软件/建站/技术开发"),l("strong",null," 生成小程序消息模板"),l("p",null,"请先添加服务类目《商业服务->软件/建站/技术开发》，否则模板导入不成功，点击会自动删除原有的小程序模板并生成新的模板！"),l("strong",null," 生成公众号模板消息"),l("p",null,"请先添加服务类目《商业服务->软件/建站/技术开发》，否则模板导入不成功，点击会自动删除原有的公众号模板并生成新的模板！")],-1)),t(B,{modelValue:U.value,"onUpdate:modelValue":a[3]||(a[3]=e=>U.value=e),class:"lyecs-tabs","tab-position":"top",onTabChange:S},{default:n(()=>[t(V,{label:"发送给用户",name:1}),t(V,{label:"发送给商家",name:2}),l("div",null,[t(W,null,{default:n(()=>[t(M,{type:"primary",onClick:a[0]||(a[0]=e=>w())},{default:n(()=>a[6]||(a[6]=[q("生成小程序消息模板")])),_:1}),t(M,{type:"warning",onClick:a[1]||(a[1]=e=>x())},{default:n(()=>a[7]||(a[7]=[q("生成公众号模板消息")])),_:1}),t(O,{modelValue:i.keyword,"onUpdate:modelValue":a[2]||(a[2]=e=>i.keyword=e),placeholder:"输入关键字",onKeyup:j(h,["enter"]),clearable:"",onClear:h},{append:n(()=>[t(M,{onClick:h},{default:n(()=>a[8]||(a[8]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1},8,["modelValue"]),l("div",se,[t(N,{spinning:f.value},{default:n(()=>[t(K,{data:I.value,loading:f.value,total:y.value,"row-key":"messageId",onSelectionChange:F,onSortChange:z},{empty:n(()=>[l("div",ne,[f.value?g("",!0):(u(),C("div",le,"暂无数据"))])]),default:n(()=>[t(c,{label:"消息类型",prop:"name"},{default:n(({row:e})=>[t(o(Y),{"org-value":e.name,"onUpdate:orgValue":r=>e.name=r,params:{id:e.messageId,field:"name"},requestApi:o(k),label:"消息类型",type:"input"},{default:n(()=>[l("div",null,G(e.name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),t(c,{label:"消息描述",prop:"describe"}),t(c,{label:"站内信",width:"100"},{default:n(({row:e})=>[e.isMessage>-1?(u(),b(o(v),{key:0,checked:e.isMessage,"onUpdate:checked":r=>e.isMessage=r,params:{id:e.messageId,field:"isMessage"},requestApi:o(k)},null,8,["checked","onUpdate:checked","params","requestApi"])):g("",!0)]),_:1}),t(c,{label:"短信",width:"100"},{default:n(({row:e})=>[e.isMsg>-1?(u(),b(o(v),{key:0,checked:e.isMsg,"onUpdate:checked":r=>e.isMsg=r,params:{id:e.messageId,field:"isMsg"},requestApi:o(k)},null,8,["checked","onUpdate:checked","params","requestApi"])):g("",!0)]),_:1}),t(c,{label:"公众号",width:"100"},{default:n(({row:e})=>[e.isWechat>-1?(u(),b(o(v),{key:0,checked:e.isWechat,"onUpdate:checked":r=>e.isWechat=r,params:{id:e.messageId,field:"isWechat"},requestApi:o(k)},null,8,["checked","onUpdate:checked","params","requestApi"])):g("",!0)]),_:1}),t(c,{label:"小程序",width:"100"},{default:n(({row:e})=>[e.isMiniProgram>-1?(u(),b(o(v),{key:0,checked:e.isMiniProgram,"onUpdate:checked":r=>e.isMiniProgram=r,params:{id:e.messageId,field:"isMiniProgram"},requestApi:o(k)},null,8,["checked","onUpdate:checked","params","requestApi"])):g("",!0)]),_:1}),t(c,{width:100,fixed:"right",label:"操作"},{default:n(({row:e})=>[t(o(Z),{params:{act:"detail",id:e.messageId},isDrawer:"",path:"setting/config/messageType/Info",title:"编辑消息设置",width:"700px",onOkCallback:d},{default:n(()=>a[9]||(a[9]=[l("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),y.value>0?(u(),C("div",oe,[t(o(J),{page:i.page,"onUpdate:page":a[4]||(a[4]=e=>i.page=e),size:i.size,"onUpdate:size":a[5]||(a[5]=e=>i.size=e),total:y.value,onCallback:d},null,8,["page","size","total"])])):g("",!0)])])])])}}}),ye=H(ie,[["__scopeId","data-v-d420528f"]]);export{ye as default};
