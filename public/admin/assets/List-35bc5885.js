import{d as O,j as f,I as $,x as F,r as p,o as h,c as v,e,b as t,w as o,f as n,h as y,K as k,L as K,H as u,G as V}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{P as j}from"./PopFormElm-61cd9b7d.js";import{_ as E}from"./Switch.vue_vue_type_script_setup_true_lang-95245cd7.js";import{_ as G}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as H}from"./Pagination-8eb7b6b1.js";import{u as M}from"./config-9548fa9b.js";import{g as T,u as U,d as J,b as Q}from"./suppliers-91530952.js";import{_ as w}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const R={class:"container"},W={class:"content_wrapper"},X={class:"lyecs-table-list-warp"},Y={class:"list-table-tool lyecs-search-warp"},Z=e("div",{class:"notice-warp"},[e("p",null,"- 添加供应商后，您可以在商品编辑中，设置商品所属供应商"),e("p",null,"- 供应商可通过其管理员账号，登录管理员后台，权限默认为处理订单和退货"),e("p",null,"- 供应商只能看到有自己所属商品的订单，且只能对其所属商品进行发货操作")],-1),ee={class:"advanced-search-warp list-table-tool-row"},te={class:"simple-form-warp"},se={class:"simple-form-field"},ae={class:"form-group"},oe={class:"control-container"},le=e("span",{class:"iconfont icon-chakan1"},null,-1),ie={class:"simple-form-field"},ne={class:"form-group"},re={class:"control-container"},pe={class:"simple-form-field"},ce={class:"form-group"},de={class:"control-container"},_e={key:0},ue={class:"table-container"},me=e("a",{class:"btn-link"},"编辑",-1),fe=e("a",{class:"btn-link"},"账号管理",-1),he={class:"empty-warp"},ve={key:0,class:"empty-bg"},ge={key:0,class:"pagination-con"},Pe=O({__name:"List",setup(be){const z=M(),C=f([]),d=f(!0),m=f(0),_=f([]),i=$({page:1,size:z.get("page_size"),sort_field:"",sort_order:"",keyword:""}),r=async()=>{d.value=!0;try{const l=await T({...i});C.value=l.filter_result,m.value=l.total}catch(l){k.error(l.message)}finally{d.value=!1}};F(()=>{r()});const S=()=>{r()},A=({prop:l,order:a})=>{i.sort_field=l,i.sort_order=a=="ascending"?"asc":a=="descending"?"desc":"",r()},q=async l=>{try{const a=await Q(l,{ids:_.value});k.success(a.message),r()}catch(a){k.error(a.message)}},D=l=>{_.value=l.map(a=>a.suppliers_id)};return(l,a)=>{const g=p("el-button"),P=p("el-input"),B=p("el-popconfirm"),I=p("el-form"),c=p("el-table-column"),x=p("el-divider"),L=p("el-table"),N=p("a-spin");return h(),v("div",R,[e("div",W,[e("div",X,[e("div",Y,[Z,t(I,{model:i},{default:o(()=>[e("div",ee,[e("div",te,[e("div",se,[e("div",ae,[e("div",oe,[t(P,{modelValue:i.keyword,"onUpdate:modelValue":a[0]||(a[0]=s=>i.keyword=s),name:"keyword",placeholder:"输入关键词",onKeyup:K(S,["enter"])},{append:o(()=>[t(g,{onClick:S},{default:o(()=>[le]),_:1})]),_:1},8,["modelValue"])])])]),e("div",ie,[e("div",ne,[e("div",re,[t(n(w),{params:{act:"add"},isDrawer:"",path:"authority/suppliers/Info",title:"添加供应商",width:"600px",onOkCallback:r},{default:o(()=>[t(g,{type:"primary"},{default:o(()=>[u("添加供应商")]),_:1})]),_:1})])])]),e("div",pe,[e("div",ce,[e("div",de,[t(B,{title:"您确认要批量删除所选数据吗？",onConfirm:a[1]||(a[1]=s=>q("del"))},{reference:o(()=>[t(g,{disabled:_.value.length===0},{default:o(()=>[u("批量删除")]),_:1},8,["disabled"])]),_:1}),_.value.length>0?(h(),v("span",_e,[u(" 已选择："),e("b",null,V(_.value.length),1),u(" 项 ")])):y("",!0)])])])])])]),_:1},8,["model"])]),e("div",ue,[t(N,{spinning:d.value},{default:o(()=>[t(L,{data:C.value,loading:d.value,total:m.value,"row-key":"suppliers_id",onSelectionChange:D,onSortChange:A},{empty:o(()=>[e("div",he,[d.value?y("",!0):(h(),v("div",ve,"暂无数据"))])]),default:o(()=>[t(c,{type:"selection",width:"32"}),t(c,{label:"供应商名称",width:"200"},{default:o(({row:s})=>[t(n(j),{"org-value":s.suppliers_name,"onUpdate:orgValue":b=>s.suppliers_name=b,max:10,params:{id:s.suppliers_id,field:"suppliers_name"},requestApi:n(U),label:"权限组名称",type:"input"},{default:o(()=>[e("div",null,V(s.suppliers_name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),t(c,{label:"负责人姓名",prop:"contact_name"}),t(c,{label:"负责人联系方式",prop:"contact_phone"}),t(c,{label:"供应商状态"},{default:o(({row:s})=>[t(n(E),{checked:s.is_check,"onUpdate:checked":b=>s.is_check=b,params:{id:s.suppliers_id,field:"is_check"},requestApi:n(U)},null,8,["checked","onUpdate:checked","params","requestApi"])]),_:1}),t(c,{width:180,fixed:"right",label:"操作"},{default:o(({row:s})=>[t(n(w),{params:{act:"detail",id:s.suppliers_id},isDrawer:"",path:"authority/suppliers/Info",title:"编辑供应商",width:"600px",onOkCallback:r},{default:o(()=>[me]),_:2},1032,["params"]),t(x,{direction:"vertical"}),t(n(w),{params:{act:"suppliers",id:s.suppliers_id},showOnOk:!1,isDrawer:"",path:"authority/adminUser/List",title:s.suppliers_name+" - 账号管理",width:"1000px"},{default:o(()=>[fe]),_:2},1032,["params","title"]),t(x,{direction:"vertical"}),t(n(G),{params:{id:s.suppliers_id},requestApi:n(J),onAfterDelete:r},{default:o(()=>[u("删除 ")]),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),m.value>0?(h(),v("div",ge,[t(n(H),{page:i.page,"onUpdate:page":a[2]||(a[2]=s=>i.page=s),size:i.size,"onUpdate:size":a[3]||(a[3]=s=>i.size=s),total:m.value,onCallback:r},null,8,["page","size","total"])])):y("",!0)])])])])}}});export{Pe as default};
