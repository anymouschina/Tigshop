import{d as D,i as c,C as R,s as U,q,I as f,r as d,c as V,o as w,e as k,f as L,b as a,w as s,a0 as E,E as F,a1 as j}from"./index-CGYuOau0.js";import{c as M,e as O}from"./articleCategory-BYgmIQPq.js";import{S as T}from"./SelectArticleCategory-DfRIn8M4.js";/* empty css                                                                              */const h={class:"container"},z={class:"content_wrapper"},G={key:0,class:"lyecs-form-table"},W=D({__name:"Info",props:{id:{type:Number,default:0},parentId:{type:Array,default:[]},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(_,{expose:C,emit:x}){const u=x,r=_,i=c(!0),v=R().currentRoute.value.query,m=c(r.isDialog?r.act:String(v.act)),y=c(r.isDialog?r.id:Number(v.id)),S=m.value==="add"?"create":"update",g=U(),e=c({article_category_name:"",parent_id:r.parentId,keywords:"",description:"",sort_order:50});q(()=>{m.value==="detail"?I():i.value=!1});const I=async()=>{try{i.value=!0;const o=await M(m.value,{id:y.value});Object.assign(e.value,o.item),r.parentId&&(e.value.parent_id=r.parentId)}catch(o){f.error(o.message),u("close")}finally{i.value=!1}},b=async()=>{await g.value.validate();try{u("update:confirmLoading",!0);const o=await O(S,{id:y.value,...e.value});u("submitCallback",o),f.success(o.message)}catch(o){f.error(o.message)}finally{u("update:confirmLoading",!1)}};return C({onFormSubmit:()=>{b()}}),(o,t)=>{const p=d("el-input"),n=d("el-form-item"),N=d("el-button"),A=d("el-form"),B=d("a-spin");return w(),V("div",h,[k("div",z,[i.value?L("",!0):(w(),V("div",G,[a(A,{ref_key:"formRef",ref:g,model:e.value,"label-width":"auto"},{default:s(()=>[a(n,{rules:[{required:!0,message:"文章分类名称不能为空!"}],extra:"sfs",label:"文章分类名称",prop:"article_category_name"},{default:s(()=>[a(p,{modelValue:e.value.article_category_name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.article_category_name=l)},null,8,["modelValue"])]),_:1}),a(n,{label:"上级分类",prop:"parent_id"},{default:s(()=>[a(T,{"min-width":"100%",modelValue:e.value.parent_id,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value.parent_id=l),disabled:m.value=="add"||_.parentId},null,8,["modelValue","disabled"])]),_:1}),a(n,{label:"关键字",prop:"keywords"},{default:s(()=>[a(p,{modelValue:e.value.keywords,"onUpdate:modelValue":t[2]||(t[2]=l=>e.value.keywords=l)},null,8,["modelValue"])]),_:1}),a(n,{label:"描述",prop:"description"},{default:s(()=>[a(p,{modelValue:e.value.description,"onUpdate:modelValue":t[3]||(t[3]=l=>e.value.description=l),row:"2",type:"textarea"},null,8,["modelValue"]),t[5]||(t[5]=k("div",{class:"extra"},"关键字为选填项，其目的在于方便外部搜索引擎搜索",-1))]),_:1}),a(n,{prop:"sort_order",label:"排序"},{default:s(()=>[a(p,{modelValue:e.value.sort_order,"onUpdate:modelValue":t[4]||(t[4]=l=>e.value.sort_order=l)},null,8,["modelValue"])]),_:1}),E(a(n,{"wrapper-col":{offset:4,span:16}},{default:s(()=>[a(N,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:b},{default:s(()=>t[6]||(t[6]=[F("提交 ")])),_:1},512)]),_:1},512),[[j,!r.isDialog]])]),_:1},8,["model"])])),a(B,{spinning:i.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])}}});export{W as default};
