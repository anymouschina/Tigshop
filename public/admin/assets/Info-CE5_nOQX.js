import{d as B,i as c,C as D,s as O,q as R,I as f,r as u,c as V,o as w,e as C,f as U,b as a,w as s,a3 as q,E as L,a4 as E}from"./index-DrbzVNl6.js";import{c as F,e as h}from"./articleCategory-J2OKGEPd.js";import{S as j}from"./SelectArticleCategory-Deygq-qZ.js";/* empty css                                                                              */const M={class:"container"},z={class:"content_wrapper"},G={key:0,class:"lyecs-form-table"},W=B({__name:"Info",props:{id:{type:Number,default:0},parentId:{type:Array,default:[]},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(v,{expose:I,emit:k}){const d=k,l=v,i=c(!0),y=D().currentRoute.value.query,p=c(l.isDialog?l.act:String(y.act)),g=c(l.isDialog?l.id:Number(y.id)),N=p.value==="add"?"create":"update",b=O(),e=c({articleCategoryName:"",parentId:l.parentId,keywords:"",description:"",sortOrder:50});R(()=>{p.value==="detail"?x():i.value=!1});const x=async()=>{try{i.value=!0;const r=await F(p.value,{id:g.value});Object.assign(e.value,r),l.parentId&&(e.value.parentId=l.parentId)}catch(r){f.error(r.message),d("close")}finally{i.value=!1}},_=async()=>{await b.value.validate();try{d("update:confirmLoading",!0);const r=await h(N,{id:g.value,...e.value});d("submitCallback",r),f.success("操作成功")}catch(r){f.error(r.message)}finally{d("update:confirmLoading",!1)}};return I({onFormSubmit:()=>{_()}}),(r,t)=>{const m=u("TigInput"),n=u("el-form-item"),S=u("el-button"),T=u("el-form"),A=u("a-spin");return w(),V("div",M,[C("div",z,[i.value?U("",!0):(w(),V("div",G,[a(T,{ref_key:"formRef",ref:b,model:e.value,"label-width":"auto"},{default:s(()=>[a(n,{rules:[{required:!0,message:"文章分类名称不能为空!"}],extra:"sfs",label:"文章分类名称",prop:"articleCategoryName"},{default:s(()=>[a(m,{classType:"tig-form-input",modelValue:e.value.articleCategoryName,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.articleCategoryName=o)},null,8,["modelValue"])]),_:1}),a(n,{label:"上级分类",prop:"parentId"},{default:s(()=>[a(j,{"min-width":"100%",modelValue:e.value.parentId,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.parentId=o),disabled:p.value=="add"||v.parentId.length>0},null,8,["modelValue","disabled"])]),_:1}),a(n,{label:"关键字",prop:"keywords"},{default:s(()=>[a(m,{classType:"tig-form-input",modelValue:e.value.keywords,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.keywords=o)},null,8,["modelValue"])]),_:1}),a(n,{label:"描述",prop:"description"},{default:s(()=>[a(m,{classType:"tig-form-input",modelValue:e.value.description,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.description=o),row:2,type:"textarea"},null,8,["modelValue"]),t[5]||(t[5]=C("div",{class:"extra"},"关键字为选填项，其目的在于方便外部搜索引擎搜索",-1))]),_:1}),a(n,{prop:"sortOrder",label:"排序"},{default:s(()=>[a(m,{type:"integer",modelValue:e.value.sortOrder,"onUpdate:modelValue":t[4]||(t[4]=o=>e.value.sortOrder=o)},null,8,["modelValue"])]),_:1}),q(a(n,{"wrapper-col":{offset:4,span:16}},{default:s(()=>[a(S,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:_},{default:s(()=>t[6]||(t[6]=[L("提交 ")])),_:1},512)]),_:1},512),[[E,!l.isDialog]])]),_:1},8,["model"])])),a(A,{spinning:i.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])}}});export{W as default};
