import{d as H,i as p,C as J,K as Q,G as W,q as X,aT as Y,c as r,e as a,f as c,b as s,w as o,M as Z,g as _,I as ee,r as d,o as l,E as x,D as h,j as I,bf as te,_ as ae}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";/* empty css                                                                    */import{P as se}from"./Pagination-wR9huHyl.js";import{_ as oe}from"./Image.vue_vue_type_script_setup_true_lang-BWzCs9jv.js";import{a as le}from"./shop-DM8_bN_f.js";import{S as T}from"./StatusDot-eKxl7wC-.js";import{_ as C}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./format-CRgx78oe.js";const ne={class:"container"},ie={class:"content_wrapper"},re={class:"container"},ce={class:"lyecs-table-list-warp"},de={class:"list-table-tool lyecs-search-warp"},ue={class:"advanced-search-warp list-table-tool-row"},pe={class:"simple-form-warp"},_e={class:"simple-form-field"},me={class:"form-group"},he={class:"control-container"},fe={class:"simple-form-field"},ve={class:"form-group"},be={key:0},ge={class:"simple-form-field"},ke={class:"form-group"},ye={class:"control-container"},Ce={class:"simple-form-field"},we={class:"list-table-tool-row"},Se={class:"list-table-tool-col"},xe={class:"table-container"},Ie={key:0},Te={key:0},Oe={key:1},Ve={key:0,class:"btn-link green"},De={key:1,class:"btn-link grey"},Ne={key:3,style:{color:"red"}},Ue={key:4,style:{color:"green"}},ze={key:0},Be={key:1},Le=["href"],Fe={class:"empty-warp"},Me={key:0,class:"empty-bg"},Pe={key:0,class:"pagination-con"},qe=H({__name:"List",setup(Ee){const U=p([{label:"全部",value:0,isShow:!0},{label:"开业",value:1,isShow:!0},{label:"暂停运营",value:4,isShow:!0},{label:"打烊",value:10,isShow:!0}]),v=J().currentRoute.value.query,z=Q(),O=p([]),f=p(!1),b=p(0),B=p([]),L=p(!1),n=W({page:1,size:z.get("pageSize"),sortField:"",sortOrder:"",keyword:"",status:0}),F=i=>{n.status=i,u()},u=async()=>{f.value=!0;try{const i=await le({...n});O.value=i.records,b.value=i.total}catch(i){ee.error(i.message)}finally{f.value=!1}},M=()=>{w(),u()},w=()=>{let i=window.location.href,t=new URL(i);t.search="",window.history.replaceState({},document.title,t.toString())},V=p(),g=p(0);X(()=>{u(),console.log(v),v.id&&Y.confirm(`为[${v.companyName||"--"}]立即创建店铺?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{g.value=Number(v.id),V.value.show()}).catch(()=>{g.value=0,w()})});const P=()=>{g.value=0,w()},k=()=>{u()},q=({prop:i,order:t})=>{n.sortField=i,n.sortOrder=t=="ascending"?"asc":t=="descending"?"desc":"",u()},E=i=>{B.value=i.map(t=>t.shopId)};return(i,t)=>{const S=d("el-button"),K=d("TigInput"),R=d("TigTabs"),y=d("el-option"),$=d("el-select"),j=d("el-space"),m=d("el-table-column"),D=d("el-divider"),G=d("el-table"),A=d("a-spin");return l(),r("div",ne,[a("div",ie,[a("div",re,[a("div",ce,[a("div",de,[a("div",ue,[a("div",pe,[a("div",_e,[a("div",me,[a("div",he,[s(K,{modelValue:n.keyword,"onUpdate:modelValue":t[0]||(t[0]=e=>n.keyword=e),name:"keyword",placeholder:"输入店铺名称",onKeyup:Z(k,["enter"]),clearable:"",onClear:k},{append:o(()=>[s(S,{onClick:k},{default:o(()=>t[5]||(t[5]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),a("div",fe,[a("div",ve,[s(R,{modelValue:n.status,"onUpdate:modelValue":t[1]||(t[1]=e=>n.status=e),tabs:U.value,onOnTabChange:F},null,8,["modelValue","tabs"])])]),L.value?(l(),r("div",be,[a("div",ge,[a("div",ke,[t[6]||(t[6]=a("label",{class:"control-label"},[a("span",null,"店铺状态：")],-1)),a("div",ye,[s($,{modelValue:n.status,"onUpdate:modelValue":t[2]||(t[2]=e=>n.status=e),clearable:""},{default:o(()=>[s(y,{value:0,label:"全部"}),s(y,{value:1,label:"运营中"}),s(y,{value:4,label:"暂停运营"}),s(y,{value:10,label:"打烊"})]),_:1},8,["modelValue"])])])]),a("div",Ce,[s(S,{type:"primary",onClick:k},{default:o(()=>t[7]||(t[7]=[x("搜索")])),_:1})])])):c("",!0)])]),a("div",we,[a("div",Se,[s(j,null,{default:o(()=>[s(_(C),{ref_key:"dialogForm",ref:V,params:{act:"add",id:g.value},isDrawer:"",path:"shop/shop/Add",title:"新增店铺",width:"800px",onCloseCallback:P,onOkCallback:M},{default:o(()=>[s(S,{type:"primary"},{default:o(()=>t[8]||(t[8]=[x("新增店铺")])),_:1})]),_:1},8,["params"])]),_:1})]),t[9]||(t[9]=a("div",{class:"list-table-tool-col"},null,-1))])]),a("div",xe,[s(A,{spinning:f.value},{default:o(()=>[s(G,{data:O.value,loading:f.value,total:b.value,"row-key":"shopId",onSelectionChange:E,onSortChange:q},{empty:o(()=>[a("div",Fe,[f.value?c("",!0):(l(),r("div",Me,"暂无数据"))])]),default:o(()=>[s(m,{label:"店铺名称"},{default:o(({row:e})=>[x(h(e.shopTitle||"--"),1)]),_:1}),s(m,{label:"店铺LOGO"},{default:o(({row:e})=>[s(_(oe),{src:e.shopLogo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),s(m,{label:"商户名称",width:200},{default:o(({row:e})=>{var N;return[e.merchant?(l(),r("div",Ie,[e.merchant.type==2?(l(),r("span",Te,h(((N=e.merchant.merchantData)==null?void 0:N.merchantName)||"--"),1)):c("",!0),e.merchant.type==1?(l(),r("span",Oe,h(e.merchant.corporateName||"--"),1)):c("",!0),s(_(C),{params:{act:"detail",id:e.merchant.merchantId},isDrawer:"",path:"adminMerchant/merchant/Info",title:"商户详情",width:"600px",showClose:!1,showOnOk:!1,onOkCallback:u},{default:o(()=>[e.merchant.status==1?(l(),r("a",Ve,"(已认证)")):(l(),r("a",De,"(未认证)"))]),_:2},1032,["params"])])):c("",!0)]}),_:1}),s(m,{label:"店铺状态",sortable:"custom"},{default:o(({row:e})=>[e.status==10?(l(),I(T,{key:0,color:"red",flicker:!0})):c("",!0),e.status==4?(l(),I(T,{key:1,color:"red",flicker:!0})):c("",!0),e.status==1?(l(),I(T,{key:2,color:"green",flicker:!0})):c("",!0),e.status===10||e.status===4?(l(),r("span",Ne,h(e.statusText),1)):e.status===1?(l(),r("span",Ue,h(e.statusText),1)):c("",!0)]),_:1}),s(m,{label:"店铺管理员",align:"center"},{default:o(({row:e})=>[e.merchant&&e.merchant.admin?(l(),r("div",ze,[a("p",null,h(e.merchant.admin.username||"--"),1)])):(l(),r("div",Be,"--"))]),_:1}),s(m,{width:200,fixed:"right",label:"操作"},{default:o(({row:e})=>[s(_(C),{params:{act:"detail",id:e.shopId},isDrawer:"",path:"shop/shop/Info",title:"编辑店铺",width:"700px",onOkCallback:u},{default:o(()=>t[10]||(t[10]=[a("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),s(D,{direction:"vertical"}),s(_(C),{params:{id:e.shopId},isDrawer:"",path:"shop/shop/Set",title:"店铺结算设置",width:"500px",onOkCallback:u},{default:o(()=>t[11]||(t[11]=[a("a",{class:"btn-link"},"结算设置",-1)])),_:2},1032,["params"]),s(D,{direction:"vertical"}),a("a",{href:_(te)("shop",e.shopId),target:"_blank",class:"btn-link"},"查看店铺",8,Le)]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),b.value>0?(l(),r("div",Pe,[s(_(se),{page:n.page,"onUpdate:page":t[3]||(t[3]=e=>n.page=e),size:n.size,"onUpdate:size":t[4]||(t[4]=e=>n.size=e),total:b.value,onCallback:u},null,8,["page","size","total"])])):c("",!0)])])])])])}}}),Xe=ae(qe,[["__scopeId","data-v-008e6897"]]);export{Xe as default};
