import{d as P,K as U,i as g,G as O,q as K,c as y,e as t,b as a,w as s,M as T,g as r,f as p,E as _,D as I,I as k,r as d,o as c,j as w}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{P as E}from"./PopFormElm-BZp1_Wme.js";import{D as L}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as M}from"./Pagination-wR9huHyl.js";import{g as $,b as j,u as G,d as H}from"./adminRole-DDtgoY2E.js";import{_ as S}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const J={class:"container"},Q={class:"content_wrapper"},W={class:"lyecs-table-list-warp"},X={class:"list-table-tool lyecs-search-warp"},Y={class:"advanced-search-warp list-table-tool-row"},Z={class:"simple-form-warp"},ee={class:"simple-form-field"},te={class:"form-group"},oe={class:"control-container"},ae={class:"simple-form-field"},se={class:"form-group"},le={class:"control-container"},ne={class:"simple-form-field"},ie={class:"form-group"},re={class:"control-container"},de={key:0},ce={class:"table-container"},pe={class:"empty-warp"},me={key:0,class:"empty-bg"},ue={key:0,class:"pagination-con"},Ie=P({__name:"List",setup(_e){const V=U(),C=g([]),m=g(!0),f=g(0),u=g([]),n=O({page:1,size:V.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),i=async()=>{m.value=!0;try{const l=await $({...n});C.value=l.records,f.value=l.total}catch(l){k.error(l.message)}finally{m.value=!1}};K(()=>{i()});const b=()=>{i()},x=({prop:l,order:e})=>{n.sortField=l,n.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",i()},A=async l=>{try{const e=await j(l,{ids:u.value});k.success("操作成功"),i()}catch(e){k.error(e.message)}},D=l=>{u.value=l.map(e=>e.roleId)};return(l,e)=>{const h=d("el-button"),N=d("TigInput"),z=d("el-popconfirm"),v=d("el-table-column"),R=d("el-divider"),q=d("el-table"),B=d("a-spin");return c(),y("div",J,[t("div",Q,[t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[t("div",ee,[t("div",te,[t("div",oe,[a(N,{modelValue:n.keyword,"onUpdate:modelValue":e[0]||(e[0]=o=>n.keyword=o),name:"keyword",placeholder:"输入权限组名称",onKeyup:T(b,["enter"]),clearable:"",onClear:b},{append:s(()=>[a(h,{onClick:b},{default:s(()=>e[4]||(e[4]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",ae,[t("div",se,[t("div",le,[a(r(S),{params:{act:"add"},isDrawer:"",path:"authority/adminRole/Info",title:"添加管理员权限组",width:"800px",onOkCallback:i},{default:s(()=>[a(h,{type:"primary"},{default:s(()=>e[5]||(e[5]=[_("添加管理员权限组")])),_:1})]),_:1})])])]),t("div",ne,[t("div",ie,[t("div",re,[a(z,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=o=>A("del"))},{reference:s(()=>[a(h,{disabled:u.value.length===0},{default:s(()=>e[6]||(e[6]=[_("批量删除")])),_:1},8,["disabled"])]),_:1}),u.value.length>0?(c(),y("span",de,[e[7]||(e[7]=_(" 已选择：")),t("b",null,I(u.value.length),1),e[8]||(e[8]=_(" 项 "))])):p("",!0)])])])])])]),t("div",ce,[a(B,{spinning:m.value},{default:s(()=>[a(q,{data:C.value,loading:m.value,total:f.value,"row-key":"roleId",onSelectionChange:D,onSortChange:x},{empty:s(()=>[t("div",pe,[m.value?p("",!0):(c(),y("div",me,"暂无数据"))])]),default:s(()=>[a(v,{type:"selection",width:"32"}),a(v,{label:"权限组名称",width:"200"},{default:s(({row:o})=>[a(r(E),{"org-value":o.roleName,"onUpdate:orgValue":F=>o.roleName=F,max:10,params:{id:o.roleId,field:"roleName"},requestApi:r(G),label:"权限组名称",type:"input"},{default:s(()=>[t("div",null,I(o.roleName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),a(v,{label:"描述",prop:"roleDesc"}),a(v,{width:120,fixed:"right",label:"操作"},{default:s(({row:o})=>[o.roleId>1?(c(),w(r(S),{key:0,params:{act:"detail",id:o.roleId},isDrawer:"",path:"authority/adminRole/Info",title:"编辑管理员权限组",width:"800px",onOkCallback:i},{default:s(()=>e[9]||(e[9]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])):p("",!0),o.roleId>2?(c(),w(R,{key:1,direction:"vertical"})):p("",!0),o.roleId>2?(c(),w(r(L),{key:2,params:{id:o.roleId},requestApi:r(H),onAfterDelete:i},{default:s(()=>e[10]||(e[10]=[_("删除 ")])),_:2},1032,["params","requestApi"])):p("",!0)]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),f.value>0?(c(),y("div",ue,[a(r(M),{page:n.page,"onUpdate:page":e[2]||(e[2]=o=>n.page=o),size:n.size,"onUpdate:size":e[3]||(e[3]=o=>n.size=o),total:f.value,onCallback:i},null,8,["page","size","total"])])):p("",!0)])])])])}}});export{Ie as default};
