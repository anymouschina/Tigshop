import{d as A,K as F,i as g,G as K,q as P,c as f,e as o,f as C,b as t,w as a,g as c,I as h,r as i,o as v,M as U,E as p,D as y}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{D as E}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as L}from"./Pagination-wR9huHyl.js";import{g as M,d as $,b as G}from"./category-CCI4VFuO.js";import{_ as S}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const R={class:"container"},j={class:"content_wrapper"},H={class:"lyecs-table-list-warp"},J={class:"list-table-tool lyecs-search-warp"},Q={class:"list-table-tool-row"},W={class:"list-table-tool-col"},X={class:"table-container"},Y={style:{position:"relative"}},Z={class:"empty-warp"},ee={key:0,class:"empty-bg"},te={key:0,class:"pagination-con"},ae={key:0,class:"selected-action-warp"},oe={class:"selected-action"},me=A({__name:"List",setup(se){const N=F(),I=g(),d=g(!0),u=g(0),m=g([]),n=K({page:1,size:N.get("pageSize"),sortField:"",sortOrder:"",categoryName:""}),r=async()=>{d.value=!0;try{const l=await M({...n});I.value=l.records,u.value=l.total}catch(l){h.error(l.message)}finally{d.value=!1}};P(()=>{r()});const b=()=>{r()},x=({prop:l,order:e})=>{n.sortField=l,n.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",r()},z=async l=>{try{const e=await G(l,{ids:m.value});h.success("操作成功"),r()}catch(e){h.error(e.message)}},D=l=>{m.value=l.map(e=>e.categoryId)};return(l,e)=>{const w=i("el-button"),V=i("TigInput"),k=i("el-space"),_=i("el-table-column"),O=i("el-divider"),T=i("el-table"),B=i("a-spin"),q=i("el-popconfirm");return v(),f("div",R,[o("div",j,[o("div",H,[o("div",J,[o("div",Q,[o("div",W,[t(k,null,{default:a(()=>[t(V,{name:"keyword",modelValue:n.categoryName,"onUpdate:modelValue":e[0]||(e[0]=s=>n.categoryName=s),placeholder:"输入分类名称",onKeyup:U(b,["enter"]),clearable:"",onClear:b},{append:a(()=>[t(w,{onClick:b},{default:a(()=>e[4]||(e[4]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(k,{class:"ml10"},{default:a(()=>[t(c(S),{isDrawer:"",onOkCallback:r,title:"新建分类",width:"600px",path:"salesman/category/Info",params:{act:"add"}},{default:a(()=>[t(w,{type:"primary"},{default:a(()=>e[5]||(e[5]=[p("新建分类")])),_:1})]),_:1})]),_:1})])])]),o("div",X,[t(B,{spinning:d.value},{default:a(()=>[t(T,{data:I.value,"row-key":"categoryId",onSelectionChange:D,total:u.value,onSortChange:x,loading:d.value},{empty:a(()=>[o("div",Z,[d.value?C("",!0):(v(),f("div",ee,"暂无数据"))])]),default:a(()=>[t(_,{label:"分类名称",prop:"categoryId",sortable:"custom"},{default:a(({row:s})=>[o("div",Y,[o("div",null,y(s.categoryName),1)])]),_:1}),t(_,{label:"创建时间",prop:"addTime",sortable:"custom"},{default:a(({row:s})=>[o("div",null,y(s.addTime),1)]),_:1}),t(_,{label:"排序",prop:"sortOrder",sortable:"custom"},{default:a(({row:s})=>[o("div",null,y(s.sortOrder||"--"),1)]),_:1}),t(_,{label:"操作",fixed:"right",width:150},{default:a(({row:s})=>[t(c(S),{isDrawer:"",onOkCallback:r,title:"编辑分类",width:"600px",path:"salesman/category/Info",params:{act:"detail",id:s.categoryId}},{default:a(()=>e[6]||(e[6]=[o("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),t(O,{direction:"vertical"}),t(c(E),{onAfterDelete:r,requestApi:c($),params:{id:s.groupId}},{default:a(()=>e[7]||(e[7]=[p("删除")])),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),u.value>0?(v(),f("div",te,[t(c(L),{page:n.page,"onUpdate:page":e[1]||(e[1]=s=>n.page=s),size:n.size,"onUpdate:size":e[2]||(e[2]=s=>n.size=s),total:u.value,onCallback:r},null,8,["page","size","total"])])):C("",!0)]),m.value.length>0?(v(),f("div",ae,[o("div",oe,[t(k,null,{default:a(()=>[o("span",null,[e[8]||(e[8]=p("已选择：")),o("b",null,y(m.value.length),1),e[9]||(e[9]=p(" 项"))]),t(q,{title:"您确认要批量删除所选数据吗？",onConfirm:e[3]||(e[3]=s=>z("del"))},{reference:a(()=>[t(w,null,{default:a(()=>e[10]||(e[10]=[p("批量删除")])),_:1})]),_:1})]),_:1})])])):C("",!0)])])])}}});export{me as default};
