import{u as B}from"./aftersales-C37am-lV.js";import{p as L}from"./format-DFT-VJzO.js";import{d as q,i as x,s as E,r as f,c as V,o as u,e as n,b as d,w as t,j as m,f as c,D as i,g as U,F as j,a as A,E as _,I as D,_ as H}from"./index-CGYuOau0.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";const I={class:"container"},T={class:"content_wrapper"},O={class:"lyecs-form-table"},z={class:"negotiation-box"},G={class:"extra"},J={class:"btn-box"},K=q({__name:"Handle",props:{formData:{type:Object,default:0},status:{type:Number,default:2}},emits:["submitCallback","update:confirmLoading","close"],setup(e,{expose:C,emit:w}){const p=w,y=e;x(!0);const k=E(),l=x({status:y.status,refund_amount:null,reply:"",return_address:""}),h=(s,a,r)=>{Number(a)>Number(y.formData.suggest_refund_amount)?r(new Error("退款金额不能大于最大退款金额")):r()},N=()=>{p("close")},F=s=>{l.value.reply=s.target.innerText},b=async()=>{await k.value.validate();try{p("update:confirmLoading",!0);const s=await B({id:y.formData.aftersale_id,...l.value});p("submitCallback",s),D.success(s.message)}catch(s){D.error(s.message)}finally{p("update:confirmLoading",!1)}};return C({onFormSubmit:()=>{b()}}),(s,a)=>{const r=f("el-form-item"),g=f("el-input"),R=f("el-tag"),v=f("el-button"),S=f("el-form");return u(),V("div",I,[n("div",T,[n("div",O,[n("div",z,[d(S,{ref_key:"formRef",ref:k,model:l.value,"label-width":"auto"},{default:t(()=>[d(r,{label:"售后方式："},{default:t(()=>[n("p",null,i(e.formData.aftersales_type_name),1)]),_:1}),d(r,{label:"售后状态："},{default:t(()=>[n("p",null,i(e.formData.status_name),1)]),_:1}),e.status==2?(u(),m(r,{key:0,label:"退款金额：",prop:"refund_amount",rules:[{required:!0,message:"退款金额不能为空"},{validator:h,trigger:"blur"}]},{default:t(()=>[d(g,{modelValue:l.value.refund_amount,"onUpdate:modelValue":a[0]||(a[0]=o=>l.value.refund_amount=o),type:"number",placeholder:"请输入退款金额"},null,8,["modelValue"]),n("div",G,"最大退款金额"+i(U(L)(e.formData.suggest_refund_amount)||"0"),1)]),_:1},8,["rules"])):c("",!0),e.formData.aftersale_type==1&&e.status==2?(u(),m(r,{key:1,label:"退货地址：",prop:"return_address",rules:[{required:e.status==2,message:"退货地址不能为空"}]},{default:t(()=>[d(g,{modelValue:l.value.return_address,"onUpdate:modelValue":a[1]||(a[1]=o=>l.value.return_address=o),rows:6,type:"textarea",placeholder:"请输入退货地址"},null,8,["modelValue"])]),_:1},8,["rules"])):c("",!0),e.status==3?(u(),m(r,{key:2,label:"拒绝说明：",prop:"reply",rules:[{required:e.status==3,message:"拒绝说明不能为空"}]},{default:t(()=>[d(g,{modelValue:l.value.reply,"onUpdate:modelValue":a[2]||(a[2]=o=>l.value.reply=o),rows:6,type:"textarea",placeholder:"请输入拒绝说明"},null,8,["modelValue"]),n("div",null,[(u(!0),V(j,null,A(e.formData.refuse_reason,o=>(u(),m(R,{key:o,type:"info",style:{"margin-right":"5px"},onClick:F},{default:t(()=>[_(i(o),1)]),_:2},1024))),128))])]),_:1},8,["rules"])):c("",!0),d(r,null,{default:t(()=>[n("div",J,[e.formData.aftersale_type==1?(u(),m(v,{key:0,type:"primary",onClick:b},{default:t(()=>[_(i(e.status==2?"同意并发送退货地址":"拒绝退款"),1)]),_:1})):c("",!0),e.formData.aftersale_type==2?(u(),m(v,{key:1,type:"primary",onClick:b},{default:t(()=>[_(i(e.status==2?"同意仅退款":"拒绝仅退款"),1)]),_:1})):c("",!0),d(v,{onClick:N},{default:t(()=>a[3]||(a[3]=[_("取消")])),_:1})])]),_:1})]),_:1},8,["model"])])])])])}}}),Z=H(K,[["__scopeId","data-v-c87a5d78"]]);export{Z as default};
