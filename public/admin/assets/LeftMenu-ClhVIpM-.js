import{d as O,ad as F,dQ as J,b1 as R,i as v,C as Z,p as w,r as k,c as l,o as a,e as o,f as n,g as i,aQ as A,b as p,w as f,F as x,a as P,n as L,e1 as Q,e2 as W,j as S,D as X,I as $,_ as j}from"./index-DrbzVNl6.js";import{S as b}from"./StatusDot-eKxl7wC-.js";import{r as U,i as V}from"./format-CRgx78oe.js";import{u as q}from"./im-DWn2qVSQ.js";import{s as G}from"./conversation-rd7RS6Jg.js";const H={class:"left-menu-container"},K={class:"app-layout-m_nav_o1XZi"},T={class:"avg"},Y=["src"],ee=["src"],te={class:"popover-box"},se={class:"status"},ae={key:3,class:"text"},oe={key:4,class:"text"},le={key:5,class:"text"},ie={class:"status-pop-box"},ne=["onClick"],re={key:0,class:"status-pop-item-content"},ce={key:1,class:"status-pop-item-content"},ue={key:2,class:"status-pop-item-content"},de=["onClick"],pe={class:"app-layout-m_item-icon_1yDNO"},_e={class:"app-layout-m_item-title_2Je8J"};const me=O({__name:"LeftMenu",setup(he){const r=q(),g=F(()=>J().userInfo),_=R(),z=v([{value:1,label:"在线"},{value:2,label:"忙碌"},{value:3,label:"离开"}]),E=async t=>{try{const s=await G({status:t});r.setImPresence(t)}catch(s){$.error(s.message)}},N=t=>{if(_.path.split("/").length==4){let s=_.path.lastIndexOf("/");return _.path.substring(0,s)===t}return _.path===t},y=v([{path:"/im/index",svg:"im-recently",name:"index",title:"即时会话",children:[]},{path:"/im/history",svg:"im-history",name:"history",title:"历史会话",children:[]},{path:"/im/systemSetting",svg:"im-setting",name:"systemSetting",title:"系统设置",children:[{path:"/im/systemSetting/autoReply",name:"autoReply",title:"客服自动回复"}]}]),m=v([]),C=Z(),I=v("");w(()=>_,t=>{var s,d;if(t.path.split("/").length==3){let c=y.value.filter(e=>e.path===t.path),u=c.length>0?c[0]:{};((s=u.children)==null?void 0:s.length)>0&&(m.value=u.children,I.value=t.path,C.push({path:m.value[0].path}))}else{let c=t.path,u=c.lastIndexOf("/"),e="";u!==-1&&(e=c.substring(0,u),c.substring(u+1));let h=y.value.filter(M=>M.path===e),B=h.length>0?h[0]:{};((d=B.children)==null?void 0:d.length)>0&&(m.value=B.children,I.value=t.path)}},{deep:!0,immediate:!0});const D=t=>{C.push({path:t})};function ve(t,s){return s===t}return(t,s)=>{const d=k("el-icon"),c=k("el-popover"),u=k("SvgIcon");return a(),l(x,null,[o("div",H,[o("div",K,[o("div",T,[i(A)(String(g.value.avatar))=="def"?(a(),l("img",{key:0,class:"image",src:i(U)(g.value.avatar)},null,8,Y)):(a(),l("img",{key:1,class:"image",src:i(V)(g.value.avatar)},null,8,ee))]),o("div",te,[p(c,{placement:"right-start",width:100,trigger:"click"},{reference:f(()=>[o("div",se,[i(r).imPresence==1?(a(),S(b,{key:0,style:{"margin-top":"2px"},inline:!1,flicker:!0,size:8,color:"#3ebd00"})):n("",!0),i(r).imPresence==2?(a(),S(b,{key:1,style:{"margin-top":"2px"},inline:!1,flicker:!0,size:8,color:"#f44444"})):n("",!0),i(r).imPresence==3?(a(),S(b,{key:2,style:{"margin-top":"2px"},inline:!1,flicker:!0,size:8,color:"#d0d0d0"})):n("",!0),i(r).imPresence==1?(a(),l("div",ae,"在线")):n("",!0),i(r).imPresence==2?(a(),l("div",oe,"忙碌")):n("",!0),i(r).imPresence==3?(a(),l("div",le,"离开")):n("",!0)])]),default:f(()=>[o("div",ie,[(a(!0),l(x,null,P(z.value,e=>(a(),l("div",{class:"status-pop-item flex align-center cursor-pointer",key:e.value,onClick:h=>E(e.value)},[o("div",{class:L(["status-pop-item-icon",{opacity:e.value==i(r).imPresence}])},[p(d,{size:"14",color:"#000"},{default:f(()=>[p(i(Q))]),_:1})],2),e.value==1?(a(),l("div",re,s[0]||(s[0]=[o("div",{class:"label green"},null,-1),o("div",{class:"txt"},"在线",-1)]))):n("",!0),e.value==2?(a(),l("div",ce,[o("div",null,[p(d,{size:"14",color:"#ff4444"},{default:f(()=>[p(i(W))]),_:1})]),s[1]||(s[1]=o("div",{class:"txt"},"忙碌",-1))])):n("",!0),e.value==3?(a(),l("div",ue,s[2]||(s[2]=[o("div",{class:"label"},null,-1),o("div",{class:"txt"},"离线",-1)]))):n("",!0)],8,ne))),128))])]),_:1})]),(a(!0),l(x,null,P(y.value,e=>(a(),l("div",{class:L(["app-layout-m_item_1hZOk",{"app-layout-m_active_1p89k":N(e.path)}]),onClick:h=>D(e.path)},[o("div",pe,[p(u,{name:e.svg,width:"16",height:"16"},null,8,["name"])]),o("div",_e,X(e.title),1)],10,de))),256))])]),(m.value.length>0,n("",!0))],64)}}}),Se=j(me,[["__scopeId","data-v-384bc1dd"]]);export{Se as default};
