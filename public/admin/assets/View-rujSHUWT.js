import{g as S,a as v}from"./time-Bh5UhrfW.js";import{i as b}from"./format-CRgx78oe.js";import{m as w,f as C,o as _,d as P,a as k}from"./index-Dp14ZkTu.js";import{g as x}from"./product-DEi2MlvQ.js";import{_ as N}from"./View.vue_vue_type_script_setup_true_lang-b_jwmlrh.js";import{d as $,u as D,i as y,T as I,ad as L,c,o as d,e as o,l,D as r,b as z,g as f,F as B,a as F,f as n,_ as G}from"./index-DrbzVNl6.js";/* empty css                                                             */import"./lodash-Cilobaqo.js";const W={class:"main"},M={class:"mk-top"},R={class:"countdown"},V={class:"item-box"},j={class:"item"},E={key:0,class:"goods-info"},K={key:1,class:"price-box",style:"color: rgb(255, 255, 255); font-weight: 700; font-family: inherit"},O={class:"price"},J=$({__name:"View",props:{module:{},moduleModifiers:{}},emits:["update:module"],setup(g){const e=D(g,"module"),T=y({productSource:"products",productGroups:[],productList:[{productId:0,productSn:"",productName:"零食",productDesc:"",productPrice:32,marketPrice:0,picThumb:"https://oss.tigshop.com/img/gallery/202411/17316338156QyBKObq7Wuw7KCqKa.jpg"},{productId:0,productSn:"",productName:"饼干",productDesc:"",productPrice:32,marketPrice:0,picThumb:"https://oss.tigshop.com/img/gallery/202411/1731633815i7FmGX6OEWOBsQ3DUh.jpg"},{productId:0,productSn:"",productName:"茶叶",productDesc:"",productPrice:32,marketPrice:0,picThumb:"https://oss.tigshop.com/img/gallery/202411/1731633815zoFfIRIsE4yJ0a5LJn.jpg"},{productId:0,productSn:"",productName:"干货",productDesc:"",productPrice:32,marketPrice:0,picThumb:"https://oss.tigshop.com/img/gallery/202411/1731633815UdOFkntVJP4GXu9KsW.jpg"}]||[],moduleColor_style:"orange",prodcutTitles:[],moduleTitle:{title:"天天特价",subTitle:"每日精选",countdownTitle:"距结束",countdownType:"dailyCycle",dailyTime:[v(new Date,8),v(new Date,20)],specifyTime:S(3)},picScale:"1:1",picFillType:"cover",productWidth:25,productRadius:6,showProductName:1,productNameSize:14,productNameWeight:400,showProductPrice:1,priceWeight:400,showSellingPoints:1,moduleColor:{titleColor:"#ffffff",subTitleColor:"#ffffff",countdownColor:"#ffffff",countdownTitleColor:"#72B76C",productNameColor:"#555555",sellingPointsColor:"#FB6D08"},moduleStyle:k,contentStyle:P});w(e.value,T.value);const m=y([]),p=async a=>{try{const s=await x(a);m.value=[..._(e.value.productList),...s.records]}catch(s){console.error(s)}};I(()=>{if(e.value.productSource){const a={};if(e.value.productSource==="products")a.ids=e.value.productList.map(s=>s.productId).join(","),p(a);else if(e.value.productGroups[0]){const{productGroupId:s,productNum:i,productNumType:u}=e.value.productGroups[0];a.productGroupId=s,a.size=u==="number"?i:100,p(a)}else m.value=[]}});const t=L(()=>C(e.value.moduleStyle??{},e.value.contentStyle??{},e.value.subTitle??{})),h={"3:2":"calc(100% / 3 * 2)","1:1":"calc(100% / 1 * 1)","3:4":"calc(100% / 3 * 4)","16:9":"calc(100% / 16 * 9)"};return(a,s)=>(d(),c("div",{class:"module-ad-con",style:l(t.value.moduleStyle.boxPaddingBottom+t.value.moduleStyle.boxPaddingTop+t.value.moduleStyle.boxPaddingBottom+t.value.moduleStyle.boxPadding+t.value.moduleStyle.backgroundSize+t.value.moduleStyle.backgroundImage)},[o("div",{class:"module-ad-content main",style:l(t.value.moduleContentStyle.backgroundImage+t.value.moduleContentStyle.backgroundSize+t.value.moduleContentStyle.boxRadius+t.value.moduleContentStyle.boxShadow+t.value.moduleContentStyle.innerPadding+`border-radius: ${e.value.contentStyle.boxRadius}px`)},[o("div",W,[o("div",M,[o("div",null,[o("span",{class:"mk-title",style:l(`color: ${e.value.moduleColor.titleColor}`)},r(e.value.moduleTitle.title),5),o("span",{class:"mk-small-title",style:l(`color: ${e.value.moduleColor.subTitleColor}`)},r(e.value.moduleTitle.subTitle),5)]),o("div",{class:"mk-countdown",style:l(`--color: ${e.value.moduleColor.countdownColor}`)},[o("span",{class:"text",style:l(`color: ${e.value.moduleColor.countdownTitleColor}`)},r(new Date().getTime()>Number(e.value.moduleTitle.dailyTime[0])?e.value.moduleTitle.countdownTitle:"距开始"),5),o("div",R,[z(f(N),{countdownType:e.value.moduleTitle.countdownType,"value-style":{color:e.value.moduleColor.countdownColor,"font-size":"12px",display:"block",height:"20px","line-height":"20px"},format:"HH:mm:ss",dailyTime:e.value.moduleTitle.dailyTime,specifyTime:e.value.moduleTitle.specifyTime},null,8,["countdownType","value-style","dailyTime","specifyTime"])])],4)]),o("div",{class:"lists",style:l(`border-radius: ${e.value.contentStyle.boxRadius}px`)},[o("div",V,[(d(!0),c(B,null,F(m.value,(i,u)=>(d(),c("div",{key:u,style:l(`width: ${e.value.productWidth}%; flex-wrap: nowrap; flex-shrink: 0`)},[o("div",j,[o("div",{class:"img",style:l(`width: 100%;
                                    padding-top: ${h[e.value.picScale]};
                                    background-size: ${e.value.picFillType};
                                    border-radius: ${e.value.productRadius}px;
                                    background-image: url(${f(b)(i.picThumb)});`)},null,4),e.value.prodcutTitles.length>0?(d(),c("div",E,[e.value.showProductName?(d(),c("div",{key:0,class:"tit",style:l(`padding-bottom: 0px; font-size: ${e.value.productNameSize}px; font-weight: ${e.value.productNameWeight}; color:${e.value.moduleColor.productNameColor}`)},r(e.value.prodcutTitles[u]&&e.value.prodcutTitles[u][`title${u+1}`]),5)):n("",!0),e.value.showProductPrice?(d(),c("div",K,[o("div",O,"￥"+r(i.productPrice),1)])):n("",!0),e.value.showSellingPoints?(d(),c("div",{key:2,class:"desc",style:l(`color: ${e.value.moduleColor.sellingPointsColor}`)},r(e.value.prodcutTitles[u]&&e.value.prodcutTitles[u][`sellingPoints${u+1}`]),5)):n("",!0)])):n("",!0)])],4))),128))])],4)])],4)],4))}}),oe=G(J,[["__scopeId","data-v-a462f923"]]);export{oe as default};
