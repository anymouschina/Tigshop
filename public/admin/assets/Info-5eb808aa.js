import{d as P,j as m,E as U,s as q,x as G,r as i,o as _,c as L,e as w,k as V,w as l,b as o,f as j,h as k,$ as E,a0 as F,H,K as f}from"./index-7c2d2aef.js";import{a as I,u as K}from"./productGroup-d12e271e.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import"./config-9548fa9b.js";import{S as M}from"./SelectProduct-5f7c1e31.js";/* empty css                                                                    *//* empty css                                                                              */import"./region-e0d291a6.js";import"./shopProductCategory-792e0c23.js";/* empty css             */import"./time-290942a2.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";import"./format-4e0206d3.js";import"./product-689c7c1e.js";import"./Pagination-8eb7b6b1.js";import"./SelectSku-94aa3072.js";/* empty css                                                                  */import"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./region-05802f67.js";const O={class:"container"},T={class:"content_wrapper"},$={class:"lyecs-form-table"},fe=P({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(S,{expose:x,emit:C}){const p=C,s=S,u=m(!0),v=U().currentRoute.value.query,d=m(s.isDialog?s.act:String(v.act)),g=m(s.isDialog?s.id:Number(v.id)),h=d.value==="add"?"create":"update",b=q(),e=m({product_ids:[]}),B=async()=>{try{const t=await I(d.value,{id:g.value});Object.assign(e.value,t.item)}catch(t){f.error(t.message),p("close")}finally{u.value=!1}};G(()=>{console.log(d.value),d.value==="detail"?B():u.value=!1});const y=async()=>{await b.value.validate();try{p("update:confirmLoading",!0);const t=await K(h,{id:g.value,...e.value});p("submitCallback",t),f.success(t.message)}catch(t){f.error(t.message)}finally{p("update:confirmLoading",!1)}};return x({onFormSubmit:()=>{y()}}),(t,a)=>{const c=i("el-input"),n=i("el-form-item"),N=i("el-button"),D=i("el-form"),R=i("a-spin");return _(),L("div",O,[w("div",T,[w("div",$,[u.value?k("",!0):(_(),V(D,{key:0,ref_key:"formRef",ref:b,model:e.value,"label-width":"auto"},{default:l(()=>[o(n,{rules:[{required:!0,message:"分组名称不能为空!"}],label:"分组名称",prop:"product_group_name"},{default:l(()=>[o(c,{modelValue:e.value.product_group_name,"onUpdate:modelValue":a[0]||(a[0]=r=>e.value.product_group_name=r)},null,8,["modelValue"])]),_:1}),o(n,{label:"分组别名",prop:"product_group_sn"},{default:l(()=>[o(c,{modelValue:e.value.product_group_sn,"onUpdate:modelValue":a[1]||(a[1]=r=>e.value.product_group_sn=r)},null,8,["modelValue"])]),_:1}),o(n,{label:"分组描述",prop:"product_group_description"},{default:l(()=>[o(c,{modelValue:e.value.product_group_description,"onUpdate:modelValue":a[2]||(a[2]=r=>e.value.product_group_description=r),row:"2",type:"textarea"},null,8,["modelValue"])]),_:1}),o(n,{label:"分组商品",prop:"product_ids"},{default:l(()=>[u.value?k("",!0):(_(),V(j(M),{key:0,ids:e.value.product_ids,"onUpdate:ids":a[3]||(a[3]=r=>e.value.product_ids=r)},null,8,["ids"]))]),_:1}),E(o(n,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[o(N,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:y},{default:l(()=>[H("提交")]),_:1},512)]),_:1},512),[[F,!s.isDialog]])]),_:1},8,["model"])),o(R,{spinning:u.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{fe as default};
