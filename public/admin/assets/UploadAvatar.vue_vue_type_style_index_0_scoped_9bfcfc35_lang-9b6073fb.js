import{d as B,j as y,aP as S,o as a,c,f as e,n as F,e as t,k as g,h as n,w as d,b as f,$ as I,a0 as G,p as $,i as E,_ as N}from"./index-7c2d2aef.js";import"./index-6c62cf9b.js";import{d as O}from"./vuedraggable.umd-75ad0f8f.js";import{_ as x}from"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import{i as C}from"./format-4e0206d3.js";import{_ as v}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";const _=o=>($("data-v-4dd36133"),o=o(),E(),o),V={class:"gallery-pic"},D={class:"item-img add-photo-btn"},P=_(()=>t("div",{class:"flex",style:{"flex-direction":"column",height:"80px",width:"80px","align-items":"center","justify-content":"center","line-height":"22px"}},[t("i",{class:"iconfont icon-tianjiatupian"}),t("span",null,"添加图片")],-1)),z={key:0,class:"item-action"},R=_(()=>t("span",{class:"iconfont icon-bianji1"},null,-1)),U={key:1,class:"gallery-list-warp"},q={class:"item","data-id":"img.img_id"},H={class:"img"},J={class:"lyecs-dialogImage"},K=["onClick"],L={key:0,class:"item gallery-add-item add-gallery-photo-btn",draggable:"false"},Q=_(()=>t("i",{class:"iconfont icon-tianjiatupian"},null,-1)),T=[Q],W=_(()=>t("div",{class:"item gallery-add-item add-gallery-photo-btn",draggable:"false"},[t("i",{class:"iconfont icon-tianjiatupian"})],-1)),X=B({__name:"FormAddGallery",props:{photo:{type:String,default:""},photos:{type:Array,default:[]},isMultiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:photo","update:photos"],setup(o,{emit:M}){y(null);const p=o,{photo:l,photos:m,isMultiple:u,disabled:k}=S(p),r=M,h=i=>{if(u.value==!0){let s=m.value||[];r("update:photos",s.concat(i))}else r("update:photo",i[0].pic_url)},w=i=>{let s=m.value;s.splice(i,1),r("update:photos",s)},j=()=>{r("update:photo","")};return y(!1),y(""),(i,s)=>(a(),c("div",V,[e(u)?n("",!0):(a(),c("div",{key:0,class:F("gallery-pic-select "+(e(l)?"have_image":""))},[t("div",D,[e(l)?(a(),g(e(x),{key:0,class:"gallery-img",src:e(C)(e(l))},null,8,["src"])):n("",!0),e(l)?n("",!0):(a(),g(e(v),{key:1,type:"gallery",class:"item-bg",onOkCallback:h,params:{isMultiple:p.isMultiple}},{default:d(()=>[P]),_:1},8,["params"]))]),e(l)?(a(),c("div",z,[f(e(v),{type:"gallery",class:"item item-edit",onOkCallback:h,params:{isMultiple:p.isMultiple}},{default:d(()=>[R]),_:1},8,["params"]),t("span",{onClick:j,class:"item item-remove iconfont icon-shanchu"})])):n("",!0)],2)),e(u)?(a(),c("div",U,[t("div",null,[f(e(O),{class:"gallery-list-ul","item-key":"pic_id",list:e(m),"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:s[0]||(s[0]=()=>{}),onEnd:s[1]||(s[1]=()=>{})},{item:d(({element:b,index:A})=>[t("div",q,[t("div",H,[t("a",J,[f(e(x),{class:"gallery-img",big:b.pic_url,src:e(C)(b.pic_thumb)},null,8,["big","src"])]),I(t("i",{onClick:Y=>w(A),class:"btn-del iconfont icon-cha"},null,8,K),[[G,!e(k)]])])])]),footer:d(()=>[e(k)?(a(),c("div",L,T)):(a(),g(e(v),{key:1,type:"gallery",class:"",onOkCallback:h,params:{isMultiple:p.isMultiple}},{default:d(()=>[W]),_:1},8,["params"]))]),_:1},8,["list"])])])):n("",!0)]))}});const le=N(X,[["__scopeId","data-v-4dd36133"]]);export{le as F};
