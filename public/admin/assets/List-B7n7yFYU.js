/* empty css             */import"./index-CeQDmMxd.js";import{y as D,d as j,K as A,G as w,i as T,q as U,c as u,e as t,F as P,a as h,b as p,f as c,w as o,g as b,I as E,C as G,r as m,o as a,n as K,D as x,j as y,_ as M}from"./index-DrbzVNl6.js";/* empty css                                                                    */import{P as R}from"./Pagination-wR9huHyl.js";import{_ as C}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const H=I=>D({url:"promotion/promotion/list",method:"get",params:I}),J=()=>D({url:"promotion/promotion/getPromotionCount",method:"get"}),Q={class:"container"},W={class:"content_wrapper"},X={class:"row"},Y={class:"col activity"},Z={class:"tabs flex"},tt=["onClick"],et={class:"num"},it={class:"txt"},st={class:"col"},lt={class:"app-wrapper cursor-pointer"},at={class:"col"},ot={style:{position:"relative"}},nt=["onClick"],pt={class:"empty-warp"},rt={key:0,class:"empty-bg"},dt={key:0,class:"pagination-con"},ut=j({__name:"List",setup(I){const r=G(),L=A(),k=w([{value:1,label:"进行中的活动",num:"-"},{value:2,label:"7天内到期活动",num:"-"},{value:3,label:"未开始活动",num:"-"}]),$=w([{value:0,label:"全部"},{value:1,label:"秒杀"},{value:2,label:"优惠券"},{value:6,label:"限时折扣"},{value:3,label:"满减"},{value:5,label:"满赠"}]),s=w({page:1,size:L.get("pageSize"),sortField:"",sortOrder:"",timeType:1,types:0}),z=T([]),v=T(!0),f=T(0),d=async()=>{v.value=!0;let l=[];s.types===0?l=[]:s.types===3?l=[3,4]:l=[s.types];try{const e=await J();k[0].num=e.timeType1Count,k[1].num=e.timeType2Count,k[2].num=e.timeType3Count;const g=await H({...s,type:l.join(",")});z.value=g.records,f.value=g.total}catch(e){E.error(e.message)}finally{v.value=!1}};U(()=>{d()});const N=l=>{s.timeType=l,d()},O=l=>{s.types=$[l].value,d()},n=l=>{switch(l){case 1:r.push({path:"/promotion/seckill/list"});break;case 2:r.push({path:"/promotion/coupon/list"});break;case 6:r.push({path:"/promotion/limitdiscount_gift/list"});break;case 3:r.push({path:"/promotion/full_reduction/list"});break;case 5:r.push({path:"/promotion/reward_gift/list"});break;case 9:r.push({path:"/promotion/sign_in_setting/list"});break;case 7:r.push({path:"/promotion/recharge_setting/list"});break;case 10:r.push({path:"/promotion/product_gift/list"});break}};return(l,e)=>{const g=m("el-tab-pane"),S=m("el-tabs"),_=m("el-table-column"),q=m("el-divider"),B=m("el-table"),F=m("a-spin");return a(),u("div",Q,[t("div",W,[t("div",X,[t("div",Y,[t("div",null,[e[10]||(e[10]=t("div",{class:"tip"},"仅统计优惠券、满减/送、限时折扣、秒杀、多人拼团、赠品 活动",-1)),t("div",Z,[(a(!0),u(P,null,h(k,i=>(a(),u("div",{class:K(["item",{active:i.value==s.timeType}]),onClick:V=>N(i.value)},[t("div",et,x(i.num),1),t("div",it,x(i.label),1)],10,tt))),256))])])]),t("div",st,[t("div",null,[e[19]||(e[19]=t("h2",null,"商家常用",-1)),t("div",lt,[t("div",{class:"app-wrapper-item",onClick:e[0]||(e[0]=i=>n(2))},e[11]||(e[11]=[t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-youhuiquan"})],-1),t("div",null,[t("div",{class:"name"},"优惠券"),t("div",{class:"tip"},"向客户发放店铺优惠券")],-1)])),t("div",{class:"app-wrapper-item",onClick:e[1]||(e[1]=i=>n(6))},e[12]||(e[12]=[t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-time-limit"})],-1),t("div",null,[t("div",{class:"name"},"限时折扣"),t("div",{class:"tip"},"设置商品限时打折促销")],-1)])),t("div",{class:"app-wrapper-item",onClick:e[2]||(e[2]=i=>n(3))},e[13]||(e[13]=[t("div",{class:"icon-col"},[t("p",null,"减")],-1),t("div",null,[t("div",{class:"name"},"满减"),t("div",{class:"tip"},"购满一定金额或件数享受优惠")],-1)])),t("div",{class:"app-wrapper-item",onClick:e[3]||(e[3]=i=>n(5))},e[14]||(e[14]=[t("div",{class:"icon-col"},[t("p",null,"送")],-1),t("div",null,[t("div",{class:"name"},"满送"),t("div",{class:"tip"},"购满一定金额或件数享受优惠")],-1)])),t("div",{class:"app-wrapper-item",onClick:e[4]||(e[4]=i=>n(9))},e[15]||(e[15]=[t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-qiandao"})],-1),t("div",null,[t("div",{class:"name"},"日历签到"),t("div",{class:"tip"},"每日签到领取积分或奖励")],-1)])),t("div",{class:"app-wrapper-item",onClick:e[5]||(e[5]=i=>n(1))},e[16]||(e[16]=[t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-miaosha"})],-1),t("div",null,[t("div",{class:"name"},"秒杀"),t("div",{class:"tip"},"快速抢购引导顾客更多消费")],-1)])),t("div",{class:"app-wrapper-item",onClick:e[6]||(e[6]=i=>n(10))},e[17]||(e[17]=[t("div",{class:"icon-col"},[t("p",null,"赠")],-1),t("div",null,[t("div",{class:"name"},"赠品"),t("div",{class:"tip"},"设置赠品, 回馈客户")],-1)])),t("div",{class:"app-wrapper-item",onClick:e[7]||(e[7]=i=>n(7))},e[18]||(e[18]=[t("div",{class:"icon-col"},[t("p",null,"充")],-1),t("div",null,[t("div",{class:"name"},"余额充值"),t("div",{class:"tip"},"充值店铺余额")],-1)]))])])]),t("div",at,[e[24]||(e[24]=t("h2",null,"活动记录",-1)),p(S,{type:"card",onTabChange:O},{default:o(()=>[(a(!0),u(P,null,h($,i=>(a(),y(g,{label:i.label,value:i.value},null,8,["label","value"]))),256))]),_:1}),p(F,{spinning:v.value},{default:o(()=>[p(B,{data:z.value,"row-key":"couponId",total:f.value,loading:v.value},{empty:o(()=>[t("div",pt,[v.value?c("",!0):(a(),u("div",rt,"暂无数据"))])]),default:o(()=>[p(_,{label:"活动名称",prop:"promotionName",width:"300"},{default:o(({row:i})=>[t("div",ot,[t("div",null,x(i.promotionName||"--"),1)])]),_:1}),p(_,{label:"活动类型",prop:"typeText",width:"300"}),p(_,{label:"活动时间",prop:"timeText"}),p(_,{label:"操作",width:"110"},{default:o(({row:i})=>[t("a",{class:"btn-link",onClick:V=>n(i.type)},"查看",8,nt),p(q,{direction:"vertical"}),i.type==1?(a(),y(b(C),{key:0,params:{act:"detail",id:i.relationId},isDrawer:"",title:"编辑限时秒杀",width:"800px",path:"promotion/seckill/Info",onOkCallback:d},{default:o(()=>e[20]||(e[20]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])):c("",!0),i.type==2?(a(),y(b(C),{key:1,isDrawer:"",onOkCallback:d,title:"编辑优惠券",width:"800px",path:"promotion/coupon/Info",params:{act:"detail",id:i.relationId}},{default:o(()=>e[21]||(e[21]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])):c("",!0),i.type==6?(a(),y(b(C),{key:2,isDrawer:"",onOkCallback:d,title:"编辑限时折扣",width:"900px",path:"promotion/productActivity/limitdiscount/Info",params:{act:"detail",id:i.relationId}},{default:o(()=>e[22]||(e[22]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])):c("",!0),i.type==3||i.type==5||i.type==4?(a(),y(b(C),{key:3,isDrawer:"",onOkCallback:d,title:"编辑优惠活动",width:"800px",path:"promotion/productActivity/Info",params:{act:"detail",id:i.relationId,promotionType:i.type==4?2:i.type==3?1:3}},{default:o(()=>e[23]||(e[23]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])):c("",!0)]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),f.value>0?(a(),u("div",dt,[p(b(R),{page:s.page,"onUpdate:page":e[8]||(e[8]=i=>s.page=i),size:s.size,"onUpdate:size":e[9]||(e[9]=i=>s.size=i),total:f.value,onCallback:d},null,8,["page","size","total"])])):c("",!0)])])])])}}}),ft=M(ut,[["__scopeId","data-v-1ef4a0bc"]]);export{ft as default};
