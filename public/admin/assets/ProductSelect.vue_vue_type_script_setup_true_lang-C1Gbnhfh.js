import"./index-CeQDmMxd.js";import{d as h}from"./vuedraggable.umd-DAKh-e3Q.js";import{u as _,i as M}from"./format-CRgx78oe.js";import{d as k,m as y,i as r,aU as C,u as b,q as x,y as w,c as B,o as L,b as m,g as d,w as u,e as s}from"./index-DrbzVNl6.js";import{_ as j}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const A={class:"dec-goods-group-item dec-tip dec-goods-group-item-goods"},I={class:"dec-goods-group-item-con"},N={class:"item-goods-con"},S=["href","title"],q=["src"],E=["onClick"],R=k({__name:"ProductSelect",props:y({ids:{type:Array,default:[]},productList:{type:Array,default:[]},isMultiple:{type:Boolean,default:!1}},{ids:{default:[]},idsModifiers:{}}),emits:["update:ids"],setup(n){r(null);const i=n,{isMultiple:F}=C(i),a=r(i.productList),e=b(n,"ids");x(async()=>{e.value&&p()});const l=r(0);function p(){e.value.length>0?w({url:"product/product/list",method:"get",params:{ids:e.value.join(","),size:100,page:1}}).then(o=>{a.value=o.records,l.value=o.total}):(a.value=[],l.value=0)}const g=o=>{console.log(e.value),i.isMultiple==!1&&(e.value=[]);for(let t in o)e.value.push(o[t]);l.value=e.value.length,p()},f=o=>{e.value.splice(o,1),a.value.splice(o,1)};return(o,t)=>(L(),B("div",null,[m(d(h),{class:"dec-goods-group-list","item-key":"prodcutId",list:a.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:t[0]||(t[0]=()=>{}),onEnd:t[1]||(t[1]=()=>{})},{item:u(({element:c,index:v})=>[s("div",A,[s("div",I,[s("div",N,[s("a",{href:d(_)({path:"product",id:c.productId}),target:"_blank",title:c.productName},[s("img",{class:"item-goods-img",src:d(M)(c.picThumb)},null,8,q)],8,S)]),s("div",{class:"del-item",onClick:P=>f(v)},t[2]||(t[2]=[s("i",{class:"ico-decorate icon-dec-cha"},null,-1)]),8,E)])])]),footer:u(()=>[m(d(j),{isDrawer:"",onOkCallback:g,title:"选择商品",width:"600px",path:"product/product/src/SelectProduct",params:{selectedIds:e.value,isMultiple:i.isMultiple}},{default:u(()=>t[3]||(t[3]=[s("div",{class:"dec-goods-group-item dec-goods-group-add dec-tip","data-title":"添加商品"},[s("div",{class:"dec-goods-group-item-con"},[s("div",{class:"item-goods-con"},[s("a",{href:"javascript:;"},[s("i",{class:"ico-decorate icon-dec-jia"})])])])],-1)])),_:1},8,["params"])]),_:1},8,["list"])]))}});export{R as _};
