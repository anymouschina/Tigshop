import{d as P,j as h,E as $,I as E,x as R,r as i,o as _,c as p,e as o,b as e,w as a,f as g,h as u,K as w,L as j,H as b,G as m}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{_ as G}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as H}from"./Pagination-8eb7b6b1.js";import{u as M}from"./config-9548fa9b.js";import{g as O,d as T,b as J}from"./feedback-99727590.js";import{_ as Q}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const W={class:"container"},X={class:"content_wrapper"},Y={class:"lyecs-table-list-warp"},Z={class:"list-table-tool lyecs-search-warp"},ee={class:"advanced-search-warp list-table-tool-row"},te={class:"simple-form-warp"},oe={class:"simple-form-field"},se={class:"form-group"},ae={class:"control-container"},le=o("span",{class:"iconfont icon-chakan1"},null,-1),ne={class:"simple-form-field"},ie={class:"form-group"},re=o("label",{class:"control-label"},[o("span",null,"留言类型：")],-1),de={class:"control-container"},ce={class:"simple-form-field"},_e={class:"form-group"},pe={class:"control-container"},ue={key:0},me={class:"table-container"},fe={key:0,style:{color:"#999"}},ve={key:1,style:{color:"#999"}},he={key:2,style:{color:"#999"}},be=o("a",{class:"btn-link"},"查看",-1),ye={class:"empty-warp"},ge={key:0,class:"empty-bg"},ke={key:0,class:"pagination-con"},De=P({__name:"List",setup(we){const z=M(),C=h([]),f=h(!0),y=h(0),v=h([]);h(!1);const k=$().currentRoute.value.query,l=E({page:1,size:z.get("page_size"),sort_field:"",sort_order:"",keyword:"",type:-1}),d=async()=>{f.value=!0;try{const n=await O({...l});C.value=n.filter_result,y.value=n.total}catch(n){w.error(n.message)}finally{f.value=!1}};R(()=>{k&&k.type&&(l.type=Number(k.type)),d()});const S=()=>{d()},N=({prop:n,order:s})=>{l.sort_field=n,l.sort_order=s=="ascending"?"asc":s=="descending"?"desc":"",d()},q=async n=>{try{const s=await J(n,{ids:v.value});w.success(s.message),await d()}catch(s){w.error(s.message)}},B=n=>{v.value=n.map(s=>s.id)};return(n,s)=>{const V=i("el-button"),U=i("el-input"),r=i("el-option"),A=i("el-select"),D=i("el-popconfirm"),F=i("el-form"),c=i("el-table-column"),I=i("el-divider"),K=i("el-table"),L=i("a-spin");return _(),p("div",W,[o("div",X,[o("div",Y,[o("div",Z,[e(F,{model:l},{default:a(()=>[o("div",ee,[o("div",te,[o("div",oe,[o("div",se,[o("div",ae,[e(U,{modelValue:l.keyword,"onUpdate:modelValue":s[0]||(s[0]=t=>l.keyword=t),name:"keyword",placeholder:"输入留言内容",onKeyup:j(S,["enter"])},{append:a(()=>[e(V,{onClick:S},{default:a(()=>[le]),_:1})]),_:1},8,["modelValue"])])])]),o("div",ne,[o("div",ie,[re,o("div",de,[e(A,{modelValue:l.type,"onUpdate:modelValue":s[1]||(s[1]=t=>l.type=t)},{default:a(()=>[e(r,{label:"所有类型",value:-1}),e(r,{label:"建议",value:0}),e(r,{label:"投诉",value:1}),e(r,{label:"商品",value:2}),e(r,{label:"其他",value:3}),e(r,{label:"店铺投诉",value:4}),e(r,{label:"订单问题",value:5}),e(r,{label:"订单咨询",value:6})]),_:1},8,["modelValue"])])])]),o("div",ce,[o("div",_e,[o("div",pe,[e(D,{title:"您确认要批量删除所选数据吗？",onConfirm:s[2]||(s[2]=t=>q("del"))},{reference:a(()=>[e(V,{disabled:v.value.length===0},{default:a(()=>[b("批量删除")]),_:1},8,["disabled"])]),_:1}),v.value.length>0?(_(),p("span",ue,[b(" 已选择："),o("b",null,m(v.value.length),1),b(" 项 ")])):u("",!0)])])])])])]),_:1},8,["model"])]),o("div",me,[e(L,{spinning:f.value},{default:a(()=>[e(K,{data:C.value,loading:f.value,total:y.value,"row-key":"rank_id",onSelectionChange:B,onSortChange:N},{empty:a(()=>[o("div",ye,[f.value?u("",!0):(_(),p("div",ge,"暂无数据"))])]),default:a(()=>[e(c,{type:"selection",width:"32"}),e(c,{width:120,label:"会员名称",prop:"username"}),e(c,{label:"类型",prop:"type_name"},{default:a(({row:t})=>{var x;return[o("p",null,m(t.type_name),1),t.order_sn?(_(),p("div",fe,m(t.order_sn),1)):u("",!0),t.shop_id&&t.store?(_(),p("div",ve,m(t.store.store_title),1)):u("",!0),t.product_id>0?(_(),p("div",he,m(((x=t.product)==null?void 0:x.product_name)||"--"),1)):u("",!0)]}),_:1}),e(c,{label:"留言内容",prop:"content"},{default:a(({row:t})=>[b(m(t.content),1)]),_:1}),e(c,{width:160,label:"留言时间",prop:"add_time"}),e(c,{width:80,label:"回复",prop:"status_name"}),e(c,{width:150,fixed:"right",label:"操作"},{default:a(({row:t})=>[e(g(Q),{params:{act:"detail",id:t.id},isDrawer:"",path:"user/feedback/Info",title:"编辑会员留言",width:"600px",onOkCallback:d},{default:a(()=>[be]),_:2},1032,["params"]),e(I,{direction:"vertical"}),e(g(G),{params:{id:t.id},requestApi:g(T),onAfterDelete:d},{default:a(()=>[b("删除 ")]),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),y.value>0?(_(),p("div",ke,[e(g(H),{page:l.page,"onUpdate:page":s[3]||(s[3]=t=>l.page=t),size:l.size,"onUpdate:size":s[4]||(s[4]=t=>l.size=t),total:y.value,onCallback:d},null,8,["page","size","total"])])):u("",!0)])])])])}}});export{De as default};
