import{d as $,i as p,G as E,q as F,c as f,e as t,f as h,b as o,w as l,L as G,g as v,I as C,r as i,o as b,E as g,D as w,l as x,_ as M}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{_ as T}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as j}from"./Pagination-yOfjsBuR.js";import{u as H}from"./config-DNllFJyR.js";import{g as J,d as Q,b as R}from"./orderInvoice-uBjYMjqd.js";import{_ as z}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const W={class:"container"},X={class:"content_wrapper"},Y={key:0,class:"container"},Z={class:"lyecs-table-list-warp"},ee={class:"list-table-tool lyecs-search-warp"},te={class:"advanced-search-warp list-table-tool-row"},oe={class:"simple-form-warp"},se={class:"simple-form-field"},le={class:"form-group"},ae={class:"control-container"},ne={class:"simple-form-field"},ie={class:"form-group"},re={class:"control-container"},de={class:"simple-form-field"},ce={class:"form-group"},pe={class:"control-container"},_e={class:"simple-form-field"},ue={class:"list-table-tool-row"},me={class:"list-table-tool-col"},fe={key:0},ve={class:"table-container"},be={class:"btn-link"},ge={class:"empty-warp"},ye={key:0,class:"empty-bg"},he={key:0,class:"pagination-con"},we=$({__name:"List",setup(ke){const I=H(),V=p(),_=p(!0),y=p(0),u=p([]);p(!1);const a=E({page:1,size:I.get("page_size"),sort_field:"",sort_order:"",keyword:"",shop_type:0}),D=p(0),d=async()=>{_.value=!0;try{const n=await J({...a});V.value=n.filter_result,y.value=n.total}catch(n){C.error(n.message)}finally{_.value=!1}};F(()=>{d()});const c=()=>{d()},O=({prop:n,order:e})=>{a.sort_field=n,a.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",d()},U=async n=>{try{const e=await R(n,{ids:u.value});C.success(e.message),d()}catch(e){C.error(e.message)}},B=n=>{u.value=n.map(e=>e.id)};return(n,e)=>{const k=i("el-button"),L=i("el-input"),m=i("el-option"),S=i("el-select"),N=i("el-popconfirm"),q=i("el-space"),r=i("el-table-column"),A=i("el-divider"),K=i("el-table"),P=i("a-spin");return b(),f("div",W,[t("div",X,[D.value!=null?(b(),f("div",Y,[t("div",Z,[t("div",ee,[t("div",te,[t("div",oe,[t("div",se,[t("div",le,[t("div",ae,[o(L,{modelValue:a.keyword,"onUpdate:modelValue":e[0]||(e[0]=s=>a.keyword=s),name:"keyword",placeholder:"输入内容",onKeyup:G(c,["enter"]),clearable:"",onClear:c},{append:l(()=>[o(k,{onClick:c},{default:l(()=>e[6]||(e[6]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),t("div",ne,[t("div",ie,[e[7]||(e[7]=t("label",{class:"control-label"},[t("span",null,"发票类型：")],-1)),t("div",re,[o(S,{modelValue:a.invoice_type,"onUpdate:modelValue":e[1]||(e[1]=s=>a.invoice_type=s),clearable:"",onChange:c},{default:l(()=>[o(m,{value:1,label:"普通发票"}),o(m,{value:2,label:"增值发票"})]),_:1},8,["modelValue"])])])]),t("div",de,[t("div",ce,[e[8]||(e[8]=t("label",{class:"control-label"},[t("span",null,"发票状态：")],-1)),t("div",pe,[o(S,{modelValue:a.status,"onUpdate:modelValue":e[2]||(e[2]=s=>a.status=s),clearable:"",onChange:c},{default:l(()=>[o(m,{value:0,label:"待处理"}),o(m,{value:1,label:"已开"}),o(m,{value:2,label:"失败/作废"})]),_:1},8,["modelValue"])])])]),t("div",_e,[o(k,{type:"primary",onClick:c},{default:l(()=>e[9]||(e[9]=[g("搜索")])),_:1})])])]),t("div",ue,[t("div",me,[o(q,null,{default:l(()=>[o(N,{title:"您确认要批量删除所选数据吗？",onConfirm:e[3]||(e[3]=s=>U("del"))},{reference:l(()=>[o(k,{disabled:u.value.length===0},{default:l(()=>e[10]||(e[10]=[g("批量删除")])),_:1},8,["disabled"])]),_:1}),u.value.length>0?(b(),f("span",fe,[e[11]||(e[11]=g(" 已选择：")),t("b",null,w(u.value.length),1),e[12]||(e[12]=g(" 项 "))])):h("",!0)]),_:1})])])]),t("div",ve,[o(P,{spinning:_.value},{default:l(()=>[o(K,{data:V.value,loading:_.value,total:y.value,"row-key":"id",onSelectionChange:B,onSortChange:O},{empty:l(()=>[t("div",ge,[_.value?h("",!0):(b(),f("div",ye,"暂无数据"))])]),default:l(()=>[o(r,{type:"selection",width:"32"}),o(r,{label:"申请会员",prop:"username",width:"120"}),o(r,{label:"发票类型",width:"110"},{default:l(({row:s})=>[t("span",{style:x({color:s.invoice_type===2?"red":"black"})},w(s.invoice_type_name),5)]),_:1}),o(r,{label:"公司名称/抬头",prop:"company_name"}),o(r,{label:"金额(￥)",prop:"amount",width:"80"}),o(r,{label:"申请订单"},{default:l(({row:s})=>[o(v(z),{params:{act:"detail",id:s.order_id},showClose:!1,showOnOk:!1,title:"订单详情 "+s.order_sn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:d},{default:l(()=>[t("a",be,w(s.order_sn),1)]),_:2},1032,["params","title"])]),_:1}),o(r,{width:160,label:"申请日期",prop:"add_time"}),o(r,{label:"申请状态"},{default:l(({row:s})=>[t("span",{style:x({color:s.status===1?"green":s.status===2?"black":"red"})},w(s.status_name),5)]),_:1}),o(r,{width:150,fixed:"right",label:"操作"},{default:l(({row:s})=>[o(v(z),{params:{act:"detail",id:s.id},isDrawer:"",path:"finance/orderInvoice/Info",title:"编辑发票申请",width:"700px",onOkCallback:d},{default:l(()=>e[13]||(e[13]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),o(A,{direction:"vertical"}),o(v(T),{params:{id:s.id},requestApi:v(Q),onAfterDelete:d},{default:l(()=>e[14]||(e[14]=[g("删除")])),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),y.value>0?(b(),f("div",he,[o(v(j),{page:a.page,"onUpdate:page":e[4]||(e[4]=s=>a.page=s),size:a.size,"onUpdate:size":e[5]||(e[5]=s=>a.size=s),total:y.value,onCallback:d},null,8,["page","size","total"])])):h("",!0)])])])):h("",!0)])])}}}),Le=M(we,[["__scopeId","data-v-a3da6951"]]);export{Le as default};
