import{d as q,r as C,c,o as i,b as o,w as l,e as a,aR as Z,f as d,D as r,_ as F,K as tt,i as I,C as et,s as at,q as st,I as y,j as f,E as s,F as T,g as p,a as lt}from"./index-DrbzVNl6.js";import{a as ot,u as it,s as rt,o as L}from"./order-DqMQuu0g.js";import{M as z}from"./index-CeQDmMxd.js";import{O as dt}from"./OrderMoney-DZeJjleP.js";import{p as P}from"./format-CRgx78oe.js";import"./Verify.vue_vue_type_style_index_0_lang-B5aTvMR3.js";import"./zh-cn-W45FenWv.js";/* empty css                                                                    */import{P as nt}from"./ProductCard-DkH9tOY5.js";import ut from"./OperationLog-DolRuh1G.js";import{M as pt}from"./MobileCard-BSBggTtf.js";import{_}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import{S as ct}from"./index-1bQDzVVp.js";import"./Pagination-wR9huHyl.js";const mt={class:"tooltip-con"},vt={class:"tooltip-title"},ft={key:0,class:"iconfont-admin icon-yiwen"},yt={style:{"max-width":"300px"}},_t=q({__name:"Tooltip",props:{content:{type:String,default:""},ico:{type:Boolean,default:!1},placement:{type:String,default:"top"}},setup(N){const w=N;return(A,O)=>{const b=C("el-tooltip");return i(),c("div",mt,[o(b,{effect:"light",placement:w.placement,"show-after":100},{content:l(()=>[a("div",yt,r(w.content),1)]),default:l(()=>[a("div",vt,[Z(A.$slots,"default",{},void 0,!0),w.ico?(i(),c("i",ft)):d("",!0)])]),_:3},8,["placement"])])}}}),bt=F(_t,[["__scopeId","data-v-52ec2082"]]),kt={key:0},gt={key:0,class:"container-card"},xt={class:"border-bottom"},Ct={key:0,class:"button-card babyBlue pd20"},Ot={key:1},wt={class:"container-card"},St={class:"info-card"},It={class:"card-title"},ht={class:"min-title"},Nt={class:"card-li"},At={class:"li-info"},Dt={class:"card-li"},Tt={class:"li-info"},zt={class:"card-li"},Pt={class:"li-info"},$t={key:0,class:"card-li"},Bt={class:"li-info"},Rt={key:1,class:"card-li"},Vt={class:"li-info"},Et={key:2,class:"card-li"},Mt={class:"li-info"},Lt={class:"card-li"},qt={class:"li-info"},Ft={class:"card-li"},Wt={class:"li-info"},jt={class:"card-title"},Gt={class:"min-title"},Kt={class:"card-li"},Ut={class:"li-info"},Ht={class:"card-li"},Jt={class:"li-info"},Qt={class:"card-li"},Xt={class:"li-info"},Yt={class:"card-li"},Zt={class:"li-info"},te={class:"card-title"},ee={class:"card-li"},ae={class:"li-info"},se={class:"card-li"},le={class:"li-info"},oe={class:"container-card"},ie={class:"title"},re={class:"product-card-tp"},de={key:0,class:"gift"},ne={key:1},ue={class:"total"},pe={class:"gray",style:{"margin-right":"16px"}},ce={class:"title"},me={key:1,class:"container-card"},ve={class:"title"},fe=q({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isParent:{type:Boolean,default:!1},isDialog:Boolean},emits:["submitCallback","callback","update:confirmLoading","close"],setup(N,{expose:w,emit:A}){tt();const O=A,b=N,g=I(!0),D=et().currentRoute.value.query,$=I(b.isDialog?b.act:String(D.act)),S=I(b.isDialog?b.id:Number(D.id)),x=I(b.isDialog?b.isParent:!!D.isParent),W=$.value==="add"?"create":"update",j=at(),e=I({balance:0,couponAmount:0,pointsAmount:0,productAmount:0,totalProductWeight:0,orderId:0,items:[],payType:0,availableActions:{},totalAmount:0,paidAmount:0,updateOrderSn:0,unpaidAmount:0});st(()=>{g.value=!0,B()});const B=async()=>{try{const u=await ot($.value,{id:S.value});Object.assign(e.value,u)}catch(u){y.error(u.message),O("close")}finally{g.value=!1}},G=()=>{z.confirm({title:"确认拆分订单吗？",onOk:async()=>{try{const u=await rt({id:S.value});y.success("操作成功"),v()}catch(u){y.error(u.message)}finally{g.value=!1}}})},K=()=>{z.confirm({title:"确认删除订单吗？",content:"被删除的订单可以通过筛选查找并恢复",onOk:async()=>{try{const u=await L("delOrder",{id:S.value});y.success("操作成功"),v()}catch(u){y.error(u.message)}finally{g.value=!1}}})},U=()=>{z.confirm({title:"确认订单已收货吗？",onOk:async()=>{try{const u=await L("confirmReceipt",{id:S.value});y.success("操作成功"),v()}catch(u){y.error(u.message)}finally{g.value=!1}}})},v=(u={})=>{B(),O("callback",u)},H=async()=>{await j.value.validate();try{O("update:confirmLoading",!0);const u=await it(W,{id:S.value,...e.value});O("submitCallback",u),y.success("操作成功")}catch(u){y.error(u.message)}finally{O("update:confirmLoading",!1)}},J=()=>{H()},R=u=>{window.open(u,"_blank")};return w({onFormSubmit:J}),(u,t)=>{var E,M;const V=C("el-divider"),m=C("el-button"),Q=C("el-space"),k=C("el-table-column"),X=C("el-table"),Y=C("a-spin");return i(),c(T,null,[g.value?d("",!0):(i(),c("div",kt,[x.value?d("",!0):(i(),c("div",gt,[a("div",xt,[s(" 订单编号："+r(e.value.orderSn)+" ",1),o(V,{direction:"vertical"}),s(" 下单时间："+r(e.value.addTime)+" ",1),e.value.storeTitle?(i(),c(T,{key:0},[o(V,{direction:"vertical"}),a("span",null,"下单店铺："+r(e.value.storeTitle),1)],64)):d("",!0)]),o(Q,{size:10,class:"button-card"},{default:l(()=>[e.value.availableActions.setPaid?(i(),f(p(_),{key:0,params:{act:"setPaid",id:e.value.orderId},isDrawer:"",path:"order/order/src/Operation",title:"设置为已支付",width:"600px",onOkCallback:v},{default:l(()=>[o(m,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:l(()=>t[3]||(t[3]=[s(" 设置为已支付 ")])),_:1})]),_:1},8,["params"])):d("",!0),e.value.availableActions.cancelOrder?(i(),f(p(_),{key:1,params:{act:"cancelOrder",id:e.value.orderId},isDrawer:"",path:"order/order/src/Operation",title:"取消订单",width:"600px",onOkCallback:v},{default:l(()=>[o(m,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:l(()=>t[4]||(t[4]=[s(" 取消订单 ")])),_:1})]),_:1},8,["params"])):d("",!0),e.value.availableActions.delOrder?(i(),f(m,{key:2,bg:"",size:"small",text:"",type:"primary",onClick:K},{default:l(()=>t[5]||(t[5]=[s(" 删除订单 ")])),_:1})):d("",!0),e.value.availableActions.deliver?(i(),f(p(_),{key:3,params:{act:"detail",id:e.value.orderId},title:"订单发货 "+e.value.orderSn,isDrawer:"",path:"order/order/src/ToShip",width:"900px",onOkCallback:v},{default:l(()=>[o(m,{bg:"",size:"small",text:"",type:"danger"},{default:l(()=>t[6]||(t[6]=[s(" 去发货 ")])),_:1})]),_:1},8,["params","title"])):d("",!0),e.value.availableActions.confirmReceipt?(i(),f(m,{key:4,bg:"",size:"small",text:"",type:"primary",onClick:U},{default:l(()=>t[7]||(t[7]=[s(" 确认已收货 ")])),_:1})):d("",!0),e.value.availableActions.splitOrder?(i(),f(m,{key:5,bg:"",size:"small",text:"",type:"danger",onClick:G},{default:l(()=>[t[8]||(t[8]=s(" 拆分店铺订单")),o(p(bt),{ico:"",content:"该订单来自多个店铺且还未拆分，在做任何操作前，您需要先拆分该订单"})]),_:1})):d("",!0),o(p(_),{params:{act:"detail",id:e.value.orderId,valueName:"adminNote"},isDrawer:"",path:"order/order/src/EditRemark",title:"编辑备注",width:"600px",onOkCallback:v},{default:l(()=>[o(m,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:l(()=>t[9]||(t[9]=[s(" 商家备注 ")])),_:1})]),_:1},8,["params"]),o(m,{bg:"",size:"small",text:"",type:"primary",onClick:t[0]||(t[0]=n=>R(`/admin/print/orderPrint?ids=${e.value.orderId}`))},{default:l(()=>t[10]||(t[10]=[s(" 打印订单 ")])),_:1}),e.value.wayBill?(i(),f(m,{key:6,bg:"",size:"small",text:"",type:"primary",onClick:t[1]||(t[1]=n=>R(`/admin/print/waybill?id=${e.value.orderId}`))},{default:l(()=>t[11]||(t[11]=[s(" 打印面单 ")])),_:1})):d("",!0)]),_:1}),e.value.stepStatus?(i(),c("div",Ct,[o(p(ct),{current:e.value.stepStatus.current,size:"small",status:e.value.stepStatus.status,items:e.value.stepStatus.steps},null,8,["current","status","items"])])):d("",!0),e.value.adminNote?(i(),c("div",Ot,[t[13]||(t[13]=a("span",{class:"orange"},"商家备注：",-1)),s(r(e.value.adminNote)+" ",1),o(p(_),{params:{act:"detail",id:e.value.orderId,valueName:"adminNote"},isDrawer:"",path:"order/order/src/EditRemark",title:"编辑备注",width:"600px",onOkCallback:v},{default:l(()=>[o(m,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:l(()=>t[12]||(t[12]=[s(" 修改 ")])),_:1})]),_:1},8,["params"])])):d("",!0)])),a("div",wt,[t[33]||(t[33]=a("div",{class:"title"},"订单明细",-1)),a("div",St,[a("div",It,[a("div",ht,[t[15]||(t[15]=s(" 收货人信息 ")),x.value?d("",!0):(i(),f(p(_),{key:0,params:{act:"detail",id:e.value.orderId,form:e.value},isDrawer:"",path:"order/order/src/EditConsignee",title:"编辑收货人信息",width:"550px",onOkCallback:v},{default:l(()=>[o(m,{bg:"",class:"ml10",size:"small",text:"",type:"primary"},{default:l(()=>t[14]||(t[14]=[s(" 编辑 ")])),_:1})]),_:1},8,["params"]))]),a("ul",null,[a("li",Nt,[t[16]||(t[16]=s(" 会员名称：")),a("span",At,r(((E=e.value.user)==null?void 0:E.nickname)||((M=e.value.user)==null?void 0:M.username)||"--"),1)]),a("li",Dt,[t[17]||(t[17]=s("     收货人：")),a("span",Tt,r(e.value.consignee?e.value.consignee:"--"),1)]),a("li",zt,[t[18]||(t[18]=s(" 联系电话：")),a("span",Pt,[o(pt,{mobile:e.value.mobile},null,8,["mobile"])])]),e.value.telephone?(i(),c("li",$t,[t[19]||(t[19]=s(" 手机：")),a("span",Bt,r(e.value.telephone?e.value.telephone:"--"),1)])):d("",!0),e.value.email?(i(),c("li",Rt,[t[20]||(t[20]=s(" 电子邮件：")),a("span",Vt,r(e.value.email),1)])):d("",!0),e.value.postcode?(i(),c("li",Et,[t[21]||(t[21]=s(" 邮政编码：")),a("span",Mt,r(e.value.postcode),1)])):d("",!0),a("li",Lt,[t[22]||(t[22]=s(" 收货地址： ")),a("span",qt,r(e.value.userAddress?e.value.userAddress:"--"),1)]),a("li",Ft,[t[23]||(t[23]=s(" 订单备注： ")),a("span",Wt,r(e.value.buyerNote?e.value.buyerNote:"--"),1)])])]),a("div",jt,[a("div",Gt,[t[25]||(t[25]=s(" 配送信息 ")),x.value?d("",!0):(i(),f(p(_),{key:0,params:{act:"detail",id:e.value.orderId},isDrawer:"",path:"order/order/src/EditShipping",title:"编辑配送方式",width:"600px",onOkCallback:v},{default:l(()=>[o(m,{disabled:!e.value.availableActions.modifyShippingInfo,bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:l(()=>t[24]||(t[24]=[s(" 编辑 ")])),_:1},8,["disabled"])]),_:1},8,["params"]))]),a("ul",null,[a("li",Kt,[t[26]||(t[26]=s(" 配送方式：")),a("span",Ut,r(e.value.shippingTypeName),1)]),a("li",Ht,[t[27]||(t[27]=s(" 发货时间：")),a("span",Jt,r(e.value.shippingTime?e.value.shippingTime:"--"),1)]),a("li",Qt,[t[28]||(t[28]=s(" 物流名称：")),a("span",Xt,r(e.value.logisticsName?e.value.logisticsName:"--"),1)]),a("li",Yt,[t[29]||(t[29]=s(" 发货单号：")),a("span",Zt,r(e.value.trackingNo?e.value.trackingNo:"--"),1)])])]),a("div",te,[t[32]||(t[32]=a("div",{class:"min-title"},"付款信息",-1)),a("ul",null,[a("li",ee,[t[30]||(t[30]=s(" 支付方式：")),a("span",ae,r(e.value.payTypeId===1?"在线支付":e.value.payTypeId===2?"货到付款":"线下支付"),1)]),a("li",se,[t[31]||(t[31]=s(" 付款时间：")),a("span",le,r(e.value.payTime?e.value.payTime:"--"),1)])])])])]),a("div",oe,[a("div",ie,[t[35]||(t[35]=s(" 商品信息 ")),x.value?d("",!0):(i(),f(p(_),{key:0,params:{act:"detail",id:e.value.orderId},isDrawer:"",path:"order/order/src/EditProduct",title:"编辑商品信息",width:"1050px",onOkCallback:v},{default:l(()=>[o(m,{disabled:!e.value.availableActions.modifyOrder,bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:l(()=>t[34]||(t[34]=[s(" 编辑 ")])),_:1},8,["disabled"])]),_:1},8,["params"]))]),o(X,{data:e.value.items},{default:l(()=>[o(k,{label:"商品名称",prop:"productId",width:"220"},{default:l(({row:n})=>[a("div",re,[n.isGift?(i(),c("div",de,"赠")):d("",!0),o(p(nt),{picThumb:n.picThumb,productId:n.productId,productName:n.productName,productType:n.productType,url:n.url},null,8,["picThumb","productId","productName","productType","url"])])]),_:1}),o(k,{label:"属性",prop:"productAttr"},{default:l(({row:n})=>[s(r(n.skuValue||"无属性"),1)]),_:1}),o(k,{label:"附加规格",prop:"extraSkuData"},{default:l(({row:n})=>[n.extraSkuData&&n.extraSkuData.length>0?(i(!0),c(T,{key:0},lt(n.extraSkuData,h=>(i(),c("div",{class:"extraskudata",key:h},r(h.attrName+h.attrValue+p(P)(h.totalAttrPrice)),1))),128)):(i(),c("div",ne,"无附加规格"))]),_:1}),o(k,{label:"商品编号",width:"150"},{default:l(({row:n})=>[s(r(n.productSn),1)]),_:1}),o(k,{label:"价格",prop:"price"},{default:l(({row:n})=>[s(r(p(P)(n.price)),1)]),_:1}),o(k,{label:"数量",prop:"quantity"}),o(k,{label:"库存",prop:"stock"},{default:l(({row:n})=>[s(r(n.stock||"-"),1)]),_:1}),o(k,{label:"小计",prop:"subtotal"})]),_:1},8,["data"]),a("div",ue,[a("span",pe,"商品总重量："+r(e.value.totalProductWeight)+"kg",1),a("span",null,"合计："+r(p(P)(e.value.productAmount)),1)]),a("div",ce,[t[37]||(t[37]=s(" 订单金额 ")),x.value?d("",!0):(i(),f(p(_),{key:0,params:{act:"detail",id:e.value.orderId},isDrawer:"",path:"order/order/src/EditMoney",title:"编辑金额",width:"600px",onOkCallback:v},{default:l(()=>[o(m,{disabled:!e.value.availableActions.modifyOrderMoney,bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:l(()=>t[36]||(t[36]=[s(" 编辑 ")])),_:1},8,["disabled"])]),_:1},8,["params"]))]),o(p(dt),{modelValue:e.value,"onUpdate:modelValue":t[2]||(t[2]=n=>e.value=n)},null,8,["modelValue"])]),x.value?d("",!0):(i(),c("div",me,[a("div",ve,[t[39]||(t[39]=s(" 物流追踪 ")),o(m,{bg:"",class:"ml10",size:"small",text:"",type:"primary"},{default:l(()=>t[38]||(t[38]=[s(" 展开 ")])),_:1})])])),x.value?d("",!0):(i(),f(ut,{key:2,orderId:e.value.orderId},null,8,["orderId"]))])),o(Y,{spinning:g.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])],64)}}}),De=F(fe,[["__scopeId","data-v-3343578d"]]);export{De as default};
