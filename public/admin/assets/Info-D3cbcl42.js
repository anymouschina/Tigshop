import{d as F,i as s,C as T,s as q,q as L,r as u,c as g,o as d,e as a,b as i,f as h,D as o,j,w as k,I as m,_ as U}from"./index-DrbzVNl6.js";import{a as E,u as M}from"./feedback-2qMJ5aMQ.js";const O={class:"container"},z={class:"lyecs-form-table"},A={key:0},G={class:"lyecs-form-table"},H={style:{"text-align":"end"}},J={class:"content_wrapper"},K={class:"lyecs-form-table"},P=F({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(I,{expose:w,emit:N}){const n=N,l=I,p=s(!0),f=T().currentRoute.value.query,_=s(l.isDialog?l.act:String(f.act)),v=s(l.isDialog?l.id:Number(f.id)),x=_.value==="add"?"create":"update",y=q(),e=s({product:{productId:0,productName:""}}),c=s({product:{productId:0,productName:""}}),C=async()=>{try{const t=await E(_.value,{id:v.value});Object.assign(e.value,t)}catch(t){m.error(t.message),n("close")}finally{p.value=!1}};L(()=>{C()});const S=async()=>{await y.value.validate();try{n("update:confirmLoading",!0);let t=0;e.value.status==1&&(t=e.value.id);const r=await M(x,{id:v.value,parentId:t,...c.value});n("submitCallback",r),m.success("操作成功")}catch(t){m.error(t.message)}finally{n("update:confirmLoading",!1)}};return w({onFormSubmit:()=>{S()}}),(t,r)=>{const b=u("el-divider"),D=u("TigInput"),R=u("el-form-item"),V=u("el-form");return d(),g("div",O,[a("div",z,[a("h2",null,[a("span",null,"类型:"+o(e.value.typeName),1),e.value.productId?(d(),g("span",A,"【 "+o(e.value.product.productName)+" 】",1)):h("",!0)])]),i(b),a("div",G,[a("p",null,"主题:"+o(e.value.title),1),a("p",null,"内容: "+o(e.value.content),1),a("p",H,"【 留言板 】"+o(e.value.username)+" @ "+o(e.value.addTime),1)]),i(b),a("div",J,[a("div",K,[p.value?h("",!0):(d(),j(V,{key:0,ref_key:"formRef",ref:y,model:c.value,"label-width":"auto"},{default:k(()=>[i(R,{label:"回复内容",prop:"content"},{default:k(()=>[i(D,{classType:"tig-form-input",type:"textarea",rows:5,modelValue:c.value.content,"onUpdate:modelValue":r[0]||(r[0]=B=>c.value.content=B)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]))])])])}}}),Y=U(P,[["__scopeId","data-v-9c1c3f2a"]]);export{Y as default};
