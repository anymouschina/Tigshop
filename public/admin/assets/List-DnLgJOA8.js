import{d as O,K as E,i as f,G as M,q as $,c as u,e as t,f as _,b as a,M as j,w as o,g,I as k,r as m,o as c,F as q,a as G,j as J,E as p,D as d,_ as A}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";/* empty css                                                                    */import{P as H}from"./Pagination-wR9huHyl.js";import{u as Q,i as R,p as W}from"./format-CRgx78oe.js";import{g as X,a as Y,b as Z}from"./product-D_r7UUdP.js";import{_ as ss}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const es={class:"container"},ts={class:"content_wrapper"},as={class:"lyecs-table-list-warp"},os={class:"list-table-tool lyecs-search-warp"},ls={class:"advanced-search-warp list-table-tool-row"},ns={class:"simple-form-warp"},is={class:"simple-form-field"},ds={class:"form-group"},rs={class:"control-container"},cs={class:"simple-form-field"},ps={class:"form-group"},us={class:"control-container"},ms={class:"simple-form-field"},_s={class:"form-group"},fs={class:"control-container"},bs={class:"simple-form-field"},vs={class:"table-container"},gs={class:"flex"},ys={key:0,class:"span-pic"},hs=["href"],Cs=["src"],ks={class:"span-product-con"},Ps={class:"span-product-name"},Ss={key:0,class:"span-product-brand"},Ns={class:"span-con"},Vs={key:1,class:"span-product-brand"},Is={class:"span-con green"},Ts={key:2,class:"span-product-brand"},ws={class:"span-con green"},xs={key:3},zs={class:"empty-warp"},Fs={key:0,class:"empty-bg"},Bs={key:0,class:"pagination-con"},Ls={key:0,class:"selected-action-warp"},Us={class:"selected-action"},Ds=O({__name:"List",setup(Ks){const T=E(),S=f([]),y=f(!0),h=f(0);f(0);const C=f([]),n=M({page:1,size:T.pageSize,sortField:"",sortOrder:"",productName:"",status:""});f(localStorage.getItem("adminType"));const b=async()=>{y.value=!0;try{const l=await X({...n});S.value=l.records,h.value=l.total}catch(l){k.error(l.message)}finally{y.value=!1}},N=f(),w=async()=>{try{const l=await Y();N.value=l}catch(l){k.error(l.message)}};$(()=>{b(),w()});const v=()=>{b()},x=({prop:l,order:s})=>{n.sortField=l,n.sortOrder=s=="ascending"?"asc":s=="descending"?"desc":"",b()},z=async l=>{try{const s=await Z(l,{ids:C.value});k.success("操作成功"),b()}catch(s){k.error(s.message)}},F=l=>{C.value=l.map(s=>s.productId)};return(l,s)=>{const B=m("TigInput"),P=m("el-option"),V=m("el-select"),L=m("el-button"),r=m("el-table-column"),I=m("el-space"),U=m("el-table"),D=m("a-spin"),K=m("el-popconfirm");return c(),u("div",es,[t("div",ts,[t("div",as,[t("div",os,[t("div",ls,[t("div",ns,[t("div",is,[t("div",ds,[s[6]||(s[6]=t("label",{class:"control-label"},[t("span",null,"商品名称：")],-1)),t("div",rs,[a(B,{modelValue:n.productName,"onUpdate:modelValue":s[0]||(s[0]=e=>n.productName=e),name:"productName",placeholder:"输入商品名称/货号",onKeyup:j(v,["enter"]),clearable:"",onClear:v},null,8,["modelValue"])])])]),t("div",cs,[t("div",ps,[s[7]||(s[7]=t("label",{class:"control-label"},[t("span",null,"商品状态：")],-1)),t("div",us,[a(V,{modelValue:n.status,"onUpdate:modelValue":s[1]||(s[1]=e=>n.status=e),clearable:"",onChange:v},{default:o(()=>[a(P,{label:"上架",value:1}),a(P,{label:"下架",value:0})]),_:1},8,["modelValue"])])])]),t("div",ms,[t("div",_s,[s[8]||(s[8]=t("label",{class:"control-label"},[t("span",null,"推广类型：")],-1)),t("div",fs,[a(V,{modelValue:n.salesmanProductType,"onUpdate:modelValue":s[2]||(s[2]=e=>n.salesmanProductType=e),clearable:"",onChange:v},{default:o(()=>[(c(!0),u(q,null,G(N.value,(e,i)=>(c(),J(P,{label:e,value:i},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])]),t("div",bs,[a(L,{type:"primary",onClick:v},{default:o(()=>s[9]||(s[9]=[p("搜索")])),_:1})])])])]),t("div",vs,[a(D,{spinning:y.value},{default:o(()=>[a(U,{data:S.value,total:h.value,"row-key":"productId",onSelectionChange:F,onSortChange:x},{empty:o(()=>[t("div",zs,[y.value?_("",!0):(c(),u("div",Fs,"暂无数据"))])]),default:o(()=>[a(r,{type:"selection",width:"32"}),a(r,{label:"商品",prop:"productId","min-width":150},{default:o(({row:e})=>[t("div",gs,[e.picThumb?(c(),u("div",ys,[t("a",{href:g(Q)({path:"product",sn:e.productSn}),target:"_blank"},[t("img",{src:g(R)(e.picThumb),height:"50",width:"50"},null,8,Cs)],8,hs)])):_("",!0),t("div",ks,[t("div",Ps,[t("div",null,d(e.productName),1)]),e.brandName?(c(),u("p",Ss,[s[10]||(s[10]=t("span",{class:"span-tit"},"商品：",-1)),t("span",Ns,d(e.brandName),1)])):_("",!0),e.storeTitle?(c(),u("p",Vs,[s[11]||(s[11]=t("span",{class:"span-tit"},"店铺：",-1)),t("span",Is,d(e.storeTitle),1)])):_("",!0),e.suppliersName?(c(),u("p",Ts,[s[12]||(s[12]=t("span",{class:"span-tit"},"供应商：",-1)),t("span",ws,d(e.suppliersName),1)])):_("",!0),e.type===2?(c(),u("p",xs,s[13]||(s[13]=[t("span",{class:"span-con green"},"【虚拟商品】",-1)]))):_("",!0)])])]),_:1}),a(r,{label:"金额(元)"},{default:o(({row:e})=>[p(d(g(W)(e.productPrice)),1)]),_:1}),a(r,{label:"库存"},{default:o(({row:e})=>[p(d(e.productStock),1)]),_:1}),a(r,{label:"是否参与推广"},{default:o(({row:e})=>[p(d(e.salesmanProduct&&e.salesmanProduct.isJoin==1?"参与":"不参与"),1)]),_:1}),a(r,{label:"佣金"},{default:o(({row:e})=>s[14]||(s[14]=[p(" 默认比例 ")])),_:1}),a(r,{label:"商品佣金"},{default:o(({row:e})=>{var i;return[p(d(((i=e.salesmanProduct)==null?void 0:i.productCommission.productCommission)||"--"),1)]}),_:1}),a(r,{label:"下级分销员卖货提成"},{default:o(({row:e})=>{var i;return[p(d(((i=e.salesmanProduct)==null?void 0:i.productCommission.subCommission)||"--"),1)]}),_:1}),a(r,{label:"商品状态"},{default:o(({row:e})=>[p(d(e.productStatus===1?"上架":"下架"),1)]),_:1}),a(r,{label:"操作时间"},{default:o(({row:e})=>{var i;return[p(d((i=e.salesmanProduct)==null?void 0:i.updateTime),1)]}),_:1}),a(r,{width:120,fixed:"right",label:"操作"},{default:o(({row:e})=>[a(I,{size:0},{default:o(()=>{var i;return[a(g(ss),{maskClose:!1,params:{act:(i=e.salesmanProduct)!=null&&i.salesmanProductId?"detail":"add",id:e.productId,salesmanProduct:e.salesmanProduct},isDrawer:"",path:"salesman/product/Info",title:"设置商品佣金",width:"800px",onOkCallback:b},{default:o(()=>s[15]||(s[15]=[t("a",{class:"btn-link"},"设置佣金",-1)])),_:2},1032,["params"])]}),_:2},1024)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),h.value>0?(c(),u("div",Bs,[a(g(H),{page:n.page,"onUpdate:page":s[3]||(s[3]=e=>n.page=e),size:n.size,"onUpdate:size":s[4]||(s[4]=e=>n.size=e),total:h.value,onCallback:b},null,8,["page","size","total"])])):_("",!0)]),C.value.length>0?(c(),u("div",Ls,[t("div",Us,[a(I,null,{default:o(()=>[t("span",null,[s[16]||(s[16]=p("已选择：")),t("b",null,d(C.value.length),1),s[17]||(s[17]=p(" 项"))]),a(K,{title:"您确认要批量删除所选数据吗？",onConfirm:s[5]||(s[5]=e=>z("del"))},{reference:o(()=>s[18]||(s[18]=[])),_:1})]),_:1})])])):_("",!0)])])])}}}),As=A(Ds,[["__scopeId","data-v-7b3ae3cc"]]);export{As as default};
