import{d as B,i as x,C as J,bo as X,dT as A,dQ as F,ad as j,q as Y,r as y,c as n,o as t,F as h,e,b as v,a3 as K,f as r,g as s,D as g,dG as ae,e7 as le,a as q,a4 as ie,j as p,w as l,dE as ue,aQ as Q,I as W,K as re,d$ as ce,_ as E,bp as de,n as T,T as pe,A as me}from"./index-DrbzVNl6.js";import{i as N,u as G,r as H}from"./format-CRgx78oe.js";import{g as _e}from"./adminMsg-DO0gQXrn.js";import{l as he,M as ve,c as fe,p as ge}from"./pageTabs-CGZOJyNL.js";import{S as ye}from"./SelectShop-FCkYZIux.js";import{u as ke}from"./menus-Cfe5Mqim.js";import{l as we}from"./logo_blue2-CgAHBmsI.js";import{u as O}from"./theme-qm3k10fq.js";import{_ as Se,a as be}from"./pageHeader.vue_vue_type_style_index_0_lang-UMB4eQ9W.js";import"./index-CeQDmMxd.js";import"./version-CL9k3sYf.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";import"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-BDvYUQtN.js";import"./vuedraggable.umd-DAKh-e3Q.js";import"./Image.vue_vue_type_script_setup_true_lang-BWzCs9jv.js";import"./authority-C-nKXejU.js";const xe={class:"page-top"},Ce={class:"page-top-warp"},Le={class:"top-bar-left"},Ie={class:"head_logo"},$e=["src"],Me=["src"],Te={class:"top-bar-item wap-show",style:{display:"none"}},Ve=["href"],ze={key:0,class:"shop-tit"},Ne={key:0,class:"label"},qe={key:1,class:"label green"},Ae={key:1},Be={class:"top-bar-item top-bar-search-warp"},Pe={class:"top-bar-search"},De={class:"search-menu-con"},Ue={class:"search-menu-list"},Fe=["onClick"],je={key:0,class:"empty"},Ee={class:"top-bar-right"},Oe={class:"top-bar-item mr10"},Re={class:"auth-img"},Ke=["src"],Qe={class:"top-bar-item openShop-btn"},We=["href"],Ge={class:"top-bar-item top-bar-user",id:"dropdown-memu"},He={class:"admin-user-warp"},Je={class:"top-bar-btn",href:"javascript:;"},Xe={key:0,class:"admin-user-photo"},Ye=["src"],Ze=["src"],et={key:1,class:"admin-user-photo"},tt=["src"],st=["src"],ot={class:"admin-user-name"},nt={class:"dropdown-memu top-bar-memu"},at={class:"entrance-list"},lt={class:"admin_exit"},it=B({__name:"pageTopBar",setup(P){const{themeInfo:C}=O(),f=x(localStorage.getItem("adminType")),i=J(),m=X(),_=m.licensedData,k=A(),w=x(""),S=x([]),c=x(!1),b=async I=>{try{const o=await _e({keyword:w.value});S.value=o,w.value&&(c.value=!0)}catch(o){W.error(o.message)}},$=I=>{c.value=!1,w.value="",S.value=[],i.push({path:"/"+I})},V=()=>{w.value==""&&(c.value=!1)},D=()=>{c.value=!1},{logout:U,updateUserInfo:u}=F(),a=j(()=>F().userInfo),d=j(()=>F().shopInfo);x(0);const R=async()=>{try{const I=await fe(),o=re();u(),o.updateConfig(),k.mainMenu=await ke(),ce.success({message:"缓存已清除",description:"缓存清除后可刷新页面更新效果"})}catch(I){W.error(I.message)}},Z=async()=>{U()},M=x(!1),ee=()=>{M.value=!0},te=()=>{M.value=!1};return Y(()=>{m._getLicensed()}),(I,o)=>{const se=y("TigInput"),z=y("router-link"),oe=y("a-dropdown"),ne=y("el-dialog");return t(),n(h,null,[e("div",xe,[e("div",Ce,[e("div",Le,[e("div",Ie,[s(C).navTheme==="light"?(t(),n("img",{key:0,class:"logo_img",src:s(_).adminLightLogo&&s(_).adminLightLogo!==null?s(N)(s(_).adminLightLogo):s(we)},null,8,$e)):r("",!0),s(C).navTheme==="dark"?(t(),n("img",{key:1,class:"logo_img",src:s(_).adminLightLogo&&s(_).adminLightLogo!==null?s(N)(s(_).adminLightLogo):s(he)},null,8,Me)):r("",!0)]),e("div",{class:"top-bar-item wap-show",onClick:o[0]||(o[0]=L=>s(k).menuActive=!s(k).menuActive)},o[3]||(o[3]=[e("span",{class:"open-menu-btn icon-zhankai iconfont"},null,-1)])),o[5]||(o[5]=e("div",{class:"top-bar-item wap-show"},[e("a",{class:"wap-refresh-btn icon-shuaxin iconfont",href:"javascript:;",onclick:"location.reload();"})],-1)),e("div",Te,[e("a",{class:"wap-openShop-btn icon-wangdianwaibao iconfont",href:s(G)("/"),target:"_blank"},null,8,Ve)]),f.value==="shop"?(t(),n("div",ze,[e("h2",null,"当前店铺: "+g(d.value.shopTitle),1),d.value.status===0?(t(),n("div",Ne,g(d.value.statusText),1)):(t(),n("div",qe,g(d.value.statusText),1))])):K((t(),n("div",Ae,[e("div",Be,[e("div",Pe,[v(se,{modelValue:w.value,"onUpdate:modelValue":o[1]||(o[1]=L=>w.value=L),style:{width:"300px"},placeholder:"在这里查找功能，一键直达","prefix-icon":s(le),onInput:b,onBlur:V},null,8,["modelValue","prefix-icon"])])]),K(e("div",De,[o[4]||(o[4]=e("div",{class:"search-menu-title"},"搜索结果",-1)),e("div",Ue,[(t(!0),n(h,null,q(S.value,L=>(t(),n("div",{class:"menu-item",onClick:ht=>$(L.routeLink)},[e("p",null,g(L.authorityName),1)],8,Fe))),256)),S.value.length<1?(t(),n("div",je,"没有搜索到栏目！")):r("",!0)])],512),[[ie,c.value]])])),[[s(ae),D]])]),e("div",Ee,[e("div",Oe,[e("div",Re,[f.value!=="shop"?(t(),p(z,{key:0,to:{path:"/setting/licensed/index"}},{default:l(()=>[e("img",{src:s(ue)(),style:{height:"25px","margin-top":"2px"}},null,8,Ke)]),_:1})):r("",!0)])]),v(ve),e("div",Qe,[e("a",{class:"top-bar-btn",href:s(G)("/"),target:"_blank"},o[6]||(o[6]=[e("i",{class:"iconfont icon-guanli"},null,-1),e("span",null,"查看店铺",-1)]),8,We)]),e("div",Ge,[v(oe,null,{overlay:l(()=>[e("div",nt,[e("div",at,[v(z,{to:{path:"/authority/account_editing/index"}},{default:l(()=>o[8]||(o[8]=[e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-gerenshezhi",style:{"font-size":"22px"}}),e("span",null,"管理账号")],-1)])),_:1}),e("p",{class:"entrance",onClick:R},o[9]||(o[9]=[e("i",{class:"iconfont icon-qingchuhuancun",style:{"font-size":"22px"}},null,-1),e("span",null,"清除缓存",-1)])),f.value==="shop"?(t(),p(z,{key:0,to:{path:"/merchant_setting/shop_team"}},{default:l(()=>o[10]||(o[10]=[e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-quanxian",style:{"font-size":"22px"}}),e("span",null,"店铺设置")],-1)])),_:1})):(t(),p(z,{key:1,to:{path:"/setting/config/base"}},{default:l(()=>o[11]||(o[11]=[e("p",{class:"entrance lyecs-openPage"},[e("i",{class:"iconfont icon-quanxian",style:{"font-size":"22px"}}),e("span",null,"后台设置")],-1)])),_:1}))]),e("div",null,[e("div",lt,[f.value==="shop"?(t(),n(h,{key:0},[e("a",{onClick:ee},o[12]||(o[12]=[e("span",null,"切换店铺",-1)])),o[13]||(o[13]=e("span",{style:{color:"#f0f2f5"}},"｜",-1))],64)):r("",!0),e("a",{onClick:Z},o[14]||(o[14]=[e("span",null,"退出登录",-1)]))])])])]),default:l(()=>[e("div",He,[e("a",Je,[f.value!=="shop"?(t(),n("span",Xe,[s(Q)(String(a.value.avatar))=="def"?(t(),n("img",{key:0,src:s(H)(a.value.avatar)},null,8,Ye)):(t(),n("img",{key:1,src:s(N)(a.value.avatar)},null,8,Ze))])):r("",!0),f.value=="shop"?(t(),n("span",et,[s(Q)(String(d.value.shopLogo))=="def"?(t(),n("img",{key:0,src:s(H)(d.value.shopLogo)},null,8,tt)):(t(),n("img",{key:1,src:s(N)(d.value.shopLogo)},null,8,st))])):r("",!0),e("div",ot,g(/^1[3-9]\d{9}$/.test(a.value.username)?a.value.username.replace(/(\d{3})\d{4}/,"$1****"):a.value.username),1),o[7]||(o[7]=e("i",{class:"iconfont icon-xiala"},null,-1))])])]),_:1})])])])]),v(ne,{class:"page-top","show-close":!1,"z-index":12,modelValue:M.value,"onUpdate:modelValue":o[2]||(o[2]=L=>M.value=L),width:"500px"},{default:l(()=>[M.value?(t(),p(ye,{key:0,onClosePopup:te,isIndex:!0,username:a.value.username},null,8,["username"])):r("",!0)]),_:1},8,["modelValue"])],64)}}}),ut=E(it,[["__scopeId","data-v-e87e6b25"]]),rt=B({__name:"pageContainer",setup(P){const C=de();x(localStorage.getItem("adminType"));const f=A(),{themeInfo:i}=O();return(m,_)=>{const k=y("router-view");return t(),n(h,null,[_[0]||(_[0]=e("div",{class:"body-menu-mask"},null,-1)),e("div",{class:T(["main-warp",[s(f).childMenuShow?"child-menu-show":"child-menu-hide"]])},[e("div",{class:T(["page-grid-content",`admin-${s(i).navTheme}`])},[!m.$route.meta.is404&&s(i).isMultiLabel?(t(),p(ge,{key:0})):r("",!0),m.$route.meta.is404?r("",!0):(t(),p(Se,{key:1})),(t(),p(k,{key:s(C).routerKey})),m.$route.meta.is404?r("",!0):(t(),p(be,{key:2}))],2)],2)],64)}}}),ct=E(rt,[["__scopeId","data-v-7172473e"]]),dt={class:"page_left_menu_content"},pt={class:"menu_list",ref:"menu"},mt=B({__name:"pageLeftMenu",setup(P){const{themeInfo:C}=O();X().licensedData;const i=A(),m=J(),_=A(),k=x(""),w=j(()=>_.mainMenu);Y(()=>{k.value=m.currentRoute.value.name});const S=c=>{window.innerWidth<=756?(c.blank?window.open("/"+c.routeLink,"_blank"):m.push("/"+c.routeLink),i.menuActive=!1):(c.blank?window.open("/"+c.routeLink,"_blank"):m.push("/"+c.routeLink),me(),i.childMenuShow=!0)};return pe(()=>{k.value=m.currentRoute.value.name}),(c,b)=>{const $=y("el-menu-item"),V=y("el-sub-menu"),D=y("el-menu"),U=y("perfect-scrollbar");return t(),n(h,null,[s(i).childMenuShow?(t(),n("div",{key:0,class:"body-menu-mask",onClick:b[0]||(b[0]=u=>s(i).childMenuShow=!s(i).childMenuShow)})):r("",!0),e("div",{class:T(["page_left_menu",[s(i).childMenuShow?"child-menu-show":"child-menu-hide"]])},[e("div",dt,[v(U,{class:"main-menu"},{default:l(()=>[e("div",pt,[v(D,{"default-active":k.value,collapse:!s(i).childMenuShow,"unique-opened":s(C).uniqueOpened},{default:l(()=>[(t(!0),n(h,null,q(w.value,u=>(t(),n(h,{key:u.authorityId},[u.children.length&&u.isShow?(t(),p(V,{key:0,index:u.authoritySn},{title:l(()=>[e("i",{class:T(u.authorityIco)},null,2),e("span",null,g(u.authorityName),1)]),default:l(()=>[(t(!0),n(h,null,q(u.children,a=>(t(),n(h,null,[a.children&&a.children.length&&a.isShow?(t(),p(V,{key:0,index:a.authoritySn},{title:l(()=>[e("span",null,g(a.authorityName),1)]),default:l(()=>[(t(!0),n(h,null,q(a.children,d=>(t(),p($,{key:d.authorityId,index:d.authoritySn,onClick:R=>S(d)},{title:l(()=>[e("span",null,g(d.authorityName),1)]),_:2},1032,["index","onClick"]))),128))]),_:2},1032,["index"])):a.isShow?(t(),p($,{key:1,index:a.authoritySn,onClick:d=>S(a)},{title:l(()=>[e("span",null,g(a.authorityName),1)]),_:2},1032,["index","onClick"])):r("",!0)],64))),256))]),_:2},1032,["index"])):u.isShow?(t(),p($,{key:1,index:u.authoritySn,onClick:a=>S(u)},{title:l(()=>[e("i",{class:T(u.authorityIco)},null,2),e("span",null,g(u.authorityName),1)]),_:2},1032,["index","onClick"])):r("",!0)],64))),128))]),_:1},8,["default-active","collapse","unique-opened"])],512)]),_:1}),e("div",{class:"icon_menu",onClick:b[1]||(b[1]=u=>s(i).childMenuShow=!s(i).childMenuShow)},b[2]||(b[2]=[e("i",{class:"open-menu-btn icon-zhankai iconfont"},null,-1)]))])],2)],64)}}}),_t=E(mt,[["__scopeId","data-v-db446d8f"]]),zt=B({__name:"View",setup(P){return(C,f)=>{const i=y("router-view");return t(),n(h,null,[v(ut),v(_t),v(ct,null,{default:l(()=>[v(i)]),_:1})],64)}}});export{zt as default};
