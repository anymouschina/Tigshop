import"./index-B-GURfkM.js";import{d as _}from"./vuedraggable.umd-_1km55l4.js";import{u as h,i as M}from"./format-DFT-VJzO.js";import{d as k,m as y,i as r,aR as C,u as b,q as x,y as w,c as B,o as L,b as m,g as l,w as u,e as s}from"./index-CGYuOau0.js";import{_ as j}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";const A={class:"dec-goods-group-item dec-tip dec-goods-group-item-goods"},S={class:"dec-goods-group-item-con"},q={class:"item-goods-con"},E=["href","title"],F=["src"],N=["onClick"],G=k({__name:"ProductSelect",props:y({ids:{type:Array,default:[]},productList:{type:Array,default:[]},isMultiple:{type:Boolean,default:!1}},{ids:{default:[]},idsModifiers:{}}),emits:["update:ids"],setup(n){r(null);const i=n,{isMultiple:P}=C(i),a=r(i.productList),e=b(n,"ids");x(async()=>{e.value&&p()});const d=r(0);function p(){e.value.length>0?w({url:"product/product/list",method:"get",params:{ids:e.value.join(","),size:100,page:1}}).then(o=>{a.value=o.filter_result,d.value=o.total}):(a.value=[],d.value=0)}const g=o=>{console.log(e.value),i.isMultiple==!1&&(e.value=[]);for(let t in o)e.value.push(o[t]);d.value=e.value.length,p()},f=o=>{e.value.splice(o,1),a.value.splice(o,1)};return(o,t)=>(L(),B("div",null,[m(l(_),{class:"dec-goods-group-list","item-key":"prodcut_id",list:a.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:t[0]||(t[0]=()=>{}),onEnd:t[1]||(t[1]=()=>{})},{item:u(({element:c,index:v})=>[s("div",A,[s("div",S,[s("div",q,[s("a",{href:l(h)({path:"product",id:c.product_id}),target:"_blank",title:c.product_name},[s("img",{class:"item-goods-img",src:l(M)(c.pic_thumb)},null,8,F)],8,E)]),s("div",{class:"del-item",onClick:R=>f(v)},t[2]||(t[2]=[s("i",{class:"ico-decorate icon-dec-cha"},null,-1)]),8,N)])])]),footer:u(()=>[m(l(j),{isDrawer:"",onOkCallback:g,title:"选择商品",width:"600px",path:"product/product/src/SelectProduct",params:{selected_ids:e.value,isMultiple:i.isMultiple}},{default:u(()=>t[3]||(t[3]=[s("div",{class:"dec-goods-group-item dec-goods-group-add dec-tip","data-title":"添加商品"},[s("div",{class:"dec-goods-group-item-con"},[s("div",{class:"item-goods-con"},[s("a",{href:"javascript:;"},[s("i",{class:"ico-decorate icon-dec-jia"})])])])],-1)])),_:1},8,["params"])]),_:1},8,["list"])]))}});export{G as _};
