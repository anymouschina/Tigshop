/* empty css             */import"./index-6c62cf9b.js";import{d as q,j as f,I as L,x as O,r as i,o as g,c as v,e as o,b as e,w as t,f as d,h as w,K as k,H as _,G as b}from"./index-7c2d2aef.js";import{_ as j}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as E}from"./Pagination-8eb7b6b1.js";import{u as F}from"./config-9548fa9b.js";import{g as G,d as H,b as K}from"./category-201d31a3.js";import{_ as S}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const M={class:"container"},T={class:"content_wrapper"},J={class:"lyecs-table-list-warp"},Q={class:"list-table-tool lyecs-search-warp"},R={class:"list-table-tool-row"},W={class:"list-table-tool-col"},X=o("span",{class:"iconfont icon-chakan1"},null,-1),Y={class:"table-container"},Z={style:{position:"relative"}},ee=o("a",{class:"btn-link"},"编辑",-1),te={class:"empty-warp"},ae={key:0,class:"empty-bg"},oe={key:0,class:"pagination-con"},se={key:0,class:"selected-action-warp"},le={class:"selected-action"},ve=q({__name:"List",setup(ne){const x=F(),C=f(),c=f(!0),p=f(0),m=f([]),n=L({page:1,size:x.get("page_size"),sort_field:"",sort_order:"",category_name:""}),r=async()=>{c.value=!0;try{const l=await G({...n});C.value=l.filter_result,p.value=l.total}catch(l){k.error(l.message)}finally{c.value=!1}};O(()=>{r()});const z=()=>{r()},V=({prop:l,order:a})=>{n.sort_field=l,n.sort_order=a=="ascending"?"asc":a=="descending"?"desc":"",r()},B=async l=>{try{const a=await K(l,{ids:m.value});k.success(a.message),r()}catch(a){k.error(a.message)}},D=l=>{m.value=l.map(a=>a.category_id)};return(l,a)=>{const y=i("el-button"),I=i("el-input"),h=i("el-space"),N=i("el-form"),u=i("el-table-column"),A=i("el-divider"),P=i("el-table"),U=i("a-spin"),$=i("el-popconfirm");return g(),v("div",M,[o("div",T,[o("div",J,[o("div",Q,[e(N,{model:n},{default:t(()=>[o("div",R,[o("div",W,[e(h,null,{default:t(()=>[e(I,{name:"keyword",modelValue:n.category_name,"onUpdate:modelValue":a[0]||(a[0]=s=>n.category_name=s),placeholder:"输入分类名称"},{append:t(()=>[e(y,{onClick:z},{default:t(()=>[X]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(h,{class:"ml10"},{default:t(()=>[e(d(S),{isDrawer:"",onOkCallback:r,title:"新建分类",width:"600px",path:"salesman/category/Info",params:{act:"add"}},{default:t(()=>[e(y,{type:"primary"},{default:t(()=>[_("新建分类")]),_:1})]),_:1})]),_:1})])])]),_:1},8,["model"])]),o("div",Y,[e(U,{spinning:c.value},{default:t(()=>[e(P,{data:C.value,"row-key":"category_id",onSelectionChange:D,total:p.value,onSortChange:V,loading:c.value},{empty:t(()=>[o("div",te,[c.value?w("",!0):(g(),v("div",ae,"暂无数据"))])]),default:t(()=>[e(u,{label:"分类名称",prop:"category_id",sortable:"custom"},{default:t(({row:s})=>[o("div",Z,[o("div",null,b(s.category_name),1)])]),_:1}),e(u,{label:"创建时间",prop:"add_time",sortable:"custom"},{default:t(({row:s})=>[o("div",null,b(s.add_time),1)]),_:1}),e(u,{label:"排序",prop:"sort_order",sortable:"custom"},{default:t(({row:s})=>[o("div",null,b(s.sort_order||"--"),1)]),_:1}),e(u,{label:"操作",fixed:"right",width:150},{default:t(({row:s})=>[e(d(S),{isDrawer:"",onOkCallback:r,title:"编辑分类",width:"600px",path:"salesman/category/Info",params:{act:"detail",id:s.group_id}},{default:t(()=>[ee]),_:2},1032,["params"]),e(A,{direction:"vertical"}),e(d(j),{onAfterDelete:r,requestApi:d(H),params:{id:s.group_id}},{default:t(()=>[_("删除")]),_:2},1032,["requestApi","params"])]),_:1})]),_:1},8,["data","total","loading"])]),_:1},8,["spinning"]),p.value>0?(g(),v("div",oe,[e(d(E),{page:n.page,"onUpdate:page":a[1]||(a[1]=s=>n.page=s),size:n.size,"onUpdate:size":a[2]||(a[2]=s=>n.size=s),total:p.value,onCallback:r},null,8,["page","size","total"])])):w("",!0)]),m.value.length>0?(g(),v("div",se,[o("div",le,[e(h,null,{default:t(()=>[o("span",null,[_("已选择："),o("b",null,b(m.value.length),1),_(" 项")]),e($,{title:"您确认要批量删除所选数据吗？",onConfirm:a[3]||(a[3]=s=>B("del"))},{reference:t(()=>[e(y,null,{default:t(()=>[_("批量删除")]),_:1})]),_:1})]),_:1})])])):w("",!0)])])])}}});export{ve as default};
