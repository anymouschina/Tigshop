/* empty css             */import{d as E,j as f,I as G,x as K,r as _,o as c,c as g,e as t,b as a,w as s,f as r,h as m,K as R,H as n,G as h,k as H,p as W,i as J,_ as Q}from"./index-7c2d2aef.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-b4d9216b.js";import"./category-a8bd4d11.js";import"./index-6c62cf9b.js";import{u as X}from"./config-9548fa9b.js";import{g as b}from"./util-1ee03ed8.js";import{_ as S}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as Z}from"./Pagination-8eb7b6b1.js";/* empty css                                                                  *//* empty css                                                                              */import"./region-e0d291a6.js";import{S as ee}from"./SelectTimeInterval-7da287f8.js";import"./shopProductCategory-792e0c23.js";import{f as p}from"./time-290942a2.js";import{g as te,u as q,d as ae}from"./material-3027f8a4.js";import{_ as se}from"./selectCategory.vue_vue_type_script_setup_true_lang-eb911e44.js";import{_ as U}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";import"./region-05802f67.js";import"./category-201d31a3.js";const A=y=>(W("data-v-fd8aaf67"),y=y(),J(),y),oe={class:"container"},le={class:"content_wrapper"},ie={class:"lyecs-table-list-warp"},ne={class:"list-table-tool lyecs-search-warp"},de={class:"advanced-search-warp list-table-tool-row"},re={class:"simple-form-warp"},_e={class:"simple-form-field"},ce={class:"form-group"},me=A(()=>t("label",{class:"control-label"},[t("span",null,"素材分类：")],-1)),pe={class:"control-container"},ue={class:"simple-form-field"},fe={class:"form-group"},ve=A(()=>t("label",{class:"control-label"},[t("span",null,"推送时间：")],-1)),ge={class:"control-container flex flex-align-center"},he={style:{"margin-left":"10px"}},be={class:"simple-form-field"},ye={class:"advanced-search-warp list-table-tool-row"},Ye={class:"simple-form-warp"},De={class:"simple-form-field"},ke={class:"table-container"},xe={class:"tit-row flex flex-align-center"},He={key:0,class:"label"},Me={class:"txt"},we=A(()=>t("a",{class:"btn-link"},"编辑",-1)),Ce={class:"empty-warp"},Se={key:0,class:"empty-bg"},Ae={key:0,class:"pagination-con"},Ie={key:0,class:"selected-action-warp"},ze={class:"selected-action"},Ve=E({__name:"List",setup(y){const $=X(),I=f([]),Y=f(!0),D=f(0);f(0);const M=f([]),o=G({page:1,size:$.pageSize,sort_field:"",sort_order:"",category_id:"",end_time:"",start_time:""}),w=f(-1),z=i=>{if(i===-1){w.value=i;return}o.start_time=p(new Date,"YYYY-MM-DD HH:mm:ss"),i===0&&(o.end_time=p(new Date,"YYYY-MM-DD HH:mm:ss")),i===1&&(o.start_time=p(b(1,"sub"),"YYYY-MM-DD HH:mm:ss"),o.end_time=p(b(1,"sub"),"YYYY-MM-DD HH:mm:ss")),i===2&&(o.end_time=p(b(7,"add"),"YYYY-MM-DD HH:mm:ss")),i===3&&(o.end_time=p(b(30,"add"),"YYYY-MM-DD HH:mm:ss")),i===4&&(o.end_time=p(b(180,"add"),"YYYY-MM-DD HH:mm:ss"))},d=async()=>{Y.value=!0;try{const i=await te({...o});I.value=i.filter_result,D.value=i.total}catch(i){R.error(i.message)}finally{Y.value=!1}};K(()=>{d()});const B=()=>{d()},L=()=>{o.status=-1,o.title="",o.end_time="",o.start_time="",d()},N=({prop:i,order:l})=>{o.sort_field=i,o.sort_order=l=="ascending"?"asc":l=="descending"?"desc":"",d()},P=i=>{M.value=i.map(l=>l.id)};return(i,l)=>{const k=_("el-radio-button"),T=_("el-radio-group"),u=_("el-button"),F=_("el-form"),x=_("el-table-column"),C=_("el-divider"),V=_("el-space"),O=_("el-table"),j=_("a-spin");return c(),g("div",oe,[t("div",le,[t("div",ie,[t("div",ne,[a(F,{model:o,name:"form"},{default:s(()=>[t("div",de,[t("div",re,[t("div",_e,[t("div",ce,[me,t("div",pe,[a(se,{category_id:o.category_id,"onUpdate:category_id":l[0]||(l[0]=e=>o.category_id=e)},null,8,["category_id"])])])]),t("div",ue,[t("div",fe,[ve,t("div",ge,[a(r(ee),{"start-date":o.start_time,"onUpdate:startDate":l[1]||(l[1]=e=>o.start_time=e),"end-date":o.end_time,"onUpdate:endDate":l[2]||(l[2]=e=>o.end_time=e),"value-format":"YYYY-MM-DD HH:mm:ss",onCallback:l[3]||(l[3]=e=>z(-1))},null,8,["start-date","end-date"]),t("div",he,[a(T,{class:"itemWidth",modelValue:w.value,"onUpdate:modelValue":l[4]||(l[4]=e=>w.value=e),onChange:z},{default:s(()=>[a(k,{value:0},{default:s(()=>[n("今天")]),_:1}),a(k,{value:1},{default:s(()=>[n("昨天")]),_:1}),a(k,{value:2},{default:s(()=>[n("近7天")]),_:1}),a(k,{value:3},{default:s(()=>[n("近30天")]),_:1})]),_:1},8,["modelValue"])])])])]),t("div",be,[a(u,{type:"primary",onClick:B},{default:s(()=>[n("搜索")]),_:1})])])]),t("div",ye,[t("div",Ye,[t("div",De,[a(r(U),{isDrawer:"",onOkCallback:d,title:"添加素材",width:"700px",path:"salesman/material/Info",params:{act:"add"}},{default:s(()=>[a(u,{type:"primary"},{default:s(()=>[n("立即新建")]),_:1})]),_:1}),a(u,{class:"ml10",onClick:L},{default:s(()=>[n("清空筛选条件")]),_:1})])])])]),_:1},8,["model"])]),t("div",ke,[a(j,{spinning:Y.value},{default:s(()=>[a(O,{data:I.value,total:D.value,"row-key":"id",onSelectionChange:P,onSortChange:N},{empty:s(()=>[t("div",Ce,[Y.value?m("",!0):(c(),g("div",Se,"暂无数据"))])]),default:s(()=>[a(x,{label:"素材内容",prop:"content",fixed:"left"},{default:s(({row:e})=>[t("div",xe,[e.is_top!=0?(c(),g("div",He,"置顶")):m("",!0),t("div",Me,h(e.content||"--"),1)])]),_:1}),a(x,{label:"相关商品",width:200},{default:s(({row:e})=>{var v;return[n(h(((v=e.product)==null?void 0:v.product_name)||"--"),1)]}),_:1}),a(x,{label:"分类",width:160},{default:s(({row:e})=>{var v;return[n(h(((v=e.category)==null?void 0:v.category_name)||"--"),1)]}),_:1}),a(x,{width:200,fixed:"right",label:"操作"},{default:s(({row:e})=>[a(V,{size:0},{default:s(()=>[e.is_top!=0?(c(),H(r(S),{key:0,onAfterDelete:d,requestApi:r(q),params:{id:e.id,field:"is_top",val:0},title:"确定取消置顶吗？"},{default:s(()=>[n("取消置顶")]),_:2},1032,["requestApi","params"])):m("",!0),e.is_top!=0?(c(),H(C,{key:1,direction:"vertical"})):m("",!0),a(r(U),{params:{act:"detail",id:e.id},isDrawer:"",path:"salesman/material/Info",title:"编辑素材",width:"700px",onOkCallback:d},{default:s(()=>[we]),_:2},1032,["params"]),a(C,{direction:"vertical"}),a(r(S),{onAfterDelete:d,requestApi:r(q),params:{id:e.id,field:"is_available",val:e.is_available==1?0:1},title:`确认${e.is_available==1?"失效":"恢复"}？`},{default:s(()=>[n(h(e.is_available==1?"失效":"恢复"),1)]),_:2},1032,["requestApi","params","title"]),e.is_available!==1?(c(),H(C,{key:2,direction:"vertical"})):m("",!0),e.is_available!==1?(c(),H(r(S),{key:3,onAfterDelete:d,requestApi:r(ae),params:{id:e.id}},{default:s(()=>[n("删除")]),_:2},1032,["requestApi","params"])):m("",!0)]),_:2},1024)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),D.value>0?(c(),g("div",Ae,[a(r(Z),{page:o.page,"onUpdate:page":l[5]||(l[5]=e=>o.page=e),size:o.size,"onUpdate:size":l[6]||(l[6]=e=>o.size=e),total:D.value,onCallback:d},null,8,["page","size","total"])])):m("",!0)]),M.value.length>0?(c(),g("div",Ie,[t("div",ze,[a(V,null,{default:s(()=>[t("span",null,[n("已选择："),t("b",null,h(M.value.length),1),n(" 项")]),a(u,null,{default:s(()=>[n("设置等级")]),_:1}),a(u,null,{default:s(()=>[n("分组")]),_:1}),a(u,null,{default:s(()=>[n("清退")]),_:1})]),_:1})])])):m("",!0)])])])}}});const at=Q(Ve,[["__scopeId","data-v-fd8aaf67"]]);export{at as default};
