/* empty css             */import{d as R,p as M,K as E,s as N,i as S,q as D,dx as F,I as C,j as i,w as o,r as m,b1 as L,o as d,b as a,e as s,f as n,c as V,E as v,F as b,g as W,A as q,bt as k,dy as $,_ as j}from"./index-DrbzVNl6.js";import{b as z}from"./version-CL9k3sYf.js";import{c as G}from"./format-CRgx78oe.js";const H={key:0,class:"error"},J={key:0,class:"error"},Q={key:0,class:"error"},X={class:"selected-action-warp"},Y={class:"selected-action",style:{"padding-left":"80px"}},Z=R({__name:"InterfactSettings",setup(h){const A=L();M(()=>A.query.point,()=>{const{scrollToElement:p}=k(A.query.point||"weChatofficialaccount","scrollContainer","weChatofficialaccount");p()},{immediate:!0});const x=E(),P=N(),U=S(!1),l=S({wechatOauth:0,wechatAppId:"",wechatAppSecret:"",wechatServerUrl:"",wechatServerToken:"",wechatServerSecret:"",wechatMiniProgramAppId:"",wechatMiniProgramSecret:"",wechatPayAppId:"",wechatPayAppSecret:"",icoTigCss:"",icoDefinedCss:"",storageType:0,storageSaveFullPath:0,storageLocalUrl:"",storageOssUrl:"",storageOssAccessKeyId:"",storageOssAccessKeySecret:"",storageOssBucket:"",storageOssRegion:"",storageCosUrl:"",storageCosSecretId:"",storageCosSecretKey:"",storageCosBucket:"",storageCosRegion:"",langOn:0,langType:0,langVolcengineAccessKey:"",langVolcengineSecret:""});D(async()=>{await c()});const T=S(!0),c=async()=>{try{const p=await F();l.value=G(p)}catch(p){C.error(p.message)}finally{T.value=!1}},f=S(!1),y=p=>{if(p.endsWith("/")||p.endsWith("\\")){f.value=!1;return}f.value=!0},I=async()=>{let p=l.value.storageType==0?l.value.storageLocalUrl:l.value.storageType==1?l.value.storageOssUrl:l.value.storageCosUrl;if(await y(p),f.value){C.error("图片访问域名结尾必须带斜杠 /"),q(()=>{const{scrollToElement:e}=k("storageSettings","scrollContainer");e()});return}U.value=!0;try{const e=await $(l.value);C.success("修改成功"),x.updateConfig()}catch(e){C.error(e.message)}finally{U.value=!1}};return(p,e)=>{const u=m("TigInput"),r=m("el-form-item"),g=m("el-radio"),w=m("el-radio-group"),O=m("el-form"),K=m("el-button"),B=m("a-spin");return d(),i(B,{spinning:T.value},{default:o(()=>[a(O,{ref_key:"formRef",ref:P,model:l.value,"label-width":"145px",style:{"margin-left":"22px"}},{default:o(()=>[e[58]||(e[58]=s("div",{class:"title",id:"weChatofficialaccount"},"微信公众号",-1)),a(r,{label:"微信APPID",prop:"wechatAppId"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.wechatAppId,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.wechatAppId=t)},null,8,["modelValue"]),e[31]||(e[31]=s("div",{class:"extra"},"请从微信公众号后台获取，链接：https://mp.weixin.qq.com",-1))]),_:1}),a(r,{label:"微信AppSecret",prop:"wechatAppSecret"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.wechatAppSecret,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.wechatAppSecret=t)},null,8,["modelValue"]),e[32]||(e[32]=s("div",{class:"extra"},"请从微信公众号后台获取",-1))]),_:1}),a(r,{label:"微信服务器接口地址",prop:"wechatServerUrl"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.wechatServerUrl,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.wechatServerUrl=t),readonly:""},null,8,["modelValue"]),e[33]||(e[33]=s("div",{class:"extra"},"系统默认项目，配置公众号服务器地址时请带项目访问域名",-1))]),_:1}),a(r,{label:"微信服务器Token",prop:"wechatServerToken"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.wechatServerToken,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.wechatServerToken=t)},null,8,["modelValue"]),e[34]||(e[34]=s("div",{class:"extra"},"请从微信公众号后台获取",-1))]),_:1}),a(r,{label:"微信服务器消息加密密钥",prop:"wechatServerSecret"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.wechatServerSecret,"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.wechatServerSecret=t)},null,8,["modelValue"]),e[35]||(e[35]=s("div",{class:"extra"},"请从微信公众号后台获取",-1))]),_:1}),e[59]||(e[59]=s("div",{class:"title",id:"weChatMiniProgram"},"微信小程序",-1)),a(r,{label:"微信小程序AppID",prop:"wechatMiniProgramAppId"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.wechatMiniProgramAppId,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.wechatMiniProgramAppId=t)},null,8,["modelValue"]),e[36]||(e[36]=s("div",{class:"extra"},"微信小程序公众平台->设置->开发设置中获取，开通小程序必填",-1))]),_:1}),a(r,{label:"微信小程序AppSecret",prop:"wechatMiniProgramSecret"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.wechatMiniProgramSecret,"onUpdate:modelValue":e[6]||(e[6]=t=>l.value.wechatMiniProgramSecret=t)},null,8,["modelValue"]),e[37]||(e[37]=s("div",{class:"extra"},"微信小程序公众平台->设置->开发设置中获取，开通小程序必填",-1))]),_:1}),e[60]||(e[60]=s("div",{class:"title",id:"weChatAppPayment"},"微信APP支付",-1)),a(r,{label:"应用APP ID",prop:"wechatPayAppId"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.wechatPayAppId,"onUpdate:modelValue":e[7]||(e[7]=t=>l.value.wechatPayAppId=t)},null,8,["modelValue"]),e[38]||(e[38]=s("div",{class:"extra"},"需开通微信开发者平台，创建APP应用（未开通Tigshop APP商城可忽略）",-1))]),_:1}),a(r,{label:"应用APP SECRET",prop:"wechatPayAppSecret"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.wechatPayAppSecret,"onUpdate:modelValue":e[8]||(e[8]=t=>l.value.wechatPayAppSecret=t)},null,8,["modelValue"]),e[39]||(e[39]=s("div",{class:"extra"},"需通微信开发者平台获取（未开通Tigshop APP商城可忽略）",-1))]),_:1}),e[61]||(e[61]=s("div",{class:"title",id:"ICOicon"},"ICO图标",-1)),n("",!0),a(r,{label:"自定义ico图标库",prop:"icoDefinedCss"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.icoDefinedCss,"onUpdate:modelValue":e[10]||(e[10]=t=>l.value.icoDefinedCss=t)},null,8,["modelValue"]),e[41]||(e[41]=s("div",null,[s("div",{class:"extra"},[v(" 自定义ico图标库，前往http://iconfont.cn添加，按Tigshop教程操作，这里只需填写如："),s("br"),v("https//at.alicdn.com/t/font_400590_y7t88bzlwhskbj4i.css ")]),s("div",{class:"extra"},"您也可以下载至本地服务器，只需填写能访问到iconfont的完整域名和存放路径")],-1))]),_:1}),e[62]||(e[62]=s("div",{class:"title",id:"storageSettings"},"存储设置",-1)),a(r,{label:"存储类型",prop:"storageType"},{default:o(()=>[a(w,{modelValue:l.value.storageType,"onUpdate:modelValue":e[11]||(e[11]=t=>l.value.storageType=t),class:"itemWidth"},{default:o(()=>[a(g,{value:0},{default:o(()=>e[42]||(e[42]=[v("本地存储")])),_:1}),a(g,{value:1},{default:o(()=>e[43]||(e[43]=[v("阿里云OSS存储")])),_:1}),a(g,{value:2},{default:o(()=>e[44]||(e[44]=[v("腾讯云COS存储")])),_:1})]),_:1},8,["modelValue"]),e[45]||(e[45]=s("div",{class:"extra"},"开启云存储后，图片会直接通过接口上传至指定云存储，不会再保存在本地。",-1))]),_:1}),l.value.storageType>0?(d(),i(r,{key:1,label:"图片是否保存全路径",prop:"storageSaveFullPath"},{default:o(()=>[a(w,{modelValue:l.value.storageSaveFullPath,"onUpdate:modelValue":e[12]||(e[12]=t=>l.value.storageSaveFullPath=t),class:"itemWidth"},{default:o(()=>[a(g,{value:1},{default:o(()=>e[46]||(e[46]=[v("是")])),_:1}),a(g,{value:0},{default:o(()=>e[47]||(e[47]=[v("否")])),_:1})]),_:1},8,["modelValue"]),e[48]||(e[48]=s("div",{class:"extra"},"选择是后上传文件会保存全路径进数据库内。(如https://www.****.com/upload/2022/01/01/1.jpg)",-1))]),_:1})):n("",!0),l.value.storageType==0?(d(),i(r,{key:2,label:"图片访问域名",prop:"storageLocalUrl"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.storageLocalUrl,"onUpdate:modelValue":e[13]||(e[13]=t=>l.value.storageLocalUrl=t),onBlur:e[14]||(e[14]=t=>y(l.value.storageLocalUrl))},null,8,["modelValue"]),s("div",null,[f.value?(d(),V("div",H,"图片访问域名结尾必须带斜杠 /")):n("",!0),e[49]||(e[49]=s("div",{class:"extra"},"参考格式： https://oss.tigshop.com/",-1))])]),_:1})):n("",!0),l.value.storageType==1?(d(),i(r,{key:3,label:"图片访问域名",prop:"storageOssUrl"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.storageOssUrl,"onUpdate:modelValue":e[15]||(e[15]=t=>l.value.storageOssUrl=t),onBlur:e[16]||(e[16]=t=>y(l.value.storageOssUrl))},null,8,["modelValue"]),s("div",null,[f.value?(d(),V("div",J,"图片访问域名结尾必须带斜杠 /")):n("",!0),e[50]||(e[50]=s("div",{class:"extra"},"参考格式： https://oss.tigshop.com/",-1))])]),_:1})):n("",!0),l.value.storageType==2?(d(),i(r,{key:4,label:"图片访问域名",prop:"storageCosUrl"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.storageCosUrl,"onUpdate:modelValue":e[17]||(e[17]=t=>l.value.storageCosUrl=t),onBlur:e[18]||(e[18]=t=>y(l.value.storageCosUrl))},null,8,["modelValue"]),s("div",null,[f.value?(d(),V("div",Q,"图片访问域名结尾必须带斜杠 /")):n("",!0),e[51]||(e[51]=s("div",{class:"extra"},"参考格式： https://oss.tigshop.com/",-1))])]),_:1})):n("",!0),l.value.storageType!=0?(d(),V(b,{key:5},[l.value.storageType==1?(d(),i(r,{key:0,label:"AccessKeyId",prop:"storageOssAccessKeyId"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.storageOssAccessKeyId,"onUpdate:modelValue":e[19]||(e[19]=t=>l.value.storageOssAccessKeyId=t)},null,8,["modelValue"])]),_:1})):n("",!0),l.value.storageType==2?(d(),i(r,{key:1,label:"SecretId",prop:"storageCosSecretId"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.storageCosSecretId,"onUpdate:modelValue":e[20]||(e[20]=t=>l.value.storageCosSecretId=t)},null,8,["modelValue"])]),_:1})):n("",!0),l.value.storageType==1?(d(),i(r,{key:2,label:"AccessKeySecret",prop:"storageOssAccessKeySecret"},{default:o(()=>[a(u,{width:"100%",type:"textarea",modelValue:l.value.storageOssAccessKeySecret,"onUpdate:modelValue":e[21]||(e[21]=t=>l.value.storageOssAccessKeySecret=t)},null,8,["modelValue"])]),_:1})):n("",!0),l.value.storageType==2?(d(),i(r,{key:3,label:"KeySecret",prop:"storageCosSecretKey"},{default:o(()=>[a(u,{width:"100%",type:"textarea",modelValue:l.value.storageCosSecretKey,"onUpdate:modelValue":e[22]||(e[22]=t=>l.value.storageCosSecretKey=t)},null,8,["modelValue"])]),_:1})):n("",!0),l.value.storageType==1?(d(),i(r,{key:4,label:"空间名称",prop:"storageOssBucket"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.storageOssBucket,"onUpdate:modelValue":e[23]||(e[23]=t=>l.value.storageOssBucket=t)},null,8,["modelValue"])]),_:1})):n("",!0),l.value.storageType==2?(d(),i(r,{key:5,label:"空间名称",prop:"storageCosBucket"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.storageCosBucket,"onUpdate:modelValue":e[24]||(e[24]=t=>l.value.storageCosBucket=t)},null,8,["modelValue"])]),_:1})):n("",!0),l.value.storageType==1?(d(),i(r,{key:6,label:"空间地域节点",prop:"storageOssRegion"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.storageOssRegion,"onUpdate:modelValue":e[25]||(e[25]=t=>l.value.storageOssRegion=t)},null,8,["modelValue"]),e[52]||(e[52]=s("div",{class:"extra"},null,-1))]),_:1})):n("",!0),l.value.storageType==2?(d(),i(r,{key:7,label:"空间地域节点",prop:"storageCosRegion"},{default:o(()=>[a(u,{width:"100%",modelValue:l.value.storageCosRegion,"onUpdate:modelValue":e[26]||(e[26]=t=>l.value.storageCosRegion=t)},null,8,["modelValue"]),e[53]||(e[53]=s("div",{class:"extra"},null,-1))]),_:1})):n("",!0)],64)):n("",!0),W(z)()?(d(),V(b,{key:6},[e[57]||(e[57]=s("div",{class:"title",id:"multilingualSettings"},"多语言设置",-1)),a(r,{label:"是否开启多语言",prop:"langOn"},{default:o(()=>[a(w,{modelValue:l.value.langOn,"onUpdate:modelValue":e[27]||(e[27]=t=>l.value.langOn=t),class:"itemWidth"},{default:o(()=>[a(g,{value:1},{default:o(()=>e[54]||(e[54]=[v("是")])),_:1}),a(g,{value:0},{default:o(()=>e[55]||(e[55]=[v("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"接口翻译",prop:"langType"},{default:o(()=>[a(w,{modelValue:l.value.langType,"onUpdate:modelValue":e[28]||(e[28]=t=>l.value.langType=t),class:"itemWidth"},{default:o(()=>[a(g,{value:1},{default:o(()=>e[56]||(e[56]=[v("火山翻译")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(r,{label:"火山翻译AssessKey",prop:"langVolcengineAccessKey"},{default:o(()=>[a(u,{width:"100%",type:"textarea",modelValue:l.value.langVolcengineAccessKey,"onUpdate:modelValue":e[29]||(e[29]=t=>l.value.langVolcengineAccessKey=t)},null,8,["modelValue"])]),_:1}),a(r,{label:"火山翻译SecretKey",prop:"langVolcengineSecret"},{default:o(()=>[a(u,{width:"100%",type:"textarea",modelValue:l.value.langVolcengineSecret,"onUpdate:modelValue":e[30]||(e[30]=t=>l.value.langVolcengineSecret=t)},null,8,["modelValue"])]),_:1})],64)):n("",!0)]),_:1},8,["model"]),e[64]||(e[64]=s("div",{style:{height:"20px"}},null,-1)),s("div",X,[s("div",Y,[a(K,{loading:U.value,class:"form-submit-btn",size:"large",type:"primary",onClick:I},{default:o(()=>e[63]||(e[63]=[v("提 交")])),_:1},8,["loading"])])])]),_:1},8,["spinning"])}}}),ae=j(Z,[["__scopeId","data-v-8412c671"]]);export{ae as default};
