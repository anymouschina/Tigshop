import{d as T,i as v,G as E,q as F,c as D,e as t,f as x,b as a,w as o,g as p,I as q,r as d,o as y,L as z,E as n,D as u,K as g,_ as G}from"./index-CGYuOau0.js";/* empty css             */import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";import"./index-B-GURfkM.js";import{p as W}from"./format-DFT-VJzO.js";import{u as j}from"./config-DNllFJyR.js";/* empty css                                                                    */import{P as A}from"./Pagination-yOfjsBuR.js";/* empty css                                                                  *//* empty css                                                                              */import{S as H}from"./SelectTimeInterval-BYQIPzkk.js";import{_ as J,a as Q}from"./SelectPromoteMode.vue_vue_type_script_setup_true_lang-BMur74x8.js";import{g as R}from"./promoter-qSS9u1u2.js";import{f}from"./time-ClyPenjC.js";import{_ as M}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";import"./subgroup-UdERYvwq.js";import"./promoteMode-BC1ek4yp.js";const X={class:"container"},Z={class:"content_wrapper"},ee={class:"lyecs-table-list-warp"},te={class:"list-table-tool lyecs-search-warp"},le={class:"advanced-search-warp list-table-tool-row"},ae={class:"simple-form-warp"},oe={class:"simple-form-field",style:{"margin-right":"10px"}},se={class:"form-group"},ne={class:"simple-form-field"},ie={class:"form-group"},de={class:"control-container flex flex-align-center"},re={style:{"margin-left":"10px"}},me={class:"simple-form-field"},_e={class:"form-group"},pe={class:"control-container"},ue={class:"simple-form-field"},fe={class:"form-group"},ce={class:"control-container"},ve={class:"simple-form-field"},be={class:"form-group"},ge={class:"control-container"},we={class:"simple-form-field"},Ye={class:"advanced-search-warp list-table-tool-row"},De={class:"simple-form-warp"},ye={class:"simple-form-field"},Ce={class:"table-container"},ke={class:"empty-warp"},xe={key:0,class:"empty-bg"},Me={key:0,class:"pagination-con"},Ve={key:0,class:"selected-action-warp"},Se={class:"selected-action"},Ue=T({__name:"List",setup(he){const O=j(),V=v([]),w=v(!0),Y=v(0);v(0);const C=v([]),s=E({page:1,size:O.pageSize,sort_field:"",sort_order:"",mobile:"",pid_mobile:"",level:"",group_id:"",add_time_start:"",add_time_end:""}),k=v(-1),S=i=>{if(i===-1){k.value=i;return}s.add_time_start=f(new Date,"YYYY-MM-DD"),i===0&&(s.add_time_end=f(new Date,"YYYY-MM-DD")),i===1&&(s.add_time_start=f(g(1,"sub"),"YYYY-MM-DD"),s.add_time_end=f(g(1,"sub"),"YYYY-MM-DD")),i===2&&(s.add_time_end=f(g(7,"add"),"YYYY-MM-DD")),i===3&&(s.add_time_end=f(g(30,"add"),"YYYY-MM-DD")),i===4&&(s.add_time_end=f(g(180,"add"),"YYYY-MM-DD")),r()},r=async()=>{w.value=!0;try{const i=await R({...s});V.value=i.filter_result,Y.value=i.total}catch(i){q.error(i.message)}finally{w.value=!1}};F(()=>{r()});const m=()=>{r()},I=({prop:i,order:e})=>{s.sort_field=i,s.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",r()},K=i=>{C.value=i.map(e=>e.salesman_id)};return(i,e)=>{const c=d("el-button"),U=d("el-input"),b=d("el-radio-button"),L=d("el-radio-group"),N=d("el-form"),_=d("el-table-column"),P=d("el-divider"),h=d("el-space"),$=d("el-table"),B=d("a-spin");return y(),D("div",X,[t("div",Z,[t("div",ee,[t("div",te,[a(N,{model:s,name:"form"},{default:o(()=>[t("div",le,[t("div",ae,[t("div",oe,[t("div",se,[a(U,{modelValue:s.mobile,"onUpdate:modelValue":e[0]||(e[0]=l=>s.mobile=l),name:"mobile",placeholder:"输入分销员手机号或昵称",onKeyup:z(m,["enter"]),clearable:"",onClear:m},{append:o(()=>[a(c,{onClick:m},{default:o(()=>e[10]||(e[10]=[t("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])]),t("div",ne,[t("div",ie,[e[16]||(e[16]=t("label",{class:"control-label"},[t("span",null,"加入时间：")],-1)),t("div",de,[a(p(H),{type:"date","start-date":s.add_time_start,"onUpdate:startDate":e[1]||(e[1]=l=>s.add_time_start=l),"end-date":s.add_time_end,"onUpdate:endDate":e[2]||(e[2]=l=>s.add_time_end=l),onCallback:e[3]||(e[3]=l=>S(-1))},null,8,["start-date","end-date"]),t("div",re,[a(L,{class:"itemWidth",modelValue:k.value,"onUpdate:modelValue":e[4]||(e[4]=l=>k.value=l),onChange:S},{default:o(()=>[a(b,{value:0},{default:o(()=>e[11]||(e[11]=[n("今天")])),_:1}),a(b,{value:1},{default:o(()=>e[12]||(e[12]=[n("昨天")])),_:1}),a(b,{value:2},{default:o(()=>e[13]||(e[13]=[n("近7天")])),_:1}),a(b,{value:3},{default:o(()=>e[14]||(e[14]=[n("近30天")])),_:1}),a(b,{value:4},{default:o(()=>e[15]||(e[15]=[n("近半年")])),_:1})]),_:1},8,["modelValue"])])])])]),t("div",me,[t("div",_e,[e[17]||(e[17]=t("label",{class:"control-label"},[t("span",null,"邀请方：")],-1)),t("div",pe,[a(U,{modelValue:s.pid_mobile,"onUpdate:modelValue":e[5]||(e[5]=l=>s.pid_mobile=l),name:"pid_mobile",placeholder:"请输入手机号",onKeyup:z(m,["enter"]),clearable:"",onClear:m},null,8,["modelValue"])])])]),t("div",ue,[t("div",fe,[e[18]||(e[18]=t("label",{class:"control-label"},[t("span",null,"分组：")],-1)),t("div",ce,[a(p(J),{group_id:s.group_id,"onUpdate:group_id":e[6]||(e[6]=l=>s.group_id=l),onOnChange:m},null,8,["group_id"])])])]),t("div",ve,[t("div",be,[e[19]||(e[19]=t("label",{class:"control-label"},[t("span",null,"等级：")],-1)),t("div",ge,[a(p(Q),{level:s.level,"onUpdate:level":e[7]||(e[7]=l=>s.level=l),onOnChange:m},null,8,["level"])])])]),t("div",we,[a(c,{type:"primary",onClick:m},{default:o(()=>e[20]||(e[20]=[n("搜索")])),_:1})])])]),t("div",Ye,[t("div",De,[t("div",ye,[a(p(M),{params:{act:"add"},isDrawer:"",path:"salesman/promoter/Info",title:"添加分销员",width:"600px",onOkCallback:r},{default:o(()=>[a(c,{type:"primary"},{default:o(()=>e[21]||(e[21]=[n("添加分销员")])),_:1})]),_:1})])])])]),_:1},8,["model"])]),t("div",Ce,[a(B,{spinning:w.value},{default:o(()=>[a($,{data:V.value,total:Y.value,"row-key":"salesman_id",onSelectionChange:K,onSortChange:I},{empty:o(()=>[t("div",ke,[w.value?x("",!0):(y(),D("div",xe,"暂无数据"))])]),default:o(()=>[a(_,{label:"昵称",prop:"salesman_id",width:140,fixed:"left"},{default:o(({row:l})=>[n(u(l.base_user_info.nickname||l.base_user_info.username),1)]),_:1}),a(_,{label:"手机号",width:140,fixed:"left"},{default:o(({row:l})=>[n(u(l.base_user_info.mobile),1)]),_:1}),a(_,{label:"等级"},{default:o(({row:l})=>[n(u(l.level_text),1)]),_:1}),a(_,{label:"分组"},{default:o(({row:l})=>[n(u(l.group_info.group_name||"--"),1)]),_:1}),a(_,{label:"邀请方"},{default:o(({row:l})=>[n(u(l.pid_mobile),1)]),_:1}),a(_,{label:"累计销售额(元)",sortable:"custom",width:160},{default:o(({row:l})=>[n(u(p(W)(l.sale_amount)),1)]),_:1}),a(_,{label:"加入时间",sortable:"custom"},{default:o(({row:l})=>[n(u(l.add_time),1)]),_:1}),a(_,{width:120,fixed:"right",label:"操作"},{default:o(({row:l})=>[a(h,{size:0},{default:o(()=>[a(p(M),{maskClose:!1,showClose:!1,showOnOk:!1,params:{act:"detail",id:l.salesman_id},dialogClass:"noPadding",isDrawer:"",path:"salesman/promoter/Detail",title:"分销员详情",width:"900px",onOkCallback:r},{default:o(()=>e[22]||(e[22]=[t("a",{class:"btn-link"},"详情",-1)])),_:2},1032,["params"]),a(P,{direction:"vertical"}),a(p(M),{maskClose:!1,params:{act:"detail",id:l.salesman_id},isDrawer:"",path:"salesman/promoter/Info",title:"编辑分销员",width:"600px",onOkCallback:r},{default:o(()=>e[23]||(e[23]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"])]),_:2},1024)]),_:1})]),_:1},8,["data","total"])]),_:1},8,["spinning"]),Y.value>0?(y(),D("div",Me,[a(p(A),{page:s.page,"onUpdate:page":e[8]||(e[8]=l=>s.page=l),size:s.size,"onUpdate:size":e[9]||(e[9]=l=>s.size=l),total:Y.value,onCallback:r},null,8,["page","size","total"])])):x("",!0)]),C.value.length>0?(y(),D("div",Ve,[t("div",Se,[a(h,null,{default:o(()=>[t("span",null,[e[24]||(e[24]=n("已选择：")),t("b",null,u(C.value.length),1),e[25]||(e[25]=n(" 项"))]),a(c,null,{default:o(()=>e[26]||(e[26]=[n("设置等级")])),_:1}),a(c,null,{default:o(()=>e[27]||(e[27]=[n("分组")])),_:1}),a(c,null,{default:o(()=>e[28]||(e[28]=[n("清退")])),_:1})]),_:1})])])):x("",!0)])])])}}}),Je=G(Ue,[["__scopeId","data-v-314e87a3"]]);export{Je as default};
