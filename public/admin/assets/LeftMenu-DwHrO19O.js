import{d as O,aa as F,dC as J,aX as R,i as v,C as Z,p as X,r as k,c as i,o as s,e as a,f as n,g as l,aN as w,b as p,w as f,F as x,a as P,n as L,dP as A,dQ as W,j as S,D as $,_ as j}from"./index-CGYuOau0.js";import{S as b}from"./StatusDot-YMdUi2kT.js";import{r as Q,i as U}from"./format-DFT-VJzO.js";import{u as V}from"./im-gvP_5d7J.js";import{s as q}from"./conversation-BfOs7vot.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";const G={class:"left-menu-container"},H={class:"app-layout-m_nav_o1XZi"},K={class:"avg"},T=["src"],Y=["src"],ee={class:"popover-box"},te={class:"status"},se={key:3,class:"text"},ae={key:4,class:"text"},oe={key:5,class:"text"},ie={class:"status-pop-box"},le=["onClick"],ne={key:0,class:"status-pop-item-content"},re={key:1,class:"status-pop-item-content"},ce={key:2,class:"status-pop-item-content"},ue=["onClick"],de={class:"app-layout-m_item-icon_1yDNO"},pe={class:"app-layout-m_item-title_2Je8J"};const _e=O({__name:"LeftMenu",setup(me){const r=V(),g=F(()=>J().userInfo),_=R(),z=v([{value:1,label:"在线"},{value:2,label:"忙碌"},{value:3,label:"离开"}]),N=async t=>{(await q({status:t})).errcode===0&&r.setImPresence(t)},E=t=>{if(_.path.split("/").length==4){let o=_.path.lastIndexOf("/");return _.path.substring(0,o)===t}return _.path===t},y=v([{path:"/im/index",svg:"im-recently",name:"index",title:"即时会话",children:[]},{path:"/im/history",svg:"im-history",name:"history",title:"历史会话",children:[]},{path:"/im/systemSetting",svg:"im-setting",name:"systemSetting",title:"系统设置",children:[{path:"/im/systemSetting/autoReply",name:"autoReply",title:"客服自动回复"}]}]),m=v([]),C=Z(),B=v("");X(()=>_,t=>{var o,d;if(t.path.split("/").length==3){let c=y.value.filter(e=>e.path===t.path),u=c.length>0?c[0]:{};((o=u.children)==null?void 0:o.length)>0&&(m.value=u.children,B.value=t.path,C.push({path:m.value[0].path}))}else{let c=t.path,u=c.lastIndexOf("/"),e="";u!==-1&&(e=c.substring(0,u),c.substring(u+1));let h=y.value.filter(M=>M.path===e),I=h.length>0?h[0]:{};((d=I.children)==null?void 0:d.length)>0&&(m.value=I.children,B.value=t.path)}},{deep:!0,immediate:!0});const D=t=>{C.push({path:t})};function he(t,o){return o===t}return(t,o)=>{const d=k("el-icon"),c=k("el-popover"),u=k("SvgIcon");return s(),i(x,null,[a("div",G,[a("div",H,[a("div",K,[l(w)(String(g.value.avatar))=="def"?(s(),i("img",{key:0,class:"image",src:l(Q)(g.value.avatar)},null,8,T)):(s(),i("img",{key:1,class:"image",src:l(U)(g.value.avatar)},null,8,Y))]),a("div",ee,[p(c,{placement:"right-start",width:100,trigger:"click"},{reference:f(()=>[a("div",te,[l(r).imPresence==1?(s(),S(b,{key:0,style:{"margin-top":"2px"},inline:!1,flicker:!0,size:8,color:"#3ebd00"})):n("",!0),l(r).imPresence==2?(s(),S(b,{key:1,style:{"margin-top":"2px"},inline:!1,flicker:!0,size:8,color:"#f44444"})):n("",!0),l(r).imPresence==3?(s(),S(b,{key:2,style:{"margin-top":"2px"},inline:!1,flicker:!0,size:8,color:"#d0d0d0"})):n("",!0),l(r).imPresence==1?(s(),i("div",se,"在线")):n("",!0),l(r).imPresence==2?(s(),i("div",ae,"忙碌")):n("",!0),l(r).imPresence==3?(s(),i("div",oe,"离开")):n("",!0)])]),default:f(()=>[a("div",ie,[(s(!0),i(x,null,P(z.value,e=>(s(),i("div",{class:"status-pop-item flex align-center cursor-pointer",key:e.value,onClick:h=>N(e.value)},[a("div",{class:L(["status-pop-item-icon",{opacity:e.value==l(r).imPresence}])},[p(d,{size:"14",color:"#000"},{default:f(()=>[p(l(A))]),_:1})],2),e.value==1?(s(),i("div",ne,o[0]||(o[0]=[a("div",{class:"label green"},null,-1),a("div",{class:"txt"},"在线",-1)]))):n("",!0),e.value==2?(s(),i("div",re,[a("div",null,[p(d,{size:"14",color:"#ff4444"},{default:f(()=>[p(l(W))]),_:1})]),o[1]||(o[1]=a("div",{class:"txt"},"忙碌",-1))])):n("",!0),e.value==3?(s(),i("div",ce,o[2]||(o[2]=[a("div",{class:"label"},null,-1),a("div",{class:"txt"},"离线",-1)]))):n("",!0)],8,le))),128))])]),_:1})]),(s(!0),i(x,null,P(y.value,e=>(s(),i("div",{class:L(["app-layout-m_item_1hZOk",{"app-layout-m_active_1p89k":E(e.path)}]),onClick:h=>D(e.path)},[a("div",de,[p(u,{name:e.svg,width:"16",height:"16"},null,8,["name"])]),a("div",pe,$(e.title),1)],10,ue))),256))])]),(m.value.length>0,n("",!0))],64)}}}),be=j(_e,[["__scopeId","data-v-dfd35904"]]);export{be as default};
