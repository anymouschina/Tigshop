import{d as R,i as m,C as U,s as q,q as F,r as n,c as M,o as c,e as f,j as h,f as x,b as o,w as l,a3 as O,g as j,E,a4 as G,I as v}from"./index-DrbzVNl6.js";import{F as A}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-BDvYUQtN.js";import"./index-CeQDmMxd.js";import"./vuedraggable.umd-DAKh-e3Q.js";import{e as z,u as H}from"./shop-DM8_bN_f.js";import"./Image.vue_vue_type_script_setup_true_lang-BWzCs9jv.js";import"./format-CRgx78oe.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const J={class:"container"},K={class:"content_wrapper"},P={class:"lyecs-form-table"},ae=R({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(S,{expose:k,emit:T}){const i=T,u=S,p=m(!1),_=U().currentRoute.value.query,b=m(u.isDialog?u.act:String(_.act)),g=m(u.isDialog?u.id:Number(_.id)),C=b.value==="add"?"create":"update",y=q(),t=m({}),L=async()=>{try{const s=await z(b.value,{shopId:g.value});Object.assign(t.value,s)}catch(s){v.error(s.message),i("close")}finally{p.value=!1}};F(()=>{L()});const V=async()=>{await y.value.validate();try{i("update:confirmLoading",!0);const s=await H(C,{id:g.value,...t.value});i("submitCallback",s),v.success("操作成功")}catch(s){v.error(s.message)}finally{i("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{V()}}),(s,e)=>{const w=n("el-radio-button"),B=n("el-radio-group"),r=n("el-form-item"),d=n("TigInput"),I=n("el-button"),N=n("el-form"),D=n("a-spin");return c(),M("div",J,[f("div",K,[f("div",P,[p.value?x("",!0):(c(),h(N,{key:0,ref_key:"formRef",ref:y,model:t.value,"label-width":"auto"},{default:l(()=>[o(r,{label:"店铺状态",prop:"status"},{default:l(()=>[o(B,{modelValue:t.value.status,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.status=a)},{default:l(()=>[o(w,{label:"暂停运营",value:4}),o(w,{label:"运营中",value:1})]),_:1},8,["modelValue"])]),_:1}),o(r,{label:"店铺名称",prop:"shopTitle",rules:[{required:!0,message:"店铺名称不能为空!"}]},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.shopTitle,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.shopTitle=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"店铺LOGO",prop:"shopLogo"},{default:l(()=>[p.value?x("",!0):(c(),h(j(A),{key:0,photo:t.value.shopLogo,"onUpdate:photo":e[2]||(e[2]=a=>t.value.shopLogo=a)},null,8,["photo"])),e[5]||(e[5]=f("div",{class:"extra"},"请统一上传比例为2:1的图片，宽200px，高100px（高清）",-1))]),_:1}),o(r,{label:"商家电话",prop:"contactMobile"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.contactMobile,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.contactMobile=a)},null,8,["modelValue"])]),_:1}),o(r,{label:"店铺描述",prop:"description"},{default:l(()=>[o(d,{classType:"tig-form-input",modelValue:t.value.description,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.description=a),row:5,type:"textarea"},null,8,["modelValue"])]),_:1}),O(o(r,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[o(I,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:V},{default:l(()=>e[6]||(e[6]=[E("提交")])),_:1},512)]),_:1},512),[[G,!u.isDialog]])]),_:1},8,["model"])),o(D,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{ae as default};
