import{d as F,r as C,c as _,o as i,b as o,w as l,e as a,aO as Y,f as d,D as n,_ as T,i as z,C as Z,s as tt,q as et,I as f,j as v,E as s,F as P,g as p,a as at}from"./index-CGYuOau0.js";import{a as st,u as lt,s as ot,o as q}from"./order-CoX6hLeE.js";import{M as E}from"./index-B-GURfkM.js";import{O as it}from"./OrderMoney-Dr2xgeDd.js";import{p as N}from"./format-DFT-VJzO.js";/* empty css                                               */import"./zh-cn-BAb8a1B9.js";/* empty css                                                                    */import{P as rt}from"./ProductCard-DnyTbnB8.js";import{u as nt}from"./config-DNllFJyR.js";import dt from"./OperationLog-G-T4Jf4I.js";import{M as ut}from"./MobileCard-CkxM62lR.js";import{_ as y}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import{S as pt}from"./index-UwV2qajK.js";import"./config-DU8_t5BN.js";import"./Pagination-yOfjsBuR.js";import"./index-smJsLN1o.js";const ct={class:"tooltip-con"},_t={class:"tooltip-title"},mt={key:0,class:"iconfont-admin icon-yiwen"},vt={style:{"max-width":"300px"}},ft=F({__name:"Tooltip",props:{content:{type:String,default:""},ico:{type:Boolean,default:!1},placement:{type:String,default:"top"}},setup(S){const O=S;return($,w)=>{const b=C("el-tooltip");return i(),_("div",ct,[o(b,{effect:"light",placement:O.placement,"show-after":100},{content:l(()=>[a("div",vt,n(O.content),1)]),default:l(()=>[a("div",_t,[Y($.$slots,"default",{},void 0,!0),O.ico?(i(),_("i",mt)):d("",!0)])]),_:3},8,["placement"])])}}}),yt=T(ft,[["__scopeId","data-v-52ec2082"]]),bt={key:0},gt={key:0,class:"container-card"},kt={class:"border-bottom"},xt={key:0,class:"button-card babyBlue pd20"},Ct={key:1},wt={class:"container-card"},Ot={class:"info-card"},ht={class:"card-title"},zt={class:"min-title"},Dt={class:"card-li"},St={class:"li-info"},$t={class:"card-li"},Bt={class:"li-info"},Pt={class:"card-li"},Et={class:"li-info"},Nt={key:0,class:"card-li"},Mt={class:"li-info"},Rt={key:1,class:"card-li"},Vt={class:"li-info"},Lt={key:2,class:"card-li"},It={class:"li-info"},qt={class:"card-li"},Ft={class:"li-info"},Tt={class:"card-li"},jt={class:"li-info"},Ut={class:"card-title"},Wt={class:"min-title"},At={class:"card-li"},Gt={class:"li-info"},Ht={class:"card-li"},Jt={class:"li-info"},Kt={class:"card-li"},Qt={class:"li-info"},Xt={class:"card-li"},Yt={class:"li-info"},Zt={class:"card-title"},te={class:"card-li"},ee={class:"li-info"},ae={class:"card-li"},se={class:"li-info"},le={class:"container-card"},oe={class:"title"},ie={class:"product-card-tp"},re={key:0,class:"gift"},ne={class:"total"},de={class:"gray",style:{"margin-right":"16px"}},ue={class:"title"},pe={key:1,class:"container-card"},ce={class:"title"},_e=F({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isParent:{type:Boolean,default:!1},isDialog:Boolean},emits:["submitCallback","callback","update:confirmLoading","close"],setup(S,{expose:O,emit:$}){nt();const w=$,b=S,k=z(!0),B=Z().currentRoute.value.query,M=z(b.isDialog?b.act:String(B.act)),h=z(b.isDialog?b.id:Number(B.id)),x=z(b.isDialog?b.isParent:!!B.isParent),j=M.value==="add"?"create":"update",U=tt(),e=z({balance:0,coupon_amount:0,points_amount:0,product_amount:0,total_product_weight:0,order_id:0,items:[],pay_type:0,available_actions:{},total_amount:0,paid_amount:0,update_order_sn:0,unpaid_amount:0});et(()=>{k.value=!0,R()});const R=async()=>{try{const r=await st(M.value,{id:h.value});Object.assign(e.value,r.item)}catch(r){f.error(r.message),w("close")}finally{k.value=!1}},W=()=>{E.confirm({title:"确认拆分订单吗？",onOk:async()=>{try{const r=await ot({id:h.value});f.success(r.message),m()}catch(r){f.error(r.message)}finally{k.value=!1}}})},A=()=>{E.confirm({title:"确认删除订单吗？",content:"被删除的订单可以通过筛选查找并恢复",onOk:async()=>{try{const r=await q("del_order",{id:h.value});f.success(r.message),m()}catch(r){f.error(r.message)}finally{k.value=!1}}})},G=()=>{E.confirm({title:"确认订单已收货吗？",onOk:async()=>{try{const r=await q("confirm_receipt",{id:h.value});f.success(r.message),m()}catch(r){f.error(r.message)}finally{k.value=!1}}})},m=(r={})=>{R(),w("callback",r)},H=async()=>{await U.value.validate();try{w("update:confirmLoading",!0);const r=await lt(j,{id:h.value,...e.value});w("submitCallback",r),f.success(r.message)}catch(r){f.error(r.message)}finally{w("update:confirmLoading",!1)}},J=()=>{H()},V=r=>{window.open(r,"_blank")};return O({onFormSubmit:J}),(r,t)=>{var I;const L=C("el-divider"),c=C("el-button"),K=C("el-space"),g=C("el-table-column"),Q=C("el-table"),X=C("a-spin");return i(),_(P,null,[k.value?d("",!0):(i(),_("div",bt,[x.value?d("",!0):(i(),_("div",gt,[a("div",kt,[s(" 订单编号："+n(e.value.order_sn)+" ",1),o(L,{direction:"vertical"}),s(" 下单时间："+n(e.value.add_time)+" ",1),e.value.store_title?(i(),_(P,{key:0},[o(L,{direction:"vertical"}),a("span",null,"下单店铺："+n(e.value.store_title),1)],64)):d("",!0)]),o(K,{size:10,class:"button-card"},{default:l(()=>[e.value.available_actions.set_paid?(i(),v(p(y),{key:0,params:{act:"set_paid",id:e.value.order_id},isDrawer:"",path:"order/order/src/Operation",title:"设置为已支付",width:"600px",onOkCallback:m},{default:l(()=>[o(c,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:l(()=>t[3]||(t[3]=[s(" 设置为已支付 ")])),_:1})]),_:1},8,["params"])):d("",!0),e.value.available_actions.cancel_order?(i(),v(p(y),{key:1,params:{act:"cancel_order",id:e.value.order_id},isDrawer:"",path:"order/order/src/Operation",title:"取消订单",width:"600px",onOkCallback:m},{default:l(()=>[o(c,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:l(()=>t[4]||(t[4]=[s(" 取消订单 ")])),_:1})]),_:1},8,["params"])):d("",!0),e.value.available_actions.del_order?(i(),v(c,{key:2,bg:"",size:"small",text:"",type:"primary",onClick:A},{default:l(()=>t[5]||(t[5]=[s(" 删除订单 ")])),_:1})):d("",!0),e.value.available_actions.deliver?(i(),v(p(y),{key:3,params:{act:"detail",id:e.value.order_id},title:"订单发货 "+e.value.order_sn,isDrawer:"",path:"order/order/src/ToShip",width:"900px",onOkCallback:m},{default:l(()=>[o(c,{bg:"",size:"small",text:"",type:"danger"},{default:l(()=>t[6]||(t[6]=[s(" 去发货 ")])),_:1})]),_:1},8,["params","title"])):d("",!0),e.value.available_actions.confirm_receipt?(i(),v(c,{key:4,bg:"",size:"small",text:"",type:"primary",onClick:G},{default:l(()=>t[7]||(t[7]=[s(" 确认已收货 ")])),_:1})):d("",!0),e.value.available_actions.split_order?(i(),v(c,{key:5,bg:"",size:"small",text:"",type:"danger",onClick:W},{default:l(()=>[t[8]||(t[8]=s(" 拆分店铺订单")),o(p(yt),{ico:"",content:"该订单来自多个店铺且还未拆分，在做任何操作前，您需要先拆分该订单"})]),_:1})):d("",!0),o(p(y),{params:{act:"detail",id:e.value.order_id,valueName:"admin_note"},isDrawer:"",path:"order/order/src/EditRemark",title:"编辑备注",width:"600px",onOkCallback:m},{default:l(()=>[o(c,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:l(()=>t[9]||(t[9]=[s(" 商家备注 ")])),_:1})]),_:1},8,["params"]),o(c,{bg:"",size:"small",text:"",type:"primary",onClick:t[0]||(t[0]=u=>V(`/admin/print/orderPrint?ids=${e.value.order_id}`))},{default:l(()=>t[10]||(t[10]=[s(" 打印订单 ")])),_:1}),e.value.way_bill?(i(),v(c,{key:6,bg:"",size:"small",text:"",type:"primary",onClick:t[1]||(t[1]=u=>V(`/admin/print/waybill?id=${e.value.order_id}`))},{default:l(()=>t[11]||(t[11]=[s(" 打印面单 ")])),_:1})):d("",!0)]),_:1}),e.value.step_status?(i(),_("div",xt,[o(p(pt),{current:e.value.step_status.current,size:"small",status:e.value.step_status.status,items:e.value.step_status.steps},null,8,["current","status","items"])])):d("",!0),e.value.admin_note?(i(),_("div",Ct,[t[13]||(t[13]=a("span",{class:"orange"},"商家备注：",-1)),s(n(e.value.admin_note)+" ",1),o(p(y),{params:{act:"detail",id:e.value.order_id,valueName:"admin_note"},isDrawer:"",path:"order/order/src/EditRemark",title:"编辑备注",width:"600px",onOkCallback:m},{default:l(()=>[o(c,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:l(()=>t[12]||(t[12]=[s(" 修改 ")])),_:1})]),_:1},8,["params"])])):d("",!0)])),a("div",wt,[t[33]||(t[33]=a("div",{class:"title"},"订单明细",-1)),a("div",Ot,[a("div",ht,[a("div",zt,[t[15]||(t[15]=s(" 收货人信息 ")),x.value?d("",!0):(i(),v(p(y),{key:0,params:{act:"detail",id:e.value.order_id,form:e.value},isDrawer:"",path:"order/order/src/EditConsignee",title:"编辑收货人信息",width:"600px",onOkCallback:m},{default:l(()=>[o(c,{bg:"",class:"ml10",size:"small",text:"",type:"primary"},{default:l(()=>t[14]||(t[14]=[s(" 编辑 ")])),_:1})]),_:1},8,["params"]))]),a("ul",null,[a("li",Dt,[t[16]||(t[16]=s(" 会员名称：")),a("span",St,n(((I=e.value.user)==null?void 0:I.username)||"--"),1)]),a("li",$t,[t[17]||(t[17]=s("     收货人：")),a("span",Bt,n(e.value.consignee?e.value.consignee:"--"),1)]),a("li",Pt,[t[18]||(t[18]=s(" 联系电话：")),a("span",Et,[o(ut,{mobile:e.value.mobile},null,8,["mobile"])])]),e.value.telephone?(i(),_("li",Nt,[t[19]||(t[19]=s(" 手机：")),a("span",Mt,n(e.value.telephone?e.value.telephone:"--"),1)])):d("",!0),e.value.email?(i(),_("li",Rt,[t[20]||(t[20]=s(" 电子邮件：")),a("span",Vt,n(e.value.email),1)])):d("",!0),e.value.postcode?(i(),_("li",Lt,[t[21]||(t[21]=s(" 邮政编码：")),a("span",It,n(e.value.postcode),1)])):d("",!0),a("li",qt,[t[22]||(t[22]=s(" 收货地址： ")),a("span",Ft,n(e.value.user_address?e.value.user_address:"--"),1)]),a("li",Tt,[t[23]||(t[23]=s(" 订单备注： ")),a("span",jt,n(e.value.buyer_note?e.value.buyer_note:"--"),1)])])]),a("div",Ut,[a("div",Wt,[t[25]||(t[25]=s(" 配送信息 ")),x.value?d("",!0):(i(),v(p(y),{key:0,params:{act:"detail",id:e.value.order_id},isDrawer:"",path:"order/order/src/EditShipping",title:"编辑配送方式",width:"600px",onOkCallback:m},{default:l(()=>[o(c,{disabled:!e.value.available_actions.modify_shipping_info,bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:l(()=>t[24]||(t[24]=[s(" 编辑 ")])),_:1},8,["disabled"])]),_:1},8,["params"]))]),a("ul",null,[a("li",At,[t[26]||(t[26]=s(" 配送方式：")),a("span",Gt,n(e.value.shipping_type_name),1)]),a("li",Ht,[t[27]||(t[27]=s(" 发货时间：")),a("span",Jt,n(e.value.shipping_time?e.value.shipping_time:"--"),1)]),a("li",Kt,[t[28]||(t[28]=s(" 物流名称：")),a("span",Qt,n(e.value.logistics_name?e.value.logistics_name:"--"),1)]),a("li",Xt,[t[29]||(t[29]=s(" 发货单号：")),a("span",Yt,n(e.value.tracking_no?e.value.tracking_no:"--"),1)])])]),a("div",Zt,[t[32]||(t[32]=a("div",{class:"min-title"},"付款信息",-1)),a("ul",null,[a("li",te,[t[30]||(t[30]=s(" 支付方式：")),a("span",ee,n(e.value.pay_type_id===1?"在线支付":e.value.pay_type_id===2?"货到付款":"线下支付"),1)]),a("li",ae,[t[31]||(t[31]=s(" 付款时间：")),a("span",se,n(e.value.pay_time?e.value.pay_time:"--"),1)])])])])]),a("div",le,[a("div",oe,[t[35]||(t[35]=s(" 商品信息 ")),x.value?d("",!0):(i(),v(p(y),{key:0,params:{act:"detail",id:e.value.order_id},isDrawer:"",path:"order/order/src/EditProduct",title:"编辑商品信息",width:"1050px",onOkCallback:m},{default:l(()=>[o(c,{disabled:!e.value.available_actions.modify_order,bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:l(()=>t[34]||(t[34]=[s(" 编辑 ")])),_:1},8,["disabled"])]),_:1},8,["params"]))]),o(Q,{data:e.value.items},{default:l(()=>[o(g,{label:"商品名称",prop:"product_id",width:"220"},{default:l(({row:u})=>[a("div",ie,[u.is_gift?(i(),_("div",re,"赠")):d("",!0),o(p(rt),{pic_thumb:u.pic_thumb,product_id:u.product_id,product_name:u.product_name,product_type:u.product_type,url:u.url},null,8,["pic_thumb","product_id","product_name","product_type","url"])])]),_:1}),o(g,{label:"属性",prop:"product_attr"},{default:l(({row:u})=>[s(n(u.sku_value),1)]),_:1}),o(g,{label:"附加规格",prop:"extra_sku_data"},{default:l(({row:u})=>[(i(!0),_(P,null,at(u.extra_sku_data,D=>(i(),_("div",{class:"extraskudata",key:D},n(D.attr_name+D.attr_value+p(N)(D.total_attr_price)),1))),128))]),_:1}),o(g,{label:"商品编号",width:"150"},{default:l(({row:u})=>[s(n(u.product_sn),1)]),_:1}),o(g,{label:"价格",prop:"price"},{default:l(({row:u})=>[s(n(p(N)(u.price)),1)]),_:1}),o(g,{label:"数量",prop:"quantity"}),o(g,{label:"库存",prop:"stock"}),o(g,{label:"小计",prop:"subtotal"})]),_:1},8,["data"]),a("div",ne,[a("span",de,"商品总重量："+n(e.value.total_product_weight)+"kg",1),a("span",null,"合计："+n(p(N)(e.value.product_amount)),1)]),a("div",ue,[t[37]||(t[37]=s(" 订单金额 ")),x.value?d("",!0):(i(),v(p(y),{key:0,params:{act:"detail",id:e.value.order_id},isDrawer:"",path:"order/order/src/EditMoney",title:"编辑金额",width:"600px",onOkCallback:m},{default:l(()=>[o(c,{disabled:!e.value.available_actions.modify_order_money,bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:l(()=>t[36]||(t[36]=[s(" 编辑 ")])),_:1},8,["disabled"])]),_:1},8,["params"]))]),o(p(it),{modelValue:e.value,"onUpdate:modelValue":t[2]||(t[2]=u=>e.value=u)},null,8,["modelValue"])]),x.value?d("",!0):(i(),_("div",pe,[a("div",ce,[t[39]||(t[39]=s(" 物流追踪 ")),o(c,{bg:"",class:"ml10",size:"small",text:"",type:"primary"},{default:l(()=>t[38]||(t[38]=[s(" 展开 ")])),_:1})])])),x.value?d("",!0):(i(),v(dt,{key:2,order_id:e.value.order_id},null,8,["order_id"]))])),o(X,{spinning:k.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])],64)}}}),Pe=T(_e,[["__scopeId","data-v-98b4e502"]]);export{Pe as default};
