import{d as A,i as p,C as I,s as L,q as h,r as s,c as j,o as C,e as c,j as E,f as $,b as t,w as l,a0 as G,g as u,E as f,a1 as O,I as v}from"./index-CGYuOau0.js";import{F as P}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-CjXfTDg5.js";import{S as T}from"./SelectBrand-DsStZmqh.js";import{_ as N}from"./SelectCategory.vue_vue_type_script_setup_true_lang-D0pGcDY-.js";import"./index-B-GURfkM.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-t3_hMxDC.js";/* empty css                                                                    *//* empty css                                                                  *//* empty css                                                                              */import{_ as z}from"./SelectColor.vue_vue_type_script_setup_true_lang-DaNn8bLS.js";/* empty css             */import{a as H,c as J}from"./mobileCatNav-BXkizJV6.js";import"./vuedraggable.umd-_1km55l4.js";import"./Image.vue_vue_type_script_setup_true_lang-D9PqZe9n.js";import"./format-DFT-VJzO.js";import"./config-DNllFJyR.js";import"./config-DU8_t5BN.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./brand-BWQ0xslz.js";import"./category-BQcUsnE8.js";import"./category-DpIl2IOo.js";import"./time-ClyPenjC.js";const K={class:"container"},Q={class:"content_wrapper"},W={class:"lyecs-form-table"},we=A({__name:"Info",props:{id:{type:Number,default:0},type:{type:Number,default:0},type_name:{type:String,default:""},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(S,{expose:k,emit:x}){const d=x,n=S,m=p(!0),g=I().currentRoute.value.query,_=p(n.isDialog?n.act:String(g.act)),b=p(n.isDialog?n.id:Number(g.id)),B=_.value==="add"?"create":"update",y=L(),o=p({brand_ids:[],is_show:1,sort_order:50}),U=async()=>{try{const r=await H(_.value,{id:b.value});r.item.brand_ids==null&&(r.item.brand_ids=[]),Object.assign(o.value,r.item),Array.isArray(o.value.img_url)||(o.value.img_url=[])}catch(r){v.error(r.message),d("close")}finally{m.value=!1}};h(()=>{_.value==="detail"?U():m.value=!1});const w=async()=>{await y.value.validate();try{d("update:confirmLoading",!0);const r=await J(B,{id:b.value,...o.value});d("submitCallback",r),v.success(r.message)}catch(r){v.error(r.message)}finally{d("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{w()}}),(r,e)=>{const i=s("el-form-item"),D=s("el-input"),V=s("el-radio"),M=s("el-radio-group"),R=s("el-button"),q=s("el-form"),F=s("a-spin");return C(),j("div",K,[c("div",Q,[c("div",W,[m.value?$("",!0):(C(),E(q,{key:0,ref_key:"formRef",ref:y,model:o.value,"label-width":"auto"},{default:l(()=>[t(i,{label:"选择分类",rules:[{required:!0,message:"名称不能为空!"}],prop:"category_id"},{default:l(()=>[t(u(N),{category_id:o.value.category_id,"onUpdate:category_id":e[0]||(e[0]=a=>o.value.category_id=a)},null,8,["category_id"])]),_:1}),t(i,{label:"分类颜色",prop:"cat_color"},{default:l(()=>[t(u(z),{color:o.value.cat_color,"onUpdate:color":e[1]||(e[1]=a=>o.value.cat_color=a)},null,8,["color"])]),_:1}),t(i,{label:"分类banner",prop:"cat_color"},{default:l(()=>[t(u(P),{photos:o.value.img_url,"onUpdate:photos":e[2]||(e[2]=a=>o.value.img_url=a),isMultiple:!0},null,8,["photos"]),e[7]||(e[7]=c("div",{class:"extra"},"提示：您可以通过拖拽来调整相册图片顺序，请统一上传比例为2:1的图片",-1))]),_:1}),t(i,{label:"推荐子分类",prop:"child_cat_ids"},{default:l(()=>[t(u(N),{category_id:o.value.child_cat_ids,"onUpdate:category_id":e[3]||(e[3]=a=>o.value.child_cat_ids=a),multiple:!0},null,8,["category_id"])]),_:1}),t(i,{label:"推荐品牌",prop:"brand_ids"},{default:l(()=>[t(u(T),{modelValue:o.value.brand_ids,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.brand_ids=a),modelModifiers:{brand_ids:!0},style:{width:"200px"},multiple:""},null,8,["modelValue"])]),_:1}),t(i,{label:"排序",prop:"sort_order"},{default:l(()=>[t(D,{modelValue:o.value.sort_order,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.sort_order=a)},null,8,["modelValue"])]),_:1}),t(i,{label:"是否显示",prop:"is_show"},{default:l(()=>[t(M,{modelValue:o.value.is_show,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.is_show=a)},{default:l(()=>[t(V,{value:1},{default:l(()=>e[8]||(e[8]=[f("是")])),_:1}),t(V,{value:0},{default:l(()=>e[9]||(e[9]=[f("否")])),_:1})]),_:1},8,["modelValue"])]),_:1}),G(t(i,{"wrapper-col":{offset:4,span:16}},{default:l(()=>[t(R,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:w},{default:l(()=>e[10]||(e[10]=[f("提交")])),_:1},512)]),_:1},512),[[O,!n.isDialog]])]),_:1},8,["model"])),t(F,{spinning:m.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{we as default};
