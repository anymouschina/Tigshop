import{d as $,j as u,I,x as K,r as d,o as v,c as h,e as t,b as e,w as o,f as p,h as b,K as y,L as U,H as c,G as z,q as j}from"./index-7c2d2aef.js";/* empty css             */import"./index-6c62cf9b.js";import{_ as x}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-ae1bade7.js";/* empty css                                                                    */import{P as E}from"./Pagination-8eb7b6b1.js";import{u as F}from"./config-9548fa9b.js";import{g as G,r as H,d as M,b as O}from"./pushLog-b7b334cc.js";import{_ as T}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";const J={class:"container"},Q={class:"content_wrapper"},R={class:"lyecs-table-list-warp"},W={class:"list-table-tool lyecs-search-warp"},X={class:"advanced-search-warp list-table-tool-row"},Y={class:"simple-form-warp"},Z={class:"simple-form-field"},ee={class:"form-group"},te={class:"control-container"},se=t("span",{class:"iconfont icon-chakan1"},null,-1),oe={class:"simple-form-field"},ae={class:"form-group"},le={class:"control-container"},ne={class:"simple-form-field"},ie={class:"form-group"},re={class:"control-container"},de={class:"simple-form-field"},ce={class:"form-group"},_e={class:"control-container"},pe={key:0},me={class:"table-container"},ue={class:"empty-warp"},fe={key:0,class:"empty-bg"},ge={key:0,class:"pagination-con"},Ve=$({__name:"List",setup(ve){const L=F(),w=u([]),m=u(!0),f=u(0),_=u([]);u(!1);const n=I({page:1,size:L.get("page_size"),sort_field:"",sort_order:"",keyword:""}),i=async()=>{m.value=!0;try{const l=await G({...n});w.value=l.filter_result,f.value=l.total}catch(l){y.error(l.message)}finally{m.value=!1}};K(()=>{i()});const k=()=>{i()},V=({prop:l,order:s})=>{n.sort_field=l,n.sort_order=s=="ascending"?"asc":s=="descending"?"desc":"",i()},C=async l=>{try{const s=await O(l,{ids:_.value});y.success(s.message),i()}catch(s){y.error(s.message)}},A=l=>{_.value=l.map(s=>s.brand_id)};return(l,s)=>{const g=d("el-button"),P=d("el-input"),S=d("el-popconfirm"),q=d("el-form"),r=d("el-table-column"),B=d("el-divider"),D=d("el-table"),N=d("a-spin");return v(),h("div",J,[t("div",Q,[t("div",R,[t("div",W,[e(q,{model:n},{default:o(()=>[t("div",X,[t("div",Y,[t("div",Z,[t("div",ee,[t("div",te,[e(P,{modelValue:n.keyword,"onUpdate:modelValue":s[0]||(s[0]=a=>n.keyword=a),name:"keyword",placeholder:"输入标题",onKeyup:U(k,["enter"])},{append:o(()=>[e(g,{onClick:k},{default:o(()=>[se]),_:1})]),_:1},8,["modelValue"])])])]),t("div",oe,[t("div",ae,[t("div",le,[e(p(T),{params:{act:"add"},isDrawer:"",path:"user/pushLog/Info",title:"添加推送",width:"600px",onOkCallback:i},{default:o(()=>[e(g,{type:"primary"},{default:o(()=>[c("添加推送")]),_:1})]),_:1})])])]),t("div",ne,[t("div",ie,[t("div",re,[e(S,{title:"您确认要批量撤回所选数据吗？",onConfirm:s[1]||(s[1]=a=>C("recall"))},{reference:o(()=>[e(g,{disabled:_.value.length===0},{default:o(()=>[c("批量撤回")]),_:1},8,["disabled"])]),_:1})])])]),t("div",de,[t("div",ce,[t("div",_e,[e(S,{title:"您确认要批量删除所选数据吗？",onConfirm:s[2]||(s[2]=a=>C("del"))},{reference:o(()=>[e(g,{disabled:_.value.length===0},{default:o(()=>[c("批量删除")]),_:1},8,["disabled"])]),_:1}),_.value.length>0?(v(),h("span",pe,[c(" 已选择："),t("b",null,z(_.value.length),1),c(" 项 ")])):b("",!0)])])])])])]),_:1},8,["model"])]),t("div",me,[e(N,{spinning:m.value},{default:o(()=>[e(D,{data:w.value,loading:m.value,total:f.value,"row-key":"message_log_id",onSelectionChange:A,onSortChange:V},{empty:o(()=>[t("div",ue,[m.value?b("",!0):(v(),h("div",fe,"暂无数据"))])]),default:o(()=>[e(r,{type:"selection",width:"32"}),e(r,{label:"标题",prop:"message_title"}),e(r,{label:"内容",prop:"message_content"}),e(r,{label:"链接",prop:"message_link"}),e(r,{width:100,label:"发送类型",prop:"send_type_name"}),e(r,{width:100,label:"发送状态",prop:"brand_id"},{default:o(({row:a})=>[t("span",{style:j({color:a.is_recall===0?"green":"red"})},z(a.status_name),5)]),_:1}),e(r,{width:160,label:"发送日期",prop:"send_time"}),e(r,{width:100,fixed:"right",label:"操作"},{default:o(({row:a})=>[e(p(x),{params:{id:a.brand_id},requestApi:p(H),onAfterDelete:i},{default:o(()=>[c("撤回 ")]),_:2},1032,["params","requestApi"]),e(B,{direction:"vertical"}),e(p(x),{params:{id:a.brand_id},requestApi:p(M),onAfterDelete:i},{default:o(()=>[c("删除 ")]),_:2},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),f.value>0?(v(),h("div",ge,[e(p(E),{page:n.page,"onUpdate:page":s[3]||(s[3]=a=>n.page=a),size:n.size,"onUpdate:size":s[4]||(s[4]=a=>n.size=a),total:f.value,onCallback:i},null,8,["page","size","total"])])):b("",!0)])])])])}}});export{Ve as default};
