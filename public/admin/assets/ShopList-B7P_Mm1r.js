import{d as $,K as j,i as m,G,C as V,q as Q,c as p,e as a,b as s,w as o,M as H,g as r,f as _,E as g,D as k,I as x,r as c,o as l,j as y,aQ as B,n as J,_ as W}from"./index-DrbzVNl6.js";/* empty css             */import"./index-CeQDmMxd.js";import{D as X}from"./DeleteRecord-MR4vGqLl.js";/* empty css                                                                    */import{P as Y}from"./Pagination-wR9huHyl.js";import{i as Z,r as ee}from"./format-CRgx78oe.js";import{g as te,b as ae,d as se}from"./adminUser-CTRuV4iV.js";import{M as oe}from"./MobileCard-BSBggTtf.js";import"./Verify.vue_vue_type_style_index_0_lang-B5aTvMR3.js";import"./zh-cn-W45FenWv.js";import{T as le}from"./Tag-GwM_ruJO.js";import{_ as q}from"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const ne={class:"container"},ie={class:"content_wrapper"},re={class:"lyecs-table-list-warp"},de={class:"list-table-tool lyecs-search-warp"},ce={class:"advanced-search-warp list-table-tool-row"},pe={class:"simple-form-warp"},ue={class:"simple-form-field"},me={class:"form-group"},_e={class:"control-container"},ve={class:"simple-form-field"},fe={class:"form-group"},ge={class:"control-container"},ye={class:"simple-form-field"},be={class:"form-group"},he={class:"control-container"},ke={key:0},Se={class:"table-container"},Ce={class:"avatar-username"},we={key:0},ze={key:1,class:"gray"},Ie={class:"empty-warp"},xe={key:0,class:"empty-bg"},De={key:0,class:"pagination-con"},Ne=$({__name:"ShopList",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},setup(A){V();const T=j(),D=m([]),v=m(!0),b=m(0),f=m([]),i=G({page:1,size:T.get("pageSize"),sortField:"",sortOrder:"",keyword:""}),d=async()=>{v.value=!0;try{const n=await te({...i});D.value=n.records,b.value=n.total}catch(n){x.error(n.message)}finally{v.value=!1}},h=A,N=V().currentRoute.value.query,S=m(h.isDialog?h.act:String(N.act)),C=m(h.isDialog?h.id:Number(N.id));Q(()=>{S.value&&(i.suppliersId=C.value),d()});const w=()=>{d()},F=({prop:n,order:e})=>{i.sortField=n,i.sortOrder=e=="ascending"?"asc":e=="descending"?"desc":"",d()},M=async n=>{try{const e=await ae(n,{ids:f.value});x.success("操作成功"),d()}catch(e){x.error(e.message)}},O=n=>{f.value=n.map(e=>e.id)};return(n,e)=>{const z=c("el-button"),K=c("TigInput"),L=c("el-popconfirm"),u=c("el-table-column"),I=c("el-avatar"),P=c("el-divider"),R=c("el-table"),E=c("a-spin");return l(),p("div",ne,[a("div",ie,[a("div",re,[a("div",de,[a("div",ce,[a("div",pe,[a("div",ue,[a("div",me,[a("div",_e,[s(K,{modelValue:i.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>i.keyword=t),name:"keyword",placeholder:"输入员工名称",onKeyup:H(w,["enter"]),clearable:"",onClear:w},{append:o(()=>[s(z,{onClick:w},{default:o(()=>e[4]||(e[4]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),a("div",ve,[a("div",fe,[a("div",ge,[s(r(q),{params:{act:"add",type:S.value?S.value:"",suppliersId:C.value?C.value:0},isDrawer:"",path:"authority/adminUser/ShopInfo",title:"添加员工",width:"800px",onOkCallback:d},{default:o(()=>[s(z,{type:"primary"},{default:o(()=>e[5]||(e[5]=[g("添加员工")])),_:1})]),_:1},8,["params"])])])]),a("div",ye,[a("div",be,[a("div",he,[s(L,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=t=>M("del"))},{reference:o(()=>[s(z,{disabled:f.value.length===0},{default:o(()=>e[6]||(e[6]=[g("批量删除")])),_:1},8,["disabled"])]),_:1}),f.value.length>0?(l(),p("span",ke,[e[7]||(e[7]=g(" 已选择：")),a("b",null,k(f.value.length),1),e[8]||(e[8]=g(" 项 "))])):_("",!0)])])])])])]),a("div",Se,[s(E,{spinning:v.value},{default:o(()=>[s(R,{data:D.value,loading:v.value,total:b.value,"row-key":"id",onSelectionChange:O,onSortChange:F},{empty:o(()=>[a("div",Ie,[v.value?_("",!0):(l(),p("div",xe,"暂无数据"))])]),default:o(()=>[s(u,{type:"selection",width:"32"}),s(u,{width:"200",label:"员工名称",prop:"username"},{default:o(({row:t})=>[a("div",Ce,[r(B)(String(t.avatar))=="one"?(l(),y(I,{key:0,size:30,src:r(Z)(t.avatar)},null,8,["src"])):r(B)(String(t.avatar))=="def"?(l(),y(I,{key:1,size:30,src:r(ee)(t.avatar)},null,8,["src"])):(l(),y(I,{key:2,size:30,src:""})),a("div",null,[a("div",null,k(t.username||"-"),1),t.isAdmin==1?(l(),p("div",we,[s(r(le),{transparent:!0,text:"店铺管理员"})])):_("",!0)])])]),_:1}),s(u,{label:"权限组",prop:"roleName"},{default:o(({row:t})=>[t.role?(l(),p("span",{key:0,class:J(t.role.roleName?"green":"gray")},k(t.role.roleName||"-"),3)):(l(),p("span",ze,"自定义权限"))]),_:1}),s(u,{label:"邮箱",prop:"email"},{default:o(({row:t})=>[a("span",null,k(t.email||"-"),1)]),_:1}),s(u,{label:"手机号",prop:"mobile"},{default:o(({row:t})=>{var U;return[a("span",null,[s(oe,{mobile:(U=t.adminUser)==null?void 0:U.mobile},null,8,["mobile"])])]}),_:1}),s(u,{width:150,fixed:"right",label:"操作"},{default:o(({row:t})=>[s(r(q),{params:{act:"detail",id:t.id},isDrawer:"",path:"authority/adminUser/ShopInfo",title:"编辑员工",width:"800px",onOkCallback:d},{default:o(()=>e[9]||(e[9]=[a("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),t.adminId!=1?(l(),y(P,{key:0,direction:"vertical"})):_("",!0),t.adminId!=1?(l(),y(r(X),{key:1,params:{id:t.id},requestApi:r(se),onAfterDelete:d},{default:o(()=>e[10]||(e[10]=[g("删除 ")])),_:2},1032,["params","requestApi"])):_("",!0)]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),b.value>0?(l(),p("div",De,[s(r(Y),{page:i.page,"onUpdate:page":e[2]||(e[2]=t=>i.page=t),size:i.size,"onUpdate:size":e[3]||(e[3]=t=>i.size=t),total:b.value,onCallback:d},null,8,["page","size","total"])])):_("",!0)])])])])}}}),Ee=W(Ne,[["__scopeId","data-v-1af184d6"]]);export{Ee as default};
