/* empty css             */import{d as W,I as F,j as _,x as J,r as d,aW as X,o,c as r,e,G as c,f as n,H as h,b as a,w as s,$ as j,k as g,h as m,K as B,Q as Z,ba as M,F as tt,a as et,p as at,i as st,_ as lt}from"./index-7c2d2aef.js";/* empty css                                                                    */import{P as A}from"./Pagination-8eb7b6b1.js";import{p as y}from"./format-4e0206d3.js";import{u as ot}from"./config-9548fa9b.js";import{_ as nt}from"./Image.vue_vue_type_script_setup_true_lang-36bd437b.js";import"./index-6c62cf9b.js";import{g as it}from"./dashboard-e9d3e731.js";import{g as rt}from"./order-5e1a3c9e.js";import{g as ct}from"./shop-b8a8699a.js";import{_ as G}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./util-1ee03ed8.js";import"./config-e2aa16d1.js";const k=w=>(at("data-v-db113376"),w=w(),st(),w),_t={class:"container"},dt={class:"content_wrapper"},ut={class:"tit-box"},pt={class:"tit"},mt={class:"balance-box flex-wrap"},ht={class:"label"},vt={class:"title"},ft=k(()=>e("div",{class:"tooltip-width"},"可用店铺余额=店铺余额-不可用店铺余额",-1)),bt={class:"num"},gt={class:"label"},yt={class:"title"},kt=k(()=>e("div",{class:"tooltip-width"},"交易未完成的订单总额，消费者确认收货后将自动转入店铺余额",-1)),wt={class:"num"},xt={class:"label"},zt={class:"title"},Lt=k(()=>e("div",{class:"tooltip-width"},"提现中或者退款中的冻结店铺余额",-1)),Ct={class:"num"},St=k(()=>e("div",{class:"tit-box"},[e("div",{class:"tit"},[e("span",null,"店铺余额排行")])],-1)),Dt={class:"lyecs-table-list-warp"},Ot={class:"table-container"},It={key:0},Ft={key:0,class:"btn-link green"},Bt={key:1,class:"btn-link grey"},Mt={key:2,style:{color:"red"}},Nt={key:3,style:{color:"green"}},Pt={class:"empty-warp"},Ut={key:0,class:"empty-bg"},Vt={key:0,class:"pagination-con"},Yt=k(()=>e("div",{class:"tit-box"},[e("div",{class:"tit"},[e("span",null,"最近交易记录")])],-1)),Ht={class:"lyecs-table-list-warp"},Tt={class:"table-container"},$t={class:"empty-warp"},jt={key:0,class:"empty-bg"},At={key:0,class:"pagination-con"},Gt=W({__name:"List",setup(w){const C=F([{value:-1,label:"全部"},{value:0,label:"待支付"},{value:1,label:"待发货"},{value:2,label:"已发货"},{value:3,label:"已取消"},{value:4,label:"无效"},{value:5,label:"已完成"},{value:-2,label:"已删除"},{value:99,label:"待结算"}]),q=ot(),N=_([]),v=_(!0),x=_(!0),S=_(!0),f=_(0);_(!0);const u=F({page:1,size:q.get("page_size"),sort_field:"",sort_order:"",order_status:-1,is_settlement:0}),z=_({shop_money:0}),L=async()=>{v.value=!0;try{const l=await it();z.value=l.item}catch(l){B.error(l.message)}finally{v.value=!1}},b=F({page:1,size:10,sort_field:"shop_money",sort_order:"desc"}),P=_([]),D=_(0),U=async()=>{x.value=!0;try{const l=await ct({...b});P.value=l.filter_result,D.value=l.total}catch(l){B.error(l.message)}finally{x.value=!1}},V=async()=>{S.value=!0;try{const l=await rt({...u});N.value=l.filter_result,f.value=l.total}catch(l){B.error(l.message)}finally{S.value=!1}};J(()=>{L(),V(),U()});const E=l=>{C[l].value!=99?u.order_status=C[l].value:(u.order_status=-1,u.is_settlement=0),V()};return(l,p)=>{const O=d("el-icon"),I=d("el-tooltip"),Y=d("el-button"),K=d("router-link"),i=d("el-table-column"),H=d("StatusDot"),T=d("el-table"),Q=d("el-tab-pane"),R=d("el-tabs"),$=X("loading");return o(),r("div",_t,[e("div",dt,[e("div",ut,[e("div",pt,[e("span",null,"所有店铺总余额: 截止时间: ["+c(n(Z)(new Date).format("YYYY-MM-DD HH:mm:ss"))+"]",1)])]),e("div",mt,[e("div",ht,[e("div",vt,[h(" 余额总结余(元) "),a(I,{placement:"bottom",effect:"light"},{content:s(()=>[ft]),default:s(()=>[a(O,null,{default:s(()=>[a(n(M))]),_:1})]),_:1}),a(K,{to:{path:"/shop/shopAccountRaply/list"}},{default:s(()=>[a(Y,{type:"primary",link:""},{default:s(()=>[h("提现申请")]),_:1})]),_:1})]),e("div",bt,c(n(y)(z.value.shop_money)||0),1)]),e("div",gt,[e("div",yt,[h(" 待结算总额(元) "),a(I,{placement:"bottom",effect:"light"},{content:s(()=>[kt]),default:s(()=>[a(O,null,{default:s(()=>[a(n(M))]),_:1})]),_:1})]),e("div",wt,c(n(y)(z.value.un_settlement_money)||0),1)]),e("div",xt,[e("div",zt,[h(" 不可用余额(元) "),a(I,{placement:"bottom",effect:"light"},{content:s(()=>[Lt]),default:s(()=>[a(O,null,{default:s(()=>[a(n(M))]),_:1})]),_:1})]),e("div",Ct,c(n(y)(z.value.frozen_money)||0),1)])]),St,e("div",Dt,[e("div",Ot,[j((o(),g(T,{data:P.value,loading:x.value,total:D.value,"row-key":"log_id"},{empty:s(()=>[e("div",Pt,[v.value?m("",!0):(o(),r("div",Ut,"暂无数据"))])]),default:s(()=>[a(i,{label:"店铺名称"},{default:s(({row:t})=>[h(c(t.shop_title||"--"),1)]),_:1}),a(i,{label:"店铺LOGO"},{default:s(({row:t})=>[a(n(nt),{src:t.shop_logo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),a(i,{label:"商户名称",width:200},{default:s(({row:t})=>[t.merchant?(o(),r("div",It,[e("span",null,c(t.merchant.corporate_name||"--"),1),a(n(G),{params:{act:"detail",id:t.merchant.merchant_id},isDrawer:"",path:"adminMerchant/merchant/Info",title:"商户详情",width:"600px",showClose:!1,showOnOk:!1,onOkCallback:L},{default:s(()=>[t.merchant.status==1?(o(),r("a",Ft,"(已认证)")):(o(),r("a",Bt,"(未认证)"))]),_:2},1032,["params"])])):m("",!0)]),_:1}),a(i,{label:"店铺余额(元)"},{default:s(({row:t})=>[h(c(n(y)(t.shop_money)||0),1)]),_:1}),a(i,{label:"店铺状态",sortable:"custom"},{default:s(({row:t})=>[t.status==10?(o(),g(H,{key:0,color:"red",flicker:!0})):m("",!0),t.status==1?(o(),g(H,{key:1,color:"green",flicker:!0})):m("",!0),t.status===10?(o(),r("span",Mt,c(t.status_text),1)):t.status===1?(o(),r("span",Nt,c(t.status_text),1)):m("",!0)]),_:1})]),_:1},8,["data","loading","total"])),[[$,x.value]]),f.value>0?(o(),r("div",Vt,[a(n(A),{page:b.page,"onUpdate:page":p[0]||(p[0]=t=>b.page=t),size:b.size,"onUpdate:size":p[1]||(p[1]=t=>b.size=t),total:D.value,onCallback:U},null,8,["page","size","total"])])):m("",!0)])]),Yt,e("div",Ht,[a(R,{type:"card",onTabChange:E},{default:s(()=>[(o(!0),r(tt,null,et(C,t=>(o(),g(Q,{label:t.label},null,8,["label"]))),256))]),_:1}),e("div",Tt,[j((o(),g(T,{data:N.value,loading:v.value,total:f.value,"row-key":"log_id"},{empty:s(()=>[e("div",$t,[v.value?m("",!0):(o(),r("div",jt,"暂无数据"))])]),default:s(()=>[a(i,{label:"时间",prop:"add_time",width:"160"}),a(i,{label:"购买用户",width:"160"},{default:s(({row:t})=>[e("span",null,c(t.user.username),1)]),_:1}),a(i,{label:"订单编号",prop:"order_sn",width:"160"}),a(i,{label:"金额(元)|明细"},{default:s(({row:t})=>[e("span",null,"总金额: "+c(n(y)(t.total_amount)||0),1)]),_:1}),a(i,{label:"状态",prop:"order_status_name",width:"120"}),a(i,{label:"操作",width:"80"},{default:s(({row:t})=>[a(n(G),{params:{act:"detail",id:t.order_id},showClose:!1,showOnOk:!1,title:"订单详情 "+t.order_sn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:L},{default:s(()=>[a(Y,{size:"small",link:"",type:"primary"},{default:s(()=>[h(" 查看详情 ")]),_:1})]),_:2},1032,["params","title"])]),_:1})]),_:1},8,["data","loading","total"])),[[$,S.value]]),f.value>0?(o(),r("div",At,[a(n(A),{page:u.page,"onUpdate:page":p[2]||(p[2]=t=>u.page=t),size:u.size,"onUpdate:size":p[3]||(p[3]=t=>u.size=t),total:f.value,onCallback:L},null,8,["page","size","total"])])):m("",!0)])])])])}}});const oe=lt(Gt,[["__scopeId","data-v-db113376"]]);export{oe as default};
