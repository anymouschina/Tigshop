/* empty css             */import{M as A}from"./index-6c62cf9b.js";import{_ as v}from"./Switch.vue_vue_type_script_setup_true_lang-95245cd7.js";/* empty css                                                                    */import{P as j}from"./Pagination-8eb7b6b1.js";import{u as E}from"./config-9548fa9b.js";import{g as G,u as f,m as H,w as W}from"./messageType-2d4d1833.js";import{P as J}from"./PopFormElm-61cd9b7d.js";import{_ as Q}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import{d as R,j as m,I as X,x as Y,r,o as _,c as U,e as o,b as t,w as n,f as l,h as u,K as h,H as x,G as Z,k as b,p as ee,i as ae,_ as te}from"./index-7c2d2aef.js";import"./config-e2aa16d1.js";const w=k=>(ee("data-v-9f737100"),k=k(),ae(),k),se={class:"container"},ne={class:"content_wrapper"},oe={class:"lyecs-form-table"},le=w(()=>o("div",{class:"notice-warp"},[o("strong",null," 模板行业选择"),o("p",null," 主营行业：根据您的主营行业选择适合的服务类目"),o("p",null," 副营行业：商业服务 -> 软件/建站/技术开发"),o("strong",null," 生成小程序消息模板"),o("p",null," 请先添加服务类目《商业服务->软件/建站/技术开发》，否则模板导入不成功，点击会自动删除原有的小程序模板并生成新的模板！"),o("strong",null," 生成公众号模板消息"),o("p",null," 请先添加服务类目《商业服务->软件/建站/技术开发》，否则模板导入不成功，点击会自动删除原有的公众号模板并生成新的模板！")],-1)),ie=w(()=>o("span",{class:"iconfont icon-chakan1"},null,-1)),ce={class:"table-container"},de=w(()=>o("a",{class:"btn-link"},"编辑",-1)),re={class:"empty-warp"},pe={key:0,class:"empty-bg"},_e={key:0,class:"pagination-con"},me=R({__name:"List",setup(k){const z=E(),V=m([]),g=m(!0),y=m(0),I=m([]);m(!1);const i=X({page:1,size:z.get("page_size"),sort_field:"",sort_order:"",keyword:"",send_type:1}),S=m(1),M=a=>{console.log(a),i.send_type=a,d()},d=async()=>{g.value=!0;try{const a=await G({...i});V.value=a.filter_result,y.value=a.total}catch(a){h.error(a.message)}finally{g.value=!1}};Y(()=>{d()});const T=async()=>{A.confirm({title:"您确认要生成小程序消息模板吗？",onOk:async()=>{try{const a=await H();h.success(a.message),d()}catch(a){h.error(a.message)}finally{}}})},P=async()=>{A.confirm({title:"您确认要生成公众号模板消息吗？",onOk:async()=>{try{const a=await W();h.success(a.message),d()}catch(a){h.error(a.message)}finally{}}})},B=()=>{d()},L=({prop:a,order:s})=>{i.sort_field=a,i.sort_order=s=="ascending"?"asc":s=="descending"?"desc":"",d()},N=a=>{I.value=a.map(s=>s.message_id)};return(a,s)=>{const q=r("el-tab-pane"),C=r("el-button"),$=r("el-input"),F=r("el-space"),O=r("el-tabs"),p=r("el-table-column"),D=r("el-table"),K=r("a-spin");return _(),U("div",se,[o("div",ne,[o("div",oe,[le,t(O,{modelValue:S.value,"onUpdate:modelValue":s[3]||(s[3]=e=>S.value=e),class:"lyecs-tabs","tab-position":"top",onTabChange:M},{default:n(()=>[t(q,{label:"发送给用户",name:1}),t(q,{label:"发送给商家",name:2}),o("div",null,[t(F,null,{default:n(()=>[t(C,{type:"primary",onClick:s[0]||(s[0]=e=>T())},{default:n(()=>[x("生成小程序消息模板")]),_:1}),t(C,{type:"warning",onClick:s[1]||(s[1]=e=>P())},{default:n(()=>[x("生成公众号模板消息")]),_:1}),t($,{modelValue:i.keyword,"onUpdate:modelValue":s[2]||(s[2]=e=>i.keyword=e),placeholder:"输入关键字"},{append:n(()=>[t(C,{onClick:B},{default:n(()=>[ie]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1},8,["modelValue"]),o("div",ce,[t(K,{spinning:g.value},{default:n(()=>[t(D,{data:V.value,loading:g.value,total:y.value,"row-key":"message_id",onSelectionChange:N,onSortChange:L},{empty:n(()=>[o("div",re,[g.value?u("",!0):(_(),U("div",pe,"暂无数据"))])]),default:n(()=>[t(p,{label:"消息类型",prop:"name"},{default:n(({row:e})=>[t(l(J),{"org-value":e.name,"onUpdate:orgValue":c=>e.name=c,params:{id:e.message_id,field:"name"},requestApi:l(f),label:"消息类型",type:"input"},{default:n(()=>[o("div",null,Z(e.name),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])]),_:1}),t(p,{label:"消息描述",prop:"describe"}),t(p,{label:"站内信",width:"100"},{default:n(({row:e})=>[e.is_message>-1?(_(),b(l(v),{key:0,checked:e.is_message,"onUpdate:checked":c=>e.is_message=c,params:{id:e.message_id,field:"is_message"},requestApi:l(f)},null,8,["checked","onUpdate:checked","params","requestApi"])):u("",!0)]),_:1}),t(p,{label:"短信",width:"100"},{default:n(({row:e})=>[e.is_msg>-1?(_(),b(l(v),{key:0,checked:e.is_msg,"onUpdate:checked":c=>e.is_msg=c,params:{id:e.message_id,field:"is_msg"},requestApi:l(f)},null,8,["checked","onUpdate:checked","params","requestApi"])):u("",!0)]),_:1}),t(p,{label:"公众号",width:"100"},{default:n(({row:e})=>[e.is_wechat>-1?(_(),b(l(v),{key:0,checked:e.is_wechat,"onUpdate:checked":c=>e.is_wechat=c,params:{id:e.message_id,field:"is_wechat"},requestApi:l(f)},null,8,["checked","onUpdate:checked","params","requestApi"])):u("",!0)]),_:1}),t(p,{label:"小程序",width:"100"},{default:n(({row:e})=>[e.is_mini_program>-1?(_(),b(l(v),{key:0,checked:e.is_mini_program,"onUpdate:checked":c=>e.is_mini_program=c,params:{id:e.message_id,field:"is_mini_program"},requestApi:l(f)},null,8,["checked","onUpdate:checked","params","requestApi"])):u("",!0)]),_:1}),t(p,{width:100,fixed:"right",label:"操作"},{default:n(({row:e})=>[t(l(Q),{params:{act:"detail",id:e.message_id},isDrawer:"",path:"setting/config/messageType/Info",title:"编辑消息设置",width:"700px",onOkCallback:d},{default:n(()=>[de]),_:2},1032,["params"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),y.value>0?(_(),U("div",_e,[t(l(j),{page:i.page,"onUpdate:page":s[4]||(s[4]=e=>i.page=e),size:i.size,"onUpdate:size":s[5]||(s[5]=e=>i.size=e),total:y.value,onCallback:d},null,8,["page","size","total"])])):u("",!0)])])])])}}});const Ve=te(me,[["__scopeId","data-v-9f737100"]]);export{Ve as default};
