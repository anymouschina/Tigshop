import{d as K,j as y,I as j,E as A,x as E,r as p,o as e,c as l,e as t,b as n,w as r,f as b,h as i,K as $,L as G,F as V,a as S,k as h,H as z,G as d,n as H,p as M,i as T,_ as J}from"./index-7c2d2aef.js";/* empty css             */import{S as Q}from"./SortButton-6e849e8e.js";import"./index-6c62cf9b.js";/* empty css                                                                    */import{P as W}from"./Pagination-8eb7b6b1.js";import{P as X}from"./ProductCard-5b1dbc4c.js";import{u as Y}from"./config-9548fa9b.js";import{g as Z}from"./aftersales-393a32d4.js";import{p as ss}from"./format-4e0206d3.js";import{_ as B}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./config-e2aa16d1.js";import"./util-1ee03ed8.js";const c=k=>(M("data-v-445357f8"),k=k(),T(),k),ts={class:"container"},es={class:"content_wrapper"},as={class:"lyecs-table-list-warp"},os={class:"list-table-tool lyecs-search-warp"},ls={class:"advanced-search-warp list-table-tool-row"},ns={class:"simple-form-warp"},rs={class:"simple-form-field"},is={class:"form-group"},ds={class:"control-container"},_s=c(()=>t("span",{class:"iconfont icon-chakan1"},null,-1)),cs={class:"simple-form-field"},us={class:"form-group"},ps=c(()=>t("label",{class:"control-label"},[t("span",null,"申请类型：")],-1)),fs={class:"control-container"},ms={class:"simple-form-field"},hs={class:"form-group"},vs=c(()=>t("label",{class:"control-label"},[t("span",null,"退换货状态：")],-1)),ys={class:"control-container"},bs={class:"simple-form-field"},ks={class:"table-container"},gs={class:"custom-table"},ws=c(()=>t("th",null,"售后原因",-1)),xs=c(()=>t("th",null,"服务类型",-1)),Cs=c(()=>t("th",null,"售后状态",-1)),Vs=c(()=>t("th",null,"操作",-1)),Ss={class:"custom-table"},zs={class:"data-tr"},Os={colspan:"4"},Fs={class:"check-box"},Is={class:"check-box"},Ls={class:"check-box"},Ns={key:1,class:"check-box"},Us={key:3,class:"check-box"},Bs={class:"displayRow flex-justify-between"},Ps={class:"displayColumn textR whiteSN widthAuto"},Ds={class:"red ml10"},Rs=c(()=>t("div",null,null,-1)),qs=["rowspan"],Ks=["rowspan"],js=["rowspan"],As=["rowspan"],Es={key:0,class:"empty-warp"},$s={key:0,class:"empty-bg"},Gs={key:0,class:"pagination-con"},Hs=K({__name:"List",setup(k){const P=Y(),F=y([]),v=y(!0),g=y(0),a=j({page:1,size:P.get("page_size"),sort_field:"",sort_order:"",keyword:""}),I=y({}),L=y({}),f=A().currentRoute.value.query,m=async()=>{v.value=!0;try{const u=await Z({...a});F.value=u.filter_result,I.value=u.status_list,L.value=u.type_list,g.value=u.total,f&&f.status&&(a.status=f.status)}catch(u){$.error(u.message)}finally{v.value=!1}};E(()=>{f&&f.status&&(a.status=Number(f.status)),m()});const O=()=>{m()};return(u,o)=>{const w=p("el-button"),D=p("el-input"),N=p("el-option"),U=p("el-select"),R=p("el-form"),x=p("el-divider"),q=p("a-spin");return e(),l("div",ts,[t("div",es,[t("div",as,[t("div",os,[n(R,{model:a},{default:r(()=>[t("div",ls,[t("div",ns,[t("div",rs,[t("div",is,[t("div",ds,[n(D,{modelValue:a.keyword,"onUpdate:modelValue":o[0]||(o[0]=s=>a.keyword=s),name:"keyword",placeholder:"订单号",onKeyup:G(O,["enter"])},{append:r(()=>[n(w,{onClick:O},{default:r(()=>[_s]),_:1})]),_:1},8,["modelValue"])])])]),t("div",cs,[t("div",us,[ps,t("div",fs,[n(U,{modelValue:a.aftersale_type,"onUpdate:modelValue":o[1]||(o[1]=s=>a.aftersale_type=s),clearable:""},{default:r(()=>[(e(!0),l(V,null,S(L.value,(s,_)=>(e(),h(N,{value:_,label:s},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])])])]),t("div",ms,[t("div",hs,[vs,t("div",ys,[n(U,{modelValue:a.status,"onUpdate:modelValue":o[2]||(o[2]=s=>a.status=s),clearable:""},{default:r(()=>[(e(!0),l(V,null,S(I.value,(s,_)=>(e(),h(N,{value:_,label:s},null,8,["value","label"]))),256))]),_:1},8,["modelValue"])])])]),t("div",bs,[n(w,{type:"primary",onClick:O},{default:r(()=>[z("搜索")]),_:1})])])])]),_:1},8,["model"])]),t("div",ks,[n(q,{spinning:v.value},{default:r(()=>[t("table",gs,[t("thead",null,[t("tr",null,[t("th",null,[n(Q,{sortField:a.sort_field,"onUpdate:sortField":o[3]||(o[3]=s=>a.sort_field=s),sortOrder:a.sort_order,"onUpdate:sortOrder":o[4]||(o[4]=s=>a.sort_order=s),sortName:"order_id",text:"退换货商品",onLoadData:o[5]||(o[5]=s=>m())},null,8,["sortField","sortOrder"])]),ws,xs,Cs,Vs])])]),(e(!0),l(V,null,S(F.value,s=>(e(),l("table",Ss,[t("thead",null,[t("tr",zs,[t("th",Os,[t("span",Fs,"订单编号："+d(s.order_sn),1),n(x,{direction:"vertical"}),t("span",Is,"售后编号："+d(s.aftersales_sn),1),n(x,{direction:"vertical"}),t("span",Ls,"申请时间："+d(s.add_time),1),s.shipping_time?(e(),h(x,{key:0,direction:"vertical"})):i("",!0),s.user_name?(e(),l("span",Ns,"发货时间："+d(s.shipping_time),1)):i("",!0),s.user_name?(e(),h(x,{key:2,direction:"vertical"})):i("",!0),s.user_name?(e(),l("span",Us,"申请人："+d(s.user_name),1)):i("",!0)])])]),t("tbody",null,[(e(!0),l(V,null,S(s.aftersales_items,(_,C)=>(e(),l("tr",null,[t("td",null,[t("div",Bs,[n(b(X),{pic_thumb:_.pic_thumb,product_id:_.product_id,product_name:_.product_name},null,8,["pic_thumb","product_id","product_name"]),t("div",Ps,[t("div",null,d(b(ss)(_.price)),1),t("div",null,[z("× "+d(_.quantity),1),t("span",Ds,"(退货数量："+d(_.number)+")",1)]),Rs])])]),C==0?(e(),l("td",{key:0,rowspan:s.aftersales_items.length},[t("p",null,d(s.aftersale_reason||"-"),1)],8,qs)):i("",!0),C==0?(e(),l("td",{key:1,rowspan:s.aftersales_items.length},[t("span",null,d(s.aftersales_type_name),1)],8,Ks)):i("",!0),C==0?(e(),l("td",{key:2,rowspan:s.aftersales_items.length},[t("span",{class:H({orange:s.status===0,black:s.status===1||s.status===2||s.status===4,gray:s.status===3,green:s.status===5})},d(s.status_name),3)],8,js)):i("",!0),C==0?(e(),l("td",{key:3,rowspan:s.aftersales_items.length},[s.status===5||s.status===6||s.status===7?(e(),h(b(B),{key:0,params:{act:"detail",id:s.aftersale_id},isDrawer:"",path:"order/aftersales/Info",title:"售后详情 "+s.aftersales_sn,width:"800px",onOkCallback:m,showClose:!1,showOnOk:!1},{default:r(()=>[n(w,{size:"small",text:"",type:"primary"},{default:r(()=>[z(" 售后详情 ")]),_:1})]),_:2},1032,["params","title"])):(e(),h(b(B),{key:1,params:{act:"detail",id:s.aftersale_id},isDrawer:"",path:"order/aftersales/Info",title:"处理售后申请 "+s.aftersales_sn,width:"800px",onOkCallback:m,showClose:!1,showOnOk:!1},{default:r(()=>[n(w,{size:"small",text:"",type:"danger"},{default:r(()=>[z(" 处理退款 ")]),_:1})]),_:2},1032,["params","title"]))],8,As)):i("",!0)]))),256))])]))),256)),v.value||g.value==0?(e(),l("div",Es,[v.value?i("",!0):(e(),l("div",$s,"暂无数据"))])):i("",!0)]),_:1},8,["spinning"]),g.value>0?(e(),l("div",Gs,[n(b(W),{page:a.page,"onUpdate:page":o[6]||(o[6]=s=>a.page=s),size:a.size,"onUpdate:size":o[7]||(o[7]=s=>a.size=s),total:g.value,onCallback:m},null,8,["page","size","total"])])):i("",!0)])])])])}}});const lt=J(Hs,[["__scopeId","data-v-445357f8"]]);export{lt as default};
