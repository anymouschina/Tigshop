import{d as R,i as m,G as j,C as B,q as G,c,e as a,b as s,w as o,L as H,g as r,f as _,E as g,D as k,I as D,r as p,o as l,j as y,aN as q,n as J,_ as Q}from"./index-CGYuOau0.js";/* empty css             */import"./index-B-GURfkM.js";import{_ as W}from"./DeleteRecord.vue_vue_type_script_setup_true_lang-BTFcBk5t.js";/* empty css                                                                    */import{P as X}from"./Pagination-yOfjsBuR.js";import{i as Y,r as Z}from"./format-DFT-VJzO.js";import{u as ee}from"./config-DNllFJyR.js";import{g as te,b as ae,d as se}from"./adminUser-0hufWCm0.js";import{M as oe}from"./MobileCard-CkxM62lR.js";/* empty css                                               */import"./zh-cn-BAb8a1B9.js";import{T as le}from"./Tag-DHW499gP.js";import{_ as I}from"./DialogForm.vue_vue_type_script_setup_true_lang-Bmm-M6gU.js";import"./config-DU8_t5BN.js";const ne={class:"container"},ie={class:"content_wrapper"},re={class:"lyecs-table-list-warp"},de={class:"list-table-tool lyecs-search-warp"},pe={class:"advanced-search-warp list-table-tool-row"},ce={class:"simple-form-warp"},ue={class:"simple-form-field"},me={class:"form-group"},_e={class:"control-container"},fe={class:"simple-form-field"},ve={class:"form-group"},ge={class:"control-container"},ye={class:"simple-form-field"},be={class:"form-group"},he={class:"control-container"},ke={key:0},Se={class:"table-container"},Ce={class:"avatar-username"},we={key:0},ze={key:1,class:"gray"},xe={class:"empty-warp"},De={key:0,class:"empty-bg"},Ne={key:0,class:"pagination-con"},Ue=R({__name:"ShopList",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},setup(A){B();const L=ee(),N=m([]),f=m(!0),b=m(0),v=m([]),i=j({page:1,size:L.get("page_size"),sort_field:"",sort_order:"",keyword:""}),d=async()=>{f.value=!0;try{const n=await te({...i});N.value=n.filter_result,b.value=n.total}catch(n){D.error(n.message)}finally{f.value=!1}},h=A,U=B().currentRoute.value.query,S=m(h.isDialog?h.act:String(U.act)),C=m(h.isDialog?h.id:Number(U.id));G(()=>{S.value&&(i.suppliers_id=C.value),d()});const w=()=>{d()},M=({prop:n,order:e})=>{i.sort_field=n,i.sort_order=e=="ascending"?"asc":e=="descending"?"desc":"",d()},P=async n=>{try{const e=await ae(n,{ids:v.value});D.success(e.message),d()}catch(e){D.error(e.message)}},T=n=>{v.value=n.map(e=>e.id)};return(n,e)=>{const z=p("el-button"),$=p("el-input"),E=p("el-popconfirm"),u=p("el-table-column"),x=p("el-avatar"),F=p("el-divider"),K=p("el-table"),O=p("a-spin");return l(),c("div",ne,[a("div",ie,[a("div",re,[a("div",de,[a("div",pe,[a("div",ce,[a("div",ue,[a("div",me,[a("div",_e,[s($,{modelValue:i.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>i.keyword=t),name:"keyword",placeholder:"输入员工名称",onKeyup:H(w,["enter"]),clearable:"",onClear:w},{append:o(()=>[s(z,{onClick:w},{default:o(()=>e[4]||(e[4]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1})]),_:1},8,["modelValue"])])])]),a("div",fe,[a("div",ve,[a("div",ge,[s(r(I),{params:{act:"add",type:S.value?S.value:"",suppliers_id:C.value?C.value:0},isDrawer:"",path:"authority/adminUser/ShopInfo",title:"添加员工",width:"800px",onOkCallback:d},{default:o(()=>[s(z,{type:"primary"},{default:o(()=>e[5]||(e[5]=[g("添加员工")])),_:1})]),_:1},8,["params"])])])]),a("div",ye,[a("div",be,[a("div",he,[s(E,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=t=>P("del"))},{reference:o(()=>[s(z,{disabled:v.value.length===0},{default:o(()=>e[6]||(e[6]=[g("批量删除")])),_:1},8,["disabled"])]),_:1}),v.value.length>0?(l(),c("span",ke,[e[7]||(e[7]=g(" 已选择：")),a("b",null,k(v.value.length),1),e[8]||(e[8]=g(" 项 "))])):_("",!0)])])])])])]),a("div",Se,[s(O,{spinning:f.value},{default:o(()=>[s(K,{data:N.value,loading:f.value,total:b.value,"row-key":"id",onSelectionChange:T,onSortChange:M},{empty:o(()=>[a("div",xe,[f.value?_("",!0):(l(),c("div",De,"暂无数据"))])]),default:o(()=>[s(u,{type:"selection",width:"32"}),s(u,{width:"200",label:"员工名称",prop:"username"},{default:o(({row:t})=>[a("div",Ce,[r(q)(String(t.avatar))=="one"?(l(),y(x,{key:0,size:30,src:r(Y)(t.avatar)},null,8,["src"])):r(q)(String(t.avatar))=="def"?(l(),y(x,{key:1,size:30,src:r(Z)(t.avatar)},null,8,["src"])):(l(),y(x,{key:2,size:30,src:""})),a("div",null,[a("div",null,k(t.admin_user.username),1),t.is_admin==1?(l(),c("div",we,[s(r(le),{transparent:!0,text:"店铺管理员"})])):_("",!0)])])]),_:1}),s(u,{label:"权限组",prop:"role_name"},{default:o(({row:t})=>[t.role?(l(),c("span",{key:0,class:J(t.role.role_name?"green":"gray")},k(t.role.role_name||"-"),3)):(l(),c("span",ze,"自定义权限"))]),_:1}),s(u,{label:"邮箱",prop:"email"},{default:o(({row:t})=>[a("span",null,k(t.email||"-"),1)]),_:1}),s(u,{label:"电话",prop:"mobile"},{default:o(({row:t})=>{var V;return[a("span",null,[s(oe,{mobile:(V=t.user)==null?void 0:V.mobile},null,8,["mobile"])])]}),_:1}),s(u,{width:150,fixed:"right",label:"操作"},{default:o(({row:t})=>[s(r(I),{params:{act:"detail",id:t.id},isDrawer:"",path:"authority/adminUser/ShopInfo",title:"编辑员工",width:"800px",onOkCallback:d},{default:o(()=>e[9]||(e[9]=[a("a",{class:"btn-link"},"编辑",-1)])),_:2},1032,["params"]),t.admin_id!=1?(l(),y(F,{key:0,direction:"vertical"})):_("",!0),t.admin_id!=1?(l(),y(r(W),{key:1,params:{id:t.id},requestApi:r(se),onAfterDelete:d},{default:o(()=>e[10]||(e[10]=[g("删除 ")])),_:2},1032,["params","requestApi"])):_("",!0)]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),b.value>0?(l(),c("div",Ne,[s(r(X),{page:i.page,"onUpdate:page":e[2]||(e[2]=t=>i.page=t),size:i.size,"onUpdate:size":e[3]||(e[3]=t=>i.size=t),total:b.value,onCallback:d},null,8,["page","size","total"])])):_("",!0)])])])])}}}),je=Q(Ue,[["__scopeId","data-v-182d0ca8"]]);export{je as default};
