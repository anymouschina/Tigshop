import{d as M,m as P,j as x,u as B,r as n,o as v,c as f,b as o,w as p,e,f as m,dq as I,H as V,G as N,h as G,K as D,p as E,i as j,_ as O}from"./index-7c2d2aef.js";import"./index-6c62cf9b.js";import{d as $}from"./vuedraggable.umd-75ad0f8f.js";import{g as q}from"./productGroup-d12e271e.js";import{_ as w}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import"./ProductGroupSelect.vue_vue_type_style_index_0_scoped_7a7acb69_lang-fed017a0.js";const _=u=>(E("data-v-7a7acb69"),u=u(),j(),u),z={class:"dec-goods-group-item"},A={class:"dec-edit-group"},F=_(()=>e("div",{class:"dec-edit-group-title"},[e("div",{class:"label"},"商品来源")],-1)),H={class:"dec-edit-group-con"},K={class:"dec-input-group","dynamic-class":".image-ad-title-d"},L={class:"dec-edit-group"},T=_(()=>e("div",{class:"dec-edit-group-title"},[e("div",{class:"label"},"菜单名称")],-1)),J={class:"dec-edit-group-con"},Q={class:"dec-input-group","dynamic-class":".image-ad-title-d"},R={class:"dec-edit-group"},W=_(()=>e("div",{class:"dec-edit-group-title"},[e("div",{class:"label"},"商品个数"),e("div",{class:"value"})],-1)),X={class:"dec-edit-group-con"},Y={key:0},Z={class:"dec-edit-group"},ee=_(()=>e("div",{class:"dec-edit-group-title"},[e("div",{class:"label"},"主标题")],-1)),te={class:"dec-edit-group-con"},oe={class:"dec-input-group"},de={class:"dec-edit-group"},se=_(()=>e("div",{class:"dec-edit-group-title"},[e("div",{class:"label"},"副标题")],-1)),le={class:"dec-edit-group-con"},ae={class:"dec-input-group"},ce=["onClick"],ie=_(()=>e("i",{class:"ico-decorate icon-dec-cha"},null,-1)),ue=[ie],re={key:0,class:"gallery-list-warp"},pe={class:"dec-pic-group"},_e={class:"dec-pic-add-con"},ne=_(()=>e("a",{class:"dec-pic-add-btn"},[e("i",{class:"ico-decorate icon-dec-jia"}),V("添加商品分组")],-1)),me=M({__name:"ProductGroupSelect",props:P({isMultiple:{type:Boolean,default:!1},type:{type:String,default:"goods"}},{productGroups:{default:[]},productGroupsModifiers:{}}),emits:["update:productGroups"],setup(u){const b=u,g=x([]),a=B(u,"productGroups"),C=async d=>{y(d.ids)},y=async(d,s=-1)=>{try{const c=await q({product_group_ids:d,size:100,page:1});if(s===-1){let i=[];c.filter_result.forEach(r=>{let h={product_group_id:r.product_group_id,product_group_name:r.product_group_name,title:r.product_group_name,sub_title:"新品",menu_title:r.product_group_name,product_ids:r.product_ids,product_num_type:"number",product_num:6,banner_pic:{},banner_link:{link:{},title:""}};i.push(h)}),a.value.push(...i)}else a.value[s].product_group_id=c.filter_result[0].product_group_id,a.value[s].product_group_name=c.filter_result[0].product_group_name,a.value[s].menu_title=c.filter_result[0].product_group_name,a.value[s].product_ids=c.filter_result[0].product_ids;g.value=a.value.map(i=>i.product_group_id)}catch(c){D.error(c.message)}},S=d=>{a.value.splice(d,1),g.value.splice(d,1)},U=d=>{y(d.ids,d.index)};return(d,s)=>{const c=n("el-button"),i=n("el-input"),r=n("el-radio"),h=n("el-radio-group");return v(),f("div",null,[o(m($),{class:"dec-goods-group-list","item-key":"product_group_id",list:a.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:s[0]||(s[0]=()=>{}),onEnd:s[1]||(s[1]=()=>{})},{item:p(({element:t,index:k})=>[e("div",z,[e("div",A,[F,e("div",H,[e("div",K,[o(m(w),{isDrawer:"",onOkCallback:U,title:"选择商品分组",width:"600px",path:"product/productGroup/src/SelectProductGroup",params:{selected_ids:[t.product_group_id],index:k,isMultiple:b.isMultiple},style:{width:"100%"}},{default:p(()=>[o(c,{type:"primary",link:"",icon:m(I)},{default:p(()=>[V(N(t.product_group_name),1)]),_:2},1032,["icon"])]),_:2},1032,["params"])])])]),e("div",L,[T,e("div",J,[e("div",Q,[o(i,{modelValue:t.menu_title,"onUpdate:modelValue":l=>t.menu_title=l,placeholder:"请输入菜单名称"},null,8,["modelValue","onUpdate:modelValue"])])])]),e("div",R,[W,e("div",X,[o(h,{class:"dec-radio-group",modelValue:t.product_num_type,"onUpdate:modelValue":l=>t.product_num_type=l},{default:p(()=>[o(r,{value:"number"},{default:p(()=>[o(i,{style:{width:"90px"},type:"number",modelValue:t.product_num,"onUpdate:modelValue":l=>t.product_num=l,placeholder:"请输入商品数量"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(r,{value:"all"},{default:p(()=>[V("全部")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),u.type==="product_group"?(v(),f("div",Y,[e("div",Z,[ee,e("div",te,[e("div",oe,[o(i,{modelValue:t.title,"onUpdate:modelValue":l=>t.title=l,placeholder:"请输入标题内容"},null,8,["modelValue","onUpdate:modelValue"])])])]),e("div",de,[se,e("div",le,[e("div",ae,[o(i,{modelValue:t.sub_title,"onUpdate:modelValue":l=>t.sub_title=l,placeholder:"请输入标题内容"},null,8,["modelValue","onUpdate:modelValue"])])])])])):G("",!0),e("div",{class:"del-item",onClick:l=>S(k)},ue,8,ce)])]),_:1},8,["list"]),u.isMultiple||a.value.length<1?(v(),f("div",re,[e("div",pe,[e("div",_e,[o(m(w),{isDrawer:"",onOkCallback:C,title:"选择商品分组",width:"600px",path:"product/productGroup/src/SelectProductGroup",params:{selected_ids:g.value,isMultiple:b.isMultiple},style:{width:"100%"}},{default:p(()=>[ne]),_:1},8,["params"])])])])):G("",!0)])}}}),ye=O(me,[["__scopeId","data-v-7a7acb69"]]);export{ye as P};
