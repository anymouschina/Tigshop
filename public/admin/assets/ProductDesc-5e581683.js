import{M as P}from"./index-6c62cf9b.js";import{_ as $}from"./Editor.vue_vue_type_script_setup_true_lang-4519c339.js";import{d as j}from"./vuedraggable.umd-75ad0f8f.js";import{i as b}from"./format-4e0206d3.js";import{_ as y}from"./DialogForm.vue_vue_type_script_setup_true_lang-c57b9a11.js";import{d as N,j as m,x as S,a9 as V,r as D,o as _,c as f,k as F,w as d,e as t,b as c,f as r,H as k,h,F as E,p as L,i as U,_ as z}from"./index-7c2d2aef.js";import"./index.esm-0534e563.js";import"./config-9548fa9b.js";import"./config-e2aa16d1.js";import"./util-1ee03ed8.js";const p=i=>(L("data-v-0ebbe90a"),i=i(),U(),i),q={class:"goods-info-edit-warp"},G={class:"goods-info-edit-act flex"},J=p(()=>t("a",{class:"add-item info-pic-add"},[t("i",{class:"iconfont icon-tianjiatupian"}),k("添加图片")],-1)),K=p(()=>t("i",{class:"iconfont icon-wenben",style:{"font-size":"14px"}},null,-1)),Q=p(()=>t("span",null,"点击按钮添加图片或者文本，您还可以通过拖拽进行排序",-1)),R={class:"goods-info-edit-con"},W={class:"info-edit-list-item",draggable:"false",style:{}},X={key:0,class:"edit-list-item-img"},Y={class:"lyecs-dialogImage",draggable:"false"},Z=["src"],ee=p(()=>t("div",{class:"btn-edit"},"修改",-1)),te={key:1,class:"edit-list-item-text"},se=p(()=>t("p",null,[t("i",{class:"iconfont icon-1fuwenben"})],-1)),oe=p(()=>t("p",null,"文本",-1)),le=["onClick"],ae=["onClick"],ie=["innerHTML"],ne=N({__name:"ProductDesc",props:{descArr:{type:[Object,Array],default:[]},disabled:{type:Boolean,default:!1}},emits:["update:descArr"],setup(i,{emit:x}){const o=m(i.descArr||[]),u=m(!1),n=m({html:""}),a=m(0),C=x;S(()=>{C("update:descArr",o)});const w=s=>{for(let e in s)o.value.push({pic:s[e].pic_url,type:"pic"})},A=(s,e)=>{a.value=e.index,o.value[a.value]={pic:s[0].pic_url,type:"pic"}},M=V(()=>{let s=[];for(let e in o.value)o.value[e].type=="pic"?s.push('<div class="desc-pic-item"><img src="'+b(o.value[e].pic)+'"></div>'):s.push(o.value[e].html);return s.join("<div data-division=1></div>")}),H=()=>{console.log(a.value),u.value=!0,n.value.html=""},I=s=>{console.log(a.value),n.value.html=o.value[s].html,a.value=s,u.value=!0},O=s=>{o.value.splice(s,1)},T=()=>{a.value>0?o.value[a.value]={html:n.value.html,type:"text"}:o.value.push({html:n.value.html,type:"text"}),console.log(o.value),u.value=!1};return(s,e)=>{const g=D("el-form-item");return _(),f(E,null,[i.disabled?h("",!0):(_(),F(g,{key:0,label:"商品描述"},{default:d(()=>[t("div",q,[t("div",G,[c(r(y),{type:"gallery",class:"item-bg",onOkCallback:w,params:{isMultiple:!0}},{default:d(()=>[J]),_:1}),t("a",{class:"add-item info-text-add",onClick:H},[K,k("添加文本")]),Q]),t("div",R,[c(r(j),{class:"info-edit-con-list","item-key":"",list:o.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:e[0]||(e[0]=()=>{}),onEnd:e[1]||(e[1]=()=>{})},{item:d(({element:l,index:v})=>[t("div",W,[l.type=="pic"?(_(),f("div",X,[t("a",Y,[t("img",{src:r(b)(l.pic),draggable:"false"},null,8,Z)]),c(r(y),{type:"gallery",class:"item-bg",onOkCallback:A,params:{isMultiple:!1},data:{index:v}},{default:d(()=>[ee]),_:2},1032,["data"])])):h("",!0),l.type=="text"?(_(),f("div",te,[se,oe,t("div",{class:"btn-edit",onClick:B=>I(v)},"修改",8,le)])):h("",!0),t("i",{class:"btn-del iconfont icon-cha",onClick:B=>O(v)},null,8,ae)])]),_:1},8,["list"])]),c(r(P),{open:u.value,"onUpdate:open":e[3]||(e[3]=l=>u.value=l),title:"添加文本",onOk:e[4]||(e[4]=l=>T()),destroyOnClose:!0,width:800},{default:d(()=>[c(r($),{html:n.value.html,"onUpdate:html":e[2]||(e[2]=l=>n.value.html=l),height:"300px"},null,8,["html"])]),_:1},8,["open"])])]),_:1})),c(g,{label:"H5预览"},{default:d(()=>[t("div",{class:"goods-detail-preview-warp",innerHTML:M.value},null,8,ie)]),_:1})],64)}}});const be=z(ne,[["__scopeId","data-v-0ebbe90a"]]);export{be as default};
