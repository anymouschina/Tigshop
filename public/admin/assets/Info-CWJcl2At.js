import{d as U,i as f,C as W,s as j,q as E,I as y,r as p,c as A,o as n,e as m,j as i,f as c,w as t,b as a,a3 as G,D as v,g,E as k,a4 as M}from"./index-DrbzVNl6.js";import{F as O}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_9bfcfc35_lang-BDvYUQtN.js";import"./index-CeQDmMxd.js";import"./vuedraggable.umd-DAKh-e3Q.js";import{_ as P}from"./Image.vue_vue_type_script_setup_true_lang-BWzCs9jv.js";import{p as $}from"./format-CRgx78oe.js";import{S as h}from"./StatusDot-eKxl7wC-.js";import{b as z,d as H,u as J}from"./withdraw-CyGvTUI3.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-DqYSRv0_.js";const K={class:"container"},Q={class:"content_wrapper"},X={class:"lyecs-form-table"},ne=U({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:R,emit:C}){const _=C,d=x,V=f(!1),w=W().currentRoute.value.query,T=f(d.isDialog?d.act:String(w.act)),b=f(d.isDialog?d.id:Number(w.id));T.value;const D=j(),u=f({remark:""}),e=f({});E(()=>{q()});const q=async()=>{try{const s=await z({id:b.value});Object.assign(e.value,s)}catch(s){y.error(s.message),_("close")}finally{V.value=!1}},N=async()=>{await D.value.validate();try{if(_("update:confirmLoading",!0),e.value.status==0){const s=await H({id:b.value,...u.value});y.success("操作成功")}if(e.value.status==4){const s=await J({id:b.value,...u.value});y.success(s.message)}_("submitCallback",!0)}catch(s){y.error(s.message)}finally{_("update:confirmLoading",!1)}};return R({onFormSubmit:()=>{N()}}),(s,o)=>{const r=p("el-form-item"),S=p("el-radio"),B=p("el-radio-group"),F=p("TigInput"),I=p("el-button"),L=p("el-form");return n(),A("div",K,[m("div",Q,[m("div",X,[V.value?c("",!0):(n(),i(L,{key:0,ref_key:"formRef",ref:D,model:u.value,"label-width":"auto"},{default:t(()=>[a(r,{prop:"addTime",label:"申请时间"},{default:t(()=>[m("p",null,v(e.value.addTime),1)]),_:1}),a(r,{prop:"amount",label:"申请金额"},{default:t(()=>[m("p",null,v(g($)(e.value.amount)),1)]),_:1}),a(r,{prop:"accountData.accountName",label:"状态"},{default:t(()=>[e.value.status==0||e.value.status==4?(n(),i(h,{key:0,color:"blue",flicker:!0})):c("",!0),e.value.status==2?(n(),i(h,{key:1,color:"red",flicker:!0})):c("",!0),e.value.status==3?(n(),i(h,{key:2,color:"green",flicker:!0})):c("",!0),m("span",null,v(e.value.statusText),1)]),_:1}),a(r,{prop:"accountData.accountName",label:"收款人"},{default:t(()=>{var l;return[m("p",null,v((l=e.value.accountData)==null?void 0:l.accountName),1)]}),_:1}),a(r,{prop:"accountData.accountNo",label:"收款账号"},{default:t(()=>{var l;return[m("p",null,v((l=e.value.accountData)==null?void 0:l.accountNo),1)]}),_:1}),e.value.paymentVoucher&&e.value.paymentVoucher!==null?(n(),i(r,{key:0,prop:"paymentVoucher",label:"打款凭证"},{default:t(()=>[a(g(P),{src:e.value.paymentVoucher,fit:"contain",style:{height:"80px",width:"80px"}},null,8,["src"])]),_:1})):c("",!0),e.value.status==0?(n(),i(r,{key:1,prop:"status",label:"审核结果",rules:[{required:!0,message:"请选择审核结果!"}]},{default:t(()=>[a(B,{modelValue:u.value.status,"onUpdate:modelValue":o[0]||(o[0]=l=>u.value.status=l)},{default:t(()=>[a(S,{value:4},{default:t(()=>o[3]||(o[3]=[k("审核通过")])),_:1}),a(S,{value:2},{default:t(()=>o[4]||(o[4]=[k("审核不通过")])),_:1})]),_:1},8,["modelValue"])]),_:1})):c("",!0),e.value.status==0&&u.value.status==2?(n(),i(r,{key:2,prop:"auditRemark",label:"拒绝原因",rules:[{required:!0,message:"拒绝原因不能为空!"}]},{default:t(()=>[a(F,{classType:"tig-form-input",type:"textarea",row:2,modelValue:u.value.auditRemark,"onUpdate:modelValue":o[1]||(o[1]=l=>u.value.auditRemark=l)},null,8,["modelValue"])]),_:1})):c("",!0),e.value.status==4?(n(),i(r,{key:3,prop:"paymentVoucher",label:"打款凭证",rules:[{required:!0,message:"打款凭证不能为空!"}]},{default:t(()=>[a(g(O),{photo:u.value.paymentVoucher,"onUpdate:photo":o[2]||(o[2]=l=>u.value.paymentVoucher=l)},null,8,["photo"])]),_:1})):c("",!0),G(a(r,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[a(I,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:N},{default:t(()=>o[5]||(o[5]=[k("提交")])),_:1},512)]),_:1},512),[[M,!d.isDialog]])]),_:1},8,["model"]))])])])}}});export{ne as default};
