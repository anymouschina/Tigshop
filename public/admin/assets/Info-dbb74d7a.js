import{d as j,j as i,E as z,s as E,I as $,x as H,K as _,r,o as f,c as k,e as d,k as S,w as s,b as l,F as K,a as M,$ as O,a0 as P,H as T,h as A,p as G,i as J,_ as Q}from"./index-7c2d2aef.js";import{c as W,u as X}from"./verbalAssociation-438da18f.js";import{g as Y}from"./languagesList-188697d2.js";const g=n=>(G("data-v-23ac5a55"),n=n(),J(),n),Z={class:"container"},ee={class:"content_wrapper"},ae={class:"lyecs-form-table"},te=g(()=>d("div",{class:"extra"},"例如：中国、中国香港、中国台湾、英国、法国",-1)),oe=g(()=>d("div",{class:"extra"},"浏览器语言识别码",-1)),le=g(()=>d("div",{class:"extra"},"请选择关联语言，语言类型是由您自行添加的",-1)),se=j({__name:"Info",props:{id:{type:Number,default:0},promotion_type:{type:Number,default:0},act:{type:String,default:""},isDialog:{type:Boolean,default:!1}},emits:["submitCallback","update:confirmLoading","close"],setup(n,{expose:L,emit:I}){const m=I,u=n,y=i(),c=i(!0),b=z().currentRoute.value.query,v=i(u.isDialog?u.act:String(b.act)),x=i(u.isDialog?u.id:Number(b.id)),C=v.value==="add"?"create":"update",w=E(),t=i({code:"",name:"",locales_id:0}),N=$({page:1,size:99999,sort_field:"",sort_order:"",keyword:""}),R=async()=>{c.value=!0;try{const e=await Y({...N});y.value=e.filter_result}catch(e){_.error(e.message)}finally{c.value=!1}};H(()=>{v.value==="detail"?B():c.value=!1,R()});const B=async()=>{try{const e=await W(v.value,{id:x.value});Object.assign(t.value,e.item)}catch(e){_.error(e.message),m("close")}finally{c.value=!1}},h=async()=>{await w.value.validate();try{m("update:confirmLoading",!0);const e=await X(C,{id:x.value,...t.value});m("submitCallback",e),_.success(e.message)}catch(e){_.error(e.message)}finally{m("update:confirmLoading",!1)}};return L({onFormSubmit:()=>{h()}}),(e,o)=>{const V=r("el-input"),p=r("el-form-item"),q=r("el-option"),D=r("el-select"),F=r("el-button"),U=r("el-form");return f(),k("div",Z,[d("div",ee,[d("div",ae,[c.value?A("",!0):(f(),S(U,{key:0,ref_key:"formRef",ref:w,model:t.value,"label-width":"auto"},{default:s(()=>[l(p,{prop:"name",label:"所属地区：",rules:[{required:!0,message:"所属地区不能为空!"}]},{default:s(()=>[l(V,{type:"text",maxlength:"60",modelValue:t.value.name,"onUpdate:modelValue":o[0]||(o[0]=a=>t.value.name=a)},null,8,["modelValue"]),te]),_:1}),l(p,{prop:"code",label:"语言识别码：",rules:[{required:!0,message:"语言识别码不能为空!"}]},{default:s(()=>[l(V,{type:"text",maxlength:"60",modelValue:t.value.code,"onUpdate:modelValue":o[1]||(o[1]=a=>t.value.code=a)},null,8,["modelValue"]),oe]),_:1}),l(p,{prop:"locales_id",label:"关联语言：",rules:[{required:!0,message:"请选择关联语言!"}]},{default:s(()=>[l(D,{modelValue:t.value.locales_id,"onUpdate:modelValue":o[2]||(o[2]=a=>t.value.locales_id=a),placeholder:"请选择关联语言",size:"default"},{default:s(()=>[(f(!0),k(K,null,M(y.value,a=>(f(),S(q,{key:a.id,label:a.language,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),le]),_:1}),O(l(p,{"wrapper-col":{offset:4,span:16}},{default:s(()=>[l(F,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:o[3]||(o[3]=a=>h())},{default:s(()=>[T("提交")]),_:1},512)]),_:1},512),[[P,!u.isDialog]])]),_:1},8,["model"]))])])])}}});const ie=Q(se,[["__scopeId","data-v-23ac5a55"]]);export{ie as default};
