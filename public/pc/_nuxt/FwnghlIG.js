import{_ as Ge}from"./uNNarvbF.js";import{_ as Qe}from"./Ckhwb-5Q.js";import{_ as He}from"./CzQrJ5jx.js";import{_ as ve}from"./CPg1UVcC.js";import{f as ae,r,s as oe,H as ge,o as i,c as l,a as e,J as ke,b as c,w as h,d as p,t as s,a5 as Ye,a6 as ze,j as w,i as _,F as C,m as q,p as ie,e as le,_ as ne,n as j,a7 as Je,a9 as Ke,v as me,l as T,h as P,$ as he,b5 as We,a1 as fe,x as te,z as se,y as Ze}from"./DvlzeZYf.js";import{E as Xe}from"./lRlBa-wu.js";import{E as et}from"./yqEFMWm8.js";import{h as ye,_ as tt}from"./CljOOE4N.js";import{E as st}from"./DGzzo1G8.js";import{_ as ot}from"./s4PshrD2.js";import{E as at}from"./XomGKeK5.js";import{_ as it}from"./BCw_XNK7.js";import"./l0sNRNKZ.js";import lt from"./B0ec3DT7.js";import nt from"./BsMSA7px.js";import{S as dt}from"./DWfSXXqD.js";import{E as ut}from"./BMKQ3sGo.js";import"./DEXPT9kT.js";import{g as _t,u as ct,d as rt}from"./Dl9WVn6d.js";import{I as pt,g as vt,u as mt,o as ht,a as ft,b as yt}from"./D-j33Vdz.js";import{_ as gt}from"./BI-Q2tgn.js";import"./DrjGOYyT.js";import"./CPhr9T1V.js";import"./BxwJi-A4.js";import"./CvS5MqkS.js";import"./De9iyrrl.js";import"./Cq9Fpw4b.js";import"./ctHFjQ9z.js";import"./BB_Ol6Sd.js";import"./C3hftOhu.js";import"./B9SirqjL.js";import"./6IjmK16v.js";import"./DXZCNwre.js";import"./D5p5RYpQ.js";import"./CFi7q_x0.js";/* empty css        */import"./DldgdBu3.js";import"./DCTLXrZ8.js";import"./eXzid_I5.js";import"./C_PfpWcu.js";import"./BpsRniw3.js";import"./BdaK_Mse.js";import"./JPAiA_Rf.js";const S=f=>(ie("data-v-5e63ddd1"),f=f(),le(),f),kt={key:0,class:"modal_region_box"},$t={key:0,class:"address_from"},bt={class:"from_item"},Vt={class:"tit"},wt=S(()=>e("span",{class:"red"},"*",-1)),Ct={class:"inp"},At={class:"from_item"},Dt={class:"tit"},Ut=S(()=>e("span",{class:"red"},"*",-1)),Tt={class:"inp"},Et={class:"from_item"},It={class:"tit"},xt=S(()=>e("span",{class:"red"},"*",-1)),Ot=S(()=>e("div",{class:"inp"},[e("input",{class:"tig-input",type:"text",style:{width:"270px"}})],-1)),St={class:"from_item"},Lt={class:"tit"},Pt=S(()=>e("span",{class:"red"},"*",-1)),Rt={class:"inp"},Bt=S(()=>e("input",{class:"tig-input",type:"text",style:{width:"170px"}},null,-1)),Ft={class:"from_item"},Mt={class:"tit"},jt={class:"inp"},qt=S(()=>e("input",{class:"tig-input",type:"text",style:{width:"270px"}},null,-1)),Nt={class:"from_item"},Gt=S(()=>e("div",{class:"tit"},null,-1)),Qt={class:"btn_box"},Ht=ae({__name:"ModalRegion",props:{addressId:{type:Number,default:0}},emits:["change"],setup(f,{emit:N}){const G=N,Y=f,n=r(!1),y=r(!1),O={consignee:"",region_ids:[]},g=oe({...O}),x=r(!0),d=()=>{y.value=!0,n.value=!0,Y.addressId>0?R():x.value=!1};ge(()=>{});const Z=()=>{Object.assign(g,{...O})},R=async()=>{try{const v=await _t(Y.addressId);Object.assign(g,v.item)}catch(v){q.error(v.message)}finally{x.value=!1}},B=async()=>{try{const v=await ct(g);G("change",v.address_id),y.value=!1}catch(v){q.error(v.message)}finally{}};return(v,k)=>{const Q=ut;return i(),l(C,null,[e("div",{onClick:d,style:{display:"inline-flex",cursor:"pointer"}},[ke(v.$slots,"default",{},void 0,!0)]),n.value?(i(),l("div",kt,[c(Q,{modelValue:y.value,"onUpdate:modelValue":k[4]||(k[4]=A=>y.value=A),title:f.addressId==0?v.$t("添加收货地址"):v.$t("修改收货地址"),footer:null,top:"15vh",width:"830px","destroy-on-close":!0,onClosed:Z},{default:h(()=>[x.value?_("",!0):(i(),l("div",$t,[e("div",bt,[e("div",Vt,[wt,p(" "+s(v.$t("收货人"))+"： ",1)]),e("div",Ct,[Ye(e("input",{class:"tig-input","onUpdate:modelValue":k[0]||(k[0]=A=>g.consignee=A),type:"text",style:{width:"170px"}},null,512),[[ze,g.consignee]])])]),e("div",At,[e("div",Dt,[Ut,p(" "+s(v.$t("所在地区"))+"： ",1)]),e("div",Tt,[c(w(dt),{modelValue:g.region_ids,"onUpdate:modelValue":k[1]||(k[1]=A=>g.region_ids=A)},null,8,["modelValue"])])]),e("div",Et,[e("div",It,[xt,p(" "+s(v.$t("详细地址"))+"： ",1)]),Ot]),e("div",St,[e("div",Lt,[Pt,p(" "+s(v.$t("联系电话"))+"： ",1)]),e("div",Rt,[Bt,e("span",null,s(v.$t("推荐手机，座机需加区号和“-”符号")),1)])]),e("div",Ft,[e("div",Mt,s(v.$t("电子邮箱"))+"： ",1),e("div",jt,[qt,e("span",null,s(v.$t("用来接收订单提醒邮件")),1)])]),e("div",Nt,[Gt,e("div",Qt,[e("div",{class:"btn",onClick:k[2]||(k[2]=A=>B())},s(v.$t("确认修改地址")),1),e("div",{class:"btn info",onClick:k[3]||(k[3]=A=>y.value=!1)},s(v.$t("取消")),1)])])]))]),_:1},8,["modelValue","title"])])):_("",!0)],64)}}}),Yt=ne(Ht,[["__scopeId","data-v-5e63ddd1"]]),zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAMAAABFNRROAAAABGdBTUEAALGPC/xhBQAAAH5QTFRF5Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk85Dk8AAAA5Dk85HAORAAAACl0Uk5TqMbDOT9IYwMPeOEJMGyEfrSZHnvb7ecYad75LberupPYpTxmG+QGDAB5TgcRAAAAfklEQVQI102ORw7DMAwEmd6be7eKJY///8FIQQJkTxwugaEAbe8WJ22YBJ8qm5DYLD0EGoeZmHkYEVPPbFfdesfxbERXoDZMOdy0uOlzt+9gctL4CKfuAr75dnnchU5bfqm0mCwKlqiojfB6/vnwd2VLSqsePhBc+2Ip+vjnG4eeFaaRD84qAAAAAElFTkSuQmCC",$e=f=>(ie("data-v-afc58f13"),f=f(),le(),f),Jt={class:"tig-tips flex align-center"},Kt=$e(()=>e("div",{class:"logo"},[e("img",{src:zt})],-1)),Wt=$e(()=>e("i",{class:"d-arr"},null,-1)),Zt=ae({__name:"Tips",props:{top:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1}},setup(f){return(N,G)=>(i(),l("div",Jt,[Kt,e("div",{class:j(["tips_text",[{top:f.top},{bottom:f.bottom}]])},[Wt,e("div",null,[ke(N.$slots,"default",{},void 0,!0)])],2)]))}}),Xt=ne(Zt,[["__scopeId","data-v-afc58f13"]]),E=f=>(ie("data-v-91346959"),f=f(),le(),f),es={class:"container"},ts={class:"orderConfirmCon"},ss={class:"form_item"},os={class:"top_row flex justify-between"},as={class:"tit"},is={class:"add_btn font-color"},ls=E(()=>e("i",null,"+",-1)),ns=["onClick"],ds=E(()=>e("i",{class:"icon-gou"},null,-1)),us={class:"item flex justify-between"},_s={class:"info"},cs={key:0},rs={class:"set flex"},ps={class:"editAddress font-color"},vs=E(()=>e("span",{class:"iconfont-pc icon-zhankai"},null,-1)),ms={key:1},hs={class:"form_item"},fs={class:"top_row"},ys={class:"tit"},gs={class:"pay_type flex align-center"},ks=["onClick"],$s=E(()=>e("i",{class:"icon-gou"},null,-1)),bs={key:1,class:"errInfo red",style:{display:"inline",margin:"0","line-height":"15px"}},Vs={class:"form_item"},ws={class:"top_row flex justify-between"},Cs={class:"tit"},As={class:"product_detail flex"},Ds={class:"delivery"},Us={class:"tit"},Ts={key:0,class:"delivery_tags flex flex-wrap"},Es=["onClick"],Is=E(()=>e("i",{class:"icon-gou"},null,-1)),xs={key:1,class:"tips"},Os={key:2,class:"no_delivery"},Ss={class:"errInfo red",style:{display:"inline",margin:"0"}},Ls={class:"detail"},Ps={class:"shop_name"},Rs={class:"list flex align-start"},Bs={class:"pic"},Fs=["src"],Ms={class:"describe flex flex-column"},js=["title"],qs={class:"mt10 sku-name-box"},Ns={class:"sku-name-item"},Gs={class:"sku-name"},Qs={key:0,class:"extraskudata"},Hs={class:"title"},Ys=E(()=>e("div",{class:"line-box"},[e("div",{class:"line"})],-1)),zs={class:"content"},Js={class:"content-text"},Ks={class:"num"},Ws={key:1,class:"activity-box"},Zs={class:"ticket-content"},Xs={class:"money"},eo={class:"quantity"},to={key:0,class:"gift-box"},so={class:"gift-title"},oo={class:"gift-content"},ao={class:"gift-content-item"},io={class:"gift-item-left"},lo={class:"gift-item-right"},no={class:"gift-item-name"},uo={key:0,class:"sku-card"},_o={class:"gift-item-num"},co={class:"add_remark"},ro={class:"a_rmk_tit"},po={class:"a_rmk_con"},vo={class:"form_item"},mo={class:"top_row"},ho={class:"tit"},fo={key:1,class:"from"},yo={class:"check-box flex align-center"},go={class:"tit"},ko={style:{"margin-left":"10px"}},$o={class:"font-color"},bo={key:2,class:"from_list"},Vo=E(()=>e("div",{class:"arrow"},null,-1)),wo={class:"integral flex"},Co={class:"tit"},Ao={class:"inp_box"},Do={class:"inp"},Uo={key:0,class:"points_amount"},To={class:"tips"},Eo={class:"font-color"},Io={key:3,class:"from"},xo={class:"check-box flex align-center"},Oo={class:"tit"},So={style:{"margin-left":"10px"}},Lo={class:"font-color"},Po={key:0,class:"form_item"},Ro={class:"top_row flex align-end"},Bo={class:"tit"},Fo={class:"tips"},Mo={class:"from"},jo={class:"flex align-center invoice-box"},qo={class:"title flex align-center"},No=E(()=>e("i",{class:"iconfont-pc icon-tishi"},null,-1)),Go={key:0,class:"type"},Qo={key:0},Ho={key:1},Yo={class:"type"},zo={class:"btn hand-pointer"},Jo={class:"money_info"},Ko={class:"total_list"},Wo={class:"item"},Zo={key:0,class:"item"},Xo={key:1,class:"item"},ea={key:2,class:"item"},ta={class:"item"},sa={class:"tip-item"},oa=E(()=>e("i",{class:"freight-icon"},null,-1)),aa={class:"ui-tips"},ia=E(()=>e("span",{class:"ui-tips-arrow"},null,-1)),la={class:"ui-tips-main"},na={class:"tit"},da={class:"goods_list"},ua={class:"goods_col"},_a={class:"shop_name"},ca={class:"list"},ra={class:"txt"},pa={class:"item",style:{padding:"10px 0"}},va={class:"img_box",style:{width:"65px"}},ma=["src"],ha={key:3,class:"item"},fa=E(()=>e("div",{class:"tip-item"},[e("i",{class:"freight-icon"})],-1)),ya={class:"discount"},ga={class:"discount-title"},ka={class:"title-text"},$a={class:"discount-content"},ba={key:0,class:"discount-item-box"},Va={class:"item-label"},wa={class:"item-value"},Ca={class:"discount-item-box hassub"},Aa={key:0,class:"flex justify-between"},Da={class:"item-label"},Ua={class:"item-value discounts-value",style:{color:"var(--general)"}},Ta={key:1,class:"sub-item-box"},Ea={class:"sub-item-label"},Ia={class:"sub-item-value discounts-value"},xa={key:2,class:"sub-item-box"},Oa={class:"sub-item-label"},Sa={class:"sub-item-value discounts-value"},La={key:1,class:"discount-item-box"},Pa={class:"item-label"},Ra={class:"item-value"},Ba={key:0,class:"complete"},Fa={class:"total_fee flex align-end justify-end"},Ma={class:"submit flex justify-end"},ja=ae({__name:"check",setup(f){const N=Je(),G=Ke(),Y=G.query.flow_type?Number(G.query.flow_type):1,n=oe({address_id:0,shipping_type:[],pay_type_id:1,use_point:0,use_balance:0,use_coupon_ids:[],select_user_coupon_ids:[],buyer_note:"",invoice_data:{}}),y=r([]),O=r([]),g=r([]),x=r([]),d=r({balance:0,checked_count:0,coupon_amount:0,discount_after:0,discount_amount:6,discount_coupon_amount:0,discount_product_promotion_amount:0,discount_seckill_amount:0,discount_time_discount_amount:0,discounts:0,paid_amount:0,points_amount:0,product_amount:0,service_fee:0,shipping_fee:0,store_shipping_fee:[0],total_amount:0,total_count:0,unpaid_amount:0}),Z=r(!0),R=r(!0),B=r(0),v=r(0),k=r(0),Q=r(!1),A=r([]),be=r(0),F=r(!1),de=r(null);(async()=>{R.value=!0;try{const t=await vt(Y);Object.assign(n,t.item),y.value=t.address_list,O.value=t.cart_list,g.value=t.store_shipping_type,x.value=t.available_payment_type,d.value=t.total,B.value=t.balance,v.value=t.points,k.value=t.available_points,A.value=t.coupon_list,n.use_coupon_ids.length>0&&(Q.value=!0),Z.value=!1,y.value.length==0&&de.value.show()}catch(t){q.error(t.message)}finally{R.value=!1}})();const Ve=t=>{t.type=="invoice_type"?n.invoice_data.invoice_type=t.value:n.invoice_data.title_type=t.value},we=async()=>{try{const t=await ft({...n.invoice_data});if(t.item)delete t.item.id,delete t.item.user_id,delete t.item.order_id,delete t.item.status,delete t.item.apply_reply,delete t.item.invoice_no,delete t.item.add_time,t.item.title_type==1&&(t.item.company_user_name=t.item.company_name),t.item.title_type==2&&(t.item.company_enterprise_name=t.item.company_name),n.invoice_data=t.item;else{let o=y.value.find(D=>n.address_id==D.address_id);if(o){let D={company_user_name:o.consignee,mobile:o.mobile,email:o.email,amount:d.value.unpaid_amount};Object.assign(n.invoice_data,D)}}}catch(t){q.error(t.message)}},M=async(t="")=>{try{const o=await yt(t,n);return d.value=o.total,o}catch(o){q.error(o.message)}finally{R.value=!1}},ue=me(()=>{const t=[];return g.value.forEach((o,D)=>{o.forEach((I,L)=>{I.is_checked>0&&(t[D]=I.shipping_time_desc)})}),t}),_e=r({autoplay:!1,navigation:!0,pagination:!1,effect:"slide",loop:!1,slidesPerView:4,slidesPerGroup:1});r(!0),r("406.6");const Ce=r(0),z=async t=>{n.address_id=t.address_id,R.value=!0;try{const o=await M();y.value=o.address_list,g.value=o.store_shipping_type,F.value=!1,g.value.forEach((D,I)=>{n.shipping_type[I]&&(n.shipping_type[I].type_id=D.length>0?D[0].shipping_type_id:0)}),we()}catch{}finally{}},Ae=t=>{n.pay_type_id=t,M()},De=async(t,o,D,I)=>{n.shipping_type[t].type_id=o,n.shipping_type[t].shop_id=I,n.shipping_type[t].type_name=D;const L=await M();x.value=L.available_payment_type,x.value.forEach(V=>{n.pay_type_id==V.type_id&&V.disabled&&(n.pay_type_id=0)})},U=r(0),J=r(!1),Ue=t=>{n.invoice_data=t},Te=()=>{J.value===!0?(J.value=!1,n.use_point=0,U.value=0):J.value=!0,M()},Ee=()=>{U.value=Math.floor(Number(U.value)),U.value>k.value?U.value=k.value:(U.value<0||!U.value)&&(U.value=0),n.use_point=U.value,M()},Ie=()=>{n.use_balance=n.use_balance==0?B.value:0,M()},xe=(t=!1)=>{Oe(t)},K=r(!1),Oe=async(t=!1)=>{try{K.value=!0,n.use_default_coupon_ids=t?1:0;const o=await mt(n);return A.value=o.coupon_list,d.value=o.total,O.value=o.cart_list,o}catch{}finally{K.value=!1}},W=r(!1),Se=async()=>{try{W.value=!0;const t=await ht(n);if(t.return_type==2){fe(`/member/order/info?id=${t.order_id}`);return}return fe(`/order/pay?id=${t.order_id}`),t}catch(t){q.error(t.message)}finally{W.value=!1}};r(0),oe([]),ge(()=>{});const X=r(!1),Le=me(()=>{let t=!1;return g.value.forEach(o=>{o.length==0&&(t=!0)}),n.address_id===0&&(t=!0),n.pay_type_id===0&&(t=!0),t}),ce=t=>t.filter(o=>o.type===1||o.type===6),ee=r(!1);return(t,o)=>{const D=Ge,I=Qe,L=He,V=ve,Pe=Ze,re=Xe,pe=et,Re=ye,Be=st,Fe=ot,H=ve,Me=tt,je=ye,qe=at,Ne=it;return i(),l("div",null,[c(D,{title:"订单结算页"}),c(lt,{step:2}),e("div",es,[e("div",ts,[e("div",null,[e("div",ss,[e("div",os,[e("div",as,s(t.$t("确认收货人信息")),1),e("div",is,[c(I,{ref_key:"addAddressRef",ref:de,maskClosable:y.value.length>0,closable:y.value.length>0,onOkCallback:z,title:t.$t("添加收货地址"),width:"800px",path:"MemberEditRegion",params:{act:"add",showClose:y.value.length>0},showFooter:!1},{default:h(()=>[ls,p(),e("span",null,s(t.$t("使用新地址")),1)]),_:1},8,["maskClosable","closable","title","params"])])]),e("div",{class:j(["address_info",{more:F.value}])},[y.value.length>0?(i(!0),l(C,{key:0},T(y.value,(a,$)=>(i(),l("div",{class:j(["address_item flex",{active:n.address_id==a.address_id}]),key:$},[e("div",{style:{width:"auto"},class:"btn",onClick:u=>z(a)},[e("span",null,s(a.consignee),1),ds],8,ns),e("div",us,[e("div",_s,[e("span",null,s(a.region_name),1),e("span",null," "+s(a.address),1),a.mobile?(i(),l("span",cs,"（"+s(a.mobile)+"）",1)):_("",!0)]),e("div",rs,[c(I,{onOkCallback:z,title:t.$t("编辑收货地址"),width:"800px",path:"MemberEditRegion",params:{act:"detail",addressId:a.address_id},showFooter:!1},{default:h(()=>[e("span",null,s(t.$t("编辑地址")),1)]),_:2},1032,["title","params"]),$!=Ce.value?(i(),P(gt,{key:0,params:{id:a.address_id},requestApi:w(rt),onAfterDelete:z},{default:h(()=>[e("span",ps,s(t.$t("删除")),1)]),_:2},1032,["params","requestApi"])):_("",!0)])])],2))),128)):_("",!0)],2),y.value.length>1?(i(),l("div",{key:0,class:j(["address-more",{more:F.value}]),onClick:o[0]||(o[0]=a=>F.value=!F.value)},[p(s(F.value?t.$t("收起地址"):t.$t("更多地址"))+" ",1),vs],2)):(i(),l("div",ms))]),e("div",hs,[e("div",fs,[e("div",ys,s(t.$t("确认支付方式")),1)]),e("div",gs,[x.value.length>0?(i(!0),l(C,{key:0},T(x.value,(a,$)=>(i(),l(C,null,[a.is_show?(i(),l("div",{key:0,class:j(["pay_tab flex align-center",{disabled:a.disabled,active:a.type_id==n.pay_type_id}]),onClick:u=>!a.disabled&&Ae(a.type_id)},[e("span",null,s(a.type_name),1),a.disabled_desc!=""&&a.disabled?(i(),P(w(Xt),{key:0,top:""},{default:h(()=>[e("div",null,s(a.disabled_desc),1)]),_:2},1024)):_("",!0),$s],10,ks)):_("",!0)],64))),256)):_("",!0),n.pay_type_id==0?(i(),l("span",bs,s(t.$t("请选择支付方式")),1)):_("",!0)])]),e("div",Vs,[e("div",ws,[e("div",Cs,s(t.$t("购物清单")),1),t.pageType!="exchange"?(i(),P(L,{key:0,class:"font-color",to:"/cart/"},{default:h(()=>[p(s(t.$t("返回修改购物车")),1)]),_:1})):_("",!0)]),O.value.length>0?(i(!0),l(C,{key:0},T(O.value,(a,$)=>(i(),l("div",As,[e("div",Ds,[e("div",Us,s(t.$t("配送方式")),1),g.value[$].length>0?(i(),l("div",Ts,[(i(!0),l(C,null,T(g.value[$],(u,m)=>(i(),l("div",{class:j(["pay_tab flex align-center",{active:u.shipping_type_id==n.shipping_type[$].type_id}]),onClick:b=>De($,u.shipping_type_id,u.shipping_type_name,a.shop_id)},[e("span",null,s(u.shipping_type_name),1),Is],10,Es))),256))])):_("",!0),g.value[$].length>0&&ue.value[$]?(i(),l("div",xs,s(t.$t("发货时间"))+"："+s(ue.value[$]),1)):_("",!0),g.value[$].length==0?(i(),l("div",Os,[e("span",Ss,s(t.$t("该收货地址不支持配送")),1)])):_("",!0)]),e("div",Ls,[e("div",Ps,s(a.shop_id==0?t.$t("自营"):t.$t("商家")+"："+a.shop_title),1),(i(!0),l(C,null,T(a.carts,u=>(i(),l("div",Rs,[e("div",Bs,[c(L,{target:"_blank",to:w(se)({path:"product",id:u.product_id,sn:u.product_sn})},{default:h(()=>[e("img",{src:w(te)(u.pic_thumb),alt:""},null,8,Fs)]),_:2},1032,["to"])]),e("div",Ms,[e("div",{class:"name ellipsis",title:u.product_name},[c(L,{target:"_blank",to:w(se)({path:"product",id:u.product_id,sn:u.product_sn})},{default:h(()=>[p(s(u.product_name),1)]),_:2},1032,["to"])],8,js),e("div",qs,[(i(!0),l(C,null,T(u.sku_data,(m,b)=>(i(),l("div",Ns,[e("span",Gs,s(m.name)+"：",1),p(s(m.value),1)]))),256))]),u.extra_sku_data&&u.extra_sku_data.length?(i(),l("div",Qs,[(i(!0),l(C,null,T(u.extra_sku_data,m=>(i(),l("div",{key:m,class:"extraskudata-item"},[e("div",Hs,s(m.attr_name),1),Ys,e("div",zs,[e("span",Js,s(m.attr_value),1),c(V,{modelValue:m.attr_price,"onUpdate:modelValue":b=>m.attr_price=b,showText:!1},null,8,["modelValue","onUpdate:modelValue"]),e("span",Ks,"x"+s(u.quantity),1)])]))),128))])):_("",!0),u.activity_info&&ce(u.activity_info).length>0?(i(),l("div",Ws,[(i(!0),l(C,null,T(ce(u.activity_info),m=>(i(),l("div",{key:m.promotion_id,class:"promotion"},[e("div",Zs,s(m.type===1?t.$t("秒杀价"):t.$t("限时折扣")),1)]))),128))])):_("",!0)]),e("div",Xs,[c(V,{fontStyle:{fontWeight:"600"},modelValue:u.price,"onUpdate:modelValue":m=>u.price=m,showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),e("div",eo,"x"+s(u.quantity),1)]))),256)),a.gift&&a.gift.length>0?(i(),l("div",to,[e("div",so,s(t.$t("赠品")),1),e("div",oo,[(i(!0),l(C,null,T(a.gift,u=>(i(),P(L,{key:u.gift_id,target:"_blank",to:w(se)({path:"product",id:u.product_id,sn:u.product_sn})},{default:h(()=>[e("div",ao,[e("div",io,[c(Pe,{class:"gift-img",lazy:"",src:w(te)(u.pic_thumb)},null,8,["src"])]),e("div",lo,[e("div",no,s(u.product_name),1),u.sku_data.length>0?(i(),l("div",uo,[(i(!0),l(C,null,T(u.sku_data,(m,b)=>(i(),l("div",{key:b,class:"sku-item"},s(m.value),1))),128))])):_("",!0),e("div",_o,"x"+s(u.num),1)])])]),_:2},1032,["to"]))),128))])])):_("",!0)])]))),256)):_("",!0),e("div",co,[e("div",ro,s(t.$t("订单备注"))+"：",1),e("div",po,[c(re,{modelValue:n.buyer_note,"onUpdate:modelValue":o[1]||(o[1]=a=>n.buyer_note=a),type:"textarea",placeholder:t.$t("提示：请勿填写有关支付、收货、发票方面的信息"),style:{width:"400px","font-size":"12px"},"show-word-limit":"",maxlength:50},null,8,["modelValue","placeholder"])])])]),e("div",vo,[e("div",mo,[e("div",ho,s(t.$t("使用优惠券/积分/余额")),1)]),c(Re,null,{default:h(()=>[t.pageType!="exchange"?(i(),P(nt,{key:0,useCoupon:Q.value,"onUpdate:useCoupon":o[2]||(o[2]=a=>Q.value=a),couponList:A.value,"onUpdate:couponList":o[3]||(o[3]=a=>A.value=a),selectedIds:n.use_coupon_ids,"onUpdate:selectedIds":o[4]||(o[4]=a=>n.use_coupon_ids=a),selectedUserCouponIds:n.select_user_coupon_ids,"onUpdate:selectedUserCouponIds":o[5]||(o[5]=a=>n.select_user_coupon_ids=a),onChange:xe,couponLoading:K.value,"onUpdate:couponLoading":o[6]||(o[6]=a=>K.value=a)},null,8,["useCoupon","couponList","selectedIds","selectedUserCouponIds","couponLoading"])):_("",!0),t.pageType!="exchange"?(i(),l("div",fo,[e("div",yo,[c(pe,{checked:n.use_point>0,onClick:Te},{default:h(()=>[e("span",go,s(t.$t("使用积分")),1)]),_:1},8,["checked"]),e("div",ko,[p(s(t.$t("当前账户共"))+" ",1),e("span",$o,s(v.value),1),p(" "+s(t.$t("积分")),1)])])])):_("",!0),J.value?(i(),l("div",bo,[Vo,e("div",wo,[e("div",Co,s(t.$t("使用积分"))+"：",1),e("div",Ao,[e("div",Do,[c(re,{max:k.value,modelValue:U.value,"onUpdate:modelValue":o[7]||(o[7]=a=>U.value=a),onChange:Ee,style:{width:"200px"}},null,8,["max","modelValue"]),d.value.points_amount>0?(i(),l("span",Uo,[p("  "+s(t.$t("共抵扣"))+" ",1),c(V,{class:"red",modelValue:d.value.points_amount,"onUpdate:modelValue":o[8]||(o[8]=a=>d.value.points_amount=a),showText:!1},null,8,["modelValue"])])):_("",!0)]),e("div",To,[p(s(t.$t("该订单最多可用"))+s(k.value)+" "+s(t.$t("积分"))+" ",1),e("span",Eo,"【"+s(t.$t("如何获得积分"))+"？】",1)])])])])):_("",!0),B.value>0?(i(),l("div",Io,[e("div",xo,[c(pe,{checked:n.use_balance>0,onClick:Ie},{default:h(()=>[e("span",Oo,s(t.$t("使用余额")),1)]),_:1},8,["checked"]),e("div",So,[p(s(t.$t("当前账户余额"))+" ",1),e("span",Lo,s(B.value),1)])])])):_("",!0)]),_:1})]),w(N).canInvoice==1&&!w(he)()?(i(),l("div",Po,[e("div",Ro,[e("div",Bo,s(t.$t("发票信息")),1),e("div",Fo,s(t.$t("开企业抬头发票须填写纳税人识别号，以免影响报销")),1)]),e("div",Mo,[e("div",jo,[e("div",qo,[e("span",null,s(n.invoice_data.invoice_type?n.invoice_data.invoice_type==1?t.$t("电子普通发票"):t.$t("增值税专用发票"):t.$t("不开发票")),1),n.invoice_data.invoice_type==1?(i(),P(Be,{key:0,content:t.$t("电子普通发票与纸质发票具有同等法律效力，可支持报销入账、商品售后凭证。"),placement:"bottom-start",effect:"light"},{default:h(()=>[No]),_:1},8,["content"])):_("",!0)]),n.invoice_data.invoice_type?(i(),l("div",Go,[n.invoice_data.invoice_type==1?(i(),l("span",Qo,s(n.invoice_data.title_type==1?t.$t("个人"):t.$t("企业")),1)):_("",!0),n.invoice_data.invoice_type==2?(i(),l("span",Ho,s(t.$t("增值税专用发票")),1)):_("",!0)])):_("",!0),e("div",Yo,[e("span",null,s(n.invoice_data.company_name??""),1)]),c(pt,{params:{invoice_data:n.invoice_data,amount:d.value.unpaid_amount,type:"check",address:y.value.find(a=>n.address_id==a.address_id)},onCallback:Ue,onChangeType:Ve},{default:h(()=>[e("div",zo,s(t.$t("修改")),1)]),_:1},8,["params"])])])])):_("",!0),e("div",Jo,[c(je,null,{default:h(()=>[e("div",Ko,[e("div",Wo,[p(s(t.$t("商品总价"))+"： ",1),c(V,{modelValue:d.value.product_amount,"onUpdate:modelValue":o[9]||(o[9]=a=>d.value.product_amount=a),showText:!1},null,8,["modelValue"])]),d.value.service_fee&&d.value.service_fee>0?(i(),l("div",Zo,[p(s(t.$t("附加费用"))+"： ",1),c(V,{modelValue:d.value.service_fee,"onUpdate:modelValue":o[10]||(o[10]=a=>d.value.service_fee=a),showText:!1},null,8,["modelValue"])])):_("",!0),d.value.balance>0?(i(),l("div",Xo,[p(" - "+s(t.$t("使用余额"))+"： ",1),c(V,{modelValue:d.value.balance,"onUpdate:modelValue":o[11]||(o[11]=a=>d.value.balance=a),showText:!1},null,8,["modelValue"])])):_("",!0),d.value.points_amount>0?(i(),l("div",ea,[p(" - "+s(t.$t("使用积分"))+"： ",1),c(V,{modelValue:d.value.points_amount,"onUpdate:modelValue":o[12]||(o[12]=a=>d.value.points_amount=a),showText:!1},null,8,["modelValue"])])):_("",!0),e("div",ta,[e("div",sa,[oa,e("div",aa,[ia,e("div",la,[e("div",na,s(t.$t("运费明细")),1),e("div",da,[(i(!0),l(C,null,T(O.value,(a,$)=>(i(),l("div",ua,[e("div",_a,s(a.shop_id==0?t.$t("自营"):a.shop_title),1),e("div",ca,[e("div",ra,[p(s(t.$t("运费"))+"：",1),c(V,{showText:!1,modelValue:d.value.store_shipping_fee[a.shop_id],"onUpdate:modelValue":u=>d.value.store_shipping_fee[a.shop_id]=u},null,8,["modelValue","onUpdate:modelValue"])]),e("div",pa,[c(Fe,{swiperOption:_e.value,"onUpdate:swiperOption":o[13]||(o[13]=u=>_e.value=u),itemList:a.carts,style:{width:"100%",padding:"0 30px"}},{default:h(({item:u})=>[e("div",va,[e("img",{src:w(te)(u.pic_thumb),alt:""},null,8,ma)])]),_:2},1032,["swiperOption","itemList"])])])]))),256))])])])]),p(" + "+s(t.$t("配送费用"))+"： ",1),c(V,{showText:!1,modelValue:d.value.shipping_fee,"onUpdate:modelValue":o[14]||(o[14]=a=>d.value.shipping_fee=a)},null,8,["modelValue"])]),d.value.discounts>0?(i(),l("div",ha,[c(Me,{trigger:"hover",modelValue:ee.value,"onUpdate:modelValue":o[20]||(o[20]=a=>ee.value=a)},We({reference:h(()=>[fa]),_:2},[ee.value?{name:"default",fn:h(()=>{var a,$,u,m;return[e("div",ya,[e("div",ga,[e("div",ka,s(t.$t("优惠明细")),1)]),e("div",$a,[((a=d.value)==null?void 0:a.product_amount)>0?(i(),l("div",ba,[e("div",Va,s(t.$t("商品总额")),1),e("div",wa,[c(H,{modelValue:d.value.product_amount,"onUpdate:modelValue":o[15]||(o[15]=b=>d.value.product_amount=b),fontStyle:{fontWeight:"bold"}},null,8,["modelValue"])])])):_("",!0),e("div",Ca,[(($=d.value)==null?void 0:$.discounts)>0?(i(),l("div",Aa,[e("div",Da,s(t.$t("共优惠")),1),e("div",Ua,[p(" - "),c(H,{modelValue:d.value.discounts,"onUpdate:modelValue":o[16]||(o[16]=b=>d.value.discounts=b)},null,8,["modelValue"])])])):_("",!0),((u=d.value)==null?void 0:u.discount_coupon_amount)>0?(i(),l("div",Ta,[e("div",Ea,s(t.$t("优惠券")),1),e("div",Ia,[p(" - "),c(H,{modelValue:d.value.discount_coupon_amount,"onUpdate:modelValue":o[17]||(o[17]=b=>d.value.discount_coupon_amount=b)},null,8,["modelValue"])])])):_("",!0),d.value.discount_discount_amount>0?(i(),l("div",xa,[e("div",Oa,s(t.$t("其他优惠")),1),e("div",Sa,[p(" - "),c(H,{modelValue:d.value.discount_discount_amount,"onUpdate:modelValue":o[18]||(o[18]=b=>d.value.discount_discount_amount=b)},null,8,["modelValue"])])])):_("",!0)]),((m=d.value)==null?void 0:m.discount_after)>0?(i(),l("div",La,[e("div",Pa,s(t.$t("合计")),1),e("div",Ra,[c(H,{modelValue:d.value.discount_after,"onUpdate:modelValue":o[19]||(o[19]=b=>d.value.discount_after=b),fontStyle:{fontWeight:"bold"}},null,8,["modelValue"])])])):_("",!0)])])]}),key:"0"}:void 0]),1032,["modelValue"]),p(" - "+s(t.$t("共优惠"))+"： ",1),c(V,{showText:!1,modelValue:d.value.discounts,"onUpdate:modelValue":o[21]||(o[21]=a=>d.value.discounts=a)},null,8,["modelValue"])])):_("",!0)])]),_:1}),d.value.order_send_point&&d.value.order_send_point>0?(i(),l("div",Ba," *"+s(w(he)()?t.$t("该订单完成后，您将预计获得{0}积分",[d.value.order_send_point]):`该订单完成后，您将预计获得${d.value.order_send_point}积分`),1)):_("",!0),e("div",Fa,[p(s(t.$t("应付款金额"))+"：",1),c(V,{class:"price",modelValue:d.value.unpaid_amount,"onUpdate:modelValue":o[22]||(o[22]=a=>d.value.unpaid_amount=a),showText:!1},null,8,["modelValue"])]),e("div",Ma,[c(qe,{type:"primary",class:"btn",disabled:Le.value,loading:W.value,onClick:o[23]||(o[23]=a=>!W.value&&Se())},{default:h(()=>[p(s(t.$t("提交订单")),1)]),_:1},8,["disabled","loading"])])])])])]),X.value?(i(),P(w(Yt),{key:0,modelValue:X.value,"onUpdate:modelValue":o[24]||(o[24]=a=>X.value=a),addressId:be.value},null,8,["modelValue","addressId"])):_("",!0),c(Ne)])}}}),xi=ne(ja,[["__scopeId","data-v-91346959"]]);export{xi as default};
