import{aa as L,f as N,a3 as $,a4 as x,r as g,H as I,Y as F,v as O,Z as P,o as t,c as s,a as f,F as d,l as p,i as h,t as m,as as q,d as z,n as V,p as D,e as H,_ as T}from"./DvlzeZYf.js";const U=o=>L({url:"sys/region/get_region",method:"get",params:{region_ids:o}}),Y=o=>(D("data-v-6d249a67"),o=o(),H(),o),Z={class:"flex align-center"},A={key:0},G={key:1},J=Y(()=>f("i",{class:"iconfont-pc icon-xiajiantou"},null,-1)),K={key:0,class:"select_popup"},Q={class:"top flex justify-between"},W={class:"tabs flex"},X=["onClick"],ee={key:0,class:"sec_childs"},te=["onClick"],se=N({__name:"SelectRegion",props:{modelValue:{default:[]},modelModifiers:{}},emits:$(["change"],["update:modelValue"]),setup(o,{emit:b}){const c=x(o,"modelValue"),v=g(!1),n=g([]),i=g(0),E=b;I(()=>{k()});const{t:M}=F(),R=g(!1),k=async()=>{try{let e=c.value.join();const u=await U(e);Object.assign(n.value,u.region_list),i.value=n.value.length>1?n.value.length-1:0}catch{}finally{}},w=e=>c.value.includes(e),j=()=>{v.value=!0,k()},B=async(e,u)=>{e>=0&&e<=c.value.length&&(c.value[e]=u,c.value.splice(e+1)),await k(),n.value.length==e+1?(v.value=!1,R.value=!0):i.value=e+1,E("change")},_=O(()=>{let e=[];return n.value.forEach((u,a)=>{if(u.length>0){let l=!1;u.forEach(r=>{w(r.region_id)&&(e[a]=r.region_name,l=!0)}),l==!1&&(e[a]=M("请选择地区"))}}),e}),S=()=>{v.value===!0&&c.value.length!=_.value.length&&(c.value=[],n.value=[],i.value=0),v.value=!1},y=g(null),C=e=>{y.value&&!y.value.contains(e.target)&&S()};return I(()=>{window.addEventListener("click",C)}),P(()=>{window.removeEventListener("click",C)}),(e,u)=>(t(),s("div",{class:"select_region_box",ref_key:"selectPop",ref:y},[f("div",Z,[f("div",{class:"select_region hand-pointer flex align-center",onClick:j},[_.value.length>0?(t(),s("div",A,[(t(!0),s(d,null,p(_.value,(a,l)=>(t(),s(d,null,[z(m(a)+" ",1)],64))),256))])):h("",!0),_.value.length==0?(t(),s("div",G,m(e.$t("请选择地区")),1)):h("",!0),J])]),v.value?(t(),s("div",K,[f("div",Q,[f("div",W,[(t(!0),s(d,null,p(_.value,(a,l)=>(t(),s("div",{class:V(["tab",{cur:i.value===l}]),onClick:r=>i.value=l},m(a||e.$t("请选择")),11,X))),256))]),n.value.length==i.value+1?(t(),s("div",{key:0,class:"selectclose",onClick:q(S,["stop"])},"×")):h("",!0)]),(t(!0),s(d,null,p(n.value,(a,l)=>(t(),s(d,null,[i.value===l?(t(),s("div",ee,[(t(!0),s(d,null,p(a,r=>(t(),s("span",{class:V(["sec_item",{active:w(r.region_id)}]),onClick:ae=>B(l,r.region_id)},m(r.region_name),11,te))),256))])):h("",!0)],64))),256))])):h("",!0)],512))}}),ne=T(se,[["__scopeId","data-v-6d249a67"]]);export{ne as S};
