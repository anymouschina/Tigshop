import{b as s}from"./Bx_3tXOW.js";import{_ as e}from"./DIcT5qlW.js";import{_ as a}from"./4BWvF7DS.js";import{_ as t}from"./B6kpiin_.js";import{v as o}from"./CxvT33_f.js";import{e as i,r as l,g as r,aj as c,z as n,y as p,c as m,o as u,b as d,a as y,aa as j,t as v,i as f,F as g,l as h,h as D,m as k,d as $,k as _,n as w,_ as I}from"./vO8z_6wc.js";import{g as N,a as S}from"./CUxDRD-x.js";import"./B3kMr2Om.js";import"./DRy-t1KR.js";import"./BG07ctRk.js";import"./Ctuj9lAE.js";import"./ExFuuhw5.js";import"./OZUBBuO3.js";import"./DqoL2U0I.js";import"./CdIa5lAL.js";import"./CKVP4sCQ.js";import"./6_reTNGa.js";import"./BwRzfsZt.js";import"./D_Dr4eZ1.js";import"./123WnbAt.js";import"./C_yTnQv7.js";import"./DgmxjSXK.js";import"./VsleDggW.js";import"./B0jPhJeY.js";import"./C0xcqOw0.js";/* empty css        */import"./pBde3eXe.js";import"./duVALuQ5.js";import"./YLitFIRx.js";import"./C8tVKSc2.js";import"./DEtxbcwL.js";import"./y2YKyhRU.js";const b={class:"container coupon-list"},x={class:"title"},T={class:"com-pc-title"},V={class:"coupon-card-list"},R=["onClick"],z={class:"left-card"},M={key:1,class:"coupon_discount"},q={class:"name"},C={key:0,class:"time"},F={key:1,class:"time"},U={key:2,class:"time"},W={key:3,class:"name desc"},E={class:"right-card"},H={class:"text"},J={key:1,class:"no-result"},K={key:0},L=I(i({__name:"List",setup(i){const I=l([]),L=l(!0),O=l(0),P=r({page:1,isShow:1,shopId:-1}),Q=c(),X=async()=>{L.value=!0;try{Q.currentRoute.value.query.shopId&&(P.shopId=Number(Q.currentRoute.value.query.shopId));const s=await N({...P});O.value=s.total,I.value=s.records}catch(s){w.error(s.message)}finally{L.value=!1}},{t:Y}=n();p((()=>{X()}));const Z=(s,e,a)=>Y(0===e?1===s?"已领取":"马上领":0===s?"马上领":a>=e?"已领取":"再次领取");return(i,l)=>{const r=s,c=e,n=a,p=t,N=o;return u(),m(g,null,[d(r),d(c,{title:i.$t("集券中心")},null,8,["title"]),y("div",b,[y("div",x,[l[0]||(l[0]=y("div",{class:"title-image-left"},null,-1)),y("div",T,v(i.$t("集券中心")),1),l[1]||(l[1]=y("div",{class:"title-image-right"},null,-1))]),j((u(),m("div",V,[f(O)>0?(u(!0),m(g,{key:0},h(f(I),(s=>(u(),m("div",{class:"card",onClick:e=>(async s=>{if(Z(s.isReceive,s.limitNum,s.receiveNum)!==Y("已领取"))try{await S({couponId:s.couponId}),w.success("领取成功"),await X()}catch(e){w.error(e.message)}finally{L.value=!1}else w.warning("您已超出领取上限")})(s)},[y("div",z,[y("div",null,[1==s.couponType?(u(),k(n,{key:0,modelValue:s.couponMoney,"onUpdate:modelValue":e=>s.couponMoney=e,showText:!1,currencyStyle:{fontSize:"24px",fontFamily:"Verdana, serif",lineHeight:"41px"},fontStyle:{fontSize:"40px",fontWeight:"bold"},class:"card-price"},null,8,["modelValue","onUpdate:modelValue"])):(u(),m("div",M,[$(v(s.couponDiscount),1),y("span",null,v(i.$t("折")),1)]))]),y("div",q,v(s.couponName?"【"+s.couponName+"】":""),1),1==s.sendType?(u(),m("div",C,v(s.useStartDate)+" "+v(i.$t("至"))+" "+v(s.useEndDate),1)):D("",!0),0==s.sendType&&s.delayDay>0?(u(),m("div",F,v(f(_)()?i.$t("领券{0}天后生效，有效期{1}天",[s.delayDay,s.useDay]):`领券${s.delayDay}天后生效，有效期${s.useDay}天`),1)):D("",!0),0==s.sendType&&0==s.delayDay?(u(),m("div",U,v(f(_)()?i.$t("领券当日起{0}天内可用",[s.useDay]):`领券当日起${s.useDay}天内可用`),1)):D("",!0),s.couponDesc?(u(),m("view",W,v(s.couponDesc),1)):D("",!0)]),y("div",E,[l[2]||(l[2]=y("span",{class:"division_line"},null,-1)),y("span",H,v(Z(s.isReceive,s.limitNum,s.receiveNum)),1)])],8,R)))),256)):(u(),m("div",J,[f(L)?D("",!0):(u(),m("span",K,v(i.$t("暂无可领取的优惠券"))+"～",1))]))])),[[N,f(L)]])]),d(p)],64)}}}),[["__scopeId","data-v-bdf87466"]]);export{L as default};
