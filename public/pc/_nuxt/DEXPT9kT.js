import{bu as y,A as W,L as C,f as I,D as Y,b as A,J as x,aF as N,H as F,ar as $,aD as U,bz as k,au as j,v as J,bk as K,bA as L,g as V,bB as q,bC as G,bD as Q,bE as Z,bF as _}from"./DvlzeZYf.js";import{P as b}from"./BpsRniw3.js";import{t as R}from"./Cq9Fpw4b.js";const ee=e=>{if(!e)return{onClick:y,onMousedown:y,onMouseup:y};let o=!1,n=!1;return{onClick:t=>{o&&n&&e(t),o=n=!1},onMousedown:t=>{o=t.target===t.currentTarget},onMouseup:t=>{n=t.target===t.currentTarget}}},te=W({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:C([String,Array,Object])},zIndex:{type:C([String,Number])}}),oe={click:e=>e instanceof MouseEvent},ne="overlay";var se=I({name:"ElOverlay",props:te,emits:oe,setup(e,{slots:o,emit:n}){const s=Y(ne),a=l=>{n("click",l)},{onClick:u,onMousedown:t,onMouseup:c}=ee(e.customMaskEvent?void 0:a);return()=>e.mask?A("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:u,onMousedown:t,onMouseup:c},[x(o,"default")],b.STYLE|b.CLASS|b.PROPS,["onClick","onMouseup","onMousedown"]):N("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[x(o,"default")])}});const le=se,ie=(e,o,n,s)=>{let a={offsetX:0,offsetY:0};const u=i=>{const f=i.clientX,S=i.clientY,{offsetX:v,offsetY:p}=a,d=e.value.getBoundingClientRect(),h=d.left,g=d.top,T=d.width,O=d.height,P=document.documentElement.clientWidth,B=document.documentElement.clientHeight,H=-h+v,X=-g+p,D=P-h-T+v,z=B-g-O+p,M=E=>{let r=v+E.clientX-f,m=p+E.clientY-S;s!=null&&s.value||(r=Math.min(Math.max(r,H),D),m=Math.min(Math.max(m,X),z)),a={offsetX:r,offsetY:m},e.value&&(e.value.style.transform=`translate(${k(r)}, ${k(m)})`)},w=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",w)},t=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",u)},c=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",u)},l=()=>{a={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return F(()=>{$(()=>{n.value?t():c()})}),U(()=>{c()}),{resetPosition:l}},de=(e,o={})=>{j(e)||R("[useLockscreen]","You need to pass a ref param to this function");const n=o.ns||Y("popup"),s=J(()=>n.bm("parent","hidden"));if(!K||L(document.body,s.value))return;let a=0,u=!1,t="0";const c=()=>{setTimeout(()=>{typeof document>"u"||(_(document==null?void 0:document.body,s.value),u&&document&&(document.body.style.width=t))},200)};V(e,l=>{if(!l){c();return}u=!L(document.body,s.value),u&&(t=document.body.style.width),a=q(n.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,f=G(document.body,"overflowY");a>0&&(i||f==="scroll")&&u&&(document.body.style.width=`calc(100% - ${a}px)`),Q(document.body,s.value)}),Z(()=>c())};export{le as E,de as a,ee as b,ie as u};
