import{_ as e}from"./DGSQZaL6.js";import{E as a,a as t}from"./DeNxzkIy.js";import{e as l,r as s,aj as r,Q as u,c as i,o as c,b as o,w as d,F as n,l as v,m as _,a as m,v as f,d as p,t as y,n as g,_ as j}from"./BLNaUqdG.js";import{g as h}from"./DxiXPFL-.js";import"./BwRzfsZt.js";import"./BX08AvzU.js";import"./losdC6Ud.js";const b={class:"menu-list"},O={key:0,class:"menu"},q={class:"min-menu"},L={key:1,class:"loading-data"},M=j(l({__name:"IssueLeftMenu",props:{dataOver:{type:Boolean,default:!1},leftMenuList:{type:Array,default:[]}},emits:["update:leftMenuList","update:dataOver"],setup(l,{emit:j}){const M=s([]),R=s(),w=s(),E=s(!0),V=s(!1),k=j;(async()=>{E.value=!0,k("update:leftMenuList",[]);try{const e=await h({category_size:99,article_size:99});Object.assign(M.value,e.filter_result),console.log(M.value),k("update:leftMenuList",M.value),k("update:dataOver",!0),V.value=!0}catch(e){g.error(e.message)}finally{E.value=!1}})();const x=r();return u([()=>x.currentRoute.value.query,()=>V.value],(()=>{var e,a;if(x.currentRoute.value.query.hasOwnProperty("article_id")){let a=x.currentRoute.value.query.article_id;null==(e=M.value)||e.forEach(((e,t)=>{e.articles.forEach(((t,l)=>{t.article_id===Number(a)&&(R.value=e.article_category_id,w.value=t.article_id)}))}))}else if(x.currentRoute.value.query.hasOwnProperty("category_id")){let e=x.currentRoute.value.query.category_id;null==(a=M.value)||a.forEach(((a,t)=>{a.category_sn===e&&(R.value=a.article_category_id)}))}}),{deep:!0}),(l,s)=>{const r=e,u=t,g=a;return c(),i("div",b,[o(r,{class:"ico",to:"/article/issue/index"}),E.value?(c(),i("div",L,y(l.$t("加载中")),1)):(c(),i("div",O,[o(g,{modelValue:R.value,"onUpdate:modelValue":s[0]||(s[0]=e=>R.value=e),accordion:""},{default:d((()=>[(c(!0),i(n,null,v(M.value,(e=>(c(),_(u,{name:e.article_category_id,title:e.article_category_name,disabled:0===e.articles.length},{default:d((()=>[m("div",q,[(c(!0),i(n,null,v(null==e?void 0:e.articles,(e=>(c(),_(r,{class:f([w.value===e.article_id?"pitch-on":"","item-menu"]),to:"/article/issue/info?article_id="+e.article_id},{default:d((()=>[p(y(e.article_title),1)])),_:2},1032,["class","to"])))),256))])])),_:2},1032,["name","title","disabled"])))),256))])),_:1},8,["modelValue"])]))])}}}),[["__scopeId","data-v-a7be56f5"]]);export{M as default};
