import{_ as E}from"./CzQrJ5jx.js";import{E as N,a as k}from"./DJPhaq3G.js";import{f as q,r as u,q as w,g as C,o as r,c as i,b as g,w as m,F as h,l as x,t as L,m as M,h as z,a as O,n as R,d as V,_ as I}from"./DvlzeZYf.js";import{g as b}from"./eXzid_I5.js";import"./BB_Ol6Sd.js";import"./De9iyrrl.js";import"./CvS5MqkS.js";const F={class:"menu-list"},P={key:0,class:"menu"},S={class:"min-menu"},j={key:1,class:"loading-data"},A=q({__name:"IssueLeftMenu",props:{dataOver:{type:Boolean,default:!1},leftMenuList:{type:Array,default:[]}},emits:["update:leftMenuList","update:dataOver"],setup(D,{emit:B}){const l=u([]),n=u(),v=u(),_=u(!0),y=u(!1),p=B;(async()=>{_.value=!0,p("update:leftMenuList",[]);try{const t=await b({category_size:99,article_size:99});Object.assign(l.value,t.filter_result),p("update:leftMenuList",l.value),p("update:dataOver",!0),y.value=!0}catch(t){M.error(t.message)}finally{_.value=!1}})();const o=w();return C([()=>o.currentRoute.value.query,()=>y.value],()=>{var t,c;if(o.currentRoute.value.query.hasOwnProperty("article_id")){let s=o.currentRoute.value.query.article_id;(t=l.value)==null||t.forEach((a,f)=>{a.articles.forEach((e,d)=>{e.article_id===Number(s)&&(n.value=a.article_category_id,v.value=e.article_id)})})}else if(o.currentRoute.value.query.hasOwnProperty("category_id")){let s=o.currentRoute.value.query.category_id;(c=l.value)==null||c.forEach((a,f)=>{a.category_sn===s&&(n.value=a.article_category_id)})}},{deep:!0}),(t,c)=>{const s=E,a=k,f=N;return r(),i("div",F,[g(s,{class:"ico",to:"/article/issue/index"}),_.value?(r(),i("div",j,L(t.$t("加载中")),1)):(r(),i("div",P,[g(f,{modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=e=>n.value=e),accordion:""},{default:m(()=>[(r(!0),i(h,null,x(l.value,e=>(r(),z(a,{name:e.article_category_id,title:e.article_category_name},{default:m(()=>[O("div",S,[(r(!0),i(h,null,x(e==null?void 0:e.articles,d=>(r(),z(s,{class:R([v.value===d.article_id?"pitch-on":"","item-menu"]),to:"/article/issue/info?article_id="+d.article_id},{default:m(()=>[V(L(d.article_title),1)]),_:2},1032,["class","to"]))),256))])]),_:2},1032,["name","title"]))),256))]),_:1},8,["modelValue"])]))])}}}),W=I(A,[["__scopeId","data-v-09b1e163"]]);export{W as default};
