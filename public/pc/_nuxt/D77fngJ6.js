import{b as e}from"./kUOzVTvd.js";import{_ as a}from"./9TMjRzGO.js";import{_ as l}from"./DHZet8FK.js";import{E as t}from"./CK-rvtuG.js";import{_ as s}from"./DGSQZaL6.js";import{_ as i}from"./CScYj7Fy.js";import{_ as o}from"./zM3V5R1F.js";import{e as u,z as r,aj as d,r as n,s as c,c as m,o as v,b as p,a as _,h as f,t as y,w as b,d as k,i as g,q as h,m as V,F as $,l as j,p as x,j as U,n as w,ai as q,_ as C}from"./BLNaUqdG.js";import{f as F,c as I,a as z}from"./4WcqWuuL.js";import{L as O}from"./b_4_U_AZ.js";import"./CdUPjuAS.js";import"./DlIXSNl1.js";import"./D-E-9YUO.js";import"./Bp2G0jMz.js";import"./DmeNR82d.js";import"./BwRzfsZt.js";import"./BWAJcOoD.js";import"./losdC6Ud.js";import"./C8QNSlsX.js";import"./D_Dr4eZ1.js";import"./BucM0pco.js";import"./rSOsbbvW.js";import"./DgmxjSXK.js";import"./BX08AvzU.js";import"./CxZS6lgh.js";import"./DIIF5iVx.js";/* empty css        */import"./C8IqyEYy.js";import"./ClnUiH43.js";import"./CQcoTD7x.js";import"./D5ZJ33IS.js";import"./DSwxsogY.js";import"./DxiXPFL-.js";const R={class:"container flex"},S={class:"menu"},E={class:"info-row"},L={class:"title-or-tabs right-info"},Q={key:0},T={class:"order-info"},J={class:"page-info-body lr"},K={class:"order-left"},M={key:0,style:{"margin-left":"40px"}},N={class:"font-color"},P={style:{"margin-left":"40px"}},W={class:"order-right"},X={key:1},Y={class:"page-info-body"},Z={class:"sub-title"},A={class:"tig-steps"},B={style:{"font-weight":"600"}},D={class:"page-info-body"},G={class:"sub-title"},H={class:"order-ul",style:{"margin-top":"20px"}},ee={key:0,class:"page-info-body"},ae={class:"sub-title"},le={class:"sub-sub-title"},te={key:0,class:"order-ul virtualsample-box"},se={class:"item"},ie={class:"item"},oe={class:"page-info-body"},ue={class:"sub-title"},re={class:"order-table-info"},de={class:"receipt-header"},ne={key:0},ce={class:"receipt-body"},me={class:"receipt-item"},ve=["alt","src"],pe={key:0,class:"sku-style"},_e={key:1,class:"extraskudata"},fe={class:"title"},ye={class:"content"},be={class:"content-text"},ke={class:"num"},ge={class:"receipt-item price"},he={class:"receipt-item price"},Ve={class:"receipt-item price"},$e={key:0,class:"receipt-item operation"},je={class:"receipt-footer"},xe=["colspan"],Ue={class:"receipt-footer-it one",colspan:"2"},we={class:"item"},qe={class:"label"},Ce={class:"text"},Fe={key:0,class:"item"},Ie={class:"label"},ze={class:"text"},Oe={key:1,class:"item"},Re={class:"label"},Se={class:"text"},Ee={key:2,class:"item"},Le={class:"label"},Qe={class:"text"},Te={key:3,class:"item"},Je={class:"label"},Ke={class:"text"},Me={key:4,class:"item"},Ne={class:"label"},Pe={class:"text"},We={key:5,class:"item"},Xe={class:"label"},Ye={class:"text"},Ze={key:6,class:"item"},Ae={class:"label"},Be={class:"text"},De={class:"item"},Ge={key:0},He={key:1},ea=C(u({__name:"Info",setup(u){const{t:C}=r(),ea=d(),aa=n({order_status:0,available_actions:{}}),la=n(!0),ta=c((()=>{var e;let a=!1;return null==(e=aa.value.items)||e.forEach((e=>{e.e_card&&e.e_card.length>0&&(a=!0)})),a})),sa=async()=>{try{const e=await F({id:ea.currentRoute.value.query.id});Object.assign(aa.value,e.item)}catch(e){w.error(e.message)}finally{la.value=!1}};sa();const ia=n(["您的订单已提交成功，请尽快完成付款哦！","感谢您在本店的购物，您的订单已提交成功，我们会尽快为您发货！","您的订单已经发货，请注意查收，祝您购物愉快！",'您的订单已被取消，您可以通过"再次购买"，重新购买订单中的商品。','您的订单被认定为无效订单，订单已被关闭。您可以通过"再次购买"，重新购买订单中的商品。给您造成的不便请多多谅解！',"您的订单已经确认收货，感谢您在本店购物，祝您生活愉快！"]),oa=async()=>{q.confirm({title:C("确认要取消该订单吗"),cancelText:C("取消"),okText:C("确定"),maskClosable:!0,centered:!0,onOk:async()=>{try{const e=await I({id:aa.value.order_id});w.success(e.message),await sa()}catch(e){w.error(e.message)}}})},ua=async()=>{q.confirm({title:C("确认要收货吗"),maskClosable:!0,centered:!0,onOk:async()=>{try{const e=await z({id:aa.value.order_id});w.success(e.message),await sa()}catch(e){w.error(e.message)}}})};return(u,r)=>{var d;const n=e,c=a,w=l,q=t,C=s,F=i,I=o;return v(),m($,null,[p(n,{showService:!0,phone:aa.value.shop?aa.value.shop.kefu_phone:"",order_id:aa.value.order_id,shop_id:aa.value.shop_id},null,8,["phone","order_id","shop_id"]),p(c,{title:"订单详情"}),_("div",R,[_("div",S,[p(w)]),_("div",E,[_("div",L,[_("span",null,y(u.$t("订单详情")),1),aa.value.available_actions.split_order?f("",!0):(v(),m("div",Q,[p(C,{to:"/member/feedback/askList?order_id="+aa.value.order_id+"&order_sn="+aa.value.order_sn},{default:b((()=>[p(q,null,{default:b((()=>[k(y(u.$t("订单留言/咨询")),1)])),_:1})])),_:1},8,["to"])]))]),_("div",T,[_("div",J,[_("div",K,[_("div",null,[_("span",null,[k(y(u.$t("订单号"))+"：",1),_("strong",null,y(aa.value.order_sn),1)]),aa.value.shop&&aa.value.shop.shop_title?(v(),m("span",M,[k(y(u.$t("下单店铺"))+"：",1),p(C,{to:("urlFormat"in u?u.urlFormat:g(h))({path:"shop",id:aa.value.shop_id}),target:"_blank"},{default:b((()=>[_("span",N,y(aa.value.shop.shop_title),1)])),_:1},8,["to"])])):f("",!0),_("span",P,[k(y(u.$t("订单状态"))+"： ",1),_("strong",null,y(aa.value.order_status_name),1)])]),_("div",null,y(u.$t(ia.value[aa.value.order_status])),1)]),_("div",W,[aa.value.available_actions.cancel_order?(v(),V(q,{key:0,onClick:oa},{default:b((()=>[k(y(u.$t("取消订单")),1)])),_:1})):f("",!0),aa.value.available_actions.to_pay?(v(),m("div",X,[p(C,{to:"/order/pay/?id="+aa.value.order_id,target:"_balnk"},{default:b((()=>[p(q,{type:"primary"},{default:b((()=>[k(y(u.$t("付款")),1)])),_:1})])),_:1},8,["to"])])):f("",!0),aa.value.available_actions.confirm_receipt?(v(),V(q,{key:2,type:"primary",onClick:ua},{default:b((()=>[k(y(u.$t("确认收货")),1)])),_:1})):f("",!0),aa.value.available_actions.to_aftersales?(v(),V(C,{key:3,target:"_blank",to:"/member/return/Info?order_id="+aa.value.order_id},{default:b((()=>[p(q,null,{default:b((()=>[k(y(u.$t("整单售后")),1)])),_:1})])),_:1},8,["to"])):f("",!0)])]),_("div",Y,[_("div",Z,y(u.$t("订单状态")),1),_("div",A,[(v(!0),m($,null,j(null==(d=aa.value.step_status)?void 0:d.steps,((e,a)=>{var l,t,s,i,o,u;return v(),m($,null,[_("div",{style:x({color:a<=(null==(l=aa.value.step_status)?void 0:l.current)?"var(--general)":"#c4c4c4",border:a<=(null==(t=aa.value.step_status)?void 0:t.current)?"4px solid var(--general)":"4px solid #eee"}),class:"steps-card"},[_("div",B,y(a+1),1),_("div",{style:x({color:a<=(null==(s=aa.value.step_status)?void 0:s.current)?"var(--general)":"#333"}),class:"card-text"},[_("div",null,y(e.title),1),_("div",null,y(e.description),1)],4)],4),a!=(null==(o=null==(i=aa.value.step_status)?void 0:i.steps)?void 0:o.length)-1?(v(),m("div",{key:0,style:x({backgroundColor:a<(null==(u=aa.value.step_status)?void 0:u.current)?"var(--general)":"#eee"}),class:"steps-line"},null,4)):f("",!0)],64)})),256))]),!aa.value.order_id||2!==aa.value.order_status&&5!==aa.value.order_status?f("",!0):(v(),V(O,{key:0,tracking_no:aa.value.tracking_no,logistics_name:aa.value.logistics_name,shipping_method:aa.value.shipping_method,id:aa.value.order_id,"onUpdate:id":r[0]||(r[0]=e=>aa.value.order_id=e)},null,8,["tracking_no","logistics_name","shipping_method","id"]))]),_("div",D,[_("div",G,y(u.$t("订单信息")),1),_("ul",H,[_("li",null,[k(y(u.$t("收货信息"))+"：",1),_("span",null,y(aa.value.user_address)+" "+y(aa.value.consignee)+" "+y(aa.value.mobile),1)]),_("li",null,[k(y(u.$t("配送方式"))+"：",1),_("span",null,y(aa.value.shipping_type_name),1)]),_("li",null,[k(y(u.$t("支付方式"))+"：",1),_("span",null,y(1===aa.value.pay_type_id?u.$t("在线支付"):2===aa.value.pay_type_id?u.$t("货到付款"):u.$t("线下支付")),1)])])]),g(ta)?(v(),m("div",ee,[_("div",ae,y(u.$t("卡券信息")),1),(v(!0),m($,null,j(aa.value.items,(e=>(v(),m($,null,[_("div",le,y(e.product_name),1),e.e_card.length>0?(v(),m("ul",te,[(v(!0),m($,null,j(e.e_card,(e=>(v(),m("li",{class:"virtualsample-item",key:e},[_("div",se,[k(y(u.$t("卡号"))+"：",1),_("span",null,y(e.card_number),1)]),_("div",ie,[k(y(u.$t("卡密"))+"：",1),_("span",null,y(e.card_pwd),1)])])))),128))])):f("",!0)],64)))),256))])):f("",!0),_("div",oe,[_("div",ue,y(u.$t("订单商品")),1),_("table",re,[_("thead",null,[_("tr",de,[_("th",null,y(u.$t("商品名称")),1),_("th",null,y(u.$t("商品价格")),1),_("th",null,y(u.$t("购买数量")),1),_("th",null,y(u.$t("小计")),1),aa.value.available_actions.to_aftersales?(v(),m("th",ne,y(u.$t("操作")),1)):f("",!0)])]),_("tbody",null,[(v(!0),m($,null,j(aa.value.items,(e=>{return v(),m("tr",ce,[_("td",me,[_("div",null,[_("img",{alt:e.product_name,src:("imageFormat"in u?u.imageFormat:g(U))(e.pic_thumb),class:"img-border"},null,8,ve),k(" "+y(e.product_name)+" ",1),e.sku_data?(v(),m("div",pe,[(v(!0),m($,null,j(e.sku_data,(e=>(v(),m("div",null,y(e.name)+"："+y(e.value),1)))),256))])):f("",!0),e.extra_sku_data&&e.extra_sku_data.length?(v(),m("div",_e,[(v(!0),m($,null,j(e.extra_sku_data,(a=>(v(),m("div",{key:a,class:"extraskudata-item"},[_("div",fe,y(a.attr_name),1),r[10]||(r[10]=_("div",{class:"line-box"},[_("div",{class:"line"})],-1)),_("div",ye,[_("span",be,y(a.attr_value),1),p(F,{class:"price",modelValue:a.attr_price,"onUpdate:modelValue":e=>a.attr_price=e},null,8,["modelValue","onUpdate:modelValue"]),_("span",ke,"x"+y(e.quantity),1)])])))),128))])):f("",!0)])]),_("td",ge,[p(F,{modelValue:e.price,"onUpdate:modelValue":a=>e.price=a},null,8,["modelValue","onUpdate:modelValue"])]),_("td",he,y(e.quantity),1),_("td",Ve,[p(F,{modelValue:e.subtotal,"onUpdate:modelValue":a=>e.subtotal=a},null,8,["modelValue","onUpdate:modelValue"])]),aa.value.available_actions.to_aftersales||e.aftersales_item?(v(),m("td",$e,[aa.value.available_actions.to_aftersales||(a=aa.value.items,null==a?void 0:a.some((e=>Reflect.has(e,"aftersales_item")&&!e.aftersales_item.aftersale_id)))?(v(),V(C,{key:0,target:"_blank",to:"/member/return/Info?order_id="+aa.value.order_id+"&item_id="+e.item_id},{default:b((()=>[p(q,{size:"small"},{default:b((()=>[k(y(u.$t("申请售后")),1)])),_:1})])),_:2},1032,["to"])):f("",!0),e.aftersales_item?(v(),V(C,{key:1,target:"_blank",to:"/member/return/logInfo?id="+e.aftersales_item.aftersale_id},{default:b((()=>[p(q,{size:"small"},{default:b((()=>[k(y(u.$t("售后详情")),1)])),_:1})])),_:2},1032,["to"])):f("",!0)])):f("",!0)]);var a})),256))]),_("tfoot",null,[_("tr",je,[_("th",{colspan:aa.value.available_actions.to_aftersales?3:2},null,8,xe),_("th",Ue,[_("div",we,[_("div",qe,y(u.$t("商品总价"))+"：",1),_("div",Ce,[p(F,{modelValue:aa.value.product_amount,"onUpdate:modelValue":r[1]||(r[1]=e=>aa.value.product_amount=e)},null,8,["modelValue"])])]),aa.value.service_fee&&aa.value.service_fee>0?(v(),m("div",Fe,[_("div",Ie,y(u.$t("附加费用"))+"：",1),_("div",ze,[p(F,{modelValue:aa.value.service_fee,"onUpdate:modelValue":r[2]||(r[2]=e=>aa.value.service_fee=e)},null,8,["modelValue"])])])):f("",!0),aa.value.shipping_fee>0?(v(),m("div",Oe,[_("div",Re,y(u.$t("运费"))+"：",1),_("div",Se,[p(F,{modelValue:aa.value.shipping_fee,"onUpdate:modelValue":r[3]||(r[3]=e=>aa.value.shipping_fee=e)},null,8,["modelValue"])])])):f("",!0),aa.value.balance>0?(v(),m("div",Ee,[_("div",Le,y(u.$t("使用余额"))+"：",1),_("div",Qe,[p(F,{modelValue:aa.value.balance,"onUpdate:modelValue":r[4]||(r[4]=e=>aa.value.balance=e)},null,8,["modelValue"])])])):f("",!0),aa.value.points_amount>0?(v(),m("div",Te,[_("div",Je,y(u.$t("使用积分"))+"：",1),_("div",Ke,[p(F,{modelValue:aa.value.points_amount,"onUpdate:modelValue":r[5]||(r[5]=e=>aa.value.points_amount=e)},null,8,["modelValue"])])])):f("",!0),aa.value.discount_amount>0?(v(),m("div",Me,[_("div",Ne,y(u.$t("其他优惠"))+"：",1),_("div",Pe,[r[11]||(r[11]=k(" - ")),p(F,{modelValue:aa.value.discount_amount,"onUpdate:modelValue":r[6]||(r[6]=e=>aa.value.discount_amount=e)},null,8,["modelValue"])])])):f("",!0),aa.value.coupon_amount>0?(v(),m("div",We,[_("div",Xe,y(u.$t("优惠券优惠"))+"：",1),_("div",Ye,[r[12]||(r[12]=k(" - ")),p(F,{modelValue:aa.value.coupon_amount,"onUpdate:modelValue":r[7]||(r[7]=e=>aa.value.coupon_amount=e)},null,8,["modelValue"])])])):f("",!0),aa.value.unpaid_amount&&aa.value.unpaid_amount>0?(v(),m("div",Ze,[_("div",Ae,y(u.$t("待支付金额"))+"：",1),_("div",Be,[p(F,{modelValue:aa.value.unpaid_amount,"onUpdate:modelValue":r[8]||(r[8]=e=>aa.value.unpaid_amount=e)},null,8,["modelValue"])])])):f("",!0),_("div",De,[2==aa.value.pay_status?(v(),m("span",Ge,y(u.$t("实付款"))+"：",1)):(v(),m("span",He,y(u.$t("应付款"))+"：",1)),p(F,{modelValue:aa.value.total_amount,"onUpdate:modelValue":r[9]||(r[9]=e=>aa.value.total_amount=e),fontStyle:{fontSize:"20px",color:"var(--price)"}},null,8,["modelValue"])])])])])])])])])]),p(I)],64)}}}),[["__scopeId","data-v-850b385a"]]);export{ea as default};
