import{_ as N}from"./BYDV-pPC.js";import{_ as B}from"./uNNarvbF.js";import{_ as H}from"./CPg1UVcC.js";import{_ as P}from"./BCw_XNK7.js";import{v as q}from"./C_PfpWcu.js";import{f as R,r as u,s as z,q as D,Y as T,H as U,o as t,c as n,b as m,a,t as s,a5 as j,j as c,F as C,l as E,i as d,m as y,h as M,d as O,$ as V,p as W,e as Y,_ as A}from"./DvlzeZYf.js";import{a as G,b as J}from"./ClgC9hY9.js";import"./CljOOE4N.js";import"./CzQrJ5jx.js";import"./ctHFjQ9z.js";import"./XomGKeK5.js";import"./B9SirqjL.js";import"./BxwJi-A4.js";import"./CvS5MqkS.js";import"./6IjmK16v.js";import"./DXZCNwre.js";import"./BB_Ol6Sd.js";import"./Cq9Fpw4b.js";import"./D5p5RYpQ.js";import"./DGzzo1G8.js";import"./DldgdBu3.js";import"./DCTLXrZ8.js";import"./De9iyrrl.js";import"./C3hftOhu.js";import"./CFi7q_x0.js";/* empty css        */import"./JPAiA_Rf.js";import"./lRlBa-wu.js";import"./DEXPT9kT.js";import"./BpsRniw3.js";import"./DrjGOYyT.js";import"./eXzid_I5.js";const f=l=>(W("data-v-10bfbaed"),l=l(),Y(),l),K={class:"container coupon-list"},Q={class:"title"},X=f(()=>a("div",{class:"title-image-left"},null,-1)),Z={class:"com-pc-title"},oo=f(()=>a("div",{class:"title-image-right"},null,-1)),eo={class:"coupon-card-list"},to=["onClick"],so={class:"left-card"},ao={key:1,class:"coupon_discount"},no={class:"name"},ro={key:0,class:"time"},io={key:1,class:"time"},co={key:2,class:"time"},_o={key:3,class:"name desc"},lo={class:"right-card"},po=f(()=>a("span",{class:"division_line"},null,-1)),uo={class:"text"},mo={key:1,class:"no-result"},yo={key:0},fo=R({__name:"List",setup(l){const h=u([]),_=u(!0),v=u(0),g=z({page:1,is_show:1,shop_id:-1}),k=D(),$=async()=>{_.value=!0;try{k.currentRoute.value.query.shop_id&&(g.shop_id=Number(k.currentRoute.value.query.shop_id));const e=await G({...g});v.value=e.total,h.value=e.filter_result}catch(e){y.error(e.message)}finally{_.value=!1}},{t:i}=T();U(()=>{$()});const S=(e,r,p)=>r===0?i(e===1?"已领取":"马上领"):e===0?i("马上领"):p>=r?i("已领取"):i("再次领取"),w=async e=>{if(S(e.is_receive,e.limit_num,e.receive_num)!==i("已领取"))try{const r=await J({coupon_id:e.coupon_id});y.success(r.message),await $()}catch(r){y.error(r.message)}finally{_.value=!1}};return(e,r)=>{const p=N,F=B,x=H,I=P,L=q;return t(),n(C,null,[m(p),m(F,{title:e.$t("集券中心")},null,8,["title"]),a("div",K,[a("div",Q,[X,a("div",Z,s(e.$t("集券中心")),1),oo]),j((t(),n("div",eo,[c(v)>0?(t(!0),n(C,{key:0},E(c(h),o=>(t(),n("div",{class:"card",onClick:b=>w(o)},[a("div",so,[a("div",null,[o.coupon_type==1?(t(),M(x,{key:0,modelValue:o.coupon_money,"onUpdate:modelValue":b=>o.coupon_money=b,showText:!1,currencyStyle:{color:"#74d2d4",fontSize:"24px",fontFamily:"Verdana, serif",lineHeight:"40px"},fontStyle:{color:"#74d2d4",fontSize:"40px",fontWeight:"bold"}},null,8,["modelValue","onUpdate:modelValue"])):(t(),n("div",ao,[O(s(o.coupon_discount),1),a("span",null,s(e.$t("折")),1)]))]),a("div",no,s(o.coupon_name?"【"+o.coupon_name+"】":""),1),o.send_type==1?(t(),n("div",ro,s(o.use_start_date)+" "+s(e.$t("至"))+" "+s(o.use_end_date),1)):d("",!0),o.send_type==0&&o.delay_day>0?(t(),n("div",io,s(c(V)()?e.$t("领券{0}天后生效，有效期{1}天",[o.delay_day,o.use_day]):`领券${o.delay_day}天后生效，有效期${o.use_day}天`),1)):d("",!0),o.send_type==0&&o.delay_day==0?(t(),n("div",co,s(c(V)()?e.$t("领券当日起{0}天内可用",[o.use_day]):`领券当日起${o.use_day}天内可用`),1)):d("",!0),o.coupon_desc?(t(),n("view",_o,s(o.coupon_desc),1)):d("",!0)]),a("div",lo,[po,a("span",uo,s(S(o.is_receive,o.limit_num,o.receive_num)),1)])],8,to))),256)):(t(),n("div",mo,[c(_)?d("",!0):(t(),n("span",yo,s(e.$t("暂无可领取的优惠券"))+"～",1))]))])),[[L,c(_)]])]),m(I)],64)}}}),Jo=A(fo,[["__scopeId","data-v-10bfbaed"]]);export{Jo as default};
