import{b as l}from"./kUOzVTvd.js";import{_ as e}from"./9TMjRzGO.js";import{_ as a}from"./DHZet8FK.js";import{_ as t}from"./B6t2jNUa.js";import{E as s}from"./CK-rvtuG.js";import{E as r}from"./ClnUiH43.js";import{E as u,a as n}from"./Di7_rRxo.js";import{e as i,z as o,r as d,aj as c,y as m,n as p,I as v,g as _,c as f,o as g,b as y,a as b,aa as h,h as j,m as V,w as $,d as x,t as w,F as k,l as U,p as F,E as T,i as q,j as E,q as L,ai as z,ae as C,_ as I}from"./BLNaUqdG.js";import{_ as N}from"./DGSQZaL6.js";import{_ as O}from"./CScYj7Fy.js";import{_ as R}from"./zM3V5R1F.js";import{E as S}from"./Bil1wbyq.js";import{v as J}from"./C8qdh5cF.js";import"./CQcoTD7x.js";import{a as K,u as M,c as P}from"./CmBxQZy5.js";import{U as Q}from"./DOF94b_8.js";import"./CdUPjuAS.js";import"./DlIXSNl1.js";import"./D-E-9YUO.js";import"./Bp2G0jMz.js";import"./DmeNR82d.js";import"./BwRzfsZt.js";import"./BWAJcOoD.js";import"./losdC6Ud.js";import"./C8QNSlsX.js";import"./D_Dr4eZ1.js";import"./BucM0pco.js";import"./rSOsbbvW.js";import"./DgmxjSXK.js";import"./BX08AvzU.js";import"./CxZS6lgh.js";import"./DIIF5iVx.js";/* empty css        */import"./C8IqyEYy.js";import"./DSwxsogY.js";import"./DxiXPFL-.js";import"./D5ZJ33IS.js";import"./TpWzRMhr.js";const W={class:"container flex"},X={class:"menu"},Y={class:"info-row"},Z={class:"title-or-tabs"},A={class:"tag-and-input"},B={class:"tig-tabs"},D={key:0,class:"log-return-content"},G={class:"button-col"},H={class:"tig-steps"},ll={style:{"font-weight":"600"}},el={key:0,class:"file-card"},al={class:"info-card"},tl={class:"table-header"},sl={class:"header-cell"},rl={class:"header-cell",style:{width:"60px"}},ul={class:"header-cell",style:{width:"60px"}},nl={class:"header-cell",style:{width:"60px"}},il={class:"header-cell",style:{width:"60px"}},ol={class:"text-ellipsis"},dl={class:"name"},cl={class:"value"},ml={key:0},pl={class:"info-card"},vl={key:0},_l={class:"application-picture"},fl={key:0},gl={key:1},yl={key:2},bl={class:"info-card"},hl={class:"table-header"},jl={class:"header-cell",style:{width:"120px"}},Vl={class:"header-cell",style:{width:"160px"}},$l={class:"header-cell"},xl={class:"bt-image"},wl={key:1,class:"log-return-content"},kl={class:"image"},Ul=I(i({__name:"LogInfo",setup(i){const{t:I}=o(),Ul=d(""),Fl=d(!1),Tl=d([]),ql=c(),El=d({step_status:{},pics_list:[],return_pic:[],pics:[]}),Ll=d(!0);m((()=>{zl()}));const zl=async()=>{var l;try{Ll.value=!0;const e=await K({id:ql.currentRoute.value.query.id});Object.assign(El.value,e.item),Tl.value=e.item.aftersales_items?e.item.aftersales_items:[],null==(l=Tl.value)||l.forEach((l=>{l.subtotal=l.quantity*l.price}))}catch(e){p.error(e.message)}finally{Ll.value=!1}},Cl=v(),Il=async()=>{await Cl.value.validate();try{const l=await M({id:El.value.aftersale_id,...El.value});p.success(l.message),await Cl.value.resetFields(),await zl()}catch(l){p.error(l.message)}},Nl=_([{value:"退/换货申请",url:"/member/return/list",size:0},{value:"申请记录",url:"/member/return/log",size:0}]);return(i,o)=>{const d=l,c=e,m=a,v=t,_=s,K=r,M=u,ql=n,zl=T,Ol=N,Rl=O,Sl=R,Jl=S,Kl=J;return g(),f(k,null,[y(d),y(c,{title:"申请详情"}),b("div",W,[b("div",X,[y(m)]),b("div",Y,[b("div",Z,[b("div",A,[b("div",B,[y(v,{menuList:Nl},null,8,["menuList"])])])]),Ll.value?h((g(),f("div",wl,null,512)),[[Kl,Ll.value]]):(g(),f("div",D,[b("div",G,[El.value.can_cancel?(g(),V(_,{key:0,onClick:o[0]||(o[0]=l=>(async l=>{z.confirm({title:I("确认删要撤销申请吗"),cancelText:I("取消"),okText:I("确定"),maskClosable:!0,centered:!0,onOk:async()=>{try{const e=await P({aftersale_id:l});p.success(e.message),C("/member/return/log")}catch(e){p.error(e.message)}}})})(Number(El.value.aftersale_id)))},{default:$((()=>[x(w(i.$t("撤销")),1)])),_:1})):j("",!0)]),b("div",H,[(g(!0),f(k,null,U(El.value.step_status.steps,((l,e)=>{var a,t,s,r,u,n;return g(),f(k,null,[b("div",{style:F({color:l.active?"var(--general)":"#c4c4c4",border:l.active?"4px solid var(--general)":"4px solid #eee"}),class:"steps-card"},[b("div",ll,w(e+1),1),b("div",{style:F({color:l.active?"var(--general)":"#333"}),class:"card-text"},[b("div",null,w(l.title),1),b("div",null,w(l.description),1)],4)],4),e!=Number(((null==(s=null==(t=null==(a=El.value)?void 0:a.step_status)?void 0:t.steps)?void 0:s.length)?null==(n=null==(u=null==(r=El.value)?void 0:r.step_status)?void 0:u.steps)?void 0:n.length:0)-1)?(g(),f("div",{key:0,style:F({backgroundColor:El.value.step_status.steps[e+1].active?"var(--general)":"#eee"}),class:"steps-line"},null,4)):j("",!0)],64)})),256))]),6!=El.value.status?(g(),f("div",el,[7!=El.value.status?(g(),V(ql,{key:0,ref_key:"formRef",ref:Cl,"label-width":100,model:El.value,class:"form-body","label-suffix":"："},{default:$((()=>[y(M,{label:i.$t("问题补充"),prop:"log_info"},{default:$((()=>[y(K,{modelValue:El.value.log_info,"onUpdate:modelValue":o[1]||(o[1]=l=>El.value.log_info=l),row:4,clearable:"",placeholder:i.$t("请输入问题补充"),type:"textarea"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),4===El.value.status?(g(),f(k,{key:0},[y(M,{label:i.$t("回寄地址"),prop:"return_address"},{default:$((()=>[y(K,{modelValue:El.value.return_address,"onUpdate:modelValue":o[2]||(o[2]=l=>El.value.return_address=l),readonly:"",clearable:"",type:"textarea"},null,8,["modelValue"])])),_:1},8,["label"]),y(M,{rules:[{required:!0,message:i.$t("快递公司不能为空!")}],label:i.$t("快递公司"),prop:"logistics_name"},{default:$((()=>[y(K,{modelValue:El.value.logistics_name,"onUpdate:modelValue":o[3]||(o[3]=l=>El.value.logistics_name=l),clearable:"",placeholder:i.$t("请输入快递公司")},null,8,["modelValue","placeholder"])])),_:1},8,["rules","label"]),y(M,{rules:[{required:!0,message:i.$t("快递单号不能为空!")}],label:i.$t("快递单号"),prop:"tracking_no"},{default:$((()=>[y(K,{modelValue:El.value.tracking_no,"onUpdate:modelValue":o[4]||(o[4]=l=>El.value.tracking_no=l),clearable:"",placeholder:i.$t("请输入快递单号"),type:"textarea"},null,8,["modelValue","placeholder"])])),_:1},8,["rules","label"])],64)):j("",!0),y(M,{label:i.$t("上传文件"),prop:"return_pic"},{default:$((()=>[y(Q,{uploadList:El.value.return_pic,"onUpdate:uploadList":o[5]||(o[5]=l=>El.value.return_pic=l),fileTypes:["jpeg","png"],limit:5},null,8,["uploadList"])])),_:1},8,["label"]),y(M,{label:""},{default:$((()=>[y(_,{type:"primary",onClick:Il},{default:$((()=>[x(w(i.$t("提交")),1)])),_:1})])),_:1})])),_:1},8,["model"])):j("",!0)])):j("",!0),b("div",al,[b("table",null,[b("thead",tl,[b("tr",null,[b("th",sl,w(i.$t("商品名称")),1),b("th",rl,w(i.$t("商品价格")),1),b("th",ul,w(i.$t("购买数量")),1),b("th",nl,w(i.$t("小计")),1),b("th",il,w(i.$t("退/换数量")),1)])]),b("tbody",null,[(g(!0),f(k,null,U(Tl.value,(l=>(g(),f("tr",null,[b("td",null,[y(Ol,{title:l.product_name,to:q(L)({path:"product",id:l.item_id,sn:l.product_sn}),class:"nuxt",target:"_blank"},{default:$((()=>[y(zl,{src:("imageFormat"in i?i.imageFormat:q(E))(l.pic_thumb),class:"pro_pic",loading:"lazy",style:{transition:"opacity 0.2s linear","flex-shrink":"0"}},null,8,["src"]),b("div",null,[b("div",ol,[b("ul",null,[b("li",null,w(i.$t("货号"))+"："+w(l.product_sn),1),b("li",null,w(l.product_name),1),b("li",null,[(g(!0),f(k,null,U(l.sku_data,((e,a)=>{var t;return g(),f(k,null,[b("span",dl,w(e.name)+"：",1),b("span",cl,w(e.value),1),a<(null==(t=l.sku_data)?void 0:t.length)-1?(g(),f("span",ml,"；")):j("",!0)],64)})),256))])])])])])),_:2},1032,["title","to"])]),b("td",null,[y(Rl,{modelValue:l.price,"onUpdate:modelValue":e=>l.price=e,fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),b("td",null,w(l.quantity),1),b("td",null,[y(Rl,{modelValue:l.subtotal,"onUpdate:modelValue":e=>l.subtotal=e,fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),b("td",null,w(l.number),1)])))),256))])])]),b("div",pl,[b("table",null,[b("tbody",null,[b("tr",null,[b("td",null,w(i.$t("买家问题描述"))+":",1),b("td",null,w(El.value.description),1)]),b("tr",null,[b("td",null,w(i.$t("服务类型"))+":",1),b("td",null,w(El.value.aftersales_type_name),1)]),b("tr",null,[b("td",null,w(i.$t("退款金额"))+":",1),b("td",null,[y(Rl,{modelValue:El.value.refund_amount,"onUpdate:modelValue":o[6]||(o[6]=l=>El.value.refund_amount=l),showText:!1},null,8,["modelValue"])])]),b("tr",null,[b("td",null,w(i.$t("售后类型"))+":",1),b("td",null,w(El.value.aftersale_reason),1)]),4===El.value.status?(g(),f("tr",vl,[b("td",null,w(i.$t("退货地址"))+":",1),b("td",null,w(El.value.return_address),1)])):j("",!0),b("tr",null,[b("td",null,w(i.$t("申请图片"))+":",1),b("td",null,[b("div",_l,[(g(!0),f(k,null,U(El.value.pics,(l=>(g(),V(zl,{src:("imageFormat"in i?i.imageFormat:q(E))(l.pic_thumb),fit:"cover",style:{width:"80px",height:"80px"},"preview-src-list":[("imageFormat"in i?i.imageFormat:q(E))(l.pic_url)],"initial-index":0},null,8,["src","preview-src-list"])))),256))])])]),El.value.refund?(g(),f(k,{key:1},[El.value.refund.is_online>0?(g(),f("tr",fl,[b("td",null,w(i.$t("线上退款金额"))+":",1),b("td",null,[y(Rl,{modelValue:El.value.refund.online_balance,"onUpdate:modelValue":o[7]||(o[7]=l=>El.value.refund.online_balance=l),showText:!1},null,8,["modelValue"])])])):j("",!0),El.value.refund.is_offline>0?(g(),f("tr",gl,[b("td",null,w(i.$t("线下退款金额"))+":",1),b("td",null,[y(Rl,{modelValue:El.value.refund.offline_balance,"onUpdate:modelValue":o[8]||(o[8]=l=>El.value.refund.offline_balance=l),showText:!1},null,8,["modelValue"])])])):j("",!0),El.value.refund.is_receive>0?(g(),f("tr",yl,[b("td",null,w(i.$t("余额退款金额"))+":",1),b("td",null,[y(Rl,{modelValue:El.value.refund.refund_balance,"onUpdate:modelValue":o[9]||(o[9]=l=>El.value.refund.refund_balance=l),showText:!1},null,8,["modelValue"])])])):j("",!0)],64)):j("",!0)])])]),b("div",bl,[b("table",null,[b("thead",hl,[b("tr",null,[b("th",jl,w(i.$t("发言人")),1),b("th",Vl,w(i.$t("时间")),1),b("th",$l,w(i.$t("信息")),1)])]),b("tbody",null,[(g(!0),f(k,null,U(El.value.aftersales_log,(l=>(g(),f("tr",null,[b("td",null,w(l.user_name?l.user_name:l.admin_name),1),b("td",null,w(l.add_time),1),b("td",null,[b("div",xl,[b("div",null,w(l.log_info),1),(g(!0),f(k,null,U(l.return_pic,(l=>(g(),V(zl,{src:("imageFormat"in i?i.imageFormat:q(E))(l.pic_url),fit:"cover",class:"bt-img",loading:"lazy",style:{transition:"opacity 0.2s linear"},"preview-src-list":[("imageFormat"in i?i.imageFormat:q(E))(l.pic_url)],"initial-index":0},null,8,["src","preview-src-list"])))),256))])])])))),256))])])])]))])]),y(Sl),y(Jl,{modelValue:Fl.value,"onUpdate:modelValue":o[10]||(o[10]=l=>Fl.value=l)},{default:$((()=>[b("div",kl,[y(zl,{src:("imageFormat"in i?i.imageFormat:q(E))(Ul.value),alt:"",fit:"cover"},null,8,["src"])])])),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-cc1042fe"]]);export{Ul as default};
