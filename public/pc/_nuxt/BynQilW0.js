import{a as e,b as a}from"./CTzMDe2j.js";import{e as t,f as s,aj as r,z as u,r as d,c as i,o,v as c,a4 as l,B as p,n,_ as y}from"./BLNaUqdG.js";import{b}from"./Bp2G0jMz.js";const m=y(t({__name:"Buy",props:{id:Number,number:{type:Number},skuId:{type:Number},extraAttrIds:{type:String,default:""},disabled:{type:Boolean,default:!1},isQuick:{type:Boolean,default:!1},productType:{type:String,default:"product"},skuItem:{type:Array}},emits:["callback"],setup(t,{emit:y}){const m=b(),f=s(),k=r(),_=t,{t:v}=u(),I=y,h=d(!1),x=async()=>{try{if(_.disabled)return;if(h.value)return;h.value=!0;let t={};const s={id:_.id??0,number:_.number,sku_id:_.skuId,is_quick:_.isQuick?1:0};if(_.extraAttrIds&&(s.extra_attr_ids=_.extraAttrIds),p(),"product"==_.productType?t=await e(s):"exchange"==_.productType&&(t=await a(s)),1==_.isQuick){if(1===f.close_order)return n.error(v("商城已关闭下单"));k.push({path:"/order/check",query:{flow_type:t.flow_type}})}else m.changeCartList(),n.success(v("加入购物车成功")),I("callback")}catch(t){n.error(t.message)}finally{h.value=!1}};return(e,a)=>(o(),i("div",{class:c("buy "+(1==t.disabled?"disabled":"")),onClick:x},[l(e.$slots,"default",{},void 0,!0)],2))}}),[["__scopeId","data-v-b92abd12"]]);export{m as B};
