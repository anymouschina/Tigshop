import{b as s}from"./kUOzVTvd.js";import{_ as e}from"./9TMjRzGO.js";import{_ as a}from"./CScYj7Fy.js";import{_ as t}from"./zM3V5R1F.js";import{v as o}from"./C8qdh5cF.js";import{e as i,r as l,g as r,aj as n,z as c,y as m,c as p,o as d,b as u,a as _,aa as y,t as j,i as v,F as f,l as h,h as g,m as k,d as $,k as b,n as w,_ as x}from"./BLNaUqdG.js";import{g as V,a as S}from"./CPIgkIKv.js";import"./CdUPjuAS.js";import"./DGSQZaL6.js";import"./DlIXSNl1.js";import"./D-E-9YUO.js";import"./Bp2G0jMz.js";import"./CK-rvtuG.js";import"./C8QNSlsX.js";import"./BWAJcOoD.js";import"./losdC6Ud.js";import"./DmeNR82d.js";import"./BwRzfsZt.js";import"./D_Dr4eZ1.js";import"./BucM0pco.js";import"./rSOsbbvW.js";import"./DgmxjSXK.js";import"./BX08AvzU.js";import"./CxZS6lgh.js";import"./DIIF5iVx.js";/* empty css        */import"./C8IqyEYy.js";import"./ClnUiH43.js";import"./CQcoTD7x.js";import"./D5ZJ33IS.js";import"./DSwxsogY.js";import"./DxiXPFL-.js";const q={class:"container coupon-list"},z={class:"title"},C={class:"com-pc-title"},F={class:"coupon-card-list"},R=["onClick"],U={class:"left-card"},W={key:1,class:"coupon_discount"},H={class:"name"},I={key:0,class:"time"},J={key:1,class:"time"},K={key:2,class:"time"},L={key:3,class:"name desc"},M={class:"right-card"},N={class:"text"},O={key:1,class:"no-result"},P={key:0},Q=x(i({__name:"List",setup(i){const x=l([]),Q=l(!0),T=l(0),X=r({page:1,is_show:1,shop_id:-1}),Y=n(),Z=async()=>{Q.value=!0;try{Y.currentRoute.value.query.shop_id&&(X.shop_id=Number(Y.currentRoute.value.query.shop_id));const s=await V({...X});T.value=s.total,x.value=s.filter_result}catch(s){w.error(s.message)}finally{Q.value=!1}},{t:A}=c();m((()=>{Z()}));const B=(s,e,a)=>A(0===e?1===s?"已领取":"马上领":0===s?"马上领":a>=e?"已领取":"再次领取");return(i,l)=>{const r=s,n=e,c=a,m=t,V=o;return d(),p(f,null,[u(r),u(n,{title:i.$t("集券中心")},null,8,["title"]),_("div",q,[_("div",z,[l[0]||(l[0]=_("div",{class:"title-image-left"},null,-1)),_("div",C,j(i.$t("集券中心")),1),l[1]||(l[1]=_("div",{class:"title-image-right"},null,-1))]),y((d(),p("div",F,[v(T)>0?(d(!0),p(f,{key:0},h(v(x),(s=>(d(),p("div",{class:"card",onClick:e=>(async s=>{if(B(s.is_receive,s.limit_num,s.receive_num)!==A("已领取"))try{const e=await S({coupon_id:s.coupon_id});w.success(e.message),await Z()}catch(e){w.error(e.message)}finally{Q.value=!1}})(s)},[_("div",U,[_("div",null,[1==s.coupon_type?(d(),k(c,{key:0,modelValue:s.coupon_money,"onUpdate:modelValue":e=>s.coupon_money=e,showText:!1,currencyStyle:{fontSize:"24px",fontFamily:"Verdana, serif",lineHeight:"40px"},fontStyle:{fontSize:"40px",fontWeight:"bold"},class:"card-price"},null,8,["modelValue","onUpdate:modelValue"])):(d(),p("div",W,[$(j(s.coupon_discount),1),_("span",null,j(i.$t("折")),1)]))]),_("div",H,j(s.coupon_name?"【"+s.coupon_name+"】":""),1),1==s.send_type?(d(),p("div",I,j(s.use_start_date)+" "+j(i.$t("至"))+" "+j(s.use_end_date),1)):g("",!0),0==s.send_type&&s.delay_day>0?(d(),p("div",J,j(v(b)()?i.$t("领券{0}天后生效，有效期{1}天",[s.delay_day,s.use_day]):`领券${s.delay_day}天后生效，有效期${s.use_day}天`),1)):g("",!0),0==s.send_type&&0==s.delay_day?(d(),p("div",K,j(v(b)()?i.$t("领券当日起{0}天内可用",[s.use_day]):`领券当日起${s.use_day}天内可用`),1)):g("",!0),s.coupon_desc?(d(),p("view",L,j(s.coupon_desc),1)):g("",!0)]),_("div",M,[l[2]||(l[2]=_("span",{class:"division_line"},null,-1)),_("span",N,j(B(s.is_receive,s.limit_num,s.receive_num)),1)])],8,R)))),256)):(d(),p("div",O,[v(Q)?g("",!0):(d(),p("span",P,j(i.$t("暂无可领取的优惠券"))+"～",1))]))])),[[V,v(Q)]])]),u(m)],64)}}}),[["__scopeId","data-v-e3027e3b"]]);export{Q as default};
