import{E as S}from"./lRlBa-wu.js";import{_ as x}from"./C6cR03M8.js";import{E as B,a as I}from"./CPhr9T1V.js";import{E as M}from"./XomGKeK5.js";import{f as Z,a4 as g,Y as q,a8 as C,s as E,r as y,az as N,o as P,h as U,w as i,b as n,a as v,t as d,d as W,j,av as $,_ as D}from"./DvlzeZYf.js";import{f as L}from"./DII1Wvf5.js";import"./BxwJi-A4.js";import"./CvS5MqkS.js";import"./BB_Ol6Sd.js";import"./C3hftOhu.js";import"./Cq9Fpw4b.js";import"./De9iyrrl.js";import"./B9SirqjL.js";const Y={class:"label"},G={class:"label"},H=Z({__name:"StepTow",props:{step:{},stepModifiers:{},mobileKey:{},mobileKeyModifiers:{}},emits:["update:step","update:mobileKey"],setup(u){const T=g(u,"step"),f=g(u,"mobileKey"),{t:r}=q(),m=C(),c=(t,e,s)=>{e?o.value.tigTips[t]={type:"valid",message:s}:o.value.tigTips[t]={type:"error",message:s}},w=t=>{o.value.tigTips[t]={type:"info",message:b[t]}},h=(t,e,s)=>{if(e){if(e.length>20||e.length<6)return s(new Error(r("密码应为6-20位字符")));if(/\s/.test(e))return s(new Error(r("密码中不允许有空格")));if(/^\d+$/.test(e))return s(new Error(r("密码不能全为数字")));if(/^(?=.*[\d\W]).+$/.test(e))if(/^(?=.*[a-zA-Z0-9]).+$/.test(e))if(/^(?!([a-zA-Z0-9])\1*$).+$/.test(e))s();else return s(new Error(r("密码不能全为相同字符或数字")));else return s(new Error(r("密码不能全为符号")));else return s(new Error(r("密码不能全为字母")))}else return s(new Error(r("密码不能为空")))},V=(t,e,s)=>{if(e){if(e.length>20||e.length<6)return s(new Error(r("密码应为6-20位字符")));if(/\s/.test(e))return s(new Error(r("密码中不允许有空格")));if(/^\d+$/.test(e))return s(new Error(r("密码不能全为数字")));if(/^(?=.*[\d\W]).+$/.test(e))if(/^(?=.*[a-zA-Z0-9]).+$/.test(e))if(/^(?!([a-zA-Z0-9])\1*$).+$/.test(e)){if(e!=o.value.password)return s(new Error(r("两次输入密码不一致")));s()}else return s(new Error(r("密码不能全为相同字符或数字")));else return s(new Error(r("密码不能全为符号")));else return s(new Error(r("密码不能全为字母")))}else return s(new Error(r("密码不能为空")))},b=E({password:r("6-20个大小写英文字母、符号或数字的组合"),password2:r("请输入和上次相同的密码")}),F=E({password:[{validator:h,trigger:"blur",required:!0}],password2:[{validator:V,trigger:"blur",required:!0}]}),l=y(!1),o=y({tigTips:{},password:"",password2:""}),z=N(),A=async()=>{await m.value.validate();try{l.value=!0;const t=await L({mobile_key:f.value,password:o.value.password});$.success(r("重置密码成功")),z.push("/member/login")}catch(t){$.error(t.message),T.value=1,f.value="",o.value.password="",o.value.password2=""}finally{l.value=!1}};return(t,e)=>{const s=S,_=x,p=B,K=M,R=I;return P(),U(R,{ref_key:"formRef",ref:m,"hide-required-asterisk":!0,model:o.value,rules:j(F),"show-message":!1,class:"form-body","label-width":"auto",onValidate:c},{default:i(()=>[n(p,{prop:"password"},{default:i(()=>[v("div",Y,d(t.$t("新密码")),1),n(s,{modelValue:o.value.password,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.password=a),class:"input-border-style","show-password":"",type:"password",onFocus:e[1]||(e[1]=a=>w("password"))},null,8,["modelValue"]),n(_,{info:o.value.tigTips.password},null,8,["info"])]),_:1}),n(p,{prop:"password2"},{default:i(()=>[v("div",G,d(t.$t("确认新密码")),1),n(s,{modelValue:o.value.password2,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.password2=a),class:"input-border-style","show-password":"",type:"password",onFocus:e[3]||(e[3]=a=>w("password2"))},null,8,["modelValue"]),n(_,{info:o.value.tigTips.password2},null,8,["info"])]),_:1}),n(p,{label:"",prop:"first_word"},{default:i(()=>[n(K,{loading:l.value,type:"primary",class:"submit-button",style:{width:"330px"},onClick:A},{default:i(()=>[W(d(t.$t("确 认")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}}),le=D(H,[["__scopeId","data-v-7365e177"]]);export{le as default};
