import{_ as e}from"./9TMjRzGO.js";import{_ as o}from"./BlxdsvOv.js";import{E as a}from"./ClnUiH43.js";import{_ as l}from"./Dev7PMii.js";import{E as s,a as r}from"./Di7_rRxo.js";import{E as i}from"./CK-rvtuG.js";import{_ as t}from"./DGSQZaL6.js";import{_ as d}from"./zM3V5R1F.js";import{e as m,f as u,z as p,r as n,I as c,g as b,c as v,o as _,b as f,a as w,t as g,w as j,m as y,h as V,i as $,d as E,k as h,F as k,cd as q,A as x,ae as C,_ as T}from"./BLNaUqdG.js";import{_ as U}from"./C2YhyD2L.js";import{s as A,u as F}from"./BOgQ02OZ.js";import{M as z}from"./DNPatwbc.js";import"./BucM0pco.js";import"./rSOsbbvW.js";import{u as S}from"./D-E-9YUO.js";import"./DSwxsogY.js";import"./BWAJcOoD.js";import"./losdC6Ud.js";import"./BwRzfsZt.js";import"./CxZS6lgh.js";import"./D_Dr4eZ1.js";import"./BX08AvzU.js";import"./C8QNSlsX.js";import"./DlIXSNl1.js";import"./DxiXPFL-.js";import"./DSXY0Md2.js";import"./DgmxjSXK.js";const Z={class:"full-height-div"},I={class:"register-info"},M={class:"title"},N={class:"label"},R={class:"area-code-input"},J={key:0,class:"area-code-select"},L={class:"label"},O={class:"label"},Q={class:"label"},W={class:"extra",style:{width:"330px"}},Y=T(m({__name:"Register",setup(m){const T=u(),Y=S(),{t:B}=p(),D=n(!1),G=n("86"),H=c(),K=(e,o,a)=>{ae.value.tigTips[e]=o?{type:"valid",message:a}:{type:"error",message:a}},P=e=>{ae.value.tigTips[e]={type:"info",message:X[e]}},X=b({mobile:B("请填写正确的手机号码，以便接收订单通知，找回密码等"),mail:B("请填写正确的邮箱地址，以便接收订单通知，找回密码等"),mobile_code:B("请输入验证码"),password:B("6-20个大小写英文字母、符号或数字的组合")}),ee=b({mobile:[{validator:(e,o,a)=>{const l=T.is_open_mobile_area_code?/^(\+?[1-9]\d{1,14})$/:/^(?:\+?86)?1[3-9]\d{9}$/;return o?l.test(o)?void a():a(new Error(B("格式错误，请输入正确的手机号码"))):a(new Error(B("手机号不能为空")))},trigger:"blur",required:!0}],mail:[{validator:(e,o,a)=>o?/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(o)?void a():a(new Error(B("格式错误，请输入正确的邮箱地址"))):a(new Error(B("邮箱不能为空"))),trigger:"blur",required:!0}],mobile_code:[{validator:(e,o,a)=>o?6!=o.length?a(new Error(B("请输入6位验证码"))):void a():a(new Error(B("验证码不能为空"))),trigger:"blur",required:!0}],password:[{validator:(e,o,a)=>o?o.length>20||o.length<6?a(new Error(B("密码应为6-20位字符"))):/\s/.test(o)?a(new Error(B("密码中不允许有空格"))):/^\d+$/.test(o)?a(new Error(B("密码不能全为数字"))):/^(?=.*[\d\W]).+$/.test(o)?/^(?=.*[a-zA-Z0-9]).+$/.test(o)?/^(?!([a-zA-Z0-9])\1*$).+$/.test(o)?void a():a(new Error(B("密码不能全为相同字符或数字"))):a(new Error(B("密码不能全为符号"))):a(new Error(B("密码不能全为字母"))):a(new Error(B("密码不能为空"))),trigger:"blur",required:!0}]}),oe=n(!1),ae=n({tigTips:{},area_code:""}),le=async()=>{await H.value.validate();try{oe.value=!0,ae.value.mobile=T.is_open_mobile_area_code?G.value+ae.value.mobile:ae.value.mobile;const e=await F(ae.value);q.success(B("注册成功"));x("accessToken").value=e.token,Y.userInfoLoaded=!1,C("/member/")}catch(e){q.error(e.message)}finally{oe.value=!1}},se=e=>{q.error(e)};return(m,u)=>{const p=e,n=o,c=a,b=l,q=s,x=i,C=t,F=r,S=d;return _(),v(k,null,[f(p,{title:"注册"}),f(n,{type:"register"}),w("div",Z,[w("div",I,[w("div",M,g(m.$t("会员注册")),1),f(F,{ref_key:"formRef",ref:H,"hide-required-asterisk":!0,model:ae.value,rules:$(ee),"show-message":!1,class:"form-body","label-width":"auto",onValidate:K},{default:j((()=>["mobile"!==ae.value.regist_type&&ae.value.regist_type?(_(),y(q,{key:1,prop:"mail"},{default:j((()=>[w("div",L,g(m.$t("邮箱")),1),f(c,{modelValue:ae.value.mail,"onUpdate:modelValue":u[3]||(u[3]=e=>ae.value.mail=e),class:"input-border-style",onFocus:u[4]||(u[4]=e=>P("mail"))},null,8,["modelValue"]),f(b,{info:ae.value.tigTips.mail},null,8,["info"])])),_:1})):(_(),y(q,{key:0,prop:"mobile"},{default:j((()=>[w("div",N,g(m.$t("手机号")),1),w("div",R,[f(c,{modelValue:ae.value.mobile,"onUpdate:modelValue":u[1]||(u[1]=e=>ae.value.mobile=e),class:"input-border-style",onFocus:u[2]||(u[2]=e=>P("mobile"))},{prefix:j((()=>[$(T).is_open_mobile_area_code?(_(),v("div",J,[f(U,{modelValue:G.value,"onUpdate:modelValue":u[0]||(u[0]=e=>G.value=e)},null,8,["modelValue"])])):V("",!0)])),_:1},8,["modelValue"])]),f(b,{info:ae.value.tigTips.mobile},null,8,["info"])])),_:1})),V("",!0),f(q,{prop:"mobile_code"},{default:j((()=>[w("div",O,g(m.$t("验证码")),1),f(c,{modelValue:ae.value.mobile_code,"onUpdate:modelValue":u[9]||(u[9]=e=>ae.value.mobile_code=e),class:"input-border-style",onFocus:u[10]||(u[10]=e=>P("mobile_code"))},{suffix:j((()=>[f($(z),{class:"mobile-code-text",mobile:$(T).is_open_mobile_area_code?G.value+ae.value.mobile:ae.value.mobile,mobileCode:ae.value.mobile_code,"onUpdate:mobileCode":u[7]||(u[7]=e=>ae.value.mobile_code=e),mobileCodeSended:D.value,"onUpdate:mobileCodeSended":u[8]||(u[8]=e=>D.value=e),requestApi:$(A),onMobileErrorCallback:se},null,8,["mobile","mobileCode","mobileCodeSended","requestApi"])])),_:1},8,["modelValue"]),f(b,{info:ae.value.tigTips.mobile_code},null,8,["info"])])),_:1}),f(q,{prop:"password"},{default:j((()=>[w("div",Q,g(m.$t("设置密码")),1),f(c,{modelValue:ae.value.password,"onUpdate:modelValue":u[11]||(u[11]=e=>ae.value.password=e),class:"input-border-style","show-password":"",type:"password",onFocus:u[12]||(u[12]=e=>P("password"))},null,8,["modelValue"]),f(b,{info:ae.value.tigTips.password},null,8,["info"])])),_:1}),w("div",W,[E(g(m.$t("点击注册，表示您同意"))+" ",1),f(C,{class:"font-color",target:"_blank",to:"/article/issue/info?article_sn=zcxy"},{default:j((()=>[E(" 《"+g($(h)()?m.$t("{0}注册协议！",[$(T).shopName]):`${$(T).shopName}注册协议！`)+"》 ",1)])),_:1})]),f(q,{label:"",prop:"first_word"},{default:j((()=>[f(x,{loading:oe.value,type:"primary",class:"submit-button",style:{width:"330px"},onClick:le},{default:j((()=>[E(g(m.$t("同意协议并注册")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules"])])]),f(S,{bg:"white",type:0})],64)}}}),[["__scopeId","data-v-25bf630e"]]);export{Y as default};
