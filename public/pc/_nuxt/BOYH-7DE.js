import{b as l}from"./Bx_3tXOW.js";import{_ as e}from"./DIcT5qlW.js";import{_ as a}from"./CFmHvMYA.js";import{_ as t}from"./BoBe_m7P.js";import{E as s}from"./OZUBBuO3.js";import{E as r}from"./duVALuQ5.js";import{E as u,a as o}from"./DKvZ9Rd6.js";import{e as i,z as n,r as d,aj as c,y as m,n as p,I as v,g as f,c as y,o as g,b as h,a as b,h as j,aa as V,t as $,m as x,w as k,d as w,F as _,l as U,p as F,E as N,i as T,j as I,q as S,ai as L,ae as q,_ as A}from"./vO8z_6wc.js";import{_ as B}from"./DRy-t1KR.js";import{_ as E}from"./4BWvF7DS.js";import{_ as P}from"./B6kpiin_.js";import{E as z}from"./B9ErrXst.js";import{v as C}from"./CxvT33_f.js";import"./YLitFIRx.js";import{a as O,u as R,c as D}from"./DhXoD276.js";import{U as G}from"./CyA81kDU.js";import"./B3kMr2Om.js";import"./BG07ctRk.js";import"./Ctuj9lAE.js";import"./ExFuuhw5.js";import"./6_reTNGa.js";import"./BwRzfsZt.js";import"./CdIa5lAL.js";import"./CKVP4sCQ.js";import"./DqoL2U0I.js";import"./D_Dr4eZ1.js";import"./123WnbAt.js";import"./C_yTnQv7.js";import"./DgmxjSXK.js";import"./VsleDggW.js";import"./B0jPhJeY.js";import"./C0xcqOw0.js";/* empty css        */import"./pBde3eXe.js";import"./DEtxbcwL.js";import"./y2YKyhRU.js";import"./C8tVKSc2.js";import"./D0li9aqr.js";const J={class:"container flex"},K={class:"menu"},M={class:"info-row"},Q={class:"title-or-tabs"},W={class:"tag-and-input"},X={class:"tig-tabs"},Y={key:0,class:"title-or-tabs"},Z={key:1,class:"log-return-content"},H={class:"button-col"},ll={class:"tig-steps"},el={style:{"font-weight":"600"}},al={key:0,class:"file-card"},tl={class:"info-card"},sl={class:"table-header"},rl={class:"header-cell"},ul={class:"header-cell",style:{width:"60px"}},ol={class:"header-cell",style:{width:"60px"}},il={class:"header-cell",style:{width:"60px"}},nl={class:"header-cell",style:{width:"60px"}},dl={class:"text-ellipsis"},cl={class:"name"},ml={class:"value"},pl={key:0},vl={class:"info-card"},fl={key:0},yl={class:"application-picture"},gl={key:0},hl={key:1},bl={key:2},jl={class:"info-card"},Vl={class:"table-header"},$l={class:"header-cell",style:{width:"120px"}},xl={class:"header-cell",style:{width:"160px"}},kl={class:"header-cell"},wl={class:"bt-image"},_l={key:2,class:"log-return-content"},Ul={class:"image"},Fl=A(i({__name:"LogInfo",setup(i){const{t:A}=n(),Fl=d(""),Nl=d(!1),Tl=d([]),Il=c(),Sl=d({stepStatus:{},picsList:[],returnPic:[],pics:[]}),Ll=d(!0);m((()=>{ql()}));const ql=async()=>{var l;try{Ll.value=!0;const e=await O({id:Il.currentRoute.value.query.id});Object.assign(Sl.value,e),Tl.value=e.aftersalesItems?e.aftersalesItems:[],null==(l=Tl.value)||l.forEach((l=>{l.subtotal=l.quantity*l.price}))}catch(e){p.error(e.message)}finally{Ll.value=!1}},Al=v(),Bl=async()=>{await Al.value.validate();try{await R({id:Sl.value.aftersaleId,...Sl.value});p.success(A("提交成功")),await Al.value.resetFields(),await ql()}catch(l){p.error(l.message)}},El=f([{value:"退/换货申请",url:"/member/return/list",size:0},{value:"申请记录",url:"/member/return/log",size:0}]);return(i,n)=>{const d=l,c=e,m=a,v=t,f=s,O=r,R=u,Il=o,ql=N,Pl=B,zl=E,Cl=P,Ol=z,Rl=C;return g(),y(_,null,[h(d),h(c,{title:"申请详情"}),b("div",J,[b("div",K,[h(m)]),b("div",M,[b("div",Q,[b("div",W,[b("div",X,[h(v,{menuList:El},null,8,["menuList"])])])]),Sl.value.returnGoodsTip?(g(),y("div",Y,[b("div",null,$(Sl.value.returnGoodsTip),1)])):j("",!0),Ll.value?V((g(),y("div",_l,null,512)),[[Rl,Ll.value]]):(g(),y("div",Z,[b("div",H,[Sl.value.canCancel?(g(),x(f,{key:0,onClick:n[0]||(n[0]=l=>(async l=>{L.confirm({title:A("确认删要撤销申请吗"),cancelText:A("取消"),okText:A("确定"),maskClosable:!0,centered:!0,onOk:async()=>{try{await D({aftersaleId:l}),p.success(A("撤销成功")),q("/member/return/log")}catch(e){p.error(e.message)}}})})(Number(Sl.value.aftersaleId)))},{default:k((()=>[w($(i.$t("撤销")),1)])),_:1})):j("",!0)]),b("div",ll,[(g(!0),y(_,null,U(Sl.value.stepStatus.steps,((l,e)=>{var a,t,s,r,u,o;return g(),y(_,null,[b("div",{style:F({color:l.active?"var(--general)":"#c4c4c4",border:l.active?"4px solid var(--general)":"4px solid #eee"}),class:"steps-card"},[b("div",el,$(e+1),1),b("div",{style:F({color:l.active?"var(--general)":"#333"}),class:"card-text"},[b("div",null,$(l.title),1),b("div",null,$(l.description),1)],4)],4),e!=Number(((null==(s=null==(t=null==(a=Sl.value)?void 0:a.stepStatus)?void 0:t.steps)?void 0:s.length)?null==(o=null==(u=null==(r=Sl.value)?void 0:r.stepStatus)?void 0:u.steps)?void 0:o.length:0)-1)?(g(),y("div",{key:0,style:F({backgroundColor:Sl.value.stepStatus.steps[e+1].active?"var(--general)":"#eee"}),class:"steps-line"},null,4)):j("",!0)],64)})),256))]),6!=Sl.value.status?(g(),y("div",al,[7!=Sl.value.status?(g(),x(Il,{key:0,ref_key:"formRef",ref:Al,"label-width":100,model:Sl.value,class:"form-body","label-suffix":"："},{default:k((()=>[h(R,{label:i.$t("问题补充"),prop:"logInfo"},{default:k((()=>[h(O,{modelValue:Sl.value.logInfo,"onUpdate:modelValue":n[1]||(n[1]=l=>Sl.value.logInfo=l),row:4,clearable:"",placeholder:i.$t("请输入问题补充"),type:"textarea"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),4===Sl.value.status?(g(),y(_,{key:0},[h(R,{label:i.$t("回寄地址"),prop:"returnAddress"},{default:k((()=>[h(O,{modelValue:Sl.value.returnAddress,"onUpdate:modelValue":n[2]||(n[2]=l=>Sl.value.returnAddress=l),readonly:"",clearable:"",type:"textarea"},null,8,["modelValue"])])),_:1},8,["label"]),h(R,{rules:[{required:!0,message:i.$t("快递公司不能为空!")}],label:i.$t("快递公司"),prop:"logisticsName"},{default:k((()=>[h(O,{modelValue:Sl.value.logisticsName,"onUpdate:modelValue":n[3]||(n[3]=l=>Sl.value.logisticsName=l),clearable:"",placeholder:i.$t("请输入快递公司")},null,8,["modelValue","placeholder"])])),_:1},8,["rules","label"]),h(R,{rules:[{required:!0,message:i.$t("快递单号不能为空!")}],label:i.$t("快递单号"),prop:"trackingNo"},{default:k((()=>[h(O,{modelValue:Sl.value.trackingNo,"onUpdate:modelValue":n[4]||(n[4]=l=>Sl.value.trackingNo=l),clearable:"",placeholder:i.$t("请输入快递单号"),type:"textarea"},null,8,["modelValue","placeholder"])])),_:1},8,["rules","label"])],64)):j("",!0),h(R,{label:i.$t("上传文件"),prop:"returnPic"},{default:k((()=>[h(G,{uploadList:Sl.value.returnPic,"onUpdate:uploadList":n[5]||(n[5]=l=>Sl.value.returnPic=l),fileTypes:["jpeg","png"],limit:5},null,8,["uploadList"])])),_:1},8,["label"]),h(R,{label:""},{default:k((()=>[h(f,{type:"primary",onClick:Bl},{default:k((()=>[w($(i.$t("提交")),1)])),_:1})])),_:1})])),_:1},8,["model"])):j("",!0)])):j("",!0),b("div",tl,[b("table",null,[b("thead",sl,[b("tr",null,[b("th",rl,$(i.$t("商品名称")),1),b("th",ul,$(i.$t("商品价格")),1),b("th",ol,$(i.$t("购买数量")),1),b("th",il,$(i.$t("小计")),1),b("th",nl,$(i.$t("退/换数量")),1)])]),b("tbody",null,[(g(!0),y(_,null,U(Tl.value,(l=>(g(),y("tr",null,[b("td",null,[h(Pl,{title:l.productName,to:T(S)({path:"product",id:l.itemId,sn:l.productSn}),class:"nuxt",target:"_blank"},{default:k((()=>[h(ql,{src:("imageFormat"in i?i.imageFormat:T(I))(l.picThumb),class:"pro_pic",loading:"lazy",style:{transition:"opacity 0.2s linear","flex-shrink":"0"}},null,8,["src"]),b("div",null,[b("div",dl,[b("ul",null,[b("li",null,$(i.$t("货号"))+"："+$(l.productSn),1),b("li",null,$(l.productName),1),b("li",null,[(g(!0),y(_,null,U(l.skuData,((e,a)=>{var t;return g(),y(_,null,[b("span",cl,$(e.name)+"：",1),b("span",ml,$(e.value),1),a<(null==(t=l.skuData)?void 0:t.length)-1?(g(),y("span",pl,"；")):j("",!0)],64)})),256))])])])])])),_:2},1032,["title","to"])]),b("td",null,[h(zl,{modelValue:l.price,"onUpdate:modelValue":e=>l.price=e,fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),b("td",null,$(l.quantity),1),b("td",null,[h(zl,{modelValue:l.subtotal,"onUpdate:modelValue":e=>l.subtotal=e,fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),b("td",null,$(l.number),1)])))),256))])])]),b("div",vl,[b("table",null,[b("tbody",null,[b("tr",null,[b("td",null,$(i.$t("买家问题描述"))+":",1),b("td",null,$(Sl.value.description),1)]),b("tr",null,[b("td",null,$(i.$t("服务类型"))+":",1),b("td",null,$(Sl.value.aftersalesTypeName),1)]),b("tr",null,[b("td",null,$(i.$t("退款金额"))+":",1),b("td",null,[h(zl,{modelValue:Sl.value.refundAmount,"onUpdate:modelValue":n[6]||(n[6]=l=>Sl.value.refundAmount=l),showText:!1},null,8,["modelValue"])])]),b("tr",null,[b("td",null,$(i.$t("售后类型"))+":",1),b("td",null,$(Sl.value.aftersaleReason),1)]),4===Sl.value.status?(g(),y("tr",fl,[b("td",null,$(i.$t("退货地址"))+":",1),b("td",null,$(Sl.value.returnAddress),1)])):j("",!0),b("tr",null,[b("td",null,$(i.$t("申请图片"))+":",1),b("td",null,[b("div",yl,[(g(!0),y(_,null,U(Sl.value.pics,(l=>(g(),x(ql,{src:("imageFormat"in i?i.imageFormat:T(I))(l.picThumb),fit:"cover",style:{width:"80px",height:"80px"},"preview-src-list":[("imageFormat"in i?i.imageFormat:T(I))(l.picUrl)],"initial-index":0},null,8,["src","preview-src-list"])))),256))])])]),Sl.value.refund?(g(),y(_,{key:1},[Sl.value.refund.isOnline>0?(g(),y("tr",gl,[b("td",null,$(i.$t("线上退款金额"))+":",1),b("td",null,[h(zl,{modelValue:Sl.value.refund.onlineBalance,"onUpdate:modelValue":n[7]||(n[7]=l=>Sl.value.refund.onlineBalance=l),showText:!1},null,8,["modelValue"])])])):j("",!0),Sl.value.refund.isOffline>0?(g(),y("tr",hl,[b("td",null,$(i.$t("线下退款金额"))+":",1),b("td",null,[h(zl,{modelValue:Sl.value.refund.offlineBalance,"onUpdate:modelValue":n[8]||(n[8]=l=>Sl.value.refund.offlineBalance=l),showText:!1},null,8,["modelValue"])])])):j("",!0),Sl.value.refund.isReceive>0?(g(),y("tr",bl,[b("td",null,$(i.$t("余额退款金额"))+":",1),b("td",null,[h(zl,{modelValue:Sl.value.refund.refundBalance,"onUpdate:modelValue":n[9]||(n[9]=l=>Sl.value.refund.refundBalance=l),showText:!1},null,8,["modelValue"])])])):j("",!0)],64)):j("",!0)])])]),b("div",jl,[b("table",null,[b("thead",Vl,[b("tr",null,[b("th",$l,$(i.$t("发言人")),1),b("th",xl,$(i.$t("时间")),1),b("th",kl,$(i.$t("信息")),1)])]),b("tbody",null,[(g(!0),y(_,null,U(Sl.value.aftersalesLog,(l=>(g(),y("tr",null,[b("td",null,$(l.userName?l.userName:l.adminName),1),b("td",null,$(l.addTime),1),b("td",null,[b("div",wl,[b("div",null,$(l.logInfo),1),(g(!0),y(_,null,U(l.returnPic,(l=>(g(),x(ql,{src:("imageFormat"in i?i.imageFormat:T(I))(l.picUrl),fit:"cover",class:"bt-img",loading:"lazy",style:{transition:"opacity 0.2s linear"},"preview-src-list":[("imageFormat"in i?i.imageFormat:T(I))(l.picUrl)],"initial-index":0},null,8,["src","preview-src-list"])))),256))])])])))),256))])])])]))])]),h(Cl),h(Ol,{modelValue:Nl.value,"onUpdate:modelValue":n[10]||(n[10]=l=>Nl.value=l)},{default:k((()=>[b("div",Ul,[h(ql,{src:("imageFormat"in i?i.imageFormat:T(I))(Fl.value),alt:"",fit:"cover"},null,8,["src"])])])),_:1},8,["modelValue"])],64)}}}),[["__scopeId","data-v-0ef5fe83"]]);export{Fl as default};
