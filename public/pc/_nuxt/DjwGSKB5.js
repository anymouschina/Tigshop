import{_ as e}from"./DRy-t1KR.js";import{a,E as l}from"./DKvZ9Rd6.js";import{_ as o}from"./4BWvF7DS.js";import{a as t,E as s}from"./6_reTNGa.js";import{E as u}from"./duVALuQ5.js";import{E as p}from"./OZUBBuO3.js";import{E as n}from"./B9ErrXst.js";import{at as c,e as m,f as d,r,I as i,z as v,c as y,o as b,F as f,b as $,a as h,w as _,m as g,h as k,d as T,t as V,p as A,i as j,a4 as O,n as w,_ as C}from"./vO8z_6wc.js";/* empty css        */import"./YLitFIRx.js";import{g as N}from"./BKztAS8l.js";const x=e=>c({url:"order/check/index",method:"post",data:e}),P=e=>c({url:"order/check/update",method:"post",data:e}),U=e=>c({url:"order/check/updateCoupon",method:"post",data:e}),I=e=>c({url:"order/check/submit",method:"post",data:e}),B=e=>c({url:"order/check/getInvoice",method:"get",params:e}),S=()=>c({url:"order/check/getAvailablePaymentType",method:"get"}),F=e=>c({url:"order/check/getStoreShippingType",method:"get",params:e}),R={class:"audit-status"},q={class:"message"},E={class:"message"},D={class:"extra"},z={class:"message"},J={class:"message"},K={class:"message"},M={class:"message"},Z={class:"message"},G={class:"message"},H={class:"message"},L={class:"message"},Q={class:"message"},W={class:"extra"},X={class:"message"},Y={class:"message"},ee={class:"message"},ae={class:"message"},le={class:"message"},oe={class:"message"},te={class:"message"},se={class:"extra"},ue={class:"message"},pe={class:"message"},ne={key:0,class:"audit-status"},ce={class:"message blue"},me={key:0,class:"extra"},de={key:1,class:"extra"},re={key:2,class:"extra"},ie={class:"audit-status"},ve={class:"var(--price)"},ye={class:"audit-status"},be={class:"var(--price)"},fe={class:"dialog-footer"},$e=C(m({__name:"Info",props:{params:{type:Object,default:{}}},emits:["loadFilter","callback","changeType"],setup(m,{emit:C}){const x=m,P=d(),U=e=>{switch(e){case 0:return{color:"#f58b49"};case 1:return{color:"green"};case 2:return{color:"red"};default:return{}}},I=r(!0),S=i(),F=i(),$e=i(),he=r(!1),_e=r({orderId:x.params.orderId,orderSn:x.params.orderSn,amount:x.params.amount,totalAmount:x.params.totalAmount}),ge=r({}),ke=r({}),Te=r({}),Ve=r({}),Ae=async()=>{he.value=!0,S.value&&await S.value.resetFields(),"check"===x.params.type&&await je(),"apply"!=x.params.type&&"check"!=x.params.type&&await Oe(),"check"==x.params.type&&(Object.assign(_e.value,x.params.invoiceData),Object.assign(ge.value,x.params.invoiceData),Object.assign(ke.value,x.params.invoiceData),Object.assign(Te.value,x.params.invoiceData)),await Ce()},je=async()=>{try{const e=await B({..._e.value});let a={companyCode:"",companyName:"",companyAddress:"",companyPhone:"",companyBank:"",companyAccount:"",invoiceContent:"",mobile:"",email:""};if(e)Object.assign(_e.value,e),Object.assign(ge.value,e),Object.assign(ke.value,e),Object.assign(Te.value,e);else if(1===_e.value.titleType){let e={companyName:x.params.address.consignee,mobile:x.params.address.mobile,email:x.params.address.email};Object.assign(_e.value,e),Object.assign(ge.value,e),Object.assign(ke.value,e),Object.assign(Te.value,e)}else Object.assign(_e.value,a),Object.assign(ge.value,a),Object.assign(ke.value,a),Object.assign(Te.value,a);_e.value.amount=x.params.amount}catch(e){w.error(e.message)}},Oe=async()=>{try{I.value=!0;const a=await(e={id:x.params.orderId},c({url:"user/orderInvoice/detail",method:"get",params:e}));Object.assign(_e.value,a),Object.assign(ge.value,a),Object.assign(ke.value,a),Object.assign(Te.value,a)}catch(a){w.error(a.message)}finally{I.value=!1}var e},we=r(!1),Ce=async()=>{try{const e=await N();e?(we.value=!0,Object.assign(Ve.value,e)):we.value=!1}catch(e){w.error(e.message)}finally{I.value=!1}},Ne=C,xe=e=>{"check"==x.params.type&&(Ne("changeType",{type:e,value:"invoiceType"==e?_e.value.invoiceType:_e.value.titleType}),"invoiceType"==e&&2==_e.value.invoiceType&&Ce())},Pe=()=>{Ne("callback",{}),he.value=!1},{t:Ue}=v(),Ie=async()=>{S.value&&await S.value.validate();try{I.value=!0;let l={id:x.params.orderId,invoiceType:_e.value.invoiceType,titleType:_e.value.titleType,mobile:_e.value.mobile,email:_e.value.email,amount:_e.value.amount};if(l.invoiceContent=_e.value.invoiceContent,1===_e.value.invoiceType&&1===_e.value.titleType?(S.value&&await F.value.validate(),l.companyCode="",l.companyName=ke.value.companyName,l.companyAddress="",l.companyPhone="",l.companyBank="",l.companyAccount=""):1===_e.value.invoiceType&&2===_e.value.titleType?(S.value&&await $e.value.validate(),l.companyCode=Te.value.companyCode,l.companyName=Te.value.companyName,l.companyAddress=Te.value.companyAddress,l.companyPhone=Te.value.companyPhone,l.companyBank=Te.value.companyBank,l.companyAccount=Te.value.companyAccount):2===_e.value.invoiceType&&(l.companyCode=Ve.value.companyCode,l.companyName=Ve.value.companyName,l.companyAddress=Ve.value.companyAddress,l.companyPhone=Ve.value.companyPhone,l.companyBank=Ve.value.companyBank,l.companyAccount=Ve.value.companyAccount),"check"!=x.params.type){await(e=l,a="apply"===x.params.type?"create":"update",c({url:"user/orderInvoice/"+a,method:"post",data:e}));await S.value.resetFields(),w.success(Ue("操作成功")),he.value=!1,Ne("loadFilter")}else delete l.id,he.value=!1,Ne("callback",l)}catch(l){w.error(l.message)}finally{I.value=!1}var e,a};return(c,d)=>{const r=e,i=l,v=o,w=a,C=s,N=t,x=u,I=p,B=n;return b(),y(f,null,[$(B,{modelValue:he.value,"onUpdate:modelValue":d[17]||(d[17]=e=>he.value=e),title:c.$t("发票申请"),width:"800"},{footer:_((()=>[h("div",fe,["reapply"===m.params.type||"apply"===m.params.type||"check"===m.params.type?(b(),g(I,{key:0,plain:"",onClick:Pe},{default:_((()=>[T(V(c.$t("暂不开票")),1)])),_:1})):k("",!0),"reapply"===m.params.type||"apply"===m.params.type||"check"===m.params.type?(b(),g(I,{key:1,disabled:2===_e.value.invoiceType&&!we.value,type:"primary",onClick:Ie},{default:_((()=>[T(V(c.$t("提交开票申请")),1)])),_:1},8,["disabled"])):k("",!0)])])),default:_((()=>["info"===m.params.type?(b(),g(w,{key:0,"label-width":"auto",model:ge.value,class:"form-body","label-suffix":"："},{default:_((()=>[h("div",R,[T(V(c.$t("审核状态"))+"： ",1),h("span",{style:A(U(ge.value.status))},V(ge.value.statusName),5),d[18]||(d[18]=h("br",null,null,-1)),h("span",null,V(ge.value.applyReply),1)]),"check"!=m.params.type?(b(),g(i,{key:0,label:c.$t("订单号"),prop:"orderSn"},{default:_((()=>[h("span",q,[$(r,{to:"/member/order/info?id="+ge.value.orderId,class:"font-color",target:"_blank"},{default:_((()=>[T(V(ge.value.orderSn),1)])),_:1},8,["to"])])])),_:1},8,["label"])):k("",!0),"check"!=m.params.type?(b(),g(i,{key:1,label:c.$t("订单金额"),prop:"totalAmount"},{default:_((()=>[$(v,{modelValue:ge.value.totalAmount,"onUpdate:modelValue":d[0]||(d[0]=e=>ge.value.totalAmount=e),showText:!1},null,8,["modelValue"])])),_:1},8,["label"])):k("",!0),"check"!=m.params.type?(b(),g(i,{key:2,label:c.$t("发票金额"),prop:"amount"},{default:_((()=>[$(v,{modelValue:ge.value.amount,"onUpdate:modelValue":d[1]||(d[1]=e=>ge.value.amount=e),fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue"])])),_:1},8,["label"])):k("",!0),$(i,{label:c.$t("发票类型"),prop:"invoiceType"},{default:_((()=>[h("span",E,V(1===ge.value.invoiceType?c.$t("普通发票"):c.$t("增值税专用发票")),1),h("div",D,V(c.$t("所有发票由商品供货商开具")),1)])),_:1},8,["label"]),$(i,{label:c.$t("发票抬头"),prop:"titleType"},{default:_((()=>[h("span",z,V(1===ge.value.titleType?c.$t("个人"):c.$t("企业")),1)])),_:1},8,["label"]),1===ge.value.invoiceType?(b(),y(f,{key:3},[1===ge.value.titleType?(b(),g(i,{key:0,label:c.$t("个人名称"),prop:"companyName"},{default:_((()=>[h("span",J,V(ge.value.companyName),1)])),_:1},8,["label"])):(b(),y(f,{key:1},[$(i,{label:c.$t("企业名称"),prop:"companyName"},{default:_((()=>[h("span",K,V(ge.value.companyName),1)])),_:1},8,["label"]),$(i,{label:c.$t("纳税人识号"),prop:"companyCode"},{default:_((()=>[h("span",M,V(ge.value.companyCode),1)])),_:1},8,["label"]),$(i,{label:c.$t("单位地址"),prop:"companyAddress"},{default:_((()=>[h("span",Z,V(ge.value.companyAddress),1)])),_:1},8,["label"]),$(i,{label:c.$t("单位电话"),prop:"companyPhone"},{default:_((()=>[h("span",G,V(ge.value.companyPhone),1)])),_:1},8,["label"]),$(i,{label:c.$t("开户银行"),prop:"companyBank"},{default:_((()=>[h("span",H,V(ge.value.companyBank),1)])),_:1},8,["label"]),$(i,{label:c.$t("银行账户"),prop:"companyAccount"},{default:_((()=>[h("span",L,V(ge.value.companyAccount),1)])),_:1},8,["label"])],64))],64)):k("",!0),$(i,{label:c.$t("发票内容"),prop:"invoiceContent"},{default:_((()=>[h("span",Q,V(c.$t("商品明细")),1),h("div",W,V(c.$t("发票内容将显示详细商品名称与价格信息")),1)])),_:1},8,["label"]),2===_e.value.invoiceType?(b(),y(f,{key:4},[$(i,{label:c.$t("单位名称")},{default:_((()=>[h("span",X,V(ge.value.companyName),1)])),_:1},8,["label"]),$(i,{label:c.$t("纳税人识别码")},{default:_((()=>[h("span",Y,V(ge.value.companyCode),1)])),_:1},8,["label"]),$(i,{label:c.$t("注册地址")},{default:_((()=>[h("span",ee,V(ge.value.companyAddress),1)])),_:1},8,["label"]),$(i,{label:c.$t("注册电话")},{default:_((()=>[h("span",ae,V(ge.value.companyPhone),1)])),_:1},8,["label"]),$(i,{label:c.$t("开户银行")},{default:_((()=>[h("span",le,V(ge.value.companyBank),1)])),_:1},8,["label"]),$(i,{label:c.$t("银行账户")},{default:_((()=>[h("span",oe,V(ge.value.companyAccount),1)])),_:1},8,["label"]),$(i,{label:c.$t("发票内容"),prop:"invoiceContent"},{default:_((()=>[h("span",te,V(c.$t("商品明细")),1),h("div",se,V(c.$t("发票内容将显示详细商品名称与价格信息")),1)])),_:1},8,["label"])],64)):k("",!0),$(i,{label:c.$t("收票人手机"),prop:"mobile"},{default:_((()=>[h("span",ue,V(ge.value.mobile),1)])),_:1},8,["label"]),$(i,{label:c.$t("收票人邮箱"),prop:"email"},{default:_((()=>[h("span",pe,V(ge.value.email),1)])),_:1},8,["label"])])),_:1},8,["model"])):(b(),g(w,{key:1,ref_key:"formRef",ref:S,"label-width":110,model:_e.value,class:"form-body","label-suffix":"："},{default:_((()=>["reapply"===m.params.type?(b(),y("div",ne,[T(V(c.$t("审核状态"))+"： ",1),h("span",{style:A(U(_e.value.status))},V(_e.value.statusName),5),d[19]||(d[19]=h("br",null,null,-1)),h("span",null,V(_e.value.applyReply),1)])):k("",!0),"check"!=m.params.type?(b(),g(i,{key:1,label:c.$t("订单号"),prop:"orderSn"},{default:_((()=>[h("span",ce,[$(r,{to:"/member/order/info?id="+_e.value.orderId,target:"_blank"},{default:_((()=>[T(V(_e.value.orderSn),1)])),_:1},8,["to"])])])),_:1},8,["label"])):k("",!0),"check"!=m.params.type?(b(),g(i,{key:2,label:c.$t("订单金额"),prop:"totalAmount"},{default:_((()=>[$(v,{modelValue:_e.value.totalAmount,"onUpdate:modelValue":d[2]||(d[2]=e=>_e.value.totalAmount=e),showText:!1},null,8,["modelValue"])])),_:1},8,["label"])):k("",!0),"check"!=m.params.type?(b(),g(i,{key:3,label:c.$t("发票金额"),prop:"amount"},{default:_((()=>[$(v,{modelValue:_e.value.amount,"onUpdate:modelValue":d[3]||(d[3]=e=>_e.value.amount=e),fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue"])])),_:1},8,["label"])):k("",!0),$(i,{label:c.$t("发票类型"),prop:"invoiceType"},{default:_((()=>[$(N,{modelValue:_e.value.invoiceType,"onUpdate:modelValue":d[4]||(d[4]=e=>_e.value.invoiceType=e),onChange:d[5]||(d[5]=e=>xe("invoiceType"))},{default:_((()=>[$(C,{value:1},{default:_((()=>[T(V(c.$t("普通发票")),1)])),_:1}),1==j(P).invoiceAdded?(b(),g(C,{key:0,value:2},{default:_((()=>[T(V(c.$t("增值税专用发票")),1)])),_:1})):k("",!0)])),_:1},8,["modelValue"]),1===_e.value.invoiceType?(b(),y("div",me,V(c.$t("所有发票由商品供货商开具")),1)):k("",!0),2===_e.value.invoiceType&&we.value?(b(),y("div",de,V(c.$t("所有发票由商品供货商开具")),1)):k("",!0),2!==_e.value.invoiceType||we.value?k("",!0):(b(),y("div",re,[T(V(c.$t("您还未通过增票资质申请，暂时无法开具增值税专用发票"))+"， ",1),$(r,{class:"font-color",to:"/member/userInvoice/info"},{default:_((()=>[T(V(c.$t("点击这里")),1)])),_:1}),T(" "+V(c.$t("去申请增票资质"))+"。 ",1)]))])),_:1},8,["label"]),1===_e.value.invoiceType?(b(),y(f,{key:4},[h("div",ie,[h("p",null,V(c.$t("根据现行税收政策，部分公司提供数电票，数电（普通发票）法律效力与现有电子普通发票相同"))+"；",1),h("p",null,V(c.$t("电子普通发票和纸质普通发票具备同等法律效力，可支持报销入账"))+"；",1),h("p",null,V(c.$t("如商品由第三方卖家销售，发票类型及内容将由该卖家决定"))+"；",1),h("p",null,V(c.$t("如您为企业采购，需要多单合并开具或批量提交发票可注册企业用户"))+"；",1),h("p",ve,V(c.$t("使用礼品卡支付部分的金额，不支持开发票")),1)]),$(i,{label:c.$t("发票抬头"),prop:"titleType"},{default:_((()=>[$(N,{modelValue:_e.value.titleType,"onUpdate:modelValue":d[6]||(d[6]=e=>_e.value.titleType=e),onChange:d[7]||(d[7]=e=>xe("titleType"))},{default:_((()=>[$(C,{value:1},{default:_((()=>[T(V(c.$t("个人")),1)])),_:1}),$(C,{value:2},{default:_((()=>[T(V(c.$t("企业")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"]),1===_e.value.titleType?(b(),g(w,{key:0,ref_key:"formOneRef",ref:F,"label-width":110,model:ke.value,class:"form-body","label-suffix":"："},{default:_((()=>[$(i,{rules:[{required:!0,message:c.$t("个人名称不能为空")}],label:c.$t("个人名称"),prop:"companyName"},{default:_((()=>[$(x,{modelValue:ke.value.companyName,"onUpdate:modelValue":d[8]||(d[8]=e=>ke.value.companyName=e),clearable:"",placeholder:c.$t("请输入个人名称")},null,8,["modelValue","placeholder"])])),_:1},8,["rules","label"])])),_:1},8,["model"])):(b(),g(w,{key:1,ref_key:"formFirmRef",ref:$e,"label-width":110,model:Te.value,class:"form-body","label-suffix":"："},{default:_((()=>[$(i,{rules:[{required:!0,message:c.$t("企业名称不能为空")}],label:c.$t("企业名称"),prop:"companyName"},{default:_((()=>[$(x,{modelValue:Te.value.companyName,"onUpdate:modelValue":d[9]||(d[9]=e=>Te.value.companyName=e),clearable:"",placeholder:c.$t("请输入企业名称")},null,8,["modelValue","placeholder"])])),_:1},8,["rules","label"]),$(i,{rules:[{required:!0,message:c.$t("纳税人识号不能为空")}],label:c.$t("纳税人识号"),prop:"companyCode"},{default:_((()=>[$(x,{modelValue:Te.value.companyCode,"onUpdate:modelValue":d[10]||(d[10]=e=>Te.value.companyCode=e),clearable:"",placeholder:c.$t("请输入纳税人识号")},null,8,["modelValue","placeholder"])])),_:1},8,["rules","label"]),$(i,{label:c.$t("单位地址"),prop:"companyAddress"},{default:_((()=>[$(x,{modelValue:Te.value.companyAddress,"onUpdate:modelValue":d[11]||(d[11]=e=>Te.value.companyAddress=e),clearable:"",placeholder:c.$t("请输入单位地址")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),$(i,{label:c.$t("单位电话"),prop:"companyPhone"},{default:_((()=>[$(x,{modelValue:Te.value.companyPhone,"onUpdate:modelValue":d[12]||(d[12]=e=>Te.value.companyPhone=e),clearable:"",placeholder:c.$t("请输入单位电话")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),$(i,{label:c.$t("开户银行"),prop:"companyBank"},{default:_((()=>[$(x,{modelValue:Te.value.companyBank,"onUpdate:modelValue":d[13]||(d[13]=e=>Te.value.companyBank=e),clearable:"",placeholder:c.$t("请输入开户银行")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),$(i,{label:c.$t("银行账户"),prop:"companyAccount"},{default:_((()=>[$(x,{modelValue:Te.value.companyAccount,"onUpdate:modelValue":d[14]||(d[14]=e=>Te.value.companyAccount=e),clearable:"",placeholder:c.$t("请输入银行账户")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]))],64)):2===_e.value.invoiceType&&we.value?(b(),g(w,{key:5,ref:"formInvoiceRef","label-width":110,model:Ve.value,class:"form-body","label-suffix":"："},{default:_((()=>[h("div",ye,[h("p",null,V(c.$t("我公司依法开具发票，请您按照税法规定使用发票"))+"。",1),h("p",null,V(c.$t("根据现行税收政策，部分公司提供数电票, 数电（专用发票）法律效力与现有增值税专用发票相同"))+";",1),h("p",null,V(c.$t("如商品由第三方卖家销售，发票类型和内容将由该卖家决定，发票由卖家开具并提供"))+"。",1),h("p",null,V(c.$t("如您为企业采购，需要多单合并开具或批量提交发票可注册企业用户"))+"；",1),h("p",be,V(c.$t("使用礼品卡支付部分的金额，不支持开发票")),1)]),$(i,{label:c.$t("单位名称")},{default:_((()=>[T(V(Ve.value.companyName),1)])),_:1},8,["label"]),$(i,{label:c.$t("纳税人识别码")},{default:_((()=>[T(V(Ve.value.companyCode),1)])),_:1},8,["label"]),$(i,{label:c.$t("注册地址")},{default:_((()=>[T(V(Ve.value.companyAddress),1)])),_:1},8,["label"]),$(i,{label:c.$t("注册电话")},{default:_((()=>[T(V(Ve.value.companyPhone),1)])),_:1},8,["label"]),$(i,{label:c.$t("开户银行")},{default:_((()=>[T(V(Ve.value.companyBank),1)])),_:1},8,["label"]),$(i,{label:c.$t("银行账户")},{default:_((()=>[T(V(Ve.value.companyAccount),1)])),_:1},8,["label"])])),_:1},8,["model"])):k("",!0),0!=_e.value.invoiceType?(b(),y(f,{key:6},[$(i,{rules:[{required:!0,message:c.$t("手机不能为空")}],label:c.$t("收票人手机"),prop:"mobile"},{default:_((()=>[$(x,{modelValue:_e.value.mobile,"onUpdate:modelValue":d[15]||(d[15]=e=>_e.value.mobile=e),clearable:"",placeholder:c.$t("请输入收票人手机")},null,8,["modelValue","placeholder"])])),_:1},8,["rules","label"]),$(i,{rules:[{required:1!==_e.value.invoiceType,message:c.$t("邮箱不能为空")}],label:c.$t("收票人邮箱"),prop:"email"},{default:_((()=>[$(x,{modelValue:_e.value.email,"onUpdate:modelValue":d[16]||(d[16]=e=>_e.value.email=e),clearable:"",placeholder:c.$t("请输入收票人邮箱")},null,8,["modelValue","placeholder"])])),_:1},8,["rules","label"])],64)):k("",!0)])),_:1},8,["model"]))])),_:1},8,["modelValue","title"]),h("span",{onClick:Ae},[O(c.$slots,"default",{},void 0,!0)])],64)}}}),[["__scopeId","data-v-946eb155"]]),he=Object.freeze(Object.defineProperty({__proto__:null,default:$e},Symbol.toStringTag,{value:"Module"}));export{$e as I,U as a,F as b,x as c,B as d,he as e,S as g,I as o,P as u};
