import{_ as e}from"./DIcT5qlW.js";import{_ as a}from"./DRy-t1KR.js";import{_ as s}from"./4BWvF7DS.js";import{e as l,r as t,g as i,y as o,c as n,o as d,F as u,a as c,h as p,a4 as r,b as v,w as m,d as y,t as f,aa as g,ak as h,i as I,n as k,_ as x,z as b,f as V,G as _,s as $,al as w,m as T,l as j,v as C,j as U,q as D,E as A,k as N,am as S,ae as P}from"./vO8z_6wc.js";import{E as L}from"./duVALuQ5.js";import{E}from"./DQonK11p.js";import{a as F,_ as O}from"./B3kMr2Om.js";import{E as R}from"./C_yTnQv7.js";import{_ as q}from"./_qz6p60H.js";import{E as z}from"./OZUBBuO3.js";import{_ as B}from"./B6kpiin_.js";import"./l0sNRNKZ.js";import"./CxvT33_f.js";import M from"./sxlyH3HU.js";import W from"./CUkeBCLv.js";import{E as G}from"./B9ErrXst.js";import"./YLitFIRx.js";import{S as J}from"./DMdl3org.js";import{g as Z,u as H,a as K,s as Q}from"./EEIoH7qq.js";import{I as X,u as Y,a as ee,o as ae,g as se,b as le,c as te,d as ie}from"./DjwGSKB5.js";import{_ as oe}from"./DgEHheWy.js";import{_ as ne}from"./Dugi1Qn1.js";import{u as de}from"./Ctuj9lAE.js";import{E as ue}from"./CMHrSU05.js";import"./DEtxbcwL.js";import"./CdIa5lAL.js";import"./CKVP4sCQ.js";import"./BwRzfsZt.js";import"./B0jPhJeY.js";import"./D_Dr4eZ1.js";import"./DqoL2U0I.js";import"./BG07ctRk.js";import"./ExFuuhw5.js";import"./6_reTNGa.js";import"./123WnbAt.js";import"./VsleDggW.js";import"./C0xcqOw0.js";/* empty css        */import"./DgmxjSXK.js";import"./y2YKyhRU.js";import"./C8tVKSc2.js";import"./DKvZ9Rd6.js";import"./BKztAS8l.js";import"./DNTBEABm.js";import"./2k7g3pmt.js";import"./pBde3eXe.js";const ce={key:0,class:"modal_region_box"},pe={key:0,class:"address_from"},re={class:"from_item"},ve={class:"tit"},me={class:"inp"},ye={class:"from_item"},fe={class:"tit"},ge={class:"inp"},he={class:"from_item"},Ie={class:"tit"},ke={class:"from_item"},xe={class:"tit"},be={class:"inp"},Ve={class:"from_item"},_e={class:"tit"},$e={class:"inp"},we={class:"from_item"},Te={class:"btn_box"},je=x(l({__name:"ModalRegion",props:{addressId:{type:Number,default:0}},emits:["change"],setup(e,{emit:a}){const s=a,l=e,x=t(!1),b=t(!1),V={consignee:"",regionIds:[]},_=i({...V}),$=t(!0),w=()=>{b.value=!0,x.value=!0,l.addressId>0?j():$.value=!1};o((()=>{}));const T=()=>{Object.assign(_,{...V})},j=async()=>{try{const e=await Z(l.addressId);Object.assign(_,e)}catch(e){k.error(e.message)}finally{$.value=!1}};return(a,l)=>{const t=G;return d(),n(u,null,[c("div",{onClick:w,style:{display:"inline-flex",cursor:"pointer"}},[r(a.$slots,"default",{},void 0,!0)]),x.value?(d(),n("div",ce,[v(t,{modelValue:b.value,"onUpdate:modelValue":l[4]||(l[4]=e=>b.value=e),title:0==e.addressId?a.$t("添加收货地址"):a.$t("修改收货地址"),footer:null,top:"15vh",width:"830px","destroy-on-close":!0,onClosed:T},{default:m((()=>[$.value?p("",!0):(d(),n("div",pe,[c("div",re,[c("div",ve,[l[5]||(l[5]=c("span",{class:"red"},"*",-1)),y(" "+f(a.$t("收货人"))+"：",1)]),c("div",me,[g(c("input",{class:"tig-input","onUpdate:modelValue":l[0]||(l[0]=e=>_.consignee=e),type:"text",style:{width:"170px"}},null,512),[[h,_.consignee]])])]),c("div",ye,[c("div",fe,[l[6]||(l[6]=c("span",{class:"red"},"*",-1)),y(" "+f(a.$t("所在地区"))+"：",1)]),c("div",ge,[v(I(J),{modelValue:_.regionIds,"onUpdate:modelValue":l[1]||(l[1]=e=>_.regionIds=e)},null,8,["modelValue"])])]),c("div",he,[c("div",Ie,[l[7]||(l[7]=c("span",{class:"red"},"*",-1)),y(" "+f(a.$t("详细地址"))+"：",1)]),l[8]||(l[8]=c("div",{class:"inp"},[c("input",{class:"tig-input",type:"text",style:{width:"270px"}})],-1))]),c("div",ke,[c("div",xe,[l[9]||(l[9]=c("span",{class:"red"},"*",-1)),y(" "+f(a.$t("联系电话"))+"：",1)]),c("div",be,[l[10]||(l[10]=c("input",{class:"tig-input",type:"text",style:{width:"170px"}},null,-1)),c("span",null,f(a.$t("推荐手机，座机需加区号和“-”符号")),1)])]),c("div",Ve,[c("div",_e,f(a.$t("电子邮箱"))+"：",1),c("div",$e,[l[11]||(l[11]=c("input",{class:"tig-input",type:"text",style:{width:"270px"}},null,-1)),c("span",null,f(a.$t("用来接收订单提醒邮件")),1)])]),c("div",we,[l[12]||(l[12]=c("div",{class:"tit"},null,-1)),c("div",Te,[c("div",{class:"btn",onClick:l[2]||(l[2]=e=>(async()=>{try{const e=await H(_);s("change",e.addressId),b.value=!1}catch(e){k.error(e.message)}})())},f(a.$t("确认修改地址")),1),c("div",{class:"btn info",onClick:l[3]||(l[3]=e=>b.value=!1)},f(a.$t("取消")),1)])])]))])),_:1},8,["modelValue","title"])])):p("",!0)],64)}}}),[["__scopeId","data-v-525f93ed"]]),Ce={class:"container"},Ue={class:"orderConfirmCon"},De={class:"form_item"},Ae={class:"top_row flex justify-between"},Ne={class:"tit"},Se={class:"delivery"},Pe={class:"tit"},Le={key:0,class:"delivery_tags flex flex-wrap"},Ee={key:1,class:"delivery_tags flex flex-wrap"},Fe=["onClick"],Oe={key:2,class:"no_delivery"},Re={class:"errInfo red",style:{display:"inline",margin:"0"}},qe={class:"detail"},ze={class:"shop_name"},Be={class:"list flex align-start"},Me={class:"flex align-start"},We={class:"pic"},Ge=["src"],Je={class:"describe flex flex-column"},Ze=["title"],He={class:"mt10 sku-name-box"},Ke={class:"sku-name-item"},Qe={class:"sku-name"},Xe={key:0,class:"extraskudata"},Ye={class:"title"},ea={class:"content"},aa={class:"content-text"},sa={key:1,class:"activity-box"},la={class:"ticket-content"},ta={class:"money"},ia={class:"quantity"},oa={key:0,class:"gift-box"},na={class:"gift-title"},da={class:"gift-content"},ua={class:"gift-content-item"},ca={class:"gift-item-left"},pa={class:"gift-item-right"},ra={class:"gift-item-name"},va={key:0,class:"sku-card"},ma={class:"gift-item-num"},ya={class:"add_remark"},fa={class:"a_rmk_tit"},ga={class:"a_rmk_con"},ha={key:1,class:"form_item"},Ia={class:"top_row"},ka={class:"tit"},xa={key:1,class:"from"},ba={class:"check-box flex align-center"},Va={class:"tit"},_a={style:{"margin-left":"10px"}},$a={class:"font-color"},wa={key:2,class:"from_list"},Ta={class:"integral flex"},ja={class:"tit"},Ca={class:"inp_box"},Ua={class:"inp"},Da={key:0,class:"points_amount"},Aa={class:"tips"},Na={href:"/article/issue/info?articleId=7",target:"_blank"},Sa={class:"font-color"},Pa={key:3,class:"from"},La={class:"check-box flex align-center"},Ea={class:"tit"},Fa={style:{"margin-left":"10px"}},Oa={class:"font-color"},Ra={key:2,class:"form_item"},qa={class:"top_row flex align-end"},za={class:"tit"},Ba={class:"tips"},Ma={class:"from"},Wa={class:"flex align-center invoice-box"},Ga={class:"title flex align-center"},Ja={key:0,class:"type"},Za={key:0},Ha={key:1},Ka={class:"type"},Qa={class:"btn hand-pointer"},Xa={class:"money_info"},Ya={class:"total_list"},es={class:"item"},as={key:0,class:"item"},ss={key:1,class:"item"},ls={key:2,class:"item"},ts={class:"item"},is={class:"tip-item"},os={class:"ui-tips"},ns={class:"ui-tips-main"},ds={class:"tit"},us={class:"goods_list"},cs={class:"goods_col"},ps={class:"shop_name"},rs={class:"list"},vs={class:"txt"},ms={class:"item",style:{padding:"10px 0"}},ys={class:"img_box",style:{width:"65px"}},fs=["src"],gs={key:3,class:"item"},hs={class:"discount"},Is={class:"discount-title"},ks={class:"title-text"},xs={class:"discount-content"},bs={key:0,class:"discount-item-box"},Vs={class:"item-label"},_s={class:"item-value"},$s={class:"discount-item-box hassub"},ws={key:0,class:"flex justify-between"},Ts={class:"item-label"},js={class:"item-value discounts-value",style:{color:"var(--general)"}},Cs={key:1,class:"sub-item-box"},Us={class:"sub-item-label"},Ds={class:"sub-item-value discounts-value"},As={key:2,class:"sub-item-box"},Ns={class:"sub-item-label"},Ss={class:"sub-item-value discounts-value"},Ps={key:1,class:"discount-item-box"},Ls={class:"item-label"},Es={class:"item-value"},Fs={key:0,class:"complete"},Os={class:"total_fee flex align-end justify-end"},Rs={class:"submit flex justify-end"},qs=x(l({__name:"check",setup(l){const{t:o}=b(),r=V(),g=de(),h=_(),x=$((()=>h.query.flowType?Number(h.query.flowType):1)),G=i({addressId:0,shippingType:{},payTypeId:0,usePoint:0,useBalance:0,useCouponIds:[],selectUserCouponIds:[],buyerNote:"",invoiceData:{}}),J=t([]),Z=w("addressRef"),H=async()=>new Promise(((e,a)=>{K({page:1,size:99}).then((s=>{var l;0==s.records.length&&(null==(l=Z.value)||l.show(),a("没有地址")),G.addressId=s.records[0].addressId,J.value=s.records,e(void 0)})).catch((e=>{console.log(e),a(e)}))})),ce=t([]),pe=async()=>{try{const e=await se();G.payTypeId=e[0].typeId,ce.value=e}catch(e){console.log(e)}},re=t({}),ve=async()=>{try{const e=await le({flowType:x.value});re.value=e;for(const a in e)e[a]&&e[a].length>0&&(G.shippingType[a]={typeId:e[a][0].shippingTypeId,shopId:e[a][0].shopId,typeName:e[a][0].shippingTypeName});console.log("getShippingTypeData",G.shippingType)}catch(e){console.log(e)}},me=t(!0),ye=t(!0),fe=t(!1),ge=t(0),he=t(!1),Ie=$((()=>{const e=[1==r.useCoupon&&"优惠券",1==r.usePoints&&"积分",1==r.useSurplus&&"余额"].filter(Boolean);return e.length?`使用${e.join("/")}`:""})),ke=t([]),xe=t({}),be=t({disableCoupons:[],enableCoupons:[]}),Ve=t();(async()=>{var e;try{Ve.value=ue.service({lock:!1,text:o("请求加载中"),customClass:"tig-normal-loading"}),me.value=!0,await H(),await Promise.all([pe(),ve(),g.getUserInfo()]),await(async()=>{var e;ye.value=!0;try{const a=await te({flowType:x.value,...G});Object.assign(G,a.item),ke.value=a.cartList,xe.value=a.total,be.value=a.couponList,a.useCouponIds&&(null==(e=a.useCouponIds)?void 0:e.length)>0&&(fe.value=!0,G.useCouponIds=a.useCouponIds,G.selectUserCouponIds=a.selectUserCouponIds),me.value=!1}catch(a){k.error(a.message)}finally{ye.value=!1}})()}catch(a){console.log(a)}finally{me.value=!1,null==(e=Ve.value)||e.close()}})();const _e=e=>{"invoiceType"==e.type?G.invoiceData.invoiceType=e.value:G.invoiceData.titleType=e.value},$e=async()=>{try{const e=await Y({flowType:x.value,...G});return Object.assign(G,e.item),ke.value=e.cartList,xe.value=e.total,e}catch(e){k.error(e.message)}finally{ye.value=!1}},we={autoplay:!1,navigation:!0,pagination:!1,effect:"slide",loop:!1,slidesPerView:4,slidesPerGroup:1},Te=async e=>{try{ye.value=!0,G.addressId=e.addressId,await(async a=>{try{await Q(a)}catch(e){console.log(e)}})(e.addressId),he.value=!1,await H(),await ve(),await pe(),await $e(),(async()=>{try{const e=await ie({...G.invoiceData});if(e)delete e.id,delete e.userId,delete e.orderId,delete e.status,delete e.applyReply,delete e.invoiceNo,delete e.addTime,1==e.titleType&&(e.companyUserName=e.companyName),2==e.titleType&&(e.companyEnterpriseName=e.companyName),G.invoiceData=e;else{let e=J.value.find((e=>G.addressId==e.addressId));if(e){let a={companyUserName:e.consignee,mobile:e.mobile,email:e.email,amount:xe.value.unpaidAmount};Object.assign(G.invoiceData,a)}}}catch(e){k.error(e.message)}})()}catch(a){}},qs=e=>{G.payTypeId!==e&&(G.payTypeId=e,$e())},zs=t(0),Bs=t(!1),Ms=e=>{G.invoiceData=e},Ws=()=>{!0===Bs.value?(Bs.value=!1,G.usePoint=0,zs.value=0):Bs.value=!0,0!=G.usePoint&&$e()},Gs=()=>{zs.value=Math.floor(Number(zs.value)),zs.value>g.userInfo.points?zs.value=g.userInfo.points:(zs.value<0||!zs.value)&&(zs.value=0),G.usePoint=zs.value,$e()},Js=()=>{G.useBalance=0==G.useBalance?g.userInfo.balance:0,$e()},Zs=(e=!1)=>{Ks(e)},Hs=t(!1),Ks=async(e=!1)=>{try{Hs.value=!0,G.useDefaultCouponIds=e?1:0;const a=await ee(G);return G.useCouponIds=a.useCouponIds??[],G.selectUserCouponIds=a.selectUserCouponIds??[],be.value=a.couponList,xe.value=a.total,ke.value=a.cartList,a}catch(a){}finally{Hs.value=!1}},Qs=t(!1),Xs=t(!1),Ys=$((()=>{if(0===G.addressId)return!0;if(0===G.payTypeId)return!0;if(!G.shippingType)return!0;for(const e of ke.value)if(0===e.noShipping&&!G.shippingType[e.shopId])return!0;return!1})),el=e=>e.filter((e=>1===e.type||6===e.type)),al=t(!1);return(l,t)=>{var i;const o=e,h=a,b=s,V=A,_=L,$=E,w=F,K=R,Q=q,Y=s,ee=O,se=F,le=z,te=B;return d(),n("div",null,[v(o,{title:"订单结算页"}),v(M,{step:2}),c("div",Ce,[c("div",Ue,[v(oe,{ref_key:"addressRef",ref:Z,modelValue:he.value,"onUpdate:modelValue":t[0]||(t[0]=e=>he.value=e),"active-address-id":G.addressId,addressList:J.value,onAddrssRefresh:H,onOkCallback:Te},null,8,["modelValue","active-address-id","addressList"]),J.value&&J.value.length>0?(d(),T(ne,{key:0,"pay-type-id":G.payTypeId,"payment-type-list":ce.value,onChangePayType:qs},null,8,["pay-type-id","payment-type-list"])):p("",!0),c("div",De,[c("div",Ae,[c("div",Ne,f(l.$t("购物清单")),1),3!==x.value?(d(),T(h,{key:0,class:"font-color",to:"/cart/"},{default:m((()=>[y(f(l.$t("返回修改购物车")),1)])),_:1})):p("",!0)]),ke.value&&ke.value.length>0?(d(!0),n(u,{key:0},j(ke.value,((e,a)=>(d(),n("div",{class:"product_detail flex",key:e.shopId},[c("div",Se,[c("div",Pe,f(l.$t("配送方式")),1),1===e.noShipping?(d(),n("div",Le,t[25]||(t[25]=[c("div",{class:"pay_tab flex align-center active"},[c("span",null,"无需配送"),c("i",{class:"icon-gou"})],-1)]))):re.value[e.shopId]&&re.value[e.shopId].length>0?(d(),n("div",Ee,[(d(!0),n(u,null,j(re.value[e.shopId],((a,s)=>(d(),n("div",{key:a,class:C(["pay_tab flex align-center",{active:a.shippingTypeId===G.shippingType[e.shopId].typeId}]),onClick:s=>(async(e,a)=>{const{shippingTypeId:s,shippingTypeName:l}=a;G.shippingType[e]&&G.shippingType[e].typeId==s||(G.shippingType[e].typeId=s,G.shippingType[e].shopId=e,G.shippingType[e].typeName=l,await $e())})(e.shopId,a)},[c("span",null,f(a.shippingTypeName),1),t[26]||(t[26]=c("i",{class:"icon-gou"},null,-1))],10,Fe)))),128))])):(d(),n("div",Oe,[c("span",Re,f(l.$t("该收货地址不支持配送")),1)]))]),c("div",qe,[c("div",ze,f(0==e.shopId?l.$t("自营"):`${l.$t("商家")}：${e.shopTitle}`),1),(d(!0),n(u,null,j(e.carts,(e=>(d(),n("div",Be,[c("div",Me,[c("div",We,[v(h,{target:"_blank",to:I(D)({path:"product",id:e.productId,sn:e.productSn})},{default:m((()=>[c("img",{src:I(U)(e.picThumb),alt:""},null,8,Ge)])),_:2},1032,["to"])]),c("div",Je,[c("div",{class:"name ellipsis",title:e.productName},[v(h,{target:"_blank",to:I(D)({path:"product",id:e.productId,sn:e.productSn})},{default:m((()=>[y(f(e.productName),1)])),_:2},1032,["to"])],8,Ze),c("div",He,[(d(!0),n(u,null,j(e.skuData,((e,a)=>(d(),n("div",Ke,[c("span",Qe,f(e.name)+"：",1),y(f(e.value),1)])))),256))]),e.extraSkuData&&e.extraSkuData.length?(d(),n("div",Xe,[(d(!0),n(u,null,j(e.extraSkuData,(e=>(d(),n("div",{key:e,class:"extraskudata-item"},[c("div",Ye,f(e.attrName),1),t[27]||(t[27]=c("div",{class:"line-box"},[c("div",{class:"line"})],-1)),c("div",ea,[c("span",aa,f(e.attrValue),1),v(b,{modelValue:e.attrPrice,"onUpdate:modelValue":a=>e.attrPrice=a,showText:!1},null,8,["modelValue","onUpdate:modelValue"])])])))),128))])):p("",!0),e.activityInfo&&el(e.activityInfo).length>0?(d(),n("div",sa,[(d(!0),n(u,null,j(el(e.activityInfo),(e=>(d(),n("div",{key:e.promotionId,class:"promotion"},[c("div",la,f(1===e.type?l.$t("秒杀价"):l.$t("限时折扣")),1)])))),128))])):p("",!0)])]),c("div",ta,[v(b,{fontStyle:{fontWeight:"600"},modelValue:e.price,"onUpdate:modelValue":a=>e.price=a,showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),c("div",ia,"x"+f(e.quantity),1)])))),256)),e.gift&&e.gift.length>0?(d(),n("div",oa,[c("div",na,f(l.$t("赠品")),1),c("div",da,[(d(!0),n(u,null,j(e.gift,(e=>(d(),T(h,{key:e.giftId,target:"_blank",to:I(D)({path:"product",id:e.productId,sn:e.productSn})},{default:m((()=>[c("div",ua,[c("div",ca,[v(V,{class:"gift-img",lazy:"",src:I(U)(e.picThumb)},null,8,["src"])]),c("div",pa,[c("div",ra,f(e.productName),1),e.skuData&&e.skuData.length>0?(d(),n("div",va,[(d(!0),n(u,null,j(e.skuData,((e,a)=>(d(),n("div",{key:a,class:"sku-item"},f(e.value),1)))),128))])):p("",!0),c("div",ma,"x"+f(e.num),1)])])])),_:2},1032,["to"])))),128))])])):p("",!0)])])))),128)):p("",!0),c("div",ya,[c("div",fa,f(l.$t("订单备注"))+"：",1),c("div",ga,[v(_,{modelValue:G.buyerNote,"onUpdate:modelValue":t[1]||(t[1]=e=>G.buyerNote=e),type:"textarea",placeholder:l.$t("提示：请勿填写有关支付、收货、发票方面的信息"),style:{width:"400px","font-size":"12px"},"show-word-limit":"",maxlength:50},null,8,["modelValue","placeholder"])])])]),Ie.value?(d(),n("div",ha,[c("div",Ia,[c("div",ka,f(l.$t(Ie.value)),1)]),v(w,null,{default:m((()=>[(be.value.disableCoupons.length>0||be.value.enableCoupons.length>0)&&0!=I(r).useCoupon&&1===x.value?(d(),T(W,{key:0,useCoupon:fe.value,"onUpdate:useCoupon":t[2]||(t[2]=e=>fe.value=e),couponList:be.value,"onUpdate:couponList":t[3]||(t[3]=e=>be.value=e),selectedIds:G.useCouponIds,"onUpdate:selectedIds":t[4]||(t[4]=e=>G.useCouponIds=e),selectedUserCouponIds:G.selectUserCouponIds,"onUpdate:selectedUserCouponIds":t[5]||(t[5]=e=>G.selectUserCouponIds=e),onChange:Zs,couponLoading:Hs.value,"onUpdate:couponLoading":t[6]||(t[6]=e=>Hs.value=e)},null,8,["useCoupon","couponList","selectedIds","selectedUserCouponIds","couponLoading"])):p("",!0),0!=I(r).usePoints&&1===x.value?(d(),n("div",xa,[c("div",ba,[v($,{checked:G.usePoint>0,onClick:Ws},{default:m((()=>[c("span",Va,f(l.$t("使用积分")),1)])),_:1},8,["checked"]),c("div",_a,[y(f(l.$t("当前账户共"))+" ",1),c("span",$a,f(I(g).userInfo.points),1),y(" "+f(l.$t("积分")),1)])])])):p("",!0),Bs.value?(d(),n("div",wa,[t[28]||(t[28]=c("div",{class:"arrow"},null,-1)),c("div",Ta,[c("div",ja,f(l.$t("使用积分"))+"：",1),c("div",Ca,[c("div",Ua,[v(_,{max:I(g).userInfo.points,modelValue:zs.value,"onUpdate:modelValue":t[7]||(t[7]=e=>zs.value=e),onChange:Gs},null,8,["max","modelValue"]),xe.value.pointsAmount>0?(d(),n("span",Da,[y("  "+f(l.$t("共抵扣"))+" ",1),v(b,{class:"red",modelValue:xe.value.pointsAmount,"onUpdate:modelValue":t[8]||(t[8]=e=>xe.value.pointsAmount=e),showText:!1},null,8,["modelValue"])])):p("",!0)]),c("div",Aa,[y(f(l.$t("该订单最多可用"))+f(I(g).userInfo.points)+" "+f(l.$t("积分"))+" ",1),c("a",Na,[c("span",Sa,"【"+f(l.$t("如何获得积分"))+"？】",1)])])])])])):p("",!0),0!=I(r).useSurplus&&I(g).userInfo.balance>0?(d(),n("div",Pa,[c("div",La,[v($,{checked:G.useBalance>0,onClick:Js},{default:m((()=>[c("span",Ea,f(l.$t("使用余额")),1)])),_:1},8,["checked"]),c("div",Fa,[y(f(l.$t("当前账户余额"))+" ",1),c("span",Oa,f(I(g).userInfo.balance),1)])])])):p("",!0)])),_:1})])):p("",!0),1!=I(r).canInvoice||I(N)()?p("",!0):(d(),n("div",Ra,[c("div",qa,[c("div",za,f(l.$t("发票信息")),1),c("div",Ba,f(l.$t("开企业抬头发票须填写纳税人识别号，以免影响报销")),1)]),c("div",Ma,[c("div",Wa,[c("div",Ga,[c("span",null,f(G.invoiceData.invoiceType?1==G.invoiceData.invoiceType?l.$t("电子普通发票"):l.$t("增值税专用发票"):l.$t("不开发票")),1),1==G.invoiceData.invoiceType?(d(),T(K,{key:0,content:l.$t("电子普通发票与纸质发票具有同等法律效力，可支持报销入账、商品售后凭证。"),placement:"bottom-start",effect:"light"},{default:m((()=>t[29]||(t[29]=[c("i",{class:"iconfont-pc icon-tishi"},null,-1)]))),_:1},8,["content"])):p("",!0)]),G.invoiceData.invoiceType?(d(),n("div",Ja,[1==G.invoiceData.invoiceType?(d(),n("span",Za,f(1==G.invoiceData.titleType?l.$t("个人"):l.$t("企业")),1)):p("",!0),2==G.invoiceData.invoiceType?(d(),n("span",Ha,f(l.$t("增值税专用发票")),1)):p("",!0)])):p("",!0),c("div",Ka,[c("span",null,f(G.invoiceData.companyName??""),1)]),v(X,{params:{invoiceData:G.invoiceData,amount:null==(i=xe.value)?void 0:i.unpaidAmount,type:"check",address:J.value.find((e=>G.addressId==e.addressId))},onCallback:Ms,onChangeType:_e},{default:m((()=>[c("div",Qa,f(l.$t("修改")),1)])),_:1},8,["params"])])])])),c("div",Xa,[v(se,null,{default:m((()=>[c("div",Ya,[c("div",es,[y(f(l.$t("商品总价"))+"： ",1),v(b,{modelValue:xe.value.productAmount,"onUpdate:modelValue":t[9]||(t[9]=e=>xe.value.productAmount=e),showText:!1},null,8,["modelValue"])]),xe.value.serviceFee&&xe.value.serviceFee>0?(d(),n("div",as,[y(f(l.$t("附加费用"))+"： ",1),v(b,{modelValue:xe.value.serviceFee,"onUpdate:modelValue":t[10]||(t[10]=e=>xe.value.serviceFee=e),showText:!1},null,8,["modelValue"])])):p("",!0),xe.value.balance>0?(d(),n("div",ss,[y(" - "+f(l.$t("使用余额"))+"： ",1),v(b,{modelValue:xe.value.balance,"onUpdate:modelValue":t[11]||(t[11]=e=>xe.value.balance=e),showText:!1},null,8,["modelValue"])])):p("",!0),xe.value.pointsAmount>0?(d(),n("div",ls,[y(" - "+f(l.$t("使用积分"))+"： ",1),v(b,{modelValue:xe.value.pointsAmount,"onUpdate:modelValue":t[12]||(t[12]=e=>xe.value.pointsAmount=e),showText:!1},null,8,["modelValue"])])):p("",!0),c("div",ts,[c("div",is,[t[31]||(t[31]=c("i",{class:"freight-icon"},null,-1)),c("div",os,[t[30]||(t[30]=c("span",{class:"ui-tips-arrow"},null,-1)),c("div",ns,[c("div",ds,f(l.$t("运费明细")),1),c("div",us,[(d(!0),n(u,null,j(ke.value,((e,a)=>(d(),n("div",cs,[c("div",ps,f(0==e.shopId?l.$t("自营"):e.shopTitle),1),c("div",rs,[c("div",vs,[y(f(l.$t("运费"))+"：",1),v(b,{showText:!1,modelValue:xe.value.storeShippingFee[e.shopId],"onUpdate:modelValue":a=>xe.value.storeShippingFee[e.shopId]=a},null,8,["modelValue","onUpdate:modelValue"])]),c("div",ms,[v(Q,{swiperOption:we,"onUpdate:swiperOption":t[13]||(t[13]=e=>we=e),itemList:e.carts,style:{width:"100%",padding:"0 30px"}},{default:m((({item:e})=>[c("div",ys,[c("img",{src:I(U)(e.picThumb),alt:""},null,8,fs)])])),_:2},1032,["itemList"])])])])))),256))])])])]),y(" + "+f(l.$t("配送费用"))+"： ",1),v(b,{showText:!1,modelValue:xe.value.shippingFee,"onUpdate:modelValue":t[14]||(t[14]=e=>xe.value.shippingFee=e)},null,8,["modelValue"])]),xe.value.discounts>0?(d(),n("div",gs,[v(ee,{trigger:"hover",modelValue:al.value,"onUpdate:modelValue":t[20]||(t[20]=e=>al.value=e)},S({reference:m((()=>[t[32]||(t[32]=c("div",{class:"tip-item"},[c("i",{class:"freight-icon"})],-1))])),_:2},[al.value?{name:"default",fn:m((()=>{var e,a,s;return[c("div",hs,[c("div",Is,[c("div",ks,f(l.$t("优惠明细")),1)]),c("div",xs,[(null==(e=xe.value)?void 0:e.productAmount)>0?(d(),n("div",bs,[c("div",Vs,f(l.$t("商品总额")),1),c("div",_s,[v(Y,{modelValue:xe.value.productAmount,"onUpdate:modelValue":t[15]||(t[15]=e=>xe.value.productAmount=e),fontStyle:{fontWeight:"bold"}},null,8,["modelValue"])])])):p("",!0),c("div",$s,[(null==(a=xe.value)?void 0:a.discounts)>0?(d(),n("div",ws,[c("div",Ts,f(l.$t("共优惠")),1),c("div",js,[t[33]||(t[33]=y(" - ")),v(Y,{modelValue:xe.value.discounts,"onUpdate:modelValue":t[16]||(t[16]=e=>xe.value.discounts=e)},null,8,["modelValue"])])])):p("",!0),(null==(s=xe.value)?void 0:s.discountCouponAmount)>0?(d(),n("div",Cs,[c("div",Us,f(l.$t("优惠券")),1),c("div",Ds,[t[34]||(t[34]=y(" - ")),v(Y,{modelValue:xe.value.discountCouponAmount,"onUpdate:modelValue":t[17]||(t[17]=e=>xe.value.discountCouponAmount=e)},null,8,["modelValue"])])])):p("",!0),xe.value.discountDiscountAmount>0?(d(),n("div",As,[c("div",Ns,f(l.$t("其他优惠")),1),c("div",Ss,[t[35]||(t[35]=y(" - ")),v(Y,{modelValue:xe.value.discountDiscountAmount,"onUpdate:modelValue":t[18]||(t[18]=e=>xe.value.discountDiscountAmount=e)},null,8,["modelValue"])])])):p("",!0)]),xe.value.discountAfter&&xe.value.discountAfter>0?(d(),n("div",Ps,[c("div",Ls,f(l.$t("合计")),1),c("div",Es,[v(Y,{modelValue:xe.value.discountAfter,"onUpdate:modelValue":t[19]||(t[19]=e=>xe.value.discountAfter=e),fontStyle:{fontWeight:"bold"}},null,8,["modelValue"])])])):p("",!0)])])]})),key:"0"}:void 0]),1032,["modelValue"]),y(" - "+f(l.$t("共优惠"))+"： ",1),v(b,{showText:!1,modelValue:xe.value.discounts,"onUpdate:modelValue":t[21]||(t[21]=e=>xe.value.discounts=e)},null,8,["modelValue"])])):p("",!0)])])),_:1}),xe.value.orderSendPoint&&xe.value.orderSendPoint>0?(d(),n("div",Fs," *"+f(I(N)()?l.$t("该订单完成后，您将预计获得{0}积分",[xe.value.orderSendPoint]):`该订单完成后，您将预计获得${xe.value.orderSendPoint}积分`),1)):p("",!0),c("div",Os,[y(f(l.$t("应付款金额"))+"：",1),v(b,{class:"price",modelValue:xe.value.unpaidAmount,"onUpdate:modelValue":t[22]||(t[22]=e=>xe.value.unpaidAmount=e),showText:!1},null,8,["modelValue"])]),c("div",Rs,[v(le,{type:"primary",class:"btn",disabled:Ys.value,loading:Qs.value,onClick:t[23]||(t[23]=e=>!Qs.value&&(async()=>{try{Qs.value=!0;const e=await ae(G);return 2==e.returnType?(P("/member/order/list",{replace:!0}),g.userInfoLoaded=!1,void(await g.getUserInfo())):(P(`/order/pay?id=${e.orderId}`,{replace:!0}),e)}catch(e){k.error(e.message)}finally{Qs.value=!1}})())},{default:m((()=>[y(f(l.$t("提交订单")),1)])),_:1},8,["disabled","loading"])])])])]),Xs.value?(d(),T(I(je),{key:0,modelValue:Xs.value,"onUpdate:modelValue":t[24]||(t[24]=e=>Xs.value=e),addressId:ge.value},null,8,["modelValue","addressId"])):p("",!0),v(te)])}}}),[["__scopeId","data-v-8f4971c9"]]);export{qs as default};
