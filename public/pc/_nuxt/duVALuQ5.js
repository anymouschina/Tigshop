import{b5 as e,a3 as t,a2 as a,K as o,L as n,M as l,bx as s,by as i,N as r,e as u,bA as p,bB as d,a8 as c,s as f,P as v,I as m,r as h,bC as y,bD as b,bE as x,b4 as g,R as w,Q as S,y as C,U as z,be as k,c as E,o as I,h as P,F,a as B,v as $,i as N,a4 as M,m as _,w as R,av as V,Y as j,aX as H,b as L,bF as T,ag as O,aY as A,t as W,p as K,a_ as U,ad as Y}from"./vO8z_6wc.js";import{u as D,b as Q,c as X,a as q,d as G}from"./CdIa5lAL.js";import{U as J,I as Z,C as ee}from"./BwRzfsZt.js";import{u as te,a as ae}from"./B0jPhJeY.js";import{d as oe}from"./D_Dr4eZ1.js";const ne=()=>e&&/firefox/i.test(window.navigator.userAgent);let le;const se={height:"0",visibility:"hidden",overflow:ne()?"":"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},ie=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function re(e,a=1,o){var n;le||(le=document.createElement("textarea"),document.body.appendChild(le));const{paddingSize:l,borderSize:s,boxSizing:i,contextStyle:r}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:ie.map((e=>[e,t.getPropertyValue(e)])),paddingSize:o,borderSize:n,boxSizing:a}}(e);r.forEach((([e,t])=>null==le?void 0:le.style.setProperty(e,t))),Object.entries(se).forEach((([e,t])=>null==le?void 0:le.style.setProperty(e,t,"important"))),le.value=e.value||e.placeholder||"";let u=le.scrollHeight;const p={};"border-box"===i?u+=s:"content-box"===i&&(u-=l),le.value="";const d=le.scrollHeight-l;if(t(a)){let e=d*a;"border-box"===i&&(e=e+l+s),u=Math.max(e,u),p.minHeight=`${e}px`}if(t(o)){let e=d*o;"border-box"===i&&(e=e+l+s),u=Math.min(e,u)}return p.height=`${u}px`,null==(n=le.parentNode)||n.removeChild(le),le=void 0,p}const ue=o({id:{type:String,default:void 0},size:i,disabled:Boolean,modelValue:{type:l([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:l([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:s},prefixIcon:{type:s},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:l([Object,Array,String]),default:()=>n({})},autofocus:Boolean,rows:{type:Number,default:2},...D(["ariaLabel"])}),pe={[J]:e=>a(e),input:e=>a(e),change:e=>a(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent};const de=u({name:"ElInput",inheritAttrs:!1});const ce=Y(r(u({...de,props:ue,emits:pe,setup(t,{expose:a,emit:o}){const n=t,l=p(),s=d(),i=c(),r=f((()=>["textarea"===n.type?ue.b():ie.b(),ie.m(le.value),ie.is("disabled",se.value),ie.is("exceed",Ne.value),{[ie.b("group")]:i.prepend||i.append,[ie.m("prefix")]:i.prefix||n.prefixIcon,[ie.m("suffix")]:i.suffix||n.suffixIcon||n.clearable||n.showPassword,[ie.bm("suffix","password-clear")]:Pe.value&&Fe.value,[ie.b("hidden")]:"hidden"===n.type},l.class])),u=f((()=>[ie.e("wrapper"),ie.is("focus",be.value)])),{form:Y,formItem:D}=q(),{inputId:ne}=G(n,{formItemContext:D}),le=Q(),se=X(),ie=v("input"),ue=v("textarea"),pe=m(),de=m(),ce=h(!1),fe=h(!1),ve=h(),me=m(n.inputStyle),he=f((()=>pe.value||de.value)),{wrapperRef:ye,isFocused:be,handleFocus:xe,handleBlur:ge}=te(he,{beforeFocus:()=>se.value,afterBlur(){var e;n.validateEvent&&(null==(e=null==D?void 0:D.validate)||e.call(D,"blur").catch((e=>oe())))}}),we=f((()=>{var e;return null!=(e=null==Y?void 0:Y.statusIcon)&&e})),Se=f((()=>(null==D?void 0:D.validateState)||"")),Ce=f((()=>Se.value&&y[Se.value])),ze=f((()=>fe.value?b:x)),ke=f((()=>[l.style])),Ee=f((()=>[n.inputStyle,me.value,{resize:n.resize}])),Ie=f((()=>g(n.modelValue)?"":String(n.modelValue))),Pe=f((()=>n.clearable&&!se.value&&!n.readonly&&!!Ie.value&&(be.value||ce.value))),Fe=f((()=>n.showPassword&&!se.value&&!!Ie.value&&(!!Ie.value||be.value))),Be=f((()=>n.showWordLimit&&!!n.maxlength&&("text"===n.type||"textarea"===n.type)&&!se.value&&!n.readonly&&!n.showPassword)),$e=f((()=>Ie.value.length)),Ne=f((()=>!!Be.value&&$e.value>Number(n.maxlength))),Me=f((()=>!!i.suffix||!!n.suffixIcon||Pe.value||n.showPassword||Be.value||!!Se.value&&we.value)),[_e,Re]=function(e){let t;return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(pe);w(de,(e=>{if(je(),!Be.value||"both"!==n.resize)return;const t=e[0],{width:a}=t.contentRect;ve.value={right:`calc(100% - ${a+15+6}px)`}}));const Ve=()=>{const{type:t,autosize:a}=n;if(e&&"textarea"===t&&de.value)if(a){const e=U(a)?a.minRows:void 0,t=U(a)?a.maxRows:void 0,o=re(de.value,e,t);me.value={overflowY:"hidden",...o},z((()=>{de.value.offsetHeight,me.value=o}))}else me.value={minHeight:re(de.value).minHeight}},je=(e=>{let t=!1;return()=>{var a;if(t||!n.autosize)return;null===(null==(a=de.value)?void 0:a.offsetParent)||(e(),t=!0)}})(Ve),He=()=>{const e=he.value,t=n.formatter?n.formatter(Ie.value):Ie.value;e&&e.value!==t&&(e.value=t)},Le=async e=>{_e();let{value:t}=e.target;n.formatter&&n.parser&&(t=n.parser(t)),Oe.value||(t!==Ie.value?(o(J,t),o(Z,t),await z(),He(),Re()):He())},Te=e=>{let{value:t}=e.target;n.formatter&&n.parser&&(t=n.parser(t)),o(ee,t)},{isComposing:Oe,handleCompositionStart:Ae,handleCompositionUpdate:We,handleCompositionEnd:Ke}=ae({emit:o,afterComposition:Le}),Ue=()=>{_e(),fe.value=!fe.value,setTimeout(Re)},Ye=e=>{ce.value=!1,o("mouseleave",e)},De=e=>{ce.value=!0,o("mouseenter",e)},Qe=e=>{o("keydown",e)},Xe=()=>{o(J,""),o(ee,""),o("clear"),o(Z,"")};return S((()=>n.modelValue),(()=>{var e;z((()=>Ve())),n.validateEvent&&(null==(e=null==D?void 0:D.validate)||e.call(D,"change").catch((e=>oe())))})),S(Ie,(()=>He())),S((()=>n.type),(async()=>{await z(),He(),Ve()})),C((()=>{!n.formatter&&n.parser,He(),z(Ve)})),a({input:pe,textarea:de,ref:he,textareaStyle:Ee,autosize:k(n,"autosize"),isComposing:Oe,focus:()=>{var e;return null==(e=he.value)?void 0:e.focus()},blur:()=>{var e;return null==(e=he.value)?void 0:e.blur()},select:()=>{var e;null==(e=he.value)||e.select()},clear:Xe,resizeTextarea:Ve}),(e,t)=>(I(),E("div",{class:$([N(r),{[N(ie).bm("group","append")]:e.$slots.append,[N(ie).bm("group","prepend")]:e.$slots.prepend}]),style:K(N(ke)),onMouseenter:De,onMouseleave:Ye},[P(" input "),"textarea"!==e.type?(I(),E(F,{key:0},[P(" prepend slot "),e.$slots.prepend?(I(),E("div",{key:0,class:$(N(ie).be("group","prepend"))},[M(e.$slots,"prepend")],2)):P("v-if",!0),B("div",{ref_key:"wrapperRef",ref:ye,class:$(N(u))},[P(" prefix slot "),e.$slots.prefix||e.prefixIcon?(I(),E("span",{key:0,class:$(N(ie).e("prefix"))},[B("span",{class:$(N(ie).e("prefix-inner"))},[M(e.$slots,"prefix"),e.prefixIcon?(I(),_(N(j),{key:0,class:$(N(ie).e("icon"))},{default:R((()=>[(I(),_(V(e.prefixIcon)))])),_:1},8,["class"])):P("v-if",!0)],2)],2)):P("v-if",!0),B("input",H({id:N(ne),ref_key:"input",ref:pe,class:N(ie).e("inner")},N(s),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?fe.value?"text":"password":e.type,disabled:N(se),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,onCompositionstart:N(Ae),onCompositionupdate:N(We),onCompositionend:N(Ke),onInput:Le,onChange:Te,onKeydown:Qe}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),P(" suffix slot "),N(Me)?(I(),E("span",{key:1,class:$(N(ie).e("suffix"))},[B("span",{class:$(N(ie).e("suffix-inner"))},[N(Pe)&&N(Fe)&&N(Be)?P("v-if",!0):(I(),E(F,{key:0},[M(e.$slots,"suffix"),e.suffixIcon?(I(),_(N(j),{key:0,class:$(N(ie).e("icon"))},{default:R((()=>[(I(),_(V(e.suffixIcon)))])),_:1},8,["class"])):P("v-if",!0)],64)),N(Pe)?(I(),_(N(j),{key:1,class:$([N(ie).e("icon"),N(ie).e("clear")]),onMousedown:O(N(A),["prevent"]),onClick:Xe},{default:R((()=>[L(N(T))])),_:1},8,["class","onMousedown"])):P("v-if",!0),N(Fe)?(I(),_(N(j),{key:2,class:$([N(ie).e("icon"),N(ie).e("password")]),onClick:Ue},{default:R((()=>[(I(),_(V(N(ze))))])),_:1},8,["class"])):P("v-if",!0),N(Be)?(I(),E("span",{key:3,class:$(N(ie).e("count"))},[B("span",{class:$(N(ie).e("count-inner"))},W(N($e))+" / "+W(e.maxlength),3)],2)):P("v-if",!0),N(Se)&&N(Ce)&&N(we)?(I(),_(N(j),{key:4,class:$([N(ie).e("icon"),N(ie).e("validateIcon"),N(ie).is("loading","validating"===N(Se))])},{default:R((()=>[(I(),_(V(N(Ce))))])),_:1},8,["class"])):P("v-if",!0)],2)],2)):P("v-if",!0)],2),P(" append slot "),e.$slots.append?(I(),E("div",{key:1,class:$(N(ie).be("group","append"))},[M(e.$slots,"append")],2)):P("v-if",!0)],64)):(I(),E(F,{key:1},[P(" textarea "),B("textarea",H({id:N(ne),ref_key:"textarea",ref:de,class:[N(ue).e("inner"),N(ie).is("focus",N(be))]},N(s),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:N(se),readonly:e.readonly,autocomplete:e.autocomplete,style:N(Ee),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:N(Ae),onCompositionupdate:N(We),onCompositionend:N(Ke),onInput:Le,onFocus:N(xe),onBlur:N(ge),onChange:Te,onKeydown:Qe}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),N(Be)?(I(),E("span",{key:0,style:K(ve.value),class:$(N(ie).e("count"))},W(N($e))+" / "+W(e.maxlength),7)):P("v-if",!0)],64))],38))}}),[["__file","input.vue"]]));export{ce as E,ne as i};
