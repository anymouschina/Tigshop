import{E as s}from"./ClnUiH43.js";import{_ as e}from"./Dev7PMii.js";import{E as r,a}from"./Di7_rRxo.js";import{E as o}from"./CK-rvtuG.js";import{e as t,cb as l,z as d,I as p,g as i,r as u,af as w,m as n,o as m,w as v,b as f,a as g,t as c,d as E,i as y,cd as b,_}from"./BLNaUqdG.js";import{f as $}from"./Dy66ZC1y.js";import"./BWAJcOoD.js";import"./losdC6Ud.js";import"./BwRzfsZt.js";import"./CxZS6lgh.js";import"./D_Dr4eZ1.js";import"./BX08AvzU.js";import"./C8QNSlsX.js";const j={class:"label"},h={class:"label"},V=_(t({__name:"StepTow",props:{step:{},stepModifiers:{},modelValue:{type:String},modelModifiers:{}},emits:["update:step","update:modelValue"],setup(t){const _=l(t,"step"),V=l(t,"modelValue"),{t:T}=d(),Z=p(),z=(s,e,r)=>{F.value.tigTips[s]=e?{type:"valid",message:r}:{type:"error",message:r}},k=s=>{F.value.tigTips[s]={type:"info",message:A[s]}},A=i({password:T("6-20个大小写英文字母、符号或数字的组合"),password2:T("请输入和上次相同的密码")}),q=i({password:[{validator:(s,e,r)=>e?e.length>20||e.length<6?r(new Error(T("密码应为6-20位字符"))):/\s/.test(e)?r(new Error(T("密码中不允许有空格"))):/^\d+$/.test(e)?r(new Error(T("密码不能全为数字"))):/^(?=.*[\d\W]).+$/.test(e)?/^(?=.*[a-zA-Z0-9]).+$/.test(e)?/^(?!([a-zA-Z0-9])\1*$).+$/.test(e)?void r():r(new Error(T("密码不能全为相同字符或数字"))):r(new Error(T("密码不能全为符号"))):r(new Error(T("密码不能全为字母"))):r(new Error(T("密码不能为空"))),trigger:"blur",required:!0}],password2:[{validator:(s,e,r)=>e?e.length>20||e.length<6?r(new Error(T("密码应为6-20位字符"))):/\s/.test(e)?r(new Error(T("密码中不允许有空格"))):/^\d+$/.test(e)?r(new Error(T("密码不能全为数字"))):/^(?=.*[\d\W]).+$/.test(e)?/^(?=.*[a-zA-Z0-9]).+$/.test(e)?/^(?!([a-zA-Z0-9])\1*$).+$/.test(e)?e!=F.value.password?r(new Error(T("两次输入密码不一致"))):void r():r(new Error(T("密码不能全为相同字符或数字"))):r(new Error(T("密码不能全为符号"))):r(new Error(T("密码不能全为字母"))):r(new Error(T("密码不能为空"))),trigger:"blur",required:!0}]}),x=u(!1),F=u({tigTips:{},password:"",password2:""}),I=w(),M=async()=>{await Z.value.validate();try{x.value=!0;await $({mobile_key:V.value,password:F.value.password});b.success(T("重置密码成功")),I.push("/member/login")}catch(s){b.error(s.message),_.value=1,V.value="",F.value.password="",F.value.password2=""}finally{x.value=!1}};return(t,l)=>{const d=s,p=e,i=r,u=o,w=a;return m(),n(w,{ref_key:"formRef",ref:Z,"hide-required-asterisk":!0,model:F.value,rules:y(q),"show-message":!1,class:"form-body","label-width":"auto",onValidate:z},{default:v((()=>[f(i,{prop:"password"},{default:v((()=>[g("div",j,c(t.$t("新密码")),1),f(d,{modelValue:F.value.password,"onUpdate:modelValue":l[0]||(l[0]=s=>F.value.password=s),class:"input-border-style","show-password":"",type:"password",onFocus:l[1]||(l[1]=s=>k("password"))},null,8,["modelValue"]),f(p,{info:F.value.tigTips.password},null,8,["info"])])),_:1}),f(i,{prop:"password2"},{default:v((()=>[g("div",h,c(t.$t("确认新密码")),1),f(d,{modelValue:F.value.password2,"onUpdate:modelValue":l[2]||(l[2]=s=>F.value.password2=s),class:"input-border-style","show-password":"",type:"password",onFocus:l[3]||(l[3]=s=>k("password2"))},null,8,["modelValue"]),f(p,{info:F.value.tigTips.password2},null,8,["info"])])),_:1}),f(i,{label:"",prop:"first_word"},{default:v((()=>[f(u,{loading:x.value,type:"primary",class:"submit-button",style:{width:"330px"},onClick:M},{default:v((()=>[E(c(t.$t("确 认")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules"])}}}),[["__scopeId","data-v-13c6899c"]]);export{V as default};
