import{c as e,d as a}from"./CdUPjuAS.js";import{_ as t}from"./DGSQZaL6.js";import{e as s,r as l,y as o,m as n,o as i,w as r,a as u,b as c,t as d,_ as p,z as v,s as _,c as m,a4 as y,h,i as f,d as g,A as k,aI as w,aJ as b,g as x,aK as S,G as $,Q as N,C,v as L,aa as j,ak as T,aL as I,F as M,l as q,aM as B,f as F,q as V,aN as D,aO as E,ah as K,aP as U,k as A,p as J,j as O}from"./BLNaUqdG.js";import{b as P}from"./Bp2G0jMz.js";import{u as Y}from"./D-E-9YUO.js";import"./C8IqyEYy.js";import"./CK-rvtuG.js";import"./ClnUiH43.js";import"./CQcoTD7x.js";import{c as z}from"./zM3V5R1F.js";import{_ as G}from"./DlIXSNl1.js";const H={class:"cart_info"},Q={class:"my-cart"},R=p(s({__name:"ShoppingCart",props:{pageType:{type:Number,default:1}},setup(a){const s=P(),p=Y();return l(s.cartCount),l(!1),l(!1),l([]),l(!1),o((()=>{p.userInfo.user_id>0&&s.changeCartList()})),(a,s)=>{const l=t,o=e;return i(),n(o,null,{default:r((({count:e})=>[u("div",H,[c(l,{to:"/cart/",class:"acea-row row-center-wrapper"},{default:r((()=>[s[0]||(s[0]=u("div",{class:"iconfont-pc icon-shiwu-gouwuche"},null,-1)),u("div",Q,d(a.$t("我的购物车")),1),u("em",null,d(e),1)])),_:2},1024)])])),_:1})}}}),[["__scopeId","data-v-04475bfa"]]),W={key:1,class:"ele-menu"},X={class:"feedback-menu"},Z={class:"wrap-btn"},ee=p(s({__name:"Service",props:{shop_id:{type:[Number,String],default:0},product_id:{type:[Number,String],default:0},order_id:{type:[Number,String],default:0},is_index:{type:Boolean,default:!1},phone:{type:String,default:""}},setup(e){const{t:a}=v(),t=e,s=l({h5_domain:"",url:"",open_type:0,show:"",service_type:0});(async()=>{try{const e=await z();s.value=e.item}catch(e){console.error(e)}})();const o=_((()=>s.value.h5_domain?s.value.h5_domain:window.location.origin+"/mobile")),n=async()=>{const e=s.value.service_type;if(0===e)return;const a=s.value.open_type;let l=s.value.url;const n=screen.height/2-350;if(4!==e)1==a?window.open(l,"_blank",`width=500,height=700,top=${n}`):window.open(l,"_blank");else{if(!k("accessToken").value)return w();l=`${o.value}/pages/im/index?token=${k("accessToken").value}&shop_id=${t.shop_id}&platform=${b}`,Number(t.product_id)>0&&(l+=`&product_id=${t.product_id}`),Number(t.order_id)>0&&(l+=`&order_id=${t.order_id}`),window.open(l,"_blank",`width=500,height=700,top=${n}`)}};return(a,t)=>e.is_index?(i(),m("div",{key:0,onClick:n},[f(s).show?y(a.$slots,"default",{key:0},void 0,!0):h("",!0)])):(i(),m("div",W,[f(s).show?(i(),m("div",{key:0,class:"card",onClick:n},[u("div",X,[u("div",Z,[t[0]||(t[0]=u("i",{class:"iconfont-pc icon-kefu"},null,-1)),g(" "+d(a.$t("客服")),1)])])])):h("",!0)]))}}),[["__scopeId","data-v-852077f3"]]),ae=s({__name:"StatisticLog",props:{product_id:{type:[Number,String],default:""},shop_id:{type:[Number,String],default:""},shop_category_id:{type:[Number,String],default:""},immediateLog:{type:Boolean,default:!0}},setup(e,{expose:a}){const t=e,s=x({}),l=async()=>{t.product_id&&(s.product_id=t.product_id),t.shop_id&&(s.shop_id=t.shop_id),t.shop_category_id&&(s.shop_category_id=t.shop_category_id);try{await S(s)}catch(e){console.error(e)}},n=_((()=>{const e=new Date;return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}));return(()=>{const e=k("lastDate");!e.value||((e,a)=>{const t=new Date(e),s=new Date(a);return Math.abs(t.getTime()-s.getTime())>=864e5})(n.value,e.value)?s.is_new=1:s.click=1,e.value=n.value})(),o((()=>{t.immediateLog&&l()})),a({__commonLog:l}),(e,a)=>(i(),m("div"))}}),te={class:"top-search"},se={class:"acea-row row-middle"},le=["placeholder"],oe={class:"search-guess-ul"},ne={class:"name"},ie=p(s({__name:"SimSearch",setup(e){const a=l([]);let s=!1,n=null;const p=()=>{if(s)return!1;clearTimeout(n),s=!0,n=setTimeout((async()=>{try{const e=await B(f.value);a.value=e.keyword_list,S.value=a.value.length>0}catch(e){}finally{s=!1}}),300)},v=$(),_=l(v.query.keyword),y=l(!1),f=l(""),g=f.value;_.value&&"/search/"===v.path&&(f.value=_.value),N((()=>v.query),(()=>{v.query.keyword||(f.value="")}),{deep:!0});const k=()=>{y.value=!0,f.value===g&&(f.value="")},w=()=>{""===f.value&&(f.value=g),y.value=!1},b=()=>{location.href="/search/?keyword="+f.value},x=l(null),S=l(!1),F=e=>{x.value&&!x.value.contains(e.target)&&(S.value=!1)};return o((()=>{window.addEventListener("click",F)})),C((()=>{window.removeEventListener("click",F)})),(e,s)=>{const l=t;return i(),m("div",te,[u("div",{class:L(["search-form",{"search-form-focus":y.value||""!=f.value}])},[u("div",se,[j(u("input",{type:"text",autocomplete:"off","onUpdate:modelValue":s[0]||(s[0]=e=>f.value=e),placeholder:e.$t("搜索"),class:"search-input",name:"keywords",onFocus:k,onFocusout:w,onKeyup:p,onKeydown:I(b,["enter"])},null,40,le),[[T,f.value]]),u("div",{type:"submit",class:"search-submit iconfont-pc icon-sousuo",onClick:b})])],2),S.value?(i(),m("div",{key:0,ref_key:"guessBox",ref:x,class:"search-guess-box"},[u("ul",oe,[(i(!0),m(M,null,q(a.value,((e,a)=>(i(),m("li",{key:a},[c(l,{to:"/search/?keyword="+e.keyword,class:"serlink"},{default:r((()=>[u("span",ne,d(e.keyword),1)])),_:2},1032,["to"])])))),128))])],512)):h("",!0)])}}}),[["__scopeId","data-v-e832877c"]]),re={class:"top-search"},ue={class:"acea-row row-middle"},ce=["placeholder"],de={class:"search-guess-ul"},pe={class:"name"},ve=p(s({__name:"DefSearch",setup(e){const a=l([]);let s=!1,n=null;const p=()=>{if(s)return!1;clearTimeout(n),s=!0,n=setTimeout((async()=>{try{const e=await B(f.value);a.value=e.keyword_list,S.value=a.value.length>0}catch(e){}finally{s=!1}}),300)},v=$(),_=l(v.query.keyword),y=l(!1),f=l(""),g=f.value;_.value&&"/search/"===v.path&&(f.value=_.value),N((()=>v.query),(()=>{v.query.keyword||(f.value="")}),{deep:!0});const k=()=>{y.value=!0,f.value===g&&(f.value="")},w=()=>{""===f.value&&(f.value=g),y.value=!1},b=()=>{location.href="/search/?keyword="+f.value},x=l(null),S=l(!1),F=e=>{x.value&&!x.value.contains(e.target)&&(S.value=!1)};return o((()=>{window.addEventListener("click",F)})),C((()=>{window.removeEventListener("click",F)})),(e,s)=>{const l=t;return i(),m("div",re,[u("div",{class:L(["search-form",{"search-form-focus":y.value||""!=f.value}])},[u("div",ue,[j(u("input",{type:"text",autocomplete:"off","onUpdate:modelValue":s[0]||(s[0]=e=>f.value=e),placeholder:e.$t("搜索"),class:"search-input",name:"keywords",onFocus:k,onFocusout:w,onKeyup:p,onKeydown:I(b,["enter"])},null,40,ce),[[T,f.value]]),u("div",{type:"submit",class:"search-submit iconfont-pc icon-sousuo",onClick:b})])],2),S.value?(i(),m("div",{key:0,ref_key:"guessBox",ref:x,class:"search-guess-box"},[u("ul",de,[(i(!0),m(M,null,q(a.value,((e,a)=>(i(),m("li",{key:a},[c(l,{to:"/search/?keyword="+e.keyword,class:"serlink"},{default:r((()=>[u("span",pe,d(e.keyword),1)])),_:2},1032,["to"])])))),128))])],512)):h("",!0)])}}}),[["__scopeId","data-v-11c304e1"]]);const _e={class:"cate_menu"},me=["onMouseenter"],ye={key:1,class:"cate_menu_line"},he={class:"subCata"},fe={class:"left"},ge={class:"nav_cata_bd"},ke={class:"item"},we={class:"title-list"},be={class:"name-list"},xe=p(s({__name:"AllCate",props:{isCateVisible:{type:Boolean,default:!1}},setup(e){const a=F();l("");(async()=>{if(null===a.allCate)try{const e=await D();a.allCate=e.cat_floor,""!=e.ico_defined_css&&function(e){let a=!1;if(a)return;if(document.head.querySelector(`link[href="${e}"]`))return void(a=!0);const t=document.createElement("link");t.href=e,t.type="text/css",t.rel="stylesheet",t.onload=()=>{a=!0},document.head.appendChild(t)}(e.ico_defined_css)}catch(e){}})();const s=l(null),o=()=>{s.value=null};return _((()=>"ca")),(e,l)=>{const p=t;return i(),m("div",{onMouseleave:o,onMouseenter:l[0]||(l[0]=e=>{clearTimeout(null)})},[u("div",_e,[(i(!0),m(M,null,q(f(a).allCate,((e,a)=>(i(),m("div",{class:L(["cate_menu_item",{active:s.value===a}]),onMouseenter:e=>(e=>{s.value=e})(a)},[u("span",{class:L("floor-ico "+e.floor_ico_font)},null,2),(i(!0),m(M,null,q(e.cat_list,((e,a)=>(i(),m(M,null,["-"!=e.name?(i(),n(p,{key:0,target:"_blank",class:"cate_menu_lk",to:f(V)({path:"list",id:e.id})},{default:r((()=>[g(d(e.name),1)])),_:2},1032,["to"])):h("",!0),"-"!=e.name?(i(),m("span",ye,"/")):h("",!0)],64)))),256))],42,me)))),256))]),u("div",he,[(i(!0),m(M,null,q(f(a).allCate,((e,a)=>(i(),m(M,{key:a},[s.value===a?(i(),m("div",{key:0,class:L(["subView",{active:s.value===a}])},[u("div",fe,[u("div",ge,[(i(!0),m(M,null,q(e.cat_list,((e,a)=>(i(),m(M,null,[(i(!0),m(M,null,q(e.children,(e=>(i(),m("div",ke,[u("div",we,[c(p,{to:f(V)({path:"list",id:e.category_id})},{default:r((()=>[g(d(e.category_name),1)])),_:2},1032,["to"]),l[1]||(l[1]=u("i",null," >",-1))]),u("div",be,[(i(!0),m(M,null,q(e.children,(e=>(i(),n(p,{to:f(V)({path:"list",id:e.category_id})},{default:r((()=>[g(d(e.category_name),1)])),_:2},1032,["to"])))),256))])])))),256))],64)))),256))])])],2)):h("",!0)],64)))),128))])],32)}}}),[["__scopeId","data-v-875a11d5"]]),Se={class:"nav-bd container flex align-end"},$e={class:"acea-row row-center-wrapper"},Ne={class:"sub-nav"},Ce=p(s({__name:"DefNav",props:{page:{type:String,default:""}},setup(e){const a=e,s=F();s.loadNav();const o=l(!1),p=l(!1),v=l(!1);let _=null;const y=async()=>{_=setTimeout((()=>{p.value=!0,o.value=!0}),300)},k=()=>{_&&clearTimeout(_),p.value=!1,o.value=!1,v.value=!1};return(e,l)=>{const v=xe,_=t,w=G;return i(),m("div",{class:L(["top-nav",{"top-nav-index":"index"===a.page}])},[u("div",Se,[u("div",{class:"main-nav-link",onMouseenter:y,onMouseleave:k},[u("div",$e,[u("div",null,d(e.$t("全部商品分类")),1),u("div",{class:L(["iconfont-pc icon-xiajiantou",f(p)?"icon-xiajiantou-hover":"not-icon-xiajiantou-hover"])},null,2)]),"index"!=a.page&&f(o)?(i(),m("div",{key:0,class:L(["hidden-cate",{"hidden-hover":f(o)}])},[f(o)?(i(),n(v,{key:0,isCateVisible:f(o),"onUpdate:isCateVisible":l[0]||(l[0]=e=>E(o)?o.value=e:null)},null,8,["isCateVisible"])):h("",!0)],2)):h("",!0)],32),u("ul",Ne,[u("li",null,[c(_,{to:"/",class:"alv1"},{default:r((()=>[g(d(e.$t("首页")),1)])),_:1})]),(i(!0),m(M,null,q(f(s).mainNav,((e,a)=>(i(),m("li",null,[c(w,{class:"alv1",item:e},{default:r((()=>[g(d(e.title),1)])),_:2},1032,["item"])])))),256)),f(K)()&&f(U)()?(i(),m(M,{key:0},[u("li",null,[c(_,{to:"/shop/list",class:"alv1"},{default:r((()=>[g(d(e.$t("店铺街")),1)])),_:1})]),u("li",null,[c(_,{to:"/join/intro",class:"alv1"},{default:r((()=>[g(d(e.$t("商家入驻")),1)])),_:1})])],64)):h("",!0)])])],2)}}}),[["__scopeId","data-v-5118011a"]]),Le={class:"header-nav"},je={class:"nav-item"},Te=p(s({__name:"SimNav",setup(e){const a=F();return a.loadNav(),(e,s)=>{const l=t;return i(),m("div",Le,[c(l,{class:"nav-item",to:"/"},{default:r((()=>[g(d(e.$t("首页")),1)])),_:1}),(i(!0),m(M,null,q(f(a).mainNav,((e,a)=>(i(),m("div",je,[c(l,{to:e.link?f(V)(e.link):"",class:"alv1"},{default:r((()=>[g(d(e.title),1)])),_:2},1032,["to"])])))),256)),f(K)()&&f(A)()?(i(),n(l,{key:0,class:"nav-item",to:"/join/intro"},{default:r((()=>[g(d(e.$t("商家入驻")),1)])),_:1})):h("",!0)])}}}),[["__scopeId","data-v-4eb1f81d"]]),Ie={class:"top-area container"},Me={class:"wrapper"},qe={class:"logo"},Be=["src"],Fe=p(s({__name:"PageHeader",props:{page:{type:String,default:""},showService:{type:Boolean,default:!1},shop_id:{type:[Number,String],default:0},product_id:{type:[Number,String],default:0},order_id:{type:[Number,String],default:0},shop_category_id:{type:[Number,String],default:""},immediateLog:{type:Boolean,default:!0},phone:{type:String,default:""}},setup(e,{expose:s}){const o=F(),d=l();o.loadNav();const p=_((()=>o.decorate_page_config.header_style)),v=_((()=>o.decorate_page_config.color_style));return s({handleLog:()=>{var e;null==(e=d.value)||e.__commonLog()}}),(s,l)=>{const _=a,y=t,g=R,k=ee,w=ae;return i(),m(M,null,[c(_,{colorType:f(v),pageType:f(p)},null,8,["colorType","pageType"]),u("div",{class:"header",style:J({borderBottom:1!=f(p)?"1px none #ddd":"1px solid #ddd"})},[u("div",Ie,[u("div",Me,[u("div",qe,[c(y,{"exact-active-class":"''",to:"/",class:"alv1"},{default:r((()=>[u("img",{style:J({width:1!=f(p)?"140px":"190px"}),src:("imageFormat"in s?s.imageFormat:f(O))(f(o).shopLogo),alt:""},null,12,Be)])),_:1})]),1!=f(p)?(i(),n(Te,{key:0,page:e.page},null,8,["page"])):h("",!0),1==f(p)?(i(),n(ve,{key:1})):(i(),n(ie,{key:2})),1==f(p)?(i(),n(g,{key:3})):h("",!0)]),1==f(p)?(i(),n(Ce,{key:0,page:e.page},null,8,["page"])):h("",!0)])],4),e.showService?(i(),n(k,{key:0,phone:e.phone,shop_id:e.shop_id,order_id:e.order_id,product_id:e.product_id},null,8,["phone","shop_id","order_id","product_id"])):h("",!0),c(w,{ref_key:"statisticLogRef",ref:d,immediateLog:e.immediateLog,shop_category_id:e.shop_category_id,shop_id:e.shop_id,product_id:e.product_id},null,8,["immediateLog","shop_category_id","shop_id","product_id"])],64)}}}),[["__scopeId","data-v-0af2bfb7"]]);export{xe as _,ee as a,Fe as b};
