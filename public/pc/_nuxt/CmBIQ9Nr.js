import{_ as e}from"./DGSQZaL6.js";import{a,E as l}from"./Di7_rRxo.js";import{_ as t}from"./CScYj7Fy.js";import{a as o,E as s}from"./DmeNR82d.js";import{E as u}from"./ClnUiH43.js";import{E as p}from"./CK-rvtuG.js";import{E as n}from"./Bil1wbyq.js";import{aq as c,e as m,f as d,r,I as i,c as _,o as v,F as y,b,a as f,w as $,m as h,h as g,d as k,t as V,p as j,i as O,a4 as w,n as x,_ as U}from"./BLNaUqdG.js";/* empty css        */import"./CQcoTD7x.js";import{g as T}from"./CrXMrCCc.js";const q=e=>c({url:"order/check/index",method:"post",data:e}),F=e=>c({url:"order/check/update",method:"post",data:e}),I=e=>c({url:"order/check/update_coupon",method:"post",data:e}),C=e=>c({url:"order/check/submit",method:"post",data:e}),E=e=>c({url:"order/check/get_invoice",method:"get",params:e}),R=()=>c({url:"order/check/get_available_payment_type",method:"get"}),S=e=>c({url:"order/check/get_store_shipping_type",method:"get",params:e}),P={class:"audit-status"},z={class:"message"},A={class:"message"},J={class:"extra"},K={class:"message"},M={class:"message"},Y={class:"message"},B={class:"message"},D={class:"message"},G={class:"message"},H={class:"message"},L={class:"message"},N={class:"message"},Q={class:"extra"},W={class:"message"},X={class:"message"},Z={class:"message"},ee={class:"message"},ae={class:"message"},le={class:"message"},te={class:"message"},oe={class:"extra"},se={class:"message"},ue={class:"message"},pe={key:0,class:"audit-status"},ne={class:"message blue"},ce={key:0,class:"extra"},me={key:1,class:"extra"},de={key:2,class:"extra"},re={class:"audit-status"},ie={class:"var(--price)"},_e={class:"audit-status"},ve={class:"var(--price)"},ye={class:"dialog-footer"},be=U(m({__name:"Info",props:{params:{type:Object,default:{}}},emits:["loadFilter","callback","changeType"],setup(m,{emit:U}){const q=m,F=d(),I=e=>{switch(e){case 0:return{color:"#f58b49"};case 1:return{color:"green"};case 2:return{color:"red"};default:return{}}},C=r(!0),R=i(),S=i(),be=i(),fe=r(!1),$e=r({}),he=r({}),ge=r({}),ke=r({}),Ve=r({}),je=async()=>{fe.value=!0,R.value&&await R.value.resetFields(),"check"===q.params.type&&await Oe(),"apply"!=q.params.type&&"check"!=q.params.type&&await we(),"check"==q.params.type&&(Object.assign($e.value,q.params.invoice_data),Object.assign(he.value,q.params.invoice_data),Object.assign(ge.value,q.params.invoice_data),Object.assign(ke.value,q.params.invoice_data)),await Ue()},Oe=async()=>{try{const e=await E({...$e.value});let a={company_code:"",company_name:"",company_address:"",company_phone:"",company_bank:"",company_account:"",invoice_content:"",mobile:"",email:""};if(e.item)Object.assign($e.value,e.item),Object.assign(he.value,e.item),Object.assign(ge.value,e.item),Object.assign(ke.value,e.item);else if(1===$e.value.title_type){let e={company_name:q.params.address.consignee,mobile:q.params.address.mobile,email:q.params.address.email};Object.assign($e.value,e),Object.assign(he.value,e),Object.assign(ge.value,e),Object.assign(ke.value,e)}else Object.assign($e.value,a),Object.assign(he.value,a),Object.assign(ge.value,a),Object.assign(ke.value,a);$e.value.amount=q.params.amount}catch(e){x.error(e.message)}},we=async()=>{try{C.value=!0;const a=await(e={id:q.params.order_id},c({url:"user/order_invoice/detail",method:"get",params:e}));Object.assign($e.value,a.item),Object.assign(he.value,a.item),Object.assign(ge.value,a.item),Object.assign(ke.value,a.item)}catch(a){x.error(a.message)}finally{C.value=!1}var e},xe=r(!1),Ue=async()=>{try{const e=await T();e.item?(xe.value=!0,Object.assign(Ve.value,e.item)):xe.value=!1}catch(e){x.error(e.message)}finally{C.value=!1}},Te=U,qe=e=>{"check"==q.params.type&&(Te("changeType",{type:e,value:"invoice_type"==e?$e.value.invoice_type:$e.value.title_type}),"invoice_type"==e&&2==$e.value.invoice_type&&Ue())},Fe=()=>{Te("callback",{}),fe.value=!1},Ie=async()=>{R.value&&await R.value.validate();try{C.value=!0;let l={id:q.params.order_id,invoice_type:$e.value.invoice_type,title_type:$e.value.title_type,mobile:$e.value.mobile,email:$e.value.email,amount:$e.value.amount};if(l.invoice_content=$e.value.invoice_content,1===$e.value.invoice_type&&1===$e.value.title_type?(R.value&&await S.value.validate(),l.company_code="",l.company_name=ge.value.company_name,l.company_address="",l.company_phone="",l.company_bank="",l.company_account=""):1===$e.value.invoice_type&&2===$e.value.title_type?(R.value&&await be.value.validate(),l.company_code=ke.value.company_code,l.company_name=ke.value.company_name,l.company_address=ke.value.company_address,l.company_phone=ke.value.company_phone,l.company_bank=ke.value.company_bank,l.company_account=ke.value.company_account):2===$e.value.invoice_type&&(l.company_code=Ve.value.company_code,l.company_name=Ve.value.company_name,l.company_address=Ve.value.company_address,l.company_phone=Ve.value.company_phone,l.company_bank=Ve.value.company_bank,l.company_account=Ve.value.company_account),"check"!=q.params.type){const t=await(e=l,a="apply"===q.params.type?"create":"update",c({url:"user/order_invoice/"+a,method:"post",params:e}));await R.value.resetFields(),x.success(t.message),fe.value=!1,Te("loadFilter")}else delete l.id,fe.value=!1,Te("callback",l)}catch(l){x.error(l.message)}finally{C.value=!1}var e,a};return(c,d)=>{const r=e,i=l,x=t,U=a,T=s,q=o,C=u,E=p,Oe=n;return v(),_(y,null,[b(Oe,{modelValue:fe.value,"onUpdate:modelValue":d[17]||(d[17]=e=>fe.value=e),title:c.$t("发票申请"),width:"800"},{footer:$((()=>[f("div",ye,["reapply"===m.params.type||"apply"===m.params.type||"check"===m.params.type?(v(),h(E,{key:0,plain:"",onClick:Fe},{default:$((()=>[k(V(c.$t("暂不开票")),1)])),_:1})):g("",!0),"reapply"===m.params.type||"apply"===m.params.type||"check"===m.params.type?(v(),h(E,{key:1,disabled:2===$e.value.invoice_type&&!xe.value,type:"primary",onClick:Ie},{default:$((()=>[k(V(c.$t("提交开票申请")),1)])),_:1},8,["disabled"])):g("",!0)])])),default:$((()=>["info"===m.params.type?(v(),h(U,{key:0,"label-width":"auto",model:he.value,class:"form-body","label-suffix":"："},{default:$((()=>[f("div",P,[k(V(c.$t("审核状态"))+"： ",1),f("span",{style:j(I(he.value.status))},V(he.value.status_name),5),d[18]||(d[18]=f("br",null,null,-1)),f("span",null,V(he.value.apply_reply),1)]),"check"!=m.params.type?(v(),h(i,{key:0,label:c.$t("订单号"),prop:"order_sn"},{default:$((()=>[f("span",z,[b(r,{to:"/member/order/info?id="+he.value.order_id,class:"font-color",target:"_blank"},{default:$((()=>[k(V(he.value.order_sn),1)])),_:1},8,["to"])])])),_:1},8,["label"])):g("",!0),"check"!=m.params.type?(v(),h(i,{key:1,label:c.$t("订单金额"),prop:"total_amount"},{default:$((()=>[b(x,{modelValue:he.value.total_amount,"onUpdate:modelValue":d[0]||(d[0]=e=>he.value.total_amount=e),showText:!1},null,8,["modelValue"])])),_:1},8,["label"])):g("",!0),"check"!=m.params.type?(v(),h(i,{key:2,label:c.$t("发票金额"),prop:"amount"},{default:$((()=>[b(x,{modelValue:he.value.amount,"onUpdate:modelValue":d[1]||(d[1]=e=>he.value.amount=e),fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue"])])),_:1},8,["label"])):g("",!0),b(i,{label:c.$t("发票类型"),prop:"invoice_type"},{default:$((()=>[f("span",A,V(1===he.value.invoice_type?c.$t("普通发票"):c.$t("增值税专用发票")),1),f("div",J,V(c.$t("所有发票由商品供货商开具")),1)])),_:1},8,["label"]),b(i,{label:c.$t("发票抬头"),prop:"title_type"},{default:$((()=>[f("span",K,V(1===he.value.title_type?c.$t("个人"):c.$t("企业")),1)])),_:1},8,["label"]),1===he.value.invoice_type?(v(),_(y,{key:3},[1===he.value.title_type?(v(),h(i,{key:0,label:c.$t("个人名称"),prop:"company_name"},{default:$((()=>[f("span",M,V(he.value.company_name),1)])),_:1},8,["label"])):(v(),_(y,{key:1},[b(i,{label:c.$t("企业名称"),prop:"company_name"},{default:$((()=>[f("span",Y,V(he.value.company_name),1)])),_:1},8,["label"]),b(i,{label:c.$t("纳税人识号"),prop:"company_code"},{default:$((()=>[f("span",B,V(he.value.company_code),1)])),_:1},8,["label"]),b(i,{label:c.$t("单位地址"),prop:"company_address"},{default:$((()=>[f("span",D,V(he.value.company_address),1)])),_:1},8,["label"]),b(i,{label:c.$t("单位电话"),prop:"company_phone"},{default:$((()=>[f("span",G,V(he.value.company_phone),1)])),_:1},8,["label"]),b(i,{label:c.$t("开户银行"),prop:"company_bank"},{default:$((()=>[f("span",H,V(he.value.company_bank),1)])),_:1},8,["label"]),b(i,{label:c.$t("银行账户"),prop:"company_account"},{default:$((()=>[f("span",L,V(he.value.company_account),1)])),_:1},8,["label"])],64))],64)):g("",!0),b(i,{label:c.$t("发票内容"),prop:"invoice_content"},{default:$((()=>[f("span",N,V(c.$t("商品明细")),1),f("div",Q,V(c.$t("发票内容将显示详细商品名称与价格信息")),1)])),_:1},8,["label"]),2===$e.value.invoice_type?(v(),_(y,{key:4},[b(i,{label:c.$t("单位名称")},{default:$((()=>[f("span",W,V(he.value.company_name),1)])),_:1},8,["label"]),b(i,{label:c.$t("纳税人识别码")},{default:$((()=>[f("span",X,V(he.value.company_code),1)])),_:1},8,["label"]),b(i,{label:c.$t("注册地址")},{default:$((()=>[f("span",Z,V(he.value.company_address),1)])),_:1},8,["label"]),b(i,{label:c.$t("注册电话")},{default:$((()=>[f("span",ee,V(he.value.company_phone),1)])),_:1},8,["label"]),b(i,{label:c.$t("开户银行")},{default:$((()=>[f("span",ae,V(he.value.company_bank),1)])),_:1},8,["label"]),b(i,{label:c.$t("银行账户")},{default:$((()=>[f("span",le,V(he.value.company_account),1)])),_:1},8,["label"]),b(i,{label:c.$t("发票内容"),prop:"invoice_content"},{default:$((()=>[f("span",te,V(c.$t("商品明细")),1),f("div",oe,V(c.$t("发票内容将显示详细商品名称与价格信息")),1)])),_:1},8,["label"])],64)):g("",!0),b(i,{label:c.$t("收票人手机"),prop:"mobile"},{default:$((()=>[f("span",se,V(he.value.mobile),1)])),_:1},8,["label"]),b(i,{label:c.$t("收票人邮箱"),prop:"email"},{default:$((()=>[f("span",ue,V(he.value.email),1)])),_:1},8,["label"])])),_:1},8,["model"])):(v(),h(U,{key:1,ref_key:"formRef",ref:R,"label-width":110,model:$e.value,class:"form-body","label-suffix":"："},{default:$((()=>["reapply"===m.params.type?(v(),_("div",pe,[k(V(c.$t("审核状态"))+"： ",1),f("span",{style:j(I($e.value.status))},V($e.value.status_name),5),d[19]||(d[19]=f("br",null,null,-1)),f("span",null,V($e.value.apply_reply),1)])):g("",!0),"check"!=m.params.type?(v(),h(i,{key:1,label:c.$t("订单号"),prop:"order_sn"},{default:$((()=>[f("span",ne,[b(r,{to:"/member/order/info?id="+$e.value.order_id,target:"_blank"},{default:$((()=>[k(V($e.value.order_sn),1)])),_:1},8,["to"])])])),_:1},8,["label"])):g("",!0),"check"!=m.params.type?(v(),h(i,{key:2,label:c.$t("订单金额"),prop:"total_amount"},{default:$((()=>[b(x,{modelValue:$e.value.total_amount,"onUpdate:modelValue":d[2]||(d[2]=e=>$e.value.total_amount=e),showText:!1},null,8,["modelValue"])])),_:1},8,["label"])):g("",!0),"check"!=m.params.type?(v(),h(i,{key:3,label:c.$t("发票金额"),prop:"amount"},{default:$((()=>[b(x,{modelValue:$e.value.amount,"onUpdate:modelValue":d[3]||(d[3]=e=>$e.value.amount=e),fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue"])])),_:1},8,["label"])):g("",!0),b(i,{label:c.$t("发票类型"),prop:"invoice_type"},{default:$((()=>[b(q,{modelValue:$e.value.invoice_type,"onUpdate:modelValue":d[4]||(d[4]=e=>$e.value.invoice_type=e),onChange:d[5]||(d[5]=e=>qe("invoice_type"))},{default:$((()=>[b(T,{value:1},{default:$((()=>[k(V(c.$t("普通发票")),1)])),_:1}),1==O(F).invoiceAdded?(v(),h(T,{key:0,value:2},{default:$((()=>[k(V(c.$t("增值税专用发票")),1)])),_:1})):g("",!0)])),_:1},8,["modelValue"]),1===$e.value.invoice_type?(v(),_("div",ce,V(c.$t("所有发票由商品供货商开具")),1)):g("",!0),2===$e.value.invoice_type&&xe.value?(v(),_("div",me,V(c.$t("所有发票由商品供货商开具")),1)):g("",!0),2!==$e.value.invoice_type||xe.value?g("",!0):(v(),_("div",de,[k(V(c.$t("您还未通过增票资质申请，暂时无法开具增值税专用发票"))+"， ",1),b(r,{class:"font-color",to:"/member/userInvoice/info"},{default:$((()=>[k(V(c.$t("点击这里")),1)])),_:1}),k(" "+V(c.$t("去申请增票资质"))+"。 ",1)]))])),_:1},8,["label"]),1===$e.value.invoice_type?(v(),_(y,{key:4},[f("div",re,[f("p",null,V(c.$t("根据现行税收政策，部分公司提供数电票，数电（普通发票）法律效力与现有电子普通发票相同"))+"；",1),f("p",null,V(c.$t("电子普通发票和纸质普通发票具备同等法律效力，可支持报销入账"))+"；",1),f("p",null,V(c.$t("如商品由第三方卖家销售，发票类型及内容将由该卖家决定"))+"；",1),f("p",null,V(c.$t("如您为企业采购，需要多单合并开具或批量提交发票可注册企业用户"))+"；",1),f("p",ie,V(c.$t("使用礼品卡支付部分的金额，不支持开发票")),1)]),b(i,{label:c.$t("发票抬头"),prop:"title_type"},{default:$((()=>[b(q,{modelValue:$e.value.title_type,"onUpdate:modelValue":d[6]||(d[6]=e=>$e.value.title_type=e),onChange:d[7]||(d[7]=e=>qe("title_type"))},{default:$((()=>[b(T,{value:1},{default:$((()=>[k(V(c.$t("个人")),1)])),_:1}),b(T,{value:2},{default:$((()=>[k(V(c.$t("企业")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"]),1===$e.value.title_type?(v(),h(U,{key:0,ref_key:"formOneRef",ref:S,"label-width":110,model:ge.value,class:"form-body","label-suffix":"："},{default:$((()=>[b(i,{rules:[{required:!0,message:c.$t("个人名称不能为空")}],label:c.$t("个人名称"),prop:"company_name"},{default:$((()=>[b(C,{modelValue:ge.value.company_name,"onUpdate:modelValue":d[8]||(d[8]=e=>ge.value.company_name=e),clearable:"",placeholder:c.$t("请输入个人名称")},null,8,["modelValue","placeholder"])])),_:1},8,["rules","label"])])),_:1},8,["model"])):(v(),h(U,{key:1,ref_key:"formFirmRef",ref:be,"label-width":110,model:ke.value,class:"form-body","label-suffix":"："},{default:$((()=>[b(i,{rules:[{required:!0,message:c.$t("企业名称不能为空")}],label:c.$t("企业名称"),prop:"company_name"},{default:$((()=>[b(C,{modelValue:ke.value.company_name,"onUpdate:modelValue":d[9]||(d[9]=e=>ke.value.company_name=e),clearable:"",placeholder:c.$t("请输入企业名称")},null,8,["modelValue","placeholder"])])),_:1},8,["rules","label"]),b(i,{rules:[{required:!0,message:c.$t("纳税人识号不能为空")}],label:c.$t("纳税人识号"),prop:"company_code"},{default:$((()=>[b(C,{modelValue:ke.value.company_code,"onUpdate:modelValue":d[10]||(d[10]=e=>ke.value.company_code=e),clearable:"",placeholder:c.$t("请输入纳税人识号")},null,8,["modelValue","placeholder"])])),_:1},8,["rules","label"]),b(i,{label:c.$t("单位地址"),prop:"company_address"},{default:$((()=>[b(C,{modelValue:ke.value.company_address,"onUpdate:modelValue":d[11]||(d[11]=e=>ke.value.company_address=e),clearable:"",placeholder:c.$t("请输入单位地址")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),b(i,{label:c.$t("单位电话"),prop:"company_phone"},{default:$((()=>[b(C,{modelValue:ke.value.company_phone,"onUpdate:modelValue":d[12]||(d[12]=e=>ke.value.company_phone=e),clearable:"",placeholder:c.$t("请输入单位电话")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),b(i,{label:c.$t("开户银行"),prop:"company_bank"},{default:$((()=>[b(C,{modelValue:ke.value.company_bank,"onUpdate:modelValue":d[13]||(d[13]=e=>ke.value.company_bank=e),clearable:"",placeholder:c.$t("请输入开户银行")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),b(i,{label:c.$t("银行账户"),prop:"company_account"},{default:$((()=>[b(C,{modelValue:ke.value.company_account,"onUpdate:modelValue":d[14]||(d[14]=e=>ke.value.company_account=e),clearable:"",placeholder:c.$t("请输入银行账户")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"]))],64)):2===$e.value.invoice_type&&xe.value?(v(),h(U,{key:5,ref:"formInvoiceRef","label-width":110,model:Ve.value,class:"form-body","label-suffix":"："},{default:$((()=>[f("div",_e,[f("p",null,V(c.$t("我公司依法开具发票，请您按照税法规定使用发票"))+"。",1),f("p",null,V(c.$t("根据现行税收政策，部分公司提供数电票, 数电（专用发票）法律效力与现有增值税专用发票相同"))+";",1),f("p",null,V(c.$t("如商品由第三方卖家销售，发票类型和内容将由该卖家决定，发票由卖家开具并提供"))+"。",1),f("p",null,V(c.$t("如您为企业采购，需要多单合并开具或批量提交发票可注册企业用户"))+"；",1),f("p",ve,V(c.$t("使用礼品卡支付部分的金额，不支持开发票")),1)]),b(i,{label:c.$t("单位名称")},{default:$((()=>[k(V(Ve.value.company_name),1)])),_:1},8,["label"]),b(i,{label:c.$t("纳税人识别码")},{default:$((()=>[k(V(Ve.value.company_code),1)])),_:1},8,["label"]),b(i,{label:c.$t("注册地址")},{default:$((()=>[k(V(Ve.value.company_address),1)])),_:1},8,["label"]),b(i,{label:c.$t("注册电话")},{default:$((()=>[k(V(Ve.value.company_phone),1)])),_:1},8,["label"]),b(i,{label:c.$t("开户银行")},{default:$((()=>[k(V(Ve.value.company_bank),1)])),_:1},8,["label"]),b(i,{label:c.$t("银行账户")},{default:$((()=>[k(V(Ve.value.company_account),1)])),_:1},8,["label"])])),_:1},8,["model"])):g("",!0),0!=$e.value.invoice_type?(v(),_(y,{key:6},[b(i,{rules:[{required:!0,message:c.$t("手机不能为空")}],label:c.$t("收票人手机"),prop:"mobile"},{default:$((()=>[b(C,{modelValue:$e.value.mobile,"onUpdate:modelValue":d[15]||(d[15]=e=>$e.value.mobile=e),clearable:"",placeholder:c.$t("请输入收票人手机")},null,8,["modelValue","placeholder"])])),_:1},8,["rules","label"]),b(i,{rules:[{required:1!==$e.value.invoice_type,message:c.$t("邮箱不能为空")}],label:c.$t("收票人邮箱"),prop:"email"},{default:$((()=>[b(C,{modelValue:$e.value.email,"onUpdate:modelValue":d[16]||(d[16]=e=>$e.value.email=e),clearable:"",placeholder:c.$t("请输入收票人邮箱")},null,8,["modelValue","placeholder"])])),_:1},8,["rules","label"])],64)):g("",!0)])),_:1},8,["model"]))])),_:1},8,["modelValue","title"]),f("span",{onClick:je},[w(c.$slots,"default",{},void 0,!0)])],64)}}}),[["__scopeId","data-v-2726dfca"]]),fe=Object.freeze(Object.defineProperty({__proto__:null,default:be},Symbol.toStringTag,{value:"Module"}));export{be as I,I as a,S as b,q as c,E as d,fe as e,R as g,C as o,F as u};
