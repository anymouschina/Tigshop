import{c as e,d as a}from"./B3kMr2Om.js";import{_ as t}from"./DRy-t1KR.js";import{e as l,y as s,m as o,o as n,w as r,a as u,b as c,t as d,_ as i,z as p,r as v,s as m,c as y,a4 as h,h as f,i as g,d as _,A as k,aK as w,aL as I,g as b,aM as C,G as S,Q as x,C as N,v as $,aa as L,ak as T,aN as j,F as D,l as F,aO as M,f as q,q as B,aP as V,ar as E,ah as K,aQ as P,k as U,p as A,j as O}from"./vO8z_6wc.js";import{b as Q}from"./ExFuuhw5.js";import{u as Y}from"./Ctuj9lAE.js";import"./pBde3eXe.js";import"./OZUBBuO3.js";import"./duVALuQ5.js";import"./YLitFIRx.js";import{c as z}from"./B6kpiin_.js";import{_ as G}from"./BG07ctRk.js";const H={class:"cart_info"},J={class:"my-cart"},R=i(l({__name:"ShoppingCart",props:{pageType:{type:Number,default:1}},setup(a){const l=Q(),i=Y();return s((()=>{i.userInfo.userId>0&&l.changeCartList()})),(a,l)=>{const s=t,i=e;return n(),o(i,null,{default:r((({count:e})=>[u("div",H,[c(s,{to:"/cart/",class:"acea-row row-center-wrapper"},{default:r((()=>[l[0]||(l[0]=u("div",{class:"iconfont-pc icon-shiwu-gouwuche"},null,-1)),u("div",J,d(a.$t("我的购物车")),1),u("em",null,d(e),1)])),_:2},1024)])])),_:1})}}}),[["__scopeId","data-v-b0bdd92c"]]),W={key:1,class:"ele-menu"},X={class:"feedback-menu"},Z={class:"wrap-btn"},ee=i(l({__name:"Service",props:{shopId:{type:[Number,String],default:0},productId:{type:[Number,String],default:0},orderId:{type:[Number,String],default:0},isIndex:{type:Boolean,default:!1},phone:{type:String,default:""}},setup(e){const{t:a}=p(),t=e,l=v({h5Domain:"",url:"",openType:0,show:"",serviceType:0});(async()=>{try{const e=await z();l.value=e}catch(e){console.error(e)}})();const s=m((()=>l.value.h5Domain?l.value.h5Domain:window.location.origin+"/mobile")),o=async()=>{const e=l.value.serviceType;if(0===e)return;const a=l.value.openType;let o=l.value.url;const n=screen.height/2-350;if(4!==e)1==a?window.open(o,"_blank",`width=500,height=700,top=${n}`):window.open(o,"_blank");else{if(!k("accessToken").value)return w();o=`${s.value}/pages/im/index?token=${k("accessToken").value}&shopId=${t.shopId}&platform=${I}`,Number(t.productId)>0&&(o+=`&productId=${t.productId}`),Number(t.orderId)>0&&(o+=`&orderId=${t.orderId}`),window.open(o,"_blank",`width=500,height=700,top=${n}`)}};return(a,t)=>e.isIndex?(n(),y("div",{key:0,onClick:o},[g(l).show?h(a.$slots,"default",{key:0},void 0,!0):f("",!0)])):(n(),y("div",W,[g(l).show?(n(),y("div",{key:0,class:"card",onClick:o},[u("div",X,[u("div",Z,[t[0]||(t[0]=u("i",{class:"iconfont-pc icon-kefu"},null,-1)),_(" "+d(a.$t("客服")),1)])])])):f("",!0)]))}}),[["__scopeId","data-v-7ad24b4f"]]),ae=l({__name:"StatisticLog",props:{productId:{type:[Number,String],default:""},shopId:{type:[Number,String],default:""},shopCategoryId:{type:[Number,String],default:""},immediateLog:{type:Boolean,default:!0}},setup(e,{expose:a}){const t=e,l=b({}),o=async()=>{t.productId&&(l.productId=t.productId),t.shopId&&(l.shopId=t.shopId),t.shopCategoryId&&(l.shopCategoryId=t.shopCategoryId);try{await C(l)}catch(e){console.error(e)}},r=m((()=>{const e=new Date;return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}));return(()=>{const e=k("lastDate");!e.value||((e,a)=>{const t=new Date(e),l=new Date(a);return Math.abs(t.getTime()-l.getTime())>=864e5})(r.value,e.value)?l.isNew=1:l.click=1,e.value=r.value})(),s((()=>{t.immediateLog&&o()})),a({__commonLog:o}),(e,a)=>(n(),y("div"))}}),te={class:"top-search"},le={class:"acea-row row-middle"},se=["placeholder"],oe={class:"search-guess-ul"},ne={class:"name"},re=i(l({__name:"SimSearch",setup(e){const a=v([]);let l=!1,o=null;const i=()=>{if(l)return!1;clearTimeout(o),l=!0,o=setTimeout((async()=>{try{const e=await M(g.value);a.value=e,C.value=a.value.length>0}catch(e){}finally{l=!1}}),300)},p=S(),m=v(p.query.keyword),h=v(!1),g=v(""),_=g.value;m.value&&"/search/"===p.path&&(g.value=m.value),x((()=>p.query),(()=>{p.query.keyword||(g.value="")}),{deep:!0});const k=()=>{h.value=!0,g.value===_&&(g.value="")},w=()=>{""===g.value&&(g.value=_),h.value=!1},I=()=>{location.href="/search/?keyword="+g.value},b=v(null),C=v(!1),q=e=>{b.value&&!b.value.contains(e.target)&&(C.value=!1)};return s((()=>{window.addEventListener("click",q)})),N((()=>{window.removeEventListener("click",q)})),(e,l)=>{const s=t;return n(),y("div",te,[u("div",{class:$(["search-form",{"search-form-focus":h.value||""!=g.value}])},[u("div",le,[L(u("input",{type:"text",autocomplete:"off","onUpdate:modelValue":l[0]||(l[0]=e=>g.value=e),placeholder:e.$t("搜索"),class:"search-input",name:"keywords",onFocus:k,onFocusout:w,onKeyup:i,onKeydown:j(I,["enter"])},null,40,se),[[T,g.value]]),u("div",{type:"submit",class:"search-submit iconfont-pc icon-sousuo",onClick:I})])],2),C.value?(n(),y("div",{key:0,ref_key:"guessBox",ref:b,class:"search-guess-box"},[u("ul",oe,[(n(!0),y(D,null,F(a.value,((e,a)=>(n(),y("li",{key:a},[c(s,{to:"/search/?keyword="+e.keyword,class:"serlink"},{default:r((()=>[u("span",ne,d(e.keyword),1)])),_:2},1032,["to"])])))),128))])],512)):f("",!0)])}}}),[["__scopeId","data-v-b4fb70b2"]]),ue={class:"top-search"},ce={class:"acea-row row-middle"},de=["placeholder"],ie={class:"search-guess-ul"},pe={class:"name"},ve=i(l({__name:"DefSearch",setup(e){const a=v([]);let l=!1,o=null;const i=()=>{if(l)return!1;clearTimeout(o),l=!0,o=setTimeout((async()=>{try{const e=await M(g.value);a.value=e,C.value=a.value.length>0}catch(e){}finally{l=!1}}),300)},p=S(),m=v(p.query.keyword),h=v(!1),g=v(""),_=g.value;m.value&&"/search/"===p.path&&(g.value=m.value),x((()=>p.query),(()=>{p.query.keyword||(g.value="")}),{deep:!0});const k=()=>{h.value=!0,g.value===_&&(g.value="")},w=()=>{""===g.value&&(g.value=_),h.value=!1},I=()=>{location.href="/search/?keyword="+g.value},b=v(null),C=v(!1),q=e=>{b.value&&!b.value.contains(e.target)&&(C.value=!1)};return s((()=>{window.addEventListener("click",q)})),N((()=>{window.removeEventListener("click",q)})),(e,l)=>{const s=t;return n(),y("div",ue,[u("div",{class:$(["search-form",{"search-form-focus":h.value||""!=g.value}])},[u("div",ce,[L(u("input",{type:"text",autocomplete:"off","onUpdate:modelValue":l[0]||(l[0]=e=>g.value=e),placeholder:e.$t("搜索"),class:"search-input",name:"keywords",onFocus:k,onFocusout:w,onKeyup:i,onKeydown:j(I,["enter"])},null,40,de),[[T,g.value]]),u("div",{type:"submit",class:"search-submit iconfont-pc icon-sousuo",onClick:I})])],2),C.value?(n(),y("div",{key:0,ref_key:"guessBox",ref:b,class:"search-guess-box"},[u("ul",ie,[(n(!0),y(D,null,F(a.value,((e,a)=>(n(),y("li",{key:a},[c(s,{to:"/search/?keyword="+e.keyword,class:"serlink"},{default:r((()=>[u("span",pe,d(e.keyword),1)])),_:2},1032,["to"])])))),128))])],512)):f("",!0)])}}}),[["__scopeId","data-v-8db2aced"]]);const me={class:"cate_menu"},ye=["onMouseenter"],he={key:1,class:"cate_menu_line"},fe={class:"subCata"},ge={class:"left"},_e={class:"nav_cata_bd"},ke={class:"item"},we={class:"title-list"},Ie={key:0},be={key:0,class:"name-list"},Ce=i(l({__name:"AllCate",props:{isCateVisible:{type:Boolean,default:!1}},setup(e){const a=q();v("");(async()=>{if(null===a.allCate)try{const e=await V();a.allCate=e.catFloor,""!=e.icoDefinedCss&&function(e){let a=!1;if(a)return;if(document.head.querySelector(`link[href="${e}"]`))return void(a=!0);const t=document.createElement("link");t.href=e,t.type="text/css",t.rel="stylesheet",t.onload=()=>{a=!0},document.head.appendChild(t)}(e.icoDefinedCss)}catch(e){}})();const l=v(null),s=()=>{l.value=null};return m((()=>"ca")),(e,i)=>{const p=t;return n(),y("div",{onMouseleave:s},[u("div",me,[(n(!0),y(D,null,F(g(a).allCate,((e,a)=>(n(),y("div",{class:$(["cate_menu_item",{active:l.value===a}]),onMouseenter:e=>(e=>{l.value=e})(a)},[u("span",{class:$("floor-ico "+e.floorIcoFont)},null,2),(n(!0),y(D,null,F(e.catList,((e,a)=>(n(),y(D,null,["-"!=e.name?(n(),o(p,{key:0,target:"_blank",class:"cate_menu_lk",to:g(B)({path:"list",id:e.id})},{default:r((()=>[_(d(e.name),1)])),_:2},1032,["to"])):f("",!0),"-"!=e.name?(n(),y("span",he,"/")):f("",!0)],64)))),256))],42,ye)))),256))]),u("div",fe,[(n(!0),y(D,null,F(g(a).allCate,((e,a)=>(n(),y("div",{key:a,class:$(["subView",{active:l.value===a}])},[u("div",ge,[u("div",_e,[(n(!0),y(D,null,F(e.catList,((e,a)=>(n(),y(D,null,[(n(!0),y(D,null,F(e.children,(e=>{var a,t;return n(),y("div",ke,[u("div",we,[c(p,{to:g(B)({path:"list",id:e.categoryId})},{default:r((()=>[_(d(e.categoryName),1)])),_:2},1032,["to"]),(null==(a=e.children)?void 0:a.length)?(n(),y("i",Ie," >")):f("",!0)]),(null==(t=e.children)?void 0:t.length)?(n(),y("div",be,[(n(!0),y(D,null,F(e.children,(e=>(n(),o(p,{to:g(B)({path:"list",id:e.categoryId})},{default:r((()=>[_(d(e.categoryName),1)])),_:2},1032,["to"])))),256))])):f("",!0)])})),256))],64)))),256))])])],2)))),128))])],32)}}}),[["__scopeId","data-v-3b359fc9"]]),Se={class:"nav-bd container flex align-end"},xe={class:"acea-row row-center-wrapper"},Ne={class:"sub-nav"},$e=i(l({__name:"DefNav",props:{page:{type:String,default:""}},setup(e){const a=e,l=q();l.loadNav();const s=v(!1),i=v(!1),p=v(!1);let m=null;const h=async()=>{m=setTimeout((()=>{i.value=!0,s.value=!0}),300)},k=()=>{m&&clearTimeout(m),i.value=!1,s.value=!1,p.value=!1};return(e,p)=>{const v=Ce,m=t,w=G;return n(),y("div",{class:$(["top-nav",{"top-nav-index":"index"===a.page}])},[u("div",Se,[u("div",{class:"main-nav-link",onMouseenter:h,onMouseleave:k},[u("div",xe,[u("div",null,d(e.$t("全部商品分类")),1),u("div",{class:$(["iconfont-pc icon-xiajiantou",g(i)?"icon-xiajiantou-hover":"not-icon-xiajiantou-hover"])},null,2)]),"index"!=a.page&&g(s)?(n(),y("div",{key:0,class:$(["hidden-cate",{"hidden-hover":g(s)}])},[g(s)?(n(),o(v,{key:0,isCateVisible:g(s),"onUpdate:isCateVisible":p[0]||(p[0]=e=>E(s)?s.value=e:null)},null,8,["isCateVisible"])):f("",!0)],2)):f("",!0)],32),u("ul",Ne,[u("li",null,[c(m,{to:"/",class:"alv1"},{default:r((()=>[_(d(e.$t("首页")),1)])),_:1})]),(n(!0),y(D,null,F(g(l).mainNav,((e,a)=>(n(),y("li",null,[c(w,{class:"alv1",item:e},{default:r((()=>[_(d(e.title),1)])),_:2},1032,["item"])])))),256)),g(K)()&&g(P)()?(n(),y(D,{key:0},[u("li",null,[c(m,{to:"/shop/list",class:"alv1"},{default:r((()=>[_(d(e.$t("店铺街")),1)])),_:1})]),u("li",null,[c(m,{to:"/join/intro",class:"alv1"},{default:r((()=>[_(d(e.$t("商家入驻")),1)])),_:1})])],64)):f("",!0)])])],2)}}}),[["__scopeId","data-v-5118011a"]]),Le={class:"header-nav"},Te={class:"nav-item"},je=i(l({__name:"SimNav",setup(e){const a=q();return a.loadNav(),(e,l)=>{const s=t;return n(),y("div",Le,[c(s,{class:"nav-item",to:"/"},{default:r((()=>[_(d(e.$t("首页")),1)])),_:1}),(n(!0),y(D,null,F(g(a).mainNav,((e,a)=>(n(),y("div",Te,[c(s,{to:e.link?g(B)(e.link):"",class:"alv1"},{default:r((()=>[_(d(e.title),1)])),_:2},1032,["to"])])))),256)),g(K)()&&g(U)()?(n(),o(s,{key:0,class:"nav-item",to:"/join/intro"},{default:r((()=>[_(d(e.$t("商家入驻")),1)])),_:1})):f("",!0)])}}}),[["__scopeId","data-v-4eb1f81d"]]),De={class:"top-area container"},Fe={class:"wrapper"},Me={class:"logo"},qe=["src"],Be=i(l({__name:"PageHeader",props:{page:{type:String,default:""},showService:{type:Boolean,default:!1},shopId:{type:[Number,String],default:0},productId:{type:[Number,String],default:0},orderId:{type:[Number,String],default:0},shopCategoryId:{type:[Number,String],default:""},immediateLog:{type:Boolean,default:!0},phone:{type:String,default:""}},setup(e,{expose:l}){const s=q(),d=v();s.loadNav();const i=m((()=>{var e;return null==(e=s.decoratePageConfig)?void 0:e.headerStyle})),p=m((()=>{var e;return null==(e=s.decoratePageConfig)?void 0:e.colorStyle}));return l({handleLog:()=>{var e;null==(e=d.value)||e.__commonLog()}}),(l,v)=>{const m=a,h=t,_=R,k=ee,w=ae;return n(),y(D,null,[c(m,{colorType:g(p),pageType:g(i)},null,8,["colorType","pageType"]),u("div",{class:"header",style:A({borderBottom:1!=g(i)?"1px none #ddd":"1px solid #ddd"})},[u("div",De,[u("div",Fe,[u("div",Me,[c(h,{"exact-active-class":"''",to:"/",class:"alv1"},{default:r((()=>[u("img",{style:A({width:1!=g(i)?"140px":"190px"}),src:("imageFormat"in l?l.imageFormat:g(O))(g(s).shopLogo),alt:""},null,12,qe)])),_:1})]),1!=g(i)?(n(),o(je,{key:0,page:e.page},null,8,["page"])):f("",!0),1==g(i)?(n(),o(ve,{key:1})):(n(),o(re,{key:2})),1==g(i)?(n(),o(_,{key:3})):f("",!0)]),1==g(i)?(n(),o($e,{key:0,page:e.page},null,8,["page"])):f("",!0)])],4),e.showService?(n(),o(k,{key:0,phone:e.phone,shopId:e.shopId,orderId:e.orderId,productId:e.productId},null,8,["phone","shopId","orderId","productId"])):f("",!0),c(w,{ref_key:"statisticLogRef",ref:d,immediateLog:e.immediateLog,shopCategoryId:e.shopCategoryId,shopId:e.shopId,productId:e.productId},null,8,["immediateLog","shopCategoryId","shopId","productId"])],64)}}}),[["__scopeId","data-v-61820251"]]);export{Ce as _,ee as a,Be as b};
