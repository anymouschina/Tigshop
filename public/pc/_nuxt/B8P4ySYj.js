import{_ as Z}from"./BYDV-pPC.js";import{_ as x}from"./uNNarvbF.js";import{_ as ee}from"./DA1gAKyu.js";import{_ as le}from"./BX9e-DjI.js";import{E as te}from"./XomGKeK5.js";import{E as ae}from"./lRlBa-wu.js";import{E as oe,a as se}from"./CPhr9T1V.js";import{f as ne,Y as re,r as y,q as ue,H as ie,m as V,a8 as de,s as me,o as r,c as u,b as n,a as e,h as U,w as d,d as M,t as o,i as m,F as c,l as f,a5 as ce,j as p,x as g,a0 as pe,a1 as _e,y as ve,ab as C,z as fe,_ as ge}from"./DvlzeZYf.js";import{_ as he}from"./CzQrJ5jx.js";import{_ as be}from"./CPg1UVcC.js";import{_ as ye}from"./BCw_XNK7.js";import{E as Ve}from"./BMKQ3sGo.js";import{v as $e}from"./C_PfpWcu.js";import"./DEXPT9kT.js";import{a as we,u as ke,c as Fe}from"./DZpr14jx.js";import{U as Ue}from"./BDZmXE2g.js";import"./CljOOE4N.js";import"./ctHFjQ9z.js";import"./6IjmK16v.js";import"./DXZCNwre.js";import"./BB_Ol6Sd.js";import"./BxwJi-A4.js";import"./CvS5MqkS.js";import"./B9SirqjL.js";import"./Cq9Fpw4b.js";import"./D5p5RYpQ.js";import"./DGzzo1G8.js";import"./DldgdBu3.js";import"./DCTLXrZ8.js";import"./De9iyrrl.js";import"./C3hftOhu.js";import"./CFi7q_x0.js";/* empty css        */import"./JPAiA_Rf.js";import"./DrjGOYyT.js";import"./eXzid_I5.js";import"./BpsRniw3.js";import"./DHvqcBjr.js";const Ee={class:"container flex"},Te={class:"menu"},Le={class:"info-row"},Ce={class:"title-or-tabs"},Se={class:"tag-and-input"},Ie={class:"tig-tabs"},Re={key:0,class:"log-return-content"},Ne={class:"button-col"},qe={class:"tig-steps"},ze={style:{"font-weight":"600"}},Be={key:0,class:"file-card"},Me={class:"info-card"},Ae={class:"table-header"},je={class:"header-cell"},De={class:"header-cell",style:{width:"60px"}},He={class:"header-cell",style:{width:"60px"}},Pe={class:"header-cell",style:{width:"60px"}},Oe={class:"header-cell",style:{width:"60px"}},Ye={class:"text-ellipsis"},Ge={class:"name"},Je={class:"value"},Ke={key:0},Qe={class:"info-card"},We={key:0},Xe={class:"application-picture"},Ze={key:0},xe={key:1},el={key:2},ll={class:"info-card"},tl={class:"table-header"},al={class:"header-cell",style:{width:"120px"}},ol={class:"header-cell",style:{width:"160px"}},sl={class:"header-cell"},nl={class:"bt-image"},rl={key:1,class:"log-return-content"},ul={class:"image"},il=ne({__name:"LogInfo",setup(dl){const{t:E}=re(),A=y(""),S=y(!1),T=y([]),j=ue(),a=y({step_status:{},pics_list:[],return_pic:[],pics:[]}),$=y(!0);ie(()=>{I()});const I=async()=>{var l;try{$.value=!0;const s=await we({id:j.currentRoute.value.query.id});Object.assign(a.value,s.item),T.value=s.item.aftersales_items?s.item.aftersales_items:[],(l=T.value)==null||l.forEach(h=>{h.subtotal=h.quantity*h.price})}catch(s){V.error(s.message)}finally{$.value=!1}},L=de(),D=async()=>{await L.value.validate();try{const l=await ke({id:a.value.aftersale_id,...a.value});V.success(l.message),await L.value.resetFields(),await I()}catch(l){V.error(l.message)}finally{}},H=async l=>{pe.confirm({title:E("确认删要撤销申请吗"),cancelText:E("取消"),okText:E("确定"),maskClosable:!0,centered:!0,onOk:async()=>{try{const s=await Fe({aftersale_id:l});V.success(s.message),_e("/member/return/log")}catch(s){V.error(s.message)}finally{}}})},P=me([{value:"退/换货申请",url:"/member/return/list",size:0},{value:"申请记录",url:"/member/return/log",size:0}]);return(l,s)=>{const h=Z,O=x,Y=ee,G=le,R=te,w=ae,_=oe,J=se,k=ve,K=he,v=be,Q=ye,W=Ve,X=$e;return r(),u(c,null,[n(h),n(O,{title:"申请详情"}),e("div",Ee,[e("div",Te,[n(Y)]),e("div",Le,[e("div",Ce,[e("div",Se,[e("div",Ie,[n(G,{menuList:P},null,8,["menuList"])])])]),$.value?ce((r(),u("div",rl,null,512)),[[X,$.value]]):(r(),u("div",Re,[e("div",Ne,[a.value.can_cancel?(r(),U(R,{key:0,onClick:s[0]||(s[0]=t=>H(Number(a.value.aftersale_id)))},{default:d(()=>[M(o(l.$t("撤销")),1)]),_:1})):m("",!0)]),e("div",qe,[(r(!0),u(c,null,f(a.value.step_status.steps,(t,i)=>{var F,b,N,q,z,B;return r(),u(c,null,[e("div",{style:C({color:t.active?"var(--general)":"#c4c4c4",border:t.active?"4px solid var(--general)":"4px solid #eee"}),class:"steps-card"},[e("div",ze,o(i+1),1),e("div",{style:C({color:t.active?"var(--general)":"#333"}),class:"card-text"},[e("div",null,o(t.title),1),e("div",null,o(t.description),1)],4)],4),i!=Number(((N=(b=(F=a.value)==null?void 0:F.step_status)==null?void 0:b.steps)!=null&&N.length?(B=(z=(q=a.value)==null?void 0:q.step_status)==null?void 0:z.steps)==null?void 0:B.length:0)-1)?(r(),u("div",{key:0,style:C({backgroundColor:a.value.step_status.steps[i+1].active?"var(--general)":"#eee"}),class:"steps-line"},null,4)):m("",!0)],64)}),256))]),a.value.status!=6?(r(),u("div",Be,[a.value.status!=7?(r(),U(J,{key:0,ref_key:"formRef",ref:L,"label-width":100,model:a.value,class:"form-body","label-suffix":"："},{default:d(()=>[n(_,{label:l.$t("问题补充"),prop:"log_info"},{default:d(()=>[n(w,{modelValue:a.value.log_info,"onUpdate:modelValue":s[1]||(s[1]=t=>a.value.log_info=t),row:4,clearable:"",placeholder:l.$t("请输入问题补充"),type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a.value.status===4?(r(),u(c,{key:0},[n(_,{label:l.$t("回寄地址"),prop:"return_address"},{default:d(()=>[n(w,{modelValue:a.value.return_address,"onUpdate:modelValue":s[2]||(s[2]=t=>a.value.return_address=t),readonly:"",clearable:"",type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"]),n(_,{rules:[{required:!0,message:l.$t("快递公司不能为空!")}],label:l.$t("快递公司"),prop:"logistics_name"},{default:d(()=>[n(w,{modelValue:a.value.logistics_name,"onUpdate:modelValue":s[3]||(s[3]=t=>a.value.logistics_name=t),clearable:"",placeholder:l.$t("请输入快递公司")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"]),n(_,{rules:[{required:!0,message:l.$t("快递单号不能为空!")}],label:l.$t("快递单号"),prop:"tracking_no"},{default:d(()=>[n(w,{modelValue:a.value.tracking_no,"onUpdate:modelValue":s[4]||(s[4]=t=>a.value.tracking_no=t),clearable:"",placeholder:l.$t("请输入快递单号"),type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"])],64)):m("",!0),n(_,{label:l.$t("上传文件"),prop:"return_pic"},{default:d(()=>[n(Ue,{uploadList:a.value.return_pic,"onUpdate:uploadList":s[5]||(s[5]=t=>a.value.return_pic=t),fileTypes:["jpeg","png"],limit:5},null,8,["uploadList"])]),_:1},8,["label"]),n(_,{label:""},{default:d(()=>[n(R,{type:"primary",onClick:D},{default:d(()=>[M(o(l.$t("提交")),1)]),_:1})]),_:1})]),_:1},8,["model"])):m("",!0)])):m("",!0),e("div",Me,[e("table",null,[e("thead",Ae,[e("tr",null,[e("th",je,o(l.$t("商品名称")),1),e("th",De,o(l.$t("商品价格")),1),e("th",He,o(l.$t("购买数量")),1),e("th",Pe,o(l.$t("小计")),1),e("th",Oe,o(l.$t("退/换数量")),1)])]),e("tbody",null,[(r(!0),u(c,null,f(T.value,t=>(r(),u("tr",null,[e("td",null,[n(K,{title:t.product_name,to:p(fe)({path:"product",id:t.item_id,sn:t.product_sn}),class:"nuxt",target:"_blank"},{default:d(()=>[n(k,{src:("imageFormat"in l?l.imageFormat:p(g))(t.pic_thumb),class:"pro_pic",loading:"lazy",style:{transition:"opacity 0.2s linear","flex-shrink":"0"}},null,8,["src"]),e("div",null,[e("div",Ye,[e("ul",null,[e("li",null,o(l.$t("货号"))+"："+o(t.product_sn),1),e("li",null,o(t.product_name),1),e("li",null,[(r(!0),u(c,null,f(t.sku_data,(i,F)=>{var b;return r(),u(c,null,[e("span",Ge,o(i.name)+"：",1),e("span",Je,o(i.value),1),F<((b=t.sku_data)==null?void 0:b.length)-1?(r(),u("span",Ke,"；")):m("",!0)],64)}),256))])])])])]),_:2},1032,["title","to"])]),e("td",null,[n(v,{modelValue:t.price,"onUpdate:modelValue":i=>t.price=i,fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,o(t.quantity),1),e("td",null,[n(v,{modelValue:t.subtotal,"onUpdate:modelValue":i=>t.subtotal=i,fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,o(t.number),1)]))),256))])])]),e("div",Qe,[e("table",null,[e("tbody",null,[e("tr",null,[e("td",null,o(l.$t("买家问题描述"))+":",1),e("td",null,o(a.value.description),1)]),e("tr",null,[e("td",null,o(l.$t("服务类型"))+":",1),e("td",null,o(a.value.aftersales_type_name),1)]),e("tr",null,[e("td",null,o(l.$t("退款金额"))+":",1),e("td",null,[n(v,{modelValue:a.value.refund_amount,"onUpdate:modelValue":s[6]||(s[6]=t=>a.value.refund_amount=t),showText:!1},null,8,["modelValue"])])]),e("tr",null,[e("td",null,o(l.$t("售后类型"))+":",1),e("td",null,o(a.value.aftersale_reason),1)]),a.value.status===4?(r(),u("tr",We,[e("td",null,o(l.$t("退货地址"))+":",1),e("td",null,o(a.value.return_address),1)])):m("",!0),e("tr",null,[e("td",null,o(l.$t("申请图片"))+":",1),e("td",null,[e("div",Xe,[(r(!0),u(c,null,f(a.value.pics,t=>(r(),U(k,{src:("imageFormat"in l?l.imageFormat:p(g))(t.pic_thumb),fit:"cover",style:{width:"80px",height:"80px"},"preview-src-list":[("imageFormat"in l?l.imageFormat:p(g))(t.pic_url)],"initial-index":0},null,8,["src","preview-src-list"]))),256))])])]),a.value.refund?(r(),u(c,{key:1},[a.value.refund.is_online>0?(r(),u("tr",Ze,[e("td",null,o(l.$t("线上退款金额"))+":",1),e("td",null,[n(v,{modelValue:a.value.refund.online_balance,"onUpdate:modelValue":s[7]||(s[7]=t=>a.value.refund.online_balance=t),showText:!1},null,8,["modelValue"])])])):m("",!0),a.value.refund.is_offline>0?(r(),u("tr",xe,[e("td",null,o(l.$t("线下退款金额"))+":",1),e("td",null,[n(v,{modelValue:a.value.refund.offline_balance,"onUpdate:modelValue":s[8]||(s[8]=t=>a.value.refund.offline_balance=t),showText:!1},null,8,["modelValue"])])])):m("",!0),a.value.refund.is_receive>0?(r(),u("tr",el,[e("td",null,o(l.$t("余额退款金额"))+":",1),e("td",null,[n(v,{modelValue:a.value.refund.refund_balance,"onUpdate:modelValue":s[9]||(s[9]=t=>a.value.refund.refund_balance=t),showText:!1},null,8,["modelValue"])])])):m("",!0)],64)):m("",!0)])])]),e("div",ll,[e("table",null,[e("thead",tl,[e("tr",null,[e("th",al,o(l.$t("发言人")),1),e("th",ol,o(l.$t("时间")),1),e("th",sl,o(l.$t("信息")),1)])]),e("tbody",null,[(r(!0),u(c,null,f(a.value.aftersales_log,t=>(r(),u("tr",null,[e("td",null,o(t.user_name?t.user_name:t.admin_name),1),e("td",null,o(t.add_time),1),e("td",null,[e("div",nl,[e("div",null,o(t.log_info),1),(r(!0),u(c,null,f(t.return_pic,i=>(r(),U(k,{src:("imageFormat"in l?l.imageFormat:p(g))(i.pic_url),fit:"cover",class:"bt-img",loading:"lazy",style:{transition:"opacity 0.2s linear"},"preview-src-list":[("imageFormat"in l?l.imageFormat:p(g))(i.pic_url)],"initial-index":0},null,8,["src","preview-src-list"]))),256))])])]))),256))])])])]))])]),n(Q),n(W,{modelValue:S.value,"onUpdate:modelValue":s[10]||(s[10]=t=>S.value=t)},{default:d(()=>[e("div",ul,[n(k,{src:("imageFormat"in l?l.imageFormat:p(g))(A.value),alt:"",fit:"cover"},null,8,["src"])])]),_:1},8,["modelValue"])],64)}}}),Ql=ge(il,[["__scopeId","data-v-89e5c6be"]]);export{Ql as default};
