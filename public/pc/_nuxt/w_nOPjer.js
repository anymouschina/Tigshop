import{a as e,b as a}from"./BPYtos7D.js";import{e as t,f as s,aj as r,z as u,r as d,c as i,o,v as c,a4 as l,B as p,n,_ as y}from"./vO8z_6wc.js";import{b as f}from"./ExFuuhw5.js";const b=y(t({__name:"Buy",props:{id:Number,number:{type:Number},skuId:{type:Number},extraAttrIds:{type:String,default:""},disabled:{type:Boolean,default:!1},isQuick:{type:Boolean,default:!1},productType:{type:String,default:"product"},skuItem:{type:Array}},emits:["callback"],setup(t,{emit:y}){const b=f(),m=s(),k=r(),I=t,{t:v}=u(),h=y,x=d(!1),g=async()=>{try{if(I.disabled)return;if(x.value)return;x.value=!0;let t={};const s={id:I.id??0,number:I.number,skuId:I.skuId,isQuick:I.isQuick?1:0};if(I.extraAttrIds&&(s.extraAttrIds=I.extraAttrIds),p(),"product"==I.productType?t=await e(s):"exchange"==I.productType&&(t=await a(s)),1==I.isQuick){if(1===m.closeOrder)return n.error(v("商城已关闭下单"));k.push({path:"/order/check",query:{flowType:t.flowType}})}else b.changeCartList(),n.success(v("加入购物车成功")),h("callback")}catch(t){n.error(t.message)}finally{x.value=!1}};return(e,a)=>(o(),i("div",{class:c("buy "+(1==t.disabled?"disabled":"")),onClick:g},[l(e.$slots,"default",{},void 0,!0)],2))}}),[["__scopeId","data-v-bf4b7373"]]);export{b as B};
