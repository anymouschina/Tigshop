import{_ as s}from"./DIcT5qlW.js";import{b as a}from"./Bx_3tXOW.js";import{E as t}from"./OZUBBuO3.js";import{E as i}from"./Gg6iJLt9.js";import{_ as e}from"./B6kpiin_.js";import{e as l,r as o,g as r,y as n,c,o as m,b as p,a as d,t as j,w as u,d as f,m as g,h as v,F as y,l as _,v as h,ag as x,i as k,n as w,ae as b,q as C,_ as $}from"./vO8z_6wc.js";import{P as z}from"./DGiXcmvN.js";import{g as I,e as R,f as E,h as J}from"./B3kMr2Om.js";import"./DEtxbcwL.js";import"./DRy-t1KR.js";import"./ExFuuhw5.js";import"./Ctuj9lAE.js";import"./pBde3eXe.js";import"./duVALuQ5.js";import"./CdIa5lAL.js";import"./CKVP4sCQ.js";import"./BwRzfsZt.js";import"./B0jPhJeY.js";import"./D_Dr4eZ1.js";import"./YLitFIRx.js";import"./C8tVKSc2.js";import"./BG07ctRk.js";import"./DqoL2U0I.js";import"./y2YKyhRU.js";import"./123WnbAt.js";import"./C_yTnQv7.js";import"./DgmxjSXK.js";import"./VsleDggW.js";import"./4BWvF7DS.js";import"./6_reTNGa.js";import"./C0xcqOw0.js";/* empty css        */const O={class:"message_center container flex"},P={class:"mc_side_bar"},T={class:"title"},U={class:"fl"},q={class:"nav_list"},D={class:"fl"},F={class:"msg_list"},H={class:"flex justify-end"},K={class:"list"},L=["onClick"],M={class:"time"},N={class:"message flex justify-between"},Q={class:"title flex align-center"},S={class:"txt"},W={class:"flex flex-column align-end",style:{"min-width":"50px"}},X={class:"date"},Y=["onClick"],Z={key:2,class:"el-page flex justify-end"},A=$(l({__name:"List",setup(l){const $=o([]),A=o(!0),B=o(0),G=r({page:1,unread:0}),V=async()=>{A.value=!0;try{const s=await I({...G});$.value=s.records,B.value=s.total}catch(s){w.error(s.message)}finally{A.value=!1}},ss=async()=>{G.unread=1;try{await V()}catch(s){w.error(s.message)}},as=async()=>{try{await J(),G.unread=0,await V()}catch(s){w.error(s.message)}};return n((()=>{V()})),(l,o)=>{const r=s,n=a,I=t,J=i,ts=e;return m(),c(y,null,[p(r,{title:"站内信"}),p(n),d("div",O,[d("div",P,[d("h3",T,[o[2]||(o[2]=d("i",{class:"iconfont-pc icon-xiaoxi"},null,-1)),d("span",U,j(l.$t("消息中心")),1)]),d("div",q,[o[3]||(o[3]=d("i",{class:"icon"},null,-1)),d("span",D,j(l.$t("账户信息")),1)])]),d("div",F,[d("div",H,[p(I,{onClick:ss},{default:u((()=>[f(j(l.$t("只看未读")),1)])),_:1}),p(I,{onClick:as},{default:u((()=>[f(j(l.$t("全部标记为已读")),1)])),_:1})]),d("div",K,[B.value>0?(m(!0),c(y,{key:0},_($.value,(s=>(m(),c("div",{class:"item flex",onClick:a=>(async s=>{try{1!==s.isRead&&(await E(s.messageId),s.isRead=1);let a=JSON.parse(s.link);b(C(a.data),{open:{target:"_blank"}})}catch(a){}})(s)},[d("div",M,j(s.addTimeDate),1),d("div",{class:h(["msg_info flex",s.isRead?"unread":""])},[o[5]||(o[5]=d("div",{class:"icon msg"},null,-1)),d("div",N,[d("div",null,[d("h3",Q,[o[4]||(o[4]=d("div",{class:"icon"},null,-1)),d("span",null,j(s.title),1)]),d("p",S,j(s.content),1)]),d("div",W,[d("p",X,j(s.addTimeHms),1),d("i",{class:"iconfont-pc icon-changyonggoupiaorenshanchu del",onClick:x((a=>(async s=>{try{await R(s),await V()}catch(a){w.error(a.message)}})({id:s.messageId})),["stop"])},null,8,Y)])])],2)],8,L)))),256)):(m(),g(J,{key:1,description:l.$t("暂无消息")},null,8,["description"])),$.value.length>0&&!A.value?(m(),c("div",Z,[p(k(z),{page:G.page,"onUpdate:page":o[0]||(o[0]=s=>G.page=s),size:G.size,"onUpdate:size":o[1]||(o[1]=s=>G.size=s),total:B.value,onCallback:V},null,8,["page","size","total"])])):v("",!0)])])]),p(ts)],64)}}}),[["__scopeId","data-v-28308a3b"]]);export{A as default};
