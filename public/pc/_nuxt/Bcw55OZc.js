import{_ as e}from"./9TMjRzGO.js";import{_ as a}from"./DGSQZaL6.js";import{_ as t}from"./CScYj7Fy.js";import{e as s,r as l,g as i,y as o,c as n,o as d,F as u,a as c,h as p,a4 as r,b as v,w as m,d as _,t as y,aa as f,ak as g,i as h,n as b,_ as k,z as x,f as V,G as $,s as w,m as j,l as U,v as I,j as C,q as T,E as L,k as O,al as q,ae as E}from"./BLNaUqdG.js";import{E as P}from"./ClnUiH43.js";import{E as z}from"./CttV6g0d.js";import{a as S,_ as M}from"./CdUPjuAS.js";import{E as R}from"./rSOsbbvW.js";import{_ as W}from"./DqAohYkb.js";import{E as N}from"./CK-rvtuG.js";import{_ as D}from"./zM3V5R1F.js";import"./l0sNRNKZ.js";import"./C8qdh5cF.js";import G from"./Dy5vXTrb.js";import J from"./fHRHsk4K.js";import{E as Z}from"./Bil1wbyq.js";import"./CQcoTD7x.js";import{S as A}from"./Bx-i_3JP.js";import{g as B,u as F,a as H,s as K}from"./JbGyAwPJ.js";import{I as Q,u as X,a as Y,o as ee,g as ae,b as te,c as se,d as le}from"./CmBIQ9Nr.js";import{_ as ie}from"./CDP8RcFe.js";import{_ as oe}from"./BQU4hTf6.js";import{u as ne}from"./D-E-9YUO.js";import{E as de}from"./DjYrY2s1.js";import"./DSwxsogY.js";import"./BWAJcOoD.js";import"./losdC6Ud.js";import"./BwRzfsZt.js";import"./CxZS6lgh.js";import"./D_Dr4eZ1.js";import"./C8QNSlsX.js";import"./DlIXSNl1.js";import"./Bp2G0jMz.js";import"./DmeNR82d.js";import"./BucM0pco.js";import"./BX08AvzU.js";import"./DIIF5iVx.js";/* empty css        */import"./DgmxjSXK.js";import"./DxiXPFL-.js";import"./D5ZJ33IS.js";import"./Di7_rRxo.js";import"./CrXMrCCc.js";import"./DMt5YlZL.js";import"./BylEjn3l.js";import"./C8IqyEYy.js";const ue={key:0,class:"modal_region_box"},ce={key:0,class:"address_from"},pe={class:"from_item"},re={class:"tit"},ve={class:"inp"},me={class:"from_item"},_e={class:"tit"},ye={class:"inp"},fe={class:"from_item"},ge={class:"tit"},he={class:"from_item"},be={class:"tit"},ke={class:"inp"},xe={class:"from_item"},Ve={class:"tit"},$e={class:"inp"},we={class:"from_item"},je={class:"btn_box"},Ue=k(s({__name:"ModalRegion",props:{addressId:{type:Number,default:0}},emits:["change"],setup(e,{emit:a}){const t=a,s=e,k=l(!1),x=l(!1),V={consignee:"",region_ids:[]},$=i({...V}),w=l(!0),j=()=>{x.value=!0,k.value=!0,s.addressId>0?I():w.value=!1};o((()=>{}));const U=()=>{Object.assign($,{...V})},I=async()=>{try{const e=await B(s.addressId);Object.assign($,e.item)}catch(e){b.error(e.message)}finally{w.value=!1}};return(a,s)=>{const l=Z;return d(),n(u,null,[c("div",{onClick:j,style:{display:"inline-flex",cursor:"pointer"}},[r(a.$slots,"default",{},void 0,!0)]),k.value?(d(),n("div",ue,[v(l,{modelValue:x.value,"onUpdate:modelValue":s[4]||(s[4]=e=>x.value=e),title:0==e.addressId?a.$t("添加收货地址"):a.$t("修改收货地址"),footer:null,top:"15vh",width:"830px","destroy-on-close":!0,onClosed:U},{default:m((()=>[w.value?p("",!0):(d(),n("div",ce,[c("div",pe,[c("div",re,[s[5]||(s[5]=c("span",{class:"red"},"*",-1)),_(" "+y(a.$t("收货人"))+"：",1)]),c("div",ve,[f(c("input",{class:"tig-input","onUpdate:modelValue":s[0]||(s[0]=e=>$.consignee=e),type:"text",style:{width:"170px"}},null,512),[[g,$.consignee]])])]),c("div",me,[c("div",_e,[s[6]||(s[6]=c("span",{class:"red"},"*",-1)),_(" "+y(a.$t("所在地区"))+"：",1)]),c("div",ye,[v(h(A),{modelValue:$.region_ids,"onUpdate:modelValue":s[1]||(s[1]=e=>$.region_ids=e)},null,8,["modelValue"])])]),c("div",fe,[c("div",ge,[s[7]||(s[7]=c("span",{class:"red"},"*",-1)),_(" "+y(a.$t("详细地址"))+"：",1)]),s[8]||(s[8]=c("div",{class:"inp"},[c("input",{class:"tig-input",type:"text",style:{width:"270px"}})],-1))]),c("div",he,[c("div",be,[s[9]||(s[9]=c("span",{class:"red"},"*",-1)),_(" "+y(a.$t("联系电话"))+"：",1)]),c("div",ke,[s[10]||(s[10]=c("input",{class:"tig-input",type:"text",style:{width:"170px"}},null,-1)),c("span",null,y(a.$t("推荐手机，座机需加区号和“-”符号")),1)])]),c("div",xe,[c("div",Ve,y(a.$t("电子邮箱"))+"：",1),c("div",$e,[s[11]||(s[11]=c("input",{class:"tig-input",type:"text",style:{width:"270px"}},null,-1)),c("span",null,y(a.$t("用来接收订单提醒邮件")),1)])]),c("div",we,[s[12]||(s[12]=c("div",{class:"tit"},null,-1)),c("div",je,[c("div",{class:"btn",onClick:s[2]||(s[2]=e=>(async()=>{try{const e=await F($);t("change",e.address_id),x.value=!1}catch(e){b.error(e.message)}})())},y(a.$t("确认修改地址")),1),c("div",{class:"btn info",onClick:s[3]||(s[3]=e=>x.value=!1)},y(a.$t("取消")),1)])])]))])),_:1},8,["modelValue","title"])])):p("",!0)],64)}}}),[["__scopeId","data-v-ffba19aa"]]),Ie={class:"container"},Ce={class:"orderConfirmCon"},Te={class:"form_item"},Le={class:"top_row flex justify-between"},Oe={class:"tit"},qe={class:"delivery"},Ee={class:"tit"},Pe={key:0,class:"delivery_tags flex flex-wrap"},ze=["onClick"],Se={key:1,class:"no_delivery"},Me={class:"errInfo red",style:{display:"inline",margin:"0"}},Re={class:"detail"},We={class:"shop_name"},Ne={class:"list flex align-start"},De={class:"pic"},Ge=["src"],Je={class:"describe flex flex-column"},Ze=["title"],Ae={class:"mt10 sku-name-box"},Be={class:"sku-name-item"},Fe={class:"sku-name"},He={key:0,class:"extraskudata"},Ke={class:"title"},Qe={class:"content"},Xe={class:"content-text"},Ye={class:"num"},ea={key:1,class:"activity-box"},aa={class:"ticket-content"},ta={class:"money"},sa={class:"quantity"},la={key:0,class:"gift-box"},ia={class:"gift-title"},oa={class:"gift-content"},na={class:"gift-content-item"},da={class:"gift-item-left"},ua={class:"gift-item-right"},ca={class:"gift-item-name"},pa={key:0,class:"sku-card"},ra={class:"gift-item-num"},va={class:"add_remark"},ma={class:"a_rmk_tit"},_a={class:"a_rmk_con"},ya={key:1,class:"form_item"},fa={class:"top_row"},ga={class:"tit"},ha={key:1,class:"from"},ba={class:"check-box flex align-center"},ka={class:"tit"},xa={style:{"margin-left":"10px"}},Va={class:"font-color"},$a={key:2,class:"from_list"},wa={class:"integral flex"},ja={class:"tit"},Ua={class:"inp_box"},Ia={class:"inp"},Ca={key:0,class:"points_amount"},Ta={class:"tips"},La={class:"font-color"},Oa={key:3,class:"from"},qa={class:"check-box flex align-center"},Ea={class:"tit"},Pa={style:{"margin-left":"10px"}},za={class:"font-color"},Sa={key:2,class:"form_item"},Ma={class:"top_row flex align-end"},Ra={class:"tit"},Wa={class:"tips"},Na={class:"from"},Da={class:"flex align-center invoice-box"},Ga={class:"title flex align-center"},Ja={key:0,class:"type"},Za={key:0},Aa={key:1},Ba={class:"type"},Fa={class:"btn hand-pointer"},Ha={class:"money_info"},Ka={class:"total_list"},Qa={class:"item"},Xa={key:0,class:"item"},Ya={key:1,class:"item"},et={key:2,class:"item"},at={class:"item"},tt={class:"tip-item"},st={class:"ui-tips"},lt={class:"ui-tips-main"},it={class:"tit"},ot={class:"goods_list"},nt={class:"goods_col"},dt={class:"shop_name"},ut={class:"list"},ct={class:"txt"},pt={class:"item",style:{padding:"10px 0"}},rt={class:"img_box",style:{width:"65px"}},vt=["src"],mt={key:3,class:"item"},_t={class:"discount"},yt={class:"discount-title"},ft={class:"title-text"},gt={class:"discount-content"},ht={key:0,class:"discount-item-box"},bt={class:"item-label"},kt={class:"item-value"},xt={class:"discount-item-box hassub"},Vt={key:0,class:"flex justify-between"},$t={class:"item-label"},wt={class:"item-value discounts-value",style:{color:"var(--general)"}},jt={key:1,class:"sub-item-box"},Ut={class:"sub-item-label"},It={class:"sub-item-value discounts-value"},Ct={key:2,class:"sub-item-box"},Tt={class:"sub-item-label"},Lt={class:"sub-item-value discounts-value"},Ot={key:1,class:"discount-item-box"},qt={class:"item-label"},Et={class:"item-value"},Pt={key:0,class:"complete"},zt={class:"total_fee flex align-end justify-end"},St={class:"submit flex justify-end"},Mt=k(s({__name:"check",setup(s){const{t:o}=x(),r=V(),f=ne(),g=$(),k=w((()=>g.query.flow_type?Number(g.query.flow_type):1)),Z=i({address_id:0,shipping_type:{},pay_type_id:0,use_point:0,use_balance:0,use_coupon_ids:[],select_user_coupon_ids:[],buyer_note:"",invoice_data:{}}),A=l([]),B=l(null),F=async()=>new Promise(((e,a)=>{H({page:1,size:99}).then((t=>{var s;0==t.filter_result.length&&(null==(s=B.value)||s.show(),a("没有地址")),Z.address_id=t.filter_result[0].address_id,A.value=t.filter_result,e(void 0)})).catch((e=>{console.log(e),a(e)}))})),ue=l([]),ce=async()=>{try{const e=await ae();Z.pay_type_id=e.item[0].type_id,ue.value=e.item}catch(e){console.log(e)}},pe=l({}),re=async()=>{try{const e=await te({flow_type:k.value});pe.value=e.item;for(const a in e.item)e.item[a]&&e.item[a].length>0&&(Z.shipping_type[a]={type_id:e.item[a][0].shipping_type_id,shop_id:e.item[a][0].shop_id,type_name:e.item[a][0].shipping_type_name});console.log("getShippingTypeData",Z.shipping_type)}catch(e){console.log(e)}},ve=l(!0),me=l(!0),_e=l(!1),ye=l(0),fe=l(!1),ge=w((()=>{const e=[1==r.use_coupon&&"优惠券",1==r.use_points&&"积分",1==r.use_surplus&&"余额"].filter(Boolean);return e.length?`使用${e.join("/")}`:""})),he=l([]),be=l({}),ke=l({disable_coupons:[],enable_coupons:[]}),xe=l();(async()=>{var e;try{xe.value=de.service({lock:!1,text:o("请求加载中"),customClass:"tig-normal-loading"}),ve.value=!0,await F(),await Promise.all([ce(),re(),f.getUserInfo()]),await(async()=>{var e;me.value=!0;try{const a=await se({flow_type:k.value,...Z});Object.assign(Z,a.item.item),he.value=a.item.cart_list,be.value=a.item.total,ke.value=a.item.coupon_list,Z.use_coupon_ids&&(null==(e=Z.use_coupon_ids)?void 0:e.length)>0&&(_e.value=!0),ve.value=!1}catch(a){b.error(a.message)}finally{me.value=!1}})()}catch(a){console.log(a)}finally{ve.value=!1,null==(e=xe.value)||e.close()}})();const Ve=e=>{"invoice_type"==e.type?Z.invoice_data.invoice_type=e.value:Z.invoice_data.title_type=e.value},$e=async()=>{try{const e=await X({flow_type:k.value,...Z});return Object.assign(Z,e.item.item),he.value=e.item.cart_list,be.value=e.item.total,e}catch(e){b.error(e.message)}finally{me.value=!1}},we={autoplay:!1,navigation:!0,pagination:!1,effect:"slide",loop:!1,slidesPerView:4,slidesPerGroup:1},je=async e=>{try{me.value=!0,Z.address_id=e.address_id,await(async a=>{try{await K(a)}catch(e){console.log(e)}})(e.address_id),fe.value=!1,await F(),await re(),await ce(),await $e(),(async()=>{try{const e=await le({...Z.invoice_data});if(e.item)delete e.item.id,delete e.item.user_id,delete e.item.order_id,delete e.item.status,delete e.item.apply_reply,delete e.item.invoice_no,delete e.item.add_time,1==e.item.title_type&&(e.item.company_user_name=e.item.company_name),2==e.item.title_type&&(e.item.company_enterprise_name=e.item.company_name),Z.invoice_data=e.item;else{let e=A.value.find((e=>Z.address_id==e.address_id));if(e){let a={company_user_name:e.consignee,mobile:e.mobile,email:e.email,amount:be.value.unpaid_amount};Object.assign(Z.invoice_data,a)}}}catch(e){b.error(e.message)}})()}catch(a){}},Mt=e=>{Z.pay_type_id!==e&&(Z.pay_type_id=e,$e())},Rt=l(0),Wt=l(!1),Nt=e=>{Z.invoice_data=e},Dt=()=>{!0===Wt.value?(Wt.value=!1,Z.use_point=0,Rt.value=0):Wt.value=!0,0!=Z.use_point&&$e()},Gt=()=>{Rt.value=Math.floor(Number(Rt.value)),Rt.value>f.userInfo.points?Rt.value=f.userInfo.points:(Rt.value<0||!Rt.value)&&(Rt.value=0),Z.use_point=Rt.value,$e()},Jt=()=>{Z.use_balance=0==Z.use_balance?f.userInfo.balance:0,$e()},Zt=(e=!1)=>{Bt(e)},At=l(!1),Bt=async(e=!1)=>{try{At.value=!0,Z.use_default_coupon_ids=e?1:0;const a=await Y(Z);return ke.value=a.item.coupon_list,be.value=a.item.total,he.value=a.item.cart_list,a}catch(a){}finally{At.value=!1}},Ft=l(!1),Ht=l(!1),Kt=w((()=>{if(0===Z.address_id)return!0;if(0===Z.pay_type_id)return!0;if(!Z.shipping_type)return!0;for(const e of he.value)if(!Z.shipping_type[e.shop_id])return!0;return!1})),Qt=e=>e.filter((e=>1===e.type||6===e.type)),Xt=l(!1);return(s,l)=>{var i;const o=e,g=a,x=t,V=L,$=P,w=z,H=S,K=R,X=W,Y=t,ae=M,te=S,se=N,le=D;return d(),n("div",null,[v(o,{title:"订单结算页"}),v(G,{step:2}),c("div",Ie,[c("div",Ce,[v(ie,{ref_key:"addressRef",ref:B,modelValue:fe.value,"onUpdate:modelValue":l[0]||(l[0]=e=>fe.value=e),"active-address-id":Z.address_id,addressList:A.value,onAddrssRefresh:F,onOkCallback:je},null,8,["modelValue","active-address-id","addressList"]),A.value&&A.value.length>0?(d(),j(oe,{key:0,"pay-type-id":Z.pay_type_id,"payment-type-list":ue.value,onChangePayType:Mt},null,8,["pay-type-id","payment-type-list"])):p("",!0),c("div",Te,[c("div",Le,[c("div",Oe,y(s.$t("购物清单")),1),3!==k.value?(d(),j(g,{key:0,class:"font-color",to:"/cart/"},{default:m((()=>[_(y(s.$t("返回修改购物车")),1)])),_:1})):p("",!0)]),he.value&&he.value.length>0?(d(!0),n(u,{key:0},U(he.value,((e,a)=>(d(),n("div",{class:"product_detail flex",key:e.shop_id},[c("div",qe,[c("div",Ee,y(s.$t("配送方式")),1),pe.value[e.shop_id]&&pe.value[e.shop_id].length>0?(d(),n("div",Pe,[(d(!0),n(u,null,U(pe.value[e.shop_id],((a,t)=>(d(),n("div",{key:a,class:I(["pay_tab flex align-center",{active:a.shipping_type_id===Z.shipping_type[e.shop_id].type_id}]),onClick:t=>(async(e,a)=>{const{shipping_type_id:t,shipping_type_name:s}=a;Z.shipping_type[e]&&Z.shipping_type[e].type_id==t||(Z.shipping_type[e].type_id=t,Z.shipping_type[e].shop_id=e,Z.shipping_type[e].type_name=s,await $e())})(e.shop_id,a)},[c("span",null,y(a.shipping_type_name),1),l[25]||(l[25]=c("i",{class:"icon-gou"},null,-1))],10,ze)))),128))])):(d(),n("div",Se,[c("span",Me,y(s.$t("该收货地址不支持配送")),1)]))]),c("div",Re,[c("div",We,y(0==e.shop_id?s.$t("自营"):`${s.$t("商家")}：${e.shop_title}`),1),(d(!0),n(u,null,U(e.carts,(e=>(d(),n("div",Ne,[c("div",De,[v(g,{target:"_blank",to:h(T)({path:"product",id:e.product_id,sn:e.product_sn})},{default:m((()=>[c("img",{src:h(C)(e.pic_thumb),alt:""},null,8,Ge)])),_:2},1032,["to"])]),c("div",Je,[c("div",{class:"name ellipsis",title:e.product_name},[v(g,{target:"_blank",to:h(T)({path:"product",id:e.product_id,sn:e.product_sn})},{default:m((()=>[_(y(e.product_name),1)])),_:2},1032,["to"])],8,Ze),c("div",Ae,[(d(!0),n(u,null,U(e.sku_data,((e,a)=>(d(),n("div",Be,[c("span",Fe,y(e.name)+"：",1),_(y(e.value),1)])))),256))]),e.extra_sku_data&&e.extra_sku_data.length?(d(),n("div",He,[(d(!0),n(u,null,U(e.extra_sku_data,(a=>(d(),n("div",{key:a,class:"extraskudata-item"},[c("div",Ke,y(a.attr_name),1),l[26]||(l[26]=c("div",{class:"line-box"},[c("div",{class:"line"})],-1)),c("div",Qe,[c("span",Xe,y(a.attr_value),1),v(x,{modelValue:a.attr_price,"onUpdate:modelValue":e=>a.attr_price=e,showText:!1},null,8,["modelValue","onUpdate:modelValue"]),c("span",Ye,"x"+y(e.quantity),1)])])))),128))])):p("",!0),e.activity_info&&Qt(e.activity_info).length>0?(d(),n("div",ea,[(d(!0),n(u,null,U(Qt(e.activity_info),(e=>(d(),n("div",{key:e.promotion_id,class:"promotion"},[c("div",aa,y(1===e.type?s.$t("秒杀价"):s.$t("限时折扣")),1)])))),128))])):p("",!0)]),c("div",ta,[v(x,{fontStyle:{fontWeight:"600"},modelValue:e.price,"onUpdate:modelValue":a=>e.price=a,showText:!1},null,8,["modelValue","onUpdate:modelValue"])]),c("div",sa,"x"+y(e.quantity),1)])))),256)),e.gift&&e.gift.length>0?(d(),n("div",la,[c("div",ia,y(s.$t("赠品")),1),c("div",oa,[(d(!0),n(u,null,U(e.gift,(e=>(d(),j(g,{key:e.gift_id,target:"_blank",to:h(T)({path:"product",id:e.product_id,sn:e.product_sn})},{default:m((()=>[c("div",na,[c("div",da,[v(V,{class:"gift-img",lazy:"",src:h(C)(e.pic_thumb)},null,8,["src"])]),c("div",ua,[c("div",ca,y(e.product_name),1),e.sku_data&&e.sku_data.length>0?(d(),n("div",pa,[(d(!0),n(u,null,U(e.sku_data,((e,a)=>(d(),n("div",{key:a,class:"sku-item"},y(e.value),1)))),128))])):p("",!0),c("div",ra,"x"+y(e.num),1)])])])),_:2},1032,["to"])))),128))])])):p("",!0)])])))),128)):p("",!0),c("div",va,[c("div",ma,y(s.$t("订单备注"))+"：",1),c("div",_a,[v($,{modelValue:Z.buyer_note,"onUpdate:modelValue":l[1]||(l[1]=e=>Z.buyer_note=e),type:"textarea",placeholder:s.$t("提示：请勿填写有关支付、收货、发票方面的信息"),style:{width:"400px","font-size":"12px"},"show-word-limit":"",maxlength:50},null,8,["modelValue","placeholder"])])])]),ge.value?(d(),n("div",ya,[c("div",fa,[c("div",ga,y(s.$t(ge.value)),1)]),v(H,null,{default:m((()=>[(ke.value.disable_coupons.length>0||ke.value.enable_coupons.length>0)&&0!=h(r).use_coupon&&1===k.value?(d(),j(J,{key:0,useCoupon:_e.value,"onUpdate:useCoupon":l[2]||(l[2]=e=>_e.value=e),couponList:ke.value,"onUpdate:couponList":l[3]||(l[3]=e=>ke.value=e),selectedIds:Z.use_coupon_ids,"onUpdate:selectedIds":l[4]||(l[4]=e=>Z.use_coupon_ids=e),selectedUserCouponIds:Z.select_user_coupon_ids,"onUpdate:selectedUserCouponIds":l[5]||(l[5]=e=>Z.select_user_coupon_ids=e),onChange:Zt,couponLoading:At.value,"onUpdate:couponLoading":l[6]||(l[6]=e=>At.value=e)},null,8,["useCoupon","couponList","selectedIds","selectedUserCouponIds","couponLoading"])):p("",!0),0!=h(r).use_points&&1===k.value?(d(),n("div",ha,[c("div",ba,[v(w,{checked:Z.use_point>0,onClick:Dt},{default:m((()=>[c("span",ka,y(s.$t("使用积分")),1)])),_:1},8,["checked"]),c("div",xa,[_(y(s.$t("当前账户共"))+" ",1),c("span",Va,y(h(f).userInfo.points),1),_(" "+y(s.$t("积分")),1)])])])):p("",!0),Wt.value?(d(),n("div",$a,[l[27]||(l[27]=c("div",{class:"arrow"},null,-1)),c("div",wa,[c("div",ja,y(s.$t("使用积分"))+"：",1),c("div",Ua,[c("div",Ia,[v($,{max:h(f).userInfo.points,modelValue:Rt.value,"onUpdate:modelValue":l[7]||(l[7]=e=>Rt.value=e),onChange:Gt,style:{width:"200px"}},null,8,["max","modelValue"]),be.value.points_amount>0?(d(),n("span",Ca,[_("  "+y(s.$t("共抵扣"))+" ",1),v(x,{class:"red",modelValue:be.value.points_amount,"onUpdate:modelValue":l[8]||(l[8]=e=>be.value.points_amount=e),showText:!1},null,8,["modelValue"])])):p("",!0)]),c("div",Ta,[_(y(s.$t("该订单最多可用"))+y(h(f).userInfo.points)+" "+y(s.$t("积分"))+" ",1),c("span",La,"【"+y(s.$t("如何获得积分"))+"？】",1)])])])])):p("",!0),0!=h(r).use_surplus&&h(f).userInfo.balance>0?(d(),n("div",Oa,[c("div",qa,[v(w,{checked:Z.use_balance>0,onClick:Jt},{default:m((()=>[c("span",Ea,y(s.$t("使用余额")),1)])),_:1},8,["checked"]),c("div",Pa,[_(y(s.$t("当前账户余额"))+" ",1),c("span",za,y(h(f).userInfo.balance),1)])])])):p("",!0)])),_:1})])):p("",!0),1!=h(r).canInvoice||h(O)()?p("",!0):(d(),n("div",Sa,[c("div",Ma,[c("div",Ra,y(s.$t("发票信息")),1),c("div",Wa,y(s.$t("开企业抬头发票须填写纳税人识别号，以免影响报销")),1)]),c("div",Na,[c("div",Da,[c("div",Ga,[c("span",null,y(Z.invoice_data.invoice_type?1==Z.invoice_data.invoice_type?s.$t("电子普通发票"):s.$t("增值税专用发票"):s.$t("不开发票")),1),1==Z.invoice_data.invoice_type?(d(),j(K,{key:0,content:s.$t("电子普通发票与纸质发票具有同等法律效力，可支持报销入账、商品售后凭证。"),placement:"bottom-start",effect:"light"},{default:m((()=>l[28]||(l[28]=[c("i",{class:"iconfont-pc icon-tishi"},null,-1)]))),_:1},8,["content"])):p("",!0)]),Z.invoice_data.invoice_type?(d(),n("div",Ja,[1==Z.invoice_data.invoice_type?(d(),n("span",Za,y(1==Z.invoice_data.title_type?s.$t("个人"):s.$t("企业")),1)):p("",!0),2==Z.invoice_data.invoice_type?(d(),n("span",Aa,y(s.$t("增值税专用发票")),1)):p("",!0)])):p("",!0),c("div",Ba,[c("span",null,y(Z.invoice_data.company_name??""),1)]),v(Q,{params:{invoice_data:Z.invoice_data,amount:null==(i=be.value)?void 0:i.unpaid_amount,type:"check",address:A.value.find((e=>Z.address_id==e.address_id))},onCallback:Nt,onChangeType:Ve},{default:m((()=>[c("div",Fa,y(s.$t("修改")),1)])),_:1},8,["params"])])])])),c("div",Ha,[v(te,null,{default:m((()=>[c("div",Ka,[c("div",Qa,[_(y(s.$t("商品总价"))+"： ",1),v(x,{modelValue:be.value.product_amount,"onUpdate:modelValue":l[9]||(l[9]=e=>be.value.product_amount=e),showText:!1},null,8,["modelValue"])]),be.value.service_fee&&be.value.service_fee>0?(d(),n("div",Xa,[_(y(s.$t("附加费用"))+"： ",1),v(x,{modelValue:be.value.service_fee,"onUpdate:modelValue":l[10]||(l[10]=e=>be.value.service_fee=e),showText:!1},null,8,["modelValue"])])):p("",!0),be.value.balance>0?(d(),n("div",Ya,[_(" - "+y(s.$t("使用余额"))+"： ",1),v(x,{modelValue:be.value.balance,"onUpdate:modelValue":l[11]||(l[11]=e=>be.value.balance=e),showText:!1},null,8,["modelValue"])])):p("",!0),be.value.points_amount>0?(d(),n("div",et,[_(" - "+y(s.$t("使用积分"))+"： ",1),v(x,{modelValue:be.value.points_amount,"onUpdate:modelValue":l[12]||(l[12]=e=>be.value.points_amount=e),showText:!1},null,8,["modelValue"])])):p("",!0),c("div",at,[c("div",tt,[l[30]||(l[30]=c("i",{class:"freight-icon"},null,-1)),c("div",st,[l[29]||(l[29]=c("span",{class:"ui-tips-arrow"},null,-1)),c("div",lt,[c("div",it,y(s.$t("运费明细")),1),c("div",ot,[(d(!0),n(u,null,U(he.value,((e,a)=>(d(),n("div",nt,[c("div",dt,y(0==e.shop_id?s.$t("自营"):e.shop_title),1),c("div",ut,[c("div",ct,[_(y(s.$t("运费"))+"：",1),v(x,{showText:!1,modelValue:be.value.store_shipping_fee[e.shop_id],"onUpdate:modelValue":a=>be.value.store_shipping_fee[e.shop_id]=a},null,8,["modelValue","onUpdate:modelValue"])]),c("div",pt,[v(X,{swiperOption:we,"onUpdate:swiperOption":l[13]||(l[13]=e=>we=e),itemList:e.carts,style:{width:"100%",padding:"0 30px"}},{default:m((({item:e})=>[c("div",rt,[c("img",{src:h(C)(e.pic_thumb),alt:""},null,8,vt)])])),_:2},1032,["itemList"])])])])))),256))])])])]),_(" + "+y(s.$t("配送费用"))+"： ",1),v(x,{showText:!1,modelValue:be.value.shipping_fee,"onUpdate:modelValue":l[14]||(l[14]=e=>be.value.shipping_fee=e)},null,8,["modelValue"])]),be.value.discounts>0?(d(),n("div",mt,[v(ae,{trigger:"hover",modelValue:Xt.value,"onUpdate:modelValue":l[20]||(l[20]=e=>Xt.value=e)},q({reference:m((()=>[l[31]||(l[31]=c("div",{class:"tip-item"},[c("i",{class:"freight-icon"})],-1))])),_:2},[Xt.value?{name:"default",fn:m((()=>{var e,a,t;return[c("div",_t,[c("div",yt,[c("div",ft,y(s.$t("优惠明细")),1)]),c("div",gt,[(null==(e=be.value)?void 0:e.product_amount)>0?(d(),n("div",ht,[c("div",bt,y(s.$t("商品总额")),1),c("div",kt,[v(Y,{modelValue:be.value.product_amount,"onUpdate:modelValue":l[15]||(l[15]=e=>be.value.product_amount=e),fontStyle:{fontWeight:"bold"}},null,8,["modelValue"])])])):p("",!0),c("div",xt,[(null==(a=be.value)?void 0:a.discounts)>0?(d(),n("div",Vt,[c("div",$t,y(s.$t("共优惠")),1),c("div",wt,[l[32]||(l[32]=_(" - ")),v(Y,{modelValue:be.value.discounts,"onUpdate:modelValue":l[16]||(l[16]=e=>be.value.discounts=e)},null,8,["modelValue"])])])):p("",!0),(null==(t=be.value)?void 0:t.discount_coupon_amount)>0?(d(),n("div",jt,[c("div",Ut,y(s.$t("优惠券")),1),c("div",It,[l[33]||(l[33]=_(" - ")),v(Y,{modelValue:be.value.discount_coupon_amount,"onUpdate:modelValue":l[17]||(l[17]=e=>be.value.discount_coupon_amount=e)},null,8,["modelValue"])])])):p("",!0),be.value.discount_discount_amount>0?(d(),n("div",Ct,[c("div",Tt,y(s.$t("其他优惠")),1),c("div",Lt,[l[34]||(l[34]=_(" - ")),v(Y,{modelValue:be.value.discount_discount_amount,"onUpdate:modelValue":l[18]||(l[18]=e=>be.value.discount_discount_amount=e)},null,8,["modelValue"])])])):p("",!0)]),be.value.discount_after&&be.value.discount_after>0?(d(),n("div",Ot,[c("div",qt,y(s.$t("合计")),1),c("div",Et,[v(Y,{modelValue:be.value.discount_after,"onUpdate:modelValue":l[19]||(l[19]=e=>be.value.discount_after=e),fontStyle:{fontWeight:"bold"}},null,8,["modelValue"])])])):p("",!0)])])]})),key:"0"}:void 0]),1032,["modelValue"]),_(" - "+y(s.$t("共优惠"))+"： ",1),v(x,{showText:!1,modelValue:be.value.discounts,"onUpdate:modelValue":l[21]||(l[21]=e=>be.value.discounts=e)},null,8,["modelValue"])])):p("",!0)])])),_:1}),be.value.order_send_point&&be.value.order_send_point>0?(d(),n("div",Pt," *"+y(h(O)()?s.$t("该订单完成后，您将预计获得{0}积分",[be.value.order_send_point]):`该订单完成后，您将预计获得${be.value.order_send_point}积分`),1)):p("",!0),c("div",zt,[_(y(s.$t("应付款金额"))+"：",1),v(x,{class:"price",modelValue:be.value.unpaid_amount,"onUpdate:modelValue":l[22]||(l[22]=e=>be.value.unpaid_amount=e),showText:!1},null,8,["modelValue"])]),c("div",St,[v(se,{type:"primary",class:"btn",disabled:Kt.value,loading:Ft.value,onClick:l[23]||(l[23]=e=>!Ft.value&&(async()=>{try{Ft.value=!0;const e=await ee(Z);return 2==e.return_type?void E(`/member/order/info?id=${e.order_id}`):(E(`/order/pay?id=${e.order_id}`),e)}catch(e){b.error(e.message)}finally{Ft.value=!1}})())},{default:m((()=>[_(y(s.$t("提交订单")),1)])),_:1},8,["disabled","loading"])])])])]),Ht.value?(d(),j(h(Ue),{key:0,modelValue:Ht.value,"onUpdate:modelValue":l[24]||(l[24]=e=>Ht.value=e),addressId:ye.value},null,8,["modelValue","addressId"])):p("",!0),v(le)])}}}),[["__scopeId","data-v-b5543f27"]]);export{Mt as default};
