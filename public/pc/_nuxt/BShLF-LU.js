import{_ as e}from"./DRy-t1KR.js";import{E as a,a as t}from"./lYaTwQky.js";import{e as l,r,af as s,Q as u,c as i,o,b as c,w as d,F as n,l as v,m,a as p,v as f,d as y,t as I,n as g,_}from"./vO8z_6wc.js";import{g as h}from"./y2YKyhRU.js";import"./BwRzfsZt.js";import"./VsleDggW.js";import"./CKVP4sCQ.js";const j={class:"menu-list"},O={key:0,class:"menu"},b={class:"min-menu"},q={key:1,class:"loading-data"},L=_(l({__name:"IssueLeftMenu",props:{dataOver:{type:Boolean,default:!1},leftMenuList:{type:Array,default:[]}},emits:["update:leftMenuList","update:dataOver"],setup(l,{emit:_}){const L=r([]),M=r(),R=r(),w=r(!0),C=r(!1),E=_;(async()=>{w.value=!0,E("update:leftMenuList",[]);try{const e=await h({categorySize:99,articleSize:99});Object.assign(L.value,e),E("update:leftMenuList",L.value),E("update:dataOver",!0),C.value=!0}catch(e){g.error(e.message)}finally{w.value=!1}})();const S=s();return u([()=>S.currentRoute.value.query,()=>C.value],(()=>{var e,a;if(S.currentRoute.value.query.hasOwnProperty("articleId")){let a=S.currentRoute.value.query.articleId;null==(e=L.value)||e.forEach(((e,t)=>{e.articles.forEach(((t,l)=>{t.articleId===Number(a)&&(M.value=e.articleCategoryId,R.value=t.articleId)}))}))}else if(S.currentRoute.value.query.hasOwnProperty("categoryId")){let e=S.currentRoute.value.query.categoryId;null==(a=L.value)||a.forEach(((a,t)=>{a.categorySn===e&&(M.value=a.articleCategoryId)}))}}),{deep:!0}),(l,r)=>{const s=e,u=t,g=a;return o(),i("div",j,[c(s,{class:"ico",to:"/article/issue/index"}),w.value?(o(),i("div",q,I(l.$t("加载中")),1)):(o(),i("div",O,[c(g,{modelValue:M.value,"onUpdate:modelValue":r[0]||(r[0]=e=>M.value=e),accordion:""},{default:d((()=>[(o(!0),i(n,null,v(L.value,(e=>(o(),m(u,{name:e.articleCategoryId,title:e.articleCategoryName,disabled:0===e.articles.length},{default:d((()=>[p("div",b,[(o(!0),i(n,null,v(null==e?void 0:e.articles,(e=>(o(),m(s,{class:f([R.value===e.articleId?"pitch-on":"","item-menu"]),to:"/article/issue/info?articleId="+e.articleId},{default:d((()=>[y(I(e.articleTitle),1)])),_:2},1032,["class","to"])))),256))])])),_:2},1032,["name","title","disabled"])))),256))])),_:1},8,["modelValue"])]))])}}}),[["__scopeId","data-v-4104e2ed"]]);export{L as default};
