import{_ as G}from"./BYDV-pPC.js";import{_ as Y}from"./uNNarvbF.js";import{_ as J}from"./DA1gAKyu.js";import{E as K}from"./XomGKeK5.js";import{_ as Q}from"./CzQrJ5jx.js";import{_ as W}from"./CPg1UVcC.js";import{_ as X}from"./BCw_XNK7.js";import{f as Z,Y as x,q as ee,r as w,v as te,o as l,c as n,b as d,a as e,t as a,w as p,d as _,i as u,h,F as m,l as f,j as I,m as b,a0 as L,ab as C,x as se,p as ae,e as oe,_ as le}from"./DvlzeZYf.js";import{f as ne,c as ie,b as re}from"./YoGlnDdk.js";import{L as de}from"./CrKE52E_.js";import"./CljOOE4N.js";import"./ctHFjQ9z.js";import"./6IjmK16v.js";import"./DXZCNwre.js";import"./BB_Ol6Sd.js";import"./BxwJi-A4.js";import"./CvS5MqkS.js";import"./B9SirqjL.js";import"./Cq9Fpw4b.js";import"./D5p5RYpQ.js";import"./DGzzo1G8.js";import"./DldgdBu3.js";import"./DCTLXrZ8.js";import"./De9iyrrl.js";import"./C3hftOhu.js";import"./CFi7q_x0.js";/* empty css        */import"./JPAiA_Rf.js";import"./lRlBa-wu.js";import"./DEXPT9kT.js";import"./BpsRniw3.js";import"./DrjGOYyT.js";import"./eXzid_I5.js";const ue=g=>(ae("data-v-42fa946e"),g=g(),oe(),g),_e={class:"container flex"},ce={class:"menu"},pe={class:"info-row"},me={class:"title-or-tabs right-info"},ve={key:0},he={class:"order-info"},fe={class:"page-info-body lr"},ye={class:"order-left"},be={style:{"margin-left":"40px"}},ge={class:"order-right"},ke={key:1},Ve={class:"page-info-body"},$e={class:"sub-title"},Ue={class:"tig-steps"},we={style:{"font-weight":"600"}},Ce={class:"page-info-body"},Se={class:"sub-title"},Fe={class:"order-ul",style:{"margin-top":"20px"}},Oe={key:0,class:"page-info-body"},Ne={class:"sub-title"},Be={class:"sub-sub-title"},Ee={key:0,class:"order-ul virtualsample-box"},Ie={class:"item"},Le={class:"item"},Re={class:"page-info-body"},qe={class:"sub-title"},ze={class:"order-table-info"},Te={class:"receipt-header"},Pe={key:0},je={class:"receipt-body"},He={class:"receipt-item"},Me=["alt","src"],Ae={key:0,class:"sku-style"},De={key:1,class:"extraskudata"},Ge={class:"title"},Ye=ue(()=>e("div",{class:"line-box"},[e("div",{class:"line"})],-1)),Je={class:"content"},Ke={class:"content-text"},Qe={class:"num"},We={class:"receipt-item price"},Xe={class:"receipt-item price"},Ze={class:"receipt-item price"},xe={key:0,class:"receipt-item operation"},et={class:"receipt-footer"},tt=["colspan"],st={class:"receipt-footer-it one",colspan:"2"},at={class:"item"},ot={class:"label"},lt={class:"text"},nt={key:0,class:"item"},it={class:"label"},rt={class:"text"},dt={key:1,class:"item"},ut={class:"label"},_t={class:"text"},ct={key:2,class:"item"},pt={class:"label"},mt={class:"text"},vt={key:3,class:"item"},ht={class:"label"},ft={class:"text"},yt={key:4,class:"item"},bt={class:"label"},gt={class:"text"},kt={key:5,class:"item"},Vt={class:"label"},$t={class:"text"},Ut={key:6,class:"item"},wt={class:"label"},Ct={class:"text"},St={class:"item"},Ft={key:0},Ot={key:1},Nt=Z({__name:"Info",setup(g){const{t:k}=x(),R=ee(),t=w({order_status:0,available_actions:{}}),q=w(!0),z=te(()=>{var i;let s=!1;return(i=t.value.items)==null||i.forEach(V=>{V.e_card&&V.e_card.length>0&&(s=!0)}),s}),U=async()=>{try{const s=await ne({id:R.currentRoute.value.query.id});Object.assign(t.value,s.item)}catch(s){b.error(s.message)}finally{q.value=!1}};U();const T=w(["您的订单已提交成功，请尽快完成付款哦！","感谢您在本店的购物，您的订单已提交成功，我们会尽快为您发货！","您的订单已经发货，请注意查收，祝您购物愉快！",'您的订单已被取消，您可以通过"再次购买"，重新购买订单中的商品。','您的订单被认定为无效订单，订单已被关闭。您可以通过"再次购买"，重新购买订单中的商品。给您造成的不便请多多谅解！',"您的订单已经确认收货，感谢您在本店购物，祝您生活愉快！"]),P=async()=>{L.confirm({title:k("确认要取消该订单吗"),cancelText:k("取消"),okText:k("确定"),maskClosable:!0,centered:!0,onOk:async()=>{try{const s=await ie({id:t.value.order_id});b.success(s.message),await U()}catch(s){b.error(s.message)}finally{}}})},j=async()=>{L.confirm({title:k("确认要收货吗"),maskClosable:!0,centered:!0,onOk:async()=>{try{const s=await re({id:t.value.order_id});b.success(s.message),await U()}catch(s){b.error(s.message)}finally{}}})},H=s=>s==null?void 0:s.some(i=>Reflect.has(i,"aftersales_item")&&!i.aftersales_item.aftersale_id);return(s,i)=>{var S;const V=G,M=Y,A=J,v=K,y=Q,c=W,D=X;return l(),n(m,null,[d(V,{showService:!0,phone:t.value.shop?t.value.shop.kefu_phone:"",order_id:t.value.order_id,shop_id:t.value.shop_id},null,8,["phone","order_id","shop_id"]),d(M,{title:"订单详情"}),e("div",_e,[e("div",ce,[d(A)]),e("div",pe,[e("div",me,[e("span",null,a(s.$t("订单详情")),1),t.value.available_actions.split_order?u("",!0):(l(),n("div",ve,[d(y,{to:"/member/feedback/askList?order_id="+t.value.order_id+"&order_sn="+t.value.order_sn},{default:p(()=>[d(v,null,{default:p(()=>[_(a(s.$t("订单留言/咨询")),1)]),_:1})]),_:1},8,["to"])]))]),e("div",he,[e("div",fe,[e("div",ye,[e("div",null,[e("span",null,[_(a(s.$t("订单号"))+"：",1),e("strong",null,a(t.value.order_sn),1)]),e("span",be,[_(a(s.$t("订单状态"))+"： ",1),e("strong",null,a(t.value.order_status_name),1)])]),e("div",null,a(s.$t(T.value[t.value.order_status])),1)]),e("div",ge,[t.value.available_actions.cancel_order?(l(),h(v,{key:0,onClick:P},{default:p(()=>[_(a(s.$t("取消订单")),1)]),_:1})):u("",!0),t.value.available_actions.to_pay?(l(),n("div",ke,[d(y,{to:"/order/pay/?id="+t.value.order_id,target:"_balnk"},{default:p(()=>[d(v,{type:"primary"},{default:p(()=>[_(a(s.$t("付款")),1)]),_:1})]),_:1},8,["to"])])):u("",!0),t.value.available_actions.confirm_receipt?(l(),h(v,{key:2,type:"primary",onClick:j},{default:p(()=>[_(a(s.$t("确认收货")),1)]),_:1})):u("",!0),t.value.available_actions.to_aftersales?(l(),h(y,{key:3,target:"_blank",to:"/member/return/Info?order_id="+t.value.order_id},{default:p(()=>[d(v,null,{default:p(()=>[_(a(s.$t("整单售后")),1)]),_:1})]),_:1},8,["to"])):u("",!0)])]),e("div",Ve,[e("div",$e,a(s.$t("订单状态")),1),e("div",Ue,[(l(!0),n(m,null,f((S=t.value.step_status)==null?void 0:S.steps,(o,r)=>{var $,F,O,N,B,E;return l(),n(m,null,[e("div",{style:C({color:r<=(($=t.value.step_status)==null?void 0:$.current)?"var(--general)":"#c4c4c4",border:r<=((F=t.value.step_status)==null?void 0:F.current)?"4px solid var(--general)":"4px solid #eee"}),class:"steps-card"},[e("div",we,a(r+1),1),e("div",{style:C({color:r<=((O=t.value.step_status)==null?void 0:O.current)?"var(--general)":"#333"}),class:"card-text"},[e("div",null,a(o.title),1),e("div",null,a(o.description),1)],4)],4),r!=((B=(N=t.value.step_status)==null?void 0:N.steps)==null?void 0:B.length)-1?(l(),n("div",{key:0,style:C({backgroundColor:r<((E=t.value.step_status)==null?void 0:E.current)?"var(--general)":"#eee"}),class:"steps-line"},null,4)):u("",!0)],64)}),256))]),t.value.order_id&&(t.value.order_status===2||t.value.order_status===5)?(l(),h(de,{key:0,tracking_no:t.value.tracking_no,logistics_name:t.value.logistics_name,shipping_method:t.value.shipping_method,id:t.value.order_id,"onUpdate:id":i[0]||(i[0]=o=>t.value.order_id=o)},null,8,["tracking_no","logistics_name","shipping_method","id"])):u("",!0)]),e("div",Ce,[e("div",Se,a(s.$t("订单信息")),1),e("ul",Fe,[e("li",null,[_(a(s.$t("收货信息"))+"：",1),e("span",null,a(t.value.user_address)+" "+a(t.value.consignee)+" "+a(t.value.mobile),1)]),e("li",null,[_(a(s.$t("配送方式"))+"：",1),e("span",null,a(t.value.shipping_type_name),1)]),e("li",null,[_(a(s.$t("支付方式"))+"：",1),e("span",null,a(t.value.pay_type_id===1?s.$t("在线支付"):t.value.pay_type_id===2?s.$t("货到付款"):s.$t("线下支付")),1)])])]),I(z)?(l(),n("div",Oe,[e("div",Ne,a(s.$t("卡券信息")),1),(l(!0),n(m,null,f(t.value.items,o=>(l(),n(m,null,[e("div",Be,a(o.product_name),1),o.e_card.length>0?(l(),n("ul",Ee,[(l(!0),n(m,null,f(o.e_card,r=>(l(),n("li",{class:"virtualsample-item",key:r},[e("div",Ie,[_(a(s.$t("卡号"))+"：",1),e("span",null,a(r.card_number),1)]),e("div",Le,[_(a(s.$t("卡密"))+"：",1),e("span",null,a(r.card_pwd),1)])]))),128))])):u("",!0)],64))),256))])):u("",!0),e("div",Re,[e("div",qe,a(s.$t("订单商品")),1),e("table",ze,[e("thead",null,[e("tr",Te,[e("th",null,a(s.$t("商品名称")),1),e("th",null,a(s.$t("商品价格")),1),e("th",null,a(s.$t("购买数量")),1),e("th",null,a(s.$t("小计")),1),t.value.available_actions.to_aftersales?(l(),n("th",Pe,a(s.$t("操作")),1)):u("",!0)])]),e("tbody",null,[(l(!0),n(m,null,f(t.value.items,o=>(l(),n("tr",je,[e("td",He,[e("div",null,[e("img",{alt:o.product_name,src:("imageFormat"in s?s.imageFormat:I(se))(o.product_pic_thumb),class:"img-border"},null,8,Me),_(" "+a(o.product_name)+" ",1),o.sku_data?(l(),n("div",Ae,[(l(!0),n(m,null,f(o.sku_data,r=>(l(),n("div",null,a(r.name)+"："+a(r.value),1))),256))])):u("",!0),o.extra_sku_data&&o.extra_sku_data.length?(l(),n("div",De,[(l(!0),n(m,null,f(o.extra_sku_data,r=>(l(),n("div",{key:r,class:"extraskudata-item"},[e("div",Ge,a(r.attr_name),1),Ye,e("div",Je,[e("span",Ke,a(r.attr_value),1),d(c,{class:"price",modelValue:r.attr_price,"onUpdate:modelValue":$=>r.attr_price=$},null,8,["modelValue","onUpdate:modelValue"]),e("span",Qe,"x"+a(o.quantity),1)])]))),128))])):u("",!0)])]),e("td",We,[d(c,{modelValue:o.price,"onUpdate:modelValue":r=>o.price=r},null,8,["modelValue","onUpdate:modelValue"])]),e("td",Xe,a(o.quantity),1),e("td",Ze,[d(c,{modelValue:o.subtotal,"onUpdate:modelValue":r=>o.subtotal=r},null,8,["modelValue","onUpdate:modelValue"])]),t.value.available_actions.to_aftersales||o.aftersales_item?(l(),n("td",xe,[t.value.available_actions.to_aftersales||H(t.value.items)?(l(),h(y,{key:0,target:"_blank",to:"/member/return/Info?order_id="+t.value.order_id+"&item_id="+o.item_id},{default:p(()=>[d(v,{size:"small"},{default:p(()=>[_(a(s.$t("申请售后")),1)]),_:1})]),_:2},1032,["to"])):u("",!0),o.aftersales_item?(l(),h(y,{key:1,target:"_blank",to:"/member/return/logInfo?id="+o.aftersales_item.aftersale_id},{default:p(()=>[d(v,{size:"small"},{default:p(()=>[_(a(s.$t("售后详情")),1)]),_:1})]),_:2},1032,["to"])):u("",!0)])):u("",!0)]))),256))]),e("tfoot",null,[e("tr",et,[e("th",{colspan:t.value.available_actions.to_aftersales?3:2},null,8,tt),e("th",st,[e("div",at,[e("div",ot,a(s.$t("商品总价"))+"：",1),e("div",lt,[d(c,{modelValue:t.value.product_amount,"onUpdate:modelValue":i[1]||(i[1]=o=>t.value.product_amount=o)},null,8,["modelValue"])])]),t.value.service_fee&&t.value.service_fee>0?(l(),n("div",nt,[e("div",it,a(s.$t("附加费用"))+"：",1),e("div",rt,[d(c,{modelValue:t.value.service_fee,"onUpdate:modelValue":i[2]||(i[2]=o=>t.value.service_fee=o)},null,8,["modelValue"])])])):u("",!0),t.value.shipping_fee>0?(l(),n("div",dt,[e("div",ut,a(s.$t("运费"))+"：",1),e("div",_t,[d(c,{modelValue:t.value.shipping_fee,"onUpdate:modelValue":i[3]||(i[3]=o=>t.value.shipping_fee=o)},null,8,["modelValue"])])])):u("",!0),t.value.balance>0?(l(),n("div",ct,[e("div",pt,a(s.$t("使用余额"))+"：",1),e("div",mt,[d(c,{modelValue:t.value.balance,"onUpdate:modelValue":i[4]||(i[4]=o=>t.value.balance=o)},null,8,["modelValue"])])])):u("",!0),t.value.points_amount>0?(l(),n("div",vt,[e("div",ht,a(s.$t("使用积分"))+"：",1),e("div",ft,[d(c,{modelValue:t.value.points_amount,"onUpdate:modelValue":i[5]||(i[5]=o=>t.value.points_amount=o)},null,8,["modelValue"])])])):u("",!0),t.value.discount_amount>0?(l(),n("div",yt,[e("div",bt,a(s.$t("其他优惠"))+"：",1),e("div",gt,[_(" - "),d(c,{modelValue:t.value.discount_amount,"onUpdate:modelValue":i[6]||(i[6]=o=>t.value.discount_amount=o)},null,8,["modelValue"])])])):u("",!0),t.value.coupon_amount>0?(l(),n("div",kt,[e("div",Vt,a(s.$t("优惠券优惠"))+"：",1),e("div",$t,[_(" - "),d(c,{modelValue:t.value.coupon_amount,"onUpdate:modelValue":i[7]||(i[7]=o=>t.value.coupon_amount=o)},null,8,["modelValue"])])])):u("",!0),t.value.unpaid_amount&&t.value.unpaid_amount>0?(l(),n("div",Ut,[e("div",wt,a(s.$t("待支付金额"))+"：",1),e("div",Ct,[d(c,{modelValue:t.value.unpaid_amount,"onUpdate:modelValue":i[8]||(i[8]=o=>t.value.unpaid_amount=o)},null,8,["modelValue"])])])):u("",!0),e("div",St,[t.value.pay_status==2?(l(),n("span",Ft,a(s.$t("实付款"))+"：",1)):(l(),n("span",Ot,a(s.$t("应付款"))+"：",1)),d(c,{modelValue:t.value.total_amount,"onUpdate:modelValue":i[9]||(i[9]=o=>t.value.total_amount=o),fontStyle:{fontSize:"20px",color:"var(--price)"}},null,8,["modelValue"])])])])])])])])])]),d(D)],64)}}}),us=le(Nt,[["__scopeId","data-v-42fa946e"]]);export{us as default};
