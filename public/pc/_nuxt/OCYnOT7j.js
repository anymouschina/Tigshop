import{E as s}from"./duVALuQ5.js";import{_ as e}from"./Bd89_3a4.js";import{E as r,a}from"./DKvZ9Rd6.js";import{E as o}from"./OZUBBuO3.js";import{e as t,cc as l,z as d,I as p,g as i,r as u,af as n,m as w,o as m,w as v,b as f,a as g,t as c,d as E,i as y,cd as b,_ as $}from"./vO8z_6wc.js";import{f as j}from"./BEIcWXyR.js";import"./CdIa5lAL.js";import"./CKVP4sCQ.js";import"./BwRzfsZt.js";import"./B0jPhJeY.js";import"./D_Dr4eZ1.js";import"./VsleDggW.js";import"./DqoL2U0I.js";const _={class:"label"},h={class:"label"},V=$(t({__name:"StepTow",props:{step:{},stepModifiers:{},modelValue:{type:String},modelModifiers:{}},emits:["update:step","update:modelValue"],setup(t){const $=l(t,"step"),V=l(t,"modelValue"),{t:T}=d(),Z=p(),z=(s,e,r)=>{W.value.tigTips[s]=e?{type:"valid",message:r}:{type:"error",message:r}},A=s=>{W.value.tigTips[s]={type:"info",message:k[s]}},k=i({password:T("6-20个大小写英文字母、符号或数字的组合"),password2:T("请输入和上次相同的密码")}),q=i({password:[{validator:(s,e,r)=>e?e.length>20||e.length<6?r(new Error(T("密码应为6-20位字符"))):/\s/.test(e)?r(new Error(T("密码中不允许有空格"))):/^\d+$/.test(e)?r(new Error(T("密码不能全为数字"))):/^(?=.*[\d\W]).+$/.test(e)?/^(?=.*[a-zA-Z0-9]).+$/.test(e)?/^(?!([a-zA-Z0-9])\1*$).+$/.test(e)?void r():r(new Error(T("密码不能全为相同字符或数字"))):r(new Error(T("密码不能全为符号"))):r(new Error(T("密码不能全为字母"))):r(new Error(T("密码不能为空"))),trigger:"blur",required:!0}],password2:[{validator:(s,e,r)=>e?e.length>20||e.length<6?r(new Error(T("密码应为6-20位字符"))):/\s/.test(e)?r(new Error(T("密码中不允许有空格"))):/^\d+$/.test(e)?r(new Error(T("密码不能全为数字"))):/^(?=.*[\d\W]).+$/.test(e)?/^(?=.*[a-zA-Z0-9]).+$/.test(e)?/^(?!([a-zA-Z0-9])\1*$).+$/.test(e)?e!=W.value.password?r(new Error(T("两次输入密码不一致"))):void r():r(new Error(T("密码不能全为相同字符或数字"))):r(new Error(T("密码不能全为符号"))):r(new Error(T("密码不能全为字母"))):r(new Error(T("密码不能为空"))),trigger:"blur",required:!0}]}),U=u(!1),W=u({tigTips:{},password:"",password2:""}),x=n(),F=async()=>{await Z.value.validate();try{U.value=!0;await j({mobileKey:V.value,password:W.value.password});b.success(T("重置密码成功")),x.push("/member/login")}catch(s){b.error(s.message),$.value=1,V.value="",W.value.password="",W.value.password2=""}finally{U.value=!1}};return(t,l)=>{const d=s,p=e,i=r,u=o,n=a;return m(),w(n,{ref_key:"formRef",ref:Z,"hide-required-asterisk":!0,model:W.value,rules:y(q),"show-message":!1,class:"form-body","label-width":"auto",onValidate:z},{default:v((()=>[f(i,{prop:"password"},{default:v((()=>[g("div",_,c(t.$t("新密码")),1),f(d,{modelValue:W.value.password,"onUpdate:modelValue":l[0]||(l[0]=s=>W.value.password=s),class:"input-border-style","show-password":"",type:"password",onFocus:l[1]||(l[1]=s=>A("password"))},null,8,["modelValue"]),f(p,{info:W.value.tigTips.password},null,8,["info"])])),_:1}),f(i,{prop:"password2"},{default:v((()=>[g("div",h,c(t.$t("确认新密码")),1),f(d,{modelValue:W.value.password2,"onUpdate:modelValue":l[2]||(l[2]=s=>W.value.password2=s),class:"input-border-style","show-password":"",type:"password",onFocus:l[3]||(l[3]=s=>A("password2"))},null,8,["modelValue"]),f(p,{info:W.value.tigTips.password2},null,8,["info"])])),_:1}),f(i,{label:"",prop:"firstWord"},{default:v((()=>[f(u,{loading:U.value,type:"primary",class:"submit-button",style:{width:"330px"},onClick:F},{default:v((()=>[E(c(t.$t("确 认")),1)])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules"])}}}),[["__scopeId","data-v-038ea1d5"]]);export{V as default};
