import{_ as Z}from"./CzQrJ5jx.js";import{E as x,a as ee}from"./CPhr9T1V.js";import{_ as ae}from"./CPg1UVcC.js";import{E as le,a as oe}from"./DXZCNwre.js";import{E as te}from"./lRlBa-wu.js";import{E as se}from"./XomGKeK5.js";import{E as ne}from"./BMKQ3sGo.js";import{aa as O,f as ue,a7 as pe,r as V,a8 as q,o as d,c as f,b as l,w as a,a as s,h as _,d as c,t as o,i as y,ab as J,F as S,j as re,J as me,m as E,p as de,e as ie,_ as ce}from"./DvlzeZYf.js";/* empty css        */import"./DEXPT9kT.js";import{g as ve}from"./BdaK_Mse.js";const ye=r=>O({url:"user/order_invoice/detail",method:"get",params:r}),_e=(r,I)=>O({url:"user/order_invoice/"+I,method:"post",params:r}),ca=r=>O({url:"order/check/index",method:"post",data:{flow_type:r}}),va=(r,I)=>O({url:"order/check/update",method:"post",data:{type:r,...I}}),ya=r=>O({url:"order/check/update_coupon",method:"post",data:r}),_a=r=>O({url:"order/check/submit",method:"post",data:r}),be=r=>O({url:"order/check/get_invoice",method:"get",params:r}),L=r=>(de("data-v-dfbb1e48"),r=r(),ie(),r),fe={class:"audit-status"},$e=L(()=>s("br",null,null,-1)),he={class:"message"},ge={class:"message"},ke={class:"extra"},Ve={class:"message"},Oe={class:"message"},we={class:"message"},je={class:"message"},Se={class:"message"},Ie={class:"message"},Ue={class:"message"},Ce={class:"message"},Ee={class:"message"},Fe={class:"extra"},Re={class:"message"},Te={class:"message"},qe={class:"message"},De={class:"message"},Be={class:"message"},Ne={class:"message"},ze={class:"message"},Pe={class:"extra"},Ae={class:"message"},Ge={class:"message"},Je={key:0,class:"audit-status"},Le=L(()=>s("br",null,null,-1)),Me={class:"message blue"},He={key:0,class:"extra"},Ke={key:1,class:"extra"},Qe={key:2,class:"extra"},We={class:"audit-status"},Xe={class:"var(--price)"},Ye={class:"audit-status"},Ze={class:"var(--price)"},xe={class:"dialog-footer"},ea=ue({__name:"Info",props:{params:{type:Object,default:{}}},emits:["loadFilter","callback","changeType"],setup(r,{emit:I}){const v=r,M=pe(),D=e=>{switch(e){case 0:return{color:"#f58b49"};case 1:return{color:"green"};case 2:return{color:"red"};default:return{}}},U=V(!0),g=q(),B=q(),N=q(),w=V(!1),t=V({}),p=V({}),$=V({}),i=V({}),b=V({}),H=async()=>{w.value=!0,g.value&&await g.value.resetFields(),v.params.type==="check"&&await K(),v.params.type!="apply"&&v.params.type!="check"&&await Q(),v.params.type=="check"&&(Object.assign(t.value,v.params.invoice_data),Object.assign(p.value,v.params.invoice_data),Object.assign($.value,v.params.invoice_data),Object.assign(i.value,v.params.invoice_data)),await z()},K=async()=>{try{const e=await be({...t.value});let n={company_code:"",company_name:"",company_address:"",company_phone:"",company_bank:"",company_account:"",invoice_content:"",mobile:"",email:""};if(e.item)Object.assign(t.value,e.item),Object.assign(p.value,e.item),Object.assign($.value,e.item),Object.assign(i.value,e.item);else if(t.value.title_type===1){let k={company_name:v.params.address.consignee,mobile:v.params.address.mobile,email:v.params.address.email};Object.assign(t.value,k),Object.assign(p.value,k),Object.assign($.value,k),Object.assign(i.value,k)}else Object.assign(t.value,n),Object.assign(p.value,n),Object.assign($.value,n),Object.assign(i.value,n);t.value.amount=v.params.amount}catch(e){E.error(e.message)}},Q=async()=>{try{U.value=!0;const e=await ye({id:v.params.order_id});Object.assign(t.value,e.item),Object.assign(p.value,e.item),Object.assign($.value,e.item),Object.assign(i.value,e.item)}catch(e){E.error(e.message)}finally{U.value=!1}},j=V(!1),z=async()=>{try{const e=await ve();e.item?(j.value=!0,Object.assign(b.value,e.item)):j.value=!1}catch(e){E.error(e.message)}finally{U.value=!1}},F=I,P=e=>{v.params.type=="check"&&(F("changeType",{type:e,value:e=="invoice_type"?t.value.invoice_type:t.value.title_type}),e=="invoice_type"&&t.value.invoice_type==2&&z())},W=()=>{F("callback",{}),w.value=!1},X=async()=>{g.value&&await g.value.validate();try{U.value=!0;let e={id:v.params.order_id,invoice_type:t.value.invoice_type,title_type:t.value.title_type,mobile:t.value.mobile,email:t.value.email,amount:t.value.amount};if(e.invoice_content=t.value.invoice_content,t.value.invoice_type===1&&t.value.title_type===1?(g.value&&await B.value.validate(),e.company_code="",e.company_name=$.value.company_name,e.company_address="",e.company_phone="",e.company_bank="",e.company_account=""):t.value.invoice_type===1&&t.value.title_type===2?(g.value&&await N.value.validate(),e.company_code=i.value.company_code,e.company_name=i.value.company_name,e.company_address=i.value.company_address,e.company_phone=i.value.company_phone,e.company_bank=i.value.company_bank,e.company_account=i.value.company_account):t.value.invoice_type===2&&(e.company_code=b.value.company_code,e.company_name=b.value.company_name,e.company_address=b.value.company_address,e.company_phone=b.value.company_phone,e.company_bank=b.value.company_bank,e.company_account=b.value.company_account),v.params.type!="check"){const n=await _e(e,v.params.type==="apply"?"create":"update");await g.value.resetFields(),E.success(n.message),w.value=!1,F("loadFilter")}else delete e.id,w.value=!1,F("callback",e)}catch(e){E.error(e.message)}finally{U.value=!1}};return(e,n)=>{const k=Z,u=x,R=ae,C=ee,T=le,A=oe,h=te,G=se,Y=ne;return d(),f(S,null,[l(Y,{modelValue:w.value,"onUpdate:modelValue":n[17]||(n[17]=m=>w.value=m),title:e.$t("发票申请"),width:"800"},{footer:a(()=>[s("div",xe,[r.params.type==="reapply"||r.params.type==="apply"||r.params.type==="check"?(d(),_(G,{key:0,plain:"",onClick:W},{default:a(()=>[c(o(e.$t("暂不开票")),1)]),_:1})):y("",!0),r.params.type==="reapply"||r.params.type==="apply"||r.params.type==="check"?(d(),_(G,{key:1,disabled:t.value.invoice_type===2&&!j.value,type:"primary",onClick:X},{default:a(()=>[c(o(e.$t("提交开票申请")),1)]),_:1},8,["disabled"])):y("",!0)])]),default:a(()=>[r.params.type==="info"?(d(),_(C,{key:0,"label-width":"auto",model:p.value,class:"form-body","label-suffix":"："},{default:a(()=>[s("div",fe,[c(o(e.$t("审核状态"))+"： ",1),s("span",{style:J(D(p.value.status))},o(p.value.status_name),5),$e,s("span",null,o(p.value.apply_reply),1)]),r.params.type!="check"?(d(),_(u,{key:0,label:e.$t("订单号"),prop:"order_sn"},{default:a(()=>[s("span",he,[l(k,{to:"/member/order/info?id="+p.value.order_id,class:"font-color",target:"_blank"},{default:a(()=>[c(o(p.value.order_sn),1)]),_:1},8,["to"])])]),_:1},8,["label"])):y("",!0),r.params.type!="check"?(d(),_(u,{key:1,label:e.$t("订单金额"),prop:"total_amount"},{default:a(()=>[l(R,{modelValue:p.value.total_amount,"onUpdate:modelValue":n[0]||(n[0]=m=>p.value.total_amount=m),showText:!1},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),r.params.type!="check"?(d(),_(u,{key:2,label:e.$t("发票金额"),prop:"amount"},{default:a(()=>[l(R,{modelValue:p.value.amount,"onUpdate:modelValue":n[1]||(n[1]=m=>p.value.amount=m),fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),l(u,{label:e.$t("发票类型"),prop:"invoice_type"},{default:a(()=>[s("span",ge,o(p.value.invoice_type===1?e.$t("普通发票"):e.$t("增值税专用发票")),1),s("div",ke,o(e.$t("所有发票由商品供货商开具")),1)]),_:1},8,["label"]),l(u,{label:e.$t("发票抬头"),prop:"title_type"},{default:a(()=>[s("span",Ve,o(p.value.title_type===1?e.$t("个人"):e.$t("企业")),1)]),_:1},8,["label"]),p.value.invoice_type===1?(d(),f(S,{key:3},[p.value.title_type===1?(d(),_(u,{key:0,label:e.$t("个人名称"),prop:"company_name"},{default:a(()=>[s("span",Oe,o(p.value.company_name),1)]),_:1},8,["label"])):(d(),f(S,{key:1},[l(u,{label:e.$t("企业名称"),prop:"company_name"},{default:a(()=>[s("span",we,o(p.value.company_name),1)]),_:1},8,["label"]),l(u,{label:e.$t("纳税人识号"),prop:"company_code"},{default:a(()=>[s("span",je,o(p.value.company_code),1)]),_:1},8,["label"]),l(u,{label:e.$t("单位地址"),prop:"company_address"},{default:a(()=>[s("span",Se,o(p.value.company_address),1)]),_:1},8,["label"]),l(u,{label:e.$t("单位电话"),prop:"company_phone"},{default:a(()=>[s("span",Ie,o(p.value.company_phone),1)]),_:1},8,["label"]),l(u,{label:e.$t("开户银行"),prop:"company_bank"},{default:a(()=>[s("span",Ue,o(p.value.company_bank),1)]),_:1},8,["label"]),l(u,{label:e.$t("银行账户"),prop:"company_account"},{default:a(()=>[s("span",Ce,o(p.value.company_account),1)]),_:1},8,["label"])],64))],64)):y("",!0),l(u,{label:e.$t("发票内容"),prop:"invoice_content"},{default:a(()=>[s("span",Ee,o(e.$t("商品明细")),1),s("div",Fe,o(e.$t("发票内容将显示详细商品名称与价格信息")),1)]),_:1},8,["label"]),t.value.invoice_type===2?(d(),f(S,{key:4},[l(u,{label:e.$t("单位名称")},{default:a(()=>[s("span",Re,o(p.value.company_name),1)]),_:1},8,["label"]),l(u,{label:e.$t("纳税人识别码")},{default:a(()=>[s("span",Te,o(p.value.company_code),1)]),_:1},8,["label"]),l(u,{label:e.$t("注册地址")},{default:a(()=>[s("span",qe,o(p.value.company_address),1)]),_:1},8,["label"]),l(u,{label:e.$t("注册电话")},{default:a(()=>[s("span",De,o(p.value.company_phone),1)]),_:1},8,["label"]),l(u,{label:e.$t("开户银行")},{default:a(()=>[s("span",Be,o(p.value.company_bank),1)]),_:1},8,["label"]),l(u,{label:e.$t("银行账户")},{default:a(()=>[s("span",Ne,o(p.value.company_account),1)]),_:1},8,["label"]),l(u,{label:e.$t("发票内容"),prop:"invoice_content"},{default:a(()=>[s("span",ze,o(e.$t("商品明细")),1),s("div",Pe,o(e.$t("发票内容将显示详细商品名称与价格信息")),1)]),_:1},8,["label"])],64)):y("",!0),l(u,{label:e.$t("收票人手机"),prop:"mobile"},{default:a(()=>[s("span",Ae,o(p.value.mobile),1)]),_:1},8,["label"]),l(u,{label:e.$t("收票人邮箱"),prop:"email"},{default:a(()=>[s("span",Ge,o(p.value.email),1)]),_:1},8,["label"])]),_:1},8,["model"])):(d(),_(C,{key:1,ref_key:"formRef",ref:g,"label-width":110,model:t.value,class:"form-body","label-suffix":"："},{default:a(()=>[r.params.type==="reapply"?(d(),f("div",Je,[c(o(e.$t("审核状态"))+"： ",1),s("span",{style:J(D(t.value.status))},o(t.value.status_name),5),Le,s("span",null,o(t.value.apply_reply),1)])):y("",!0),r.params.type!="check"?(d(),_(u,{key:1,label:e.$t("订单号"),prop:"order_sn"},{default:a(()=>[s("span",Me,[l(k,{to:"/member/order/info?id="+t.value.order_id,target:"_blank"},{default:a(()=>[c(o(t.value.order_sn),1)]),_:1},8,["to"])])]),_:1},8,["label"])):y("",!0),r.params.type!="check"?(d(),_(u,{key:2,label:e.$t("订单金额"),prop:"total_amount"},{default:a(()=>[l(R,{modelValue:t.value.total_amount,"onUpdate:modelValue":n[2]||(n[2]=m=>t.value.total_amount=m),showText:!1},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),r.params.type!="check"?(d(),_(u,{key:3,label:e.$t("发票金额"),prop:"amount"},{default:a(()=>[l(R,{modelValue:t.value.amount,"onUpdate:modelValue":n[3]||(n[3]=m=>t.value.amount=m),fontStyle:{color:"var(--price)"},showText:!1},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),l(u,{label:e.$t("发票类型"),prop:"invoice_type"},{default:a(()=>[l(A,{modelValue:t.value.invoice_type,"onUpdate:modelValue":n[4]||(n[4]=m=>t.value.invoice_type=m),onChange:n[5]||(n[5]=m=>P("invoice_type"))},{default:a(()=>[l(T,{value:1},{default:a(()=>[c(o(e.$t("普通发票")),1)]),_:1}),re(M).invoiceAdded==1?(d(),_(T,{key:0,value:2},{default:a(()=>[c(o(e.$t("增值税专用发票")),1)]),_:1})):y("",!0)]),_:1},8,["modelValue"]),t.value.invoice_type===1?(d(),f("div",He,o(e.$t("所有发票由商品供货商开具")),1)):y("",!0),t.value.invoice_type===2&&j.value?(d(),f("div",Ke,o(e.$t("所有发票由商品供货商开具")),1)):y("",!0),t.value.invoice_type===2&&!j.value?(d(),f("div",Qe,[c(o(e.$t("您还未通过增票资质申请，暂时无法开具增值税专用发票"))+"， ",1),l(k,{class:"font-color",to:"/member/userInvoice/info"},{default:a(()=>[c(o(e.$t("点击这里")),1)]),_:1}),c(" "+o(e.$t("去申请增票资质"))+"。 ",1)])):y("",!0)]),_:1},8,["label"]),t.value.invoice_type===1?(d(),f(S,{key:4},[s("div",We,[s("p",null,o(e.$t("根据现行税收政策，部分公司提供数电票，数电（普通发票）法律效力与现有电子普通发票相同"))+"；",1),s("p",null,o(e.$t("电子普通发票和纸质普通发票具备同等法律效力，可支持报销入账"))+"；",1),s("p",null,o(e.$t("如商品由第三方卖家销售，发票类型及内容将由该卖家决定"))+"；",1),s("p",null,o(e.$t("如您为企业采购，需要多单合并开具或批量提交发票可注册企业用户"))+"；",1),s("p",Xe,o(e.$t("使用礼品卡支付部分的金额，不支持开发票")),1)]),l(u,{label:e.$t("发票抬头"),prop:"title_type"},{default:a(()=>[l(A,{modelValue:t.value.title_type,"onUpdate:modelValue":n[6]||(n[6]=m=>t.value.title_type=m),onChange:n[7]||(n[7]=m=>P("title_type"))},{default:a(()=>[l(T,{value:1},{default:a(()=>[c(o(e.$t("个人")),1)]),_:1}),l(T,{value:2},{default:a(()=>[c(o(e.$t("企业")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),t.value.title_type===1?(d(),_(C,{key:0,ref_key:"formOneRef",ref:B,"label-width":110,model:$.value,class:"form-body","label-suffix":"："},{default:a(()=>[l(u,{rules:[{required:!0,message:e.$t("个人名称不能为空")}],label:e.$t("个人名称"),prop:"company_name"},{default:a(()=>[l(h,{modelValue:$.value.company_name,"onUpdate:modelValue":n[8]||(n[8]=m=>$.value.company_name=m),clearable:"",placeholder:e.$t("请输入个人名称")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"])]),_:1},8,["model"])):(d(),_(C,{key:1,ref_key:"formFirmRef",ref:N,"label-width":110,model:i.value,class:"form-body","label-suffix":"："},{default:a(()=>[l(u,{rules:[{required:!0,message:e.$t("企业名称不能为空")}],label:e.$t("企业名称"),prop:"company_name"},{default:a(()=>[l(h,{modelValue:i.value.company_name,"onUpdate:modelValue":n[9]||(n[9]=m=>i.value.company_name=m),clearable:"",placeholder:e.$t("请输入企业名称")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"]),l(u,{rules:[{required:!0,message:e.$t("纳税人识号不能为空")}],label:e.$t("纳税人识号"),prop:"company_code"},{default:a(()=>[l(h,{modelValue:i.value.company_code,"onUpdate:modelValue":n[10]||(n[10]=m=>i.value.company_code=m),clearable:"",placeholder:e.$t("请输入纳税人识号")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"]),l(u,{label:e.$t("单位地址"),prop:"company_address"},{default:a(()=>[l(h,{modelValue:i.value.company_address,"onUpdate:modelValue":n[11]||(n[11]=m=>i.value.company_address=m),clearable:"",placeholder:e.$t("请输入单位地址")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(u,{label:e.$t("单位电话"),prop:"company_phone"},{default:a(()=>[l(h,{modelValue:i.value.company_phone,"onUpdate:modelValue":n[12]||(n[12]=m=>i.value.company_phone=m),clearable:"",placeholder:e.$t("请输入单位电话")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(u,{label:e.$t("开户银行"),prop:"company_bank"},{default:a(()=>[l(h,{modelValue:i.value.company_bank,"onUpdate:modelValue":n[13]||(n[13]=m=>i.value.company_bank=m),clearable:"",placeholder:e.$t("请输入开户银行")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(u,{label:e.$t("银行账户"),prop:"company_account"},{default:a(()=>[l(h,{modelValue:i.value.company_account,"onUpdate:modelValue":n[14]||(n[14]=m=>i.value.company_account=m),clearable:"",placeholder:e.$t("请输入银行账户")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]))],64)):t.value.invoice_type===2&&j.value?(d(),_(C,{key:5,ref:"formInvoiceRef","label-width":110,model:b.value,class:"form-body","label-suffix":"："},{default:a(()=>[s("div",Ye,[s("p",null,o(e.$t("我公司依法开具发票，请您按照税法规定使用发票"))+"。",1),s("p",null,o(e.$t("根据现行税收政策，部分公司提供数电票, 数电（专用发票）法律效力与现有增值税专用发票相同"))+";",1),s("p",null,o(e.$t("如商品由第三方卖家销售，发票类型和内容将由该卖家决定，发票由卖家开具并提供"))+"。",1),s("p",null,o(e.$t("如您为企业采购，需要多单合并开具或批量提交发票可注册企业用户"))+"；",1),s("p",Ze,o(e.$t("使用礼品卡支付部分的金额，不支持开发票")),1)]),l(u,{label:e.$t("单位名称")},{default:a(()=>[c(o(b.value.company_name),1)]),_:1},8,["label"]),l(u,{label:e.$t("纳税人识别码")},{default:a(()=>[c(o(b.value.company_code),1)]),_:1},8,["label"]),l(u,{label:e.$t("注册地址")},{default:a(()=>[c(o(b.value.company_address),1)]),_:1},8,["label"]),l(u,{label:e.$t("注册电话")},{default:a(()=>[c(o(b.value.company_phone),1)]),_:1},8,["label"]),l(u,{label:e.$t("开户银行")},{default:a(()=>[c(o(b.value.company_bank),1)]),_:1},8,["label"]),l(u,{label:e.$t("银行账户")},{default:a(()=>[c(o(b.value.company_account),1)]),_:1},8,["label"])]),_:1},8,["model"])):y("",!0),t.value.invoice_type!=0?(d(),f(S,{key:6},[l(u,{rules:[{required:!0,message:e.$t("手机不能为空")}],label:e.$t("收票人手机"),prop:"mobile"},{default:a(()=>[l(h,{modelValue:t.value.mobile,"onUpdate:modelValue":n[15]||(n[15]=m=>t.value.mobile=m),clearable:"",placeholder:e.$t("请输入收票人手机")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"]),l(u,{rules:[{required:t.value.invoice_type!==1,message:e.$t("邮箱不能为空")}],label:e.$t("收票人邮箱"),prop:"email"},{default:a(()=>[l(h,{modelValue:t.value.email,"onUpdate:modelValue":n[16]||(n[16]=m=>t.value.email=m),clearable:"",placeholder:e.$t("请输入收票人邮箱")},null,8,["modelValue","placeholder"])]),_:1},8,["rules","label"])],64)):y("",!0)]),_:1},8,["model"]))]),_:1},8,["modelValue","title"]),s("span",{onClick:H},[me(e.$slots,"default",{},void 0,!0)])],64)}}}),aa=ce(ea,[["__scopeId","data-v-dfbb1e48"]]),ba=Object.freeze(Object.defineProperty({__proto__:null,default:aa},Symbol.toStringTag,{value:"Module"}));export{aa as I,be as a,va as b,ba as c,ca as g,_a as o,ya as u};
