import{E as H}from"./lRlBa-wu.js";import{E as W,a as J}from"./CPhr9T1V.js";import{E as G}from"./XomGKeK5.js";import{f as z,az as K,r as n,s as M,Y as q,H as Q,m as S,o as b,c as U,h as T,w as i,b as l,j as N,i as I,a as B,d as O,t as $,p as X,e as ee,_ as Y,v as P,J as ue,n as te,ab as ae,W as j,F as oe,c$ as le}from"./DvlzeZYf.js";import{S as se}from"./DWfSXXqD.js";import{E as ne}from"./BMKQ3sGo.js";import"./DEXPT9kT.js";import{g as re,u as ie}from"./Dl9WVn6d.js";const de=d=>(X("data-v-609403f4"),d=d(),ee(),d),me={class:"modal_region_box"},ce={class:"address_from"},Ee={class:"from_item"},pe=de(()=>B("div",{class:"tit"},null,-1)),fe={class:"btn_box"},Fe=z({__name:"EditRegion",props:{id:Number,act:{type:String,default:"add"},isDialog:Boolean,addressId:{type:Number,default:0},showClose:{type:Boolean,default:!0}},emits:["submitCallback","update:confirmLoading","close","change"],setup(d,{expose:y,emit:_}){const m=_,u=d,w=K().currentRoute.value.query,p=n(u.isDialog?u.act:String(w.act)),c=n(p.value==="add"?"create":"update");n(!1);const t=M({consignee:"",region_ids:[],address:"",mobile:"",telephone:"",email:""}),{t:g}=q(),f=n(!0);Q(()=>{u.addressId>0?h():f.value=!1});const h=async()=>{try{const e=await re(p.value,{id:u.addressId});Object.assign(t,e.item)}catch(e){S.error(e.message)}finally{f.value=!1}},A=M({mobile:[{validator:(e,a,s)=>{if(a)if(/^(?:\+86)?1(?:3[0-9]|4[5-9]|5[0-35-9]|6[5-7]|7[0-8]|8[0-9]|9[189])\d{8}$/.test(a))s();else return s(new Error(g("格式错误，请输入正确的手机号码")));else return s(new Error(g("手机号不能为空")))},trigger:"blur",required:!0}],email:[{validator:(e,a,s)=>{if(a&&!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a))return s(new Error(g("格式错误，请输入正确的邮箱地址")));s()},trigger:"blur",required:!0}]}),E=n(null),D=async()=>{await E.value.validate();try{m("update:confirmLoading",!0);const e=await ie(c.value,{id:u.addressId,...t});S.success(e.message),m("submitCallback",e)}catch(e){S.error(e.message)}finally{m("update:confirmLoading",!1)}},C=()=>{E.value.validateField("region_ids")},x=()=>{m("close")};return y({onFormSubmit:()=>{D()}}),(e,a)=>{const s=H,o=W,F=J,v=G;return b(),U("div",me,[f.value?I("",!0):(b(),T(F,{key:0,"label-width":"auto",ref_key:"formRef",ref:E,rules:A,model:t,autocomplete:"off","label-suffix":"："},{default:i(()=>[l(o,{label:e.$t("收货人"),prop:"consignee",rules:[{required:!0,message:e.$t("请您填写收货人姓名")}]},{default:i(()=>[l(s,{modelValue:t.consignee,"onUpdate:modelValue":a[0]||(a[0]=r=>t.consignee=r),style:{width:"300px"},maxlength:20},null,8,["modelValue"])]),_:1},8,["label","rules"]),l(o,{label:e.$t("所在地区"),prop:"region_ids",rules:[{required:!0,message:"请选择收货人所在地区"}],autoLink:""},{default:i(()=>[l(N(se),{modelValue:t.region_ids,"onUpdate:modelValue":a[1]||(a[1]=r=>t.region_ids=r),onChange:C},null,8,["modelValue"])]),_:1},8,["label"]),l(o,{label:e.$t("详细地址"),prop:"address",rules:[{required:!0,message:e.$t("请您填写详细收货地址")},{min:3,message:e.$t("收货人地址过短")}]},{default:i(()=>[l(s,{modelValue:t.address,"onUpdate:modelValue":a[2]||(a[2]=r=>t.address=r),style:{width:"300px"},maxlength:100},null,8,["modelValue"])]),_:1},8,["label","rules"]),l(o,{label:e.$t("手机号码"),prop:"mobile"},{default:i(()=>[l(s,{modelValue:t.mobile,"onUpdate:modelValue":a[3]||(a[3]=r=>t.mobile=r),style:{width:"300px"},maxlength:20},null,8,["modelValue"])]),_:1},8,["label"]),l(o,{label:e.$t("固定电话"),prop:"telephone",rules:[],"wrapper-col":{span:8},extra:""},{default:i(()=>[l(s,{modelValue:t.telephone,"onUpdate:modelValue":a[4]||(a[4]=r=>t.telephone=r),style:{width:"300px"},maxlength:20},null,8,["modelValue"])]),_:1},8,["label"]),l(o,{required:!1,label:e.$t("邮箱地址"),prop:"email",rules:[],"wrapper-col":{span:8}},{default:i(()=>[l(s,{modelValue:t.email,"onUpdate:modelValue":a[5]||(a[5]=r=>t.email=r),style:{width:"300px"},maxlength:50},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])),B("div",ce,[B("div",Ee,[pe,B("div",fe,[l(v,{type:"primary",onClick:D},{default:i(()=>[O($(p.value==="add"?e.$t("新增"):e.$t("修改"))+$(e.$t("地址")),1)]),_:1}),u.showClose?(b(),T(v,{key:0,onClick:x},{default:i(()=>[O($(e.$t("取消")),1)]),_:1})):I("",!0)])])])])}}}),ge=Y(Fe,[["__scopeId","data-v-609403f4"]]);/*! Element Plus v2.9.1 */var De={name:"zh-cn",el:{breadcrumb:{label:"面包屑"},colorpicker:{confirm:"确定",clear:"清空",defaultLabel:"颜色选择器",description:"当前颜色 {color}，按 Enter 键选择新颜色",alphaLabel:"选择透明度的值"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",dateTablePrompt:"使用方向键与 Enter 键可选择日期",monthTablePrompt:"使用方向键与 Enter 键可选择月份",yearTablePrompt:"使用方向键与 Enter 键可选择年份",selectedDate:"已选日期",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},weeksFull:{sun:"星期日",mon:"星期一",tue:"星期二",wed:"星期三",thu:"星期四",fri:"星期五",sat:"星期六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},inputNumber:{decrease:"减少数值",increase:"增加数值"},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},dropdown:{toggleDropdown:"切换下拉选项"},mention:{loading:"加载中"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},dialog:{close:"关闭此对话框"},drawer:{close:"关闭此对话框"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!",close:"关闭此对话框"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},slider:{defaultLabel:"滑块介于 {min} 至 {max}",defaultRangeStartLabel:"选择起始值",defaultRangeEndLabel:"选择结束值"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tour:{next:"下一步",previous:"上一步",finish:"结束导览"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},carousel:{leftArrow:"上一张幻灯片",rightArrow:"下一张幻灯片",indicator:"幻灯片切换至索引 {index}"}}};const be=z({__name:"DialogEditRegion",props:{path:String,class:{type:String,default:""},dialogClass:{type:String,default:""},params:{type:Object,default:{}},width:{type:String,default:"800px"},title:{type:String,default:""},isDrawer:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},showOnOk:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},data:{type:Object,default:{}},style:{type:[String,Object],default:"display:inline-flex;"},maskClosable:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},type:String},emits:["okCallback","callback"],setup(d,{expose:y,emit:_}){const m=n(!1),u=d,{t:w}=q(),p=_,c=n(!1),t=n(!1),g=n(!1),f=n(u.dialogClass),h=n(u.title),k=n({});u.showFooter===!1&&(k.value.footer=""),n(u.path),u.path;const L=P(()=>Object.assign(u.params,{isDialog:!0})),A=P(()=>u.type=="gallery"?"811px":u.width);u.type=="gallery"&&(f.value+=" lyecs-modal-gallery noPadding",h.value=w("相册"));function E(o){m.value==!1&&x(),t.value=!1,m.value=!0,c.value=!0}function D(o){c.value=!1}const C=n();async function x(){}const R=o=>{o.errcode||(c.value=!1,t.value=!1,p("okCallback",o,u.data))},e=o=>{p("callback",o,u.data)},a=()=>{C.value.onFormSubmit()},s=o=>{g.value=!o};return y({show:E,close:D}),(o,F)=>{const v=ge,r=le,Z=ne;return b(),U(oe,null,[B("div",{onClick:E,class:te("dialog-link "+u.class),style:ae(u.style)},[ue(o.$slots,"default",{},void 0,!0)],6),m.value?(b(),T(Z,j({key:0,class:f.value,modelValue:c.value,"onUpdate:modelValue":F[1]||(F[1]=V=>c.value=V),width:A.value,title:h.value,destroyOnClose:!0,onOk:a},k.value,{"close-on-click-modal":d.maskClosable,"show-close":d.closable,centered:""}),{default:i(()=>[l(r,{locale:N(De)},{default:i(()=>[l(v,j({ref_key:"submitForm",ref:C,onSubmitCallback:R,onCallback:e,onShow:E,onClose:D,onOkType:s},L.value,{confirmLoading:t.value,"onUpdate:confirmLoading":F[0]||(F[0]=V=>t.value=V)}),null,16,["confirmLoading"])]),_:1},8,["locale"])]),_:1},16,["class","modelValue","width","title","close-on-click-modal","show-close"])):I("",!0)],64)}}}),Ae=Y(be,[["__scopeId","data-v-75fee5a2"]]);export{Ae as _};
