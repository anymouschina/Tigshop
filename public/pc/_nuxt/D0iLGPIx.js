import{f as p,q as f,Y as m,r as _,o as y,c as b,J as k,n as g,ae as x,m as o,_ as h}from"./DvlzeZYf.js";import{p as C,q as I}from"./CZXUHXp1.js";import{b as B}from"./6IjmK16v.js";const v=p({__name:"Buy",props:{id:Number,number:{type:Number},skuId:{type:Number},extraAttrIds:{type:String,default:""},disabled:{type:Boolean,default:!1},isQuick:{type:Boolean,default:!1},pageType:{type:String,default:"product"},skuItem:{type:Array}},emits:["callback"],setup(r,{emit:u}){const i=B(),c=f(),e=r,{t:n}=m(),l=u,s=_(!1),d=async()=>{if(!e.disabled)try{if(s.value)return;s.value=!0;let t={};const a={id:e.id??0,number:e.number,sku_id:e.skuId,is_quick:e.isQuick?1:0};e.extraAttrIds&&(a.extra_attr_ids=e.extraAttrIds),x(),e.pageType=="product"?t=await C(a):e.pageType=="exchange"&&(t=await I(a)),e.isQuick==!0?c.push({path:"/order/check",query:{flow_type:t.flow_type}}):(i.changeCartList(),o.success(n("加入购物车成功")),l("callback"))}catch(t){o.error(t.message)}finally{s.value=!1}};return(t,a)=>(y(),b("div",{class:g("buy "+(r.disabled==!0?"disabled":"")),onClick:d},[k(t.$slots,"default",{},void 0,!0)],2))}}),w=h(v,[["__scopeId","data-v-6f87ebd3"]]);export{w as _};
