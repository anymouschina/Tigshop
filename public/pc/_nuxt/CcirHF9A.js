import{_ as S}from"./uNNarvbF.js";import{_ as B}from"./BYDV-pPC.js";import{E as I}from"./XomGKeK5.js";import{E as N}from"./oHjyL5Tq.js";import{_ as P}from"./BCw_XNK7.js";import{f as j,r as g,s as L,H as R,o as l,c as d,b as i,a as s,t as a,w as v,d as y,F as k,l as V,h as H,j as A,i as T,m as _,n as U,as as D,p as J,e as O,a1 as q,z as G,_ as K}from"./DvlzeZYf.js";import{P as Q}from"./DpiGic3x.js";import{g as W,d as X,e as Y,f as Z}from"./CljOOE4N.js";import"./DrjGOYyT.js";import"./CzQrJ5jx.js";import"./6IjmK16v.js";import"./ctHFjQ9z.js";import"./JPAiA_Rf.js";import"./lRlBa-wu.js";import"./BxwJi-A4.js";import"./CvS5MqkS.js";import"./BB_Ol6Sd.js";import"./C3hftOhu.js";import"./Cq9Fpw4b.js";import"./DEXPT9kT.js";import"./BpsRniw3.js";import"./DldgdBu3.js";import"./B9SirqjL.js";import"./eXzid_I5.js";import"./D5p5RYpQ.js";import"./DGzzo1G8.js";import"./DCTLXrZ8.js";import"./De9iyrrl.js";import"./CPg1UVcC.js";import"./DXZCNwre.js";import"./CFi7q_x0.js";/* empty css        */const m=c=>(J("data-v-89657a6d"),c=c(),O(),c),ss={class:"message_center container flex"},es={class:"mc_side_bar"},ts={class:"title"},os=m(()=>s("i",{class:"iconfont-pc icon-xiaoxi"},null,-1)),as={class:"fl"},ns={class:"nav_list"},is=m(()=>s("i",{class:"icon"},null,-1)),rs={class:"fl"},ls={class:"msg_list"},cs={class:"flex justify-end"},ds={class:"list"},_s=["onClick"],ms={class:"time"},ps=m(()=>s("div",{class:"icon msg"},null,-1)),us={class:"message flex justify-between"},fs={class:"title flex align-center"},gs=m(()=>s("div",{class:"icon"},null,-1)),hs={class:"txt"},vs={class:"flex flex-column align-end",style:{"min-width":"50px"}},ys={class:"date"},ks=["onClick"],xs={key:2,class:"el-page flex justify-end"},Cs=j({__name:"List",setup(c){const p=g([]),u=g(!0),f=g(0),n=L({page:1,unread:0}),r=async()=>{u.value=!0;try{const e=await W({...n});p.value=e.filter_result,f.value=e.total}catch(e){_.error(e.message)}finally{u.value=!1}},x=async()=>{n.unread=1;try{await r()}catch(e){_.error(e.message)}},C=async e=>{try{await Y(e),await r()}catch(o){_.error(o.message)}},w=async e=>{try{e.is_read!==1&&(await Z(e.message_id),e.is_read=1);let o=JSON.parse(e.link);q(G(o.data),{open:{target:"_blank"}})}catch{}},F=async()=>{try{await X(),n.unread=0,await r()}catch(e){_.error(e.message)}};return R(()=>{r()}),(e,o)=>{const M=S,$=B,h=I,z=N,b=P;return l(),d(k,null,[i(M,{title:"站内信"}),i($),s("div",ss,[s("div",es,[s("h3",ts,[os,s("span",as,a(e.$t("消息中心")),1)]),s("div",ns,[is,s("span",rs,a(e.$t("账户信息")),1)])]),s("div",ls,[s("div",cs,[i(h,{onClick:x},{default:v(()=>[y(a(e.$t("只看未读")),1)]),_:1}),i(h,{onClick:F},{default:v(()=>[y(a(e.$t("全部标记为已读")),1)]),_:1})]),s("div",ds,[f.value>0?(l(!0),d(k,{key:0},V(p.value,t=>(l(),d("div",{class:"item flex",onClick:E=>w(t)},[s("div",ms,a(t.add_time_date),1),s("div",{class:U(["msg_info flex",t.is_read?"unread":""])},[ps,s("div",us,[s("div",null,[s("h3",fs,[gs,s("span",null,a(t.title),1)]),s("p",hs,a(t.content),1)]),s("div",vs,[s("p",ys,a(t.add_time_hms),1),s("i",{class:"iconfont-pc icon-changyonggoupiaorenshanchu del",onClick:D(E=>C({id:t.message_id}),["stop"])},null,8,ks)])])],2)],8,_s))),256)):(l(),H(z,{key:1,description:e.$t("暂无消息")},null,8,["description"])),p.value.length>0&&!u.value?(l(),d("div",xs,[i(A(Q),{page:n.page,"onUpdate:page":o[0]||(o[0]=t=>n.page=t),size:n.size,"onUpdate:size":o[1]||(o[1]=t=>n.size=t),total:f.value,onCallback:r},null,8,["page","size","total"])])):T("",!0)])])]),i(b)],64)}}}),ee=K(Cs,[["__scopeId","data-v-89657a6d"]]);export{ee as default};
