import{_ as s}from"./9TMjRzGO.js";import{b as a}from"./kUOzVTvd.js";import{E as t}from"./CK-rvtuG.js";import{E as i}from"./B1lzp3m7.js";import{_ as e}from"./zM3V5R1F.js";import{e as l,r as o,g as r,y as n,c,o as m,b as p,a as d,t as u,w as j,d as f,m as g,h as v,F as _,l as y,v as h,ag as x,i as k,n as w,ae as b,q as C,_ as $}from"./BLNaUqdG.js";import{P as z}from"./DE8qoeTi.js";import{g as q,e as E,f as J,h as O}from"./CdUPjuAS.js";import"./DSwxsogY.js";import"./DGSQZaL6.js";import"./Bp2G0jMz.js";import"./D-E-9YUO.js";import"./C8IqyEYy.js";import"./ClnUiH43.js";import"./BWAJcOoD.js";import"./losdC6Ud.js";import"./BwRzfsZt.js";import"./CxZS6lgh.js";import"./D_Dr4eZ1.js";import"./CQcoTD7x.js";import"./D5ZJ33IS.js";import"./DlIXSNl1.js";import"./C8QNSlsX.js";import"./DxiXPFL-.js";import"./BucM0pco.js";import"./rSOsbbvW.js";import"./DgmxjSXK.js";import"./BX08AvzU.js";import"./CScYj7Fy.js";import"./DmeNR82d.js";import"./DIIF5iVx.js";/* empty css        */const P={class:"message_center container flex"},U={class:"mc_side_bar"},F={class:"title"},I={class:"fl"},K={class:"nav_list"},L={class:"fl"},M={class:"msg_list"},N={class:"flex justify-end"},Q={class:"list"},S=["onClick"],V={class:"time"},W={class:"message flex justify-between"},X={class:"title flex align-center"},Y={class:"txt"},Z={class:"flex flex-column align-end",style:{"min-width":"50px"}},A={class:"date"},B=["onClick"],D={key:2,class:"el-page flex justify-end"},G=$(l({__name:"List",setup(l){const $=o([]),G=o(!0),H=o(0),R=r({page:1,unread:0}),T=async()=>{G.value=!0;try{const s=await q({...R});$.value=s.filter_result,H.value=s.total}catch(s){w.error(s.message)}finally{G.value=!1}},ss=async()=>{R.unread=1;try{await T()}catch(s){w.error(s.message)}},as=async()=>{try{await O(),R.unread=0,await T()}catch(s){w.error(s.message)}};return n((()=>{T()})),(l,o)=>{const r=s,n=a,q=t,O=i,ts=e;return m(),c(_,null,[p(r,{title:"站内信"}),p(n),d("div",P,[d("div",U,[d("h3",F,[o[2]||(o[2]=d("i",{class:"iconfont-pc icon-xiaoxi"},null,-1)),d("span",I,u(l.$t("消息中心")),1)]),d("div",K,[o[3]||(o[3]=d("i",{class:"icon"},null,-1)),d("span",L,u(l.$t("账户信息")),1)])]),d("div",M,[d("div",N,[p(q,{onClick:ss},{default:j((()=>[f(u(l.$t("只看未读")),1)])),_:1}),p(q,{onClick:as},{default:j((()=>[f(u(l.$t("全部标记为已读")),1)])),_:1})]),d("div",Q,[H.value>0?(m(!0),c(_,{key:0},y($.value,(s=>(m(),c("div",{class:"item flex",onClick:a=>(async s=>{try{1!==s.is_read&&(await J(s.message_id),s.is_read=1);let a=JSON.parse(s.link);b(C(a.data),{open:{target:"_blank"}})}catch(a){}})(s)},[d("div",V,u(s.add_time_date),1),d("div",{class:h(["msg_info flex",s.is_read?"unread":""])},[o[5]||(o[5]=d("div",{class:"icon msg"},null,-1)),d("div",W,[d("div",null,[d("h3",X,[o[4]||(o[4]=d("div",{class:"icon"},null,-1)),d("span",null,u(s.title),1)]),d("p",Y,u(s.content),1)]),d("div",Z,[d("p",A,u(s.add_time_hms),1),d("i",{class:"iconfont-pc icon-changyonggoupiaorenshanchu del",onClick:x((a=>(async s=>{try{await E(s),await T()}catch(a){w.error(a.message)}})({id:s.message_id})),["stop"])},null,8,B)])])],2)],8,S)))),256)):(m(),g(O,{key:1,description:l.$t("暂无消息")},null,8,["description"])),$.value.length>0&&!G.value?(m(),c("div",D,[p(k(z),{page:R.page,"onUpdate:page":o[0]||(o[0]=s=>R.page=s),size:R.size,"onUpdate:size":o[1]||(o[1]=s=>R.size=s),total:H.value,onCallback:T},null,8,["page","size","total"])])):v("",!0)])])]),p(ts)],64)}}}),[["__scopeId","data-v-8be169be"]]);export{G as default};
