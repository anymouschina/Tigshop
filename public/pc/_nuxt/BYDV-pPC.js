import{a as ee,b as te}from"./CljOOE4N.js";import{_ as B}from"./CzQrJ5jx.js";import{f as V,r as m,H as q,o as t,h as x,w as S,a as s,b,t as w,aP as oe,p as P,e as z,_ as I,Y as se,v as E,c as r,j as l,J as ae,i as $,d as C,ad as R,aQ as ne,aR as ce,s as re,aS as ie,a9 as O,g as Y,Z as A,a5 as J,a6 as Q,aT as W,n as F,F as k,l as N,aU as X,a7 as U,z as M,aV as le,au as ue,a2 as Z,aW as de,$ as _e,ab as G,x as pe}from"./DvlzeZYf.js";import{b as me}from"./6IjmK16v.js";import{u as ve}from"./ctHFjQ9z.js";import"./JPAiA_Rf.js";import"./XomGKeK5.js";import"./lRlBa-wu.js";import"./DEXPT9kT.js";import{c as he}from"./BCw_XNK7.js";const fe=a=>(P("data-v-7c1b374a"),a=a(),z(),a),ye={class:"cart_info"},ge=fe(()=>s("div",{class:"iconfont-pc icon-shiwu-gouwuche"},null,-1)),we={class:"my-cart"},ke=V({__name:"ShoppingCart",props:{pageType:{type:Number,default:1}},setup(a){const c=me(),o=ve();o.getUserInfo(),m(c.cartCount),m(!1),m(!1),m([]);const n=async()=>{try{const i=await oe()}catch{}};return m(!1),n(),q(()=>{o.userInfo.user_id>0&&c.changeCartList()}),(i,d)=>{const u=B,v=ee;return t(),x(v,null,{default:S(({count:e})=>[s("div",ye,[b(u,{to:"/cart/",class:"acea-row row-center-wrapper"},{default:S(()=>[ge,s("div",we,w(i.$t("我的购物车")),1),s("em",null,w(e),1)]),_:2},1024)])]),_:1})}}}),Se=I(ke,[["__scopeId","data-v-7c1b374a"]]),$e=a=>(P("data-v-4943ddfc"),a=a(),z(),a),be={key:1,class:"ele-menu"},xe={class:"feedback-menu"},Ce={class:"wrap-btn"},Le=$e(()=>s("i",{class:"iconfont-pc icon-kefu"},null,-1)),Ne=V({__name:"Service",props:{shop_id:{type:[Number,String],default:0},product_id:{type:[Number,String],default:0},order_id:{type:[Number,String],default:0},is_index:{type:Boolean,default:!1},phone:{type:String,default:""}},setup(a){se();const c=a,o=m({h5_domain:"",url:"",open_type:0,show:"",service_type:0});(async()=>{try{const u=await he();o.value=u.item}catch(u){console.error(u)}})();const i=E(()=>o.value.h5_domain?o.value.h5_domain:window.location.origin+"/mobile"),d=async()=>{const u=o.value.service_type;if(u===0)return;const v=o.value.open_type,e=500,p=700;let h=o.value.url;const y=screen.height/2-p/2;if(u!==4)v==1?window.open(h,"_blank",`width=${e},height=${p},top=${y}`):window.open(h,"_blank");else{if(!R("accessToken").value)return ne();h=`${i.value}/pages/im/index?token=${R("accessToken").value}&shop_id=${c.shop_id}&platform=${ce}`,Number(c.product_id)>0&&(h+=`&product_id=${c.product_id}`),Number(c.order_id)>0&&(h+=`&order_id=${c.order_id}`),window.open(h,"_blank",`width=${e},height=${p},top=${y}`)}};return(u,v)=>a.is_index?(t(),r("div",{key:0,onClick:d},[l(o).show?ae(u.$slots,"default",{key:0},void 0,!0):$("",!0)])):(t(),r("div",be,[l(o).show?(t(),r("div",{key:0,class:"card",onClick:d},[s("div",xe,[s("div",Ce,[Le,C(" "+w(u.$t("客服")),1)])])])):$("",!0)]))}}),Te=I(Ne,[["__scopeId","data-v-4943ddfc"]]),De=V({__name:"StatisticLog",props:{product_id:{type:[Number,String],default:""},shop_id:{type:[Number,String],default:""},shop_category_id:{type:[Number,String],default:""},immediateLog:{type:Boolean,default:!0}},setup(a,{expose:c}){const o=a,n=re({}),i=async()=>{o.product_id&&(n.product_id=o.product_id),o.shop_id&&(n.shop_id=o.shop_id),o.shop_category_id&&(n.shop_category_id=o.shop_category_id);try{const e=await ie(n)}catch(e){console.error(e)}},d=E(()=>{const e=new Date,p=e.getFullYear(),h=e.getMonth()+1,y=e.getDate();return`${p}-${h}-${y}`}),u=(e,p)=>{const h=new Date(e),y=new Date(p),f=Math.abs(h.getTime()-y.getTime()),_=24*60*60*1e3;return f>=_};return(()=>{const e=R("lastDate");!e.value||u(d.value,e.value)?n.is_new=1:n.click=1,e.value=d.value})(),q(()=>{o.immediateLog&&i()}),c({__commonLog:i}),(e,p)=>(t(),r("div"))}}),Ve={class:"top-search"},Fe={class:"acea-row row-middle"},Ie=["placeholder"],Be={class:"search-guess-ul"},Ke={class:"name"},Me=V({__name:"SimSearch",setup(a){const c=m([]);let o=!1,n=null;const i=()=>{if(o)return!1;clearTimeout(n),o=!0,n=setTimeout(async()=>{try{const g=await X(e.value);c.value=g.keyword_list,L.value=c.value.length>0}catch{}finally{o=!1}},300)},d=O(),u=m(d.query.keyword),v=m(!1),e=m(""),p=e.value;u.value&&d.path==="/search/"&&(e.value=u.value),Y(()=>d.query,()=>{d.query.keyword||(e.value="")},{deep:!0});const h=()=>{v.value=!0,e.value===p&&(e.value="")},y=()=>{e.value===""&&(e.value=p),v.value=!1},f=()=>{location.href="/search/?keyword="+e.value},_=m(null),L=m(!1),T=g=>{_.value&&!_.value.contains(g.target)&&(L.value=!1)};return q(()=>{window.addEventListener("click",T)}),A(()=>{window.removeEventListener("click",T)}),(g,K)=>{const j=B;return t(),r("div",Ve,[s("div",{class:F(["search-form",{"search-form-focus":v.value||e.value!=""}])},[s("div",Fe,[J(s("input",{type:"text",autocomplete:"off","onUpdate:modelValue":K[0]||(K[0]=D=>e.value=D),placeholder:g.$t("搜索"),class:"search-input",name:"keywords",onFocus:h,onFocusout:y,onKeyup:i,onKeydown:W(f,["enter"])},null,40,Ie),[[Q,e.value]]),s("div",{type:"submit",class:"search-submit iconfont-pc icon-sousuo",onClick:f})])],2),L.value?(t(),r("div",{key:0,ref_key:"guessBox",ref:_,class:"search-guess-box"},[s("ul",Be,[(t(!0),r(k,null,N(c.value,(D,H)=>(t(),r("li",{key:H},[b(j,{to:"/search/?keyword="+D.keyword,class:"serlink"},{default:S(()=>[s("span",Ke,w(D.keyword),1)]),_:2},1032,["to"])]))),128))])],512)):$("",!0)])}}}),Ee=I(Me,[["__scopeId","data-v-b4da413f"]]),qe={class:"top-search"},Ue={class:"acea-row row-middle"},je=["placeholder"],He={class:"search-guess-ul"},Re={class:"name"},Pe=V({__name:"DefSearch",setup(a){const c=m([]);let o=!1,n=null;const i=()=>{if(o)return!1;clearTimeout(n),o=!0,n=setTimeout(async()=>{try{const g=await X(e.value);c.value=g.keyword_list,L.value=c.value.length>0}catch{}finally{o=!1}},300)},d=O(),u=m(d.query.keyword),v=m(!1),e=m(""),p=e.value;u.value&&d.path==="/search/"&&(e.value=u.value),Y(()=>d.query,()=>{d.query.keyword||(e.value="")},{deep:!0});const h=()=>{v.value=!0,e.value===p&&(e.value="")},y=()=>{e.value===""&&(e.value=p),v.value=!1},f=()=>{location.href="/search/?keyword="+e.value},_=m(null),L=m(!1),T=g=>{_.value&&!_.value.contains(g.target)&&(L.value=!1)};return q(()=>{window.addEventListener("click",T)}),A(()=>{window.removeEventListener("click",T)}),(g,K)=>{const j=B;return t(),r("div",qe,[s("div",{class:F(["search-form",{"search-form-focus":v.value||e.value!=""}])},[s("div",Ue,[J(s("input",{type:"text",autocomplete:"off","onUpdate:modelValue":K[0]||(K[0]=D=>e.value=D),placeholder:g.$t("搜索"),class:"search-input",name:"keywords",onFocus:h,onFocusout:y,onKeyup:i,onKeydown:W(f,["enter"])},null,40,je),[[Q,e.value]]),s("div",{type:"submit",class:"search-submit iconfont-pc icon-sousuo",onClick:f})])],2),L.value?(t(),r("div",{key:0,ref_key:"guessBox",ref:_,class:"search-guess-box"},[s("ul",He,[(t(!0),r(k,null,N(c.value,(D,H)=>(t(),r("li",{key:H},[b(j,{to:"/search/?keyword="+D.keyword,class:"serlink"},{default:S(()=>[s("span",Re,w(D.keyword),1)]),_:2},1032,["to"])]))),128))])],512)):$("",!0)])}}}),ze=I(Pe,[["__scopeId","data-v-11c304e1"]]);function Ge(a){let c=!1;if(c)return;if(document.head.querySelector(`link[href="${a}"]`)){c=!0;return}const n=document.createElement("link");n.href=a,n.type="text/css",n.rel="stylesheet",n.onload=()=>{c=!0},document.head.appendChild(n)}const Oe=a=>(P("data-v-875a11d5"),a=a(),z(),a),Ye={class:"cate_menu"},Ae=["onMouseenter"],Je={key:1,class:"cate_menu_line"},Qe={class:"subCata"},We={class:"left"},Xe={class:"nav_cata_bd"},Ze={class:"item"},et={class:"title-list"},tt=Oe(()=>s("i",null," >",-1)),ot={class:"name-list"},st=V({__name:"AllCate",props:{isCateVisible:{type:Boolean,default:!1}},setup(a){const c=U();m("");const o=async()=>{if(c.allCate===null)try{const e=await le();c.allCate=e.cat_floor,e.ico_defined_css!=""&&Ge(e.ico_defined_css)}catch{}finally{}};let n=null;o();const i=m(null),d=e=>{i.value=e},u=()=>{i.value=null},v=()=>{clearTimeout(n)};return E(()=>"ca"),(e,p)=>{const h=B;return t(),r("div",{onMouseleave:u,onMouseenter:p[0]||(p[0]=y=>v())},[s("div",Ye,[(t(!0),r(k,null,N(l(c).allCate,(y,f)=>(t(),r("div",{class:F(["cate_menu_item",{active:i.value===f}]),onMouseenter:_=>d(f)},[s("span",{class:F("floor-ico "+y.floor_ico_font)},null,2),(t(!0),r(k,null,N(y.cat_list,(_,L)=>(t(),r(k,null,[_.name!="-"?(t(),x(h,{key:0,target:"_blank",class:"cate_menu_lk",to:l(M)({path:"list",id:_.id})},{default:S(()=>[C(w(_.name),1)]),_:2},1032,["to"])):$("",!0),_.name!="-"?(t(),r("span",Je,"/")):$("",!0)],64))),256))],42,Ae))),256))]),s("div",Qe,[(t(!0),r(k,null,N(l(c).allCate,(y,f)=>(t(),r(k,{key:f},[i.value===f?(t(),r("div",{key:0,class:F(["subView",{active:i.value===f}])},[s("div",We,[s("div",Xe,[(t(!0),r(k,null,N(y.cat_list,(_,L)=>(t(),r(k,null,[(t(!0),r(k,null,N(_.children,T=>(t(),r("div",Ze,[s("div",et,[b(h,{to:l(M)({path:"list",id:T.category_id})},{default:S(()=>[C(w(T.category_name),1)]),_:2},1032,["to"]),tt]),s("div",ot,[(t(!0),r(k,null,N(T.children,g=>(t(),x(h,{to:l(M)({path:"list",id:g.category_id})},{default:S(()=>[C(w(g.category_name),1)]),_:2},1032,["to"]))),256))])]))),256))],64))),256))])])],2)):$("",!0)],64))),128))])],32)}}}),at=I(st,[["__scopeId","data-v-875a11d5"]]),nt={class:"nav-bd container flex align-end"},ct={class:"acea-row row-center-wrapper"},rt={class:"sub-nav"},it=V({__name:"DefNav",props:{page:{type:String,default:""}},setup(a){const c=a,o=U();o.loadNav();const n=m(!1),i=m(!1),d=m(!1);let u=null;const v=async()=>{u=setTimeout(()=>{i.value=!0,n.value=!0},300)},e=()=>{u&&clearTimeout(u),i.value=!1,n.value=!1,d.value=!1};return(p,h)=>{const y=at,f=B;return t(),r("div",{class:F(["top-nav",{"top-nav-index":c.page==="index"}])},[s("div",nt,[s("div",{class:"main-nav-link",onMouseenter:v,onMouseleave:e},[s("div",ct,[s("div",null,w(p.$t("全部商品分类")),1),s("div",{class:F(["iconfont-pc icon-xiajiantou",l(i)?"icon-xiajiantou-hover":"not-icon-xiajiantou-hover"])},null,2)]),c.page!="index"&&l(n)?(t(),r("div",{key:0,class:F(["hidden-cate",{"hidden-hover":l(n)}])},[l(n)?(t(),x(y,{key:0,isCateVisible:l(n),"onUpdate:isCateVisible":h[0]||(h[0]=_=>ue(n)?n.value=_:null)},null,8,["isCateVisible"])):$("",!0)],2)):$("",!0)],32),s("ul",rt,[s("li",null,[b(f,{to:"/",class:"alv1"},{default:S(()=>[C(w(p.$t("首页")),1)]),_:1})]),(t(!0),r(k,null,N(l(o).mainNav,(_,L)=>(t(),r("li",null,[b(f,{to:_.link?l(M)(_.link):"",class:"alv1"},{default:S(()=>[C(w(_.title),1)]),_:2},1032,["to"])]))),256)),l(Z)()&&l(de)()?(t(),r(k,{key:0},[s("li",null,[b(f,{to:"/shop/list",class:"alv1"},{default:S(()=>[C(w(p.$t("店铺街")),1)]),_:1})]),s("li",null,[b(f,{to:"/join/intro",class:"alv1"},{default:S(()=>[C(w(p.$t("商家入驻")),1)]),_:1})])],64)):$("",!0)])])],2)}}}),lt=I(it,[["__scopeId","data-v-30660a7e"]]),ut={class:"header-nav"},dt={class:"nav-item"},_t=V({__name:"SimNav",setup(a){const c=U();return c.loadNav(),(o,n)=>{const i=B;return t(),r("div",ut,[b(i,{class:"nav-item",to:"/"},{default:S(()=>[C(w(o.$t("首页")),1)]),_:1}),(t(!0),r(k,null,N(l(c).mainNav,(d,u)=>(t(),r("div",dt,[b(i,{to:d.link?l(M)(d.link):"",class:"alv1"},{default:S(()=>[C(w(d.title),1)]),_:2},1032,["to"])]))),256)),l(Z)()&&l(_e)()?(t(),x(i,{key:0,class:"nav-item",to:"/join/intro"},{default:S(()=>[C(w(o.$t("商家入驻")),1)]),_:1})):$("",!0)])}}}),pt=I(_t,[["__scopeId","data-v-4eb1f81d"]]),mt={class:"top-area container"},vt={class:"wrapper"},ht={class:"logo"},ft=["src"],yt=V({__name:"PageHeader",props:{page:{type:String,default:""},showService:{type:Boolean,default:!1},shop_id:{type:[Number,String],default:0},product_id:{type:[Number,String],default:0},order_id:{type:[Number,String],default:0},shop_category_id:{type:[Number,String],default:""},immediateLog:{type:Boolean,default:!0},phone:{type:String,default:""}},setup(a,{expose:c}){const o=U(),n=m();o.loadNav();const i=E(()=>o.decorate_page_config.header_style),d=E(()=>o.decorate_page_config.color_style);return c({handleLog:()=>{var v;(v=n.value)==null||v.__commonLog()}}),(v,e)=>{const p=te,h=B,y=Se,f=Te,_=De;return t(),r(k,null,[b(p,{colorType:l(d),pageType:l(i)},null,8,["colorType","pageType"]),s("div",{class:"header",style:G({borderBottom:l(i)!=1?"1px none #ddd":"1px solid #ddd"})},[s("div",mt,[s("div",vt,[s("div",ht,[b(h,{"exact-active-class":"''",to:"/",class:"alv1"},{default:S(()=>[s("img",{style:G({width:l(i)!=1?"140px":"190px"}),src:("imageFormat"in v?v.imageFormat:l(pe))(l(o).shopLogo),alt:""},null,12,ft)]),_:1})]),l(i)!=1?(t(),x(pt,{key:0,page:a.page},null,8,["page"])):$("",!0),l(i)==1?(t(),x(ze,{key:1})):(t(),x(Ee,{key:2})),l(i)==1?(t(),x(y,{key:3})):$("",!0)]),l(i)==1?(t(),x(lt,{key:0,page:a.page},null,8,["page"])):$("",!0)])],4),a.showService?(t(),x(f,{key:0,phone:a.phone,shop_id:a.shop_id,order_id:a.order_id,product_id:a.product_id},null,8,["phone","shop_id","order_id","product_id"])):$("",!0),b(_,{ref_key:"statisticLogRef",ref:n,immediateLog:a.immediateLog,shop_category_id:a.shop_category_id,shop_id:a.shop_id,product_id:a.product_id},null,8,["immediateLog","shop_category_id","shop_id","product_id"])],64)}}}),Tt=I(yt,[["__scopeId","data-v-929cd277"]]);export{Tt as _,at as a,Te as b};
