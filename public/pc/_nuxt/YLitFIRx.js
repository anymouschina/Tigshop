import{aY as e,e as t,K as o,P as n,b as s,az as a,a4 as u,M as l,y as d,H as c,S as r,bG as i,ar as m,s as v,b5 as f,bH as p,Q as y,bI as b,bJ as M,bK as h,bL as E,bM as x}from"./vO8z_6wc.js";import{P as g}from"./C8tVKSc2.js";import{t as k}from"./D_Dr4eZ1.js";const w=t=>{if(!t)return{onClick:e,onMousedown:e,onMouseup:e};let o=!1,n=!1;return{onClick:e=>{o&&n&&t(e),o=n=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{n=e.target===e.currentTarget}}},C=o({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:l([String,Array,Object])},zIndex:{type:l([String,Number])}});const L=t({name:"ElOverlay",props:C,emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const l=n("overlay"),{onClick:d,onMousedown:c,onMouseup:r}=w(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?s("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:c,onMouseup:r},[u(t,"default")],g.STYLE|g.CLASS|g.PROPS,["onClick","onMouseup","onMousedown"]):a("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[u(t,"default")])}}),Y=(e,t,o,n)=>{let s={offsetX:0,offsetY:0};const a=t=>{const o=t.clientX,a=t.clientY,{offsetX:u,offsetY:l}=s,d=e.value.getBoundingClientRect(),c=d.left,r=d.top,m=d.width,v=d.height,f=document.documentElement.clientWidth,p=document.documentElement.clientHeight,y=-c+u,b=-r+l,M=f-c-m+u,h=p-r-v+l,E=t=>{let d=u+t.clientX-o,c=l+t.clientY-a;(null==n?void 0:n.value)||(d=Math.min(Math.max(d,y),M),c=Math.min(Math.max(c,b),h)),s={offsetX:d,offsetY:c},e.value&&(e.value.style.transform=`translate(${i(d)}, ${i(c)})`)},x=()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",x)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",x)},u=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",a)};return d((()=>{c((()=>{o.value?t.value&&e.value&&t.value.addEventListener("mousedown",a):u()}))})),r((()=>{u()})),{resetPosition:()=>{s={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")}}},S=(e,t={})=>{m(e)||k("[useLockscreen]","You need to pass a ref param to this function");const o=t.ns||n("popup"),s=v((()=>o.bm("parent","hidden")));if(!f||p(document.body,s.value))return;let a=0,u=!1,l="0";const d=()=>{setTimeout((()=>{"undefined"!=typeof document&&u&&document&&(document.body.style.width=l,x(document.body,s.value))}),200)};y(e,(e=>{if(!e)return void d();u=!p(document.body,s.value),u&&(l=document.body.style.width,M(document.body,s.value)),a=h(o.namespace.value);const t=document.documentElement.clientHeight<document.body.scrollHeight,n=E(document.body,"overflowY");a>0&&(t||"scroll"===n)&&u&&(document.body.style.width=`calc(100% - ${a}px)`)})),b((()=>d()))};export{L as E,S as a,w as b,Y as u};
