import{d as l,a7 as e,k as a,K as s,j as t,ay as n,W as u,r as i,U as r,G as d,c as o,o as c,i as _,w as v,g as f,aK as p,I as g,O as k,J as m,a as h,aL as y,X as w,f as b,t as $,F as I,h as C,H as L,b as j,n as G,_ as P,ad as x,a4 as N,cu as O,aV as T,B as E,E as S,aI as A}from"./index-BcyAKDDV.js";import{_ as M}from"./tig-copyright.BKPmSimg.js";import{_ as B}from"./tig-layout.DHsvU4xy.js";import{g as K}from"./levelCenter.BDBNL93V.js";import{r as U}from"./index._2d9EUEM.js";import"./masonry.DMVeXjyb.js";import"./format-price.csRf0ax_.js";import"./specification.BVK5lHIl.js";import"./tig-image.lWnA30Ud.js";import"./uni-icons.CtiPjGAO.js";import"./uni-number-box.D3RxEDC7.js";import"./product.Dt_JmfR-.js";import"./activityCard.DFNvABJe.js";import"./useList.DjEWWv0p.js";const H=P(l({__name:"topCard",props:{list:{type:Array,default:()=>[]}},setup(l){e(l=>({"26260ac8":J.value,"04af563a":D.value,"2ec6a85a":F.value}));const{t:P}=s(),x=t(),{userInfo:N}=n(),O=l;let T=[];const E=u([]),S=i(0),A=u({discount:"0.0",freeShipping:0,rankPoint:"0"}),M=u([]),B=i(0);r(()=>O.list,l=>{var e,a,s;T=l.map(l=>l.rights),B.value=null==(e=l[0])?void 0:e.rankId,Object.assign(E,null==(a=l[0])?void 0:a.rights),S.value=l.findIndex(l=>(null==l?void 0:l.rankLevel)===(null==N?void 0:N.rankLevel)),-1!==S.value&&(Object.assign(A,l[S.value]),"0.0"!=A.discount&&M.push({iconImg:"discount",isChecked:1,rightName:A.discount+P("折")}),1===A.freeShipping&&M.push({iconImg:"freeShoping",isChecked:1,rightName:P("包邮")}),"0"!=A.rankPoint&&M.push({iconImg:"point",isChecked:1,rightName:A.rankPoint+P(`倍${x.integralName}`)}),console.log("currentCard",A),null==(s=A.rights)||s.forEach(l=>{1==l.isChecked&&M.push(l)}),console.log("currentCard",A),console.log("currentRightUnion",M))},{deep:!0,immediate:!0});const K=a(()=>{var l;return 0==N.rankExpireTime?P("永久"):null==(l=N.rankExpireTime)?void 0:l.slice(0,10)}),U=l=>{E.length=0,M.length=0;let e=l.detail.current;Object.assign(E,T[e]),Object.assign(A,O.list[e]),B.value=O.list[e].rankId,"0.0"!=A.discount&&M.push({iconImg:"discount",isChecked:1,rightName:A.discount+P("折")}),1==A.freeShipping&&M.push({iconImg:"freeShoping",isChecked:1,rightName:P("包邮")}),"0"!=A.rankPoint&&M.push({iconImg:"point",isChecked:1,rightName:A.rankPoint+P(`倍${x.integralName}`)}),A.rights.forEach(l=>{1==l.isChecked&&M.push(l)})},H=()=>{G({url:"/pages/user/levelCenter/benefit?rankId="+B.value})},J=a(()=>`url(${d("user/discount.png")})`),D=a(()=>`url(${d("user/free_shoping.png")})`),F=a(()=>`url(${d("user/point.png")})`);return(e,a)=>{const s=_,t=C,n=y,u=p,i=j;return c(),o(s,{class:"top_card_container"},{default:v(()=>[f(s,{class:"margin"},{default:v(()=>[f(u,{"next-margin":"16rpx",class:"card_swiper",current:S.value,onAnimationfinish:U},{default:v(()=>[(c(!0),g(m,null,k(l.list,(l,a)=>(c(),g(m,{key:null==l?void 0:l.rankId},[1===(null==l?void 0:l.rankCardType)?(c(),o(n,{key:0,class:"card_swiper_item"},{default:v(()=>[f(s,{class:w(["card_item",null==l?void 0:l.rankIco])},{default:v(()=>[f(s,{class:"level_name_wrap"},{default:v(()=>[f(s,{class:"level_name"},{default:v(()=>[b($(null==l?void 0:l.rankName),1)]),_:2},1024),f(s,{class:"level_expiry"},{default:v(()=>[b($(e.$t("当前等级有效期至")+" "+K.value),1)]),_:1})]),_:2},1024),(null==l?void 0:l.rankLevel)===I(N).rankLevel?(c(),o(s,{key:0,class:"card_badge"},{default:v(()=>[b($(e.$t("当前等级")),1)]),_:1})):h("",!0),f(s,{class:"card_bottom"},{default:v(()=>[1===I(N).rankType?(c(),g(m,{key:0},[(null==l?void 0:l.rankLevel)===I(N).rankLevel?(c(),o(s,{key:0,class:"level_value_wapper"},{default:v(()=>[f(t,{class:"level_value"},{default:v(()=>{var l;return[b($(null==(l=I(N))?void 0:l.growthPoints),1)]}),_:1}),f(t,{class:"desc"},{default:v(()=>[b($(e.$t("成长值")),1)]),_:1})]),_:1})):(c(),o(s,{key:1,class:"upgrades_wapper"},{default:v(()=>[f(t,{class:"desc"},{default:v(()=>[b($(e.$t("再获得")),1)]),_:1}),f(t,{class:"level_value"},{default:v(()=>[b($((null==l?void 0:l.minGrowthPoints)-I(N).growth<0?0:(null==l?void 0:l.minGrowthPoints)-I(N).growth),1)]),_:2},1024),f(t,{class:"desc"},{default:v(()=>[b($(e.$t("成长值升级为该等级")),1)]),_:1})]),_:2},1024))],64)):h("",!0),2===I(N).rankType?(c(),g(m,{key:1},[(null==l?void 0:l.rankLevel)===I(N).rankLevel?(c(),o(s,{key:0,class:"level_value_wapper"},{default:v(()=>[f(t,{class:"level_value"},{default:v(()=>{var l;return[b($(null==(l=I(N))?void 0:l.growthPoints),1)]}),_:1}),f(t,{class:"desc"},{default:v(()=>[b($(e.$t("成长值")),1)]),_:1})]),_:1})):(c(),o(s,{key:1,class:"upgrades_wapper"},{default:v(()=>[f(t,{class:"desc"},{default:v(()=>[b($(e.$t("再消费")),1)]),_:1}),f(t,{class:"level_value"},{default:v(()=>[b($((null==l?void 0:l.minGrowthPoints)-I(N).growth<0?0:(null==l?void 0:l.minGrowthPoints)-I(N).growth),1)]),_:2},1024),f(t,{class:"desc"},{default:v(()=>[b($(e.$t("元升级为该等级")),1)]),_:1})]),_:2},1024))],64)):h("",!0)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)):h("",!0),2===(null==l?void 0:l.rankCardType)?(c(),o(n,{key:1,class:"card_swiper_item"},{default:v(()=>[f(s,{class:"card_item",style:L(`background-image: url(${null==l?void 0:l.rankBg});`)},{default:v(()=>[f(s,{class:"level_name_wrap"},{default:v(()=>[f(s,{class:"level_name"},{default:v(()=>[b($(null==l?void 0:l.rankName),1)]),_:2},1024),f(s,{class:"level_expiry"},{default:v(()=>[b($(e.$t("当前等级有效期至")+" "+K.value),1)]),_:1})]),_:2},1024),(null==l?void 0:l.rankLevel)===I(N).rankLevel?(c(),o(s,{key:0,class:"card_badge"},{default:v(()=>[b($(e.$t("当前等级")),1)]),_:1})):h("",!0),(null==l?void 0:l.rankLevel)===I(N).rankLevel?(c(),o(s,{key:1,class:"card_code_icon"})):h("",!0),f(s,{class:"card_bottom"},{default:v(()=>[1===I(N).rankType?(c(),g(m,{key:0},[(null==l?void 0:l.rankLevel)===I(N).rankLevel?(c(),o(s,{key:0,class:"level_value_wapper"},{default:v(()=>[f(t,{class:"level_value"},{default:v(()=>{var l;return[b($(null==(l=I(N))?void 0:l.growthPoints),1)]}),_:1}),f(t,{class:"desc"},{default:v(()=>[b($(e.$t("成长值")),1)]),_:1})]),_:1})):(c(),o(s,{key:1,class:"upgrades_wapper"},{default:v(()=>[f(t,{class:"desc"},{default:v(()=>[b($(e.$t("再获得")),1)]),_:1}),f(t,{class:"level_value"},{default:v(()=>[b($((null==l?void 0:l.minGrowthPoints)-I(N).growth<0?0:(null==l?void 0:l.minGrowthPoints)-I(N).growth),1)]),_:2},1024),f(t,{class:"desc"},{default:v(()=>[b($(e.$t("成长值升级为该等级")),1)]),_:1})]),_:2},1024))],64)):h("",!0),2===I(N).rankType?(c(),g(m,{key:1},[(null==l?void 0:l.rankLevel)===I(N).rankLevel?(c(),o(s,{key:0,class:"level_value_wapper"},{default:v(()=>[f(t,{class:"level_value"},{default:v(()=>{var l;return[b($(null==(l=I(N))?void 0:l.growthPoints),1)]}),_:1}),f(t,{class:"desc"},{default:v(()=>[b($(e.$t("成长值")),1)]),_:1})]),_:1})):(c(),o(s,{key:1,class:"upgrades_wapper"},{default:v(()=>[f(t,{class:"desc"},{default:v(()=>[b($(e.$t("再消费")),1)]),_:1}),f(t,{class:"level_value"},{default:v(()=>[b($((null==l?void 0:l.minGrowthPoints)-I(N).growth<0?0:(null==l?void 0:l.minGrowthPoints)-I(N).growth),1)]),_:2},1024),f(t,{class:"desc"},{default:v(()=>[b($(e.$t("元升级为该等级")),1)]),_:1})]),_:2},1024))],64)):h("",!0)]),_:2},1024)]),_:2},1032,["style"])]),_:2},1024)):h("",!0)],64))),128))]),_:1},8,["current"])]),_:1}),f(s,{class:"level_rights_list"},{default:v(()=>[(c(!0),g(m,null,k(M.slice(0,4),(l,e)=>(c(),g(m,{key:e},[l.iconImg?(c(),o(s,{key:0,class:"right_item",onClick:H},{default:v(()=>[f(s,{class:w(["icon_img",l.iconImg])},null,8,["class"]),f(s,{class:"name"},{default:v(()=>[b($(l.rightName),1)]),_:2},1024)]),_:2},1024)):1===l.isChecked?(c(),o(s,{key:1,class:"right_item",onClick:H},{default:v(()=>[f(s,{class:"icon_wapper"},{default:v(()=>[f(i,{class:"icon",src:null==l?void 0:l.icon},null,8,["src"])]),_:2},1024),f(s,{class:"name"},{default:v(()=>[b($(null==l?void 0:l.name),1)]),_:2},1024)]),_:2},1024)):h("",!0)],64))),128)),M.length>4?(c(),o(s,{key:0,class:"right_item",onClick:H},{default:v(()=>[f(s,{class:"icon_img has_five_right"},{default:v(()=>[f(s,{class:"num"},{default:v(()=>[b($(M.length),1)]),_:1}),f(s,{class:"txt"},{default:v(()=>[b($(e.$t("项")),1)]),_:1})]),_:1}),f(s,{class:"name"},{default:v(()=>[b($(e.$t("全部权益")),1)]),_:1})]),_:1})):h("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-d075aa57"]]),J=P(l({__name:"taskCard",setup(l){e(l=>({64570974:t.value}));const s=u({});(async()=>{try{let l=await O();Object.assign(s,null==l?void 0:l.growUpSetting),console.log(s)}catch(l){}})();const t=a(()=>`url(${d("user/task_bg.png")})`);return(l,e)=>{const a=_,t=N;return c(),o(a,{class:"task_container"},{default:v(()=>[f(a,{class:"task_head"},{default:v(()=>[f(a,{class:"title"},{default:v(()=>[b($(l.$t("成长任务")),1)]),_:1})]),_:1}),f(a,{class:"task_list"},{default:v(()=>[1===(null==s?void 0:s.evpi)?(c(),o(a,{key:0,class:"task_item"},{default:v(()=>[f(a,{class:"img",style:L(`background-image: url(${I(d)("user/evpi.png")});`)},null,8,["style"]),f(a,{class:"task_info"},{default:v(()=>[f(a,{class:"name"},{default:v(()=>[b("完善信息")]),_:1}),f(a,{class:"growth_value"},{default:v(()=>[b($(I(x)()?l.$t("+{0}成长值",[null==s?void 0:s.evpiGrowth]):`+${null==s?void 0:s.evpiGrowth}成长值`),1)]),_:1})]),_:1}),f(t,{url:"/pages/user/profile/index",class:"do_task_btn"},{default:v(()=>[b("去完成")]),_:1})]),_:1})):h("",!0),1===(null==s?void 0:s.bindPhone)?(c(),o(a,{key:1,class:"task_item"},{default:v(()=>[f(a,{class:"img",style:L(`background-image: url(${I(d)("user/bind_phone.png")});`)},null,8,["style"]),f(a,{class:"task_info"},{default:v(()=>[f(a,{class:"name"},{default:v(()=>[b("绑定手机号")]),_:1}),f(a,{class:"growth_value"},{default:v(()=>[b($(I(x)()?l.$t("+{0}成长值",[null==s?void 0:s.bindPhoneGrowth]):`+${null==s?void 0:s.bindPhoneGrowth}成长值`),1)]),_:1})]),_:1}),f(t,{url:"/pages/user/profile/index",class:"do_task_btn"},{default:v(()=>[b("去完成")]),_:1})]),_:1})):h("",!0),1===(null==s?void 0:s.buyGoods)?(c(),o(a,{key:2,class:"task_item"},{default:v(()=>[f(a,{class:"img",style:L(`background-image: url(${I(d)("user/buy_goods.png")});`)},null,8,["style"]),f(a,{class:"task_info"},{default:v(()=>[f(a,{class:"name"},{default:v(()=>[b("购买商品")]),_:1}),f(a,{class:"growth_value"},{default:v(()=>[b($(I(x)()?l.$t("每消费{0}元，获得{1}点成长值",[null==s?void 0:s.buyGoodsMoney,null==s?void 0:s.buyGoodsGrowth]):`每消费${null==s?void 0:s.buyGoodsMoney}元，获得${null==s?void 0:s.buyGoodsGrowth}点成长值`),1)]),_:1})]),_:1}),f(t,{url:"/","open-type":"switchTab",class:"do_task_btn"},{default:v(()=>[b("去完成")]),_:1})]),_:1})):h("",!0),1===(null==s?void 0:s.buyOrder)?(c(),o(a,{key:3,class:"task_item"},{default:v(()=>[f(a,{class:"img",style:L(`background-image: url(${I(d)("user/buy_order.png")});`)},null,8,["style"]),f(a,{class:"task_info"},{default:v(()=>[f(a,{class:"name"},{default:v(()=>[b("完成下单")]),_:1}),f(a,{class:"growth_value"},{default:v(()=>[b($(I(x)()?l.$t("每完成{0}笔订单，获得{1}点成长值",[null==s?void 0:s.buyOrderNumber,null==s?void 0:s.buyOrderGrowth]):`每完成${null==s?void 0:s.buyOrderNumber}笔订单，获得${null==s?void 0:s.buyOrderGrowth}点成长值`),1)]),_:1})]),_:1}),f(t,{url:"/pages/cart/index","open-type":"switchTab",class:"do_task_btn"},{default:v(()=>[b("去完成")]),_:1})]),_:1})):h("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-f2e83f02"]]),D=P(l({__name:"levelDesc",props:{list:{type:Array,default:()=>[]},rankConfig:{type:Object,default:()=>{}}},setup(l){const{t:e}=s(),a=l,t=i([]);T(()=>{var l,s;l=a.list,s=a.rankConfig,null==l||l.forEach(l=>{var a,n,u,i;1===(null==(a=null==s?void 0:s.data)?void 0:a.type)?t.value.push({...l,condition:e("不降级")}):2===(null==(n=null==s?void 0:s.data)?void 0:n.type)&&t.value.push({...l,condition:(null==(u=s.data)?void 0:u.rankAfterMonth)+e("个月后，按近")+(null==(i=s.data)?void 0:i.useMonth)+e("个月成长值重新计算")})})});return(a,s)=>{const n=_;return c(),o(n,{class:"level_desc_container"},{default:v(()=>[f(n,{class:"level_card"},{default:v(()=>[f(n,{class:"card_title"},{default:v(()=>[b($(a.$t("等级说明")),1)]),_:1}),f(n,{class:"card_info_wapper"},{default:v(()=>[f(n,{class:"list list_head"},{default:v(()=>[f(n,{class:"level_icon_label"},{default:v(()=>[b($(a.$t("标识")),1)]),_:1}),f(n,{class:"level_name_label"},{default:v(()=>[b($(a.$t("会员名称")),1)]),_:1}),f(n,{class:"level_condition_label"},{default:v(()=>[b($(a.$t("升级条件")),1)]),_:1})]),_:1}),f(n,{class:"list"},{default:v(()=>[(c(!0),g(m,null,k(l.list,(l,s)=>(c(),o(n,{key:null==l?void 0:l.rankId,class:"list_item"},{default:v(()=>[f(n,{class:"level_icon"},{default:v(()=>[f(n,{class:w(["icon",`card${null==l?void 0:l.rankLevel}`]),style:L({"background-image":`url(${I(d)(`user/level_${null==l?void 0:l.rankLevel}.png`)})`})},null,8,["class","style"])]),_:2},1024),f(n,{class:"level_name"},{default:v(()=>[b($(a.$t(null==l?void 0:l.rankName)),1)]),_:2},1024),f(n,{class:"level_condition"},{default:v(()=>{return[b($((a=null==l?void 0:l.minGrowthPoints,0===a?e("无门槛"):a+e("成长值"))),1)];var a}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),f(n,{class:"level_card"},{default:v(()=>[f(n,{class:"card_title"},{default:v(()=>[b($(a.$t("保级说明")),1)]),_:1}),f(n,{class:"card_info_wapper"},{default:v(()=>[f(n,{class:"list list_head"},{default:v(()=>[f(n,{class:"level_name_label"},{default:v(()=>[b($(a.$t("会员名称")),1)]),_:1}),f(n,{class:"level_condition_label"},{default:v(()=>[b($(a.$t("保级条件")),1)]),_:1})]),_:1}),f(n,{class:"list"},{default:v(()=>[(c(!0),g(m,null,k(t.value,(l,e)=>(c(),o(n,{key:e,class:"list_item"},{default:v(()=>[f(n,{class:"level_name"},{default:v(()=>[b($(a.$t(null==l?void 0:l.rankName)),1)]),_:2},1024),f(n,{class:"level_condition"},{default:v(()=>[b($(a.$t(null==l?void 0:l.condition)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-5559736e"]]),F=P(l({__name:"index",setup(l){const{userInfo:e}=n(),a=u([]),s=u([]),r=u({rankLevel:"1"}),d=i({});t();return(async()=>{var l;try{let t=await K();console.log(t);let n=null==(l=null==t?void 0:t.item)?void 0:l.filter(l=>parseInt(null==l?void 0:l.rankLevel)>=parseInt(e.rankLevel));d.value=t.rankConfig,Object.assign(a,n),Object.assign(s,null==t?void 0:t.item)}catch(t){}})(),(l,t)=>{const n=_,u=E(S("tig-copyright"),M),i=E(S("tig-layout"),B);return c(),o(i,{title:"会员中心"},{default:v(()=>[f(n,{class:"level_container"},{default:v(()=>[f(H,{list:a,"user-level":r},null,8,["list","user-level"]),A("div",{class:w(["bottom_wapper",{task_mode:2===I(e).rankType}])},[2===I(e).rankType?(c(),o(J,{key:0})):h("",!0),f(D,{"rank-config":d.value,list:s},null,8,["rank-config","list"])],2)]),_:1}),f(U),f(u)]),_:1})}}}),[["__scopeId","data-v-86eb30d1"]]);export{F as default};
