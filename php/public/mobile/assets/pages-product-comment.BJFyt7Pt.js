import{d as a,K as l,r as e,l as s,q as t,m as u,bf as n,c as o,w as c,aa as i,Q as r,ab as d,B as f,E as m,o as v,g as _,a as g,i as p,I as y,J as b,O as k,b as x,F as h,ac as j,h as w,f as z,t as I,G as T,b5 as C,_ as F}from"./index-BcyAKDDV.js";import{_ as K}from"./uni-rate.BR_CvbfQ.js";import{_ as q}from"./tig-layout.DHsvU4xy.js";import{b as B}from"./product.Dt_JmfR-.js";import"./uni-icons.CtiPjGAO.js";const E=F(a({__name:"comment",setup(a){const{t:F}=l(),E=e(!1),G=e([]),J=e(1),L=e(10),M=e(0),O=e(!1),P=async()=>{J.value>1&&(O.value=!0),i({title:F("加载中")});try{const a=await B(Q.value,{type:1,size:L.value,page:J.value});G.value=[...G.value,...a.records],M.value=a.total}catch(a){r({title:a.message,icon:"none"})}finally{O.value=!1,d()}},Q=e("");return s(a=>{if(a){const{id:l}=a;l&&(Q.value=l,P())}}),t(()=>{J.value<Math.ceil(M.value/L.value)&&(J.value++,P())}),u(()=>{n()}),(a,l)=>{const e=x,s=p,t=w,u=f(m("uni-rate"),K),n=f(m("tig-layout"),q);return v(),o(n,{title:"商品评价"},{default:c(()=>[_(s,{class:"product-comment-card"},{default:c(()=>[(v(!0),y(b,null,k(G.value,(a,l)=>(v(),o(s,{key:l,class:"comment-item"},{default:c(()=>[_(s,{class:"user-info flex justify-between align-center"},{default:c(()=>[_(s,{class:"user-name flex align-center"},{default:c(()=>[_(s,{class:"head_logo"},{default:c(()=>[_(e,{src:h(j)((null==a?void 0:a.avatar)||"")},null,8,["src"])]),_:2},1024),_(s,null,{default:c(()=>[_(t,null,{default:c(()=>[z(I(a.username),1)]),_:2},1024),_(u,{value:a.commentRank,readonly:!0,size:"14",color:"#bfbfbf","active-color":"#ffa800"},null,8,["value"])]),_:2},1024)]),_:2},1024),_(s,{class:"time"},{default:c(()=>[z(I(a.addTime),1)]),_:2},1024)]),_:2},1024),_(s,{class:"tags flex-wrap"},{default:c(()=>[(v(!0),y(b,null,k(a.commentTag,(a,l)=>(v(),o(s,{key:l,class:"tag"},{default:c(()=>[z(I(a),1)]),_:2},1024))),128))]),_:2},1024),_(s,{class:"user-content"},{default:c(()=>[z(I(a.content),1)]),_:2},1024),_(s,{class:"user-imgs flex-wrap align-center"},{default:c(()=>[(v(!0),y(b,null,k(a.showPics,(a,l)=>(v(),o(e,{key:l,mode:"aspectFit",src:h(j)(a.picThumb),onClick:l=>{return e=h(j)((null==a?void 0:a.picUrl)||""),void C({urls:[e]});var e}},null,8,["src","onClick"]))),128))]),_:2},1024)]),_:2},1024))),128))]),_:1}),J.value>1?(v(),o(s,{key:0,class:"loading-box"},{default:c(()=>[E.value?(v(),o(s,{key:0,class:"bottomLoading"},{default:c(()=>[_(e,{"lazy-load":"",class:"loading",src:h(T)("common/loading.gif")},null,8,["src"])]),_:1})):g("",!0)]),_:1})):g("",!0),_(s,{class:"loading-box"},{default:c(()=>[G.value.length<1?(v(),o(s,{key:0},{default:c(()=>[z(I(a.$t("暂无评价")),1)]),_:1})):g("",!0)]),_:1})]),_:1})}}}),[["__scopeId","data-v-23fd9c50"]]);export{E as default};
