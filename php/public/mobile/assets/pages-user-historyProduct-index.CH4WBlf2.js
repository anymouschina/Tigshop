import{a2 as a,d as e,K as t,r as l,c as s,w as o,aa as c,ab as u,B as r,E as d,bp as i,c9 as n,o as f,g as p,a as m,i as _,I as v,J as h,O as g,Y as y,f as b,t as x,N as k,Z as C,b as I,F as $,G as j,h as w,Q as z,a1 as F,_ as S}from"./index-BcyAKDDV.js";import{_ as V}from"./tig-image.lWnA30Ud.js";import{_ as E}from"./format-price.csRf0ax_.js";import{_ as N,a as P,e as U}from"./tig-layout.DHsvU4xy.js";import{_ as B}from"./tig-fixed-placeholder.BvTFztLB.js";const G=S(e({__name:"index",setup(e){const{t:S}=t(),G=l(!0),H=l([]),J=l([]),K=l(!1),O=l(!1),Q=a=>{a.length==H.value.length?O.value=!0:O.value=!1},T=()=>{O.value?J.value=H.value.map(a=>a.productId):J.value=[]},Y=async()=>{try{await(e=J.value,a({url:"user/user/delHistoryProduct",method:"post",data:{ids:e}})),z({title:S("删除成功"),icon:"none"}),Z()}catch(t){console.error(t)}var e},Z=async()=>{c({title:S("加载中")});try{const e=await a({url:"user/user/historyProduct",method:"get"});if(H.value=e,O.value)return void(J.value=H.value.map(a=>a.productId))}catch(e){console.error(e)}finally{u(),G.value=!1}};Z();return(a,e)=>{const t=r(d("tig-image"),V),l=_,c=r(d("format-price"),E),u=r(d("up-checkbox"),i),z=r(d("up-checkbox-group"),n),S=I,Z=w,q=r(d("tig-button"),P),A=r(d("tig-checkbox"),U),D=r(d("tig-fixed-placeholder"),B),L=r(d("tig-layout"),N);return f(),s(L,{title:"浏览记录"},{default:o(()=>[p(z,{modelValue:J.value,"onUpdate:modelValue":e[1]||(e[1]=a=>J.value=a),"active-color":"var(--general)",placement:"column",onChange:Q},{default:o(()=>[H.value.length>0?(f(),s(l,{key:0,class:"history-product"},{default:o(()=>[(f(!0),v(h,null,g(H.value,a=>(f(),s(l,{key:a.productId,class:"history-product-item",onClick:e=>{return t=a.productId,void F({url:"/pages/product/index?id="+t});var t}},{default:o(()=>[p(l,{class:"history-product-item-top"},{default:o(()=>[p(l,{class:"img-box"},{default:o(()=>[p(t,{src:a.picThumb,mode:"widthFix"},null,8,["src"])]),_:2},1024)]),_:2},1024),p(l,{class:"history-product-item-bottom"},{default:o(()=>[p(l,{class:"detail line2"},{default:o(()=>[b(x(a.productName),1)]),_:2},1024),p(l,{class:"price"},{default:o(()=>[p(c,{"font-style":{fontSize:"32rpx"},"currency-style":{fontSize:"22rpx"},"decimals-style":{fontSize:"25rpx"},"price-data":a.price},null,8,["price-data"])]),_:2},1024)]),_:2},1024),y(p(l,{class:"item-btn",onClick:e[0]||(e[0]=k(()=>{},["stop"]))},{default:o(()=>[p(l,{class:"btn-box"},{default:o(()=>[p(u,{"custom-style":{border:"none"},size:"20",shape:"circle",name:a.productId},null,8,["name"])]),_:2},1024)]),_:2},1536),[[C,K.value]])]),_:2},1032,["onClick"]))),128))]),_:1})):m("",!0)]),_:1},8,["modelValue"]),G.value||0!=H.value.length?m("",!0):(f(),s(l,{key:0,class:"empty-box"},{default:o(()=>[p(l,{class:"pictrue"},{default:o(()=>[p(S,{src:$(j)("common/data_empty.png")},null,8,["src"])]),_:1}),p(l,{class:"txt"},{default:o(()=>[b(x(a.$t("暂无浏览记录！")),1)]),_:1})]),_:1})),p(D,{"background-color":"#fff"},{default:o(()=>[p(l,{class:"footer-box"},{default:o(()=>[K.value?(f(),s(l,{key:1,class:"footer-edit"},{default:o(()=>[p(l,{class:"all-check"},{default:o(()=>[p(A,{checked:O.value,"onUpdate:checked":e[3]||(e[3]=a=>O.value=a),"checked-text":a.$t("全选"),onChange:T},null,8,["checked","checked-text"])]),_:1}),p(l,{class:"edit-btn"},{default:o(()=>[p(q,{class:"btn",plain:"",onClick:e[4]||(e[4]=a=>K.value=!1)},{default:o(()=>[b(x(a.$t("取消")),1)]),_:1}),p(q,{class:"btn",disabled:!J.value.length,onClick:Y},{default:o(()=>[b(x(a.$t("删除")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})):(f(),s(l,{key:0,class:"footer-text"},{default:o(()=>[p(l,{class:"footer-num"},{default:o(()=>[b(x(a.$t("共")),1),p(Z,{class:"num"},{default:o(()=>[b(x(H.value.length),1)]),_:1}),b(x(a.$t("件商品")),1)]),_:1}),p(l,{class:"footer-text-btn"},{default:o(()=>[p(q,{class:"btn",onClick:e[2]||(e[2]=a=>K.value=!0)},{default:o(()=>[b(x(a.$t("管理")),1)]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-3c13f6a6"]]);export{G as default};
