import{d as a,K as e,j as s,ay as l,W as t,r,l as c,q as i,c as o,w as u,B as n,E as d,a7 as m,F as p,o as f,g as v,a as _,i as h,I as g,J as y,O as b,X as x,Y as j,h as C,f as k,t as O,Z as P,b as w,G as N,n as I,_ as F}from"./index-BcyAKDDV.js";import{_ as S}from"./tig-image.lWnA30Ud.js";import{_ as T}from"./format-price.csRf0ax_.js";import{f as z,_ as V}from"./tig-layout.DHsvU4xy.js";import{s as $}from"./searchInput.Cz2VbHF3.js";import{e as q}from"./empty.CqoA4NAV.js";import{_ as B}from"./share.vue_vue_type_script_setup_true_lang.CnzghFsZ.js";import{a as E}from"./salesman.Bm7sUMen.js";import"./tig-qrcode.CviCOgjo.js";import"./tig-fixed-placeholder.BvTFztLB.js";import"./useCurrency.-6BA0aeD.js";const H=F(a({__name:"list",setup(a){m(a=>({"7cc2ba7a":p(H)+"px","5d72a7a8":p(G)+"px","04fcd1b0":p(U)+"px","1d9f0820":p(W)}));const{t:F}=e();s(),l();const{height:H,contentHeight:U,contentWidth:W,statusBarHeight:G}=z(60),J=t({productName:"",sortField:"addTime",sortOrder:"desc",page:1,pageSize:15}),K=r(0),M=r("addTime"),X=r([{label:"最新",value:"addTime"},{label:"销量",value:"virtualSales"},{label:"价格",value:"productPrice",sortOrder:"desc"}]),Y=()=>{J.page=1,J.sortOrder="desc",L.value=[]},Z=()=>{J.productName="",Y(),Q()},A=a=>{Y(),Q()},D=r(!1),L=r([]),Q=async()=>{D.value=!0;try{const a=await E(J);L.value=[...L.value,...a.records],K.value=a.total}catch(a){console.error(a)}finally{D.value=!1}},R=r({}),aa=r(!1);return c(()=>{Q()}),i(()=>{J.page<Math.ceil(K.value/J.pageSize)&&(J.page++,Q())}),(a,e)=>{const s=h,l=C,t=n(d("tig-image"),S),r=n(d("format-price"),T),c=w,i=n(d("tig-layout"),V);return f(),o(i,null,{default:u(()=>[v(s,{class:"sticky"},{default:u(()=>[v(s,{class:"salesman-menu"},{default:u(()=>[v(s,{class:"search-box"},{default:u(()=>[v(s,{class:"status-bar"}),v(s,{class:"search-input-box"},{default:u(()=>[v(s,{class:"input"},{default:u(()=>[v($,{modelValue:J.productName,"onUpdate:modelValue":e[0]||(e[0]=a=>J.productName=a),style:{width:"100%"},onConfirm:A,onClear:Z},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),v(s,{class:"salesman-content"},{default:u(()=>[(f(!0),g(y,null,b(X.value,(e,t)=>(f(),o(s,{key:t,class:x(["salesman-item",{active:M.value===e.value}]),onClick:a=>(a=>{if(Y(),"productPrice"==a.value)a.sortOrder="desc"===a.sortOrder?"asc":"desc",J.sortOrder=a.sortOrder;else if(a.value===J.sortField)return;M.value=a.value,J.sortField=a.value,Q()})(e)},{default:u(()=>[v(l,null,{default:u(()=>[k(O(a.$t(e.label)),1)]),_:2},1024),j(v(s,{class:"price-ico-box flex flex-column"},{default:u(()=>[v(l,{class:x(["iconfont-h5 icon-shangjiantou price-icon",{order:"productPrice"===M.value&&"asc"===e.sortOrder}])},null,8,["class"]),v(l,{class:x(["iconfont-h5 icon-xiajiantou price-icon",{order:"productPrice"===M.value&&"desc"===e.sortOrder}])},null,8,["class"])]),_:2},1536),[[P,"productPrice"===e.value]])]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),v(s,{class:"salesman-list"},{default:u(()=>[(f(!0),g(y,null,b(L.value,e=>(f(),o(s,{key:e.productId,class:"salesman-list-item"},{default:u(()=>[v(s,{class:"salesman-item-content",onClick:a=>{return s=`/pages/salesman/detail?id=${e.productId}`,void I({url:s});var s}},{default:u(()=>[v(s,{class:"salesman-item-img"},{default:u(()=>[v(t,{src:e.picThumb},null,8,["src"])]),_:2},1024),v(s,{class:"salesman-item-text"},{default:u(()=>[v(s,{class:"line2 name"},{default:u(()=>[k(O(e.productName),1)]),_:2},1024),v(s,{class:"price"},{default:u(()=>[v(r,{"currency-style":{"font-size":"21rpx"},"price-data":e.productPrice},null,8,["price-data"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]),v(s,{class:"salesman-item-btn"},{default:u(()=>[v(s,{class:"salesman-item-btn-content",onClick:a=>{return s=e,aa.value=!0,void(R.value=s);var s}},{default:u(()=>[v(c,{class:"salesman-item-btn-icon",src:p(N)("salesman/shareIcon.png")},null,8,["src"]),v(s,{class:"salesman-item-btn-text"},{default:u(()=>[k(O(a.$t(Number(e.finalCommissionPrice)>0?"预计可赚":"立即分享"))+" ",1),Number(e.finalCommissionPrice)>0?(f(),o(r,{key:0,"price-data":e.finalCommissionPrice},null,8,["price-data"])):_("",!0)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),D.value||0!==K.value?_("",!0):(f(),o(q,{key:0,styles:{width:"320rpx",height:"320rpx"}})),v(B,{"show-share-card":aa.value,"onUpdate:showShareCard":e[1]||(e[1]=a=>aa.value=a),"current-data":R.value},null,8,["show-share-card","current-data"])]),_:1})}}}),[["__scopeId","data-v-29022633"]]);export{H as default};
