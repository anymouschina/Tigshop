import{a2 as a,d as s,K as e,W as l,r as t,l as o,q as u,c,w as i,B as n,E as p,o as d,g as r,i as h,a as f,I as m,J as _,O as g,f as v,t as y,h as x,b as k,F as b,G as w,n as C,Q as I,_ as j}from"./index-BcyAKDDV.js";import{_ as V}from"./tig-image.lWnA30Ud.js";import{_ as $,a as z}from"./uni-swipe-action.BR-4IYWe.js";import{_ as q}from"./loading-box.BPbOi9GY.js";import{_ as B}from"./tig-layout.DHsvU4xy.js";import{s as E}from"./shop.C0LoUVHm.js";const F=j(s({__name:"index",setup(s){const{t:j}=e(),F=l({page:1,size:10,keyword:""}),G=t([]),J=t(0),K=t(!1),L=t(!1),M=async()=>{F.page>1?L.value=!0:K.value=!0;try{const e=await(s=F,a({url:"user/user/collectionShop",method:"get",params:s}));G.value=e.records,J.value=e.total}catch(e){console.error(e)}finally{L.value=!1,K.value=!1}var s};o(()=>{M()});return u(()=>{F.page<Math.ceil(J.value/F.size)&&(F.page++,M())}),(a,s)=>{const e=n(p("tig-image"),V),l=h,t=x,o=n(p("uni-swipe-action-item"),$),u=n(p("uni-swipe-action"),z),J=k,N=n(p("loading-box"),q),O=n(p("tig-layout"),B);return d(),c(O,{title:"店铺收藏"},{default:i(()=>[r(l,{class:"collection-shop"},{default:i(()=>[G.value.length>0?(d(),c(u,{key:0},{default:i(()=>[r(l,{class:"collection-content"},{default:i(()=>[(d(!0),m(_,null,g(G.value,s=>(d(),c(l,{key:s.shopId,class:"move-item"},{default:i(()=>[r(o,{threshold:0,"auto-close":""},{right:i(()=>[r(l,{class:"collect-move-box"},{default:i(()=>[r(l,{class:"btn-del",onClick:a=>(async a=>{try{await E({shopId:a}),I({title:j("取消成功"),icon:"none"}),F.page=1,G.value=[],M()}catch(s){console.error(s)}})(s.shopId)},{default:i(()=>[r(t,null,{default:i(()=>[v(y(a.$t("取消收藏")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),default:i(()=>[r(l,{class:"shop-item",onClick:a=>{return e=s.shopId,void C({url:`/pages/shop/index?shopId=${e}`});var e}},{default:i(()=>[r(l,{class:"shop-item-left"},{default:i(()=>[r(e,{src:s.shop.shopLogo},null,8,["src"])]),_:2},1024),r(l,{class:"shop-item-right"},{default:i(()=>[r(l,{class:"shop-name line1"},{default:i(()=>[v(y(s.shop.shopTitle),1)]),_:2},1024),r(l,{class:"shop-desc line1"},{default:i(()=>[v(y(s.shop.description?s.shop.description:""),1)]),_:2},1024),r(l,{class:"shop-info"},{default:i(()=>[r(t,{class:"shop-info-text"},{default:i(()=>[v("上架商品："+y(s.productCount),1)]),_:2},1024),r(t,{class:"shop-info-text"},{default:i(()=>[v("店铺收藏："+y(s.collectCount),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):f("",!0),0!==G.value.length||K.value||L.value?f("",!0):(d(),c(l,{key:1,class:"empty-box"},{default:i(()=>[r(l,{class:"pictrue"},{default:i(()=>[r(J,{src:b(w)("common/data_empty.png")},null,8,["src"])]),_:1}),r(l,{class:"txt"},{default:i(()=>[v(y(a.$t("暂无收藏记录！")),1)]),_:1})]),_:1})),r(N,{modelValue:L.value,"onUpdate:modelValue":s[0]||(s[0]=a=>L.value=a),page:F.page,length:G.value.length},null,8,["modelValue","page","length"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-368f8ab0"]]);export{F as default};
