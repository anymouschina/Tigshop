import{d as e,K as a,r as t,k as l,c as s,w as i,B as o,E as u,o as n,g as r,i as c,F as d,f as p,t as m,Q as f,a1 as v,_ as y}from"./index-BcyAKDDV.js";import{_}from"./uni-easyinput.CZPFNYUF.js";import{_ as b,a as h}from"./tig-layout.DHsvU4xy.js";import{V as g}from"./index.Bk5EsjlE.js";import{a as k,b as x}from"./security.DzeJeOke.js";import"./uni-icons.CtiPjGAO.js";const j=y(e({__name:"newPhone",setup(e){const{t:y}=a(),j=e=>{w.value=e},I=e=>{C.value=e},w=t(""),C=t(""),U=t(""),$=t(!0),q=l(()=>!C.value||!w.value),E=e=>{f({title:e,duration:1500,icon:"none"})},T=async()=>{try{let e={mobile:C.value,code:w.value};await x({...e}),f({title:y("修改成功"),icon:"none"}),setTimeout(()=>{v({url:"/pages/user/profile/index"})},1e3)}catch(e){e.message&&f({title:e.message,icon:"none"})}};return(e,a)=>{const t=o(u("uni-easyinput"),_),l=c,f=o(u("tig-button"),h),v=o(u("tig-layout"),b);return n(),s(v,{title:"账户安全"},{default:i(()=>[r(l,{class:"profile-edit-main"},{default:i(()=>[r(l,{class:"profile-edit-content"},{default:i(()=>[r(l,{class:"item input"},{default:i(()=>[r(t,{"input-border":!1,value:C.value,class:"uni-input item-input",placeholder:e.$t("请输入新手机号"),"primary-color":"rgb(192, 196, 204)",onInput:I},null,8,["value","placeholder"])]),_:1}),r(l,{class:"flex align-center"},{default:i(()=>[r(l,{class:"item line"},{default:i(()=>[r(t,{"input-border":!1,value:w.value,class:"uni-input item-input",focus:"",placeholder:e.$t("新手机短信验证码"),"primary-color":"rgb(192, 196, 204)",onInput:j},null,8,["value","placeholder"])]),_:1}),r(g,{"is-checked":$.value,"onUpdate:isChecked":a[0]||(a[0]=e=>$.value=e),mobile:C.value,"onUpdate:mobile":a[1]||(a[1]=e=>C.value=e),"verify-token-data":U.value,"onUpdate:verifyTokenData":a[2]||(a[2]=e=>U.value=e),style:{height:"65rpx"},"request-api":d(k),onMobileErrorCallback:E},null,8,["is-checked","mobile","verify-token-data","request-api"])]),_:1}),r(l,{class:"item",style:{height:"60rpx"}},{default:i(()=>[r(f,{disabled:q.value,class:"next",onClick:T},{default:i(()=>[p(m(e.$t("提交")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})}}}),[["__scopeId","data-v-29c28162"]]);export{j as default};
