import{d as a,j as e,r as s,l as t,p as l,q as o,s as u,v as r,y as i,z as n,c,w as p,A as m,B as d,E as v,D as _,o as y,g as f,i as g,b as j,F as x,G as h,I as b,a as w,J as k,_ as I}from"./index-BcyAKDDV.js";import{_ as T}from"./tig-back-top.vue_vue_type_script_setup_true_lang.Bi73mTCV.js";import{u as L,_ as z}from"./tig-layout.DHsvU4xy.js";import{g as F,a as G}from"./home.CJJfsVI7.js";import{u as A,m as B}from"./index.QNyxc9Gs.js";import{m as C}from"./masonry.DMVeXjyb.js";import"./tig-image.lWnA30Ud.js";import"./index.me9OfWvf.js";import"./format-price.csRf0ax_.js";import"./tig-fixed-placeholder.BvTFztLB.js";import"./tig-countdown.vue_vue_type_script_setup_true_lang.BLkMpcmg.js";import"./specification.BVK5lHIl.js";import"./uni-icons.CtiPjGAO.js";import"./uni-number-box.D3RxEDC7.js";import"./product.Dt_JmfR-.js";import"./activityCard.DFNvABJe.js";const D=I(a({__name:"index",setup(a){const{scrollTop:I}=L(),D=e(),E=s(0),J=s(!1),q=s([]),H=s(0),K=s(1),$=s(!1),M=s(!0),N=s([]),O=a=>{H.value=a,0!==H.value&&(K.value=1,$.value=!1,N.value=[],P())},P=async()=>{M.value=!0;try{const a=await F({categoryId:H.value,page:K.value});a.records&&a.records.length>0?(N.value=[...N.value,...a.records],$.value=!1):$.value=!0}catch(a){console.error(a)}finally{M.value=!1}},Q=async a=>{J.value=!0;try{const e=await G(a);q.value=e.moduleList,E.value=1,m()}catch(e){console.error(e)}finally{J.value=!1}};t(a=>{a&&a.id&&Q(a.id),R.reset()});const R=A();return l(()=>{H.value=0,R.reset(),Q()}),o(()=>{H.value>0&&!J.value&&!$.value&&(K.value++,P())}),u(()=>{I.value>0&&setTimeout(()=>{r({scrollTop:I.value,duration:0})},50)}),i(a=>({title:D.baseInfo.shopTitle})),n(()=>({title:D.baseInfo.shopTitle})),(a,e)=>{const s=j,t=g,l=d(v("up-empty"),_),o=d(v("tig-back-top"),T),u=d(v("tig-layout"),z);return y(),c(u,null,{default:p(()=>[f(t,null,{default:p(()=>[J.value?(y(),c(t,{key:0,class:"index_empty"},{default:p(()=>[f(s,{"lazy-load":"",src:x(h)("common/index_empty.png"),mode:"widthFix"},null,8,["src"])]),_:1})):(y(),c(t,{key:1,class:"index"},{default:p(()=>[f(t,{class:"decorate-page-window"},{default:p(()=>[f(B,{modules:q.value,"scroll-top":x(I),onLoadGoodsList:O},null,8,["modules","scroll-top"]),H.value>0&&N.value.length>0?(y(),b(k,{key:0},[f(C,{"commodity-list":N.value},null,8,["commodity-list"]),M.value||0!==N.value.length?w("",!0):(y(),c(t,{key:0,class:"empty-box"},{default:p(()=>[f(l,{icon:x(h)("salesman/no_order.png"),text:a.$t("暂无数据")},null,8,["icon","text"])]),_:1}))],64)):w("",!0)]),_:1})]),_:1})),f(o,{"scroll-top":x(I)},null,8,["scroll-top"])]),_:1})]),_:1})}}}),[["__scopeId","data-v-e63d53e8"]]);export{D as default};
