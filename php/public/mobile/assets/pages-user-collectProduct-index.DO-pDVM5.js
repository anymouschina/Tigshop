import{a2 as a,d as e,K as t,W as l,r as s,l as o,q as c,c as u,w as r,aa as i,ab as d,B as n,E as p,o as m,a as f,g,i as _,I as v,J as y,O as h,f as x,t as b,h as k,b as w,F as j,G as C,a1 as I,ae as z,Q as V,_ as E}from"./index-BcyAKDDV.js";import{_ as N}from"./tig-image.lWnA30Ud.js";import{_ as P}from"./format-price.csRf0ax_.js";import{_ as S,a as $}from"./uni-swipe-action.BR-4IYWe.js";import{_ as q}from"./loading-box.BPbOi9GY.js";import{_ as B}from"./tig-layout.DHsvU4xy.js";const F=E(e({__name:"index",setup(e){const{t:E}=t(),F=l({page:1,size:10,keyword:""}),G=s(0),J=s(!1),K=s(!1),M=s([]),O=async()=>{F.page>1?J.value=!0:i({title:E("加载中")});try{const t=await(e={...F},a({url:"user/collectProduct/list",method:"get",params:e}));G.value=t.total,M.value=[...M.value,...t.records]}catch(t){console.error(t)}finally{d(),J.value=!1,K.value=!0}var e},Q=async e=>{try{await(t={id:e},a({url:"user/collectProduct/cancel",method:"post",data:t})),V({title:E("取消收藏成功"),icon:"none"}),F.page=1,M.value=[],O()}catch(l){V({title:l.message,icon:"none",duration:1e3})}var t};return o(()=>{O()}),c(()=>{F.page<Math.ceil(G.value/F.size)&&(F.page++,O())}),(a,e)=>{const t=n(p("tig-image"),N),l=_,s=n(p("format-price"),P),o=k,c=n(p("uni-swipe-action-item"),S),i=n(p("uni-swipe-action"),$),d=w,V=n(p("loading-box"),q),G=n(p("tig-layout"),B);return m(),u(G,{title:"商品收藏"},{default:r(()=>[M.value.length>0?(m(),u(l,{key:0,class:"collect-product"},{default:r(()=>[g(i,null,{default:r(()=>[(m(!0),v(y,null,h(M.value,e=>(m(),u(l,{key:e.productId,class:"move-item"},{default:r(()=>[g(c,{threshold:0,"auto-close":""},{right:r(()=>[g(l,{class:"collect-move-box"},{default:r(()=>[g(l,{class:"btn-del",onClick:a=>{return t=e.productId,void z({title:E("提示"),content:E("确定取消收藏吗？"),success:async a=>{a.confirm&&Q(t)}});var t}},{default:r(()=>[g(o,null,{default:r(()=>[x(b(a.$t("取消收藏")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),default:r(()=>[g(l,{class:"collect-product-item",onClick:a=>{return t=e.productId,void I({url:"/pages/product/index?id="+t});var t}},{default:r(()=>[g(l,{class:"collect-product-item-left"},{default:r(()=>[g(l,{class:"img-box"},{default:r(()=>[g(t,{src:e.picThumb},null,8,["src"])]),_:2},1024)]),_:2},1024),g(l,{class:"collect-product-item-right"},{default:r(()=>[g(l,{class:"title"},{default:r(()=>[x(b(e.productName),1)]),_:2},1024),g(l,{class:"item-bottom"},{default:r(()=>[g(l,{class:"price"},{default:r(()=>[g(s,{"decimals-style":{fontSize:"25rpx"},"currency-style":{fontSize:"23rpx"},"price-data":e.price},null,8,["price-data"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):f("",!0),0===M.value.length&&!0===K.value?(m(),u(l,{key:1,class:"empty-box"},{default:r(()=>[g(l,{class:"pictrue"},{default:r(()=>[g(d,{src:j(C)("common/data_empty.png")},null,8,["src"])]),_:1}),g(l,{class:"txt"},{default:r(()=>[x(b(a.$t("暂无收藏记录！")),1)]),_:1})]),_:1})):f("",!0),g(V,{modelValue:J.value,"onUpdate:modelValue":e[0]||(e[0]=a=>J.value=a),page:F.page,length:M.value.length},null,8,["modelValue","page","length"])]),_:1})}}}),[["__scopeId","data-v-49fe7f26"]]);export{F as default};
