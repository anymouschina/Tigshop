import{d as te,v as oe,e as i,f as y,g as p,h as n,y as a,l as o,i as t,a2 as ae,K as d,k as v,t as k,j as B,F as se,m as ne,dw as le,J as _,ag as ie}from"./index-BEWhCL1q.js";/* empty css             */import{b as re}from"./version-C520_GUm.js";import"./index-DVG44k_-.js";import{P as de}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-B9ASxJaT.js";import{D as ce}from"./DeleteRecord-C4_57oHW.js";/* empty css                                                                    */import{P as pe}from"./Pagination-4FaohhlG.js";import{b as F}from"./format-C8RAoEAk.js";import{u as _e}from"./decorate-C8NX2VVd.js";import{u as ue,d as me,b as fe,a as ge,i as ye,c as E,g as ve}from"./mobileDecorate-CT26Oe_a.js";import{u as ke}from"./useListRequest-Bpxbydyo.js";import{_ as be}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";const he={VITE_BASE_DIR:"admin"},Ce={class:"container"},we={class:"content_wrapper"},Ie={class:"lyecs-table-list-warp"},De={class:"list-table-tool lyecs-search-warp"},Te={class:"list-table-tool-row"},Se={class:"simple-form-warp"},xe={class:"simple-form-field"},$e={class:"form-group"},Be={class:"control-container"},Ve={class:"simple-form-field"},Ae={class:"form-group"},ze={class:"simple-form-field"},Fe={class:"form-group"},Ee={class:"simple-form-field"},Le={class:"form-group"},Pe={key:0},Ue={class:"table-container"},qe={style:{position:"relative"}},Ke={class:"flex flex-wrap",style:{gap:"10px",cursor:"pointer"}},Ne=["onClick"],Re=["onClick"],He=["onClick"],Oe=["onClick"],je={class:"empty-warp"},Je={key:0,class:"empty-bg"},Me={key:0,class:"pagination-con"},rt=te({__name:"List",props:{decorateType:{type:Number,default:1}},setup(V){const b=V,L=oe(),{setDecorateId:P,setLocaleId:U,setIsDefault:q,resetDecorateInfo:K}=_e(),{listData:N,loading:u,total:h,selectedIds:C,filterParams:f,loadData:m,onSearchSubmit:w,onSortChange:R,onSelectChange:H,onBatchAction:O}=ke({apiFunction:ve,idKey:"decorateId",defaultParams:{page:1,decorateType:b.decorateType,size:L.get("pageSize"),sortField:"",sortOrder:"",keyword:""}}),j=async l=>{await O(l,fe)};m();const J=async l=>{u.value=!0;try{const e=await ge({decorateId:l});le(`${window.location.protocol}//${window.location.host.split(":")[0]}${e.apiUrl}`),_.success("分享链接已经复制到剪贴板, 导入时可直接粘贴使用")}catch(e){_.error(e.message)}finally{u.value=!1}},M=()=>{ie.prompt("请把分享链接粘贴在此处","导入装修链接",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(({value:l})=>{G(l)})},G=async l=>{u.value=!0;try{const e=decodeURIComponent(l),c=await ye({url:e});_.success("操作成功"),m()}catch(e){_.error(e.message)}finally{u.value=!1}},Q=async l=>{try{const e=await E("setHome",{id:l.decorateId});_.success("操作成功"),m()}catch(e){_.error(e.message)}finally{}},W=async l=>{try{const e=await E("copy",{id:l.decorateId});_.success("操作成功"),m()}catch(e){_.error(e.message)}finally{}},{VITE_BASE_DIR:A}=he,I=(l,e,c,D,T)=>{K(),P(e||c||0),U(D),q(T),l===1?window.open(`${F(A)}/decorate/index?id=${c}`,"_blank"):window.open(`${F(A)}/decorate/pc?id=${c}`,"_blank")};return(l,e)=>{const c=i("el-button"),D=i("TigInput"),T=i("el-popconfirm"),S=i("el-space"),g=i("el-table-column"),x=i("el-tag"),z=i("el-divider"),$=i("el-dropdown-item"),X=i("el-dropdown-menu"),Y=i("el-dropdown"),Z=i("el-table"),ee=i("a-spin");return p(),y("div",Ce,[n("div",we,[n("div",Ie,[n("div",De,[n("div",Te,[n("div",Se,[n("div",xe,[n("div",$e,[n("div",Be,[a(D,{modelValue:t(f).keyword,"onUpdate:modelValue":e[0]||(e[0]=s=>t(f).keyword=s),name:"keyword",placeholder:"输入页面名称",onKeyup:ae(t(w),["enter"]),clearable:"",onClear:t(w)},{append:o(()=>[a(c,{onClick:t(w)},{default:o(()=>e[4]||(e[4]=[n("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[4]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),n("div",Ve,[n("div",Ae,[a(t(be),{isDrawer:"",onOkCallback:t(m),title:"添加页面",width:"600px",path:"decorate/mobileDecorate/Info",params:{act:"add",decorateType:V.decorateType}},{default:o(()=>[a(c,{type:"primary"},{default:o(()=>e[5]||(e[5]=[d("添加页面",-1)])),_:1,__:[5]})]),_:1},8,["onOkCallback","params"])])]),n("div",ze,[n("div",Fe,[a(c,{onClick:M},{default:o(()=>e[6]||(e[6]=[d("导入装修模板",-1)])),_:1,__:[6]})])]),n("div",Ee,[n("div",Le,[a(S,null,{default:o(()=>[a(T,{title:"您确认要批量删除所选数据吗？",onConfirm:e[1]||(e[1]=s=>j("del"))},{reference:o(()=>[a(c,{disabled:t(C).length===0},{default:o(()=>e[7]||(e[7]=[d("批量删除",-1)])),_:1,__:[7]},8,["disabled"])]),_:1}),t(C).length>0?(p(),y("span",Pe,[e[8]||(e[8]=d(" 已选择：",-1)),n("b",null,k(t(C).length),1),e[9]||(e[9]=d(" 项 ",-1))])):v("",!0)]),_:1})])])])])]),n("div",Ue,[a(ee,{spinning:t(u)},{default:o(()=>[a(Z,{data:t(N),onSelectionChange:t(H),total:t(h),onSortChange:t(R),loading:t(u)},{empty:o(()=>[n("div",je,[t(u)?v("",!0):(p(),y("div",Je,"暂无数据"))])]),default:o(()=>[a(g,{type:"selection",width:"32"}),a(g,{label:"页面名称",prop:"decorateId",sortable:"custom",width:300},{default:o(({row:s})=>[n("div",qe,[a(S,null,{default:o(()=>[a(t(de),{label:"页面名称",type:"textarea",requestApi:t(ue),"org-value":s.decorateTitle,"onUpdate:orgValue":r=>s.decorateTitle=r,params:{id:s.decorateId,field:"decorateTitle"},max:50},{default:o(()=>[n("div",null,k(s.decorateTitle),1)]),_:2},1032,["requestApi","org-value","onUpdate:orgValue","params"])]),_:2},1024)]),s.isHome===1?(p(),B(x,{key:0,type:"success",hit:!1,effect:"light",size:"small","disable-transitions":""},{default:o(()=>e[10]||(e[10]=[d("首页",-1)])),_:1,__:[10]})):v("",!0)]),_:1}),a(g,{label:"发布状态",prop:"status",sortable:"custom",width:150},{default:o(({row:s})=>[d(k(s.status==1?"已发布":"未发布"),1)]),_:1}),t(re)()?(p(),B(g,{key:0,label:"页面语言",prop:"children",width:200},{default:o(({row:s})=>[n("div",Ke,[n("div",null,[a(x,{type:"primary",effect:"plain",onClick:r=>I(b.decorateType,0,s.decorateId,0,!0)},{default:o(()=>e[11]||(e[11]=[d("默认语言",-1)])),_:2,__:[11]},1032,["onClick"])]),(p(!0),y(se,null,ne(s.children,r=>(p(),y("div",{key:r.decorateId},[a(x,{type:"primary",effect:"plain",onClick:Ge=>I(b.decorateType,s.decorateId,r.decorateId,r.localeId,!1)},{default:o(()=>[d(k(r.language),1)]),_:2},1032,["onClick"])]))),128))])]),_:1})):v("",!0),a(g,{label:"更新时间",prop:"updateTime",sortable:"custom"},{default:o(({row:s})=>[d(k(s.updateTime),1)]),_:1}),a(g,{label:"操作",fixed:"right",width:200},{default:o(({row:s})=>[a(S,null,{default:o(()=>[n("a",{class:"btn-link",onClick:r=>I(b.decorateType,0,s.decorateId,0,!0)},"编辑",8,Ne),a(z,{direction:"vertical"}),n("a",{class:"btn-link",onClick:r=>Q(s)},"设为首页",8,Re),a(z,{direction:"vertical"}),a(Y,{trigger:"hover","hide-on-click":!1},{dropdown:o(()=>[a(X,null,{default:o(()=>[a($,null,{default:o(()=>[n("a",{class:"btn-link",onClick:r=>W(s)},"复制",8,He)]),_:2},1024),s.isHome==0?(p(),B($,{key:0},{default:o(()=>[a(t(ce),{onAfterDelete:t(m),requestApi:t(me),params:{id:s.decorateId}},{default:o(()=>e[12]||(e[12]=[d("删除",-1)])),_:2,__:[12]},1032,["onAfterDelete","requestApi","params"])]),_:2},1024)):v("",!0),a($,null,{default:o(()=>[n("a",{class:"btn-link",onClick:r=>J(s.decorateId)},"分享",8,Oe)]),_:2},1024)]),_:2},1024)]),default:o(()=>[e[13]||(e[13]=n("span",{class:"iconfont-admin icon-gengduo1 btn-link"},null,-1))]),_:2,__:[13]},1024)]),_:2},1024)]),_:1})]),_:1},8,["data","onSelectionChange","total","onSortChange","loading"])]),_:1},8,["spinning"]),t(h)>0?(p(),y("div",Me,[a(t(pe),{page:t(f).page,"onUpdate:page":e[2]||(e[2]=s=>t(f).page=s),size:t(f).size,"onUpdate:size":e[3]||(e[3]=s=>t(f).size=s),total:t(h),onCallback:t(m)},null,8,["page","size","total","onCallback"])])):v("",!0)])])])])}}});export{rt as _};
