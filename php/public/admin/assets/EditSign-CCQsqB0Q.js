import O from"./SignTag-GfUPemyN.js";import{u as J}from"./useResetState-D7o2evJm.js";import{s as K}from"./order-BQjFJOKB.js";import{d as P,r as m,e as n,f as b,g as f,h as r,j as C,k as V,aR as q,l,y as a,i as u,F as h,m as z,K as w,t as G,aO as H,J as N}from"./index-BEWhCL1q.js";const M={class:"header"},Q={class:"header-title"},W={class:"button-box"},oe=P({inheritAttrs:!1,__name:"EditSign",props:{item:{type:Object,default:()=>({})},ids:{type:Array,default:()=>[]}},emits:["callBack"],setup(B,{emit:S}){const i=B,$=S,R=m(),T=[{value:1,color:"#ff5050"},{value:2,color:"#ffba1f"},{value:3,color:"#2ecf92"},{value:4,color:"#16afff"},{value:5,color:"#792dff"}],p=m(!1),d=m(!1),v=m(!1),[s,_]=J({adminNote:"",mark:0}),x=()=>{const{adminNote:t="",mark:e=0}=i.item;s.adminNote=t,s.mark=e,p.value=!0,d.value=!0},g=()=>{d.value=!1,_()},A=()=>{_(),k()},I=async()=>{k()},k=async()=>{try{const t={...s};i.item.orderId?t.id=i.item.orderId:i.ids&&i.ids.length>0&&(t.ids=i.ids.join(",")),await K(t),N.success("操作成功"),d.value=!1,$("callBack")}catch(t){N.error(t.message)}};return(t,e)=>{const j=n("el-radio"),D=n("el-radio-group"),c=n("el-form-item"),U=n("TigInput"),y=n("el-button"),E=n("el-form"),F=n("a-spin"),L=n("el-dialog");return f(),b(h,null,[r("div",{class:"btn",onClick:x},[q(t.$slots,"default")]),p.value?(f(),C(L,H({key:0,class:"sign-dialog","append-to-body":!0,"show-close":!1,modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=o=>d.value=o),width:"500",top:"35vh"},t.$attrs,{onClose:g,onClosed:e[5]||(e[5]=o=>p.value=!1)}),{header:l(()=>[r("div",M,[r("div",Q,G(t.$attrs.title||"添加标记"),1),r("div",{class:"header-close",onClick:e[0]||(e[0]=o=>d.value=!1)},e[6]||(e[6]=[r("i",{class:"iconfont-admin icon-cha1"},null,-1)]))])]),default:l(()=>[a(F,{spinning:v.value,style:{width:"100%",height:"100%"}},{default:l(()=>[v.value?V("",!0):(f(),C(E,{key:0,ref_key:"formRef",ref:R,model:u(s),"label-width":"auto"},{default:l(()=>[a(c,{label:"标记",prop:"mark "},{default:l(()=>[a(D,{modelValue:u(s).mark,"onUpdate:modelValue":e[1]||(e[1]=o=>u(s).mark=o)},{default:l(()=>[(f(),b(h,null,z(T,o=>a(j,{key:o.value,value:o.value},{default:l(()=>[a(O,{value:o.value},null,8,["value"])]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(c,{label:"备注",prop:"adminNote"},{default:l(()=>[a(U,{classType:"tig-form-input",modelValue:u(s).adminNote,"onUpdate:modelValue":e[2]||(e[2]=o=>u(s).adminNote=o),rows:6,placeholder:"请输入备注",type:"textarea","show-word-limit":"",maxlength:200},null,8,["modelValue"])]),_:1}),a(c,null,{default:l(()=>[r("div",W,[r("a",{class:"btn-link",onClick:A},"清除"),a(y,{onClick:g},{default:l(()=>e[7]||(e[7]=[w("取消",-1)])),_:1,__:[7]}),a(y,{type:"primary",onClick:e[3]||(e[3]=o=>I())},{default:l(()=>e[8]||(e[8]=[w("提交 ",-1)])),_:1,__:[8]})])]),_:1})]),_:1},8,["model"]))]),_:1},8,["spinning"])]),_:1},16,["modelValue"])):V("",!0)],64)}}});export{oe as default};
