import{d as w,ai as C,r as U,aj as M,e as n,f as g,g as G,y as s,k as b,l as i,h as o,i as m,dB as P,K as f,t as S,J as x,_ as B}from"./index-BEWhCL1q.js";import"./index-DVG44k_-.js";import{d as j}from"./vuedraggable.umd-_qUe1n4L.js";import{g as D}from"./productGroup-CZ47b7o1.js";import{_ as N}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./ProductGroupSelect.vue_vue_type_style_index_0_scoped_06740008_lang-BVHVKlPC.js";const E={class:"dec-goods-group-item"},L={class:"dec-edit-group"},O={class:"dec-edit-group-con"},$={class:"dec-input-group","dynamic-class":".image-ad-title-d"},A={class:"dec-edit-group"},F={class:"dec-edit-group-con"},J={class:"dec-input-group","dynamic-class":".image-ad-title-d"},K={class:"dec-edit-group"},q={class:"dec-edit-group-con"},z={key:0},H={class:"dec-edit-group"},Q={class:"dec-edit-group-con"},R={class:"dec-input-group"},W={class:"dec-edit-group"},X={class:"dec-edit-group-con"},Y={class:"dec-input-group"},Z=["onClick"],oo={key:0,class:"gallery-list-warp"},eo={class:"dec-pic-group"},to={class:"dec-pic-add-con"},so=w({__name:"ProductGroupSelect",props:C({isMultiple:{type:Boolean,default:!1},type:{type:String,default:"goods"}},{productGroups:{default:[]},productGroupsModifiers:{}}),emits:["update:productGroups"],setup(p){const h=p,_=U([]),u=M(p,"productGroups"),k=async l=>{V(l.ids)},V=async(l,e=-1,v=6)=>{try{const d=await D({productGroupIds:l.join(","),size:v,page:1});if(e===-1){let r=[];d.records.forEach(c=>{let t={productGroupId:c.productGroupId,productGroupName:c.productGroupName,title:c.productGroupName,subTitle:"",menuTitle:c.productGroupName,productNumType:"number",productNum:6,bannerPic:{},bannerLink:{link:{},title:""}};r.push(t)}),u.value.push(...r)}else u.value[e].productGroupId=d.records[0].productGroupId,u.value[e].productGroupName=d.records[0].productGroupName,u.value[e].menuTitle=d.records[0].productGroupName;_.value=u.value.map(r=>r.productGroupId)}catch(d){x.error(d.message)}},I=l=>{u.value.splice(l,1),_.value.splice(l,1)},T=l=>{V(l.ids,l.index)};return(l,e)=>{const v=n("el-button"),d=n("el-input"),r=n("el-radio"),c=n("el-radio-group");return G(),g("div",null,[s(m(j),{class:"dec-goods-group-list","item-key":"productGroupId",list:u.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:e[0]||(e[0]=()=>{}),onEnd:e[1]||(e[1]=()=>{})},{item:i(({element:t,index:y})=>[o("div",E,[o("div",L,[e[2]||(e[2]=o("div",{class:"dec-edit-group-title"},[o("div",{class:"label"},"商品来源")],-1)),o("div",O,[o("div",$,[s(m(N),{isDrawer:"",onOkCallback:T,title:"选择商品分组",width:"600px",path:"product/productGroup/src/SelectProductGroup",params:{selectedIds:[t.productGroupId],index:y,isMultiple:h.isMultiple},style:{width:"100%"}},{default:i(()=>[s(v,{type:"primary",link:"",icon:m(P)},{default:i(()=>[f(S(t.productGroupName),1)]),_:2},1032,["icon"])]),_:2},1032,["params"])])])]),o("div",A,[e[3]||(e[3]=o("div",{class:"dec-edit-group-title"},[o("div",{class:"label"},"菜单名称")],-1)),o("div",F,[o("div",J,[s(d,{modelValue:t.menuTitle,"onUpdate:modelValue":a=>t.menuTitle=a,placeholder:"请输入菜单名称"},null,8,["modelValue","onUpdate:modelValue"])])])]),o("div",K,[e[5]||(e[5]=o("div",{class:"dec-edit-group-title"},[o("div",{class:"label"},"商品个数"),o("div",{class:"value"})],-1)),o("div",q,[s(c,{class:"dec-radio-group",modelValue:t.productNumType,"onUpdate:modelValue":a=>t.productNumType=a},{default:i(()=>[s(r,{value:"number"},{default:i(()=>[s(d,{style:{width:"90px"},type:"number",modelValue:t.productNum,"onUpdate:modelValue":a=>t.productNum=a,placeholder:"请输入商品数量"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(r,{value:"all"},{default:i(()=>e[4]||(e[4]=[f("全部",-1)])),_:1,__:[4]})]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),p.type==="productGroup"?(G(),g("div",z,[o("div",H,[e[6]||(e[6]=o("div",{class:"dec-edit-group-title"},[o("div",{class:"label"},"主标题")],-1)),o("div",Q,[o("div",R,[s(d,{modelValue:t.title,"onUpdate:modelValue":a=>t.title=a,placeholder:"请输入标题内容"},null,8,["modelValue","onUpdate:modelValue"])])])]),o("div",W,[e[7]||(e[7]=o("div",{class:"dec-edit-group-title"},[o("div",{class:"label"},"副标题")],-1)),o("div",X,[o("div",Y,[s(d,{modelValue:t.subTitle,"onUpdate:modelValue":a=>t.subTitle=a,placeholder:"请输入标题内容"},null,8,["modelValue","onUpdate:modelValue"])])])])])):b("",!0),o("div",{class:"del-item",onClick:a=>I(y)},e[8]||(e[8]=[o("i",{class:"ico-decorate icon-dec-cha"},null,-1)]),8,Z)])]),_:1},8,["list"]),p.isMultiple||u.value.length<1?(G(),g("div",oo,[o("div",eo,[o("div",to,[s(m(N),{isDrawer:"",onOkCallback:k,title:"选择商品分组",width:"600px",path:"product/productGroup/src/SelectProductGroup",params:{selectedIds:_.value,isMultiple:h.isMultiple},style:{width:"100%"}},{default:i(()=>e[9]||(e[9]=[o("a",{class:"dec-pic-add-btn"},[o("i",{class:"ico-decorate icon-dec-jia"}),f("添加商品分组")],-1)])),_:1,__:[9]},8,["params"])])])])):b("",!0)])}}}),po=B(so,[["__scopeId","data-v-06740008"]]);export{po as P};
