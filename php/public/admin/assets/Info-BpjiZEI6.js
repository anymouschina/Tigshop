import{d as x,r as n,a as C,a5 as V,o as B,J as d,e as m,f as N,g as b,h as y,j as D,k as E,l as i,y as o,E as q,i as U,K as j,I as F}from"./index-BEWhCL1q.js";import{b as G,u as J}from"./live-DqBKtg3b.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-B2T-ARqM.js";import"./index-DVG44k_-.js";/* empty css                                                                    *//* empty css                                                                  */import{S as K}from"./SelectGoodsRange-Cba6-wt2.js";/* empty css                                                                              *//* empty css             */import"./time-BMcbgg5F.js";import"./index-BNk7xZkD.js";import"./SelectBrand-DFj6FPJO.js";import"./brand-NPYEvOSK.js";import"./SelectCategory.vue_vue_type_script_setup_true_lang-D5TL5eLW.js";import"./category-Bu2fUBIU.js";import"./category-JkcBf76e.js";import"./SelectProduct-CS10v706.js";import"./format-C8RAoEAk.js";import"./product-IfnnwfpZ.js";import"./Pagination-4FaohhlG.js";import"./SelectSku-CKVpMAXG.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";const M={class:"container"},O={class:"content_wrapper"},z={class:"lyecs-form-table"},fe=x({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(w,{expose:R,emit:S}){const l=S,r=w,u=n(!0),f=C().currentRoute.value.query,p=n(r.isDialog?r.act:String(f.act)),v=n(r.isDialog?r.id:Number(f.id)),T=p.value==="add"?"create":"update",g=V(),e=n({});B(()=>{p.value==="detail"?k():u.value=!1});const k=async()=>{try{const t=await G(p.value,{id:v.value});Object.assign(e.value,t)}catch(t){d.error(t.message),l("close")}finally{u.value=!1}},_=async()=>{await g.value.validate();try{l("update:confirmLoading",!0);const t=await J(T,{id:v.value,...e.value});l("submitCallback",t),d.success("操作成功")}catch(t){d.error(t.message)}finally{l("update:confirmLoading",!1)}};return R({onFormSubmit:()=>{_()}}),(t,a)=>{const L=m("TigInput"),c=m("el-form-item"),h=m("el-button"),I=m("el-form");return b(),N("div",M,[y("div",O,[y("div",z,[u.value?E("",!0):(b(),D(I,{key:0,ref_key:"formRef",ref:g,model:e.value,"label-width":"auto"},{default:i(()=>[o(c,{prop:"wechatLiveTitle",label:"直播名称",rules:[{required:!0,message:"直播名称不能为空!"}]},{default:i(()=>[o(L,{classType:"tig-form-input",modelValue:e.value.wechatLiveTitle,"onUpdate:modelValue":a[0]||(a[0]=s=>e.value.wechatLiveTitle=s)},null,8,["modelValue"])]),_:1}),o(c,{prop:"productId",label:"选择商品"},{default:i(()=>[o(U(K),{rangeIds:e.value.actRangeExt,"onUpdate:rangeIds":a[1]||(a[1]=s=>e.value.actRangeExt=s),rangeType:e.value.actRange,"onUpdate:rangeType":a[2]||(a[2]=s=>e.value.actRange=s),isSelf:1},null,8,["rangeIds","rangeType"])]),_:1}),q(o(c,{"wrapper-col":{offset:4,span:16}},{default:i(()=>[o(h,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:_},{default:i(()=>a[3]||(a[3]=[j("提交",-1)])),_:1,__:[3]},512)]),_:1},512),[[F,!r.isDialog]])]),_:1},8,["model"]))])])])}}});export{fe as default};
