import{d as be,r as h,v as ye,ak as F,Q as ge,a as q,o as ke,c as he,e as y,f as i,g as a,h as l,k as n,y as o,l as r,a2 as B,i as m,F as O,m as E,j as v,K as c,t as b,dt as J,n as we,J as T,_ as Se}from"./index-BEWhCL1q.js";/* empty css             *//* empty css                                                                    */import{S as Q}from"./SortButton-Bsisc0vM.js";import{P as xe}from"./Pagination-4FaohhlG.js";import{P as Ce}from"./ProductCard-BDl7uMRW.js";import{b as Oe,o as G}from"./order-BQjFJOKB.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-B2T-ARqM.js";import"./index-DVG44k_-.js";import{p as H}from"./format-C8RAoEAk.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as Ie}from"./SelectShop.vue_vue_type_script_setup_true_lang-B2Py_DPQ.js";import{S as Te}from"./SelectTimeInterval-CHncG0ge.js";import"./Verify.vue_vue_type_style_index_0_lang-B6mvUwPP.js";import"./zh-cn-Crj8NPt5.js";import{T as L}from"./Tag-Bhu-jNjT.js";import{i as Ve}from"./version-C520_GUm.js";import{M as De}from"./MobileCard-BFqdI-Pd.js";import{_ as W}from"./EditSign.vue_vue_type_style_index_0_lang-DjZPXIu1.js";import $ from"./SignTag-GfUPemyN.js";import{_ as S}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import{M as X}from"./index-BNk7xZkD.js";import"./time-BMcbgg5F.js";import"./shop-CWBoDOF9.js";import"./bindShop-CqwN6G6E.js";import"./useResetState-D7o2evJm.js";const ze={class:"container"},Ne={class:"content_wrapper"},Ue={class:"lyecs-table-list-warp"},Fe={class:"list-table-tool lyecs-search-warp"},Be={class:"advanced-search-warp list-table-tool-row"},Le={class:"simple-form-warp"},Ae={class:"simple-form-field"},Re={class:"form-group"},Ee={class:"control-container"},$e={key:0,class:"simple-form-field"},Pe={class:"form-group"},Me={class:"control-container"},Ke={class:"simple-form-field"},Ye={class:"form-group"},je={class:"control-container"},qe={class:"simple-form-field"},Je={class:"form-group"},Qe={class:"control-container"},Ge={class:"simple-form-field"},He={class:"form-group"},We={class:"control-container"},Xe={key:1,class:"simple-form-field"},Ze={class:"form-group"},et={class:"control-container"},tt={class:"simple-form-field"},lt={class:"form-group"},st={class:"simple-form-warp"},at={class:"simple-form-field"},ot={class:"control-container"},rt={class:"list-table-tool-row"},nt={class:"tabs-box"},dt={class:"list-table-tool-col"},it={key:5},ut={class:"table-container"},pt={class:"custom-table"},ct={class:"custom-table"},mt={class:"data-tr"},vt={colspan:"6"},ft={class:"check-box"},_t={class:"check-box"},bt={class:"textR"},yt={style:{gap:"8px",display:"flex","justify-content":"right"}},gt={class:"displayRow flex flex-align-center flex-justify-between"},kt={class:"displayColumn textR whiteSN widthAuto"},ht=["rowspan"],wt={class:"displayColumn textR fz14"},St={class:"gray fz12"},xt=["rowspan"],Ct={class:"displayColumn fz12 textL"},Ot=["rowspan"],It={class:"displayColumn fz12 textL"},Tt={class:"gray"},Vt={class:"black"},Dt={class:"gray"},zt={class:"black"},Nt={class:"gray user-address"},Ut={class:"black line1 value"},Ft=["rowspan"],Bt={class:"displayColumn fz12 textL"},Lt={key:0},At={class:"gray"},Rt=["rowspan"],Et=["rowspan"],$t={class:"buttonStyle"},Pt={key:0,class:"empty-warp"},Mt={key:0,class:"empty-bg"},Kt={key:0,class:"pagination-con"},Yt=be({__name:"Deliverlist",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},setup(Z){const V=h(localStorage.getItem("adminType")),P=ye();F([{value:-1,label:"全部",isShow:!0},{value:0,label:"待支付",isShow:!0},{value:1,label:"待发货",isShow:!0},{value:2,label:"已发货",isShow:!0},{value:3,label:"已取消",isShow:!0},{value:4,label:"无效",isShow:!0},{value:5,label:"已完成",isShow:!0},{value:-2,label:"已删除",isShow:!0}]),F([{value:0,label:"待发货"},{value:1,label:"已发货"},{value:2,label:"已收货"},{value:3,label:"配送中"},{value:4,label:"配送失败"}]),F([{value:0,label:"未付款"},{value:1,label:"支付中"},{value:2,label:"已付款"},{value:3,label:"退款中"},{value:4,label:"已退款"}]);const ee=[{value:-1},{value:1},{value:2},{value:3},{value:4},{value:5}],te=d=>{s.orderStatus=d,s.page=1,u.value=[],f()},w=h([]),x=h(!0),D=h(0),u=h([]),A=h(!1),s=F({page:1,size:P.get("pageSize"),sortField:"orderId",sortOrder:"desc",keyword:"",orderStatus:1,mark:-1,address:"",email:"",mobile:"",addTime:[],addEndTime:"",addStartTime:""}),le=()=>{s.page=1,s.size=P.get("pageSize"),s.sortField="orderId",s.sortOrder="desc",s.keyword="",s.orderStatus=-1,s.mark=-1,s.address="",s.email="",s.mobile="",s.addTime=[],s.addEndTime="",s.addStartTime="",s.shippingStatus="",s.payStatus=""},f=async()=>{x.value=!0,u.value=[];try{const d=await Oe({...s});if(d.records!==null){const e=d.records.map(p=>({...p,checkBox:!1}));w.value=e}else w.value=[];D.value=d.total}catch(d){T.error(d.message)}finally{x.value=!1}},z=Z,se=ge(),I=q().currentRoute.value.query,M=h(z.isDialog?z.act:String(I.act)),ae=h(z.isDialog?z.id:Number(I.id));ke(()=>{se.path.includes("exchange")&&(s.isExchangeOrder=1),M.value&&M.value!=="undefined"&&(s.userId=ae.value),I&&I.status&&(s.orderStatus=Number(I.status)),f()});const _=()=>{f()},oe=q(),re=d=>{let e=location.origin+oe.options.history.base+d;window.open(e,"_blank")},ne=d=>{X.confirm({title:"确认删除订单吗？",content:"被删除的订单可以通过筛选查找并恢复",onOk:async()=>{try{const e=await G("delOrder",{id:d});T.success("操作成功"),f()}catch(e){T.error(e.message)}finally{x.value=!1}}})},de=d=>{X.confirm({title:"确认订单已收货吗？",onOk:async()=>{try{const e=await G("confirmReceipt",{id:d});T.success("操作成功"),f()}catch(e){T.error(e.message)}finally{x.value=!1}}})},ie=he(()=>{var d,e;return A.value=u.value.length>0&&((d=u.value)==null?void 0:d.length)===((e=w.value)==null?void 0:e.length),u.value.length>0&&u.value.length<w.value.length}),ue=d=>{var e,p;d?(u.value.length=0,(e=w.value)==null||e.forEach(k=>{k.checkBox=!0,u.value.push(k.orderId)})):(p=w.value)==null||p.forEach(k=>{k.checkBox=!1,u.value.length=0})},pe=d=>{if(d.checkBox)u.value.indexOf(d.orderId)===-1&&u.value.push(d.orderId);else{let e=u.value.indexOf(d.orderId);e!==-1&&u.value.splice(e,1)}};return(d,e)=>{const p=y("el-button"),k=y("TigInput"),K=y("el-option"),ce=y("el-select"),R=y("el-tab-pane"),me=y("el-tabs"),ve=y("el-space"),Y=y("el-checkbox"),N=y("el-tooltip"),fe=y("el-divider"),_e=y("a-spin");return a(),i("div",ze,[l("div",Ne,[l("div",Ue,[l("div",Fe,[l("div",Be,[l("div",Le,[l("div",Ae,[l("div",Re,[e[20]||(e[20]=l("label",{class:"control-label"},[l("span",null,"订单信息：")],-1)),l("div",Ee,[o(k,{modelValue:s.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>s.keyword=t),name:"keyword",placeholder:"订单号/收货人姓名",onKeyup:B(_,["enter"]),clearable:"",onClear:_},{append:r(()=>[o(p,{onClick:_},{default:r(()=>e[19]||(e[19]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[19]})]),_:1},8,["modelValue"])])])]),m(Ve)()&&V.value!=="shop"?(a(),i("div",$e,[l("div",Pe,[e[21]||(e[21]=l("label",{class:"control-label"},[l("span",null,"选择店铺：")],-1)),l("div",Me,[o(m(Ie),{modelValue:s.shopId,"onUpdate:modelValue":e[1]||(e[1]=t=>s.shopId=t),onOnChange:_},null,8,["modelValue"])])])])):n("",!0),l("div",Ke,[l("div",Ye,[e[22]||(e[22]=l("label",{class:"control-label"},[l("span",null," 详细地址：")],-1)),l("div",je,[o(k,{modelValue:s.address,"onUpdate:modelValue":e[2]||(e[2]=t=>s.address=t),onKeyup:B(_,["enter"]),clearable:"",onClear:_},null,8,["modelValue"])])])]),l("div",qe,[l("div",Je,[e[23]||(e[23]=l("label",{class:"control-label"},[l("span",null,"Email：")],-1)),l("div",Qe,[o(k,{modelValue:s.email,"onUpdate:modelValue":e[3]||(e[3]=t=>s.email=t),onKeyup:B(_,["enter"]),clearable:"",onClear:_},null,8,["modelValue"])])])]),l("div",Ge,[l("div",He,[e[24]||(e[24]=l("label",{class:"control-label"},[l("span",null,"手机号：")],-1)),l("div",We,[o(k,{modelValue:s.mobile,"onUpdate:modelValue":e[4]||(e[4]=t=>s.mobile=t),onKeyup:B(_,["enter"]),clearable:"",onClear:_},null,8,["modelValue"])])])]),V.value!=="vendor"?(a(),i("div",Xe,[l("div",Ze,[e[25]||(e[25]=l("label",{class:"control-label"},[l("span",null,"订单标记：")],-1)),l("div",et,[o(ce,{modelValue:s.mark,"onUpdate:modelValue":e[5]||(e[5]=t=>s.mark=t),clearable:"",onChange:_},{label:r(()=>[s.mark!==-1?(a(),v($,{key:0,value:s.mark},null,8,["value"])):(a(),i(O,{key:1},[c(" 全部标记 ")],64))]),default:r(()=>[(a(),i(O,null,E(ee,t=>(a(),i(O,{key:t.value},[t.value!==-1?(a(),v(K,{key:0,value:t.value},{default:r(()=>[o($,{value:t.value},null,8,["value"])]),_:2},1032,["value"])):(a(),v(K,{key:1,label:"全部标记",value:-1}))],64))),64))]),_:1},8,["modelValue"])])])])):n("",!0),l("div",tt,[l("div",lt,[e[26]||(e[26]=l("label",{class:"control-label"},[l("span",null,"下单时间：")],-1)),o(m(Te),{"end-date":s.addEndTime,"onUpdate:endDate":e[6]||(e[6]=t=>s.addEndTime=t),"start-date":s.addStartTime,"onUpdate:startDate":e[7]||(e[7]=t=>s.addStartTime=t),clearable:!1,type:"date","value-format":"YYYY-MM-DD"},null,8,["end-date","start-date"])])]),l("div",st,[l("div",at,[e[29]||(e[29]=l("label",{class:"control-label"},null,-1)),l("div",ot,[o(p,{type:"primary",plain:"",onClick:_},{default:r(()=>e[27]||(e[27]=[c("搜索",-1)])),_:1,__:[27]}),o(p,{plain:"",onClick:le},{default:r(()=>e[28]||(e[28]=[c("重置",-1)])),_:1,__:[28]})])])])])])]),l("div",rt,[l("div",nt,[o(me,{modelValue:s.orderStatus,"onUpdate:modelValue":e[8]||(e[8]=t=>s.orderStatus=t),"tab-position":"top",onTabChange:te},{default:r(()=>[o(R,{name:1,label:"待发货"}),o(R,{name:2,label:"已发货"}),o(R,{name:5,label:"已完成"})]),_:1},8,["modelValue"])]),l("div",dt,[o(ve,null,{default:r(()=>[V.value!=="vendor"?(a(),i(O,{key:0},[u.value.length>0?(a(),v(W,{key:0,title:"添加标记",ids:u.value,onCallBack:f},{default:r(()=>[o(p,null,{default:r(()=>e[30]||(e[30]=[c(" 批量标记 ",-1)])),_:1,__:[30]})]),_:1},8,["ids"])):(a(),v(p,{key:1,disabled:!0},{default:r(()=>e[31]||(e[31]=[c(" 批量标记 ",-1)])),_:1,__:[31]}))],64)):n("",!0),u.value.length>0&&s.orderStatus===1?(a(),v(m(S),{key:1,params:{act:"severalDetail",ids:u.value},title:"订单批量发货",isDrawer:"",path:"order/order/src/BatchShip",width:"880px",onOkCallback:f},{default:r(()=>[o(p,null,{default:r(()=>e[32]||(e[32]=[c(" 批量发货 ",-1)])),_:1,__:[32]})]),_:1},8,["params"])):s.orderStatus===1?(a(),v(p,{key:2,disabled:!0},{default:r(()=>e[33]||(e[33]=[c(" 批量发货 ",-1)])),_:1,__:[33]})):n("",!0),u.value.length>0?(a(),v(p,{key:3,onClick:e[9]||(e[9]=t=>re(`/print/orderPrint?ids=${u.value}`))},{default:r(()=>e[34]||(e[34]=[c(" 批量打印 ",-1)])),_:1,__:[34]})):(a(),v(p,{key:4,disabled:!0},{default:r(()=>e[35]||(e[35]=[c(" 批量打印 ",-1)])),_:1,__:[35]})),u.value.length>0?(a(),i("span",it,[e[36]||(e[36]=c(" 已选择：",-1)),l("b",null,b(u.value.length),1),e[37]||(e[37]=c(" 项 ",-1))])):n("",!0)]),_:1})])]),l("div",ut,[o(_e,{spinning:x.value},{default:r(()=>[l("table",pt,[l("thead",null,[l("tr",null,[l("th",null,[o(Y,{modelValue:A.value,"onUpdate:modelValue":e[10]||(e[10]=t=>A.value=t),indeterminate:ie.value,class:"check-box mr10",onChange:ue},null,8,["modelValue","indeterminate"]),o(Q,{sortField:s.sortField,"onUpdate:sortField":e[11]||(e[11]=t=>s.sortField=t),sortOrder:s.sortOrder,"onUpdate:sortOrder":e[12]||(e[12]=t=>s.sortOrder=t),sortName:"orderId",text:"订单信息(下单时间排序)",onLoadData:e[13]||(e[13]=t=>_())},null,8,["sortField","sortOrder"])]),l("th",null,[o(Q,{sortField:s.sortField,"onUpdate:sortField":e[14]||(e[14]=t=>s.sortField=t),sortOrder:s.sortOrder,"onUpdate:sortOrder":e[15]||(e[15]=t=>s.sortOrder=t),sortName:"totalAmount",text:"订单金额",onLoadData:e[16]||(e[16]=t=>_())},null,8,["sortField","sortOrder"])]),e[38]||(e[38]=l("th",{class:"textL"},"会员名称",-1)),e[39]||(e[39]=l("th",{class:"textL"},"收货人信息",-1)),e[40]||(e[40]=l("th",{class:"textL"},"物流/支付信息",-1)),e[41]||(e[41]=l("th",{class:"textL"},"订单状态",-1)),e[42]||(e[42]=l("th",{class:"textR"},"操作",-1))])])]),(a(!0),i(O,null,E(w.value,t=>(a(),i("table",ct,[l("thead",null,[l("tr",mt,[l("th",vt,[o(Y,{modelValue:t.checkBox,"onUpdate:modelValue":g=>t.checkBox=g,class:"check-box mr10",onChange:g=>pe(t)},null,8,["modelValue","onUpdate:modelValue","onChange"]),t.mark&&V.value!=="vendor"?(a(),v(N,{key:0,disabled:!t.adminNote,content:t.adminNote,effect:"light",placement:"top"},{default:r(()=>[o($,{class:"check-box tag",value:t.mark},null,8,["value"])]),_:2},1032,["disabled","content"])):n("",!0),l("span",ft,"订单编号："+b(t.orderSn),1),o(fe,{direction:"vertical"}),l("span",_t,"下单时间："+b(t.addTime),1),t.parentOrderId>0?(a(),v(m(S),{key:1,params:{act:"parentDetail",id:t.orderId,isParent:!0},showClose:!1,showOnOk:!1,title:"订单详情 "+t.orderSn,isDrawer:"",style:{display:"inline-block"},path:"order/order/Info",width:"880px",onCallback:f},{default:r(()=>[t.parentOrderId>0?(a(),v(N,{key:0,content:"该订单已拆分，点击可查看父订单",effect:"light",placement:"top"},{default:r(()=>[o(m(L),{text:"子订单"})]),_:1})):n("",!0)]),_:2},1032,["params","title"])):n("",!0),t.shopId>0?(a(),v(N,{key:2,content:"订单来自店铺："+t.shop.shopTitle,effect:"light",placement:"top"},{default:r(()=>[o(m(L),{transparent:!1,text:"店铺"})]),_:2},1032,["content"])):n("",!0),t.orderSource?(a(),v(N,{key:3,content:"订单来自"+t.orderSource+"下单",effect:"light",placement:"top"},{default:r(()=>[o(m(L),{text:t.orderSource,transparent:!0,style:{"text-transform":"uppercase"}},null,8,["text"])]),_:2},1032,["content"])):n("",!0),t.isExchangeOrder?(a(),v(m(L),{key:4,transparent:!0,color:"red",text:"积分兑换"})):n("",!0)]),l("th",bt,[l("div",yt,[o(m(S),{params:{act:"detail",id:t.orderId},showClose:!1,showOnOk:!1,title:"订单详情 "+t.orderSn,isDrawer:"",path:"order/order/Info",width:"880px",onCallback:f},{default:r(()=>[o(p,{bg:"",class:"buttonColor mr10",size:"small",text:"",type:"primary"},{default:r(()=>e[43]||(e[43]=[c(" 查看详情",-1)])),_:1,__:[43]})]),_:2},1032,["params","title"]),o(W,{title:"添加标记",item:t,onCallBack:f},{default:r(()=>[o(p,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>e[44]||(e[44]=[c(" 标记 ",-1)])),_:1,__:[44]})]),_:2},1032,["item"])])])])]),l("tbody",null,[(a(!0),i(O,null,E(t.items,(g,C)=>(a(),i("tr",null,[l("td",null,[l("div",gt,[o(m(Ce),{picThumb:g.picThumb,productId:g.productId,productName:g.productName,productType:g.productType,url:g.url},null,8,["picThumb","productId","productName","productType","url"]),l("div",kt,[l("div",null,b(m(H)(g.price)),1),l("div",null,"× "+b(g.quantity),1)])])]),C==0?(a(),i("td",{key:0,rowspan:t.items.length},[l("div",wt,[l("div",null,b(m(H)(t.totalAmount)),1),l("div",St,"(含运费："+b(t.shippingFee)+")",1),l("div",null,[t.status===6||t.status===7?(a(),v(m(S),{key:0,params:{act:"detail",id:t.aftersaleId},isDrawer:"",path:"order/aftersales/Info",title:"售后详情 "+t.aftersalesSn,width:"800px",onOkCallback:f,showClose:!1,showOnOk:!1},{default:r(()=>[o(p,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>e[45]||(e[45]=[c(" 售后详情 ",-1)])),_:1,__:[45]})]),_:2},1032,["params","title"])):n("",!0)])])],8,ht)):n("",!0),C==0?(a(),i("td",{key:1,rowspan:t.items.length},[l("div",Ct,[l("div",null,[o(m(S),{params:{act:"detail",id:t.userId},isDrawer:"",path:"user/user/Detail",title:"用户信息",width:"800px",onOkCallback:f,showOnOk:!1},{default:r(()=>{var U,j;return[l("a",null,b(((U=t.user)==null?void 0:U.nickname)||((j=t.user)==null?void 0:j.username)||"--"),1)]}),_:2},1032,["params"])])])],8,xt)):n("",!0),C==0?(a(),i("td",{key:2,rowspan:t.items.length},[l("div",It,[l("div",Tt,[e[46]||(e[46]=c(" 收货人： ",-1)),l("span",Vt,b(m(J)(t.consignee,1,1)),1)]),l("div",Dt,[e[47]||(e[47]=c(" 手机号： ",-1)),l("span",zt,[l("span",null,[o(De,{mobile:t.mobile},null,8,["mobile"])])])]),l("div",Nt,[e[48]||(e[48]=l("span",{class:"label"}," 收货地址： ",-1)),l("span",Ut,b(m(J)(t.userAddress,16,0)),1)])])],8,Ot)):n("",!0),C==0?(a(),i("td",{key:3,rowspan:t.items.length},[l("div",Bt,[l("div",null,[l("span",null,b(t.payTypeId===1?"在线支付":t.payTypeId===2?"货到付款":"线下支付"),1)]),t.logisticsName?(a(),i("div",Lt,[c(b(t.shippingTypeName)+" ",1),l("span",At,b(""+t.logisticsName),1)])):n("",!0)])],8,Ft)):n("",!0),C==0?(a(),i("td",{key:4,rowspan:t.items.length},[l("span",{class:we({orange:t.orderStatus===0,black:t.orderStatus===1||t.orderStatus===2||t.orderStatus===4,gray:t.orderStatus===3,green:t.orderStatus===5})},b(t.orderStatusName),3)],8,Rt)):n("",!0),C==0?(a(),i("td",{key:5,rowspan:t.items.length},[l("div",$t,[t.availableActions.cancelOrder?(a(),v(m(S),{key:0,params:{act:"cancelOrder",id:t.orderId},isDrawer:"",path:"order/order/src/Operation",title:"取消订单",width:"600px",onOkCallback:f},{default:r(()=>[o(p,{bg:"",class:"buttonColor",size:"small",text:"",type:"primary"},{default:r(()=>e[49]||(e[49]=[c(" 取消订单 ",-1)])),_:1,__:[49]})]),_:2},1032,["params"])):n("",!0),t.availableActions.delOrder?(a(),v(p,{key:1,bg:"",size:"small",text:"",type:"primary",onClick:U=>ne(t.orderId)},{default:r(()=>e[50]||(e[50]=[c(" 删除订单 ",-1)])),_:2,__:[50]},1032,["onClick"])):n("",!0),t.availableActions.deliver?(a(),v(m(S),{key:2,params:{act:"detail",id:t.orderId},title:"订单发货 "+t.orderSn,isDrawer:"",path:"order/order/src/ToShip",width:"900px",onOkCallback:f},{default:r(()=>[o(p,{bg:"",size:"small",text:"",type:"danger"},{default:r(()=>e[51]||(e[51]=[c(" 去发货 ",-1)])),_:1,__:[51]})]),_:2},1032,["params","title"])):n("",!0),t.availableActions.confirmReceipt?(a(),v(p,{key:3,bg:"",size:"small",text:"",type:"danger",onClick:U=>de(t.orderId)},{default:r(()=>e[52]||(e[52]=[c(" 确认收货 ",-1)])),_:2,__:[52]},1032,["onClick"])):n("",!0)])],8,Et)):n("",!0)]))),256))])]))),256)),D.value==0?(a(),i("div",Pt,[x.value?n("",!0):(a(),i("div",Mt,"暂无数据"))])):n("",!0)]),_:1},8,["spinning"])]),D.value>0?(a(),i("div",Kt,[o(m(xe),{page:s.page,"onUpdate:page":e[17]||(e[17]=t=>s.page=t),size:s.size,"onUpdate:size":e[18]||(e[18]=t=>s.size=t),total:D.value,onCallback:f},null,8,["page","size","total"])])):n("",!0)])])])}}}),yl=Se(Yt,[["__scopeId","data-v-d5308d71"]]);export{yl as default};
