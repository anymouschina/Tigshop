import{d as j,a as A,r as y,v as E,o as G,ag as H,e as r,f as p,g as d,h as a,k as m,y as s,l as n,i as e,a2 as J,K as c,t as _,j as x,_ as Q}from"./index-BEWhCL1q.js";/* empty css             */import"./index-DVG44k_-.js";/* empty css                                                                    */import{P as W}from"./Pagination-4FaohhlG.js";import{p as w}from"./format-C8RAoEAk.js";import{_ as X}from"./Image.vue_vue_type_script_setup_true_lang-DC1N644b.js";import{b as Y}from"./shop-CWBoDOF9.js";import{a as Z}from"./dashboard-BqksQYhB.js";import{S as T}from"./StatusDot-V36Ff0I6.js";import{u as ee}from"./useListRequest-Bpxbydyo.js";import{_ as te}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";const oe={class:"container"},se={class:"content_wrapper"},ae={class:"container"},ne={class:"lyecs-table-list-warp"},le={class:"list-table-tool lyecs-search-warp"},ie={class:"list-table-tool-row"},re={class:"simple-form-warp"},de={class:"simple-form-field"},ce={class:"form-group"},ue={class:"control-container"},pe={class:"simple-form-field"},me={class:"form-group"},_e={class:"table-container"},fe={key:2,style:{color:"red"}},ge={key:3,style:{color:"green"}},he={class:"empty-warp"},be={key:0,class:"empty-bg"},ve={key:0,class:"pagination-con"},ye={key:0,class:"selected-action-warp selected-warp-left"},we={class:"selected-action"},ke=j({__name:"List",setup(Ce){const f=A().currentRoute.value.query,V=y([{label:"全部",value:0,isShow:!0},{label:"在供",value:1,isShow:!0},{label:"断供",value:2,isShow:!0}]),B=E(),{listData:I,loading:g,total:h,selectedIds:k,filterParams:l,loadData:b,onSearchSubmit:v,onSortChange:L,onSelectChange:O,onBatchAction:z}=ee({apiFunction:Z,idKey:"shopId",defaultParams:{sortField:"",sortOrder:"",keyword:"",status:0,page:1,size:B.get("pageSize")}}),F=async u=>{await z(u,Y)};b();const N=u=>{l.status=u,l.page=1,b()},U=()=>{let u=window.location.href,o=new URL(u);o.search="",window.history.replaceState({},document.title,o.toString())},D=y(),C=y(0);return G(()=>{f.id&&H.confirm(`为[${f.companyName||"--"}]立即创建店铺?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{C.value=Number(f.id),D.value.show()}).catch(()=>{C.value=0,U()})}),(u,o)=>{const S=r("el-button"),K=r("TigInput"),M=r("TigTabs"),i=r("el-table-column"),P=r("el-table"),R=r("a-spin"),$=r("el-popconfirm"),q=r("el-space");return d(),p("div",oe,[a("div",se,[a("div",ae,[a("div",ne,[a("div",le,[a("div",ie,[a("div",re,[a("div",de,[a("div",ce,[a("div",ue,[s(K,{modelValue:e(l).keyword,"onUpdate:modelValue":o[0]||(o[0]=t=>e(l).keyword=t),name:"username",placeholder:"输入供应商名称",onKeyup:J(e(v),["enter"]),clearable:"",onClear:e(v)},{append:n(()=>[s(S,{onClick:e(v)},{default:n(()=>o[5]||(o[5]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[5]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),a("div",pe,[a("div",me,[s(M,{modelValue:e(l).status,"onUpdate:modelValue":o[1]||(o[1]=t=>e(l).status=t),tabs:V.value,onOnTabChange:N},null,8,["modelValue","tabs"])])])])])]),a("div",_e,[s(R,{spinning:e(g)},{default:n(()=>[s(P,{data:e(I),loading:e(g),total:e(h),"row-key":"shopId",onSelectionChange:e(O),onSortChange:e(L)},{empty:n(()=>[a("div",he,[e(g)?m("",!0):(d(),p("div",be,"暂无数据"))])]),default:n(()=>[s(i,{label:"供应商名称"},{default:n(({row:t})=>[c(_(t.vendorName||"--"),1)]),_:1}),s(i,{label:"供应商LOGO"},{default:n(({row:t})=>[s(e(X),{src:t.vendorLogo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),s(i,{label:"供应商状态"},{default:n(({row:t})=>[t.status==2?(d(),x(T,{key:0,color:"red",flicker:!0})):m("",!0),t.status==1?(d(),x(T,{key:1,color:"green",flicker:!0})):m("",!0),t.status===2?(d(),p("span",fe,"断供")):t.status===1?(d(),p("span",ge,"在供")):m("",!0)]),_:1}),s(i,{label:"供应商资金",sortable:"custom"},{default:n(({row:t})=>[c(_(e(w)(t.shopMoney)||0),1)]),_:1}),s(i,{label:"待结算金额",sortable:"custom"},{default:n(({row:t})=>[c(_(e(w)(t.unSettlementOrder)||0),1)]),_:1}),s(i,{label:"不可用资金",sortable:"custom"},{default:n(({row:t})=>[c(_(e(w)(t.frozenMoney)||0),1)]),_:1}),s(i,{label:"开店时间"},{default:n(({row:t})=>[c(_(t.addTime),1)]),_:1}),s(i,{width:120,fixed:"right",label:"操作"},{default:n(({row:t})=>[s(e(te),{params:{vendorId:t.vendorId},showClose:!1,showOnOk:!1,isDrawer:"",path:"vendor/adminFunds/financialLog/List",title:"资金日志",width:"800px"},{default:n(()=>o[6]||(o[6]=[a("a",{class:"btn-link"},"查看资金日志",-1)])),_:2,__:[6]},1032,["params"])]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(h)>0?(d(),p("div",ve,[s(e(W),{page:e(l).page,"onUpdate:page":o[2]||(o[2]=t=>e(l).page=t),size:e(l).size,"onUpdate:size":o[3]||(o[3]=t=>e(l).size=t),total:e(h),onCallback:e(b)},null,8,["page","size","total","onCallback"])])):m("",!0)]),e(k).length>0?(d(),p("div",ye,[a("div",we,[s(q,null,{default:n(()=>[a("span",null,[o[7]||(o[7]=c("已选择：",-1)),a("b",null,_(e(k).length),1),o[8]||(o[8]=c(" 项",-1))]),s($,{title:"您确认要批量删除所选数据吗？",onConfirm:o[4]||(o[4]=t=>F("del"))},{reference:n(()=>[s(S,null,{default:n(()=>o[9]||(o[9]=[c("批量删除",-1)])),_:1,__:[9]})]),_:1})]),_:1})])])):m("",!0)])])])])}}}),Ke=Q(ke,[["__scopeId","data-v-11ec6fb1"]]);export{Ke as default};
