import{d as Q,r as x,a as z,v as W,o as X,ag as Y,e as d,f as i,g as n,h as a,y as l,l as s,i as t,a2 as O,F as Z,m as ee,j as g,K as h,k as p,t as _,e3 as te,_ as oe}from"./index-BEWhCL1q.js";/* empty css             */import"./index-DVG44k_-.js";/* empty css                                                                    */import{P as ae}from"./Pagination-4FaohhlG.js";import{_ as le}from"./Image.vue_vue_type_script_setup_true_lang-DC1N644b.js";import{a as se}from"./shop-CWBoDOF9.js";import{S as V}from"./StatusDot-V36Ff0I6.js";import{u as ne}from"./useListRequest-Bpxbydyo.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";import"./format-C8RAoEAk.js";const ie={class:"container"},re={class:"content_wrapper"},de={class:"container"},ce={class:"lyecs-table-list-warp"},pe={class:"list-table-tool lyecs-search-warp"},ue={class:"advanced-search-warp list-table-tool-row"},me={class:"simple-form-warp"},_e={class:"simple-form-field"},he={class:"form-group"},fe={class:"control-container"},ke={class:"simple-form-field"},be={class:"form-group"},ye={class:"control-container"},ge={class:"simple-form-field"},ve={class:"form-group"},Ce={class:"control-container"},we={class:"simple-form-field"},Se={class:"form-group"},xe={class:"control-container"},Oe={class:"simple-form-warp"},Ve={class:"simple-form-field"},Ie={class:"control-container"},De={class:"list-table-tool-row mt20"},Ke={class:"list-table-tool-col"},Le={class:"table-container"},Ue={key:0},ze={key:0},Ne={key:1},Te={key:0,class:"btn-link green"},Be={key:1,class:"btn-link grey"},Fe={key:3,style:{color:"red"}},Me={key:4,style:{color:"green"}},Pe={key:0},Ae={key:1},qe=["href"],Re={class:"empty-warp"},$e={key:0,class:"empty-bg"},je={key:0,class:"pagination-con"},Ee=Q({__name:"List",setup(Ge){const N=x([{label:"开业",value:1,isShow:!0},{label:"暂停运营",value:4,isShow:!0},{label:"打烊",value:10,isShow:!0}]),b=z().currentRoute.value.query,T=W(),{listData:B,loading:v,total:C,filterParams:r,loadData:u,onSearchSubmit:c,onSortChange:F,onSelectChange:M,resetParams:P}=ne({apiFunction:se,idKey:"shopId",defaultParams:{sortField:"",sortOrder:"",keyword:"",account:b.account||"",mainAccount:"",status:"",page:1,size:T.get("pageSize")}});u(),z().replace({query:{}});const A=()=>{w(),u()},w=()=>{let D=window.location.href,o=new URL(D);o.search="",window.history.replaceState({},document.title,o.toString())},I=x(),y=x(0);X(()=>{b.id&&Y.confirm(`为[${b.companyName||"--"}]立即创建店铺?`,"提示",{closeOnClickModal:!1,showClose:!1,confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{y.value=Number(b.id),I.value.show()}).catch(()=>{y.value=0,w()})});const q=()=>{y.value=0,w()};return(D,o)=>{const f=d("el-button"),S=d("TigInput"),R=d("el-option"),$=d("el-select"),K=d("el-space"),m=d("el-table-column"),L=d("el-divider"),j=d("el-dropdown-item"),E=d("el-dropdown-menu"),G=d("el-dropdown"),H=d("el-table"),J=d("a-spin");return n(),i("div",ie,[a("div",re,[a("div",de,[a("div",ce,[a("div",pe,[a("div",ue,[a("div",me,[a("div",_e,[a("div",he,[o[7]||(o[7]=a("label",{class:"control-label"},[a("span",null,"店铺名称：")],-1)),a("div",fe,[l(S,{modelValue:t(r).keyword,"onUpdate:modelValue":o[0]||(o[0]=e=>t(r).keyword=e),name:"keyword",placeholder:"输入店铺名称",onKeyup:O(t(c),["enter"]),clearable:"",onClear:t(c)},{append:s(()=>[l(f,{onClick:t(c)},{default:s(()=>o[6]||(o[6]=[a("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[6]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),a("div",ke,[a("div",be,[o[8]||(o[8]=a("label",{class:"control-label"},[a("span",null,"关联账号：")],-1)),a("div",ye,[l(S,{modelValue:t(r).account,"onUpdate:modelValue":o[1]||(o[1]=e=>t(r).account=e),name:"account",placeholder:"输入关联账号名称",onKeyup:O(t(c),["enter"]),clearable:"",onClear:t(c)},null,8,["modelValue","onKeyup","onClear"])])])]),a("div",ge,[a("div",ve,[o[9]||(o[9]=a("label",{class:"control-label"},[a("span",null,"主账号：")],-1)),a("div",Ce,[l(S,{modelValue:t(r).mainAccount,"onUpdate:modelValue":o[2]||(o[2]=e=>t(r).mainAccount=e),name:"mainAccount",placeholder:"输入主账号名称",onKeyup:O(t(c),["enter"]),clearable:"",onClear:t(c)},null,8,["modelValue","onKeyup","onClear"])])])]),a("div",we,[a("div",Se,[o[10]||(o[10]=a("label",{class:"control-label"},[a("span",null,"状态 ：")],-1)),a("div",xe,[l($,{modelValue:t(r).status,"onUpdate:modelValue":o[3]||(o[3]=e=>t(r).status=e),clearable:"",onChange:t(c)},{default:s(()=>[(n(!0),i(Z,null,ee(N.value,e=>(n(),g(R,{label:e.label,value:e.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue","onChange"])])])]),a("div",Oe,[a("div",Ve,[o[13]||(o[13]=a("label",{class:"control-label"},null,-1)),a("div",Ie,[l(f,{type:"primary",plain:"",onClick:t(c)},{default:s(()=>o[11]||(o[11]=[h("搜索",-1)])),_:1,__:[11]},8,["onClick"]),l(f,{plain:"",onClick:t(P)},{default:s(()=>o[12]||(o[12]=[h("重置",-1)])),_:1,__:[12]},8,["onClick"])])])])])]),a("div",De,[a("div",Ke,[l(K,null,{default:s(()=>[l(t(k),{ref_key:"dialogForm",ref:I,params:{act:"add",id:y.value},isDrawer:"",path:"shop/shop/Add",title:"新增店铺",width:"800px",onCloseCallback:q,onOkCallback:A},{default:s(()=>[l(f,{type:"primary"},{default:s(()=>o[14]||(o[14]=[h("新增店铺",-1)])),_:1,__:[14]})]),_:1},8,["params"])]),_:1})])])]),a("div",Le,[l(J,{spinning:t(v)},{default:s(()=>[l(H,{data:t(B),loading:t(v),total:t(C),"row-key":"shopId",onSelectionChange:t(M),onSortChange:t(F)},{empty:s(()=>[a("div",Re,[t(v)?p("",!0):(n(),i("div",$e,"暂无数据"))])]),default:s(()=>[l(m,{label:"店铺名称"},{default:s(({row:e})=>[h(_(e.shopTitle||"--"),1)]),_:1}),l(m,{label:"店铺LOGO"},{default:s(({row:e})=>[l(t(le),{src:e.shopLogo,fit:"contain",style:{height:"25px",width:"60px"}},null,8,["src"])]),_:1}),l(m,{label:"商户名称",width:200},{default:s(({row:e})=>{var U;return[e.merchant?(n(),i("div",Ue,[e.merchant.type==2?(n(),i("span",ze,_(((U=e.merchant.merchantData)==null?void 0:U.merchantName)||"--"),1)):p("",!0),e.merchant.type==1?(n(),i("span",Ne,_(e.merchant.corporateName||"--"),1)):p("",!0),l(t(k),{params:{act:"detail",id:e.merchant.merchantId},isDrawer:"",path:"adminMerchant/merchant/Info",title:"商户详情",width:"600px",showClose:!1,showOnOk:!1,onOkCallback:t(u)},{default:s(()=>[e.merchant.status==1?(n(),i("a",Te,"(已认证)")):(n(),i("a",Be,"(未认证)"))]),_:2},1032,["params","onOkCallback"])])):p("",!0)]}),_:1}),l(m,{label:"店铺状态",sortable:"custom"},{default:s(({row:e})=>[e.status==10?(n(),g(V,{key:0,color:"red",flicker:!0})):p("",!0),e.status==4?(n(),g(V,{key:1,color:"red",flicker:!0})):p("",!0),e.status==1?(n(),g(V,{key:2,color:"green",flicker:!0})):p("",!0),e.status===10||e.status===4?(n(),i("span",Fe,_(e.statusText),1)):e.status===1?(n(),i("span",Me,_(e.statusText),1)):p("",!0)]),_:1}),l(m,{label:"店铺佣金",align:"center"},{default:s(({row:e})=>[h(_(e.shopCommission||"--"),1)]),_:1}),l(m,{label:"主账号",align:"center"},{default:s(({row:e})=>[e.merchant&&e.merchant.admin?(n(),i("div",Pe,[l(t(k),{params:{id:e.shopId,type:"shop"},isDrawer:"",path:"authority/accountManage/Detail",title:"主账号管理",width:"900px",onOkCallback:t(u)},{default:s(()=>[a("a",null,_(e.merchant.admin.username||"--"),1)]),_:2},1032,["params","onOkCallback"])])):(n(),i("div",Ae,"--"))]),_:1}),l(m,{width:200,fixed:"right",label:"操作"},{default:s(({row:e})=>[l(K,{size:0},{default:s(()=>[l(t(k),{params:{act:"detail",id:e.shopId},isDrawer:"",path:"shop/shop/Info",title:"编辑店铺",width:"700px",onOkCallback:t(u)},{default:s(()=>o[15]||(o[15]=[a("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[15]},1032,["params","onOkCallback"]),l(L,{direction:"vertical"}),a("a",{href:t(te)("shop",e.shopId),target:"_blank",class:"btn-link"},"店铺首页",8,qe),l(L,{direction:"vertical"}),l(G,null,{dropdown:s(()=>[l(E,null,{default:s(()=>[l(j,null,{default:s(()=>[l(t(k),{params:{id:e.shopId,type:"shop"},isDrawer:"",path:"authority/accountManage/Detail",title:"主账号管理",width:"900px",onOkCallback:t(u)},{default:s(()=>[l(f,{style:{width:"100%"},link:"",type:"primary"},{default:s(()=>o[16]||(o[16]=[h("主账号管理",-1)])),_:1,__:[16]})]),_:2},1032,["params","onOkCallback"])]),_:2},1024)]),_:2},1024)]),default:s(()=>[o[17]||(o[17]=a("span",{class:"iconfont-admin icon-gengduo1 btn-link"},null,-1))]),_:2,__:[17]},1024)]),_:2},1024)]),_:1})]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),t(C)>0?(n(),i("div",je,[l(t(ae),{page:t(r).page,"onUpdate:page":o[4]||(o[4]=e=>t(r).page=e),size:t(r).size,"onUpdate:size":o[5]||(o[5]=e=>t(r).size=e),total:t(C),onCallback:t(u)},null,8,["page","size","total","onCallback"])])):p("",!0)])])])])])}}}),st=oe(Ee,[["__scopeId","data-v-3e686a6f"]]);export{st as default};
