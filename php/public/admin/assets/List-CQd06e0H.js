import{d as M,r as w,v as $,o as j,e as i,f as d,g as l,h as o,k as p,y as n,l as s,i as e,a2 as R,K as u,t as b,j as f,z,ei as E,ej as G,ek as H,_ as J}from"./index-BEWhCL1q.js";/* empty css             */import"./index-DVG44k_-.js";import{D as Q}from"./DeleteRecord-C4_57oHW.js";/* empty css                                                                    */import{P as W}from"./Pagination-4FaohhlG.js";import{i as X,r as Y}from"./format-C8RAoEAk.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-B2T-ARqM.js";/* empty css                                                                  *//* empty css                                                                              */import{_ as Z}from"./SelectVendor.vue_vue_type_script_setup_true_lang-BuLnQbyc.js";import{M as ee}from"./MobileCard-BFqdI-Pd.js";import{u as te}from"./useListRequest-Bpxbydyo.js";import{_ as U}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";import"./time-BMcbgg5F.js";import"./suppliers-B-M3H6eN.js";const oe={class:"container"},ae={class:"content_wrapper"},ne={class:"lyecs-table-list-warp"},se={key:0,class:"list-table-tool lyecs-search-warp"},le={class:"list-table-tool-row"},ie={class:"simple-form-warp"},re={class:"simple-form-field"},de={class:"form-group"},pe={class:"control-container"},me={key:0,class:"simple-form-field"},ce={class:"form-group"},_e={class:"control-container"},ue={class:"simple-form-field"},fe={class:"form-group"},ve={class:"simple-form-field"},ge={class:"form-group"},be={key:0},ye={class:"table-container"},ke={class:"avatar-username"},he={key:0},Ce={key:1},Se={class:"empty-warp"},Ie={key:0,class:"empty-bg"},we={key:0,class:"pagination-con"},ze=M({__name:"List",props:{vendorId:{type:Number,default:0},type:{type:String,default:""}},setup(v){const m=w(localStorage.getItem("adminType")),x=$(),A=w(v.vendorId||""),{listData:D,loading:y,total:k,selectedIds:h,filterParams:r,loadData:c,onSearchSubmit:g,onSortChange:V,onSelectChange:O,onBatchAction:B}=te({apiFunction:G,idKey:"id",defaultParams:{page:1,size:x.get("pageSize"),sortField:"",sortOrder:"",keyword:"",vendorId:A.value}}),K=async I=>{await B(I,H)};return j(()=>{c()}),(I,t)=>{const C=i("el-button"),N=i("TigInput"),T=i("el-popconfirm"),F=i("el-space"),_=i("el-table-column"),S=i("el-avatar"),P=i("el-divider"),q=i("el-table"),L=i("a-spin");return l(),d("div",oe,[o("div",ae,[o("div",ne,[v.type!="detail"?(l(),d("div",se,[o("div",le,[o("div",ie,[o("div",re,[o("div",de,[o("div",pe,[n(N,{modelValue:e(r).keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>e(r).keyword=a),name:"keyword",placeholder:m.value=="admin"?"输入管理员名称":"输入员工名称",onKeyup:R(e(g),["enter"]),clearable:"",onClear:e(g)},{append:s(()=>[n(C,{onClick:e(g)},{default:s(()=>t[5]||(t[5]=[o("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[5]},8,["onClick"])]),_:1},8,["modelValue","placeholder","onKeyup","onClear"])])])]),m.value=="admin"?(l(),d("div",me,[o("div",ce,[t[6]||(t[6]=o("label",{class:"control-label"},[o("span",null,"供应商：")],-1)),o("div",_e,[n(e(Z),{vendorId:e(r).vendorId,"onUpdate:vendorId":t[1]||(t[1]=a=>e(r).vendorId=a),onOnChange:e(g)},null,8,["vendorId","onOnChange"])])])])):p("",!0),o("div",ue,[o("div",fe,[n(e(U),{params:{act:"add"},isDrawer:"",path:"vendor/setting/adminUser/Info",title:m.value=="admin"?"添加管理员":"添加员工",width:"800px",onOkCallback:e(c)},{default:s(()=>[n(C,{type:"primary"},{default:s(()=>[u(b(m.value=="admin"?"添加管理员":"添加员工"),1)]),_:1})]),_:1},8,["title","onOkCallback"])])]),o("div",ve,[o("div",ge,[n(F,null,{default:s(()=>[n(T,{title:"您确认要批量删除所选数据吗？",onConfirm:t[2]||(t[2]=a=>K("del"))},{reference:s(()=>[n(C,{disabled:e(h).length===0},{default:s(()=>t[7]||(t[7]=[u("批量删除",-1)])),_:1,__:[7]},8,["disabled"])]),_:1}),e(h).length>0?(l(),d("span",be,[t[8]||(t[8]=u(" 已选择：",-1)),o("b",null,b(e(h).length),1),t[9]||(t[9]=u(" 项 ",-1))])):p("",!0)]),_:1})])])])])])):p("",!0),o("div",ye,[n(L,{spinning:e(y)},{default:s(()=>[n(q,{data:e(D),loading:e(y),total:e(k),"row-key":"id",onSelectionChange:e(O),onSortChange:e(V)},{empty:s(()=>[o("div",Se,[e(y)?p("",!0):(l(),d("div",Ie,"暂无数据"))])]),default:s(()=>[v.type!="detail"?(l(),f(_,{key:0,type:"selection",width:"32"})):p("",!0),n(_,{width:"200",label:m.value=="admin"?"管理员名称":"员工名称",prop:"username"},{default:s(({row:a})=>[o("div",ke,[e(z)(String(a.avatar))=="one"?(l(),f(S,{key:0,size:30,src:e(X)(a.avatar)},null,8,["src"])):e(z)(String(a.avatar))=="def"?(l(),f(S,{key:1,size:30,src:e(Y)(a.avatar)},null,8,["src"])):(l(),f(S,{key:2,size:30,src:""})),o("div",null,[o("div",null,b(a.username),1)])])]),_:1},8,["label"]),n(_,{label:"邮箱",prop:"email"},{default:s(({row:a})=>[o("span",null,b(a.email||"-"),1)]),_:1}),n(_,{label:"电话",prop:"mobile"},{default:s(({row:a})=>[a.adminUser.mobile?(l(),d("span",he,[n(ee,{mobile:a.adminUser.mobile},null,8,["mobile"])])):(l(),d("span",Ce,"--"))]),_:1}),v.type!="detail"?(l(),f(_,{key:1,width:150,fixed:"right",label:"操作"},{default:s(({row:a})=>[n(e(U),{params:{act:"detail",id:a.id},isDrawer:"",path:"vendor/setting/adminUser/Info",title:"编辑管理员",width:"800px",onOkCallback:e(c)},{default:s(()=>t[10]||(t[10]=[o("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[10]},1032,["params","onOkCallback"]),n(P,{direction:"vertical"}),n(e(Q),{params:{id:a.id},requestApi:e(E),onAfterDelete:e(c)},{default:s(()=>t[11]||(t[11]=[u("删除 ",-1)])),_:2,__:[11]},1032,["params","requestApi","onAfterDelete"])]),_:1})):p("",!0)]),_:1},8,["data","loading","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),e(k)>0?(l(),d("div",we,[n(e(W),{page:e(r).page,"onUpdate:page":t[3]||(t[3]=a=>e(r).page=a),size:e(r).size,"onUpdate:size":t[4]||(t[4]=a=>e(r).size=a),total:e(k),onCallback:e(c)},null,8,["page","size","total","onCallback"])])):p("",!0)])])])])}}}),Ee=J(ze,[["__scopeId","data-v-3be07159"]]);export{Ee as default};
