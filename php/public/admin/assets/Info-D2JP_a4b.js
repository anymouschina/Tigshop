import{d as U,r as d,a as F,a5 as L,o as M,e as s,f as h,g as w,h as c,y as o,j,k as E,l as a,E as A,i as V,K as f,I as G,J as _}from"./index-BEWhCL1q.js";import{F as J}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BVJHh8ng.js";import"./index-DVG44k_-.js";import"./vuedraggable.umd-_qUe1n4L.js";import{a as K,b as P}from"./material-drHrKJJi.js";import{_ as $}from"./selectCategory.vue_vue_type_script_setup_true_lang-kd68BGlq.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-B2T-ARqM.js";import{S as z}from"./SelectProduct-CS10v706.js";/* empty css                                                                    *//* empty css                                                                              *//* empty css             */import"./Image.vue_vue_type_script_setup_true_lang-DC1N644b.js";import"./format-C8RAoEAk.js";import"./BusinessImg-CuIKiE1z.js";import"./currencyManagement-BEhPZh48.js";import"./version-C520_GUm.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";import"./category-yYcKmj4c.js";import"./time-BMcbgg5F.js";import"./product-IfnnwfpZ.js";import"./Pagination-4FaohhlG.js";import"./SelectSku-CKVpMAXG.js";/* empty css                                                                  */const H={class:"container"},O={class:"content_wrapper"},Q={class:"lyecs-form-table"},W={class:"lyecs-form-table"},Ve=U({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(k,{expose:S,emit:T}){const u=T,n=k,p=d(!0),v=F().currentRoute.value.query,m=d(n.isDialog?n.act:String(v.act)),g=d(n.isDialog?n.id:Number(v.id)),x=m.value==="add"?"create":"update",y=L(),t=d({isTop:0,content:"",productId:[]}),B=async()=>{try{const l=await K(m.value,{id:g.value});t.value=l,t.value.productId=[l.productId]}catch(l){_.error(l.message),u("close")}finally{p.value=!1}};M(()=>{m.value==="detail"?B():p.value=!1});const b=async()=>{await y.value.validate();let l="";t.value.productId&&(l=t.value.productId.join(","));try{u("update:confirmLoading",!0);const e=await P(x,{id:g.value,...t.value,productId:l});u("submitCallback",e),_.success("操作成功")}catch(e){_.error(e.message)}finally{u("update:confirmLoading",!1)}};return S({onFormSubmit:()=>{b()}}),(l,e)=>{const i=s("el-form-item"),C=s("TigInput"),I=s("el-radio"),q=s("el-radio-group"),N=s("el-button"),D=s("el-form"),R=s("a-spin");return w(),h("div",H,[c("div",O,[c("div",Q,[c("div",W,[p.value?E("",!0):(w(),j(D,{key:0,ref_key:"formRef",ref:y,model:t.value,"label-width":"auto"},{default:a(()=>[o(i,{label:"素材图片",prop:"pics",rules:[{required:!0,message:"素材图片不能为空!"}]},{default:a(()=>[o(V(J),{photos:t.value.pics,"onUpdate:photos":e[0]||(e[0]=r=>t.value.pics=r),isMultiple:""},null,8,["photos"])]),_:1}),o(i,{label:"素材分类",prop:"categoryId",rules:[{required:!0,message:"请选择素材分类!"}]},{default:a(()=>[o($,{categoryId:t.value.categoryId,"onUpdate:categoryId":e[1]||(e[1]=r=>t.value.categoryId=r)},null,8,["categoryId"])]),_:1}),o(i,{rules:[{required:!0,message:"素材内容不能为空!"}],label:"素材内容",prop:"content"},{default:a(()=>[o(C,{classType:"tig-form-input",modelValue:t.value.content,"onUpdate:modelValue":e[2]||(e[2]=r=>t.value.content=r),rows:5,type:"textarea"},null,8,["modelValue"])]),_:1}),o(i,{label:"选择商品",prop:"productId",rules:[{required:!0,message:"请选择商品!"}]},{default:a(()=>[o(V(z),{isMultiple:!1,ids:t.value.productId,"onUpdate:ids":e[3]||(e[3]=r=>t.value.productId=r)},null,8,["ids"])]),_:1}),o(i,{label:"是否置顶",prop:"isTop"},{default:a(()=>[o(q,{modelValue:t.value.isTop,"onUpdate:modelValue":e[4]||(e[4]=r=>t.value.isTop=r)},{default:a(()=>[o(I,{value:1},{default:a(()=>e[5]||(e[5]=[f("置顶",-1)])),_:1,__:[5]}),o(I,{value:0},{default:a(()=>e[6]||(e[6]=[f("不置顶",-1)])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1}),A(o(i,{"wrapper-col":{offset:4,span:16}},{default:a(()=>[o(N,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:b},{default:a(()=>e[7]||(e[7]=[f("提交",-1)])),_:1,__:[7]},512)]),_:1},512),[[G,!n.isDialog]])]),_:1},8,["model"]))]),o(R,{spinning:p.value,style:{width:"100%","margin-top":"100px"}},null,8,["spinning"])])])])}}});export{Ve as default};
