import{d as Q,v as W,r as I,e as _,f,g as d,h as l,y as n,l as o,k as i,i as a,a2 as X,K as m,j as u,t as b,F as Z,_ as ee}from"./index-BEWhCL1q.js";/* empty css             */import"./index-DVG44k_-.js";import{P as te}from"./PopSelect.vue_vue_type_style_index_0_scoped_5832cf6b_lang-B9ASxJaT.js";import{_ as ae}from"./Switch.vue_vue_type_script_setup_true_lang-4ZoJqbbn.js";import{D as w}from"./DeleteRecord-C4_57oHW.js";/* empty css                                                                    */import{P as le}from"./Pagination-4FaohhlG.js";import{u as oe,i as se}from"./format-C8RAoEAk.js";import{S as ne}from"./SelectBrand-DFj6FPJO.js";import{_ as de}from"./SelectCategory.vue_vue_type_script_setup_true_lang-D5TL5eLW.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-B2T-ARqM.js";/* empty css                                                                  *//* empty css                                                                              */import{S as ie}from"./SelectTimeInterval-CHncG0ge.js";import{_ as re}from"./SelectVendor.vue_vue_type_script_setup_true_lang-BuLnQbyc.js";import{g as ue,a as pe,u as me,P,b as q,c as ce}from"./product-Cakm3Kom.js";import{u as _e}from"./useListRequest-Bpxbydyo.js";import{_ as h}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";import"./brand-NPYEvOSK.js";import"./category-Bu2fUBIU.js";import"./category-JkcBf76e.js";import"./time-BMcbgg5F.js";import"./suppliers-B-M3H6eN.js";const fe={class:"container"},ve={class:"content_wrapper"},be={class:"lyecs-table-list-warp"},ke={class:"list-table-tool lyecs-search-warp"},ge={class:"advanced-search-warp list-table-tool-row"},ye={class:"simple-form-warp"},Se={class:"simple-form-field"},he={class:"form-group"},Ce={class:"control-container"},Ie={class:"simple-form-field"},we={class:"form-group"},Te={class:"control-container"},De={class:"simple-form-field"},Ae={class:"form-group"},xe={class:"control-container"},Oe={class:"simple-form-field"},Pe={class:"form-group"},Ne={key:0,class:"simple-form-field"},Ve={class:"form-group"},qe={class:"control-container"},Ue={class:"simple-form-warp"},Fe={class:"simple-form-field"},Be={class:"control-container"},Re={key:0,class:"list-table-tool-row"},ze={class:"list-table-tool-col"},Ee={key:3},$e={class:"table-container"},Ke={class:"flex"},Le={key:0,class:"span-pic"},Ye=["href"],je=["src"],Me={class:"span-product-con"},Ge={class:"span-product-name",style:{"word-break":"break-all"}},He={key:1},Je={key:2},Qe={key:0,class:"span-product-brand"},We={class:"span-con green"},Xe={key:0,class:"green"},Ze={key:1,class:"red"},et={class:"empty-warp"},tt={key:0,class:"empty-bg"},at={key:0,class:"pagination-con"},lt=Q({__name:"List",setup(ot){const U=W();I(0);const p=I(localStorage.getItem("adminType")),r=I(1),{listData:F,loading:N,total:T,selectedIds:S,filterParams:s,loadData:c,onSearchSubmit:y,onSortChange:B,onSelectChange:R,onBatchAction:z}=_e({apiFunction:p.value=="vendor"?ue:pe,idKey:"id",defaultParams:{page:1,size:U.get("pageSize"),sortField:"",sortOrder:"",keyword:"",introType:"",shopId:"",vendorId:"",categoryId:"",brandId:"",productState:1,isRecycle:0,auditState:1,searchEndTime:"",searchStartTime:""}},["auditState","productState","isRecycle"]);c();const V=k=>{r.value=k,s.productState=k===1||k===0?k:"",p.value=="vendor"&&(s.auditState=k===6?2:1),p.value!=="vendor"&&(s.auditState=k===8?0:""),s.isRecycle=k===7?1:0,s.page=1,Object.keys(s).forEach(e=>{s[e]===void 0&&delete s[e]}),c()},E=()=>{s.sortField="",s.sortOrder="",s.keyword="",s.introType="",s.shopId="",s.vendorId="",s.categoryId="",s.brandId="",s.productState=1,s.isRecycle=0,s.auditState=1,s.searchEndTime="",s.searchStartTime="",V(r.value)},$=I([{label:"在售商品",value:1,isShow:!0},{label:"断供商品",value:0,isShow:!0},{label:"商品回收站",value:7,isShow:p.value=="vendor"},{label:"待审核商品",value:8,isShow:p.value=="admin"},{label:"审核失败商品",value:6,isShow:p.value=="vendor"}]),D=async k=>{await z(k,ce)};return(k,e)=>{const K=_("TigTabs"),g=_("el-button"),L=_("TigInput"),A=_("el-popconfirm"),x=_("el-space"),Y=_("el-form"),v=_("el-table-column"),C=_("el-divider"),j=_("el-dropdown-item"),M=_("el-dropdown-menu"),G=_("el-dropdown"),H=_("el-table"),J=_("a-spin");return d(),f("div",fe,[l("div",ve,[l("div",be,[n(K,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),tabs:$.value,onOnTabChange:V},null,8,["modelValue","tabs"]),l("div",ke,[n(Y,{model:a(s),name:"form"},{default:o(()=>[l("div",ge,[l("div",ye,[l("div",Se,[l("div",he,[e[13]||(e[13]=l("label",{class:"control-label"},[l("span",null,"商品名称：")],-1)),l("div",Ce,[n(L,{modelValue:a(s).keyword,"onUpdate:modelValue":e[1]||(e[1]=t=>a(s).keyword=t),name:"keyword",placeholder:"输入商品名称/货号",onKeyup:X(a(y),["enter"]),clearable:"",onClear:a(y)},{append:o(()=>[n(g,{onClick:a(y)},{default:o(()=>e[12]||(e[12]=[l("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[12]},8,["onClick"])]),_:1},8,["modelValue","onKeyup","onClear"])])])]),l("div",Ie,[l("div",we,[e[14]||(e[14]=l("label",{class:"control-label"},[l("span",null,"分类：")],-1)),l("div",Te,[n(a(de),{ref:"selectCategoryRef",categoryId:a(s).categoryId,"onUpdate:categoryId":e[2]||(e[2]=t=>a(s).categoryId=t)},null,8,["categoryId"])])])]),l("div",De,[l("div",Ae,[e[15]||(e[15]=l("label",{class:"control-label"},[l("span",null,"品牌：")],-1)),l("div",xe,[n(a(ne),{brandId:a(s).brandId,"onUpdate:brandId":e[3]||(e[3]=t=>a(s).brandId=t),onOnChange:a(y)},null,8,["brandId","onOnChange"])])])]),l("div",Oe,[l("div",Pe,[e[16]||(e[16]=l("label",{class:"control-label"},[l("span",null,"创建时间：")],-1)),n(a(ie),{"end-date":a(s).searchEndTime,"onUpdate:endDate":e[4]||(e[4]=t=>a(s).searchEndTime=t),"start-date":a(s).searchStartTime,"onUpdate:startDate":e[5]||(e[5]=t=>a(s).searchStartTime=t),clearable:!1,type:"date","value-format":"YYYY-MM-DD"},null,8,["end-date","start-date"])])]),p.value=="admin"?(d(),f("div",Ne,[l("div",Ve,[e[17]||(e[17]=l("label",{class:"control-label"},[l("span",null,"供应商：")],-1)),l("div",qe,[n(a(re),{vendorId:a(s).vendorId,"onUpdate:vendorId":e[6]||(e[6]=t=>a(s).vendorId=t),onOnChange:a(y)},null,8,["vendorId","onOnChange"])])])])):i("",!0)]),l("div",Ue,[l("div",Fe,[e[20]||(e[20]=l("label",{class:"control-label"},null,-1)),l("div",Be,[n(g,{type:"primary",plain:"",onClick:a(y)},{default:o(()=>e[18]||(e[18]=[m("搜索",-1)])),_:1,__:[18]},8,["onClick"]),n(g,{plain:"",onClick:E},{default:o(()=>e[19]||(e[19]=[m("重置",-1)])),_:1,__:[19]})])])])]),p.value=="vendor"?(d(),f("div",Re,[l("div",ze,[n(x,null,{default:o(()=>[n(a(h),{params:{act:"add"},isDrawer:"",path:"vendor/supplier/product/Info",title:"添加商品",width:"1100px",onOkCallback:a(c)},{default:o(()=>[n(g,{type:"primary"},{default:o(()=>e[21]||(e[21]=[m("添加商品",-1)])),_:1,__:[21]})]),_:1},8,["onOkCallback"]),r.value==0||r.value==1?(d(),u(A,{key:0,title:"您确认要批量移入回收站吗？",onConfirm:e[7]||(e[7]=t=>D("recycle"))},{reference:o(()=>[n(g,{disabled:a(S).length===0},{default:o(()=>e[22]||(e[22]=[m("批量移入回收站",-1)])),_:1,__:[22]},8,["disabled"])]),_:1})):i("",!0),r.value==7?(d(),u(A,{key:1,title:"您确认要批量还原吗？",onConfirm:e[8]||(e[8]=t=>D("restore"))},{reference:o(()=>[n(g,{disabled:a(S).length===0},{default:o(()=>e[23]||(e[23]=[m("批量还原",-1)])),_:1,__:[23]},8,["disabled"])]),_:1})):i("",!0),r.value==1?(d(),u(A,{key:2,title:"您确认要批量断供吗？",onConfirm:e[9]||(e[9]=t=>D("outage"))},{reference:o(()=>[n(g,{disabled:a(S).length===0},{default:o(()=>e[24]||(e[24]=[m("批量断供",-1)])),_:1,__:[24]},8,["disabled"])]),_:1})):i("",!0),a(S).length>0?(d(),f("span",Ee,[e[25]||(e[25]=m(" 已选择：",-1)),l("b",null,b(a(S).length),1),e[26]||(e[26]=m(" 项 ",-1))])):i("",!0)]),_:1})])])):i("",!0)]),_:1},8,["model"])]),l("div",$e,[n(J,{spinning:a(N)},{default:o(()=>[n(H,{data:a(F),total:a(T),"row-key":"id",onSelectionChange:a(R),onSortChange:a(B)},{empty:o(()=>[l("div",et,[a(N)?i("",!0):(d(),f("div",tt,"暂无数据"))])]),default:o(()=>[n(v,{type:"selection",width:"32"}),n(v,{label:"商品名称",prop:"id",sortable:"custom","min-width":320},{default:o(({row:t})=>[l("div",Ke,[t.picThumb?(d(),f("div",Le,[l("a",{href:a(oe)({path:"product",sn:t.productSn}),target:"_blank"},[l("img",{src:a(se)(t.picThumb),height:"68",width:"68",alt:""},null,8,je)],8,Ye)])):i("",!0),l("div",Me,[l("div",Ge,[p.value=="admin"&&t.productState!=1?(d(),u(a(te),{key:0,max:100,"org-value":t.productName,"onUpdate:orgValue":O=>t.productName=O,params:{id:t.id,field:"productName"},requestApi:a(me),label:"商品名称",type:"textarea"},{default:o(()=>[l("div",null,b(t.productName),1)]),_:2},1032,["org-value","onUpdate:orgValue","params","requestApi"])):i("",!0),p.value=="vendor"?(d(),f("div",He,b(t.productName),1)):i("",!0),p.value=="admin"?(d(),f("div",Je,b(t.productName),1)):i("",!0)]),t.vendorName?(d(),f("p",Qe,[e[27]||(e[27]=l("span",{class:"span-tit"},"供应商：",-1)),l("span",We,b(t.vendorName),1)])):i("",!0)])])]),_:1}),n(v,{width:100,label:"商品分类",prop:"productCategoryName",align:"center"},{default:o(({row:t})=>[l("div",null,b(t.productCategoryName||"--"),1)]),_:1}),n(v,{width:100,label:"品牌",prop:"productBrandName",align:"center"},{default:o(({row:t})=>[l("div",null,b(t.productBrandName||"--"),1)]),_:1}),n(v,{width:100,label:"供货价",prop:"supplyPrice",sortable:"custom",align:"center"},{default:o(({row:t})=>[l("div",null,b(t.supplyPrice),1)]),_:1}),n(v,{width:100,label:"库存",prop:"sumSkuStock",sortable:"custom",align:"center"},{default:o(({row:t})=>[l("div",null,b(t.sumSkuStock),1)]),_:1}),n(v,{width:100,label:"商品状态",prop:"productState",align:"center"},{default:o(({row:t})=>[p.value=="admin"?(d(),f(Z,{key:0},[t.productState===1?(d(),f("div",Xe,"在供")):(d(),f("div",Ze,"断供"))],64)):(d(),u(a(ae),{key:1,checked:t.productState,"onUpdate:checked":O=>t.productState=O,params:{id:t.id,field:"productState"},requestApi:a(P),onCallback:a(c)},null,8,["checked","onUpdate:checked","params","requestApi","onCallback"]))]),_:1}),n(v,{width:100,label:"销量",prop:"sumSalesVolume",sortable:"custom",align:"center"},{default:o(({row:t})=>[m(b(t.sumSalesVolume),1)]),_:1}),r.value===6?(d(),u(v,{key:0,width:120,label:"失败原因","show-overflow-tooltip":""},{default:o(({row:t})=>[m(b(t.auditFailReason),1)]),_:1})):i("",!0),p.value=="vendor"&&r.value!=6?(d(),u(v,{key:1,width:180,fixed:"right",label:"操作"},{default:o(({row:t})=>[n(x,null,{default:o(()=>[t.productState===0&&r.value!=7?(d(),u(a(h),{key:0,maskClose:!1,params:{act:"detail",id:t.id},isDrawer:"",path:"vendor/supplier/product/Info",title:"编辑商品",width:"1100px",onOkCallback:a(c)},{default:o(()=>e[28]||(e[28]=[l("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[28]},1032,["params","onOkCallback"])):i("",!0),t.auditState===1&&t.productState===0&&r.value!=7?(d(),u(C,{key:1,direction:"vertical"})):i("",!0),t.auditState===1&&t.productState===0&&r.value!=7?(d(),u(a(w),{key:2,params:{id:t.id,field:"productState",val:1},requestApi:a(P),title:"确定起售该商品吗？",message:"操作成功",onAfterDelete:a(c)},{default:o(()=>e[29]||(e[29]=[m(" 起售 ",-1)])),_:2,__:[29]},1032,["params","requestApi","onAfterDelete"])):i("",!0),t.productState===1&&r.value!=7?(d(),u(a(w),{key:3,params:{id:t.id,field:"productState",val:0},requestApi:a(P),title:"确定停止供应该商品吗？",message:"操作成功",onAfterDelete:a(c)},{default:o(()=>e[30]||(e[30]=[m(" 断供 ",-1)])),_:2,__:[30]},1032,["params","requestApi","onAfterDelete"])):i("",!0),t.productState===1&&r.value!=7?(d(),u(C,{key:4,direction:"vertical"})):i("",!0),t.productState===1&&r.value!=7?(d(),u(a(h),{key:5,maskClose:!1,params:{act:"detail",id:t.id,examine:1},isDrawer:"",path:"vendor/supplier/product/Info",title:"查看商品",width:"1000px",onOkCallback:a(c)},{default:o(()=>e[31]||(e[31]=[l("a",{class:"btn-link"},"查看",-1)])),_:2,__:[31]},1032,["params","onOkCallback"])):i("",!0),r.value===7?(d(),u(a(w),{key:6,params:{ids:[t.id],type:"restore"},requestApi:a(q),title:"确定还原该商品吗？",message:"操作成功",onAfterDelete:a(c)},{default:o(()=>e[32]||(e[32]=[m(" 还原 ",-1)])),_:2,__:[32]},1032,["params","requestApi","onAfterDelete"])):i("",!0),t.auditState===1&&r.value!=7?(d(),u(C,{key:7,direction:"vertical"})):i("",!0),t.auditState===1&&r.value!=7?(d(),u(G,{key:8,trigger:"hover","hide-on-click":!1},{dropdown:o(()=>[n(M,null,{default:o(()=>[n(a(w),{params:{ids:[t.id],type:"recycle"},requestApi:a(q),title:"确定把该商品移入回收站吗？",message:"操作成功",onAfterDelete:a(c)},{default:o(()=>[n(j,null,{default:o(()=>[n(g,{style:{width:"100%"},link:"",type:"primary"},{default:o(()=>e[33]||(e[33]=[m("移入回收站",-1)])),_:1,__:[33]})]),_:1})]),_:2},1032,["params","requestApi","onAfterDelete"])]),_:2},1024)]),default:o(()=>[e[34]||(e[34]=l("span",{class:"iconfont-admin icon-gengduo1 btn-link"},null,-1))]),_:2,__:[34]},1024)):i("",!0)]),_:2},1024)]),_:1})):i("",!0),p.value=="admin"?(d(),u(v,{key:2,width:150,fixed:"right",label:"操作"},{default:o(({row:t})=>[n(x,null,{default:o(()=>[n(a(h),{maskClose:!1,params:{act:"detail",id:t.id,examine:1},isDrawer:"",path:"vendor/supplier/product/Info",title:"查看商品",width:"1000px",showFooter:!1,onOkCallback:a(c)},{default:o(()=>e[35]||(e[35]=[l("a",{class:"btn-link"},"查看",-1)])),_:2,__:[35]},1032,["params","onOkCallback"]),r.value==8&&t.auditState===0?(d(),u(C,{key:0,direction:"vertical"})):i("",!0),r.value==8&&t.auditState===0?(d(),u(a(h),{key:1,maskClose:!1,params:{act:"detail",id:t.id},dialogClass:"noPadding",isDrawer:"",path:"vendor/supplier/product/Examine",title:"商品审核",width:"600px",onOkCallback:a(c)},{default:o(()=>e[36]||(e[36]=[l("a",{class:"btn-link"},"去处理",-1)])),_:2,__:[36]},1032,["params","onOkCallback"])):i("",!0)]),_:2},1024)]),_:1})):i("",!0)]),_:1},8,["data","total","onSelectionChange","onSortChange"])]),_:1},8,["spinning"]),a(T)>0?(d(),f("div",at,[n(a(le),{page:a(s).page,"onUpdate:page":e[10]||(e[10]=t=>a(s).page=t),size:a(s).size,"onUpdate:size":e[11]||(e[11]=t=>a(s).size=t),total:a(T),onCallback:a(c)},null,8,["page","size","total","onCallback"])])):i("",!0)])])])])}}}),Ot=ee(lt,[["__scopeId","data-v-ea85498d"]]);export{Ot as default};
