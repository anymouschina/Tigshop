/* empty css             */import"./index-DVG44k_-.js";import{a0 as D,d as E,P as J,a as M,v as R,ak as x,r as w,o as G,e as u,f,g as i,h as t,F as h,m as L,n as H,t as T,y as a,l,j as v,k as c,i as _,J as K,_ as Q}from"./index-BEWhCL1q.js";/* empty css                                                                    */import{P as W}from"./Pagination-4FaohhlG.js";import{_ as C}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";const X=$=>D({url:"promotion/promotion/list",method:"get",params:$}),Y=()=>D({url:"promotion/promotion/getPromotionCount",method:"get"}),Z={class:"container"},tt={class:"content_wrapper"},st={class:"row"},et={class:"col activity"},lt={class:"tabs flex"},at=["onClick"],it={class:"num"},ot={class:"txt"},nt={class:"col"},pt={class:"col"},dt={style:{position:"relative"}},rt=["onClick"],mt={class:"empty-warp"},ut={key:0,class:"empty-bg"},ct={key:0,class:"pagination-con"},vt=E({__name:"List",setup($){const I=J(),r=M(),N=R(),k=x([{value:1,label:"进行中的活动",num:"-"},{value:2,label:"7天内到期活动",num:"-"},{value:3,label:"未开始活动",num:"-"}]),z=x([{value:0,label:"全部"},{value:1,label:"秒杀"},{value:2,label:"优惠券"},{value:6,label:"限时折扣"},{value:3,label:"满减"},{value:5,label:"满赠"}]),o=x({page:1,size:N.get("pageSize"),sortField:"",sortOrder:"",timeType:1,types:0}),P=w([]),y=w(!0),g=w(0),m=async()=>{y.value=!0;let n=[];o.types===0?n=[]:o.types===3?n=[3,4]:n=[o.types];try{const s=await Y();k[0].num=s.timeType1Count,k[1].num=s.timeType2Count,k[2].num=s.timeType3Count;const p=await X({...o,type:n.join(",")});P.value=p.records,g.value=p.total}catch(s){K.error(s.message)}finally{y.value=!1}};G(()=>{m()});const O=n=>{o.timeType=n,m()},S=n=>{o.types=z[n].value,m()},d=n=>{switch(n){case 1:r.push({path:"/promotion/seckill/list"});break;case 2:r.push({path:"/promotion/coupon/list"});break;case 6:r.push({path:"/promotion/limitdiscount-gift/list"});break;case 3:r.push({path:"/promotion/full-reduction/list"});break;case 5:r.push({path:"/promotion/reward-gift/list"});break;case 9:r.push({path:"/promotion/sign-in-setting/list"});break;case 7:r.push({path:"/promotion/recharge-setting/list"});break;case 10:r.push({path:"/promotion/product-gift/list"});break}};return(n,s)=>{const p=u("el-col"),B=u("el-row"),F=u("el-tab-pane"),q=u("el-tabs"),b=u("el-table-column"),A=u("el-divider"),V=u("el-table"),j=u("a-spin");return i(),f("div",Z,[t("div",tt,[t("div",st,[t("div",et,[t("div",null,[s[10]||(s[10]=t("div",{class:"tip"},"仅统计优惠券、满减/送、限时折扣、秒杀、多人拼团、赠品 活动",-1)),t("div",lt,[(i(!0),f(h,null,L(k,e=>(i(),f("div",{class:H([{active:e.value==o.timeType},"item"]),onClick:U=>O(e.value)},[t("div",it,T(e.num),1),t("div",ot,T(e.label),1)],10,at))),256))])])]),t("div",nt,[t("div",null,[s[19]||(s[19]=t("h2",null,"商家常用",-1)),a(B,{gutter:16,class:"app-wrapper cursor-pointer"},{default:l(()=>[a(p,{lg:6,md:8,sm:12,xs:12,class:"app-wrapper-item",onClick:s[0]||(s[0]=e=>d(2))},{default:l(()=>s[11]||(s[11]=[t("div",{class:"item"},[t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-youhuiquan"})]),t("div",null,[t("div",{class:"name"},"优惠券"),t("div",{class:"tip"},"向客户发放店铺优惠券")])],-1)])),_:1,__:[11]}),a(p,{lg:6,md:8,sm:12,xs:12,class:"app-wrapper-item",onClick:s[1]||(s[1]=e=>d(1))},{default:l(()=>s[12]||(s[12]=[t("div",{class:"item"},[t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-miaosha"})]),t("div",null,[t("div",{class:"name"},"限时秒杀"),t("div",{class:"tip"},"快速抢购引导顾客更多消费")])],-1)])),_:1,__:[12]}),a(p,{lg:6,md:8,sm:12,xs:12,class:"app-wrapper-item",onClick:s[2]||(s[2]=e=>d(3))},{default:l(()=>s[13]||(s[13]=[t("div",{class:"item"},[t("div",{class:"icon-col"},[t("p",null,"减")]),t("div",null,[t("div",{class:"name"},"满减"),t("div",{class:"tip"},"购满一定金额或件数享受优惠")])],-1)])),_:1,__:[13]}),a(p,{lg:6,md:8,sm:12,xs:12,class:"app-wrapper-item",onClick:s[3]||(s[3]=e=>d(5))},{default:l(()=>s[14]||(s[14]=[t("div",{class:"item"},[t("div",{class:"icon-col"},[t("p",null,"送")]),t("div",null,[t("div",{class:"name"},"满送"),t("div",{class:"tip"},"购满一定金额或件数享受优惠")])],-1)])),_:1,__:[14]}),a(p,{lg:6,md:8,sm:12,xs:12,class:"app-wrapper-item",onClick:s[4]||(s[4]=e=>d(6))},{default:l(()=>s[15]||(s[15]=[t("div",{class:"item"},[t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-time-limit"})]),t("div",null,[t("div",{class:"name"},"限时折扣"),t("div",{class:"tip"},"设置商品限时打折促销")])],-1)])),_:1,__:[15]}),_(I)==="admin"?(i(),v(p,{key:0,lg:6,md:8,sm:12,xs:12,class:"app-wrapper-item",onClick:s[5]||(s[5]=e=>d(9))},{default:l(()=>s[16]||(s[16]=[t("div",{class:"item"},[t("div",{class:"icon-col"},[t("i",{class:"iconfont-admin icon-qiandao"})]),t("div",null,[t("div",{class:"name"},"日历签到"),t("div",{class:"tip"},"每日签到领取积分或奖励")])],-1)])),_:1,__:[16]})):c("",!0),a(p,{lg:6,md:8,sm:12,xs:12,class:"app-wrapper-item",onClick:s[6]||(s[6]=e=>d(10))},{default:l(()=>s[17]||(s[17]=[t("div",{class:"item"},[t("div",{class:"icon-col"},[t("p",null,"赠")]),t("div",null,[t("div",{class:"name"},"赠品"),t("div",{class:"tip"},"设置赠品, 回馈客户")])],-1)])),_:1,__:[17]}),_(I)==="admin"?(i(),v(p,{key:1,lg:6,md:8,sm:12,xs:12,class:"app-wrapper-item",onClick:s[7]||(s[7]=e=>d(7))},{default:l(()=>s[18]||(s[18]=[t("div",{class:"item"},[t("div",{class:"icon-col"},[t("p",null,"充")]),t("div",null,[t("div",{class:"name"},"余额充值"),t("div",{class:"tip"},"充值店铺余额")])],-1)])),_:1,__:[18]})):c("",!0)]),_:1})])]),t("div",pt,[s[24]||(s[24]=t("h2",null,"活动记录",-1)),a(q,{type:"card",onTabChange:S},{default:l(()=>[(i(!0),f(h,null,L(z,e=>(i(),v(F,{label:e.label,value:e.value},null,8,["label","value"]))),256))]),_:1}),a(j,{spinning:y.value},{default:l(()=>[a(V,{data:P.value,loading:y.value,total:g.value,"row-key":"couponId"},{empty:l(()=>[t("div",mt,[y.value?c("",!0):(i(),f("div",ut,"暂无数据"))])]),default:l(()=>[a(b,{label:"活动名称",prop:"promotionName",width:"300"},{default:l(({row:e})=>[t("div",dt,[t("div",null,T(e.promotionName||"--"),1)])]),_:1}),a(b,{label:"活动类型",prop:"typeText",width:"300"}),a(b,{label:"活动时间",prop:"timeText"}),a(b,{label:"操作",width:"110"},{default:l(({row:e})=>[t("a",{class:"btn-link",onClick:U=>d(e.type)},"查看",8,rt),a(A,{direction:"vertical"}),e.type==1?(i(),v(_(C),{key:0,params:{act:"detail",id:e.relationId},isDrawer:"",path:"promotion/seckill/Info",title:"编辑限时秒杀",width:"800px",onOkCallback:m},{default:l(()=>s[20]||(s[20]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[20]},1032,["params"])):c("",!0),e.type==2?(i(),v(_(C),{key:1,params:{act:"detail",id:e.relationId},isDrawer:"",path:"promotion/coupon/Info",title:"编辑优惠券",width:"800px",onOkCallback:m},{default:l(()=>s[21]||(s[21]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[21]},1032,["params"])):c("",!0),e.type==6?(i(),v(_(C),{key:2,params:{act:"detail",id:e.relationId},isDrawer:"",path:"promotion/productActivity/limitdiscount/Info",title:"编辑限时折扣",width:"900px",onOkCallback:m},{default:l(()=>s[22]||(s[22]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[22]},1032,["params"])):c("",!0),e.type==3||e.type==5||e.type==4?(i(),v(_(C),{key:3,params:{act:"detail",id:e.relationId,promotionType:e.type==4?2:e.type==3?1:3},isDrawer:"",path:"promotion/productActivity/Info",title:"编辑优惠活动",width:"800px",onOkCallback:m},{default:l(()=>s[23]||(s[23]=[t("a",{class:"btn-link"},"编辑",-1)])),_:2,__:[23]},1032,["params"])):c("",!0)]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),g.value>0?(i(),f("div",ct,[a(_(W),{page:o.page,"onUpdate:page":s[8]||(s[8]=e=>o.page=e),size:o.size,"onUpdate:size":s[9]||(s[9]=e=>o.size=e),total:g.value,onCallback:m},null,8,["page","size","total"])])):c("",!0)])])])])}}}),xt=Q(vt,[["__scopeId","data-v-edf80031"]]);export{xt as default};
