/* empty css             */import{d as x,A as m,r as v,c as O,w as P,f as u,g as f,t as z,v as Q,ak as j,o as U,e as r,h as o,y as e,l,K as S,k as F,i as p,F as E,m as H,J as R,_ as W}from"./index-BEWhCL1q.js";import{D as T}from"./DeleteRecord-C4_57oHW.js";/* empty css                                                                    */import{P as $}from"./Pagination-4FaohhlG.js";import{i as J}from"./format-C8RAoEAk.js";import{d as K}from"./brand-NPYEvOSK.js";import{t as G,g as X}from"./conversation-CU3jmqty.js";import"./Verify.vue_vue_type_style_index_0_lang-B6mvUwPP.js";import{r as Y}from"./zh-cn-Crj8NPt5.js";import{S as Z}from"./StatusDot-V36Ff0I6.js";const ee=x({__name:"RelativeTime",props:{time:{type:String,default:""}},setup(k){m.extend(Y),m.locale("zh-cn");const g=k,b=v(m()),h=O(()=>m(g.time).from(b.value));return P(d=>{const n=m().diff(m(g.time),"second");let t;n<60?t=1e4:n<3600?t=6e4:n<86400?t=6e5:n<604800?t=36e5:t=864e5;const i=setInterval(()=>{b.value=m()},t);d(()=>clearInterval(i))}),(d,n)=>(f(),u("span",null,z(h.value),1))}}),te={class:"container"},se={class:"content_wrapper"},oe={class:"lyecs-table-list-warp",style:{"margin-bottom":"0"}},ae={class:"list-table-tool lyecs-search-warp"},le={class:"advanced-search-warp list-table-tool-row"},ne={class:"simple-form-warp"},re={class:"simple-form-field"},ie={class:"form-group"},de={class:"control-container"},ce={class:"simple-form-field"},me={class:"table-container"},pe={class:"kehu"},_e={class:"title"},ue={class:"message-list"},fe={class:"item"},ve={class:"empty-warp"},ge={key:0,class:"empty-bg"},be={key:0,class:"pagination-con"},he=x({__name:"QueueList",setup(k,{expose:g}){const b=Q(),h=v([]),d=v(!0),n=v(0);v([]);const t=j({page:1,size:b.get("pageSize"),sortField:"",sortOrder:"",keyword:"",firstWord:"",userFrom:""}),i=async()=>{d.value=!0;try{const c=await X({...t});h.value=c.records,n.value=c.total}catch(c){R.error(c.message)}finally{d.value=!1}};U(()=>{i()});const C=()=>{i()},I=({prop:c,order:s})=>{t.sortField=c,t.sortOrder=s=="ascending"?"asc":s=="descending"?"desc":"",i()};return g({loadFilter:i}),(c,s)=>{const w=r("el-option"),L=r("el-select"),A=r("el-button"),V=r("el-form"),D=r("el-avatar"),_=r("el-table-column"),M=r("sapn"),q=r("el-divider"),B=r("el-table"),N=r("a-spin");return f(),u("div",te,[o("div",se,[o("div",oe,[o("div",ae,[e(V,{model:t},{default:l(()=>[o("div",le,[o("div",ne,[o("div",re,[o("div",ie,[s[3]||(s[3]=o("label",{class:"control-label"},[o("span",null,"咨询来源：")],-1)),o("div",de,[e(L,{modelValue:t.userFrom,"onUpdate:modelValue":s[0]||(s[0]=a=>t.userFrom=a),clearable:""},{default:l(()=>[e(w,{value:"",label:"全部"}),e(w,{value:"pc",label:"pc"}),e(w,{value:"h5",label:"h5"})]),_:1},8,["modelValue"])])])]),o("div",ce,[e(A,{type:"primary",onClick:C},{default:l(()=>s[4]||(s[4]=[S("搜索",-1)])),_:1,__:[4]})])])])]),_:1},8,["model"])]),o("div",me,[e(N,{spinning:d.value},{default:l(()=>[e(B,{data:h.value,loading:d.value,total:n.value,"row-key":"brandId",onSortChange:I},{empty:l(()=>[o("div",ve,[d.value?F("",!0):(f(),u("div",ge,"暂无数据"))])]),default:l(()=>[e(_,{label:"客户",prop:"brandId"},{default:l(({row:a})=>{var y;return[o("div",pe,[e(D,{class:"av",src:p(J)(a.user.avatar)},null,8,["src"]),o("div",_e,z((y=a.user)==null?void 0:y.nickname),1)])]}),_:1}),e(_,{label:"最新两条消息"},{default:l(({row:a})=>[o("div",ue,[(f(!0),u(E,null,H(a.userLastTwoMessage.slice(0,2),y=>(f(),u("div",fe,[e(Z,{color:"#44bb00",flicker:!1}),e(M,{innerHTML:y.content.content},null,8,["innerHTML"])]))),256))])]),_:1}),e(_,{prop:"addTime",width:160,label:"进入排队时间"}),e(_,{width:100,label:"排队时长",sortable:"custom"},{default:l(({row:a})=>[e(p(ee),{time:a.addTime},null,8,["time"])]),_:1}),e(_,{width:100,label:"咨询来源",prop:"userFrom",sortable:"custom"}),e(_,{width:120,fixed:"right",label:"操作"},{default:l(({row:a})=>[e(p(T),{title:"您确定要接入会话吗？",message:"接入成功",params:{conversationId:a.id},requestApi:p(G),onAfterDelete:i},{default:l(()=>s[5]||(s[5]=[S("接入会话",-1)])),_:2,__:[5]},1032,["params","requestApi"]),e(q,{direction:"vertical"}),e(p(T),{params:{id:a.id},requestApi:p(K),onAfterDelete:i},{default:l(()=>s[6]||(s[6]=[S("删除",-1)])),_:2,__:[6]},1032,["params","requestApi"])]),_:1})]),_:1},8,["data","loading","total"])]),_:1},8,["spinning"]),n.value>0?(f(),u("div",be,[e(p($),{page:t.page,"onUpdate:page":s[1]||(s[1]=a=>t.page=a),size:t.size,"onUpdate:size":s[2]||(s[2]=a=>t.size=a),total:n.value,onCallback:i},null,8,["page","size","total"])])):F("",!0)])])])])}}}),ye=W(he,[["__scopeId","data-v-f49c65d7"]]),Ve=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"}));export{ye as Q,ee as _,Ve as a};
