import{d as E,r as i,a as R,a5 as T,o as q,J as p,e as r,f as L,g as V,h as C,j as P,k as h,l as o,y as a,E as j,K as f,I as F}from"./index-BEWhCL1q.js";import{c as J,e as K}from"./eCard-CM0dQMEM.js";const M={class:"container"},O={class:"content_wrapper"},z={class:"lyecs-form-table"},Q=E({__name:"Info",props:{id:{type:Number,default:0},groupId:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(N,{expose:k,emit:I}){const n=I,s=N,m=i(!0),_=R().currentRoute.value.query,c=i(s.isDialog?s.act:String(_.act)),v=i(s.isDialog?s.id:Number(_.id)),S=c.value==="add"?"create":"update",g=T(),t=i({groupId:s.groupId,isUse:0});q(()=>{c.value==="detail"?U():m.value=!1});const U=async()=>{try{const l=await J(c.value,{id:v.value});Object.assign(t.value,l)}catch(l){p.error(l.message),n("close")}finally{m.value=!1}},b=async()=>{await g.value.validate();try{n("update:confirmLoading",!0);const l=await K(S,{id:v.value,...t.value});n("submitCallback",l),p.success("操作成功")}catch(l){p.error(l.message)}finally{n("update:confirmLoading",!1)}};return k({onFormSubmit:()=>{b()}}),(l,e)=>{const y=r("TigInput"),d=r("el-form-item"),w=r("el-radio"),B=r("el-radio-group"),x=r("el-button"),D=r("el-form");return V(),L("div",M,[C("div",O,[C("div",z,[m.value?h("",!0):(V(),P(D,{key:0,ref_key:"formRef",ref:g,model:t.value,"label-width":"auto"},{default:o(()=>[a(d,{prop:"cardNumber",label:"卡券名称",rules:[{required:!0,message:"电子卡券名称不能为空!"}]},{default:o(()=>[a(y,{classType:"tig-form-input",modelValue:t.value.cardNumber,"onUpdate:modelValue":e[0]||(e[0]=u=>t.value.cardNumber=u)},null,8,["modelValue"])]),_:1}),a(d,{prop:"cardPwd",label:"卡券密码",rules:[{required:!0,message:"电子卡券密码不能为空!"}]},{default:o(()=>[a(y,{classType:"tig-form-input",modelValue:t.value.cardPwd,"onUpdate:modelValue":e[1]||(e[1]=u=>t.value.cardPwd=u)},null,8,["modelValue"])]),_:1}),a(d,{label:"是否使用",prop:"isUse"},{default:o(()=>[a(B,{style:{width:"100%"},modelValue:t.value.isUse,"onUpdate:modelValue":e[2]||(e[2]=u=>t.value.isUse=u)},{default:o(()=>[a(w,{value:1},{default:o(()=>e[3]||(e[3]=[f("是",-1)])),_:1,__:[3]}),a(w,{value:0},{default:o(()=>e[4]||(e[4]=[f("否",-1)])),_:1,__:[4]})]),_:1},8,["modelValue"])]),_:1}),j(a(d,{"wrapper-col":{offset:4,span:16}},{default:o(()=>[a(x,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:b},{default:o(()=>e[5]||(e[5]=[f("提交",-1)])),_:1,__:[5]},512)]),_:1},512),[[F,!s.isDialog]])]),_:1},8,["model"]))])])])}}});export{Q as default};
