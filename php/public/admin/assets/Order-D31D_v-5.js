import{d as J,r as b,v as G,ak as C,o as H,c as Q,e as v,f as r,g as o,h as e,k as n,y as a,l as u,a2 as W,F as O,m as T,j as _,i,K as h,t as d,dt as U,n as X,J as Z,_ as tt}from"./index-BEWhCL1q.js";/* empty css             *//* empty css                                                                    */import{S as V}from"./SortButton-Bsisc0vM.js";import{P as et}from"./Pagination-4FaohhlG.js";import{P as st}from"./ProductCard-BDl7uMRW.js";import{b as lt}from"./bindShop-CqwN6G6E.js";import"./index-DVG44k_-.js";import{p as L}from"./format-C8RAoEAk.js";import"./Verify.vue_vue_type_style_index_0_lang-B6mvUwPP.js";import"./zh-cn-Crj8NPt5.js";import{T as I}from"./Tag-Bhu-jNjT.js";import"./SelectTimeInterval.vue_vue_type_style_index_0_scoped_207fe586_lang-B2T-ARqM.js";/* empty css                                                                  *//* empty css                                                                              */import{S as ot}from"./SelectTimeInterval-CHncG0ge.js";import{M as at}from"./MobileCard-BFqdI-Pd.js";import rt from"./SignTag-GfUPemyN.js";import{_ as nt}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";import"./time-BMcbgg5F.js";const dt={class:"container"},it={class:"content_wrapper"},ut={class:"lyecs-table-list-warp"},pt={class:"list-table-tool lyecs-search-warp"},ct={class:"advanced-search-warp list-table-tool-row"},vt={class:"simple-form-warp"},_t={class:"simple-form-field"},mt={class:"form-group"},ft={class:"control-container"},gt={class:"simple-form-field"},bt={class:"form-group"},yt={class:"control-container"},ht={class:"simple-form-field"},kt={class:"form-group"},wt={class:"simple-form-warp"},St={class:"simple-form-field"},xt={class:"control-container"},Ct={class:"table-container"},It={class:"custom-table"},Dt={class:"custom-table"},Ot={class:"data-tr"},Tt={colspan:"6"},Ft={class:"check-box"},Nt={class:"check-box"},zt={class:"displayRow flex flex-align-center flex-justify-between"},Ut={class:"displayColumn textR whiteSN widthAuto"},Vt=["rowspan"],Lt=["rowspan"],Pt={class:"displayColumn textR fz14"},Bt={class:"gray"},At=["rowspan"],Mt={class:"displayColumn textL"},Rt=["rowspan"],Yt={class:"displayColumn fz12 textL"},Kt={class:"gray"},$t={class:"black"},jt={class:"gray"},Et={class:"black"},qt={class:"gray user-address"},Jt={class:"black line1 value"},Gt=["rowspan"],Ht={class:"displayColumn textL"},Qt={key:0},Wt={class:"gray"},Xt=["rowspan"],Zt={key:0,class:"empty-warp"},te={key:0,class:"empty-bg"},ee={key:0,class:"pagination-con"},se=J({__name:"Order",props:{shopId:{type:Number,default:0}},setup(P){b(localStorage.getItem("adminType"));const F=G(),B=C([{value:-1,label:"全部",isShow:!0},{value:0,label:"待支付",isShow:!0},{value:1,label:"待发货",isShow:!0},{value:2,label:"已发货",isShow:!0},{value:3,label:"已取消",isShow:!0},{value:4,label:"无效",isShow:!0},{value:5,label:"已完成",isShow:!0},{value:-2,label:"已删除",isShow:!0}]);C([{value:0,label:"待发货"},{value:1,label:"已发货"},{value:2,label:"已收货"},{value:3,label:"配送中"},{value:4,label:"配送失败"}]),C([{value:0,label:"未付款"},{value:1,label:"支付中"},{value:2,label:"已付款"},{value:3,label:"退款中"},{value:4,label:"已退款"}]);const A=p=>{l.orderStatus=p,l.page=1,m.value=[],y()},M=P,k=b([]),w=b(!0),S=b(0),m=b([]),R=b(!1),l=C({page:1,size:F.get("pageSize"),sortField:"orderId",sortOrder:"desc",keyword:"",orderStatus:-1,endDate:"",startDate:"",shopId:M.shopId}),Y=()=>{l.page=1,l.size=F.get("pageSize"),l.sortField="orderId",l.sortOrder="desc",l.keyword="",l.orderStatus=-1,l.endDate="",l.startDate=""},y=async()=>{w.value=!0,m.value=[];try{const p=await lt({...l});k.value=p.records,S.value=p.total}catch(p){Z.error(p.message)}finally{w.value=!1}};H(()=>{y()});const f=()=>{y()};return Q(()=>{var p,s;return R.value=m.value.length>0&&((p=m.value)==null?void 0:p.length)===((s=k.value)==null?void 0:s.length),m.value.length>0&&m.value.length<k.value.length}),(p,s)=>{const D=v("el-button"),K=v("TigInput"),$=v("el-option"),j=v("el-select"),x=v("el-tooltip"),E=v("el-divider"),q=v("a-spin");return o(),r("div",dt,[e("div",it,[e("div",ut,[e("div",pt,[e("div",ct,[e("div",vt,[e("div",_t,[e("div",mt,[s[13]||(s[13]=e("label",{class:"control-label"},[e("span",null,"订单信息：")],-1)),e("div",ft,[a(K,{modelValue:l.keyword,"onUpdate:modelValue":s[0]||(s[0]=t=>l.keyword=t),name:"keyword",placeholder:"订单号/收货人姓名",onKeyup:W(f,["enter"]),clearable:"",onClear:f},{append:u(()=>[a(D,{onClick:f},{default:u(()=>s[12]||(s[12]=[e("span",{class:"iconfont icon-chakan1"},null,-1)])),_:1,__:[12]})]),_:1},8,["modelValue"])])])]),e("div",gt,[e("div",bt,[s[14]||(s[14]=e("label",{class:"control-label"},[e("span",null,"订单状态：")],-1)),e("div",yt,[a(j,{modelValue:l.orderStatus,"onUpdate:modelValue":s[1]||(s[1]=t=>l.orderStatus=t),clearable:"",onChange:A},{default:u(()=>[(o(!0),r(O,null,T(B,t=>(o(),_($,{label:t.label,value:t.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])])]),e("div",ht,[e("div",kt,[s[15]||(s[15]=e("label",{class:"control-label"},[e("span",null,"下单时间：")],-1)),a(i(ot),{"end-date":l.endDate,"onUpdate:endDate":s[2]||(s[2]=t=>l.endDate=t),"start-date":l.startDate,"onUpdate:startDate":s[3]||(s[3]=t=>l.startDate=t),clearable:!1,type:"date","value-format":"YYYY-MM-DD"},null,8,["end-date","start-date"])])]),e("div",wt,[e("div",St,[s[18]||(s[18]=e("label",{class:"control-label"},null,-1)),e("div",xt,[a(D,{type:"primary",plain:"",onClick:f},{default:u(()=>s[16]||(s[16]=[h("搜索",-1)])),_:1,__:[16]}),a(D,{plain:"",onClick:Y},{default:u(()=>s[17]||(s[17]=[h("重置",-1)])),_:1,__:[17]})])])])])])]),e("div",Ct,[a(q,{spinning:w.value},{default:u(()=>[e("table",It,[e("thead",null,[e("tr",null,[e("th",null,[a(V,{sortField:l.sortField,"onUpdate:sortField":s[4]||(s[4]=t=>l.sortField=t),sortOrder:l.sortOrder,"onUpdate:sortOrder":s[5]||(s[5]=t=>l.sortOrder=t),sortName:"orderId",text:"订单信息(下单时间排序)",onLoadData:s[6]||(s[6]=t=>f())},null,8,["sortField","sortOrder"])]),s[19]||(s[19]=e("th",null,"所属店铺",-1)),e("th",null,[a(V,{sortField:l.sortField,"onUpdate:sortField":s[7]||(s[7]=t=>l.sortField=t),sortOrder:l.sortOrder,"onUpdate:sortOrder":s[8]||(s[8]=t=>l.sortOrder=t),sortName:"totalAmount",text:"订单金额",onLoadData:s[9]||(s[9]=t=>f())},null,8,["sortField","sortOrder"])]),s[20]||(s[20]=e("th",null,"会员名称",-1)),s[21]||(s[21]=e("th",null,"收货人信息",-1)),s[22]||(s[22]=e("th",{style:{"text-align":"start"}},"物流/支付信息",-1)),s[23]||(s[23]=e("th",{style:{"text-align":"start"}},"订单状态",-1))])])]),(o(!0),r(O,null,T(k.value,t=>(o(),r("table",Dt,[e("thead",null,[e("tr",Ot,[e("th",Tt,[t.mark?(o(),_(x,{key:0,disabled:!t.adminNote,content:t.adminNote,effect:"light",placement:"top"},{default:u(()=>[a(rt,{class:"check-box tag",value:t.mark},null,8,["value"])]),_:2},1032,["disabled","content"])):n("",!0),e("span",Ft,"订单编号："+d(t.orderSn),1),a(E,{direction:"vertical"}),e("span",Nt,"下单时间："+d(t.addTime),1),t.parentOrderId>0?(o(),_(i(nt),{key:1,params:{act:"parentDetail",id:t.orderId,isParent:!0},showClose:!1,showOnOk:!1,title:"订单详情 "+t.orderSn,isDrawer:"",style:{display:"inline-block"},path:"order/order/Info",width:"880px",onCallback:y},{default:u(()=>[t.parentOrderId>0?(o(),_(x,{key:0,content:"该订单已拆分，点击可查看父订单",effect:"light",placement:"top"},{default:u(()=>[a(i(I),{text:"子订单"})]),_:1})):n("",!0)]),_:2},1032,["params","title"])):n("",!0),t.shopId>0?(o(),_(x,{key:2,content:"订单来自店铺："+t.shop.shopTitle,effect:"light",placement:"top"},{default:u(()=>[a(i(I),{transparent:!1,text:"店铺"})]),_:2},1032,["content"])):n("",!0),t.orderSource?(o(),_(x,{key:3,content:"订单来自"+t.orderSource+"下单",effect:"light",placement:"top"},{default:u(()=>[a(i(I),{text:t.orderSource,transparent:!0,style:{"text-transform":"uppercase"}},null,8,["text"])]),_:2},1032,["content"])):n("",!0),t.isExchangeOrder?(o(),_(i(I),{key:4,transparent:!0,color:"red",text:"积分兑换"})):n("",!0)])])]),e("tbody",null,[(o(!0),r(O,null,T(t.items,(c,g)=>{var N,z;return o(),r("tr",null,[e("td",null,[e("div",zt,[a(i(st),{picThumb:c.picThumb,productId:c.productId,productName:c.productName,productType:c.productType,url:c.url,skuData:c.skuData},null,8,["picThumb","productId","productName","productType","url","skuData"]),e("div",Ut,[e("div",null,d(i(L)(c.price)),1),e("div",null,"× "+d(c.quantity),1)])])]),g==0?(o(),r("td",{key:0,rowspan:t.items.length},s[24]||(s[24]=[e("div",{class:"displayColumn textR fz14"}," 店铺名称 ",-1)]),8,Vt)):n("",!0),g==0?(o(),r("td",{key:1,rowspan:t.items.length},[e("div",Pt,[e("div",null,d(i(L)(t.totalAmount)),1),e("div",Bt,"(含运费："+d(t.shippingFee)+")",1)])],8,Lt)):n("",!0),g==0?(o(),r("td",{key:2,rowspan:t.items.length},[e("div",Mt,[e("div",null,[e("a",null,d(((N=t.user)==null?void 0:N.nickname)||((z=t.user)==null?void 0:z.username)||"--"),1)])])],8,At)):n("",!0),g==0?(o(),r("td",{key:3,rowspan:t.items.length},[e("div",Yt,[e("div",Kt,[s[25]||(s[25]=h(" 收货人： ",-1)),e("span",$t,d(i(U)(t.consignee,1,1)),1)]),e("div",jt,[s[26]||(s[26]=h(" 手机号： ",-1)),e("span",Et,[e("span",null,[a(at,{mobile:t.mobile},null,8,["mobile"])])])]),e("div",qt,[s[27]||(s[27]=e("span",{class:"label"}," 收货地址： ",-1)),e("span",Jt,d(i(U)(t.userAddress,16,0)),1)])])],8,Rt)):n("",!0),g==0?(o(),r("td",{key:4,rowspan:t.items.length},[e("div",Ht,[e("div",null,[e("span",null,d(t.payTypeId===1?"在线支付":t.payTypeId===2?"货到付款":"线下支付"),1)]),t.logisticsName?(o(),r("div",Qt,[h(d(t.shippingTypeName)+" ",1),e("span",Wt,d(""+t.logisticsName),1)])):n("",!0)])],8,Gt)):n("",!0),g==0?(o(),r("td",{key:5,rowspan:t.items.length},[e("span",{class:X({orange:t.orderStatus===0,black:t.orderStatus===1||t.orderStatus===2||t.orderStatus===4,gray:t.orderStatus===3,green:t.orderStatus===5})},d(t.orderStatusName),3)],8,Xt)):n("",!0)])}),256))])]))),256)),S.value==0?(o(),r("div",Zt,[w.value?n("",!0):(o(),r("div",te,"暂无数据"))])):n("",!0)]),_:1},8,["spinning"])]),S.value>0?(o(),r("div",ee,[a(i(et),{page:l.page,"onUpdate:page":s[10]||(s[10]=t=>l.page=t),size:l.size,"onUpdate:size":s[11]||(s[11]=t=>l.size=t),total:S.value,onCallback:y},null,8,["page","size","total"])])):n("",!0)])])])}}}),xe=tt(se,[["__scopeId","data-v-7c385efa"]]);export{xe as default};
