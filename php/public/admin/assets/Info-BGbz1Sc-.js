import{d as U,r as f,a as W,a5 as j,o as E,J as y,e as p,f as A,g as n,h as c,j as i,k as m,l as t,y as a,E as G,t as v,i as g,K as k,I as J}from"./index-BEWhCL1q.js";import{F as K}from"./UploadAvatar.vue_vue_type_style_index_0_scoped_3ec2e0ca_lang-BVJHh8ng.js";import"./index-DVG44k_-.js";import"./vuedraggable.umd-_qUe1n4L.js";import{_ as M}from"./Image.vue_vue_type_script_setup_true_lang-DC1N644b.js";import{p as O}from"./format-C8RAoEAk.js";import{S as h}from"./StatusDot-V36Ff0I6.js";import{b as P,d as $,u as z}from"./withdraw-BTcNNcx5.js";import"./BusinessImg-CuIKiE1z.js";import"./currencyManagement-BEhPZh48.js";import"./version-C520_GUm.js";import"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";const H={class:"container"},Q={class:"content_wrapper"},X={class:"lyecs-form-table"},pe=U({__name:"Info",props:{id:{type:Number,default:0},act:{type:String,default:""},isDialog:Boolean},emits:["submitCallback","update:confirmLoading","close"],setup(x,{expose:R,emit:C}){const _=C,d=x,V=f(!1),w=W().currentRoute.value.query,T=f(d.isDialog?d.act:String(w.act)),b=f(d.isDialog?d.id:Number(w.id));T.value;const D=j(),u=f({remark:""}),e=f({});E(()=>{B()});const B=async()=>{try{const s=await P({id:b.value});Object.assign(e.value,s)}catch(s){y.error(s.message),_("close")}finally{V.value=!1}},N=async()=>{await D.value.validate();try{if(_("update:confirmLoading",!0),e.value.status==0){const s=await $({id:b.value,...u.value});y.success("操作成功")}if(e.value.status==4){const s=await z({id:b.value,...u.value});y.success(s.message)}_("submitCallback",!0)}catch(s){y.error(s.message)}finally{_("update:confirmLoading",!1)}};return R({onFormSubmit:()=>{N()}}),(s,o)=>{const r=p("el-form-item"),S=p("el-radio"),q=p("el-radio-group"),F=p("TigInput"),I=p("el-button"),L=p("el-form");return n(),A("div",H,[c("div",Q,[c("div",X,[V.value?m("",!0):(n(),i(L,{key:0,ref_key:"formRef",ref:D,model:u.value,"label-width":"auto"},{default:t(()=>[a(r,{prop:"addTime",label:"申请时间"},{default:t(()=>[c("p",null,v(e.value.addTime),1)]),_:1}),a(r,{prop:"amount",label:"申请金额"},{default:t(()=>[c("p",null,v(g(O)(e.value.amount)),1)]),_:1}),a(r,{prop:"accountData.accountName",label:"状态"},{default:t(()=>[e.value.status==0||e.value.status==4?(n(),i(h,{key:0,color:"blue",flicker:!0})):m("",!0),e.value.status==2?(n(),i(h,{key:1,color:"red",flicker:!0})):m("",!0),e.value.status==3?(n(),i(h,{key:2,color:"green",flicker:!0})):m("",!0),c("span",null,v(e.value.statusText),1)]),_:1}),a(r,{prop:"accountData.accountName",label:"收款人"},{default:t(()=>{var l;return[c("p",null,v((l=e.value.accountData)==null?void 0:l.accountName),1)]}),_:1}),a(r,{prop:"accountData.accountNo",label:"收款账号"},{default:t(()=>{var l;return[c("p",null,v((l=e.value.accountData)==null?void 0:l.accountNo),1)]}),_:1}),e.value.paymentVoucher&&e.value.paymentVoucher!==null?(n(),i(r,{key:0,prop:"paymentVoucher",label:"打款凭证"},{default:t(()=>[a(g(M),{src:e.value.paymentVoucher,fit:"contain",style:{height:"80px",width:"80px"}},null,8,["src"])]),_:1})):m("",!0),e.value.status==0?(n(),i(r,{key:1,prop:"status",label:"审核结果",rules:[{required:!0,message:"请选择审核结果!"}]},{default:t(()=>[a(q,{modelValue:u.value.status,"onUpdate:modelValue":o[0]||(o[0]=l=>u.value.status=l)},{default:t(()=>[a(S,{value:4},{default:t(()=>o[3]||(o[3]=[k("审核通过",-1)])),_:1,__:[3]}),a(S,{value:2},{default:t(()=>o[4]||(o[4]=[k("审核不通过",-1)])),_:1,__:[4]})]),_:1},8,["modelValue"])]),_:1})):m("",!0),e.value.status==0&&u.value.status==2?(n(),i(r,{key:2,prop:"auditRemark",label:"拒绝原因",rules:[{required:!0,message:"拒绝原因不能为空!"}]},{default:t(()=>[a(F,{classType:"tig-form-input",type:"textarea",row:2,modelValue:u.value.auditRemark,"onUpdate:modelValue":o[1]||(o[1]=l=>u.value.auditRemark=l)},null,8,["modelValue"])]),_:1})):m("",!0),e.value.status==4?(n(),i(r,{key:3,prop:"paymentVoucher",label:"打款凭证",rules:[{required:!0,message:"打款凭证不能为空!"}]},{default:t(()=>[a(g(K),{photo:u.value.paymentVoucher,"onUpdate:photo":o[2]||(o[2]=l=>u.value.paymentVoucher=l)},null,8,["photo"])]),_:1})):m("",!0),G(a(r,{"wrapper-col":{offset:4,span:16}},{default:t(()=>[a(I,{ref:"submitBtn",class:"form-submit-btn",type:"primary",onClick:N},{default:t(()=>o[5]||(o[5]=[k("提交",-1)])),_:1,__:[5]},512)]),_:1},512),[[J,!d.isDialog]])]),_:1},8,["model"]))])])])}}});export{pe as default};
