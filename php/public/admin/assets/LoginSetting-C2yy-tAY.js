/* empty css             */import"./index-DVG44k_-.js";import{d as M,Q as U,v as B,a5 as D,r as w,o as h,d_ as F,J as k,e as f,f as A,g as x,y as t,l as a,h as o,k as C,K as i,t as b,i as r,j as O,a9 as y,d$ as N,_ as G}from"./index-BEWhCL1q.js";import{d as j}from"./format-C8RAoEAk.js";import{b as p}from"./version-C520_GUm.js";import{u as q}from"./theme-YtIM2XHr.js";import{_}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import"./index-BNk7xZkD.js";const z={class:"container"},$={class:"content_wrapper"},J={key:0,class:"web-content"},K={class:"wechat-config"},Q={class:"flex flex-align-center",style:{gap:"10px"}},H={class:"secret-txt line1",style:{"max-width":"380px"}},X={class:"flex flex-align-center",style:{gap:"10px"}},Y={class:"secret-txt line1",style:{"max-width":"380px"}},Z={class:"content_wrapper"},ee={class:"flex flex-align-center",style:{gap:"10px"}},le={class:"content_wrapper"},te={class:"flex flex-align-center",style:{gap:"10px"}},ae={class:"content_wrapper"},oe={class:"content_wrapper"},se={class:"selected-action"},ie=M({__name:"LoginSetting",setup(ne){const{themeInfo:W}=q();U(),B();const P=D(),S=w(!1),l=w({openEmailRegister:void 0,isOpenMobileAreaCode:void 0,usernamePrefix:"",openWechatRegister:void 0,wechatRegisterBindPhone:void 0,openWechatOauth:void 0,googleLoginOn:void 0,googleClientId:"",googleClientSecret:"",facebookLoginOn:void 0,facebookClientId:"",facebookClientSecret:"",wechatAppId:"",wechatAppSecret:"",wechatServerUrl:"",wechatServerToken:"",wechatServerSecret:""}),R=u=>{l.value.openWechatRegister=u,l.value.wechatRegisterBindPhone=u},T=u=>{l.value.wechatRegisterBindPhone=u};h(async()=>{await E()});const c=w(!0),E=async()=>{try{const u=await F();Object.assign(l.value,j(u))}catch(u){k.error(u.message)}finally{c.value=!1}},I=async()=>{await P.value.validate(),S.value=!0;try{const u=await N(l.value);k.success("修改成功")}catch(u){k.error(u.message)}finally{S.value=!1}};return(u,e)=>{const d=f("el-radio"),v=f("el-radio-group"),n=f("el-form-item"),m=f("TigInput"),g=f("el-button"),V=f("el-form"),L=f("a-spin");return x(),A("div",z,[t(L,{spinning:c.value},{default:a(()=>[t(V,{ref_key:"formRef",ref:P,model:l.value,"label-width":"160px",style:{display:"flex",gap:"12px","flex-direction":"column"}},{default:a(()=>[o("div",$,[e[31]||(e[31]=o("div",{class:"title"},"微信登录",-1)),t(n,{label:"开启公众号授权登录",prop:"openWechatOauth",class:"WidthMax"},{default:a(()=>[t(v,{modelValue:l.value.openWechatOauth,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.openWechatOauth=s),class:"itemWidth",onChange:R},{default:a(()=>[t(d,{value:1},{default:a(()=>e[16]||(e[16]=[i("是",-1)])),_:1,__:[16]}),t(d,{value:0},{default:a(()=>e[17]||(e[17]=[i("否",-1)])),_:1,__:[17]})]),_:1},8,["modelValue"]),e[18]||(e[18]=o("div",{class:"extra"},"此项设置控制是否开启微信注册及注册绑定手机，若为否将不支持开启微信注册及注册绑定手机",-1))]),_:1,__:[18]}),l.value.openWechatOauth==1?(x(),A("div",J,[t(n,{label:"",prop:""},{default:a(()=>[o("div",K,[t(V,{model:l.value,"label-width":"130px"},{default:a(()=>[t(n,{label:"微信APPID",prop:"wechatAppId"},{default:a(()=>[o("div",null,[t(m,{classType:"tig-form-input",modelValue:l.value.wechatAppId,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.wechatAppId=s),placeholder:"请输入微信APPID"},null,8,["modelValue"]),e[19]||(e[19]=o("div",{class:"extra"},"请从微信公众号后台获取，链接：https://mp.weixin.qq.com",-1))])]),_:1}),t(n,{label:"微信AppSecret",prop:"wechatAppSecret"},{default:a(()=>[o("div",null,[o("div",Q,[o("div",H,b(l.value.wechatAppSecret),1),t(r(_),{maskClose:!1,isDrawer:!1,params:{title:"微信AppSecret",content:l.value.wechatAppSecret},path:"setting/config/src/EditSecret",title:"微信AppSecret",width:"600px",onOkCallback:e[2]||(e[2]=s=>l.value.wechatAppSecret=s)},{default:a(()=>[t(g,{style:{"margin-top":"3px"},link:"",type:"primary"},{default:a(()=>e[20]||(e[20]=[i(" 编辑 ",-1)])),_:1,__:[20]})]),_:1},8,["params"])]),e[21]||(e[21]=o("div",{class:"extra"},"请从微信公众号后台获取，编辑完成后，点击下方提交按钮确认修改，请确保填写正确的微信AppSecret",-1))])]),_:1}),t(n,{label:"微信服务器Token",prop:"wechatServerToken"},{default:a(()=>[o("div",null,[t(m,{classType:"tig-form-input",modelValue:l.value.wechatServerToken,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.wechatServerToken=s),placeholder:"请输入微信服务器Token"},null,8,["modelValue"]),e[22]||(e[22]=o("div",{class:"extra"},"请从微信公众号后台获取",-1))])]),_:1}),t(n,{label:"微信服务器Secret",prop:"wechatServerSecret"},{default:a(()=>[o("div",null,[o("div",X,[o("div",Y,b(l.value.wechatServerSecret),1),t(r(_),{maskClose:!1,isDrawer:!1,params:{title:"微信服务器Secret",content:l.value.wechatServerSecret},path:"setting/config/src/EditSecret",title:"微信服务器Secret",width:"600px",onOkCallback:e[4]||(e[4]=s=>l.value.wechatServerSecret=s)},{default:a(()=>[t(g,{style:{"margin-top":"3px"},link:"",type:"primary"},{default:a(()=>e[23]||(e[23]=[i(" 编辑 ",-1)])),_:1,__:[23]})]),_:1},8,["params"])]),e[24]||(e[24]=o("div",{class:"extra"}," 请从微信公众号后台获取，编辑完成后，点击下方提交按钮确认修改，请确保填写正确的微信服务器Secret ",-1))])]),_:1})]),_:1},8,["model"])])]),_:1})])):C("",!0),t(n,{label:"PC微信扫码登录",prop:"openWechatRegister",class:"WidthMax"},{default:a(()=>[t(v,{modelValue:l.value.openWechatRegister,"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.openWechatRegister=s),class:"itemWidth",onChange:T,disabled:l.value.openWechatOauth==0},{default:a(()=>[t(d,{value:1},{default:a(()=>e[25]||(e[25]=[i("是",-1)])),_:1,__:[25]}),t(d,{value:0},{default:a(()=>e[26]||(e[26]=[i("否",-1)])),_:1,__:[26]})]),_:1},8,["modelValue","disabled"]),e[27]||(e[27]=o("div",{class:"extra"},"如果选是，PC端将显示微信扫码登录，小程序端将显示一键登录",-1))]),_:1,__:[27]}),t(n,{label:"是否需要绑定手机号",prop:"wechatRegisterBindPhone",class:"WidthMax"},{default:a(()=>[t(v,{modelValue:l.value.wechatRegisterBindPhone,"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.wechatRegisterBindPhone=s),class:"itemWidth",disabled:l.value.openWechatOauth==0||l.value.openWechatRegister==0},{default:a(()=>[t(d,{value:1},{default:a(()=>e[28]||(e[28]=[i("是",-1)])),_:1,__:[28]}),t(d,{value:0},{default:a(()=>e[29]||(e[29]=[i("否",-1)])),_:1,__:[29]})]),_:1},8,["modelValue","disabled"]),e[30]||(e[30]=o("div",{class:"extra"}," 如果选是在微信登录时需绑定手机号方可注册，便于全站统一账号；若选择否，则不需要绑定手机，直接注册但不利于账号管理 ",-1))]),_:1,__:[30]})]),o("div",Z,[e[38]||(e[38]=o("div",{class:"title"},"Facebook登录",-1)),t(n,{label:"是否开启Facebook登录",prop:"facebookLoginOn",class:"WidthMax"},{default:a(()=>[t(v,{modelValue:l.value.facebookLoginOn,"onUpdate:modelValue":e[7]||(e[7]=s=>l.value.facebookLoginOn=s),class:"itemWidth",disabled:!r(p)()},{default:a(()=>[t(d,{value:1},{default:a(()=>e[32]||(e[32]=[i("是",-1)])),_:1,__:[32]}),t(d,{value:0},{default:a(()=>e[33]||(e[33]=[i("否",-1)])),_:1,__:[33]})]),_:1},8,["modelValue","disabled"]),e[34]||(e[34]=o("div",{class:"extra"},"如果选是，登录页面显示Facebook登录快捷入口，如需开通设置，请购买跨境版授权。",-1))]),_:1,__:[34]}),t(n,{label:"应用APP ID",prop:"facebookClientId"},{default:a(()=>[o("div",null,[t(m,{classType:"tig-form-input",modelValue:l.value.facebookClientId,"onUpdate:modelValue":e[8]||(e[8]=s=>l.value.facebookClientId=s),disabled:l.value.facebookLoginOn==0||!r(p)()},null,8,["modelValue","disabled"]),e[35]||(e[35]=o("div",{class:"extra"},"需开通Facebook开发者平台，创建APP应用（未开通Tigshop APP商城可忽略）。",-1))])]),_:1}),t(n,{label:"应用APP SECRET",prop:"facebookClientSecret"},{default:a(()=>[o("div",null,[o("div",ee,[o("div",{class:"secret-txt line1",style:y({maxWidth:l.value.facebookLoginOn!==0||r(p)()?"380px":"450px"})},b(l.value.facebookClientSecret),5),l.value.facebookLoginOn!==0||r(p)()?(x(),O(r(_),{key:0,maskClose:!1,isDrawer:!1,params:{title:"应用APP SECRET",content:l.value.facebookClientSecret},path:"setting/config/src/EditSecret",title:"应用APP SECRET",width:"600px",onOkCallback:e[9]||(e[9]=s=>l.value.facebookClientSecret=s)},{default:a(()=>[t(g,{style:{"margin-top":"3px"},link:"",type:"primary"},{default:a(()=>e[36]||(e[36]=[i(" 编辑 ",-1)])),_:1,__:[36]})]),_:1},8,["params"])):C("",!0)]),e[37]||(e[37]=o("div",{class:"extra"},"编辑完成后，点击下方提交按钮确认修改，请确保填写正确的应用APP SECRET",-1))])]),_:1})]),o("div",le,[e[45]||(e[45]=o("div",{class:"title"},"Google登录",-1)),t(n,{label:"是否开启Google登录",prop:"googleLoginOn",class:"WidthMax"},{default:a(()=>[t(v,{modelValue:l.value.googleLoginOn,"onUpdate:modelValue":e[10]||(e[10]=s=>l.value.googleLoginOn=s),class:"itemWidth",disabled:!r(p)()},{default:a(()=>[t(d,{value:1},{default:a(()=>e[39]||(e[39]=[i("是",-1)])),_:1,__:[39]}),t(d,{value:0},{default:a(()=>e[40]||(e[40]=[i("否",-1)])),_:1,__:[40]})]),_:1},8,["modelValue","disabled"]),e[41]||(e[41]=o("div",{class:"extra"},"如果选是，登录页面将显示Google登录快捷入口。如需开通设置，请购买跨境版授权。",-1))]),_:1,__:[41]}),t(n,{label:"应用APP ID",prop:"googleClientId"},{default:a(()=>[o("div",null,[t(m,{classType:"tig-form-input",modelValue:l.value.googleClientId,"onUpdate:modelValue":e[11]||(e[11]=s=>l.value.googleClientId=s),disabled:l.value.googleLoginOn==0||!r(p)()},null,8,["modelValue","disabled"]),e[42]||(e[42]=o("div",{class:"extra"},"需开通Google开发者平台，创建APP应用（未开通Tigshop APP商城可忽略）。",-1))])]),_:1}),t(n,{label:"应用APP SECRET",prop:"googleClientSecret"},{default:a(()=>[o("div",null,[o("div",te,[o("div",{class:"secret-txt line1",style:y({maxWidth:l.value.googleLoginOn!==0||r(p)()?"380px":"450px"})},b(l.value.googleClientSecret),5),l.value.googleLoginOn!==0||r(p)()?(x(),O(r(_),{key:0,maskClose:!1,isDrawer:!1,params:{title:"应用APP SECRET",content:l.value.googleClientSecret},path:"setting/config/src/EditSecret",title:"应用APP SECRET",width:"600px",onOkCallback:e[12]||(e[12]=s=>l.value.googleClientSecret=s)},{default:a(()=>[t(g,{style:{"margin-top":"3px"},link:"",type:"primary"},{default:a(()=>e[43]||(e[43]=[i(" 编辑 ",-1)])),_:1,__:[43]})]),_:1},8,["params"])):C("",!0)]),e[44]||(e[44]=o("div",{class:"extra"},"编辑完成后，点击下方提交按钮确认修改，请确保填写正确的应用APP SECRET",-1))])]),_:1})]),o("div",ae,[e[49]||(e[49]=o("div",{class:"title"},"邮箱登录",-1)),t(n,{label:"是否开启邮箱注册",prop:"openEmailRegister",class:"WidthMax"},{default:a(()=>[t(v,{modelValue:l.value.openEmailRegister,"onUpdate:modelValue":e[13]||(e[13]=s=>l.value.openEmailRegister=s),class:"itemWidth"},{default:a(()=>[t(d,{value:1},{default:a(()=>e[46]||(e[46]=[i("开启",-1)])),_:1,__:[46]}),t(d,{value:0},{default:a(()=>e[47]||(e[47]=[i("关闭",-1)])),_:1,__:[47]})]),_:1},8,["modelValue"]),e[48]||(e[48]=o("div",{class:"extra"},"开启邮箱注册后，账号登录时可使用邮箱。",-1))]),_:1,__:[48]})]),o("div",oe,[e[54]||(e[54]=o("div",{class:"title"},"基础设置",-1)),t(n,{label:"手机是否选择区号",prop:"isOpenMobileAreaCode",class:"WidthMax"},{default:a(()=>[t(v,{modelValue:l.value.isOpenMobileAreaCode,"onUpdate:modelValue":e[14]||(e[14]=s=>l.value.isOpenMobileAreaCode=s),class:"itemWidth"},{default:a(()=>[t(d,{value:1},{default:a(()=>e[50]||(e[50]=[i("开启",-1)])),_:1,__:[50]}),t(d,{value:0},{default:a(()=>e[51]||(e[51]=[i("关闭",-1)])),_:1,__:[51]})]),_:1},8,["modelValue"]),e[52]||(e[52]=o("div",{class:"extra"},"如果开启则会将区号存入数据库，请谨慎选择（开启后不建议关闭）。",-1))]),_:1,__:[52]}),t(n,{label:"用户名前缀",prop:"usernamePrefix "},{default:a(()=>[o("div",null,[t(m,{classType:"tig-form-input",modelValue:l.value.usernamePrefix,"onUpdate:modelValue":e[15]||(e[15]=s=>l.value.usernamePrefix=s),placeholder:"可不填"},null,8,["modelValue"]),e[53]||(e[53]=o("div",{class:"extra"},"仅用在自动注册生成username时有效，参考格式：Tigshop_",-1))])]),_:1})])]),_:1},8,["model"]),e[56]||(e[56]=o("div",{style:{height:"20px"}},null,-1)),o("div",{class:"selected-action-warp selected-warp-left",style:y({left:r(W).layout!=="topMenu"?"369px":"270px"})},[o("div",se,[t(g,{loading:S.value,class:"form-submit-btn",size:"large",type:"primary",onClick:I},{default:a(()=>e[55]||(e[55]=[i("提 交",-1)])),_:1,__:[55]},8,["loading"])])],4)]),_:1,__:[56]},8,["spinning"])])}}}),xe=G(ie,[["__scopeId","data-v-ab21ea41"]]);export{xe as default};
