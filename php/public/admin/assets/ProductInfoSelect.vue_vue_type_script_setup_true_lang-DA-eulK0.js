import"./index-DVG44k_-.js";import{d as f}from"./vuedraggable.umd-_qUe1n4L.js";import{u as h,i as v}from"./format-C8RAoEAk.js";import{a as _}from"./product-IfnnwfpZ.js";import{_ as k}from"./DialogForm.vue_vue_type_script_setup_true_lang-CQB-6Tki.js";import{d as I,ai as S,r as p,aj as b,o as x,f as M,g as P,y as n,i as d,l as r,h as t,J as y}from"./index-BEWhCL1q.js";const C={class:"dec-goods-group-item dec-tip dec-goods-group-item-goods"},L={class:"dec-goods-group-item-con"},N={class:"item-goods-con"},j=["href","title"],w=["src"],B=["onClick"],A=I({__name:"ProductInfoSelect",props:S({isMultiple:{type:Boolean,default:!1},maxSelection:{type:Number,default:0}},{productList:{},productListModifiers:{}}),emits:["update:productList"],setup(a){p(null);const i=a,l=p([]),e=b(a,"productList");x(()=>{});const m=async c=>{try{const o=await _({ids:c.join(","),size:100,page:1});console.log(o.records),o.records.forEach(s=>{let u={productId:s.productId,productSn:s.productSn,productName:s.productName,productDesc:s.productDesc,productPrice:s.productPrice,marketPrice:s.marketPrice,picThumb:s.picThumb}}),e.value.push(...o.records),console.log(e.value)}catch(o){y.error(o.message)}},g=c=>{e.value.splice(c,1),l.value=e.value.filter(o=>o.productId!==0).map(o=>o.productId)};return(c,o)=>(P(),M("div",null,[n(d(f),{class:"dec-goods-group-list","item-key":"prodcutId",list:e.value,"ghost-class":"ghost","chosen-class":"chosenClass",animation:"300",onStart:o[0]||(o[0]=()=>{}),onEnd:o[1]||(o[1]=()=>{})},{item:r(({element:s,index:u})=>[t("div",C,[t("div",L,[t("div",N,[t("a",{href:d(h)({path:"product",id:s.productId}),target:"_blank",title:s.productName},[t("img",{class:"item-goods-img",src:d(v)(s.picThumb)},null,8,w)],8,j)]),t("div",{class:"del-item",onClick:D=>g(u)},o[2]||(o[2]=[t("i",{class:"ico-decorate icon-dec-cha"},null,-1)]),8,B)])])]),footer:r(()=>[n(d(k),{isDrawer:"",onOkCallback:m,title:"选择商品",width:"600px",path:"product/product/src/SelectProduct",params:{selectedIds:l.value,isMultiple:i.isMultiple,maxSelection:i.maxSelection}},{default:r(()=>o[3]||(o[3]=[t("div",{class:"dec-goods-group-item dec-goods-group-add dec-tip","data-title":"添加商品"},[t("div",{class:"dec-goods-group-item-con"},[t("div",{class:"item-goods-con"},[t("a",{href:"javascript:;"},[t("i",{class:"ico-decorate icon-dec-jia"})])])])],-1)])),_:1,__:[3]},8,["params"])]),_:1},8,["list"])]))}});export{A as _};
